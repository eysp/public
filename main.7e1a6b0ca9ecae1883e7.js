!function(e){function t(t){for(var a,s,o=t[0],l=t[1],c=t[2],u=0,p=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(d&&d(t);p.length;)p.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,o=1;o<n.length;o++){var l=n[o];0!==r[l]&&(a=!1)}a&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={0:0},i=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=l;i.push([458,1]),n()}([,,,function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesApplication",(function(){return s})),n.d(t,"KubernetesApplicationPersistedFolder",(function(){return l})),n.d(t,"KubernetesApplicationConfigurationVolume",(function(){return d})),n.d(t,"KubernetesApplicationPort",(function(){return p}));var a=n(373);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"KubernetesApplicationDeploymentTypes",(function(){return a.KubernetesApplicationDeploymentTypes})),n.d(t,"KubernetesApplicationDataAccessPolicies",(function(){return a.KubernetesApplicationDataAccessPolicies})),n.d(t,"KubernetesApplicationTypes",(function(){return a.KubernetesApplicationTypes})),n.d(t,"KubernetesApplicationTypeStrings",(function(){return a.KubernetesApplicationTypeStrings})),n.d(t,"KubernetesApplicationPublishingTypes",(function(){return a.KubernetesApplicationPublishingTypes})),n.d(t,"KubernetesApplicationPlacementTypes",(function(){return a.KubernetesApplicationPlacementTypes})),n.d(t,"KubernetesApplicationQuotaDefaults",(function(){return a.KubernetesApplicationQuotaDefaults})),n.d(t,"KubernetesPortainerApplicationStackNameLabel",(function(){return a.KubernetesPortainerApplicationStackNameLabel})),n.d(t,"KubernetesPortainerApplicationNameLabel",(function(){return a.KubernetesPortainerApplicationNameLabel})),n.d(t,"KubernetesPortainerApplicationOwnerLabel",(function(){return a.KubernetesPortainerApplicationOwnerLabel})),n.d(t,"KubernetesPortainerApplicationNote",(function(){return a.KubernetesPortainerApplicationNote}));var i=Object.freeze({Id:"",Name:"",StackName:"",ApplicationOwner:"",ApplicationName:"",ResourcePool:"",Image:"",CreationDate:0,Pods:[],Containers:[],Limits:{},ServiceType:"",ServiceId:"",ServiceName:"",HeadlessServiceName:void 0,LoadBalancerIPAddress:void 0,PublishedPorts:[],Volumes:[],Env:[],PersistedFolders:[],ConfigurationVolumes:[],DeploymentType:"Unknown",DataAccessPolicy:"Unknown",ApplicationType:"Unknown",RunningPodsCount:0,TotalPodsCount:0,Yaml:"",Note:"",Revisions:void 0,CurrentRevision:void 0,Raw:void 0,AutoScaler:void 0}),s=function e(){r(this,e),Object.assign(this,JSON.parse(JSON.stringify(i)))},o=Object.freeze({MountPath:"",PersistentVolumeClaimName:"",HostPath:""}),l=function e(){r(this,e),Object.assign(this,JSON.parse(JSON.stringify(o)))},c=Object.freeze({fileMountPath:"",rootMountPath:"",configurationKey:"",configurationName:""}),d=function e(){r(this,e),Object.assign(this,JSON.parse(JSON.stringify(c)))},u=Object.freeze({IngressRules:[],NodePort:0,TargetPort:0,Port:0,Protocol:""}),p=function e(){r(this,e),Object.assign(this,JSON.parse(JSON.stringify(u)))}},,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));var a=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.msg=t,this.err=n}},,,function(e,t,n){"use strict";function a(){return{id:""}}n.r(t),n.d(t,"KubernetesCommonParams",(function(){return a}))},,function(e,t,n){"use strict";n.r(t);var a=n(55),r=n(4),i=n(87),s=n(457),o=n(23),l=n(38),c=n(22),d=n(19),u=n(35),p=n(10),m=n(2),g=n(20),f=n(7),h=n(5),v=n(313),b=n(28),y=n(26),x=n(18),w=n(74),k=n(66),S=n(3),C=n(31),$=n(176);function A(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var P=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,P;return t=e,P=[{key:"isExternalApplication",value:function(e){return!e.ApplicationOwner}},{key:"associatePodsAndApplication",value:function(e,t){return Object(h.a)(e,["metadata.labels",t.matchLabels])}},{key:"associateContainerPersistedFoldersAndConfigurations",value:function(e,t){Object(f.a)(t,(function(t){t.PersistedFolders=Object(g.a)(Object(m.a)(e.PersistedFolders,(function(e){if(e.MountPath&&Object(p.a)(Object(m.a)(t.VolumeMounts,"mountPath"),e.MountPath))return e})),void 0),t.ConfigurationVolumes=Object(g.a)(Object(m.a)(e.ConfigurationVolumes,(function(e){if(e.rootMountPath&&Object(p.a)(Object(m.a)(t.VolumeMounts,"mountPath"),e.rootMountPath))return e})),void 0)}))}},{key:"associateContainersAndApplication",value:function(t){if(!t.Pods||0===t.Pods.length)return[];var n=t.Pods[0].Containers;return e.associateContainerPersistedFoldersAndConfigurations(t,n),n}},{key:"associateAllContainersAndApplication",value:function(t){var n=Object(u.a)(Object(m.a)(t.Pods,"Containers"));return e.associateContainerPersistedFoldersAndConfigurations(t,n),n}},{key:"portMappingsFromApplications",value:function(e){return Object(d.a)(e,(function(e,t){if(t.PublishedPorts.length>0){var n=new v.KubernetesPortMapping;n.Name=t.Name,n.ResourcePool=t.ResourcePool,n.ServiceType=t.ServiceType,n.LoadBalancerIPAddress=t.LoadBalancerIPAddress,n.ApplicationOwner=t.ApplicationOwner,n.Ports=Object(m.a)(t.PublishedPorts,(function(e){var t=new v.KubernetesPortMappingPort;return t.Port=n.ServiceType===b.KubernetesServiceTypes.NODE_PORT?e.NodePort:e.Port,t.TargetPort=e.TargetPort,t.Protocol=e.Protocol,t.IngressRules=e.IngressRules,t})),e.push(n)}return e}),[])}},{key:"generateEnvFromEnvVariables",value:function(e){return Object(c.a)(e,(function(e){return e.NeedsDeletion})),Object(m.a)(e,(function(e){var t=new w.KubernetesApplicationEnvPayload;return t.name=e.Name,t.value=e.Value,t}))}},{key:"generateEnvVariablesFromEnv",value:function(e){var t=Object(m.a)(e,(function(e){if(e.value){var t=new x.KubernetesApplicationEnvironmentVariableFormValue;return t.Name=e.name,t.Value=e.value,t.IsNew=!1,t}}));return Object(g.a)(t,void 0)}},{key:"generateConfigurationFormValuesFromEnvAndVolumes",value:function(e,t,n){var a=Object(u.a)(n,(function(n){var a=n.Type===y.KubernetesConfigurationTypes.CONFIGMAP?"valueFrom.configMapKeyRef.name":"valueFrom.secretKeyRef.name",r=Object(h.a)(e,[a,n.Name]),i=Object(h.a)(t,{configurationName:n.Name});if(r.length||i.length){var c=Object(d.a)(Object(l.a)(n.Data),(function(e,t){var n=Object(h.a)(r,{name:t}),a=Object(h.a)(i,{configurationKey:t}),s={Key:t,Count:n.length+a.length,Sum:Object(o.a)(n,a),EnvCount:n.length,VolCount:a.length};return e.push(s),e}),[]),u=Object(s.a)(Object(m.a)(c,"Count")),p=u-Object(s.a)(Object(m.a)(c,"VolCount")),g=Object(m.a)(new Array(u),(function(){return new x.KubernetesApplicationConfigurationFormValue}));return Object(f.a)(g,(function(e,t){e.SelectedConfiguration=n,t>=p&&(e.Overriden=!0,e.OverridenKeys=Object(m.a)(c,(function(e){var n=new x.KubernetesApplicationConfigurationFormValueOverridenKey;return n.Key=e.Key,t<e.EnvCount?n.Type=x.KubernetesApplicationConfigurationFormValueOverridenKeyTypes.ENVIRONMENT:(n.Type=x.KubernetesApplicationConfigurationFormValueOverridenKeyTypes.FILESYSTEM,n.Path=e.Sum[t].rootMountPath),n})))})),g}}));return Object(g.a)(a,void 0)}},{key:"generateEnvOrVolumesFromConfigurations",value:function(e,t){var n=[],a=[],r=[];return Object(f.a)(t,(function(t){var s=t.SelectedConfiguration.Type===y.KubernetesConfigurationTypes.CONFIGMAP;if(t.Overriden){var o=Object(h.a)(t.OverridenKeys,(function(e){return e.Type===x.KubernetesApplicationConfigurationFormValueOverridenKeyTypes.ENVIRONMENT}));Object(f.a)(o,(function(e){var a=s?new w.KubernetesApplicationEnvConfigMapPayload:new w.KubernetesApplicationEnvSecretPayload;a.name=e.Key,s?(a.valueFrom.configMapKeyRef.name=t.SelectedConfiguration.Name,a.valueFrom.configMapKeyRef.key=e.Key):(a.valueFrom.secretKeyRef.name=t.SelectedConfiguration.Name,a.valueFrom.secretKeyRef.key=e.Key),n.push(a)}));var c=Object(h.a)(t.OverridenKeys,(function(e){return e.Type===x.KubernetesApplicationConfigurationFormValueOverridenKeyTypes.FILESYSTEM})),d=Object(i.a)(c,"Path");Object(f.a)(d,(function(n,i){var o=k.default.generatedApplicationConfigVolumeName(e.Name),l=t.SelectedConfiguration.Name,c=Object(m.a)(n,(function(e){var t=new w.KubernetesApplicationVolumeEntryPayload;return t.key=e.Key,t.path=e.Key,t})),d=s?new w.KubernetesApplicationVolumeMountPayload:new w.KubernetesApplicationVolumeMountPayload(!0),u=s?new w.KubernetesApplicationVolumeConfigMapPayload:new w.KubernetesApplicationVolumeSecretPayload;d.name=o,d.mountPath=i,u.name=o,s?(u.configMap.name=l,u.configMap.items=c):(u.secret.secretName=l,u.secret.items=c),r.push(d),a.push(u)}))}else{var u=Object(l.a)(t.SelectedConfiguration.Data);Object(f.a)(u,(function(e){var a=s?new w.KubernetesApplicationEnvConfigMapPayload:new w.KubernetesApplicationEnvSecretPayload;a.name=e,s?(a.valueFrom.configMapKeyRef.name=t.SelectedConfiguration.Name,a.valueFrom.configMapKeyRef.key=e):(a.valueFrom.secretKeyRef.name=t.SelectedConfiguration.Name,a.valueFrom.secretKeyRef.key=e),n.push(a)}))}})),e.Env=Object(o.a)(e.Env,n),e.Volumes=Object(o.a)(e.Volumes,a),e.VolumeMounts=Object(o.a)(e.VolumeMounts,r),e}},{key:"generatePublishedPortsFormValuesFromPublishedPorts",value:function(e,t){var n=function(t,n){var a=new x.KubernetesApplicationPublishedPortFormValue;return a.IsNew=!1,n&&(a.IngressName=n.IngressName,a.IngressRoute=n.Path,a.IngressHost=n.Host),a.Protocol=t.Protocol,a.ContainerPort=t.TargetPort,e===b.KubernetesServiceTypes.LOAD_BALANCER?(a.LoadBalancerPort=t.Port,a.LoadBalancerNodePort=t.NodePort):e===b.KubernetesServiceTypes.NODE_PORT&&(a.NodePort=t.NodePort),a};return Object(u.a)(t,(function(e){return e.IngressRules.length?Object(m.a)(e.IngressRules,(function(t){return n(e,t)})):n(e)}))}},{key:"generateAutoScalerFormValueFromHorizontalPodAutoScaler",value:function(e,t){var n=new x.KubernetesApplicationAutoScalerFormValue;return e?(n.IsUsed=!0,n.MinReplicas=e.MinReplicas,n.MaxReplicas=e.MaxReplicas,n.TargetCPUUtilization=e.TargetCPUUtilization,n.ApiVersion=e.ApiVersion):(n.ApiVersion="apps/v1",n.MinReplicas=t,n.MaxReplicas=t),n}},{key:"generatePersistedFoldersFormValuesFromPersistedFolders",value:function(e,t){return Object(m.a)(e,(function(e){var n=Object(r.a)(t,(function(t){return Object(a.a)(t.Name,e.PersistentVolumeClaimName)})),i=new x.KubernetesApplicationPersistedFolderFormValue(n.StorageClass);return i.PersistentVolumeClaimName=e.PersistentVolumeClaimName,i.Size=parseInt(n.Storage.slice(0,-2)),i.SizeUnit=n.Storage.slice(-2),i.ContainerPath=e.MountPath,i}))}},{key:"generateVolumesFromPersistentVolumClaims",value:function(e,t){e.VolumeMounts=[],e.Volumes=[],Object(f.a)(t,(function(t){var n=new w.KubernetesApplicationVolumeMountPayload,a=t.Name;n.name=a,n.mountPath=t.MountPath,e.VolumeMounts.push(n);var r=new w.KubernetesApplicationVolumePersistentPayload;r.name=a,r.persistentVolumeClaim.claimName=a,e.Volumes.push(r)}))}},{key:"generatePlacementsFormValuesFromAffinity",value:function(e,t,n){var a=e.Placements,i=e.PlacementType,s=t.nodeAffinity;s&&s.requiredDuringSchedulingIgnoredDuringExecution?(i=S.KubernetesApplicationPlacementTypes.MANDATORY,Object(f.a)(s.requiredDuringSchedulingIgnoredDuringExecution.nodeSelectorTerms,(function(e){Object(f.a)(e.matchExpressions,(function(e){var t=new x.KubernetesApplicationPlacementFormValue,i=Object(r.a)(n,{Key:e.key});t.Label=i,t.Value=e.values[0],t.IsNew=!1,a.push(t)}))}))):s&&s.preferredDuringSchedulingIgnoredDuringExecution&&(i=S.KubernetesApplicationPlacementTypes.PREFERRED,Object(f.a)(s.preferredDuringSchedulingIgnoredDuringExecution,(function(e){Object(f.a)(e.preference.matchExpressions,(function(e){var t=new x.KubernetesApplicationPlacementFormValue,i=Object(r.a)(n,{Key:e.key});t.Label=i,t.Value=e.values[0],t.IsNew=!1,a.push(t)}))}))),e.Placements=a,e.PlacementType=i}},{key:"generateAffinityFromPlacements",value:function(e,t){if(t.DeploymentType===S.KubernetesApplicationDeploymentTypes.REPLICATED){var n=t.Placements,a=new $.KubernetesPodNodeAffinityPayload,r=Object(m.a)(n,(function(e){if(!e.NeedsDeletion){var t=new $.KubernetesNodeSelectorRequirementPayload;return t.key=e.Label.Key,e.Value?(t.operator=C.KubernetesPodNodeAffinityNodeSelectorRequirementOperators.IN,t.values=[e.Value]):(t.operator=C.KubernetesPodNodeAffinityNodeSelectorRequirementOperators.EXISTS,delete t.values),t}}));if((r=Object(g.a)(r,void 0)).length){if(t.PlacementType===S.KubernetesApplicationPlacementTypes.MANDATORY){var i=new $.KubernetesNodeSelectorTermPayload;i.matchExpressions=r,a.requiredDuringSchedulingIgnoredDuringExecution.nodeSelectorTerms.push(i),delete a.preferredDuringSchedulingIgnoredDuringExecution}else if(t.PlacementType===S.KubernetesApplicationPlacementTypes.PREFERRED){var s=new $.KubernetesPreferredSchedulingTermPayload;s.preference=new $.KubernetesNodeSelectorTermPayload,s.preference.matchExpressions=r,a.preferredDuringSchedulingIgnoredDuringExecution.push(s),delete a.requiredDuringSchedulingIgnoredDuringExecution}e.Affinity=new C.KubernetesPodAffinity,e.Affinity.nodeAffinity=a}}}}],(n=null)&&A(t.prototype,n),P&&A(t,P),e}();t.default=P},function(e,t,n){"use strict";n.r(t),n.d(t,"PortainerEndpointTypes",(function(){return a})),n.d(t,"PortainerEndpointCreationTypes",(function(){return r})),n.d(t,"PortainerEndpointConnectionTypes",(function(){return i}));var a=Object.freeze({DockerEnvironment:1,AgentOnDockerEnvironment:2,AzureEnvironment:3,EdgeAgentOnDockerEnvironment:4,KubernetesLocalEnvironment:5,AgentOnKubernetesEnvironment:6,EdgeAgentOnKubernetesEnvironment:7}),r=Object.freeze({LocalDockerEnvironment:1,AgentEnvironment:2,AzureEnvironment:3,EdgeAgentEnvironment:4,LocalKubernetesEnvironment:5}),i=Object.freeze({DOCKER_LOCAL:1,KUBERNETES_LOCAL:2,REMOTE:3,AZURE:4,AGENT:5,EDGE:6})},function(e,t,n){"use strict";n.r(t);var a=n(219),r=n(23),i=n(19),s=n(44),o=n.n(s),l=n(161);function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,s=[{key:"computeResourceReservation",value:function(t){var n=Object(i.a)(t,(function(e,t){return Object(r.a)(e,t.Containers)}),[]);return Object(i.a)(n,(function(t,n){return n.Requests&&(n.Requests.memory&&(t.Memory+=o()(n.Requests.memory,{base:10})),n.Requests.cpu&&(t.CPU+=e.parseCPU(n.Requests.cpu))),t}),new l.KubernetesResourceReservation)}},{key:"parseCPU",value:function(e){var t=parseInt(e);return Object(a.a)(e,"m")&&(t/=1e3),t}},{key:"megaBytesValue",value:function(e){return Math.floor(o()(e)/1e3/1e3)}},{key:"bytesValue",value:function(e){return 1e3*o()(e)*1e3}}],(n=null)&&c(t.prototype,n),s&&c(t,s),e}();t.default=d},function(e,t,n){"use strict";n.r(t),n.d(t,"ResourceControlOwnership",(function(){return a}));var a=Object.freeze({PUBLIC:"public",PRIVATE:"private",RESTRICTED:"restricted",ADMINISTRATORS:"administrators"})},,function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesApplicationFormValues",(function(){return s})),n.d(t,"KubernetesApplicationConfigurationFormValueOverridenKeyTypes",(function(){return o})),n.d(t,"KubernetesApplicationConfigurationFormValueOverridenKey",(function(){return c})),n.d(t,"KubernetesApplicationConfigurationFormValue",(function(){return u})),n.d(t,"KubernetesApplicationEnvironmentVariableFormValue",(function(){return m})),n.d(t,"KubernetesApplicationPersistedFolderFormValue",(function(){return f})),n.d(t,"KubernetesApplicationPublishedPortFormValue",(function(){return h})),n.d(t,"KubernetesApplicationPlacementFormValue",(function(){return v})),n.d(t,"KubernetesApplicationAutoScalerFormValue",(function(){return y})),n.d(t,"KubernetesFormValueDuplicate",(function(){return x}));var a=n(3);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=Object.freeze({ApplicationType:void 0,ResourcePool:{},Name:"",StackName:"",ApplicationOwner:"",Image:"",Note:"",MemoryLimit:0,CpuLimit:0,DeploymentType:a.KubernetesApplicationDeploymentTypes.REPLICATED,ReplicaCount:1,AutoScaler:{},Containers:[],EnvironmentVariables:[],DataAccessPolicy:a.KubernetesApplicationDataAccessPolicies.SHARED,PersistedFolders:[],Configurations:[],PublishingType:a.KubernetesApplicationPublishingTypes.INTERNAL,PublishedPorts:[],PlacementType:a.KubernetesApplicationPlacementTypes.PREFERRED,Placements:[],OriginalIngresses:void 0}),s=function e(){r(this,e),Object.assign(this,JSON.parse(JSON.stringify(i)))},o=Object.freeze({ENVIRONMENT:1,FILESYSTEM:2}),l=Object.freeze({Key:"",Path:"",Type:o.ENVIRONMENT}),c=function e(){r(this,e),Object.assign(this,JSON.parse(JSON.stringify(l)))},d=Object.freeze({SelectedConfiguration:void 0,Overriden:!1,OverridenKeys:[]}),u=function e(){r(this,e),Object.assign(this,JSON.parse(JSON.stringify(d)))},p=Object.freeze({Name:"",Value:"",IsSecret:!1,NeedsDeletion:!1,IsNew:!0}),m=function e(){r(this,e),Object.assign(this,JSON.parse(JSON.stringify(p)))},g=Object.freeze({PersistentVolumeClaimName:"",NeedsDeletion:!1,ContainerPath:"",Size:"",SizeUnit:"GB",StorageClass:{},ExistingVolume:null,UseNewVolume:!0}),f=function e(t){r(this,e),Object.assign(this,JSON.parse(JSON.stringify(g))),this.StorageClass=t};function h(){return{NeedsDeletion:!1,IsNew:!0,ContainerPort:"",NodePort:"",LoadBalancerPort:"",LoadBalancerNodePort:void 0,Protocol:"TCP",IngressName:void 0,IngressRoute:void 0,IngressHost:void 0}}function v(){return{Label:{},Value:"",NeedsDeletion:!1,IsNew:!0}}var b=Object.freeze({MinReplicas:0,MaxReplicas:0,TargetCPUUtilization:50,ApiVersion:"",IsUsed:!1}),y=function e(){r(this,e),Object.assign(this,JSON.parse(JSON.stringify(b)))};function x(){return{refs:{},hasDuplicates:!1}}},,,function(e,t,n){"use strict";function a(e){return{data:e}}n.r(t),n.d(t,"rawResponse",(function(){return a}))},,,function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){try{var t=JSON.parse(e);if(t&&"object"===a(t))return t}catch(e){}return!1}function i(e){var t="["+e.replace(/\n/g," ").replace(/\}\s*\{/g,"}, {")+"]";return angular.fromJson(t)}function s(e){var t={};return e?(r(e)?t=angular.fromJson(e):t.message=e,t):t}function o(e){return{logs:e}}function l(e){var t,n=[];if(r(e))if(t=e,"[object Array]"!==Object.prototype.toString.call(t)){var a=angular.fromJson(e);n.push(a)}else n=angular.fromJson(e);else n.push({message:e});return n}n.r(t),n.d(t,"jsonObjectsToArrayHandler",(function(){return i})),n.d(t,"genericHandler",(function(){return s})),n.d(t,"logsHandler",(function(){return o})),n.d(t,"deleteImageHandler",(function(){return l}))},,function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesPortainerConfigurationOwnerLabel",(function(){return a})),n.d(t,"KubernetesConfiguration",(function(){return i})),n.d(t,"KubernetesConfigurationTypes",(function(){return s}));var a="io.portainer.kubernetes.configuration.owner",r=Object.freeze({Id:0,Name:"",Type:"",Namespace:"",CreationDate:"",ConfigurationOwner:"",Used:!1,Applications:[],Data:{}}),i=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,JSON.parse(JSON.stringify(r)))},s=Object.freeze({CONFIGMAP:1,SECRET:2})},,function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t),n.d(t,"KubernetesServiceHeadlessPrefix",(function(){return r})),n.d(t,"KubernetesServiceHeadlessClusterIP",(function(){return i})),n.d(t,"KubernetesServiceTypes",(function(){return s})),n.d(t,"KubernetesService",(function(){return l})),n.d(t,"KubernetesServicePort",(function(){return d}));var r="headless-",i="None",s=Object.freeze({LOAD_BALANCER:"LoadBalancer",NODE_PORT:"NodePort",CLUSTER_IP:"ClusterIP"}),o=Object.freeze({Headless:!1,Namespace:"",Name:"",StackName:"",Ports:[],Type:"",ClusterIP:"",ApplicationName:"",ApplicationOwner:"",Note:""}),l=function e(){a(this,e),Object.assign(this,JSON.parse(JSON.stringify(o)))},c=Object.freeze({name:"",port:0,targetPort:0,protocol:"",nodePort:0}),d=function e(){a(this,e),Object.assign(this,JSON.parse(JSON.stringify(c)))}},,,function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesPod",(function(){return s})),n.d(t,"KubernetesPodToleration",(function(){return l})),n.d(t,"KubernetesPodContainer",(function(){return d})),n.d(t,"KubernetesPodContainerTypes",(function(){return u}));var a=n(374);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"KubernetesPodNodeAffinityNodeSelectorRequirementOperators",(function(){return a.KubernetesPodNodeAffinityNodeSelectorRequirementOperators})),n.d(t,"KubernetesPodAffinity",(function(){return a.KubernetesPodAffinity}));var i=Object.freeze({Id:"",Name:"",Namespace:"",Images:[],Status:"",Restarts:0,Node:"",CreationDate:"",Containers:[],Labels:[],Affinity:{},Tolerations:[],NodeSelector:void 0}),s=function e(){r(this,e),Object.assign(this,JSON.parse(JSON.stringify(i)))},o=Object.freeze({Key:"",Operator:"",Value:"",TolerationSeconds:0,Effect:""}),l=function e(){r(this,e),Object.assign(this,JSON.parse(JSON.stringify(o)))},c=Object.freeze({Type:0,PodName:"",Name:"",Image:"",Node:"",CreationDate:"",Status:"",Limits:{},Requests:{},VolumeMounts:{},ConfigurationVolumes:[],PersistedFolders:[],Env:[]}),d=function e(){r(this,e),Object.assign(this,JSON.parse(JSON.stringify(c)))},u={INIT:1,APP:2}},,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesCommonMetadataPayload",(function(){return r}));var a=Object.freeze({uid:"",name:"",namespace:"",labels:{},annotations:{}}),r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,JSON.parse(JSON.stringify(a)))}},,,,function(e,t,n){"use strict";n.r(t),n.d(t,"AccessControlFormData",(function(){return r}));var a=n(16);function r(){this.AccessControlEnabled=!0,this.Ownership=a.ResourceControlOwnership.PRIVATE,this.AuthorizedUsers=[],this.AuthorizedTeams=[]}},,,,,,function(e,t,n){"use strict";n.r(t);var a=n(99),r=n(567),i=n(557);function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"assignOrDeleteIfEmpty",value:function(e,t,n){!n||n instanceof Array&&!n.length?Object(i.a)(e,t):Object(r.a)(e,t,n)}},{key:"ownerToLabel",value:function(e){return Object(a.a)(e,/[^-A-Za-z0-9_.]/g,".")}}],(n=null)&&s(t.prototype,n),o&&s(t,o),e}();t.default=o},function(e,t,n){"use strict";n.r(t);var a=n(7),r=n(87);function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,s=[{key:"getDuplicates",value:function(e){var t=Object(r.a)(e),n={};return Object(a.a)(e,(function(e,a){t[e].length>1&&e&&(n[a]=e)})),n}}],(n=null)&&i(t.prototype,n),s&&i(t,s),e}();t.default=s},,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesIngressConverter",(function(){return C}));var a=n(53),r=n(87),i=n(20),s=n(247),o=n(1804),l=n(559),c=n(55),d=n(22),u=n(4),p=n(7),m=n(2),g=n(35),f=n(46),h=n(47),v=n(116),b=n(147),y=n(246),x=n(59);function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function S(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var C=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,k;return t=e,k=[{key:"apiToModel",value:function(e){var t=void 0,n=Object(g.a)(e.spec.rules,(function(n){return t=t||n.host,n.http?Object(m.a)(n.http.paths,(function(t){var a=new b.KubernetesIngressRule;return a.IngressName=e.metadata.name,a.ServiceName=t.backend.serviceName,a.Host=n.host||"",a.IP=e.status.loadBalancer.ingress?e.status.loadBalancer.ingress[0].ip:void 0,a.Port=t.backend.servicePort,a.Path=t.path,a})):[]})),a=new b.KubernetesIngress;return a.Name=e.metadata.name,a.Namespace=e.metadata.namespace,a.Annotations=e.metadata.annotations||{},a.IngressClassName=e.metadata.annotations&&e.metadata.annotations[x.KubernetesIngressClassAnnotation]?e.metadata.annotations[x.KubernetesIngressClassAnnotation]:e.spec.ingressClassName,a.Paths=n,a.Host=t,a}},{key:"applicationFormValuesToIngresses",value:function(e,t){var n=angular.copy(e.OriginalIngresses);return Object(p.a)(e.PublishedPorts,(function(e){var a=Object(u.a)(n,{Name:e.IngressName});if(a&&e.NeedsDeletion){var r=Object(u.a)(a.Paths,{Port:e.ContainerPort,ServiceName:t,Path:e.IngressRoute});Object(d.a)(a.Paths,r)}else if(a&&e.IsNew){var i=new b.KubernetesIngressRule;i.IngressName=a.Name,i.ServiceName=t,i.Port=e.ContainerPort,i.Path=Object(c.a)(e.IngressRoute,"/")?e.IngressRoute:"/"+e.IngressRoute,i.Host=e.IngressHost,a.Paths.push(i)}})),n}},{key:"resourcePoolIngressClassFormValueToIngress",value:function(e){var t=new b.KubernetesIngress;t.Name=e.IngressClass.Name,t.Namespace=e.Namespace;var n=Object(m.a)(e.Annotations,(function(e){return[e.Key,e.Value]}));return t.Annotations=Object(l.a)(n),e.RewriteTarget&&Object(o.a)(t.Annotations,x.KubernetesIngressClassRewriteTargetAnnotations[e.IngressClass.Type]),t.Annotations[x.KubernetesIngressClassAnnotation]=e.IngressClass.Name,t.Host=e.Host,t}},{key:"ingressClassesToFormValues",value:function(e,t){return Object(m.a)(e,(function(e){var n=new v.KubernetesResourcePoolIngressClassFormValue;n.IngressClass=e;var a=Object(u.a)(t,{Name:e.Name});if(a){n.Selected=!0,n.WasSelected=!0,n.Host=a.Host;var r=w(Object(s.a)(x.KubernetesIngressClassRewriteTargetAnnotations[e.Type]),1),o=w(r[0],1)[0],l=Object(m.a)(Object(s.a)(a.Annotations),(function(e){var t=w(e,2),a=t[0],r=t[1];if(a===o)n.RewriteTarget=!0;else if(a!==x.KubernetesIngressClassAnnotation){var i=new v.KubernetesResourcePoolIngressClassAnnotationFormValue;return i.Key=a,i.Value=r,i}}));n.Annotations=Object(i.a)(l,void 0),n.AdvancedConfig=n.Annotations.length>0}return n}))}},{key:"createPayload",value:function(e){var t=new y.KubernetesIngressCreatePayload;if(t.metadata.name=e.Name,t.metadata.namespace=e.Namespace,t.metadata.annotations=e.Annotations,e.Paths&&e.Paths.length){Object(p.a)(e.Paths,(function(e){"undefined"!==e.Host&&void 0!==e.Host||(e.Host="")}));var n=Object(r.a)(e.Paths,"Host"),i=Object(m.a)(n,(function(t,n){var r=new y.KubernetesIngressRuleCreatePayload;return("undefined"===n||Object(a.a)(n))&&(n=e.Host),n===e.PreviousHost&&n!==e.Host&&(n=e.Host),h.default.assignOrDeleteIfEmpty(r,"host",n),r.http.paths=Object(m.a)(t,(function(e){var t=new y.KubernetesIngressRulePathCreatePayload;return t.path=e.Path,t.backend.serviceName=e.ServiceName,t.backend.servicePort=e.Port,t})),r}));h.default.assignOrDeleteIfEmpty(t,"spec.rules",i)}else e.Host?t.spec.rules=[{host:e.Host}]:delete t.spec.rules;return t}},{key:"patchPayload",value:function(t,n){var a=e.createPayload(t),r=e.createPayload(n);return f.a(a,r)}}],(n=null)&&S(t.prototype,n),k&&S(t,k),e}()},,,,function(e,t,n){"use strict";n.r(t),n.d(t,"ResourceControlViewModel",(function(){return r}));var a=n(16);function r(e){var t;this.Id=e.Id,this.Type=e.Type,this.ResourceId=e.ResourceId,this.UserAccesses=e.UserAccesses,this.TeamAccesses=e.TeamAccesses,this.Public=e.Public,this.System=e.System,this.Ownership=(t=this).Public?a.ResourceControlOwnership.PUBLIC:1===t.UserAccesses.length&&0===t.TeamAccesses.length?a.ResourceControlOwnership.PRIVATE:t.UserAccesses.length>1||t.TeamAccesses.length>0?a.ResourceControlOwnership.RESTRICTED:a.ResourceControlOwnership.ADMINISTRATORS}},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesIngressClassAnnotation",(function(){return a})),n.d(t,"KubernetesIngressClassRewriteTargetAnnotations",(function(){return r})),n.d(t,"KubernetesIngressClassTypes",(function(){return i}));var a="kubernetes.io/ingress.class",r=Object.freeze({nginx:{"nginx.ingress.kubernetes.io/rewrite-target":"/"},traefik:{"traefik.ingress.kubernetes.io/rewrite-target":"/"}}),i=Object.freeze({NGINX:"nginx",TRAEFIK:"traefik"})},,function(e,t,n){"use strict";function a(){this.UseRegistry=!0,this.Registry={},this.Image=""}n.r(t),n.d(t,"PorImageRegistryModel",(function(){return a}))},,,,function(e,t,n){"use strict";n.r(t),n.d(t,"RegistryTypes",(function(){return a}));var a=Object.freeze({QUAY:1,AZURE:2,CUSTOM:3,GITLAB:4})},function(e,t,n){"use strict";n.r(t);var a=n(10),r=n(55),i=n(2),s=n(20),o=n(5),l=n(141),c=n.n(l),d=n(3);function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,l;return t=e,l=[{key:"getUsingApplications",value:function(e,t){return Object(o.a)(t,(function(t){var n=Object(s.a)(Object(i.a)(t.Volumes,"persistentVolumeClaim.claimName"),void 0),l=Object(o.a)(n,(function(t){return Object(r.a)(e.PersistentVolumeClaim.Name,t)}));return e.ResourcePool.Namespace.Name===t.ResourcePool&&l.length&&(t.ApplicationType!==d.KubernetesApplicationTypes.STATEFULSET||Object(a.a)(e.PersistentVolumeClaim.Name,t.Name))}))}},{key:"isUsed",value:function(e){return 0!==e.Applications.length}},{key:"generatedApplicationConfigVolumeName",value:function(e){return"config-"+e+"-"+c()()}},{key:"isExternalVolume",value:function(e){return!e.PersistentVolumeClaim.ApplicationOwner}}],(n=null)&&u(t.prototype,n),l&&u(t,l),e}();t.default=p},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesPortainerConfigMapNamespace",(function(){return a})),n.d(t,"KubernetesPortainerConfigMapConfigName",(function(){return r})),n.d(t,"KubernetesPortainerConfigMapAccessKey",(function(){return i})),n.d(t,"KubernetesConfigMap",(function(){return o}));var a="portainer",r="portainer-config",i="NamespaceAccessPolicies",s=Object.freeze({Id:0,Name:"",Namespace:"",Yaml:"",ConfigurationOwner:"",Data:{}}),o=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,JSON.parse(JSON.stringify(s)))}},,,,function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesPortainerResourcePoolNameLabel",(function(){return a})),n.d(t,"KubernetesPortainerResourcePoolOwnerLabel",(function(){return r})),n.d(t,"KubernetesResourcePool",(function(){return i}));var a="io.portainer.kubernetes.resourcepool.name",r="io.portainer.kubernetes.resourcepool.owner";function i(){return{Namespace:{},Quota:void 0,Ingresses:[],Yaml:""}}},function(e,t,n){"use strict";n.r(t);var a=n(10),r=n(52),i=n(5),s=n(19),o=n(35),l=n(23),c=n(20),d=n(4),u=n(7),p=n(2),m=n(44),g=n.n(m),f=n(3),h=n(28),v=n(15),b=n(18),y=n(13),x=n(206),w=n(207),k=n(208),S=n(173),C=n(115),$=n(8),A=n(426),P=n(47);function I(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function N(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var R=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,m;return t=e,m=[{key:"applicationCommon",value:function(e,t,n,a,m){var b=t.spec.template?Object(c.a)(Object(l.a)(t.spec.template.spec.containers,t.spec.template.spec.initContainers),void 0):t.spec.containers;if(e.Id=t.metadata.uid,e.Name=t.metadata.name,e.StackName=t.metadata.labels&&t.metadata.labels[f.KubernetesPortainerApplicationStackNameLabel]||"-",e.ApplicationOwner=t.metadata.labels&&t.metadata.labels[f.KubernetesPortainerApplicationOwnerLabel]||"",e.Note=t.metadata.annotations&&t.metadata.annotations[f.KubernetesPortainerApplicationNote]||"",e.ApplicationName=t.metadata.labels&&t.metadata.labels[f.KubernetesPortainerApplicationNameLabel]||e.Name,e.ResourcePool=t.metadata.namespace,e.Image=b[0].image,e.CreationDate=t.metadata.creationTimestamp,e.Env=Object(c.a)(Object(o.a)(Object(p.a)(b,"env")),void 0),e.Pods=t.spec.selector?y.default.associatePodsAndApplication(n,t.spec.selector):[t],e.Limits=Object(s.a)(b,(function(e,t){return t.resources.limits&&t.resources.limits.cpu&&(e.Cpu+=v.default.parseCPU(t.resources.limits.cpu)),t.resources.limits&&t.resources.limits.memory&&(e.Memory+=g()(t.resources.limits.memory,{base:10})),e}),{Cpu:0,Memory:0}),e.Requests=Object(s.a)(b,(function(e,t){return t.resources.requests&&t.resources.requests.cpu&&(e.Cpu+=v.default.parseCPU(t.resources.requests.cpu)),t.resources.requests&&t.resources.requests.memory&&(e.Memory+=g()(t.resources.requests.memory,{base:10})),e}),{Cpu:0,Memory:0}),a){var x=a.spec.type;e.ServiceType=x,e.ServiceId=a.metadata.uid,e.ServiceName=a.metadata.name,x===h.KubernetesServiceTypes.LOAD_BALANCER&&a.status.loadBalancer.ingress&&a.status.loadBalancer.ingress.length>0&&(e.LoadBalancerIPAddress=a.status.loadBalancer.ingress[0].ip||a.status.loadBalancer.ingress[0].hostname);var w=l.a.apply(void 0,I(Object(p.a)(b,(function(e){return e.ports})))),k=function(e,t){var n=Object(p.a)(e,(function(e){var t=new f.KubernetesApplicationPort;return t.Port=e.port,t.TargetPort=e.targetPort,t.NodePort=e.nodePort,t.Protocol=e.protocol,t}));return Object(u.a)(n,(function(e){if(isNaN(e.TargetPort)){var n=Object(d.a)(t,{name:e.TargetPort});n&&(e.TargetPort=n.containerPort)}})),n}(a.spec.ports,w),S=A.KubernetesIngressHelper.findSBoundServiceIngressesRules(m,a.metadata.name);Object(u.a)(k,(function(e){return e.IngressRules=Object(i.a)(S,(function(t){return t.Port===e.Port}))})),e.PublishedPorts=k}if(t.spec.template?e.Volumes=t.spec.template.spec.volumes?t.spec.template.spec.volumes:[]:e.Volumes=t.spec.volumes,t.spec.volumeClaimTemplates){var C=Object(p.a)(t.spec.volumeClaimTemplates,(function(e){return{name:e.metadata.name,persistentVolumeClaim:{claimName:e.metadata.name}}})),$=Object(i.a)(C,(function(t){return!Object(d.a)(e.Volumes,{persistentVolumeClaim:{claimName:t.persistentVolumeClaim.claimName}})}));e.Volumes=Object(l.a)(e.Volumes,$)}var P=Object(i.a)(e.Volumes,(function(e){return e.persistentVolumeClaim||e.hostPath}));e.PersistedFolders=Object(p.a)(P,(function(e){var t=Object(r.a)(Object(o.a)(Object(p.a)(b,"volumeMounts")),"name"),n=Object(d.a)(t,{name:e.name});if(n){var a=new f.KubernetesApplicationPersistedFolder;return a.MountPath=n.mountPath,e.persistentVolumeClaim?a.PersistentVolumeClaimName=e.persistentVolumeClaim.claimName:a.HostPath=e.hostPath.path,a}})),e.PersistedFolders=Object(c.a)(e.PersistedFolders,void 0),e.ConfigurationVolumes=Object(s.a)(e.Volumes,(function(e,t){if(t.configMap||t.secret){var n=Object(d.a)(Object(o.a)(Object(p.a)(b,"volumeMounts")),{name:t.name});if(n){var a=[],r="";if(t.configMap?(a=t.configMap.items,r=t.configMap.name):(a=t.secret.items,r=t.secret.secretName),a)Object(u.a)(a,(function(t){var a=new f.KubernetesApplicationConfigurationVolume;a.fileMountPath=n.mountPath+"/"+t.path,a.rootMountPath=n.mountPath,a.configurationKey=t.key,a.configurationName=r,e.push(a)}));else{var i=new f.KubernetesApplicationConfigurationVolume;i.fileMountPath=n.mountPath,i.rootMountPath=n.mountPath,i.configurationName=r,e.push(i)}}}return e}),[])}},{key:"apiPodToApplication",value:function(t,n,a,r){var i=new f.KubernetesApplication;return e.applicationCommon(i,t,n,a,r),i.ApplicationType=f.KubernetesApplicationTypes.POD,i}},{key:"apiDeploymentToApplication",value:function(t,n,a,r){var i=new f.KubernetesApplication;return e.applicationCommon(i,t,n,a,r),i.ApplicationType=f.KubernetesApplicationTypes.DEPLOYMENT,i.DeploymentType=f.KubernetesApplicationDeploymentTypes.REPLICATED,i.DataAccessPolicy=f.KubernetesApplicationDataAccessPolicies.SHARED,i.RunningPodsCount=t.status.availableReplicas||t.status.replicas-t.status.unavailableReplicas||0,i.TotalPodsCount=t.spec.replicas,i}},{key:"apiDaemonSetToApplication",value:function(t,n,a,r){var i=new f.KubernetesApplication;return e.applicationCommon(i,t,n,a,r),i.ApplicationType=f.KubernetesApplicationTypes.DAEMONSET,i.DeploymentType=f.KubernetesApplicationDeploymentTypes.GLOBAL,i.DataAccessPolicy=f.KubernetesApplicationDataAccessPolicies.SHARED,i.RunningPodsCount=t.status.numberAvailable||t.status.desiredNumberScheduled-t.status.numberUnavailable||0,i.TotalPodsCount=t.status.desiredNumberScheduled,i}},{key:"apiStatefulSetToapplication",value:function(t,n,a,r){var i=new f.KubernetesApplication;return e.applicationCommon(i,t,n,a,r),i.ApplicationType=f.KubernetesApplicationTypes.STATEFULSET,i.DeploymentType=f.KubernetesApplicationDeploymentTypes.REPLICATED,i.DataAccessPolicy=f.KubernetesApplicationDataAccessPolicies.ISOLATED,i.RunningPodsCount=t.status.readyReplicas||0,i.TotalPodsCount=t.spec.replicas,i.HeadlessServiceName=t.spec.serviceName,i}},{key:"applicationToFormValues",value:function(e,t,n,a,r){var s=new b.KubernetesApplicationFormValues;s.ApplicationType=e.ApplicationType,s.ResourcePool=Object(d.a)(t,["Namespace.Name",e.ResourcePool]),s.Name=e.Name,s.StackName=e.StackName,s.ApplicationOwner=e.ApplicationOwner,s.Image=e.Image,s.ReplicaCount=e.TotalPodsCount,s.MemoryLimit=v.default.megaBytesValue(e.Limits.Memory),s.CpuLimit=e.Limits.Cpu,s.DeploymentType=e.DeploymentType,s.DataAccessPolicy=e.DataAccessPolicy,s.EnvironmentVariables=y.default.generateEnvVariablesFromEnv(e.Env),s.PersistedFolders=y.default.generatePersistedFoldersFormValuesFromPersistedFolders(e.PersistedFolders,a),s.Configurations=y.default.generateConfigurationFormValuesFromEnvAndVolumes(e.Env,e.ConfigurationVolumes,n),s.AutoScaler=y.default.generateAutoScalerFormValueFromHorizontalPodAutoScaler(e.AutoScaler,s.ReplicaCount),s.PublishedPorts=y.default.generatePublishedPortsFormValuesFromPublishedPorts(e.ServiceType,e.PublishedPorts),s.Containers=e.Containers;var o=Object(i.a)(s.PublishedPorts,(function(e){return e.IngressName})).length;return e.ServiceType===h.KubernetesServiceTypes.LOAD_BALANCER?s.PublishingType=f.KubernetesApplicationPublishingTypes.LOAD_BALANCER:e.ServiceType===h.KubernetesServiceTypes.NODE_PORT?s.PublishingType=f.KubernetesApplicationPublishingTypes.CLUSTER:e.ServiceType===h.KubernetesServiceTypes.CLUSTER_IP&&o?s.PublishingType=f.KubernetesApplicationPublishingTypes.INGRESS:s.PublishingType=f.KubernetesApplicationPublishingTypes.INTERNAL,y.default.generatePlacementsFormValuesFromAffinity(s,e.Pods[0].Affinity,r),s}},{key:"applicationFormValuesToApplication",value:function(e){e.ApplicationOwner=P.default.ownerToLabel(e.ApplicationOwner);var t,n,r=C.default.applicationFormValuesToVolumeClaims(e),i=void 0!==Object(d.a)(r,(function(e){return Object(a.a)(e.StorageClass.AccessModes,"RWX")})),s=e.DeploymentType===f.KubernetesApplicationDeploymentTypes.REPLICATED&&(0===r.length||r.length>0&&e.DataAccessPolicy===f.KubernetesApplicationDataAccessPolicies.SHARED)||e.ApplicationType===f.KubernetesApplicationTypes.DEPLOYMENT,o=e.DeploymentType===f.KubernetesApplicationDeploymentTypes.REPLICATED&&r.length>0&&e.DataAccessPolicy===f.KubernetesApplicationDataAccessPolicies.ISOLATED||e.ApplicationType===f.KubernetesApplicationTypes.STATEFULSET,l=e.DeploymentType===f.KubernetesApplicationDeploymentTypes.GLOBAL&&(0===r.length||r.length>0&&e.DataAccessPolicy===f.KubernetesApplicationDataAccessPolicies.SHARED&&i)||e.ApplicationType===f.KubernetesApplicationTypes.DAEMONSET;if(s)t=x.default.applicationFormValuesToDeployment(e,r);else if(o)t=k.default.applicationFormValuesToStatefulSet(e,r);else{if(!l)throw new $.default("Unable to determine which association to use to convert form");t=w.default.applicationFormValuesToDaemonSet(e,r)}o&&(n=S.default.applicationFormValuesToHeadlessService(e));var c=S.default.applicationFormValuesToService(e);return c.Ports.length||(c=void 0),[t,n,c,r]}}],(n=null)&&N(t.prototype,n),m&&N(t,m),e}();t.default=R},,function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t),n.d(t,"KubernetesApplicationVolumeMountPayload",(function(){return i})),n.d(t,"KubernetesApplicationVolumePersistentPayload",(function(){return o})),n.d(t,"KubernetesApplicationVolumeConfigMapPayload",(function(){return c})),n.d(t,"KubernetesApplicationVolumeSecretPayload",(function(){return u})),n.d(t,"KubernetesApplicationVolumeEntryPayload",(function(){return m})),n.d(t,"KubernetesApplicationEnvPayload",(function(){return f})),n.d(t,"KubernetesApplicationEnvConfigMapPayload",(function(){return v})),n.d(t,"KubernetesApplicationEnvSecretPayload",(function(){return y}));var r=Object.freeze({name:"",mountPath:"",readOnly:!1}),i=function e(t){a(this,e),Object.assign(this,JSON.parse(JSON.stringify(r))),t?this.readOnly=!0:delete this.readOnly},s=Object.freeze({name:"",persistentVolumeClaim:{claimName:""}}),o=function e(){a(this,e),Object.assign(this,JSON.parse(JSON.stringify(s)))},l=Object.freeze({name:"",configMap:{name:"",items:[]}}),c=function e(){a(this,e),Object.assign(this,JSON.parse(JSON.stringify(l)))},d=Object.freeze({name:"",secret:{secretName:"",items:[]}}),u=function e(){a(this,e),Object.assign(this,JSON.parse(JSON.stringify(d)))},p=Object.freeze({key:"",path:""}),m=function e(){a(this,e),Object.assign(this,JSON.parse(JSON.stringify(p)))},g=Object.freeze({name:"",value:""}),f=function e(){a(this,e),Object.assign(this,JSON.parse(JSON.stringify(g)))},h=Object.freeze({name:"",valueFrom:{configMapKeyRef:{name:"",key:""}}}),v=function e(){a(this,e),Object.assign(this,JSON.parse(JSON.stringify(h)))},b=Object.freeze({name:"",valueFrom:{secretKeyRef:{name:"",key:""}}}),y=function e(){a(this,e),Object.assign(this,JSON.parse(JSON.stringify(b)))}},,,,,function(e,t,n){"use strict";n.r(t);var a=n(19),r=n(314),i=n.n(r),s=n(67),o=n(315),l=n(26);function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"apiToConfigMap",value:function(e,t){var n=new s.KubernetesConfigMap;return n.Id=e.metadata.uid,n.Name=e.metadata.name,n.Namespace=e.metadata.namespace,n.ConfigurationOwner=e.metadata.labels?e.metadata.labels[l.KubernetesPortainerConfigurationOwnerLabel]:"",n.CreationDate=e.metadata.creationTimestamp,n.Yaml=t?t.data:"",n.Data=e.data,n}},{key:"defaultConfigMap",value:function(e,t){var n=new s.KubernetesConfigMap;return n.Name=t,n.Namespace=e,n}},{key:"createPayload",value:function(e){var t=new o.KubernetesConfigMapCreatePayload;return t.metadata.name=e.Name,t.metadata.namespace=e.Namespace,t.metadata.labels[l.KubernetesPortainerConfigurationOwnerLabel]=e.ConfigurationOwner,t.data=e.Data,t}},{key:"updatePayload",value:function(e){var t=new o.KubernetesConfigMapUpdatePayload;return t.metadata.uid=e.Id,t.metadata.name=e.Name,t.metadata.namespace=e.Namespace,t.metadata.labels[l.KubernetesPortainerConfigurationOwnerLabel]=e.ConfigurationOwner,t.data=e.Data,t}},{key:"configurationFormValuesToConfigMap",value:function(e){var t=new s.KubernetesConfigMap;return t.Id=e.Id,t.Name=e.Name,t.Namespace=e.ResourcePool.Namespace.Name,t.ConfigurationOwner=e.ConfigurationOwner,e.IsSimple?t.Data=Object(a.a)(e.Data,(function(e,t){return e[t.Key]=t.Value,e}),{}):t.Data=i.a.parse(e.DataYaml),t}}],(n=null)&&c(t.prototype,n),r&&c(t,r),e}();t.default=d},,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesPortainerResourceQuotaPrefix",(function(){return r})),n.d(t,"KubernetesResourceQuotaDefaults",(function(){return i})),n.d(t,"KubernetesResourceQuota",(function(){return o}));var a=n(143);var r="portainer-rq-",i={CpuLimit:0,MemoryLimit:0},s=Object.freeze({Id:"",Namespace:"",Name:"",CpuLimit:i.CpuLimit,MemoryLimit:i.MemoryLimit,CpuLimitUsed:i.CpuLimit,MemoryLimitUsed:i.MemoryLimit,Yaml:"",ResourcePoolName:"",ResourcePoolOwner:""}),o=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,JSON.parse(JSON.stringify(s))),t&&(this.Name=a.default.generateResourceQuotaName(t),this.Namespace=t)}},,,,,,,,function(e,t,n){"use strict";n.r(t);var a=n(5);function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"warningCount",value:function(e){return Object(a.a)(e,(function(e){return"Warning"===e.Type})).length}}],(n=null)&&r(t.prototype,n),i&&r(t,i),e}();t.default=i},,,,function(e,t,n){"use strict";n.r(t);var a=n(7),r=n(55),i=n(4),s=n(5),o=n(26);function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,c;return t=e,c=[{key:"getUsingApplications",value:function(e,t){return Object(s.a)(t,(function(t){var n,a;return e.Type===o.KubernetesConfigurationTypes.CONFIGMAP?(n=Object(i.a)(t.Env,{valueFrom:{configMapKeyRef:{name:e.Name}}}),a=Object(i.a)(t.Volumes,{configMap:{name:e.Name}})):(n=Object(i.a)(t.Env,{valueFrom:{secretKeyRef:{name:e.Name}}}),a=Object(i.a)(t.Volumes,{secret:{secretName:e.Name}})),n||a}))}},{key:"isSystemToken",value:function(e){return Object(r.a)(e.Name,"default-token-")}},{key:"setConfigurationUsed",value:function(e){e.Used=e.Applications&&0!==e.Applications.length}},{key:"setConfigurationsUsed",value:function(t,n){Object(a.a)(t,(function(t){t.Applications=e.getUsingApplications(t,n),e.setConfigurationUsed(t)}))}},{key:"isExternalConfiguration",value:function(e){return!e.ConfigurationOwner}}],(n=null)&&l(t.prototype,n),c&&l(t,c),e}();t.default=c},function(e,t,n){"use strict";function a(e){this.Id=e.Id,this.Name=e.Username,this.Type="user",this.Inherited=!1,this.Override=!1,this.Role={Id:0,Name:"-"},this.icon='<i class="fa fa-user" aria-hidden="true"></i>'}function r(e){this.Id=e.Id,this.Name=e.Name,this.Type="team",this.Inherited=!1,this.Override=!1,this.Role={Id:0,Name:"-"},this.icon='<i class="fa fa-users" aria-hidden="true"></i>'}n.r(t),n.d(t,"UserAccessViewModel",(function(){return a})),n.d(t,"TeamAccessViewModel",(function(){return r}))},,function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesNodeConditionTypes",(function(){return f}));var a=n(19),r=n(5),i=n(2),s=n(248),o=n(4),l=n(120),c=n(15),d=n(148),u=n(327),p=n(46);function m(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,g;return t=e,g=[{key:"apiToNode",value:function(e,t){t||(t=new l.KubernetesNode),t.Id=e.metadata.uid;var n=Object(o.a)(e.status.addresses,{type:"Hostname"});t.Name=n?n.address:e.metadata.Name,t.Labels=e.metadata.labels,t.Role=Object(s.a)(e.metadata.labels,"node-role.kubernetes.io/master")?"Master":"Worker";var a=Object(o.a)(e.status.conditions,{type:f.READY}),r=Object(o.a)(e.status.conditions,{type:f.MEMORY_PRESSURE}),d=Object(o.a)(e.status.conditions,{type:f.PID_PRESSURE}),u=Object(o.a)(e.status.conditions,{type:f.DISK_PRESSURE}),p=Object(o.a)(e.status.conditions,{type:f.NETWORK_UNAVAILABLE});t.Conditions={MemoryPressure:r&&"True"===r.status,PIDPressure:d&&"True"===d.status,DiskPressure:u&&"True"===u.status,NetworkUnavailable:p&&"True"===p.status},"False"===a.status?t.Status="Unhealthy":"Unknown"===a.status||t.Conditions.MemoryPressure||t.Conditions.PIDPressure||t.Conditions.DiskPressure||t.Conditions.NetworkUnavailable?t.Status="Warning":t.Status="Ready",t.CPU=c.default.parseCPU(e.status.allocatable.cpu),t.Memory=e.status.allocatable.memory,t.Version=e.status.nodeInfo.kubeletVersion;var m=Object(o.a)(e.status.addresses,{type:"InternalIP"});return t.IPAddress=m?m.address:"-",t.Taints=Object(i.a)(e.spec.taints,(function(e){var t=new l.KubernetesNodeTaint;return t.Key=e.key,t.Value=e.value,t.Effect=e.effect,t})),t}},{key:"apiToNodeDetails",value:function(t,n){var a=new l.KubernetesNodeDetails;return(a=e.apiToNode(t,a)).CreationDate=t.metadata.creationTimestamp,a.OS.Architecture=t.status.nodeInfo.architecture,a.OS.Platform=t.status.nodeInfo.operatingSystem,a.OS.Image=t.status.nodeInfo.osImage,a.Yaml=n?n.data:"",a}},{key:"nodeToFormValues",value:function(e){var t=new d.KubernetesNodeFormValues;return t.Taints=Object(i.a)(e.Taints,(function(e){var t=new d.KubernetesNodeTaintFormValues;return t.Key=e.Key,t.Value=e.Value,t.Effect=e.Effect,t.NeedsDeletion=!1,t.IsNew=!1,t})),t.Labels=Object(i.a)(e.Labels,(function(e,t){var n=new d.KubernetesNodeLabelFormValues;return n.Key=t,n.Value=e,n.NeedsDeletion=!1,n.IsNew=!1,n})),t}},{key:"formValuesToNode",value:function(e,t){var n=angular.copy(e),s=Object(r.a)(t.Taints,(function(e){return!e.NeedsDeletion}));n.Taints=Object(i.a)(s,(function(e){var t=new l.KubernetesNodeTaint;return t.Key=e.Key,t.Value=e.Value,t.Effect=e.Effect,t}));var o=Object(r.a)(t.Labels,(function(e){return!e.NeedsDeletion}));return n.Labels=Object(a.a)(o,(function(e,t){return e[t.Key]=t.Value?t.Value:"",e}),{}),n}},{key:"createPayload",value:function(e){var t=new u.KubernetesNodeCreatePayload;t.metadata.name=e.Name;var n=Object(i.a)(e.Taints,(function(e){var t=new u.KubernetesNodeTaintPayload;return t.key=e.Key,t.value=e.Value,t.effect=e.Effect,t}));return t.spec.taints=n.length?n:void 0,t.metadata.labels=e.Labels,t}},{key:"patchPayload",value:function(t,n){var a=e.createPayload(t),r=e.createPayload(n);return p.a(a,r)}}],(n=null)&&m(t.prototype,n),g&&m(t,g),e}(),f=Object.freeze({READY:"Ready",MEMORY_PRESSURE:"MemoryPressure",PID_PRESSURE:"PIDPressure",DISK_PRESSURE:"DiskPressure",NETWORK_UNAVAILABLE:"NetworkUnavailable"});t.default=g},,,,,,,,,,,,function(e,t,n){"use strict";function a(){this.Directory="/cio/",this.Capacity=20,this.Redundancy=2,this.Provisioning="thin",this.Type="ssd",this.MinIOPS=100,this.MaxIOPS=2e3,this.MinBandwidth=1,this.MaxBandwidth=100,this.Filesystem="btrfs",this.SnapshotEnabled=!1,this.SnapshotInterval=1440,this.SnapshotMax=1,this.EncryptionEnabled=!1,this.InterfaceType="",this.InterfaceDriver="",this.InterfaceNetwork="",this.InterfaceConf="",this.Labels=[]}function r(e){this.Name=e,this.Checked=!1}function i(e,t){this.Name=e,this.Directory=t.directory,this.Capacity=t.capacity,this.Provisioning=t.provision,this.Type=t.type,this.Redundancy=t.level,t.iops&&(this.MinIOPS=t.iops.min,this.MaxIOPS=t.iops.max),t.bandwidth&&(this.MinBandwidth=t.bandwidth.min,this.MaxBandwidth=t.bandwidth.max),t.filesystem&&(this.Filesystem=t.filesystem.type);var n=t.service;n.snapshot?(this.SnapshotEnabled=n.snapshot.enabled,this.SnapshotInterval=n.snapshot.interval,this.SnapshotMax=n.snapshot.max):this.SnapshotEnabled=!1,n.encryption?this.EncryptionEnabled=n.encryption.enabled:this.EncryptionEnabled=!1,t.interface&&(this.InterfaceType=t.interface.type,this.InterfaceDriver=t.interface.driver,this.InterfaceNetwork=t.interface.network,this.InterfaceConf=t.interface.conf),t.label?this.Labels=t.label:this.Labels=[]}function s(e){this.name=e.Name,this.capacity=e.Capacity,this.directory=e.Directory,this.provision=e.Provisioning,this.type=e.Type,this.level=e.Redundancy,e.MinIOPS&&e.MaxIOPS&&(this.iops={min:e.MinIOPS,max:e.MaxIOPS}),e.MinBandwidth&&e.MaxBandwidth&&(this.bandwidth={min:e.MinBandwidth,max:e.MaxBandwidth}),this.filesystem={type:e.Filesystem};var t={};t.snapshot={enabled:e.SnapshotEnabled},e.SnapshotEnabled&&(t.snapshot.interval=e.SnapshotInterval,t.snapshot.max=e.SnapshotMax),t.encryption={enabled:e.EncryptionEnabled},this.service=t,this.interface={driver:e.InterfaceDriver,network:e.InterfaceNetwork,conf:e.InterfaceConf},e.InterfaceType&&(this.interface.type=e.InterfaceType),this.label=e.Labels}n.r(t),n.d(t,"StoridgeProfileDefaultModel",(function(){return a})),n.d(t,"StoridgeProfileListModel",(function(){return r})),n.d(t,"StoridgeProfileModel",(function(){return i})),n.d(t,"StoridgeCreateProfileRequest",(function(){return s}))},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesConfigurationFormValues",(function(){return s})),n.d(t,"KubernetesConfigurationFormValuesDataEntry",(function(){return l}));var a=n(26);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=Object.freeze({Id:"",ResourcePool:"",Name:"",ConfigurationOwner:"",Type:a.KubernetesConfigurationTypes.CONFIGMAP,Data:[],DataYaml:"",IsSimple:!0}),s=function e(){r(this,e),Object.assign(this,JSON.parse(JSON.stringify(i)))},o=Object.freeze({Key:"",Value:""}),l=function e(){r(this,e),Object.assign(this,JSON.parse(JSON.stringify(o)))}},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesStatefulSet",(function(){return r}));var a=Object.freeze({Namespace:"",Name:"",StackName:"",ReplicaCount:0,Image:"",Env:[],CpuLimit:"",MemoryLimit:"",VolumeMounts:[],Volumes:[],Secret:void 0,VolumeClaims:[],ServiceName:"",ApplicationName:"",ApplicationOwner:"",Note:"",Affinity:void 0}),r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,JSON.parse(JSON.stringify(a)))}},function(e,t,n){"use strict";n.r(t);var a=n(53),r=n(2),i=n(22),s=n(4),o=n(46),l=n(209),c=n(424),d=n(3);function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,p;return t=e,p=[{key:"apiToPersistentVolumeClaim",value:function(e,t,n){var a=new l.KubernetesPersistentVolumeClaim;return a.Id=e.metadata.uid,a.Name=e.metadata.name,a.Namespace=e.metadata.namespace,a.CreationDate=e.metadata.creationTimestamp,a.Storage=e.spec.resources.requests.storage.replace("i","B"),a.StorageClass=Object(s.a)(t,{Name:e.spec.storageClassName}),a.Yaml=n?n.data:"",a.ApplicationOwner=e.metadata.labels?e.metadata.labels[d.KubernetesPortainerApplicationOwnerLabel]:"",a.ApplicationName=e.metadata.labels?e.metadata.labels[d.KubernetesPortainerApplicationNameLabel]:"",a}},{key:"applicationFormValuesToVolumeClaims",value:function(e){return Object(i.a)(e.PersistedFolders,(function(e){return e.NeedsDeletion})),Object(r.a)(e.PersistedFolders,(function(t){var n=new l.KubernetesPersistentVolumeClaim;if(Object(a.a)(t.ExistingVolume))t.PersistentVolumeClaimName?(n.Name=t.PersistentVolumeClaimName,n.PreviousName=t.PersistentVolumeClaimName):n.Name=e.Name+"-"+n.Name,n.Storage=""+t.Size+t.SizeUnit.charAt(0)+"i",n.StorageClass=t.StorageClass;else{var r=t.ExistingVolume.PersistentVolumeClaim;n.Name=r.Name,t.PersistentVolumeClaimName&&(n.PreviousName=t.PersistentVolumeClaimName),n.StorageClass=r.StorageClass,n.Storage=r.Storage.charAt(0)+"i",n.CreationDate=r.CreationDate,n.Id=r.Id}return n.MountPath=t.ContainerPath,n.Namespace=e.ResourcePool.Namespace.Name,n.ApplicationOwner=e.ApplicationOwner,n.ApplicationName=e.Name,n}))}},{key:"createPayload",value:function(e){var t=new c.KubernetesPersistentVolumClaimCreatePayload;return t.metadata.name=e.Name,t.metadata.namespace=e.Namespace,t.spec.resources.requests.storage=e.Storage,t.spec.storageClassName=e.StorageClass.Name,t.metadata.labels.app=e.ApplicationName,t.metadata.labels[d.KubernetesPortainerApplicationOwnerLabel]=e.ApplicationOwner,t.metadata.labels[d.KubernetesPortainerApplicationNameLabel]=e.ApplicationName,t}},{key:"patchPayload",value:function(t,n){var a=e.createPayload(t),r=e.createPayload(n);return o.a(a,r)}}],(n=null)&&u(t.prototype,n),p&&u(t,p),e}();t.default=p},function(e,t,n){"use strict";function a(e){return{MemoryLimit:e.MemoryLimit,CpuLimit:e.CpuLimit,HasQuota:!0,IngressClasses:[]}}function r(e){return{Namespace:void 0,IngressClass:e,RewriteTarget:!1,Annotations:[],Host:void 0,Selected:!1,WasSelected:!1,AdvancedConfig:!1}}function i(){return{Key:"",Value:""}}n.r(t),n.d(t,"KubernetesResourcePoolFormValues",(function(){return a})),n.d(t,"KubernetesResourcePoolIngressClassFormValue",(function(){return r})),n.d(t,"KubernetesResourcePoolIngressClassAnnotationFormValue",(function(){return i}))},function(e,t,n){"use strict";n.r(t);var a=n(19),r=n(318),i=n(319),s=n(314),o=n.n(s),l=n(26);function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,s=[{key:"createPayload",value:function(e){var t=new r.KubernetesSecretCreatePayload;return t.metadata.name=e.Name,t.metadata.namespace=e.Namespace,t.metadata.labels[l.KubernetesPortainerConfigurationOwnerLabel]=e.ConfigurationOwner,t.stringData=e.Data,t}},{key:"updatePayload",value:function(e){var t=new r.KubernetesSecretUpdatePayload;return t.metadata.name=e.Name,t.metadata.namespace=e.Namespace,t.metadata.labels[l.KubernetesPortainerConfigurationOwnerLabel]=e.ConfigurationOwner,t.stringData=e.Data,t}},{key:"apiToSecret",value:function(e,t){var n=new i.KubernetesApplicationSecret;return n.Id=e.metadata.uid,n.Name=e.metadata.name,n.Namespace=e.metadata.namespace,n.ConfigurationOwner=e.metadata.labels?e.metadata.labels[l.KubernetesPortainerConfigurationOwnerLabel]:"",n.CreationDate=e.metadata.creationTimestamp,n.Yaml=t?t.data:"",n.Data=e.data,n}},{key:"configurationFormValuesToSecret",value:function(e){var t=new i.KubernetesApplicationSecret;return t.Name=e.Name,t.Namespace=e.ResourcePool.Namespace.Name,t.ConfigurationOwner=e.ConfigurationOwner,e.IsSimple?t.Data=Object(a.a)(e.Data,(function(e,t){return e[t.Key]=t.Value,e}),{}):t.Data=o.a.parse(e.DataYaml),t}}],(n=null)&&c(t.prototype,n),s&&c(t,s),e}();t.default=d},function(e,t,n){"use strict";var a;function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,"KubernetesSystem_DefaultDeploymentUniqueLabelKey",(function(){return i})),n.d(t,"KubernetesSystem_RevisionAnnotation",(function(){return s})),n.d(t,"KubernetesSystem_RevisionHistoryAnnotation",(function(){return o})),n.d(t,"KubernetesSystem_ChangeCauseAnnotation",(function(){return l})),n.d(t,"KubernetesSystem_DesiredReplicasAnnotation",(function(){return c})),n.d(t,"KubernetesSystem_MaxReplicasAnnotation",(function(){return d})),n.d(t,"KubernetesSystem_AnnotationsToSkip",(function(){return u}));var i="pod-template-hash",s="deployment.kubernetes.io/revision",o="deployment.kubernetes.io/revision-history",l="kubernetes.io/change-cause",c="deployment.kubernetes.io/desired-replicas",d="deployment.kubernetes.io/max-replicas",u=(r(a={},"kubectl.kubernetes.io/last-applied-configuration",!0),r(a,s,!0),r(a,o,!0),r(a,c,!0),r(a,d,!0),r(a,"deprecated.deployment.rollback.to",!0),a)},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesHorizontalPodAutoScalerConverter",(function(){return o}));var a=n(46),r=n(324),i=n(436);function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"apiToModel",value:function(e,t){var n=new r.KubernetesHorizontalPodAutoScaler;return n.Id=e.metadata.uid,n.Namespace=e.metadata.namespace,n.Name=e.metadata.name,n.MinReplicas=e.spec.minReplicas,n.MaxReplicas=e.spec.maxReplicas,n.TargetCPUUtilization=e.spec.targetCPUUtilizationPercentage,e.spec.scaleTargetRef&&(n.TargetEntity.ApiVersion=e.spec.scaleTargetRef.apiVersion,n.TargetEntity.Kind=e.spec.scaleTargetRef.kind,n.TargetEntity.Name=e.spec.scaleTargetRef.name),n.Yaml=t?t.data:"",n}},{key:"createPayload",value:function(e){var t=new i.KubernetesHorizontalPodAutoScalerCreatePayload;return t.metadata.namespace=e.Namespace,t.metadata.name=e.TargetEntity.Name,t.spec.minReplicas=e.MinReplicas,t.spec.maxReplicas=e.MaxReplicas,t.spec.targetCPUUtilizationPercentage=e.TargetCPUUtilization,t.spec.scaleTargetRef.apiVersion=e.TargetEntity.ApiVersion,t.spec.scaleTargetRef.kind=e.TargetEntity.Kind,t.spec.scaleTargetRef.name=e.TargetEntity.Name,t}},{key:"patchPayload",value:function(t,n){var r=e.createPayload(t),i=e.createPayload(n);return a.a(r,i)}},{key:"applicationFormValuesToModel",value:function(e,t){var n=new r.KubernetesHorizontalPodAutoScaler;return n.Name=e.Name,n.Namespace=e.ResourcePool.Namespace.Name,n.MinReplicas=e.AutoScaler.MinReplicas,n.MaxReplicas=e.AutoScaler.MaxReplicas,n.TargetCPUUtilization=e.AutoScaler.TargetCPUUtilization,n.TargetEntity.Name=e.Name,n.TargetEntity.Kind=t,n.TargetEntity.ApiVersion=e.AutoScaler.ApiVersion,n}}],(n=null)&&s(t.prototype,n),o&&s(t,o),e}()},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t),n.d(t,"KubernetesNode",(function(){return i})),n.d(t,"KubernetesNodeDetails",(function(){return o})),n.d(t,"KubernetesNodeTaint",(function(){return c})),n.d(t,"KubernetesNodeTaintEffects",(function(){return d}));var r=Object.freeze({Id:"",Name:"",Labels:{},Role:"",Status:"",CPU:0,Memory:"",Version:"",IPAddress:"",Api:!1,Taints:[],Port:0}),i=function e(){a(this,e),Object.assign(this,JSON.parse(JSON.stringify(r)))},s=Object.freeze({CreationDate:"",OS:{Architecture:"",Platform:"",Image:""},Conditions:[],Yaml:""}),o=function e(){a(this,e),Object.assign(this,JSON.parse(JSON.stringify(r))),Object.assign(this,JSON.parse(JSON.stringify(s)))},l=Object.freeze({Key:"",Value:"",Effect:""}),c=function e(){a(this,e),Object.assign(this,JSON.parse(JSON.stringify(l)))},d=Object.freeze({NOSCHEDULE:"NoSchedule",PREFERNOSCHEDULE:"PreferNoSchedule",NOEXECUTE:"NoExecute"})},function(e,t,n){"use strict";n.r(t),n.d(t,"ResourceControlTypeString",(function(){return a})),n.d(t,"ResourceControlTypeInt",(function(){return r}));var a=Object.freeze({CONFIG:"config",CONTAINER:"container",NETWORK:"network",SECRET:"secret",SERVICE:"service",STACK:"stack",VOLUME:"volume",CUSTOM_TEMPLATE:"custom-template"}),r=Object.freeze({CONTAINER:1,SERVICE:2,VOLUME:3,NETWORK:4,SECRET:5,STACK:6,CONFIG:7,CUSTOM_TEMPLATE:8})},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var a=n(85);function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"generateResourceQuotaName",value:function(e){return a.KubernetesPortainerResourceQuotaPrefix+e}}],(n=null)&&r(t.prototype,n),i&&r(t,i),e}();t.default=i},,,,function(e,t,n){"use strict";function a(){return{Name:"",Namespace:"",Annotations:{},Host:void 0,PreviousHost:void 0,Paths:[],IngressClassName:""}}function r(){return{IngressName:"",ServiceName:"",Host:"",IP:"",Port:"",Path:""}}function i(){return{Name:"",Type:void 0,NeedsDeletion:!1,IsNew:!0}}n.r(t),n.d(t,"KubernetesIngress",(function(){return a})),n.d(t,"KubernetesIngressRule",(function(){return r})),n.d(t,"KubernetesIngressClass",(function(){return i}))},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t),n.d(t,"KubernetesNodeFormValues",(function(){return i})),n.d(t,"KubernetesNodeTaintFormValues",(function(){return o})),n.d(t,"KubernetesNodeLabelFormValues",(function(){return c}));var r=Object.freeze({Taints:[],Labels:[]}),i=function e(){a(this,e),Object.assign(JSON.parse(JSON.stringify(r)))},s=Object.freeze({Key:"",Values:"",Effect:"",NeedsDeletion:!1,IsNew:!1,IsChanged:!1}),o=function e(){a(this,e),Object.assign(JSON.parse(JSON.stringify(s)))},l=Object.freeze({Key:"",Values:"",NeedsDeletion:!1,IsNew:!1,IsUsed:!1,IsChanged:!1}),c=function e(){a(this,e),Object.assign(JSON.parse(JSON.stringify(l)))}},function(e,t,n){"use strict";n.r(t),n.d(t,"RegistryViewModel",(function(){return i})),n.d(t,"RegistryManagementConfigurationDefaultModel",(function(){return s})),n.d(t,"RegistryDefaultModel",(function(){return o})),n.d(t,"RegistryCreateRequest",(function(){return l}));var a=n(99),r=n(65);function i(e){this.Id=e.Id,this.Type=e.Type,this.Name=e.Name,this.URL=e.URL,this.Authentication=e.Authentication,this.Username=e.Username,this.Password=e.Password,this.AuthorizedUsers=e.AuthorizedUsers,this.AuthorizedTeams=e.AuthorizedTeams,this.UserAccessPolicies=e.UserAccessPolicies,this.TeamAccessPolicies=e.TeamAccessPolicies,this.Checked=!1,this.Gitlab=e.Gitlab}function s(e){this.Authentication=!1,this.Password="",this.TLS=!1,this.TLSSkipVerify=!1,this.TLSCACertFile=null,this.TLSCertFile=null,this.TLSKeyFile=null,e.Type!==r.RegistryTypes.QUAY&&e.Type!==r.RegistryTypes.AZURE||(this.Authentication=!0,this.Username=e.Username,this.TLS=!0),e.Type===r.RegistryTypes.CUSTOM&&e.Authentication&&(this.Authentication=!0,this.Username=e.Username)}function o(){this.Type=r.RegistryTypes.CUSTOM,this.URL="",this.Name="",this.Authentication=!1,this.Username="",this.Password=""}function l(e){this.Name=e.Name,this.Type=e.Type,this.URL=Object(a.a)(e.URL,/^https?\:\/\//i,""),this.URL=Object(a.a)(this.URL,/\/$/,""),this.Authentication=e.Authentication,e.Authentication&&(this.Username=e.Username,this.Password=e.Password),e.Type===r.RegistryTypes.GITLAB&&(this.Gitlab={ProjectId:e.Gitlab.ProjectId,InstanceURL:e.Gitlab.InstanceURL,ProjectPath:e.Gitlab.ProjectPath})}},,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesResourceReservation",(function(){return r}));var a=Object.freeze({Memory:0,CPU:0}),r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,JSON.parse(JSON.stringify(a)))}},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesDeployment",(function(){return r}));var a=Object.freeze({Namespace:"",Name:"",StackName:"",ReplicaCount:0,Image:"",Env:[],CpuLimit:0,MemoryLimit:0,VolumeMounts:[],Volumes:[],Secret:void 0,ApplicationName:"",ApplicationOwner:"",Note:"",Affinity:void 0}),r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,JSON.parse(JSON.stringify(a)))}},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesDaemonSet",(function(){return r}));var a=Object.freeze({Namespace:"",Name:"",StackName:"",Image:"",Env:[],CpuLimit:0,MemoryLimit:0,VoluemMounts:[],Volumes:[],Secret:void 0,ApplicationName:"",ApplicationOwner:"",Note:"",Affinity:void 0}),r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,JSON.parse(JSON.stringify(a)))}},function(e,t,n){"use strict";function a(e){this.Id=e.Id,this.UserId=e.UserID,this.TeamId=e.TeamID,this.Role=e.Role}n.r(t),n.d(t,"TeamMembershipModel",(function(){return a}))},function(e,t,n){"use strict";function a(){this.Location="",this.OSType="Linux",this.Name="",this.Image="",this.AllocatePublicIP=!0,this.Ports=[{container:80,host:80,protocol:"TCP"}],this.CPU=1,this.Memory=1}function r(e){var t=e.properties.ipAddress.ports,n=e.properties.containers.length?e.properties.containers[0]:{},a=n?n.properties.ports:[];this.Id=e.id,this.Name=e.name,this.Location=e.location,this.IPAddress=e.properties.ipAddress.ip,this.Ports=t.length?t.map((function(e,t){return{container:a[t].port,host:e.port,protocol:e.protocol}})):[],this.Image=n.properties.image||"",this.OSType=e.properties.osType,this.AllocatePublicIP="Public"===e.properties.ipAddress.type,this.CPU=n.properties.resources.requests.cpu,this.Memory=n.properties.resources.requests.memoryInGB}function i(e){this.location=e.Location;for(var t=[],n=[],a=0;a<e.Ports.length;a++){var r=e.Ports[a];r.container&&r.host&&(t.push({port:r.container}),n.push({port:r.host,protocol:r.protocol}))}this.properties={osType:e.OSType,containers:[{name:e.Name,properties:{image:e.Image,ports:t,resources:{requests:{cpu:e.CPU,memoryInGB:e.Memory}}}}],ipAddress:{type:e.AllocatePublicIP?"Public":"Private",ports:n}}}n.r(t),n.d(t,"ContainerGroupDefaultModel",(function(){return a})),n.d(t,"ContainerGroupViewModel",(function(){return r})),n.d(t,"CreateContainerGroupRequest",(function(){return i}))},,,,,function(e,t,n){"use strict";n.r(t);var a=n(20),r=n(5);function i(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,s=[{key:"getIPV4Configs",value:function(e){return Object(r.a)(e,(function(e){return/^([0-9]{1,3}\.){3}[0-9]{1,3}(\/([0-9]|[1-2][0-9]|3[0-2]))?$/.test(e.Subnet)}))}},{key:"getIPV6Configs",value:function(t){return a.a.apply(void 0,[t].concat(i(e.getIPV4Configs(t))))}}],(n=null)&&o(t.prototype,n),s&&o(t,s),e}();t.default=l},function(e,t,n){"use strict";n.r(t),n.d(t,"createStatus",(function(){return o})),n.d(t,"ContainerViewModel",(function(){return l})),n.d(t,"ContainerStatsViewModel",(function(){return c})),n.d(t,"ContainerDetailsViewModel",(function(){return d}));var a=n(145),r=n(53),i=n(34),s=n(58);function o(e){var t=Object(i.a)(e);return t.indexOf("paused")>-1?"":t.indexOf("dead")>-1?"dead":t.indexOf("created")>-1?"created":t.indexOf("exited")>-1?"":t.indexOf("(healthy)")>-1?"":t.indexOf("(unhealthy)")>-1?"":t.indexOf("(health: starting)")>-1?"":""}function l(e){if(this.Id=e.Id,this.Status=o(e.Status),this.State=e.State,this.Created=e.Created,this.Names=e.Names,e.NetworkSettings&&!Object(r.a)(e.NetworkSettings.Networks)&&(this.IP=e.NetworkSettings.Networks[Object.keys(e.NetworkSettings.Networks)[0]].IPAddress),this.NetworkSettings=e.NetworkSettings,this.Image=e.Image,this.ImageID=e.ImageID,this.Command=e.Command,this.Checked=!1,this.Labels=e.Labels,this.Labels&&this.Labels["com.docker.compose.project"]?this.StackName=this.Labels["com.docker.compose.project"]:this.Labels&&this.Labels["com.docker.stack.namespace"]&&(this.StackName=this.Labels["com.docker.stack.namespace"]),this.Mounts=e.Mounts,this.Ports=[],e.Ports)for(var t=0;t<e.Ports.length;++t){var n=e.Ports[t];n.PublicPort&&this.Ports.push({host:n.IP,private:n.PrivatePort,public:n.PublicPort})}e.Portainer&&(e.Portainer.ResourceControl&&(this.ResourceControl=new s.ResourceControlViewModel(e.Portainer.ResourceControl)),e.Portainer.Agent&&e.Portainer.Agent.NodeName&&(this.NodeName=e.Portainer.Agent.NodeName))}function c(e){this.read=e.read,this.preread=e.preread,void 0!==e.memory_stats.privateworkingset?(this.MemoryUsage=e.memory_stats.privateworkingset,this.MemoryCache=0,this.NumProcs=e.num_procs,this.isWindows=!0):void 0===e.memory_stats.stats||void 0===e.memory_stats.usage?this.MemoryUsage=this.MemoryCache=0:(this.MemoryUsage=e.memory_stats.usage-e.memory_stats.stats.cache,this.MemoryCache=e.memory_stats.stats.cache),this.PreviousCPUTotalUsage=e.precpu_stats.cpu_usage.total_usage,this.PreviousCPUSystemUsage=e.precpu_stats.system_cpu_usage,this.CurrentCPUTotalUsage=e.cpu_stats.cpu_usage.total_usage,this.CurrentCPUSystemUsage=e.cpu_stats.system_cpu_usage,e.cpu_stats.cpu_usage.percpu_usage&&(this.CPUCores=e.cpu_stats.cpu_usage.percpu_usage.length),this.Networks=Object(a.a)(e.networks)}function d(e){this.Model=e,this.Id=e.Id,this.State=e.State,this.Created=e.Created,this.Name=e.Name,this.NetworkSettings=e.NetworkSettings,this.Args=e.Args,this.Image=e.Image,this.Config=e.Config,this.HostConfig=e.HostConfig,this.Mounts=e.Mounts,e.Portainer&&e.Portainer.ResourceControl&&(this.ResourceControl=new s.ResourceControlViewModel(e.Portainer.ResourceControl))}},function(e,t,n){"use strict";function a(e){if(this.Id=e.Id,this.Tag=e.Tag,this.Repository=e.Repository,this.Created=e.Created,this.Checked=!1,this.RepoTags=e.RepoTags,!this.RepoTags&&e.RepoDigests){this.RepoTags=[];for(var t=0;t<e.RepoDigests.length;t++){var n=e.RepoDigests[t],a=n.substring(0,n.indexOf("@"));this.RepoTags.push(a+":<none>")}}this.VirtualSize=e.VirtualSize,this.ContainerCount=e.ContainerCount,e.Portainer&&e.Portainer.Agent&&e.Portainer.Agent.NodeName&&(this.NodeName=e.Portainer.Agent.NodeName)}function r(e){this.hasError=!1;for(var t=[],n=0;n<e.length;n++){var a=e[n];a.stream&&(a=a.stream.replace(/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,""),t.push(a)),a.errorDetail&&(t.push(a.errorDetail.message),this.hasError=!0)}this.buildLogs=t}n.r(t),n.d(t,"ImageViewModel",(function(){return a})),n.d(t,"ImageBuildModel",(function(){return r}))},function(e,t,n){"use strict";n.r(t);var a=n(20),r=n(110),i=n(2),s=n(34),o=n(46),l=n(425),c=n(3),d=n(28),u=n(210);function p(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,m;return t=e,m=[{key:"applicationFormValuesToService",value:function(e){var t=new d.KubernetesService;t.Namespace=e.ResourcePool.Namespace.Name,t.Name=e.Name,t.StackName=e.StackName?e.StackName:e.Name,t.ApplicationOwner=e.ApplicationOwner,t.ApplicationName=e.Name,e.PublishingType===c.KubernetesApplicationPublishingTypes.CLUSTER?t.Type=d.KubernetesServiceTypes.NODE_PORT:e.PublishingType===c.KubernetesApplicationPublishingTypes.LOAD_BALANCER&&(t.Type=d.KubernetesServiceTypes.LOAD_BALANCER);var n=Object(i.a)(e.PublishedPorts,(function(n){return function(e,t,n){if(t.IsNew||!t.NeedsDeletion){var a=e.Name,r=new d.KubernetesServicePort;return r.name=Object(s.a)(a+"-"+t.ContainerPort+"-"+t.Protocol),r.port=n===d.KubernetesServiceTypes.LOAD_BALANCER?t.LoadBalancerPort:t.ContainerPort,r.targetPort=t.ContainerPort,r.protocol=t.Protocol,n===d.KubernetesServiceTypes.NODE_PORT&&t.NodePort?r.nodePort=t.NodePort:n===d.KubernetesServiceTypes.LOAD_BALANCER&&t.LoadBalancerNodePort?r.nodePort=t.LoadBalancerNodePort:delete r.nodePort,r}}(e,n,t.Type)}));return t.Ports=Object(r.a)(Object(a.a)(n,void 0),(function(e){return e.targetPort+e.protocol})),t}},{key:"applicationFormValuesToHeadlessService",value:function(t){var n=e.applicationFormValuesToService(t);return n.Name=u.default.generateHeadlessServiceName(t.Name),n.Headless=!0,n}},{key:"createPayload",value:function(e){var t=new l.KubernetesServiceCreatePayload;return t.metadata.name=e.Name,t.metadata.namespace=e.Namespace,t.metadata.labels[c.KubernetesPortainerApplicationStackNameLabel]=e.StackName,t.metadata.labels[c.KubernetesPortainerApplicationNameLabel]=e.ApplicationName,t.metadata.labels[c.KubernetesPortainerApplicationOwnerLabel]=e.ApplicationOwner,t.spec.ports=e.Ports,t.spec.selector.app=e.ApplicationName,e.Headless?(t.spec.clusterIP=d.KubernetesServiceHeadlessClusterIP,delete t.spec.ports):e.Type&&(t.spec.type=e.Type),t}},{key:"patchPayload",value:function(t,n){var a=e.createPayload(t),r=e.createPayload(n);return o.a(a,r)}}],(n=null)&&p(t.prototype,n),m&&p(t,m),e}();t.default=m},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesNodeHelper",(function(){return f}));var a=n(87),r=n(247),i=n(35),s=n(4),o=n(52),l=n(2),c=n(70),d=n(62),u=n(55);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function g(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,m;return t=e,m=[{key:"isSystemLabel",value:function(e){return!e.IsNew&&(Object(u.a)(e.Key,"beta.kubernetes.io")||Object(u.a)(e.Key,"kubernetes.io")||"node-role.kubernetes.io/master"===e.Key)}},{key:"reorderLabels",value:function(t){return Object(d.a)(t,(function(t){return!e.isSystemLabel(t)}))}},{key:"computeUsedLabels",value:function(e,t){var n=Object(c.a)(Object(l.a)(e,"Pods")),a=Object(o.a)(Object(c.a)(Object(l.a)(n,"NodeSelector")));return Object(l.a)(t,(function(e){return e.IsUsed=!!Object(s.a)(a,(function(t){return t&&t[e.Key]===e.Value})),e}))}},{key:"generateNodeLabelsFromNodes",value:function(e){var t=Object(i.a)(e,(function(e){return Object(l.a)(Object(r.a)(e.Labels),(function(e){var t=p(e,2);return{key:t[0],value:t[1]}}))}));return Object(l.a)(Object(a.a)(t,"key"),(function(e,t){return{Key:t,Values:Object(o.a)(Object(l.a)(e,"value"))}}))}}],(n=null)&&g(t.prototype,n),m&&g(t,m),e}()},function(e,t,n){"use strict";function a(){this.Name="",this.Description="",this.TagIds=[]}function r(e){this.Id=e.Id,this.Name=e.Name,this.Description=e.Description,this.TagIds=e.TagIds,this.AuthorizedUsers=e.AuthorizedUsers,this.AuthorizedTeams=e.AuthorizedTeams,this.UserAccessPolicies=e.UserAccessPolicies,this.TeamAccessPolicies=e.TeamAccessPolicies}function i(e,t){this.Name=e.Name,this.Description=e.Description,this.TagIds=e.TagIds,this.AssociatedEndpoints=t}function s(e,t){this.id=e.Id,this.Name=e.Name,this.Description=e.Description,this.TagIds=e.TagIds,this.AssociatedEndpoints=t,this.UserAccessPolicies=e.UserAccessPolicies,this.TeamAccessPolicies=e.TeamAccessPolicies}n.r(t),n.d(t,"EndpointGroupDefaultModel",(function(){return a})),n.d(t,"EndpointGroupModel",(function(){return r})),n.d(t,"EndpointGroupCreateRequest",(function(){return i})),n.d(t,"EndpointGroupUpdateRequest",(function(){return s}))},function(e,t,n){"use strict";function a(){return{requiredDuringSchedulingIgnoredDuringExecution:{nodeSelectorTerms:[]},preferredDuringSchedulingIgnoredDuringExecution:[]}}function r(){return{weight:1,preference:{}}}function i(){return{matchExpressions:[]}}function s(){return{key:"",operator:"",values:[]}}n.r(t),n.d(t,"KubernetesPodNodeAffinityPayload",(function(){return a})),n.d(t,"KubernetesPreferredSchedulingTermPayload",(function(){return r})),n.d(t,"KubernetesNodeSelectorTermPayload",(function(){return i})),n.d(t,"KubernetesNodeSelectorRequirementPayload",(function(){return s}))},function(e,t,n){"use strict";n.r(t);var a=n(44),r=n.n(a),i=n(85),s=n(317),o=n(143),l=n(71),c=n(15);function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"apiToResourceQuota",value:function(e,t){var n=new i.KubernetesResourceQuota;return n.Id=e.metadata.uid,n.Namespace=e.metadata.namespace,n.Name=e.metadata.name,n.CpuLimit=0,n.MemoryLimit=0,e.spec.hard&&e.spec.hard["limits.cpu"]&&(n.CpuLimit=c.default.parseCPU(e.spec.hard["limits.cpu"])),e.spec.hard&&e.spec.hard["limits.memory"]&&(n.MemoryLimit=r()(e.spec.hard["limits.memory"],{base:10})),n.MemoryLimitUsed=0,e.status.used&&e.status.used["limits.memory"]&&(n.MemoryLimitUsed=r()(e.status.used["limits.memory"],{base:10})),n.CpuLimitUsed=0,e.status.used&&e.status.used["limits.cpu"]&&(n.CpuLimitUsed=c.default.parseCPU(e.status.used["limits.cpu"])),n.Yaml=t?t.data:"",n.ResourcePoolName=e.metadata.labels?e.metadata.labels[l.KubernetesPortainerResourcePoolNameLabel]:"",n.ResourcePoolOwner=e.metadata.labels?e.metadata.labels[l.KubernetesPortainerResourcePoolOwnerLabel]:"",n}},{key:"createPayload",value:function(e){var t=new s.KubernetesResourceQuotaCreatePayload;return t.metadata.name=o.default.generateResourceQuotaName(e.Namespace),t.metadata.namespace=e.Namespace,t.spec.hard["requests.cpu"]=e.CpuLimit,t.spec.hard["requests.memory"]=e.MemoryLimit,t.spec.hard["limits.cpu"]=e.CpuLimit,t.spec.hard["limits.memory"]=e.MemoryLimit,t.metadata.labels[l.KubernetesPortainerResourcePoolNameLabel]=e.ResourcePoolName,e.ResourcePoolOwner&&(t.metadata.labels[l.KubernetesPortainerResourcePoolOwnerLabel]=e.ResourcePoolOwner),e.CpuLimit&&0!==e.CpuLimit||(delete t.spec.hard["requests.cpu"],delete t.spec.hard["limits.cpu"]),e.MemoryLimit&&0!==e.MemoryLimit||(delete t.spec.hard["requests.memory"],delete t.spec.hard["limits.memory"]),t}},{key:"updatePayload",value:function(e){var t=new s.KubernetesResourceQuotaUpdatePayload;return t.metadata.name=e.Name,t.metadata.namespace=e.Namespace,t.metadata.uid=e.Id,t.spec.hard["requests.cpu"]=e.CpuLimit,t.spec.hard["requests.memory"]=e.MemoryLimit,t.spec.hard["limits.cpu"]=e.CpuLimit,t.spec.hard["limits.memory"]=e.MemoryLimit,t.metadata.labels[l.KubernetesPortainerResourcePoolNameLabel]=e.ResourcePoolName,e.ResourcePoolOwner&&(t.metadata.labels[l.KubernetesPortainerResourcePoolOwnerLabel]=e.ResourcePoolOwner),e.CpuLimit&&0!==e.CpuLimit||(delete t.spec.hard["requests.cpu"],delete t.spec.hard["limits.cpu"]),e.MemoryLimit&&0!==e.MemoryLimit||(delete t.spec.hard["requests.memory"],delete t.spec.hard["limits.memory"]),t}}],(n=null)&&d(t.prototype,n),a&&d(t,a),e}();t.default=u},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesHorizontalPodAutoScalerHelper",(function(){return d}));var a=n(4),r=n(8),i=n(3),s=n(162),o=n(114),l=n(163);function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,d;return t=e,d=[{key:"findApplicationBoundScaler",value:function(t,n){var r=e.getApplicationTypeString(n);return Object(a.a)(t,(function(e){return e.TargetEntity.Kind===r&&e.TargetEntity.Name===n.Name}))}},{key:"getApplicationTypeString",value:function(e){if(e instanceof i.KubernetesApplication&&e.ApplicationType===i.KubernetesApplicationTypes.DEPLOYMENT||e instanceof s.KubernetesDeployment)return i.KubernetesApplicationTypeStrings.DEPLOYMENT;if(e instanceof i.KubernetesApplication&&e.ApplicationType===i.KubernetesApplicationTypes.DAEMONSET||e instanceof l.KubernetesDaemonSet)return i.KubernetesApplicationTypeStrings.DAEMONSET;if(e instanceof i.KubernetesApplication&&e.ApplicationType===i.KubernetesApplicationTypes.STATEFULSET||e instanceof o.KubernetesStatefulSet)return i.KubernetesApplicationTypeStrings.STATEFULSET;if(e instanceof i.KubernetesApplication&&e.ApplicationType===i.KubernetesApplicationTypes.POD)return i.KubernetesApplicationTypeStrings.POD;throw new r.default("Unable to determine application type")}}],(n=null)&&c(t.prototype,n),d&&c(t,d),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"StackViewModel",(function(){return r})),n.d(t,"ExternalStackViewModel",(function(){return i}));var a=n(58);function r(e){this.Id=e.Id,this.Type=e.Type,this.Name=e.Name,this.Checked=!1,this.EndpointId=e.EndpointId,this.SwarmId=e.SwarmId,this.Env=e.Env?e.Env:[],e.ResourceControl&&0!==e.ResourceControl.Id&&(this.ResourceControl=new a.ResourceControlViewModel(e.ResourceControl)),this.External=!1,this.Status=e.Status}function i(e,t){this.Name=e,this.Type=t,this.External=!0,this.Checked=!1}},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var a=n(46),r=n(162),i=n(421),s=n(3),o=n(13),l=n(15),c=n(47);function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,u;return t=e,u=[{key:"applicationFormValuesToDeployment",value:function(e,t){var n=new r.KubernetesDeployment;return n.Namespace=e.ResourcePool.Namespace.Name,n.Name=e.Name,n.StackName=e.StackName?e.StackName:e.Name,n.ApplicationOwner=e.ApplicationOwner,n.ApplicationName=e.Name,n.ReplicaCount=e.ReplicaCount,n.Image=e.Image,n.CpuLimit=e.CpuLimit,n.MemoryLimit=l.default.bytesValue(e.MemoryLimit),n.Env=o.default.generateEnvFromEnvVariables(e.EnvironmentVariables),n.Containers=e.Containers,o.default.generateVolumesFromPersistentVolumClaims(n,t),o.default.generateEnvOrVolumesFromConfigurations(n,e.Configurations),o.default.generateAffinityFromPlacements(n,e),n}},{key:"createPayload",value:function(e){var t=new i.KubernetesDeploymentCreatePayload;return t.metadata.name=e.Name,t.metadata.namespace=e.Namespace,t.metadata.labels[s.KubernetesPortainerApplicationStackNameLabel]=e.StackName,t.metadata.labels[s.KubernetesPortainerApplicationNameLabel]=e.ApplicationName,t.metadata.labels[s.KubernetesPortainerApplicationOwnerLabel]=e.ApplicationOwner,t.metadata.annotations[s.KubernetesPortainerApplicationNote]=e.Note,t.spec.replicas=e.ReplicaCount,t.spec.selector.matchLabels.app=e.Name,t.spec.template.metadata.labels.app=e.Name,t.spec.template.metadata.labels[s.KubernetesPortainerApplicationNameLabel]=e.ApplicationName,t.spec.template.spec.containers[0].name=e.Name,t.spec.template.spec.containers[0].image=e.Image,t.spec.template.spec.affinity=e.Affinity,c.default.assignOrDeleteIfEmpty(t,"spec.template.spec.containers[0].env",e.Env),c.default.assignOrDeleteIfEmpty(t,"spec.template.spec.containers[0].volumeMounts",e.VolumeMounts),c.default.assignOrDeleteIfEmpty(t,"spec.template.spec.volumes",e.Volumes),e.MemoryLimit&&(t.spec.template.spec.containers[0].resources.limits.memory=e.MemoryLimit,t.spec.template.spec.containers[0].resources.requests.memory=e.MemoryLimit),e.CpuLimit&&(t.spec.template.spec.containers[0].resources.limits.cpu=e.CpuLimit,t.spec.template.spec.containers[0].resources.requests.cpu=e.CpuLimit),e.CpuLimit||e.MemoryLimit||delete t.spec.template.spec.containers[0].resources,t}},{key:"patchPayload",value:function(t,n){var r=e.createPayload(t),i=e.createPayload(n);return a.a(r,i)}}],(n=null)&&d(t.prototype,n),u&&d(t,u),e}();t.default=u},function(e,t,n){"use strict";n.r(t);var a=n(46),r=n(163),i=n(422),s=n(3),o=n(13),l=n(15),c=n(47);function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,u;return t=e,u=[{key:"applicationFormValuesToDaemonSet",value:function(e,t){var n=new r.KubernetesDaemonSet;return n.Namespace=e.ResourcePool.Namespace.Name,n.Name=e.Name,n.StackName=e.StackName?e.StackName:e.Name,n.ApplicationOwner=e.ApplicationOwner,n.ApplicationName=e.Name,n.Image=e.Image,n.CpuLimit=e.CpuLimit,n.MemoryLimit=l.default.bytesValue(e.MemoryLimit),n.Env=o.default.generateEnvFromEnvVariables(e.EnvironmentVariables),o.default.generateVolumesFromPersistentVolumClaims(n,t),o.default.generateEnvOrVolumesFromConfigurations(n,e.Configurations),o.default.generateAffinityFromPlacements(n,e),n}},{key:"createPayload",value:function(e){var t=new i.KubernetesDaemonSetCreatePayload;return t.metadata.name=e.Name,t.metadata.namespace=e.Namespace,t.metadata.labels[s.KubernetesPortainerApplicationStackNameLabel]=e.StackName,t.metadata.labels[s.KubernetesPortainerApplicationNameLabel]=e.ApplicationName,t.metadata.labels[s.KubernetesPortainerApplicationOwnerLabel]=e.ApplicationOwner,t.metadata.annotations[s.KubernetesPortainerApplicationNote]=e.Note,t.spec.replicas=e.ReplicaCount,t.spec.selector.matchLabels.app=e.Name,t.spec.template.metadata.labels.app=e.Name,t.spec.template.metadata.labels[s.KubernetesPortainerApplicationNameLabel]=e.ApplicationName,t.spec.template.spec.containers[0].name=e.Name,t.spec.template.spec.containers[0].image=e.Image,t.spec.template.spec.affinity=e.Affinity,c.default.assignOrDeleteIfEmpty(t,"spec.template.spec.containers[0].env",e.Env),c.default.assignOrDeleteIfEmpty(t,"spec.template.spec.containers[0].volumeMounts",e.VolumeMounts),c.default.assignOrDeleteIfEmpty(t,"spec.template.spec.volumes",e.Volumes),e.MemoryLimit&&(t.spec.template.spec.containers[0].resources.limits.memory=e.MemoryLimit,t.spec.template.spec.containers[0].resources.requests.memory=e.MemoryLimit),e.CpuLimit&&(t.spec.template.spec.containers[0].resources.limits.cpu=e.CpuLimit,t.spec.template.spec.containers[0].resources.requests.cpu=e.CpuLimit),e.CpuLimit||e.MemoryLimit||delete t.spec.template.spec.containers[0].resources,t}},{key:"patchPayload",value:function(t,n){var r=e.createPayload(t),i=e.createPayload(n);return a.a(r,i)}}],(n=null)&&d(t.prototype,n),u&&d(t,u),e}();t.default=u},function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(46),i=n(114),s=n(423),o=n(3),l=n(13),c=n(15),d=n(47),u=n(115);function p(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,m;return t=e,m=[{key:"applicationFormValuesToStatefulSet",value:function(e,t){var n=new i.KubernetesStatefulSet;return n.Namespace=e.ResourcePool.Namespace.Name,n.Name=e.Name,n.StackName=e.StackName?e.StackName:e.Name,n.ApplicationOwner=e.ApplicationOwner,n.ApplicationName=e.Name,n.ReplicaCount=e.ReplicaCount,n.Image=e.Image,n.CpuLimit=e.CpuLimit,n.MemoryLimit=c.default.bytesValue(e.MemoryLimit),n.Env=l.default.generateEnvFromEnvVariables(e.EnvironmentVariables),l.default.generateVolumesFromPersistentVolumClaims(n,t),l.default.generateEnvOrVolumesFromConfigurations(n,e.Configurations),l.default.generateAffinityFromPlacements(n,e),n}},{key:"createPayload",value:function(e){var t=new s.KubernetesStatefulSetCreatePayload;return t.metadata.name=e.Name,t.metadata.namespace=e.Namespace,t.metadata.labels[o.KubernetesPortainerApplicationStackNameLabel]=e.StackName,t.metadata.labels[o.KubernetesPortainerApplicationNameLabel]=e.ApplicationName,t.metadata.labels[o.KubernetesPortainerApplicationOwnerLabel]=e.ApplicationOwner,t.metadata.annotations[o.KubernetesPortainerApplicationNote]=e.Note,t.spec.replicas=e.ReplicaCount,t.spec.serviceName=e.ServiceName,t.spec.selector.matchLabels.app=e.Name,t.spec.volumeClaimTemplates=Object(a.a)(e.VolumeClaims,(function(e){return u.default.createPayload(e)})),t.spec.template.metadata.labels.app=e.Name,t.spec.template.metadata.labels[o.KubernetesPortainerApplicationNameLabel]=e.ApplicationName,t.spec.template.spec.containers[0].name=e.Name,t.spec.template.spec.containers[0].image=e.Image,t.spec.template.spec.affinity=e.Affinity,d.default.assignOrDeleteIfEmpty(t,"spec.template.spec.containers[0].env",e.Env),d.default.assignOrDeleteIfEmpty(t,"spec.template.spec.containers[0].volumeMounts",e.VolumeMounts),d.default.assignOrDeleteIfEmpty(t,"spec.template.spec.volumes",e.Volumes),e.MemoryLimit&&(t.spec.template.spec.containers[0].resources.limits.memory=e.MemoryLimit,t.spec.template.spec.containers[0].resources.requests.memory=e.MemoryLimit),e.CpuLimit&&(t.spec.template.spec.containers[0].resources.limits.cpu=e.CpuLimit,t.spec.template.spec.containers[0].resources.requests.cpu=e.CpuLimit),e.CpuLimit||e.MemoryLimit||delete t.spec.template.spec.containers[0].resources,t}},{key:"patchPayload",value:function(t,n){var a=e.createPayload(t),i=e.createPayload(n);return r.a(a,i)}}],(n=null)&&p(t.prototype,n),m&&p(t,m),e}();t.default=m},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesPersistentVolumeClaim",(function(){return o})),n.d(t,"KubernetesVolume",(function(){return c}));var a=n(141),r=n.n(a);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=Object.freeze({Id:"",Name:"",PreviousName:"",Namespace:"",Storage:0,StorageClass:{},CreationDate:"",ApplicationOwner:"",ApplicationName:"",MountPath:"",Yaml:""}),o=function e(){i(this,e),Object.assign(this,JSON.parse(JSON.stringify(s))),this.Name=r()()},l=Object.freeze({ResourcePool:{},PersistentVolumeClaim:{},Applications:[]}),c=function e(){i(this,e),Object.assign(this,JSON.parse(JSON.stringify(l)))}},function(e,t,n){"use strict";n.r(t);var a=n(558),r=n(4),i=n(28);function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"generateHeadlessServiceName",value:function(e){return i.KubernetesServiceHeadlessPrefix+e}},{key:"findApplicationBoundService",value:function(e,t){if(t.spec.template)return Object(r.a)(e,(function(e){return e.spec.selector&&Object(a.a)(t.spec.template.metadata.labels,e.spec.selector)}))}}],(n=null)&&s(t.prototype,n),o&&s(t,o),e}();t.default=o},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesStorageClassAccessPolicies",(function(){return r})),n.d(t,"KubernetesStorageClass",(function(){return s}));var a=Object.freeze([{Name:"RWO",Description:"Allow read-write from a single pod only (RWO)",selected:!0},{Name:"RWX",Description:" (RWX)",selected:!1}]);function r(){return JSON.parse(JSON.stringify(a))}var i=Object.freeze({Name:"",AccessModes:[],Provisioner:"",AllowVolumeExpansion:!1}),s=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,JSON.parse(JSON.stringify(i)))}},,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"ContainerCapabilities",(function(){return r})),n.d(t,"ContainerCapability",(function(){return i}));var a={SETPCAP:"Modify process capabilities.",MKNOD:"Create special files using mknod(2).",AUDIT_WRITE:"Write records to kernel auditing log.",CHOWN:"Make arbitrary changes to file UIDs and GIDs (see chown(2)).",NET_RAW:"Use RAW and PACKET sockets.",DAC_OVERRIDE:"Bypass file read, write, and execute permission checks.",FOWNER:"Bypass permission checks on operations that normally require the file system UID of the process to match the UID of the file.",FSETID:"Dont clear set-user-ID and set-group-ID permission bits when a file is modified.",KILL:"Bypass permission checks for sending signals.",SETGID:"Make arbitrary manipulations of process GIDs and supplementary GID list.",SETUID:"Make arbitrary manipulations of process UIDs.",NET_BIND_SERVICE:"Bind a socket to internet domain privileged ports (port numbers less than 1024).",SYS_CHROOT:"Use chroot(2), change root directory.",SETFCAP:"Set file capabilities.",SYS_MODULE:"Load and unload kernel modules.",SYS_RAWIO:"Perform I/O port operations (iopl(2) and ioperm(2)).",SYS_PACCT:"Use acct(2), switch process accounting on or off.",SYS_ADMIN:"Use acct(2), switch process accounting on or off.",SYS_NICE:"Raise process nice value (nice(2), setpriority(2)) and change the nice value for arbitrary processes.",SYS_RESOURCE:"Override resource Limits.",SYS_TIME:"Set system clock (settimeofday(2), stime(2), adjtimex(2)); set real-time (hardware) clock.",SYS_TTY_CONFIG:"Use vhangup(2); employ various privileged ioctl(2) operations on virtual terminals.",AUDIT_CONTROL:"Enable and disable kernel auditing; change auditing filter rules; retrieve auditing status and filtering rules.",MAC_ADMIN:"Allow MAC configuration or state changes. Implemented for the Smack LSM.",MAC_OVERRIDE:"Override Mandatory Access Control (MAC). Implemented for the Smack Linux Security Module (LSM).",NET_ADMIN:"Perform various network-related operations.",SYSLOG:"Perform privileged syslog(2) operations.",DAC_READ_SEARCH:"Bypass file read permission checks and directory read and execute permission checks.",LINUX_IMMUTABLE:"Set the FS_APPEND_FL and FS_IMMUTABLE_FL i-node flags.",NET_BROADCAST:"Make socket broadcasts, and listen to multicasts.",IPC_LOCK:"Lock memory (mlock(2), mlockall(2), mmap(2), shmctl(2)).",IPC_OWNER:"Bypass permission checks for operations on System V IPC objects.",SYS_PTRACE:"Trace arbitrary processes using ptrace(2).",SYS_BOOT:"Use reboot(2) and kexec_load(2), reboot and load a new kernel for later execution.",LEASE:"Establish leases on arbitrary files (see fcntl(2)).",WAKE_ALARM:"Trigger something that will wake up the system.",BLOCK_SUSPEND:"Employ features that can block system suspend."};function r(){return[new i("SETPCAP",!0),new i("MKNOD",!0),new i("AUDIT_WRITE",!0),new i("CHOWN",!0),new i("NET_RAW",!0),new i("DAC_OVERRIDE",!0),new i("FOWNER",!0),new i("FSETID",!0),new i("KILL",!0),new i("SETGID",!0),new i("SETUID",!0),new i("NET_BIND_SERVICE",!0),new i("SYS_CHROOT",!0),new i("SETFCAP",!0),new i("SYS_MODULE",!1),new i("SYS_RAWIO",!1),new i("SYS_PACCT",!1),new i("SYS_ADMIN",!1),new i("SYS_NICE",!1),new i("SYS_RESOURCE",!1),new i("SYS_TIME",!1),new i("SYS_TTY_CONFIG",!1),new i("AUDIT_CONTROL",!1),new i("MAC_ADMIN",!1),new i("MAC_OVERRIDE",!1),new i("NET_ADMIN",!1),new i("SYSLOG",!1),new i("DAC_READ_SEARCH",!1),new i("LINUX_IMMUTABLE",!1),new i("NET_BROADCAST",!1),new i("IPC_LOCK",!1),new i("IPC_OWNER",!1),new i("SYS_PTRACE",!1),new i("SYS_BOOT",!1),new i("LEASE",!1),new i("WAKE_ALARM",!1),new i("BLOCK_SUSPEND",!1)].sort((function(e,t){return e.capability<t.capability?-1:1}))}function i(e,t){this.capability=e,this.allowed=t,this.description=a[e]}},,function(e,t,n){"use strict";n.r(t);var a=n(26);function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"secretToConfiguration",value:function(e){var t=new a.KubernetesConfiguration;return t.Type=a.KubernetesConfigurationTypes.SECRET,t.Id=e.Id,t.Name=e.Name,t.Namespace=e.Namespace,t.CreationDate=e.CreationDate,t.Yaml=e.Yaml,t.Data=e.Data,t.ConfigurationOwner=e.ConfigurationOwner,t}},{key:"configMapToConfiguration",value:function(e){var t=new a.KubernetesConfiguration;return t.Type=a.KubernetesConfigurationTypes.CONFIGMAP,t.Id=e.Id,t.Name=e.Name,t.Namespace=e.Namespace,t.CreationDate=e.CreationDate,t.Yaml=e.Yaml,t.Data=e.Data,t.ConfigurationOwner=e.ConfigurationOwner,t}}],(n=null)&&r(t.prototype,n),i&&r(t,i),e}();t.default=i},function(e,t,n){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];this.AdministratorsOnly=e,this.Public=t,this.Users=n,this.Teams=a,this.SubResourceIDs=r}n.r(t),n.d(t,"ResourceControlOwnershipParameters",(function(){return a}))},,,,,,,,,,,,function(e,t,n){"use strict";function a(e){var t={};return t.file=e,t}n.r(t),n.d(t,"browseGetResponse",(function(){return a}))},function(e,t,n){"use strict";function a(e){this.Name="DockerHub",this.URL="",this.Authentication=e.Authentication,this.Username=e.Username,this.Password=e.Password}n.r(t),n.d(t,"DockerHubViewModel",(function(){return a}))},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesNamespace",(function(){return r}));var a=Object.freeze({Id:"",Name:"",CreationDate:"",Status:"",Yaml:"",ResourcePoolName:"",ResourcePoolOwner:""}),r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,JSON.parse(JSON.stringify(a)))}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));var a=n(19);function r(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function o(e){r(s,a,i,o,l,"next",e)}function l(e){r(s,a,i,o,l,"throw",e)}o(void 0)}))}}function s(e){return o.apply(this,arguments)}function o(){return(o=i(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={fulfilled:[],rejected:[]},e.next=3,Promise.allSettled(t);case 3:return r=e.sent,n.fulfilled=Object(a.a)(r,(function(e,t){return"fulfilled"===t.status&&e.push(t.value),e}),[]),n.rejected=Object(a.a)(r,(function(e,t){return"rejected"===t.status&&e.push(t.reason),e}),[]),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return d}));var a=n(306),r=n.n(a),i=n(561),s=n.n(i),o=n(307),l=n.n(o);function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"idsToTagNames",value:function(e,t){var n=l()(e,(function(e){return s()(t,e.Id)}));return r()(n,"Name")}}],(n=null)&&c(t.prototype,n),a&&c(t,a),e}()},function(e,t,n){"use strict";function a(){this.TLS=!1,this.TLSMode="tls_client_ca",this.TLSCACert=null,this.TLSCert=null,this.TLSKey=null}n.r(t),n.d(t,"EndpointSecurityFormData",(function(){return a}))},,function(e,t,n){"use strict";n.r(t),n.d(t,"VolumeViewModel",(function(){return r}));var a=n(58);function r(e){this.Id=e.Name,this.CreatedAt=e.CreatedAt,this.Driver=e.Driver,this.Options=e.Options,this.Labels=e.Labels,this.Labels&&this.Labels["com.docker.compose.project"]?this.StackName=this.Labels["com.docker.compose.project"]:this.Labels&&this.Labels["com.docker.stack.namespace"]&&(this.StackName=this.Labels["com.docker.stack.namespace"]),this.Mountpoint=e.Mountpoint,e.Portainer&&(e.Portainer.ResourceControl&&(this.ResourceControl=new a.ResourceControlViewModel(e.Portainer.ResourceControl)),e.Portainer.Agent&&e.Portainer.Agent.NodeName&&(this.NodeName=e.Portainer.Agent.NodeName))}},function(e,t,n){"use strict";function a(e){this.Name=e.Name,this.Recurring=e.Recurring,this.CronExpression=e.CronExpression,this.Endpoints=e.Endpoints,this.FileContent=e.FileContent,this.File=e.File}function r(e){this.id=e.Id,this.Name=e.Name,this.Recurring=e.Recurring,this.CronExpression=e.CronExpression,this.Endpoints=e.Endpoints,this.FileContent=e.FileContent}n.r(t),n.d(t,"ScheduleCreateRequest",(function(){return a})),n.d(t,"ScheduleUpdateRequest",(function(){return r}))},function(e,t,n){"use strict";n.r(t);var a=n(235),r=n(429),i=n(71);function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"apiToNamespace",value:function(e,t){var n=new a.KubernetesNamespace;return n.Id=e.metadata.uid,n.Name=e.metadata.name,n.CreationDate=e.metadata.creationTimestamp,n.Status=e.status.phase,n.Yaml=t?t.data:"",n.ResourcePoolName=e.metadata.labels?e.metadata.labels[i.KubernetesPortainerResourcePoolNameLabel]:"",n.ResourcePoolOwner=e.metadata.labels?e.metadata.labels[i.KubernetesPortainerResourcePoolOwnerLabel]:"",n}},{key:"createPayload",value:function(e){var t=new r.KubernetesNamespaceCreatePayload;return t.metadata.name=e.Name,t.metadata.labels[i.KubernetesPortainerResourcePoolNameLabel]=e.ResourcePoolName,e.ResourcePoolOwner&&(t.metadata.labels[i.KubernetesPortainerResourcePoolOwnerLabel]=e.ResourcePoolOwner),t}}],(n=null)&&s(t.prototype,n),o&&s(t,o),e}();t.default=o},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t),n.d(t,"KubernetesEndpointAnnotationLeader",(function(){return r})),n.d(t,"KubernetesEndpoint",(function(){return s})),n.d(t,"KubernetesEndpointSubset",(function(){return l}));var r="control-plane.alpha.kubernetes.io/leader",i=Object.freeze({Id:"",Name:"",Namespace:"",HolderIdentity:"",Subsets:[]}),s=function e(){a(this,e),Object.assign(this,JSON.parse(JSON.stringify(i)))},o=Object.freeze({Ips:[],Port:0}),l=function e(){a(this,e),Object.assign(this,JSON.parse(JSON.stringify(o)))}},function(e,t,n){"use strict";n.r(t);var a=n(7),r=n(453),i=n(67),s=n(98);function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,l;return t=e,l=[{key:"parseJSONData",value:function(e){return Object(r.a)(e.Data,(function(t,n){try{e.Data[n]=JSON.parse(t)}catch(a){e.Data[n]=t}})),e}},{key:"modifiyNamespaceAccesses",value:function(e,t,n){return e.Data[i.KubernetesPortainerConfigMapAccessKey][t]={UserAccessPolicies:{},TeamAccessPolicies:{}},Object(a.a)(n,(function(n){n instanceof s.UserAccessViewModel?e.Data[i.KubernetesPortainerConfigMapAccessKey][t].UserAccessPolicies[n.Id]={RoleId:0}:n instanceof s.TeamAccessViewModel&&(e.Data[i.KubernetesPortainerConfigMapAccessKey][t].TeamAccessPolicies[n.Id]={RoleId:0})})),Object(r.a)(e.Data,(function(t,n){e.Data[n]=JSON.stringify(t)})),e}}],(n=null)&&o(t.prototype,n),l&&o(t,l),e}();t.default=l},function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(111),i=n(62),s=n(5),o=n(4),l=n(1),c=n.n(l),d=n(118);function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,l;return t=e,l=[{key:"_isControlledBy",value:function(e){return function(t){return void 0!==Object(o.a)(t.metadata.ownerReferences,{uid:e.metadata.uid})}}},{key:"filterOwnedRevisions",value:function(t,n){var a=Object(s.a)(t,["spec.selector",n.spec.selector]),r=Object(s.a)(a,e._isControlledBy(n));return Object(i.a)(r,["metadata.creationTimestamp","metadata.name"])}},{key:"getCurrentRevision",value:function(e,t){var n=c.a.copy(e),a=Object(o.a)(n,(function(e){return delete e.spec.template.metadata.labels[d.KubernetesSystem_DefaultDeploymentUniqueLabelKey],Object(r.a)(t.spec.template,e.spec.template)}));return a.revision=a.metadata.annotations[d.KubernetesSystem_RevisionAnnotation],a}},{key:"filterVersionedRevisions",value:function(e){var t=Object(s.a)(e,(function(e){return void 0!==e.metadata.annotations[d.KubernetesSystem_RevisionAnnotation]}));return Object(a.a)(t,(function(e){return e.revision=e.metadata.annotations[d.KubernetesSystem_RevisionAnnotation],e}))}}],(n=null)&&u(t.prototype,n),l&&u(t,l),e}();t.default=p},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesIngressCreatePayload",(function(){return r})),n.d(t,"KubernetesIngressRuleCreatePayload",(function(){return i})),n.d(t,"KubernetesIngressRulePathCreatePayload",(function(){return s}));var a=n(37);function r(){return{metadata:new a.KubernetesCommonMetadataPayload,spec:{rules:[]}}}function i(){return{host:"",http:{paths:[]}}}function s(){return{backend:{serviceName:"",servicePort:0},path:""}}},,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"5da83cfb4883a59354abeff852cb7394.png"},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function a(e,t){this.Id=e.id,this.SubscriptionId=t,this.Name=e.name,this.Location=e.location}n.r(t),n.d(t,"ResourceGroupViewModel",(function(){return a}))},function(e,t,n){"use strict";function a(e){this.Id=e.subscriptionId,this.Name=e.displayName}n.r(t),n.d(t,"SubscriptionViewModel",(function(){return a}))},,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"ConfigViewModel",(function(){return r}));var a=n(58);function r(e){this.Id=e.ID,this.CreatedAt=e.CreatedAt,this.UpdatedAt=e.UpdatedAt,this.Version=e.Version.Index,this.Name=e.Spec.Name,this.Labels=e.Spec.Labels,this.Data=function(e){try{return decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}catch(t){return atob(e)}}(e.Spec.Data),e.Portainer&&e.Portainer.ResourceControl&&(this.ResourceControl=new a.ResourceControlViewModel(e.Portainer.ResourceControl))}},function(e,t,n){"use strict";n.r(t),n.d(t,"NetworkViewModel",(function(){return r}));var a=n(58);function r(e){this.Id=e.Id,this.Name=e.Name,this.Scope=e.Scope,this.Driver=e.Driver,this.Attachable=e.Attachable,this.Internal=e.Internal,this.IPAM=e.IPAM,this.Containers=e.Containers,this.Options=e.Options,this.Ingress=e.Ingress,this.Labels=e.Labels,this.Labels&&this.Labels["com.docker.compose.project"]?this.StackName=this.Labels["com.docker.compose.project"]:this.Labels&&this.Labels["com.docker.stack.namespace"]&&(this.StackName=this.Labels["com.docker.stack.namespace"]),e.Portainer&&(e.Portainer.ResourceControl&&(this.ResourceControl=new a.ResourceControlViewModel(e.Portainer.ResourceControl)),e.Portainer.Agent&&e.Portainer.Agent.NodeName&&(this.NodeName=e.Portainer.Agent.NodeName)),this.ConfigFrom=e.ConfigFrom,this.ConfigOnly=e.ConfigOnly}},function(e,t,n){"use strict";function a(e){this.Model=e,this.Id=e.ID,this.Version=e.Version.Index,this.Name=e.Spec.Name,this.Role=e.Spec.Role,this.CreatedAt=e.CreatedAt,this.UpdatedAt=e.UpdatedAt,this.Availability=e.Spec.Availability;var t=e.Spec.Labels;this.Labels=t?Object.keys(t).map((function(e){return{key:e,value:t[e],originalKey:e,originalValue:t[e],added:!0}})):[];var n=e.Description.Engine.Labels;this.EngineLabels=n?Object.keys(n).map((function(e){return{key:e,value:n[e]}})):[],this.Hostname=e.Description.Hostname,this.PlatformArchitecture=e.Description.Platform.Architecture,this.PlatformOS=e.Description.Platform.OS,this.CPUs=e.Description.Resources.NanoCPUs,this.Memory=e.Description.Resources.MemoryBytes,this.EngineVersion=e.Description.Engine.EngineVersion,this.Plugins=e.Description.Engine.Plugins,this.Status=e.Status.State,e.Status.Addr&&(this.Addr=e.Status.Addr),e.ManagerStatus&&(this.Leader=e.ManagerStatus.Leader,this.Reachability=e.ManagerStatus.Reachability,this.ManagerAddr=e.ManagerStatus.Addr)}n.r(t),n.d(t,"NodeViewModel",(function(){return a}))},function(e,t,n){"use strict";n.r(t),n.d(t,"SecretViewModel",(function(){return r}));var a=n(58);function r(e){this.Id=e.ID,this.CreatedAt=e.CreatedAt,this.UpdatedAt=e.UpdatedAt,this.Version=e.Version.Index,this.Name=e.Spec.Name,this.Labels=e.Spec.Labels,e.Portainer&&e.Portainer.ResourceControl&&(this.ResourceControl=new a.ResourceControlViewModel(e.Portainer.ResourceControl))}},function(e,t,n){"use strict";n.r(t),n.d(t,"ServiceViewModel",(function(){return i}));var a=n(58);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){this.Model=e,this.Id=e.ID,this.Tasks=[],this.Name=e.Spec.Name,this.CreatedAt=e.CreatedAt,this.UpdatedAt=e.UpdatedAt,this.Image=e.Spec.TaskTemplate.ContainerSpec.Image,this.Version=e.Version.Index,e.Spec.Mode.Replicated?(this.Mode="replicated",this.Replicas=e.Spec.Mode.Replicated.Replicas):(this.Mode="global",n&&(this.Replicas=n.length)),t&&(this.Running=t.length),e.Spec.TaskTemplate.Resources&&(e.Spec.TaskTemplate.Resources.Limits&&(this.LimitNanoCPUs=e.Spec.TaskTemplate.Resources.Limits.NanoCPUs,this.LimitMemoryBytes=e.Spec.TaskTemplate.Resources.Limits.MemoryBytes),e.Spec.TaskTemplate.Resources.Reservations&&(this.ReservationNanoCPUs=e.Spec.TaskTemplate.Resources.Reservations.NanoCPUs,this.ReservationMemoryBytes=e.Spec.TaskTemplate.Resources.Reservations.MemoryBytes)),e.Spec.TaskTemplate.RestartPolicy?(this.RestartCondition=e.Spec.TaskTemplate.RestartPolicy.Condition||"any",this.RestartDelay=e.Spec.TaskTemplate.RestartPolicy.Delay||5e9,this.RestartMaxAttempts=e.Spec.TaskTemplate.RestartPolicy.MaxAttempts||0,this.RestartWindow=e.Spec.TaskTemplate.RestartPolicy.Window||0):(this.RestartCondition="any",this.RestartDelay=5e9,this.RestartMaxAttempts=0,this.RestartWindow=0),e.Spec.TaskTemplate.LogDriver?(this.LogDriverName=e.Spec.TaskTemplate.LogDriver.Name||"",this.LogDriverOpts=e.Spec.TaskTemplate.LogDriver.Options||[]):(this.LogDriverName="",this.LogDriverOpts=[]),this.Constraints=e.Spec.TaskTemplate.Placement&&e.Spec.TaskTemplate.Placement.Constraints||[],this.Preferences=e.Spec.TaskTemplate.Placement&&e.Spec.TaskTemplate.Placement.Preferences||[],this.Platforms=e.Spec.TaskTemplate.Placement&&e.Spec.TaskTemplate.Placement.Platforms||[],this.Labels=e.Spec.Labels,this.Labels&&this.Labels["com.docker.stack.namespace"]&&(this.StackName=this.Labels["com.docker.stack.namespace"]);var i=e.Spec.TaskTemplate.ContainerSpec;i&&(this.ContainerLabels=i.Labels,this.Command=i.Command,this.Arguments=i.Args,this.Hostname=i.Hostname,this.Env=i.Env,this.Dir=i.Dir,this.User=i.User,this.Groups=i.Groups,this.TTY=i.TTY,this.OpenStdin=i.OpenStdin,this.ReadOnly=i.ReadOnly,this.Mounts=i.Mounts||[],this.StopSignal=i.StopSignal,this.StopGracePeriod=i.StopGracePeriod,this.HealthCheck=i.HealthCheck||{},this.Hosts=i.Hosts,this.DNSConfig=i.DNSConfig,this.Secrets=i.Secrets,this.Configs=i.Configs),e.Endpoint&&(this.Ports=e.Endpoint.Ports),this.LogDriver=e.Spec.TaskTemplate.LogDriver,this.Runtime=e.Spec.TaskTemplate.Runtime,this.VirtualIPs=e.Endpoint?e.Endpoint.VirtualIPs:[],e.Spec.UpdateConfig?(this.UpdateParallelism=void 0!==r(e.Spec.UpdateConfig.Parallelism)?e.Spec.UpdateConfig.Parallelism||0:1,this.UpdateDelay=e.Spec.UpdateConfig.Delay||0,this.UpdateFailureAction=e.Spec.UpdateConfig.FailureAction||"pause",this.UpdateOrder=e.Spec.UpdateConfig.Order||"stop-first"):(this.UpdateParallelism=1,this.UpdateDelay=0,this.UpdateFailureAction="pause",this.UpdateOrder="stop-first"),this.RollbackConfig=e.Spec.RollbackConfig,this.Checked=!1,this.Scale=!1,this.EditName=!1,e.Portainer&&e.Portainer.ResourceControl&&(this.ResourceControl=new a.ResourceControlViewModel(e.Portainer.ResourceControl))}},function(e,t,n){"use strict";function a(e){this.Id=e.ID,this.Created=e.CreatedAt,this.Updated=e.UpdatedAt,this.Slot=e.Slot,this.Spec=e.Spec,this.Status=e.Status,this.DesiredState=e.DesiredState,this.ServiceId=e.ServiceID,this.NodeId=e.NodeID,e.Status&&e.Status.ContainerStatus&&e.Status.ContainerStatus.ContainerID&&(this.ContainerId=e.Status.ContainerStatus.ContainerID)}n.r(t),n.d(t,"TaskViewModel",(function(){return a}))},,,,,function(e,t,n){"use strict";function a(e){this.Id=e.driveid,this.Node=e.node,this.Use=e.use,this.Status=e.drivestatus.toLowerCase(),this.Size=e.size,this.Type=e.type,this.Device=e.device}n.r(t),n.d(t,"StoridgeDriveModel",(function(){return a}))},function(e,t,n){"use strict";function a(e,t){this.Name=e,this.IP=t.ip,this.Role=t.role,this.Status=t.status}function r(e,t){this.Name=e,this.Condition=t.condition,this.Domain=t.domain,this.DomainID=t.domainID,this.FreeBandwidth=t.freeBandwidth,this.FreeCapacity=t.freeCapacity,this.FreeIOPS=t.freeIOPS,this.Hdds=t.hdds,this.MetadataVersion=t.metadataVersion,this.Nodes=t.nodes,this.ProvisionedBandwidth=t.provisionedBandwidth,this.ProvisionedCapacity=t.provisionedCapacity,this.ProvisionedIOPS=t.provisionedIOPS,this.Ssds=t.ssds,this.Status=t.status,this.TotalBandwidth=t.totalBandwidth,this.TotalCapacity=t.totalCapacity,this.TotalIOPS=t.totalIOPS,this.UsedBandwidth=t.usedBandwidth,this.UsedCapacity=t.usedCapacity,this.UsedIOPS=t.usedIOPS,this.Vdisks=t.vdisks}n.r(t),n.d(t,"StoridgeNodeModel",(function(){return a})),n.d(t,"StoridgeNodeDetailedModel",(function(){return r}))},function(e,t,n){"use strict";function a(e){this.Id=e.identifier,this.Date=e.date,this.Description=e.description,this.SourceID=e.sourceid,this.Type=e.type,this.Directory=e.directory,this.Source=e.source}n.r(t),n.d(t,"StoridgeSnapshotModel",(function(){return a}))},function(e,t,n){"use strict";function a(e){this.Allocated=e.allocated,this.Capacity=e.capacity,this.Directory=e.directory,this.IOPSMax=e.maximumIOPS,this.IOPSMin=e.minimumIOPS,this.BandwidthMin=e.minimumBandwidth,this.BandwidthMax=e.maximumBandwidth,this.LocalDriveOnly=e.localDriveOnly,this.Name=e.name,this.Node=e.node,this.NodeID=e.nodeid,this.Provisioning=e.provisioning,this.Redundancy=e.redundancy,this.Uuid=e.uuid,this.Vdisk=e.vdisk,this.Labels=e.labels,this.IP=e.ipaddr,this.DriveType=e.driveType,this.Encryption=e.encryption,this.SnapshotEnabled=e.snapshot,this.SnapshotInterval=e.snapInterval,this.SnapshotMax=e.maximumSnapshots,this.Filesystem=e.filesystem}function r(e){this.name=e.Name,this.opts={node:e.Node,nodeid:e.NodeID,capacity:e.Capacity,iopsmin:e.IOPSMin,iopsmax:e.IOPSMax,bandwidthmin:e.BandwidthMin,bandwidthmax:e.BandwidthMax},this.labels=e.Labels}n.r(t),n.d(t,"StoridgeVolumeModel",(function(){return a})),n.d(t,"StoridgeVolumeUpdateModel",(function(){return r}))},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t),n.d(t,"KubernetesPortMappingPort",(function(){return i})),n.d(t,"KubernetesPortMapping",(function(){return o}));var r=Object.freeze({Port:0,TargetPort:0,Protocol:"",IngressRules:[]}),i=function e(){a(this,e),Object.assign(this,JSON.parse(JSON.stringify(r)))},s=Object.freeze({Expanded:!1,Highlighted:!1,ResourcePool:"",ServiceType:"",ApplicationOwner:"",LoadBalancerIPAddress:"",Ports:[]}),o=function e(){a(this,e),Object.assign(this,JSON.parse(JSON.stringify(s)))}},,function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesConfigMapCreatePayload",(function(){return s})),n.d(t,"KubernetesConfigMapUpdatePayload",(function(){return l}));var a=n(37);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=Object.freeze({metadata:new a.KubernetesCommonMetadataPayload,data:{}}),s=function e(){r(this,e),Object.assign(this,JSON.parse(JSON.stringify(i)))},o=Object.freeze({metadata:new a.KubernetesCommonMetadataPayload,data:{}}),l=function e(){r(this,e),Object.assign(this,JSON.parse(JSON.stringify(o)))}},function(e,t,n){"use strict";n.r(t);var a=n(71);function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"apiToResourcePool",value:function(e){var t=new a.KubernetesResourcePool;return t.Namespace=e,t.Yaml=e.Yaml,t}}],(n=null)&&r(t.prototype,n),i&&r(t,i),e}();t.default=i},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesResourceQuotaCreatePayload",(function(){return s})),n.d(t,"KubernetesResourceQuotaUpdatePayload",(function(){return l}));var a=n(37);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=Object.freeze({metadata:new a.KubernetesCommonMetadataPayload,spec:{hard:{"requests.cpu":0,"requests.memory":0,"limits.cpu":0,"limits.memory":0}}}),s=function e(){r(this,e),Object.assign(this,JSON.parse(JSON.stringify(i)))},o=Object.freeze({metadata:new a.KubernetesCommonMetadataPayload,spec:{hard:{"requests.cpu":0,"requests.memory":0,"limits.cpu":0,"limits.memory":0}}}),l=function e(){r(this,e),Object.assign(this,JSON.parse(JSON.stringify(o)))}},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesSecretCreatePayload",(function(){return s})),n.d(t,"KubernetesSecretUpdatePayload",(function(){return l}));var a=n(37);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=Object.freeze({metadata:new a.KubernetesCommonMetadataPayload,type:"Opaque",data:{}}),s=function e(){r(this,e),Object.assign(this,JSON.parse(JSON.stringify(i)))},o=Object.freeze({metadata:new a.KubernetesCommonMetadataPayload,type:"Opaque",data:{}}),l=function e(){r(this,e),Object.assign(this,JSON.parse(JSON.stringify(o)))}},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesApplicationSecret",(function(){return r}));var a=Object.freeze({Id:0,Name:"",Namespace:"",CreationDate:"",ConfigurationOwner:"",Yaml:"",Data:{}}),r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,JSON.parse(JSON.stringify(a)))}},function(e,t,n){"use strict";n.r(t);var a=n(211),r=n(430),i=n(46);function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"apiToStorageClass",value:function(e){var t=new a.KubernetesStorageClass;return t.Name=e.metadata.name,t.Provisioner=e.provisioner,t.AllowVolumeExpansion=e.allowVolumeExpansion,t}},{key:"createPayload",value:function(e){var t=new r.KubernetesStorageClassCreatePayload;return t.metadata.name=e.Name,t.provisioner=e.Provisioner,t.allowVolumeExpansion=e.AllowVolumeExpansion,t}},{key:"patchPayload",value:function(t,n){var a=e.createPayload(t),r=e.createPayload(n);return i.a(a,r)}}],(n=null)&&s(t.prototype,n),o&&s(t,o),e}();t.default=o},function(e,t,n){"use strict";n.r(t);var a=n(209);function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"pvcToVolume",value:function(e,t){var n=new a.KubernetesVolume;return n.PersistentVolumeClaim=e,n.ResourcePool=t,n}}],(n=null)&&r(t.prototype,n),i&&r(t,i),e}();t.default=i},function(e,t,n){"use strict";n.r(t);var a=n(140),r=n(62),i=n(5),s=n(4);function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,l;return t=e,l=[{key:"_isControlledBy",value:function(e){return function(t){return void 0!==Object(s.a)(t.metadata.ownerReferences,{uid:e.metadata.uid})}}},{key:"filterOwnedRevisions",value:function(t,n){var a=Object(i.a)(t,["metadata.labels",n.spec.selector.matchLabels]),s=Object(i.a)(a,e._isControlledBy(n));return Object(r.a)(s,["revision","metadata.creationTimestamp"])}},{key:"getCurrentRevision",value:function(e){return Object(a.a)(e)}}],(n=null)&&o(t.prototype,n),l&&o(t,l),e}();t.default=l},function(e,t,n){"use strict";n.r(t);var a=n(140),r=n(62),i=n(5),s=n(4);function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,l;return t=e,l=[{key:"_isControlledBy",value:function(e){return function(t){return void 0!==Object(s.a)(t.metadata.ownerReferences,{uid:e.metadata.uid})}}},{key:"filterOwnedRevisions",value:function(t,n){var a=Object(i.a)(t,["metadata.labels",n.spec.selector.matchLabels]),s=Object(i.a)(a,e._isControlledBy(n));return Object(r.a)(s,["revision","metadata.creationTimestamp"])}},{key:"getCurrentRevision",value:function(e){return Object(a.a)(e)}}],(n=null)&&o(t.prototype,n),l&&o(t,l),e}();t.default=l},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesHorizontalPodAutoScaler",(function(){return r}));var a=Object.freeze({Id:"",Namespace:"",Name:"",MinReplicas:1,MaxReplicas:1,TargetCPUUtilization:0,TargetEntity:{ApiVersion:"",Kind:"",Name:""},Yaml:""}),r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,JSON.parse(JSON.stringify(a)))}},,function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesDeployManifestTypes",(function(){return a}));var a=Object.freeze({KUBERNETES:1,COMPOSE:2})},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t),n.d(t,"KubernetesNodeCreatePayload",(function(){return i})),n.d(t,"KubernetesNodeTaintPayload",(function(){return o}));var r=Object.freeze({metadata:{name:"",labels:{}},spec:{taints:void 0}}),i=function e(){a(this,e),Object.assign(this,JSON.parse(JSON.stringify(r)))},s=Object.freeze({key:"",value:"",effect:""}),o=function e(){a(this,e),Object.assign(this,JSON.parse(JSON.stringify(s)))}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return u}));var a=n(339),r=n(23),i=n(4),s=n(5),o=n(2),l=n(31);function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function d(e,t){var n=Object(i.a)(e,{name:t});if(!n)return"Terminated";var a=n.state;return a.waiting?"Waiting":a.running?"Running":"Terminated"}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"apiToModel",value:function(e){var t,n,i,c,u=new l.KubernetesPod;return u.Id=e.metadata.uid,u.Name=e.metadata.name,u.Namespace=e.metadata.namespace,u.Images=Object(o.a)(e.spec.containers,"image"),u.Status=(t=e.status.containerStatuses,n=Object(o.a)(t,"state"),i=Object(s.a)(n,(function(e){return e.running})).length,Object(s.a)(n,(function(e){return e.waiting})).length?"Waiting":i?"Running":"Terminated"),u.Restarts=Object(a.a)(e.status.containerStatuses,"restartCount"),u.Node=e.spec.nodeName,u.CreationDate=e.status.startTime,u.Containers=function(e){var t=e.spec.containers,n=e.spec.initContainers;return Object(r.a)(Object(o.a)(t,(function(t){var n=new l.KubernetesPodContainer;return n.Type=l.KubernetesPodContainerTypes.APP,n.PodName=e.metadata.name,n.Name=t.name,n.Image=t.image,n.Node=e.spec.nodeName,n.CreationDate=e.status.startTime,n.Status=d(e.status.containerStatuses,t.name),n.Limits=t.resources.limits,n.Requests=t.resources.requests,n.VolumeMounts=t.volumeMounts,n.Env=t.env,n})),Object(o.a)(n,(function(t){var n=new l.KubernetesPodContainer;return n.Type=l.KubernetesPodContainerTypes.INIT,n.PodName=e.metadata.name,n.Name=t.name,n.Image=t.image,n.Node=e.spec.nodeName,n.CreationDate=e.status.startTime,n.Status=d(e.status.containerStatuses,t.name),n.Limits=t.resources.limits,n.Requests=t.resources.requests,n.VolumeMounts=t.volumeMounts,n.Env=t.env,n})))}(e),u.Labels=e.metadata.labels,u.Affinity=function(e){var t=new l.KubernetesPodAffinity;return e&&(t.nodeAffinity=e.nodeAffinity||{}),t}(e.spec.affinity),u.NodeSelector=e.spec.nodeSelector,u.Tolerations=(c=e.spec.tolerations,Object(o.a)(c,(function(e){var t=new l.KubernetesPodToleration;return t.Key=e.key,t.Operator=e.operator,t.Value=e.value,t.TolerationSeconds=e.tolerationSeconds,t.Effect=e.effect,t}))),u}}],(n=null)&&c(t.prototype,n),i&&c(t,i),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"PortainerEndpointInitFormValues",(function(){return i})),n.d(t,"PortainerEndpointInitFormValueEndpointSections",(function(){return o}));var a=n(14);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function e(){r(this,e),this.ConnectionType=a.PortainerEndpointConnectionTypes.KUBERNETES_LOCAL,this.Name="",this.URL="",this.TLS=!1,this.TLSSkipVerify=!1,this.TLSSKipClientVerify=!1,this.TLSCACert=null,this.TLSCert=null,this.TLSKey=null,this.AzureApplicationId="",this.AzureTenantId="",this.AzureAuthenticationKey=""},s=function e(t,n,a,i){r(this,e),this.Id=t,this.Value=t,this.Title=n,this.Classes=a,this.Description=i},o=Object.freeze([new s(a.PortainerEndpointConnectionTypes.DOCKER_LOCAL,"Docker","fab fa-docker","Docker"),new s(a.PortainerEndpointConnectionTypes.KUBERNETES_LOCAL,"Kubernetes","fas fa-dharmachakra","Kubernetest"),new s(a.PortainerEndpointConnectionTypes.AGENT,"Agent","fa fa-bolt","Portainer")])},function(e,t,n){"use strict";function a(e){this.LogoURL=e.LogoURL,this.BlackListedLabels=e.BlackListedLabels,this.AuthenticationMethod=e.AuthenticationMethod,this.LDAPSettings=e.LDAPSettings,this.OAuthSettings=new l(e.OAuthSettings),this.AllowBindMountsForRegularUsers=e.AllowBindMountsForRegularUsers,this.AllowPrivilegedModeForRegularUsers=e.AllowPrivilegedModeForRegularUsers,this.AllowVolumeBrowserForRegularUsers=e.AllowVolumeBrowserForRegularUsers,this.AllowHostNamespaceForRegularUsers=e.AllowHostNamespaceForRegularUsers,this.AllowDeviceMappingForRegularUsers=e.AllowDeviceMappingForRegularUsers,this.AllowStackManagementForRegularUsers=e.AllowStackManagementForRegularUsers,this.AllowContainerCapabilitiesForRegularUsers=e.AllowContainerCapabilitiesForRegularUsers,this.SnapshotInterval=e.SnapshotInterval,this.TemplatesURL=e.TemplatesURL,this.EnableHostManagementFeatures=e.EnableHostManagementFeatures,this.EdgeAgentCheckinInterval=e.EdgeAgentCheckinInterval,this.EnableEdgeComputeFeatures=e.EnableEdgeComputeFeatures,this.UserSessionTimeout=e.UserSessionTimeout,this.EnableTelemetry=e.EnableTelemetry}function r(e){this.AllowBindMountsForRegularUsers=e.AllowBindMountsForRegularUsers,this.AllowPrivilegedModeForRegularUsers=e.AllowPrivilegedModeForRegularUsers,this.AllowVolumeBrowserForRegularUsers=e.AllowVolumeBrowserForRegularUsers,this.AllowDeviceMappingForRegularUsers=e.AllowDeviceMappingForRegularUsers,this.AllowStackManagementForRegularUsers=e.AllowStackManagementForRegularUsers,this.AllowContainerCapabilitiesForRegularUsers=e.AllowContainerCapabilitiesForRegularUsers,this.AllowHostNamespaceForRegularUsers=e.AllowHostNamespaceForRegularUsers,this.AuthenticationMethod=e.AuthenticationMethod,this.EnableHostManagementFeatures=e.EnableHostManagementFeatures,this.EnableEdgeComputeFeatures=e.EnableEdgeComputeFeatures,this.LogoURL=e.LogoURL,this.OAuthLoginURI=e.OAuthLoginURI,this.EnableTelemetry=e.EnableTelemetry}function i(e){this.ReaderDN=e.ReaderDN,this.Password=e.Password,this.URL=e.URL,this.SearchSettings=e.SearchSettings,this.GroupSearchSettings=e.GroupSearchSettings,this.AutoCreateUsers=e.AutoCreateUsers}function s(e,t,n){this.BaseDN=e,this.UsernameAttribute=t,this.Filter=n}function o(e,t,n){this.GroupBaseDN=e,this.GroupAttribute=t,this.GroupFilter=n}function l(e){this.ClientID=e.ClientID,this.ClientSecret=e.ClientSecret,this.AccessTokenURI=e.AccessTokenURI,this.AuthorizationURI=e.AuthorizationURI,this.ResourceURI=e.ResourceURI,this.RedirectURI=e.RedirectURI,this.UserIdentifier=e.UserIdentifier,this.Scopes=e.Scopes,this.OAuthAutoCreateUsers=e.OAuthAutoCreateUsers,this.DefaultTeamID=e.DefaultTeamID}n.r(t),n.d(t,"SettingsViewModel",(function(){return a})),n.d(t,"PublicSettingsViewModel",(function(){return r})),n.d(t,"LDAPSettingsViewModel",(function(){return i})),n.d(t,"LDAPSearchSettings",(function(){return s})),n.d(t,"LDAPGroupSearchSettings",(function(){return o})),n.d(t,"OAuthSettingsViewModel",(function(){return l}))},function(e,t,n){"use strict";function a(e){this.Authentication=e.Authentication,this.Snapshot=e.Snapshot,this.Version=e.Version}function r(e){this.UpdateAvailable=e.UpdateAvailable,this.LatestVersion=e.LatestVersion}n.r(t),n.d(t,"StatusViewModel",(function(){return a})),n.d(t,"StatusVersionViewModel",(function(){return r}))},function(e,t,n){"use strict";function a(e){this.Id=e.ID,this.Name=e.Name}n.r(t),n.d(t,"TagViewModel",(function(){return a}))},function(e,t,n){"use strict";function a(e){this.Id=e.Id,this.Name=e.Name,this.Checked=!1}n.r(t),n.d(t,"TeamViewModel",(function(){return a}))},function(e,t,n){"use strict";function a(e){this.Id=e.Id,this.Username=e.Username,this.Role=e.Role,1===e.Role?this.RoleName="administrator":this.RoleName="user",this.AuthenticationMethod=e.AuthenticationMethod,this.Checked=!1}n.r(t),n.d(t,"UserViewModel",(function(){return a}))},function(e,t,n){"use strict";function a(e,t){var n={};try{n.data=angular.fromJson(e),n.next=t("X-Next-Page")}catch(t){n=e}return n}n.r(t),n.d(t,"default",(function(){return a}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesApplicationDeploymentTypes",(function(){return a})),n.d(t,"KubernetesApplicationDataAccessPolicies",(function(){return r})),n.d(t,"KubernetesApplicationTypes",(function(){return i})),n.d(t,"KubernetesApplicationTypeStrings",(function(){return s})),n.d(t,"KubernetesApplicationPublishingTypes",(function(){return o})),n.d(t,"KubernetesApplicationPlacementTypes",(function(){return l})),n.d(t,"KubernetesApplicationQuotaDefaults",(function(){return c})),n.d(t,"KubernetesPortainerApplicationStackNameLabel",(function(){return d})),n.d(t,"KubernetesPortainerApplicationNameLabel",(function(){return u})),n.d(t,"KubernetesPortainerApplicationOwnerLabel",(function(){return p})),n.d(t,"KubernetesPortainerApplicationNote",(function(){return m}));var a=Object.freeze({REPLICATED:1,GLOBAL:2}),r=Object.freeze({SHARED:1,ISOLATED:2}),i=Object.freeze({DEPLOYMENT:1,DAEMONSET:2,STATEFULSET:3,POD:4}),s=Object.freeze({DEPLOYMENT:"Deployment",DAEMONSET:"DaemonSet",STATEFULSET:"StatefulSet",POD:"Pod"}),o=Object.freeze({INTERNAL:1,CLUSTER:2,LOAD_BALANCER:3,INGRESS:4}),l=Object.freeze({PREFERRED:1,MANDATORY:2}),c={CpuLimit:.1,MemoryLimit:64},d="io.portainer.kubernetes.application.stack",u="io.portainer.kubernetes.application.name",p="io.portainer.kubernetes.application.owner",m="io.portainer.kubernetes.application.note"},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesPodNodeAffinityNodeSelectorRequirementOperators",(function(){return a})),n.d(t,"KubernetesPodAffinity",(function(){return r}));var a=Object.freeze({IN:"In",NOT_IN:"NotIn",EXISTS:"Exists",DOES_NOT_EXIST:"DoesNotExist",GREATER_THAN:"Gt",LOWER_THAN:"Lt"});function r(){return{nodeAffinity:{}}}},,,,,,,,,function(e,t,n){"use strict";function a(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.r(t),n.d(t,"FileUploaderController",(function(){return i}));var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,{$async:t}),this.state={uploadInProgress:!1},this.onFileSelected=this.onFileSelected.bind(this),this.onFileSelectedAsync=this.onFileSelectedAsync.bind(this)}var t,n,i,s,o;return e.$inject=["$async"],t=e,(n=[{key:"onFileSelected",value:function(e){return this.$async(this.onFileSelectedAsync,e)}},{key:"onFileSelectedAsync",value:(s=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return this.state.uploadInProgress=!0,e.prev=3,e.next=6,this.uploadFile(t);case 6:return e.prev=6,this.state.uploadInProgress=!1,e.finish(6);case 9:case"end":return e.stop()}}),e,this,[[3,,6,9]])})),o=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=s.apply(e,t);function o(e){a(i,n,r,o,l,"next",e)}function l(e){a(i,n,r,o,l,"throw",e)}o(void 0)}))},function(e){return o.apply(this,arguments)})}])&&r(t.prototype,n),i&&r(t,i),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"HostBrowserController",(function(){return c}));var a=n(280),r=n(95),i=n(36);function s(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){s(i,a,r,o,l,"next",e)}function l(e){s(i,a,r,o,l,"throw",e)}o(void 0)}))}}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var c=function(){function e(t,n,a,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,{$async:t,HostBrowserService:n,Notifications:a,FileSaver:r,ModalService:i}),this.state={path:"/host"},this.goToParent=this.goToParent.bind(this),this.browse=this.browse.bind(this),this.confirmDeleteFile=this.confirmDeleteFile.bind(this),this.isRoot=this.isRoot.bind(this),this.getRelativePath=this.getRelativePath.bind(this),this.getFilesForPath=this.getFilesForPath.bind(this),this.getFilesForPathAsync=this.getFilesForPathAsync.bind(this),this.downloadFile=this.downloadFile.bind(this),this.downloadFileAsync=this.downloadFileAsync.bind(this),this.renameFile=this.renameFile.bind(this),this.renameFileAsync=this.renameFileAsync.bind(this),this.deleteFile=this.deleteFile.bind(this),this.deleteFileAsync=this.deleteFileAsync.bind(this),this.onFileSelectedForUpload=this.onFileSelectedForUpload.bind(this),this.onFileSelectedForUploadAsync=this.onFileSelectedForUploadAsync.bind(this)}var t,n,s,c,d,u,p,m;return e.$inject=["$async","HostBrowserService","Notifications","FileSaver","ModalService"],t=e,(n=[{key:"getRelativePath",value:function(e){e=e||this.state.path;var t=new RegExp("^".concat("/host","/?"));return e.replace(t,"/")}},{key:"goToParent",value:function(){this.getFilesForPath(this.parentPath(this.state.path))}},{key:"isRoot",value:function(){return"/host"===this.state.path}},{key:"browse",value:function(e){this.getFilesForPath(this.buildPath(this.state.path,e))}},{key:"getFilesForPath",value:function(e){return this.$async(this.getFilesForPathAsync,e)}},{key:"getFilesForPathAsync",value:(m=o(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.HostBrowserService.ls(t);case 3:n=e.sent,this.state.path=t,this.files=n,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to browse");case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e){return m.apply(this,arguments)})},{key:"renameFile",value:function(e,t){return this.$async(this.renameFileAsync,e,t)}},{key:"renameFileAsync",value:(p=o(regeneratorRuntime.mark((function e(t,n){var a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.buildPath(this.state.path,t),r=this.buildPath(this.state.path,n),e.prev=2,e.next=5,this.HostBrowserService.rename(a,r);case 5:return this.Notifications.success("File successfully renamed",this.getRelativePath(r)),e.next=8,this.HostBrowserService.ls(this.state.path);case 8:i=e.sent,this.files=i,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),this.Notifications.error("",e.t0,"Unable to rename file");case 15:case"end":return e.stop()}}),e,this,[[2,12]])}))),function(e,t){return p.apply(this,arguments)})},{key:"downloadFile",value:function(e){return this.$async(this.downloadFileAsync,e)}},{key:"downloadFileAsync",value:(u=o(regeneratorRuntime.mark((function e(t){var n,a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.buildPath(this.state.path,t),e.prev=1,e.next=4,this.HostBrowserService.get(n);case 4:a=e.sent,r=a.file,i=new Blob([r],{type:"text/plain;charset=utf-8"}),this.FileSaver.saveAs(i,t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),this.Notifications.error("",e.t0,"Unable to download file");case 13:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(e){return u.apply(this,arguments)})},{key:"confirmDeleteFile",value:function(e){var t=this,n=this.buildPath(this.state.path,e);this.ModalService.confirmDeletion(" that you want to delete ".concat(this.getRelativePath(n)," ?"),(function(e){if(e)return t.deleteFile(n)}))}},{key:"deleteFile",value:function(e){this.$async(this.deleteFileAsync,e)}},{key:"deleteFileAsync",value:(d=o(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.HostBrowserService.delete(t);case 3:return this.Notifications.success("File successfully deleted",this.getRelativePath(t)),e.next=6,this.HostBrowserService.ls(this.state.path);case 6:n=e.sent,this.files=n,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to delete file");case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e){return d.apply(this,arguments)})},{key:"$onInit",value:function(){this.getFilesForPath("/host")}},{key:"parentPath",value:function(e){if("/host"===e)return"/host";var t=Object(i.a)(e,"/");return Object(r.a)(Object(a.a)(t,0,t.length-1),"/")}},{key:"buildPath",value:function(e,t){return e.lastIndexOf("/")===e.length-1?e+t:e+"/"+t}},{key:"onFileSelectedForUpload",value:function(e){return this.$async(this.onFileSelectedForUploadAsync,e)}},{key:"onFileSelectedForUploadAsync",value:(c=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.HostBrowserService.upload(this.state.path,t);case 3:this.onFileUploaded(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to upload file");case 9:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(e){return c.apply(this,arguments)})},{key:"onFileUploaded",value:function(){this.refreshList()}},{key:"refreshList",value:function(){this.getFilesForPath(this.state.path)}}])&&l(t.prototype,n),s&&l(t,s),e}()},function(e,t,n){"use strict";function a(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.r(t),n.d(t,"NodeSelectorController",(function(){return i}));var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,{AgentService:t,Notifications:n})}var t,n,i,s,o;return e.$inject=["AgentService","Notifications"],t=e,(n=[{key:"$onInit",value:(s=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.AgentService.agents();case 3:t=e.sent,this.agents=t,this.model||(this.model=t[0].NodeName),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to load agents");case 11:case"end":return e.stop()}}),e,this,[[0,8]])})),o=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=s.apply(e,t);function o(e){a(i,n,r,o,l,"next",e)}function l(e){a(i,n,r,o,l,"throw",e)}o(void 0)}))},function(){return o.apply(this,arguments)})}])&&r(t.prototype,n),i&&r(t,i),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"VolumeBrowserController",(function(){return c}));var a=n(280),r=n(95),i=n(36);function s(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){s(i,a,r,o,l,"next",e)}function l(e){s(i,a,r,o,l,"throw",e)}o(void 0)}))}}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var c=function(){function e(t,n,a,r,i,s,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,{$async:t,HttpRequestHelper:n,VolumeBrowserService:a,FileSaver:r,Blob:i,ModalService:s,Notifications:o}),this.state={path:"/"},this.rename=this.rename.bind(this),this.renameAsync=this.renameAsync.bind(this),this.confirmDelete=this.confirmDelete.bind(this),this.download=this.download.bind(this),this.downloadAsync=this.downloadAsync.bind(this),this.up=this.up.bind(this),this.browse=this.browse.bind(this),this.deleteFile=this.deleteFile.bind(this),this.deleteFileAsync=this.deleteFileAsync.bind(this),this.getFilesForPath=this.getFilesForPath.bind(this),this.getFilesForPathAsync=this.getFilesForPathAsync.bind(this),this.onFileSelectedForUpload=this.onFileSelectedForUpload.bind(this),this.onFileSelectedForUploadAsync=this.onFileSelectedForUploadAsync.bind(this),this.parentPath=this.parentPath.bind(this),this.buildPath=this.buildPath.bind(this),this.$onInit=this.$onInit.bind(this),this.onFileUploaded=this.onFileUploaded.bind(this),this.refreshList=this.refreshList.bind(this)}var t,n,s,c,d,u,p,m,g;return e.$inject=["$async","HttpRequestHelper","VolumeBrowserService","FileSaver","Blob","ModalService","Notifications"],t=e,(n=[{key:"rename",value:function(e,t){return this.$async(this.renameAsync,e,t)}},{key:"renameAsync",value:(g=o(regeneratorRuntime.mark((function e(t,n){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/"===this.state.path?t:"".concat(this.state.path,"/").concat(t),r="/"===this.state.path?n:"".concat(this.state.path,"/").concat(n),e.prev=2,e.next=5,this.VolumeBrowserService.rename(this.volumeId,a,r);case 5:return this.Notifications.success("File successfully renamed",r),e.next=8,this.VolumeBrowserService.ls(this.volumeId,this.state.path);case 8:this.files=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),this.Notifications.error("",e.t0,"Unable to rename file");case 14:case"end":return e.stop()}}),e,this,[[2,11]])}))),function(e,t){return g.apply(this,arguments)})},{key:"confirmDelete",value:function(e){var t=this,n="/"===this.state.path?e:"".concat(this.state.path,"/").concat(e);this.ModalService.confirmDeletion(" that you want to delete ".concat(n," ?"),(function(e){e&&t.deleteFile(n)}))}},{key:"download",value:function(e){return this.$async(this.downloadAsync,e)}},{key:"downloadAsync",value:(m=o(regeneratorRuntime.mark((function e(t){var n,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/"===this.state.path?t:"".concat(this.state.path,"/").concat(t),e.prev=1,e.next=4,this.VolumeBrowserService.get(this.volumeId,n);case 4:a=e.sent,r=new Blob([a.file]),this.FileSaver.saveAs(r,t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),this.Notifications.error("",e.t0,"Unable to download file");case 12:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(e){return m.apply(this,arguments)})},{key:"up",value:function(){var e=this.parentPath(this.state.path);this.getFilesForPath(e)}},{key:"browse",value:function(e){var t=this.buildPath(this.state.path,e);this.getFilesForPath(t)}},{key:"deleteFile",value:function(e){return this.$async(this.deleteFileAsync,e)}},{key:"deleteFileAsync",value:(p=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.VolumeBrowserService.delete(this.volumeId,t);case 3:return this.Notifications.success("File successfully deleted",t),e.next=6,this.VolumeBrowserService.ls(this.volumeId,this.state.path);case 6:this.files=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to delete file");case 12:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(e){return p.apply(this,arguments)})},{key:"getFilesForPath",value:function(e){return this.$async(this.getFilesForPathAsync,e)}},{key:"getFilesForPathAsync",value:(u=o(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.VolumeBrowserService.ls(this.volumeId,t);case 3:n=e.sent,this.state.path=t,this.files=n,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to browse volume");case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e){return u.apply(this,arguments)})},{key:"onFileSelectedForUpload",value:function(e){return this.$async(this.onFileSelectedForUploadAsync,e)}},{key:"onFileSelectedForUploadAsync",value:(d=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.VolumeBrowserService.upload(this.state.path,t,this.volumeId);case 3:this.onFileUploaded(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to upload file");case 9:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(e){return d.apply(this,arguments)})},{key:"parentPath",value:function(e){if(0===e.lastIndexOf("/"))return"/";var t=Object(i.a)(e,"/");return Object(r.a)(Object(a.a)(t,0,t.length-1),"/")}},{key:"buildPath",value:function(e,t){return"/"===e?e+t:"".concat(e,"/").concat(t)}},{key:"onFileUploaded",value:function(){this.refreshList()}},{key:"refreshList",value:function(){this.getFilesForPath(this.state.path)}},{key:"$onInit",value:(c=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.HttpRequestHelper.setPortainerAgentTargetHeader(this.nodeName),e.prev=1,e.next=4,this.VolumeBrowserService.ls(this.volumeId,this.state.path);case 4:this.files=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),this.Notifications.error("",e.t0,"Unable to browse volume");case 10:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(){return c.apply(this,arguments)})}])&&l(t.prototype,n),s&&l(t,s),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"AgentViewModel",(function(){return a}));var a=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.IPAddress=t.IPAddress,this.NodeName=t.NodeName,this.NodeRole=t.NodeRole}},function(e,t,n){"use strict";function a(e){this.Id=e.id,this.SubscriptionId=e.subscriptionId,this.DisplayName=e.displayName,this.Name=e.name}n.r(t),n.d(t,"LocationViewModel",(function(){return a}))},function(e,t,n){"use strict";n.r(t),n.d(t,"ContainerInstanceProviderViewModel",(function(){return r}));var a=n(4);function r(e){this.Id=e.id,this.Namespace=e.namespace;var t=Object(a.a)(e.resourceTypes,{resourceType:"containerGroups"});this.Locations=t.locations}},function(e,t,n){"use strict";function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function i(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.r(t);var o=function(){function e(t,n,a,r,i,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,{$state:t,AzureService:n,ContainerGroupService:a,Notifications:r,ResourceGroupService:i,SubscriptionService:s}),this.state={loading:!1},this.container=null,this.subscription=null,this.resourceGroup=null}var t,n,a,r,o;return e.$inject=["$state","AzureService","ContainerGroupService","Notifications","ResourceGroupService","SubscriptionService"],t=e,(n=[{key:"$onInit",value:(r=regeneratorRuntime.mark((function e(){var t,n,a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.loading=!0,t=this.$state.params.id,n=l(t),a=n.subscriptionId,r=n.resourceGroupId,i=n.containerGroupId,e.prev=3,e.next=6,this.SubscriptionService.subscription(a);case 6:return this.subscription=e.sent,e.next=9,this.ContainerGroupService.containerGroup(a,r,i);case 9:return this.container=e.sent,e.next=12,this.ResourceGroupService.resourceGroup(a,r);case 12:this.resourceGroup=e.sent,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),this.Notifications.error("",e.t0,"Unable to retrive container instance details");case 18:this.state.loading=!1;case 19:case"end":return e.stop()}}),e,this,[[3,15]])})),o=function(){var e=this,t=arguments;return new Promise((function(n,a){var s=r.apply(e,t);function o(e){i(s,n,a,o,l,"next",e)}function l(e){i(s,n,a,o,l,"throw",e)}o(void 0)}))},function(){return o.apply(this,arguments)})}])&&s(t.prototype,n),a&&s(t,a),e}();function l(e){var t=a(e.match(/^\/subscriptions\/(.+)\/resourceGroups\/(.+)\/providers\/(.+)\/containerGroups\/(.+)$/),5);return{subscriptionId:t[1],resourceGroupId:t[2],containerGroupId:t[4]}}t.default=o},function(e,t,n){"use strict";function a(){this.Scope="local",this.SelectedNetworkConfig=null,this.DatatableState={selectedItems:[]},this.ParentNetworkCard=""}n.r(t),n.d(t,"MacvlanFormData",(function(){return a}))},function(e,t,n){"use strict";function a(){this.useCIFS=!1,this.serverAddress="",this.share="",this.version="CIFS v2.0 (Used by Windows Vista / Server 2008)",this.versions=["CIFS v1.0 (Used by Windows XP / Server 2003 and earlier)","CIFS v2.0 (Used by Windows Vista / Server 2008)","CIFS v2.1 (Used by Windows 7 / Server 2008 R2)","CIFS 3.0 (Used by Windows 8 / Server 2012 and newer)"],this.versionsNumber=["1.0","2.0","2.1","3.0"],this.username="",this.password=""}n.r(t),n.d(t,"VolumesCIFSFormData",(function(){return a}))},function(e,t,n){"use strict";function a(){this.useNFS=!1,this.serverAddress="",this.mountPoint="",this.version="NFS4",this.options="rw,noatime,rsize=8192,wsize=8192,tcp,timeo=14",this.versions=["NFS4","NFS"]}n.r(t),n.d(t,"VolumesNFSFormData",(function(){return a}))},function(e,t,n){"use strict";function a(e){this.Time=e.time,e.Type?(this.Type=e.Type,this.Details=function(e){var t=e.Actor.Attributes,n="";switch(e.Type){case"container":switch(e.Action){case"stop":n=" "+t.name+" ";break;case"destroy":n=" "+t.name+" ";break;case"create":n=" "+t.name+" ";break;case"start":n=" "+t.name+" ";break;case"kill":n=" "+t.name+" ";break;case"die":n=" "+t.name+"  "+t.exitCode;break;case"commit":n=" "+t.name+" ";break;case"restart":n=" "+t.name+" ";break;case"pause":n=" "+t.name+" ";break;case"unpause":n=" "+t.name+" ";break;case"attach":n=" "+t.name+" ";break;case"detach":n=" "+t.name+" ";break;case"copy":n=" "+t.name+" ";break;case"export":n=" "+t.name+" ";break;case"health_status":n=" "+t.name+" ";break;case"oom":n=" "+t.name+" ";break;case"rename":n=" "+t.name+" ";break;case"resize":n=" "+t.name+" ";break;case"top":n=" "+t.name;break;case"update":n=" "+t.name+" ";break;default:n=0===e.Action.indexOf("exec_create")?"":0===e.Action.indexOf("exec_start")?"":""}break;case"image":switch(e.Action){case"delete":n="";break;case"import":n=" "+e.Actor.ID+" ";break;case"load":n=" "+e.Actor.ID+" loaded";break;case"tag":n=" "+t.name;break;case"untag":n="";break;case"save":n=" "+e.Actor.ID+" saved";break;case"pull":n=" "+e.Actor.ID+" ";break;case"push":n=" "+e.Actor.ID+" ";break;default:n=""}break;case"network":switch(e.Action){case"create":n=" "+t.name+" ";break;case"destroy":n=" "+t.name+" ";break;case"remove":n=" "+t.name+" ";break;case"connect":n=" "+t.name+" ";break;case"disconnect":n=" "+t.name+" ";break;default:n=""}break;case"volume":switch(e.Action){case"create":n=" "+e.Actor.ID+" ";break;case"destroy":n=" "+e.Actor.ID+" ";break;case"mount":n=" "+e.Actor.ID+" ";break;case"unmount":n=" "+e.Actor.ID+" ";break;default:n=""}break;default:n=""}return n}(e)):(this.Type=e.status,this.Details=e.from)}n.r(t),n.d(t,"EventViewModel",(function(){return a}))},function(e,t,n){"use strict";function a(e){this.Id=e.Id,this.Tag=e.Tag,this.Parent=e.Parent,this.Repository=e.Repository,this.Created=e.Created,this.Checked=!1,this.RepoTags=e.RepoTags,this.VirtualSize=e.VirtualSize,this.DockerVersion=e.DockerVersion,this.Os=e.Os,this.Architecture=e.Architecture,this.Author=e.Author,this.Command=e.Config.Cmd,this.Entrypoint=e.ContainerConfig.Entrypoint?e.ContainerConfig.Entrypoint:"",this.ExposedPorts=e.ContainerConfig.ExposedPorts?Object.keys(e.ContainerConfig.ExposedPorts):[],this.Volumes=e.ContainerConfig.Volumes?Object.keys(e.ContainerConfig.Volumes):[],this.Env=e.ContainerConfig.Env?e.ContainerConfig.Env:[]}n.r(t),n.d(t,"ImageDetailsViewModel",(function(){return a}))},function(e,t,n){"use strict";function a(e,t){this.Order=e,this.Id=t.Id,this.Created=t.Created,this.CreatedBy=t.CreatedBy,this.Size=t.Size,this.Comment=t.Comment,this.Tags=t.Tags}n.r(t),n.d(t,"ImageLayerViewModel",(function(){return a}))},function(e,t,n){"use strict";function a(e){this.Id=e.Id,this.Name=e.Name,this.Enabled=e.Enabled,this.Config=e.Config}n.r(t),n.d(t,"PluginViewModel",(function(){return a}))},function(e,t,n){"use strict";function a(e){this.Id=e.ID}n.r(t),n.d(t,"SwarmViewModel",(function(){return a}))},function(e,t,n){"use strict";function a(e){var t={};return t.file=e,t}n.r(t),n.d(t,"imageGetResponse",(function(){return a}))},function(e,t,n){"use strict";n.r(t),n.d(t,"AssociatedEndpointsDatatableController",(function(){return s}));var a=n(1),r=n.n(a);function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=function(){function e(t,n,a,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.extendGenericController(n,t),this.DatatableService=a,this.PaginationService=r,this.state=Object.assign(this.state,{orderBy:this.orderBy,loading:!0,filteredDataSet:[],totalFilteredDataset:0,pageNumber:1}),this.onPageChange=this.onPageChange.bind(this),this.paginationChanged=this.paginationChanged.bind(this)}var t,n,a;return e.$inject=["$scope","$controller","DatatableService","PaginationService"],t=e,(n=[{key:"extendGenericController",value:function(e,t){var n=this.$onInit.bind(this),a=this.changePaginationLimit.bind(this),i=this.onTextFilterChange.bind(this);r.a.extend(this,e("GenericDatatableController",{$scope:t})),this.$onInit=n,this.changePaginationLimit=a,this.onTextFilterChange=i}},{key:"$onInit",value:function(){this.setDefaults(),this.prepareTableFromDataset();var e=this.DatatableService.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=this.DatatableService.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var n=this.DatatableService.getDataTableFilters(this.tableKey);null!==n&&(this.filters=n),this.filters&&this.filters.state&&(this.filters.state.open=!1),this.paginationChanged()}},{key:"$onChanges",value:function(e){var t=e.updateKey;t.currentValue&&!t.isFirstChange()&&this.paginationChanged()}},{key:"onPageChange",value:function(e){this.state.pageNumber=e,this.paginationChanged()}},{key:"changePaginationLimit",value:function(){this.PaginationService.setPaginationLimit(this.tableKey,this.state.paginatedItemLimit),this.paginationChanged()}},{key:"onTextFilterChange",value:function(){var e=this.state.textFilter;this.DatatableService.setDataTableTextFilters(this.tableKey,e),this.paginationChanged()}},{key:"paginationChanged",value:function(){var e=this;this.state.loading=!0,this.state.filteredDataSet=[];var t=(this.state.pageNumber-1)*this.state.paginatedItemLimit+1;this.retrievePage(t,this.state.paginatedItemLimit,this.state.textFilter).then((function(t){e.state.filteredDataSet=t.endpoints,e.state.totalFilteredDataSet=t.totalCount})).finally((function(){e.state.loading=!1}))}}])&&i(t.prototype,n),a&&i(t,a),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"EdgeJobFormController",(function(){return d}));var a=n(5),r=n(10),i=n(12),s=n.n(i);function o(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state={formValidationError:""},this.scheduleValues=[{displayed:"Every hour",cron:"0 * * * *"},{displayed:"Every 2 hours",cron:"0 */2 * * *"},{displayed:"Every day",cron:"0 0 * * *"}],this.formValues={datetime:s()(),scheduleValue:this.scheduleValues[0],cronMethod:"basic",method:"editor"},this.cronRegex=/(@(annually|yearly|monthly|weekly|daily|hourly|reboot))|(@every (\d+(ns|us|s|ms|s|m|h))+)|((((\d+,)+\d+|(\d+(\/|-)\d+)|\d+|\*) ){4,6}((\d+,)+\d+|(\d+(\/|-)\d+)|\d+|\*))/,this.action=this.action.bind(this),this.editorUpdate=this.editorUpdate.bind(this),this.associateEndpoint=this.associateEndpoint.bind(this),this.dissociateEndpoint=this.dissociateEndpoint.bind(this)}var t,n,i;return t=e,(n=[{key:"onChangeModel",value:function(e){var t=s()().add("hours",1);this.formValues={datetime:e.CronExpression?u(e.CronExpression,t):t,scheduleValue:this.formValues.scheduleValue,cronMethod:e.Recurring?"advanced":"basic",method:this.formValues.method}}},{key:"action",value:function(){var e,t;this.state.formValidationError="","editor"!==this.formValues.method||""!==this.model.FileContent?("basic"===this.formValues.cronMethod?this.model.Recurring?this.model.CronExpression=this.formValues.scheduleValue.cron:this.model.CronExpression=(e=this.formValues.datetime,[(t=s()(e)).minutes(),t.hours(),t.date(),t.month()+1,"*"].join(" ")):this.model.Recurring=!0,this.formAction(this.formValues.method)):this.state.formValidationError="Script file content must not be empty"}},{key:"editorUpdate",value:function(e){this.model.FileContent=e.getValue()}},{key:"associateEndpoint",value:function(e){Object(r.a)(this.model.Endpoints,e.Id)||(this.model.Endpoints=[].concat(o(this.model.Endpoints),[e.Id]))}},{key:"dissociateEndpoint",value:function(e){this.model.Endpoints=Object(a.a)(this.model.Endpoints,(function(t){return t!==e.Id}))}},{key:"$onInit",value:function(){this.onChangeModel(this.model)}}])&&c(t.prototype,n),i&&c(t,i),e}();function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s()(),n=e.split(" ");return n.length>4?(n=n.slice(0,4),s()(e,"m H D M")):t}},function(e,t,n){"use strict";n.r(t),n.d(t,"EdgeJobResultsDatatableController",(function(){return o}));var a=n(215),r=n(1),i=n.n(r);function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$state=a,i.a.extend(this,t("GenericDatatableController",{$scope:n}))}var t,n,r;return e.$inject=["$controller","$scope","$state"],t=e,(n=[{key:"collectLogs",value:function(){this.settings.repeater.autoRefresh=!0,this.settings.repeater.refreshRate="5",this.onSettingsRepeaterChange(),this.onCollectLogsClick.apply(this,arguments)}},{key:"$onChanges",value:function(e){var t=e.dataset;t&&t.currentValue&&this.onDatasetChange(t.currentValue)}},{key:"onDatasetChange",value:function(e){var t=Object(a.a)(e,(function(e){return 2===e.LogsStatus}));this.settings.repeater.autoRefresh=t,this.settings.repeater.refreshRate="5",this.onSettingsRepeaterChange()}}])&&s(t.prototype,n),r&&s(t,r),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"EdgeStackEndpointsDatatableController",(function(){return o}));var a=n(1),r=n.n(a);function i(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(t,n,a,r,i,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.extendGenericController(a,n),this.DatatableService=r,this.PaginationService=i,this.Notifications=s,this.$async=t,this.state=Object.assign(this.state,{orderBy:this.orderBy,loading:!0,filteredDataSet:[],totalFilteredDataset:0,pageNumber:1}),this.onPageChange=this.onPageChange.bind(this),this.paginationChanged=this.paginationChanged.bind(this),this.paginationChangedAsync=this.paginationChangedAsync.bind(this),this.statusMap={1:"OK",2:"Error",3:"Acknowledged"}}var t,n,a,o,l;return e.$inject=["$async","$scope","$controller","DatatableService","PaginationService","Notifications"],t=e,(n=[{key:"extendGenericController",value:function(e,t){var n=this.$onInit.bind(this),a=this.changePaginationLimit.bind(this),i=this.onTextFilterChange.bind(this);r.a.extend(this,e("GenericDatatableController",{$scope:t})),this.$onInit=n,this.changePaginationLimit=a,this.onTextFilterChange=i}},{key:"$onInit",value:function(){this.setDefaults(),this.prepareTableFromDataset();var e=this.DatatableService.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=this.DatatableService.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var n=this.DatatableService.getDataTableFilters(this.tableKey);null!==n&&(this.filters=n),this.filters&&this.filters.state&&(this.filters.state.open=!1),this.paginationChanged()}},{key:"onPageChange",value:function(e){this.state.pageNumber=e,this.paginationChanged()}},{key:"changePaginationLimit",value:function(){this.PaginationService.setPaginationLimit(this.tableKey,this.state.paginatedItemLimit),this.paginationChanged()}},{key:"onTextFilterChange",value:function(){var e=this.state.textFilter;this.DatatableService.setDataTableTextFilters(this.tableKey,e),this.paginationChanged()}},{key:"paginationChanged",value:function(){this.$async(this.paginationChangedAsync)}},{key:"paginationChangedAsync",value:(o=regeneratorRuntime.mark((function e(){var t,n,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.loading=!0,this.state.filteredDataSet=[],t=(this.state.pageNumber-1)*this.state.paginatedItemLimit+1,e.prev=3,e.next=6,this.retrievePage(t,this.state.paginatedItemLimit,this.state.textFilter);case 6:n=e.sent,a=n.endpoints,r=n.totalCount,this.state.filteredDataSet=a,this.state.totalFilteredDataSet=r,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),this.Notifications.error("",e.t0,"Unable to retrieve endpoints");case 16:return e.prev=16,this.state.loading=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[3,13,16,19]])})),l=function(){var e=this,t=arguments;return new Promise((function(n,a){var r=o.apply(e,t);function s(e){i(r,n,a,s,l,"next",e)}function l(e){i(r,n,a,s,l,"throw",e)}s(void 0)}))},function(){return l.apply(this,arguments)})}])&&s(t.prototype,n),a&&s(t,a),e}()},function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.r(t),n.d(t,"EdgeStackStatusController",(function(){return i}));var r={1:"ok",2:"error",3:"acknowledged"},i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"$onChanges",value:function(e){var t=e.stackStatus;if(t&&t.currentValue){var n={ok:0,error:0,acknowledged:0};for(var a in t.currentValue){var i=t.currentValue[a];n[r[i.Type]]++}this.status=n}}}])&&a(t.prototype,n),i&&a(t,i),e}()},function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.r(t),n.d(t,"EditEdgeStackFormController",(function(){return r}));var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.editorUpdate=this.editorUpdate.bind(this)}var t,n,r;return t=e,(n=[{key:"editorUpdate",value:function(e){this.model.StackFileContent=e.getValue()}}])&&a(t.prototype,n),r&&a(t,r),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"EdgeGroupFormController",(function(){return c}));var a=n(5),r=n(10);function i(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function s(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var c=function(){function e(t,n,a){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.EndpointService=t,this.$async=n,this.endpoints={state:{limit:"10",filter:"",pageNumber:1,totalCount:0},value:null},this.associateEndpoint=this.associateEndpoint.bind(this),this.dissociateEndpoint=this.dissociateEndpoint.bind(this),this.getDynamicEndpointsAsync=this.getDynamicEndpointsAsync.bind(this),this.getDynamicEndpoints=this.getDynamicEndpoints.bind(this),a.$watch((function(){return r.model}),(function(){r.model.Dynamic&&r.getDynamicEndpoints()}),!0)}var t,n,o,c,d;return e.$inject=["EndpointService","$async","$scope"],t=e,(n=[{key:"associateEndpoint",value:function(e){Object(r.a)(this.model.Endpoints,e.Id)||(this.model.Endpoints=[].concat(s(this.model.Endpoints),[e.Id]))}},{key:"dissociateEndpoint",value:function(e){this.model.Endpoints=Object(a.a)(this.model.Endpoints,(function(t){return t!==e.Id}))}},{key:"getDynamicEndpoints",value:function(){return this.$async(this.getDynamicEndpointsAsync)}},{key:"getDynamicEndpointsAsync",value:(c=regeneratorRuntime.mark((function e(){var t,n,a,r,i,s,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.endpoints.state,n=t.pageNumber,a=t.limit,r=t.search,i=(n-1)*a+1,s={search:r,type:4,tagIds:this.model.TagIds,tagsPartialMatch:this.model.PartialMatch},e.next=5,this.EndpointService.endpoints(i,a,s);case 5:o=e.sent,l=parseInt(o.totalCount,10),this.endpoints.value=o.value,this.endpoints.state.totalCount=l;case 9:case"end":return e.stop()}}),e,this)})),d=function(){var e=this,t=arguments;return new Promise((function(n,a){var r=c.apply(e,t);function s(e){i(r,n,a,s,o,"next",e)}function o(e){i(r,n,a,s,o,"throw",e)}s(void 0)}))},function(){return d.apply(this,arguments)})}])&&l(t.prototype,n),o&&l(t,o),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"EdgeGroupsDatatableController",(function(){return s}));var a=n(1),r=n.n(a);function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var a=this.allowSelection;r.a.extend(this,n("GenericDatatableController",{$scope:t})),this.allowSelection=a.bind(this)}var t,n,a;return e.$inject=["$scope","$controller"],t=e,(n=[{key:"allowSelection",value:function(e){return!e.HasEdgeStack}}])&&i(t.prototype,n),a&&i(t,a),e}()},function(e,t,n){"use strict";function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function i(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){i(s,a,r,o,l,"next",e)}function l(e){i(s,a,r,o,l,"throw",e)}o(void 0)}))}}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.r(t),n.d(t,"CreateEdgeGroupController",(function(){return l}));var l=function(){function e(t,n,a,r,i,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.EdgeGroupService=t,this.GroupService=n,this.TagService=a,this.Notifications=r,this.$state=i,this.$async=s,this.state={actionInProgress:!1,loaded:!1},this.model={Name:"",Endpoints:[],Dynamic:!1,TagIds:[],PartialMatch:!1},this.createGroup=this.createGroup.bind(this),this.createGroupAsync=this.createGroupAsync.bind(this)}var t,n,r,i,l;return e.$inject=["EdgeGroupService","GroupService","TagService","Notifications","$state","$async"],t=e,(n=[{key:"$onInit",value:(l=s(regeneratorRuntime.mark((function e(){var t,n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.TagService.tags(),this.GroupService.groups()]);case 2:t=e.sent,n=a(t,2),r=n[0],i=n[1],this.tags=r,this.endpointGroups=i,this.state.loaded=!0;case 9:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"createGroup",value:function(){return this.$async(this.createGroupAsync)}},{key:"createGroupAsync",value:(i=s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.actionInProgress=!0,e.prev=1,e.next=4,this.EdgeGroupService.create(this.model);case 4:this.Notifications.success("Edge group successfully created"),this.$state.go("edge.groups"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.Notifications.error("",e.t0,"Unable to create edge group");case 11:return e.prev=11,this.state.actionInProgress=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[1,8,11,14]])}))),function(){return i.apply(this,arguments)})}])&&o(t.prototype,n),r&&o(t,r),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"EdgeGroupsController",(function(){return c}));var a=n(22);function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw s}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function s(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){s(i,a,r,o,l,"next",e)}function l(e){s(i,a,r,o,l,"throw",e)}o(void 0)}))}}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var c=function(){function e(t,n,a,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.$state=n,this.EdgeGroupService=a,this.Notifications=r,this.removeAction=this.removeAction.bind(this),this.removeActionAsync=this.removeActionAsync.bind(this)}var t,n,i,s,c;return e.$inject=["$async","$state","EdgeGroupService","Notifications"],t=e,(n=[{key:"$onInit",value:(c=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.EdgeGroupService.groups();case 3:this.items=e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),this.items=[],this.Notifications.error("",e.t0,"Unable to retrieve Edge groups");case 10:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(){return c.apply(this,arguments)})},{key:"removeAction",value:function(e){return this.$async(this.removeActionAsync,e)}},{key:"removeActionAsync",value:(s=o(regeneratorRuntime.mark((function e(t){var n,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r(t),e.prev=1,n.s();case 3:if((i=n.n()).done){e.next=17;break}return s=i.value,e.prev=5,e.next=8,this.EdgeGroupService.remove(s.Id);case 8:this.Notifications.success("Edge Group successfully",s.Name),Object(a.a)(this.items,s),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),this.Notifications.error("",e.t0," Edge Group");case 15:e.next=3;break;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(1),n.e(e.t1);case 22:return e.prev=22,n.f(),e.finish(22);case 25:this.$state.reload();case 26:case"end":return e.stop()}}),e,this,[[1,19,22,25],[5,12]])}))),function(e){return s.apply(this,arguments)})}])&&l(t.prototype,n),i&&l(t,i),e}()},function(e,t,n){"use strict";function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function i(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){i(s,a,r,o,l,"next",e)}function l(e){i(s,a,r,o,l,"throw",e)}o(void 0)}))}}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.r(t),n.d(t,"EditEdgeGroupController",(function(){return l}));var l=function(){function e(t,n,a,r,i,s,o,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.EdgeGroupService=t,this.GroupService=n,this.TagService=a,this.Notifications=r,this.$state=i,this.$async=s,this.EndpointService=o,this.EndpointHelper=l,this.state={actionInProgress:!1,loaded:!1},this.updateGroup=this.updateGroup.bind(this),this.updateGroupAsync=this.updateGroupAsync.bind(this)}var t,n,r,i,l;return e.$inject=["EdgeGroupService","GroupService","TagService","Notifications","$state","$async","EndpointService","EndpointHelper"],t=e,(n=[{key:"$onInit",value:(l=s(regeneratorRuntime.mark((function e(){var t,n,r,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.TagService.tags(),this.GroupService.groups(),this.EdgeGroupService.group(this.$state.params.groupId)]);case 2:t=e.sent,n=a(t,3),r=n[0],i=n[1],(s=n[2])||(this.Notifications.error("Failed to find edge group",{}),this.$state.go("edge.groups")),this.tags=r,this.endpointGroups=i,this.model=s,this.state.loaded=!0;case 12:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"updateGroup",value:function(){return this.$async(this.updateGroupAsync)}},{key:"updateGroupAsync",value:(i=s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.actionInProgress=!0,e.prev=1,e.next=4,this.EdgeGroupService.update(this.model);case 4:this.Notifications.success("Edge group successfully updated"),this.$state.go("edge.groups"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.Notifications.error("",e.t0,"Unable to update edge group");case 11:return e.prev=11,this.state.actionInProgress=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[1,8,11,14]])}))),function(){return i.apply(this,arguments)})}])&&o(t.prototype,n),r&&o(t,r),e}()},function(e,t,n){"use strict";function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function i(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){i(s,a,r,o,l,"next",e)}function l(e){i(s,a,r,o,l,"throw",e)}o(void 0)}))}}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.r(t),n.d(t,"CreateEdgeJobViewController",(function(){return l}));var l=function(){function e(t,n,a,r,i,s,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state={actionInProgress:!1},this.model={Name:"",Recurring:!1,CronExpression:"",Endpoints:[],FileContent:"",File:null},this.$async=t,this.$q=n,this.$state=a,this.Notifications=s,this.GroupService=i,this.EdgeJobService=r,this.TagService=o,this.create=this.create.bind(this),this.createEdgeJob=this.createEdgeJob.bind(this),this.createAsync=this.createAsync.bind(this)}var t,n,r,i,l;return e.$inject=["$async","$q","$state","EdgeJobService","GroupService","Notifications","TagService"],t=e,(n=[{key:"create",value:function(e){return this.$async(this.createAsync,e)}},{key:"createAsync",value:(l=s(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.actionInProgress=!0,e.prev=1,e.next=4,this.createEdgeJob(t,this.model);case 4:this.Notifications.success("Edge job successfully created"),this.$state.go("edge.jobs",{},{reload:!0}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.Notifications.error("",e.t0,"Unable to create Edge job");case 11:this.state.actionInProgress=!1;case 12:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e){return l.apply(this,arguments)})},{key:"createEdgeJob",value:function(e,t){return"editor"===e?this.EdgeJobService.createEdgeJobFromFileContent(t):this.EdgeJobService.createEdgeJobFromFileUpload(t)}},{key:"$onInit",value:(i=s(regeneratorRuntime.mark((function e(){var t,n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([this.GroupService.groups(),this.TagService.tags()]);case 3:t=e.sent,n=a(t,2),r=n[0],i=n[1],this.groups=r,this.tags=i,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve page data");case 14:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(){return i.apply(this,arguments)})}])&&o(t.prototype,n),r&&o(t,r),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"EdgeJobController",(function(){return d}));var a=n(4),r=n(2);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function o(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){o(i,a,r,s,l,"next",e)}function l(e){o(i,a,r,s,l,"throw",e)}s(void 0)}))}}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function e(t,n,a,r,i,s,o,l,c,d){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state={actionInProgress:!1,showEditorTab:!1},this.$async=t,this.$q=n,this.$state=a,this.EdgeJobService=r,this.EndpointService=i,this.FileSaver=s,this.GroupService=o,this.HostBrowserService=l,this.Notifications=c,this.TagService=d,this.update=this.update.bind(this),this.updateAsync=this.updateAsync.bind(this),this.downloadLogs=this.downloadLogs.bind(this),this.downloadLogsAsync=this.downloadLogsAsync.bind(this),this.collectLogs=this.collectLogs.bind(this),this.collectLogsAsync=this.collectLogsAsync.bind(this),this.clearLogs=this.clearLogs.bind(this),this.clearLogsAsync=this.clearLogsAsync.bind(this),this.refresh=this.refresh.bind(this),this.refreshAsync=this.refreshAsync.bind(this),this.showEditor=this.showEditor.bind(this)}var t,n,s,o,d,u,p,m,g;return e.$inject=["$async","$q","$state","EdgeJobService","EndpointService","FileSaver","GroupService","HostBrowserService","Notifications","TagService"],t=e,(n=[{key:"update",value:function(){return this.$async(this.updateAsync)}},{key:"updateAsync",value:(g=l(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.edgeJob,this.state.actionInProgress=!0,e.prev=2,e.next=5,this.EdgeJobService.updateEdgeJob(t);case 5:this.Notifications.success("Edge job successfully updated"),this.$state.go("edge.jobs",{},{reload:!0}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.Notifications.error("",e.t0,"Unable to update Edge job");case 12:this.state.actionInProgress=!1;case 13:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(){return g.apply(this,arguments)})},{key:"downloadLogs",value:function(e){return this.$async(this.downloadLogsAsync,e)}},{key:"downloadLogsAsync",value:(m=l(regeneratorRuntime.mark((function e(t){var n,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.EdgeJobService.logFile(this.edgeJob.Id,t);case 3:n=e.sent,a=new Blob([n.FileContent],{type:"text/plain;charset=utf-8"}),r="job_".concat(this.edgeJob.Id,"_task_").concat(t,".log"),this.FileSaver.saveAs(a,r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to download file");case 12:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(e){return m.apply(this,arguments)})},{key:"associateEndpointsToResults",value:function(e,t){return Object(r.a)(e,(function(e){var n=Object(a.a)(t,(function(t){return t.Id===e.EndpointId}));return e.Endpoint=n,e}))}},{key:"collectLogs",value:function(e){return this.$async(this.collectLogsAsync,e)}},{key:"collectLogsAsync",value:(p=l(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.EdgeJobService.collectLogs(this.edgeJob.Id,t);case 3:Object(a.a)(this.results,(function(e){return e.EndpointId===t})).LogsStatus=2,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to collect logs");case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return p.apply(this,arguments)})},{key:"clearLogs",value:function(e){return this.$async(this.clearLogsAsync,e)}},{key:"clearLogsAsync",value:(u=l(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.EdgeJobService.clearLogs(this.edgeJob.Id,t);case 3:Object(a.a)(this.results,(function(e){return e.EndpointId===t})).LogsStatus=1,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to clear logs");case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return u.apply(this,arguments)})},{key:"refresh",value:function(){return this.$async(this.refreshAsync)}},{key:"refreshAsync",value:(d=l(regeneratorRuntime.mark((function e(){var t,n,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$state.params.id,e.next=3,this.EdgeJobService.jobResults(t);case 3:if(!((n=e.sent).length>0)){e.next=12;break}return a=Object(r.a)(n,(function(e){return e.EndpointId})),e.next=8,this.EndpointService.endpoints(void 0,void 0,{endpointIds:a});case 8:i=e.sent,this.results=this.associateEndpointsToResults(n,i.value),e.next=13;break;case 12:this.results=n;case 13:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"showEditor",value:function(){this.state.showEditorTab=!0}},{key:"$onInit",value:(o=l(regeneratorRuntime.mark((function e(){var t,n,a,s,o,l,c,d,u,p,m,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$state.params,n=t.id,a=t.tab,this.state.activeTab=a,a&&0!==a||(this.state.showEditorTab=!0),e.prev=3,e.next=6,Promise.all([this.EdgeJobService.edgeJob(n),this.EdgeJobService.getScriptFile(n),this.EdgeJobService.jobResults(n),this.GroupService.groups(),this.TagService.tags()]);case 6:if(s=e.sent,o=i(s,5),l=o[0],c=o[1],d=o[2],u=o[3],p=o[4],l.FileContent=c.FileContent,this.edgeJob=l,this.groups=u,this.tags=p,!(d.length>0)){e.next=25;break}return m=Object(r.a)(d,(function(e){return e.EndpointId})),e.next=21,this.EndpointService.endpoints(void 0,void 0,{endpointIds:m});case 21:g=e.sent,this.results=this.associateEndpointsToResults(d,g.value),e.next=26;break;case 25:this.results=d;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(3),this.Notifications.error("",e.t0,"Unable to retrieve endpoint list");case 31:case"end":return e.stop()}}),e,this,[[3,28]])}))),function(){return o.apply(this,arguments)})}])&&c(t.prototype,n),s&&c(t,s),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"EdgeJobsViewController",(function(){return c}));var a=n(22);function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw s}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function s(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){s(i,a,r,o,l,"next",e)}function l(e){s(i,a,r,o,l,"throw",e)}o(void 0)}))}}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var c=function(){function e(t,n,a,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.$state=n,this.EdgeJobService=a,this.ModalService=r,this.Notifications=i,this.removeAction=this.removeAction.bind(this),this.deleteJobsAsync=this.deleteJobsAsync.bind(this),this.deleteJobs=this.deleteJobs.bind(this)}var t,n,i,s,c;return e.$inject=["$async","$state","EdgeJobService","ModalService","Notifications"],t=e,(n=[{key:"removeAction",value:function(e){var t=this;this.ModalService.confirmDeletion("Do you want to remove the selected edge job(s) ?",(function(n){n&&t.deleteJobs(e)}))}},{key:"deleteJobs",value:function(e){return this.$async(this.deleteJobsAsync,e)}},{key:"deleteJobsAsync",value:(c=o(regeneratorRuntime.mark((function e(t){var n,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r(t),e.prev=1,n.s();case 3:if((i=n.n()).done){e.next=17;break}return s=i.value,e.prev=5,e.next=8,this.EdgeJobService.remove(s.Id);case 8:this.Notifications.success("",s.Name),Object(a.a)(this.edgeJobs,s),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),this.Notifications.error("",e.t0," Edge job "+s.Name);case 15:e.next=3;break;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(1),n.e(e.t1);case 22:return e.prev=22,n.f(),e.finish(22);case 25:this.$state.reload();case 26:case"end":return e.stop()}}),e,this,[[1,19,22,25],[5,12]])}))),function(e){return c.apply(this,arguments)})},{key:"$onInit",value:(s=o(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.EdgeJobService.edgeJobs();case 3:t=e.sent,this.edgeJobs=t,e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve Edge jobs"),this.edgeJobs=[];case 11:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return s.apply(this,arguments)})}])&&l(t.prototype,n),i&&l(t,i),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"CreateEdgeStackViewController",(function(){return d}));var a=n(2);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){o(i,a,r,s,l,"next",e)}function l(e){o(i,a,r,s,l,"throw",e)}s(void 0)}))}}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function e(t,n,a,r,i,s,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,{$state:t,EdgeStackService:n,EdgeGroupService:a,EdgeTemplateService:r,Notifications:i,FormHelper:s,$async:o}),this.formValues={Name:"",StackFileContent:"",StackFile:null,RepositoryURL:"",RepositoryReferenceName:"",RepositoryAuthentication:!1,RepositoryUsername:"",RepositoryPassword:"",Env:[],ComposeFilePathInRepository:"docker-compose.yml",Groups:[]},this.state={Method:"editor",formValidationError:"",actionInProgress:!1,StackType:null},this.edgeGroups=null,this.createStack=this.createStack.bind(this),this.createStackAsync=this.createStackAsync.bind(this),this.validateForm=this.validateForm.bind(this),this.createStackByMethod=this.createStackByMethod.bind(this),this.createStackFromFileContent=this.createStackFromFileContent.bind(this),this.createStackFromFileUpload=this.createStackFromFileUpload.bind(this),this.createStackFromGitRepository=this.createStackFromGitRepository.bind(this),this.editorUpdate=this.editorUpdate.bind(this),this.onChangeTemplate=this.onChangeTemplate.bind(this),this.onChangeTemplateAsync=this.onChangeTemplateAsync.bind(this),this.onChangeMethod=this.onChangeMethod.bind(this)}var t,n,r,s,o,d;return e.$inject=["$state","EdgeStackService","EdgeGroupService","EdgeTemplateService","Notifications","FormHelper","$async"],t=e,(n=[{key:"$onInit",value:(d=l(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.EdgeGroupService.groups();case 3:this.edgeGroups=e.sent,this.noGroups=0===this.edgeGroups.length,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve Edge groups");case 10:return e.prev=10,e.next=13,this.EdgeTemplateService.edgeTemplates();case 13:t=e.sent,this.templates=Object(a.a)(t,(function(e){return i(i({},e),{},{label:"".concat(e.title," - ").concat(e.description)})})),e.next=20;break;case 17:e.prev=17,e.t1=e.catch(10),this.Notifications.error("",e.t1,"Unable to retrieve Templates");case 20:case"end":return e.stop()}}),e,this,[[0,7],[10,17]])}))),function(){return d.apply(this,arguments)})},{key:"createStack",value:function(){return this.$async(this.createStackAsync)}},{key:"onChangeMethod",value:function(){this.formValues.StackFileContent="",this.selectedTemplate=null}},{key:"onChangeTemplate",value:function(e){return this.$async(this.onChangeTemplateAsync,e)}},{key:"onChangeTemplateAsync",value:(o=l(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.formValues.StackFileContent="",e.prev=1,e.next=4,this.EdgeTemplateService.edgeTemplate(t);case 4:n=e.sent,this.formValues.StackFileContent=n,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.Notifications.error("",e.t0,"Unable to retrieve Template");case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e){return o.apply(this,arguments)})},{key:"createStackAsync",value:(s=l(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.formValues.Name,"template"===(n=this.state.Method)&&(n="editor"),this.validateForm(n)){e.next=5;break}return e.abrupt("return");case 5:return this.state.actionInProgress=!0,e.prev=6,e.next=9,this.createStackByMethod(t,n);case 9:this.Notifications.success(" deployed"),this.$state.go("edge.stacks"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),this.Notifications.error("Deployment error",e.t0,"Unable to deploy stack");case 16:return e.prev=16,this.state.actionInProgress=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[6,13,16,19]])}))),function(){return s.apply(this,arguments)})},{key:"validateForm",value:function(e){if(this.state.formValidationError="","editor"!==e||""!==this.formValues.StackFileContent)return!0;this.state.formValidationError="Stack file content must not be empty"}},{key:"createStackByMethod",value:function(e,t){switch(t){case"editor":return this.createStackFromFileContent(e);case"upload":return this.createStackFromFileUpload(e);case"repository":return this.createStackFromGitRepository(e)}}},{key:"createStackFromFileContent",value:function(e){return this.EdgeStackService.createStackFromFileContent(e,this.formValues.StackFileContent,this.formValues.Groups)}},{key:"createStackFromFileUpload",value:function(e){return this.EdgeStackService.createStackFromFileUpload(e,this.formValues.StackFile,this.formValues.Groups)}},{key:"createStackFromGitRepository",value:function(e){var t={RepositoryURL:this.formValues.RepositoryURL,RepositoryReferenceName:this.formValues.RepositoryReferenceName,ComposeFilePathInRepository:this.formValues.ComposeFilePathInRepository,RepositoryAuthentication:this.formValues.RepositoryAuthentication,RepositoryUsername:this.formValues.RepositoryUsername,RepositoryPassword:this.formValues.RepositoryPassword};return this.EdgeStackService.createStackFromGitRepository(e,t,this.formValues.Groups)}},{key:"editorUpdate",value:function(e){this.formValues.StackFileContent=e.getValue()}}])&&c(t.prototype,n),r&&c(t,r),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"EdgeStacksViewController",(function(){return c}));var a=n(22);function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw s}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function s(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){s(i,a,r,o,l,"next",e)}function l(e){s(i,a,r,o,l,"throw",e)}o(void 0)}))}}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var c=function(){function e(t,n,a,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$state=t,this.Notifications=n,this.EdgeStackService=a,this.$scope=r,this.$async=i,this.stacks=void 0,this.getStacks=this.getStacks.bind(this),this.removeAction=this.removeAction.bind(this),this.removeActionAsync=this.removeActionAsync.bind(this)}var t,n,i,s,c;return e.$inject=["$state","Notifications","EdgeStackService","$scope","$async"],t=e,(n=[{key:"$onInit",value:function(){this.getStacks()}},{key:"removeAction",value:function(e){return this.$async(this.removeActionAsync,e)}},{key:"removeActionAsync",value:(c=o(regeneratorRuntime.mark((function e(t){var n,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r(t),e.prev=1,n.s();case 3:if((i=n.n()).done){e.next=17;break}return s=i.value,e.prev=5,e.next=8,this.EdgeStackService.remove(s.Id);case 8:this.Notifications.success("",s.Name),Object(a.a)(this.stacks,s),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),this.Notifications.error("",e.t0," stack "+s.Name);case 15:e.next=3;break;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(1),n.e(e.t1);case 22:return e.prev=22,n.f(),e.finish(22);case 25:this.$state.reload();case 26:case"end":return e.stop()}}),e,this,[[1,19,22,25],[5,12]])}))),function(e){return c.apply(this,arguments)})},{key:"getStacks",value:(s=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.EdgeStackService.stacks();case 3:this.stacks=e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),this.stacks=[],this.Notifications.error("",e.t0,"Unable to retrieve stacks");case 10:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(){return s.apply(this,arguments)})}])&&l(t.prototype,n),i&&l(t,i),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"EditEdgeStackViewController",(function(){return u}));var a=n(4),r=n(2),i=n(70);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function l(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){l(i,a,r,s,o,"next",e)}function o(e){l(i,a,r,s,o,"throw",e)}s(void 0)}))}}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var u=function(){function e(t,n,a,r,i,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.$state=n,this.EdgeGroupService=a,this.EdgeStackService=r,this.EndpointService=i,this.Notifications=s,this.stack=null,this.edgeGroups=null,this.state={actionInProgress:!1,activeTab:0},this.deployStack=this.deployStack.bind(this),this.deployStackAsync=this.deployStackAsync.bind(this),this.getPaginatedEndpoints=this.getPaginatedEndpoints.bind(this),this.getPaginatedEndpointsAsync=this.getPaginatedEndpointsAsync.bind(this)}var t,n,o,l,u,p;return e.$inject=["$async","$state","EdgeGroupService","EdgeStackService","EndpointService","Notifications"],t=e,(n=[{key:"$onInit",value:(p=c(regeneratorRuntime.mark((function e(){var t,n,a,r,i,o,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$state.params,n=t.stackId,a=t.tab,this.state.activeTab=a,e.prev=2,e.next=5,Promise.all([this.EdgeGroupService.groups(),this.EdgeStackService.stack(n),this.EdgeStackService.stackFile(n)]);case 5:r=e.sent,i=s(r,3),o=i[0],l=i[1],c=i[2],this.edgeGroups=o,this.stack=l,this.stackEndpointIds=this.filterStackEndpoints(l.EdgeGroups,o),this.originalFileContent=c,this.formValues={StackFileContent:c,EdgeGroups:this.stack.EdgeGroups,Prune:this.stack.Prune},e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),this.Notifications.error("",e.t0,"Unable to retrieve stack data");case 20:case"end":return e.stop()}}),e,this,[[2,17]])}))),function(){return p.apply(this,arguments)})},{key:"filterStackEndpoints",value:function(e,t){return Object(i.a)(Object(r.a)(e,(function(e){return Object(a.a)(t,{Id:e}).Endpoints})))}},{key:"deployStack",value:function(){return this.$async(this.deployStackAsync)}},{key:"deployStackAsync",value:(u=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.actionInProgress=!0,e.prev=1,this.originalFileContent!=this.formValues.StackFileContent&&(this.formValues.Version=this.stack.Version+1),e.next=5,this.EdgeStackService.updateStack(this.stack.Id,this.formValues);case 5:this.Notifications.success(" deployed"),this.$state.go("edge.stacks"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),this.Notifications.error("Deployment error",e.t0,"Unable to deploy stack");case 12:return e.prev=12,this.state.actionInProgress=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[1,9,12,15]])}))),function(){return u.apply(this,arguments)})},{key:"getPaginatedEndpoints",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.$async.apply(this,[this.getPaginatedEndpointsAsync].concat(t))}},{key:"getPaginatedEndpointsAsync",value:(l=c(regeneratorRuntime.mark((function e(t,n,a){var i,s,o,l,c,d=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={search:a,type:4,endpointIds:this.stackEndpointIds},e.next=4,this.EndpointService.endpoints(t,n,i);case 4:return s=e.sent,o=s.value,l=s.totalCount,c=Object(r.a)(o,(function(e){var t=d.stack.Status[e.Id];return e.Status=t,e})),e.abrupt("return",{endpoints:c,totalCount:l});case 11:e.prev=11,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve endpoint information");case 14:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(e,t,n){return l.apply(this,arguments)})}])&&d(t.prototype,n),o&&d(t,o),e}()},function(e,t,n){"use strict";function a(e){this.Time=e.time,this.Category=e.category,this.Module=e.module,this.Content=e.content}n.r(t),n.d(t,"StoridgeEventModel",(function(){return a}))},function(e,t,n){"use strict";function a(e){this.Domain=e.domain,this.Nodes=e.nodes,this.Condition=e.condition,this.ProvisionedBandwidth=e.provisionedBandwidth,this.UsedBandwidth=e.usedBandwidth,this.FreeBandwidth=e.freeBandwidth,this.TotalBandwidth=e.totalBandwidth,this.ProvisionedIOPS=e.provisionedIOPS,this.UsedIOPS=e.usedIOPS,this.FreeIOPS=e.freeIOPS,this.TotalIOPS=e.totalIOPS,this.ProvisionedCapacity=e.provisionedCapacity,this.UsedCapacity=e.usedCapacity,this.FreeCapacity=e.freeCapacity,this.TotalCapacity=e.totalCapacity}n.r(t),n.d(t,"StoridgeInfoModel",(function(){return a}))},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesComponentStatusConverter",(function(){return s}));var a=n(4),r=n(420);function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,s=[{key:"apiToModel",value:function(e){var t=new r.KubernetesComponentStatus;t.ComponentName=e.metadata.name;var n=Object(a.a)(e.conditions,{type:"Healthy"});return n&&"True"===n.status?t.Healthy=!0:n&&"False"===n.status&&(t.ErrorMessage=n.message),t}}],(n=null)&&i(t.prototype,n),s&&i(t,s),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesComponentStatus",(function(){return r}));var a=Object.freeze({ComponentName:"",Healthy:!1,ErrorMessage:""}),r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,JSON.parse(JSON.stringify(a)))}},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesDeploymentCreatePayload",(function(){return i}));var a=n(37);var r=Object.freeze({metadata:new a.KubernetesCommonMetadataPayload,spec:{replicas:0,selector:{matchLabels:{app:""}},strategy:{type:"RollingUpdate",rollingUpdate:{maxSurge:0,maxUnavailable:"100%"}},template:{metadata:{labels:{app:""}},spec:{affinity:{},containers:[{name:"",image:"",env:[],resources:{limits:{},requests:{}},volumeMounts:[]}],volumes:[]}}}}),i=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,JSON.parse(JSON.stringify(r)))}},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesDaemonSetCreatePayload",(function(){return i}));var a=n(37);var r=Object.freeze({metadata:new a.KubernetesCommonMetadataPayload,spec:{replicas:0,selector:{matchLabels:{app:""}},updateStrategy:{type:"RollingUpdate",rollingUpdate:{maxUnavailable:1}},template:{metadata:{labels:{app:""}},spec:{containers:[{name:"",image:"",env:[],resources:{limits:{},requests:{}},volumeMounts:[]}],volumes:[]}}}}),i=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,JSON.parse(JSON.stringify(r)))}},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesStatefulSetCreatePayload",(function(){return i}));var a=n(37);var r=Object.freeze({metadata:new a.KubernetesCommonMetadataPayload,spec:{replicas:0,serviceName:"",selector:{matchLabels:{app:""}},volumeClaimTemplates:[],updateStrategy:{type:"RollingUpdate",rollingUpdate:{partition:0}},template:{metadata:{labels:{app:""}},spec:{containers:[{name:"",image:"",env:[],resources:{limits:{},requests:{}},volumeMounts:[]}],volumes:[]}}}}),i=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,JSON.parse(JSON.stringify(r)))}},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesPersistentVolumClaimCreatePayload",(function(){return i}));var a=n(37);var r=Object.freeze({metadata:new a.KubernetesCommonMetadataPayload,spec:{accessModes:["ReadWriteOnce"],resources:{requests:{storage:""}},storageClassName:""}}),i=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,JSON.parse(JSON.stringify(r)))}},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesServiceCreatePayload",(function(){return i}));var a=n(37);var r=Object.freeze({metadata:new a.KubernetesCommonMetadataPayload,spec:{ports:[],selector:{app:""},type:"",clusterIP:""}}),i=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,JSON.parse(JSON.stringify(r)))}},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesIngressHelper",(function(){return s}));var a=n(5),r=n(35);function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,s=[{key:"findSBoundServiceIngressesRules",value:function(e,t){var n=Object(r.a)(e,"Paths");return Object(a.a)(n,{ServiceName:t})}}],(n=null)&&i(t.prototype,n),s&&i(t,s),e}()},function(e,t,n){"use strict";n.r(t);var a=n(428);function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"apiToEvent",value:function(e){var t=new a.KubernetesEvent;return t.Id=e.metadata.uid,t.Date=e.lastTimestamp||e.eventTime,t.Type=e.type,t.Message=e.message,t.Involved=e.involvedObject,t}}],(n=null)&&r(t.prototype,n),i&&r(t,i),e}();t.default=i},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesEvent",(function(){return r}));var a=Object.freeze({Id:"",Date:0,Type:"",Message:"",Involved:{}}),r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,JSON.parse(JSON.stringify(a)))}},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesNamespaceCreatePayload",(function(){return i}));var a=n(37);var r=Object.freeze({metadata:new a.KubernetesCommonMetadataPayload}),i=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,JSON.parse(JSON.stringify(r)))}},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesStorageClassCreatePayload",(function(){return i}));var a=n(37);var r=Object.freeze({metadata:new a.KubernetesCommonMetadataPayload,provisioner:"",allowVolumeExpansion:!1}),i=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,JSON.parse(JSON.stringify(r)))}},function(e,t,n){"use strict";n.r(t);var a=n(4),r=n(2),i=n(36),s=n(243);function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,l;return t=e,l=[{key:"apiToEndpoint",value:function(e){var t=new s.KubernetesEndpoint;t.Id=e.metadata.uid,t.Name=e.metadata.name,t.Namespace=e.metadata.namespace;var n=e.metadata.annotations?e.metadata.annotations[s.KubernetesEndpointAnnotationLeader]:"";if(n){var o=JSON.parse(n),l=Object(i.a)(o.holderIdentity,"_");t.HolderIdentity=l[0]}return e.subsets&&(t.Subsets=Object(r.a)(e.subsets,(function(e){var t=new s.KubernetesEndpointSubset;t.Ips=Object(r.a)(e.addresses,"ip");var n=Object(a.a)(e.ports,{name:"https"});return t.Port=n?n.port:void 0,t}))),t}}],(n=null)&&o(t.prototype,n),l&&o(t,l),e}();t.default=l},function(e,t,n){"use strict";n.r(t);var a=n(7),r=n(1),i=n.n(r),s=n(8),o=n(3),l=n(118);function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getPatchPayload",value:function(t,n){var a;switch(t.ApplicationType){case o.KubernetesApplicationTypes.DEPLOYMENT:a=e._getDeploymentPayload(t,n);break;case o.KubernetesApplicationTypes.DAEMONSET:a=e._getDaemonSetPayload(t,n);break;case o.KubernetesApplicationTypes.STATEFULSET:a=e._getStatefulSetPayload(t,n);break;default:throw new s.default("Unable to determine which association to use to convert patch")}return a}},{key:"_getDeploymentPayload",value:function(e,t){var n=i.a.copy(t),r=e.Raw;delete n.spec.template.metadata.labels[l.KubernetesSystem_DefaultDeploymentUniqueLabelKey];var s={};return Object(a.a)(l.KubernetesSystem_AnnotationsToSkip,(function(e,t){var n=r.metadata.annotations[t];n&&(s[t]=n)})),Object(a.a)(n.metadata.annotations,(function(e,t){l.KubernetesSystem_AnnotationsToSkip[t]||(s[t]=e)})),[{op:"replace",path:"/spec/template",value:n.spec.template},{op:"replace",path:"/metadata/annotations",value:s}]}},{key:"_getDaemonSetPayload",value:function(e,t){return t.data}},{key:"_getStatefulSetPayload",value:function(e,t){return t.data}}],(n=null)&&c(t.prototype,n),r&&c(t,r),e}();t.default=d},function(e,t,n){"use strict";n.r(t);var a=n(62),r=n(8),i=n(245),s=n(322),o=n(323),l=n(3);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,d;return t=e,d=[{key:"getRevisions",value:function(t,n){var i,s;switch(n.ApplicationType){case l.KubernetesApplicationTypes.DEPLOYMENT:var o=c(e._getDeploymentRevisions(t,n.Raw),2);i=o[0],s=o[1];break;case l.KubernetesApplicationTypes.DAEMONSET:var d=c(e._getDaemonSetRevisions(t,n.Raw),2);i=d[0],s=d[1];break;case l.KubernetesApplicationTypes.STATEFULSET:var u=c(e._getStatefulSetRevisions(t,n.Raw),2);i=u[0],s=u[1];break;default:throw new r.default("Unable to determine which association to use to get revisions")}return[i,s=Object(a.a)(s,"revision")]}},{key:"_getDeploymentRevisions",value:function(e,t){var n=i.default.filterOwnedRevisions(e,t);return[i.default.getCurrentRevision(n,t),i.default.filterVersionedRevisions(n)]}},{key:"_getDaemonSetRevisions",value:function(e,t){var n=s.default.filterOwnedRevisions(e,t);return[s.default.getCurrentRevision(n,t),n]}},{key:"_getStatefulSetRevisions",value:function(e,t){var n=o.default.filterOwnedRevisions(e,t);return[o.default.getCurrentRevision(n,t),n]}}],(n=null)&&u(t.prototype,n),d&&u(t,d),e}();t.default=p},function(e,t,n){"use strict";n.r(t);var a=n(4),r=n(19),i=n(435);function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"stacksFromApplications",value:function(e){return Object(r.a)(e,(function(e,t){if("-"!==t.StackName){var n=Object(a.a)(e,{Name:t.StackName,ResourcePool:t.ResourcePool});n||((n=new i.KubernetesStack).Name=t.StackName,n.ResourcePool=t.ResourcePool,e.push(n)),n.Applications.push(t)}return e}),[])}}],(n=null)&&s(t.prototype,n),o&&s(t,o),e}();t.default=o},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesStack",(function(){return r}));var a=Object.freeze({Name:"",ResourcePool:"",Applications:[]}),r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,JSON.parse(JSON.stringify(a)))}},function(e,t,n){"use strict";n.r(t),n.d(t,"KubernetesHorizontalPodAutoScalerCreatePayload",(function(){return r}));var a=Object.freeze({metadata:{namespace:"",name:""},spec:{maxReplicas:0,minReplicas:0,targetCPUUtilizationPercentage:0,scaleTargetRef:{kind:"",name:""}}}),r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,JSON.parse(JSON.stringify(a)))}},function(e,t,n){"use strict";n.r(t),n.d(t,"AccessControlPanelData",(function(){return r}));var a=n(16);function r(){this.Ownership=a.ResourceControlOwnership.ADMINISTRATORS,this.Ownership_Users=[],this.Ownership_Teams=[]}},function(e,t,n){"use strict";n.r(t);var a=n(10),r=n(5),i=n(1),s=n.n(i);function o(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){o(i,a,r,s,l,"next",e)}function l(e){o(i,a,r,s,l,"throw",e)}s(void 0)}))}}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.EndpointService=n,this.state={available:{limit:"10",filter:"",pageNumber:1,totalCount:0},associated:{limit:"10",filter:"",pageNumber:1,totalCount:0}},this.endpoints={associated:[],available:null},this.getEndpoints=this.getEndpoints.bind(this),this.getEndpointsAsync=this.getEndpointsAsync.bind(this),this.getAssociatedEndpoints=this.getAssociatedEndpoints.bind(this),this.getAssociatedEndpointsAsync=this.getAssociatedEndpointsAsync.bind(this),this.associateEndpoint=this.associateEndpoint.bind(this),this.dissociateEndpoint=this.dissociateEndpoint.bind(this)}var t,n,i,s,o;return e.$inject=["$async","EndpointService"],t=e,(n=[{key:"$onInit",value:function(){this.loadData()}},{key:"$onChanges",value:function(e){var t=e.endpointIds;t&&t.currentValue&&this.loadData()}},{key:"loadData",value:function(){this.getAssociatedEndpoints(),this.getEndpoints()}},{key:"getEndpoints",value:function(){return this.$async(this.getEndpointsAsync)}},{key:"getEndpointsAsync",value:(o=l(regeneratorRuntime.mark((function e(){var t,n,i,s,o,l,c,d=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getPaginationData("available"),n=t.start,i=t.search,s=t.limit,o={search:i,type:4},e.next=4,this.EndpointService.endpoints(n,s,o);case 4:l=e.sent,c=Object(r.a)(l.value,(function(e){return!Object(a.a)(d.endpointIds,e.Id)})),this.setTableData("available",c,l.totalCount),this.noEndpoints=0===this.state.available.totalCount;case 8:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"getAssociatedEndpoints",value:function(){return this.$async(this.getAssociatedEndpointsAsync)}},{key:"getAssociatedEndpointsAsync",value:(s=l(regeneratorRuntime.mark((function e(){var t,n,a,r,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={value:[],totalCount:0},!(this.endpointIds.length>0)){e.next=7;break}return n=this.getPaginationData("associated"),a=n.start,r=n.search,i=n.limit,s={search:r,type:4,endpointIds:this.endpointIds},e.next=6,this.EndpointService.endpoints(a,i,s);case 6:t=e.sent;case 7:this.setTableData("associated",t.value,t.totalCount);case 8:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"associateEndpoint",value:function(e){this.onAssociate(e)}},{key:"dissociateEndpoint",value:function(e){this.onDissociate(e)}},{key:"getPaginationData",value:function(e){var t=this.state[e],n=t.pageNumber,a=t.limit;return{start:(n-1)*a+1,search:t.search,limit:a}}},{key:"setTableData",value:function(e,t,n){this.endpoints[e]=t,this.state[e].totalCount=parseInt(n,10)}}])&&c(t.prototype,n),i&&c(t,i),e}();s.a.module("portainer.app").controller("AssoicatedEndpointsSelectorController",d),t.default=d},function(e,t,n){"use strict";n.r(t);t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.platformTypes=[{label:"Linux",value:1},{label:"Windows",value:2}],this.templateTypes=[{label:"Swarm",value:1},{label:"Standalone",value:2}]}},function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.r(t),n.d(t,"default",(function(){return r}));var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var a=this.allowSelection;angular.extend(this,t("GenericDatatableController",{$scope:n})),this.allowSelection=a.bind(this)}var t,n,r;return e.$inject=["$controller","$scope"],t=e,(n=[{key:"allowSelection",value:function(e){return 1!==e.Id}}])&&a(t.prototype,n),r&&a(t,r),e}()},function(e,t,n){"use strict";n.r(t);var a=n(95),r=n(1),i=n.n(r),s=n(237);function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.editEndpoint=this.editEndpoint.bind(this)}var t,n,r;return t=e,(n=[{key:"editEndpoint",value:function(e){e.stopPropagation(),this.onEdit(this.model.Id)}},{key:"joinTags",value:function(){if(!this.tags)return"Loading tags...";if(!this.model.TagIds||!this.model.TagIds.length)return"";var e=s.default.idsToTagNames(this.tags,this.model.TagIds);return Object(a.a)(e,",")}},{key:"$onInit",value:function(){this.endpointTags=this.joinTags()}},{key:"$onChanges",value:function(e){var t=e.tags,n=e.model;(t||n)&&(t.currentValue||n.currentValue)&&(this.endpointTags=this.joinTags())}}])&&o(t.prototype,n),r&&o(t,r),e}();i.a.module("portainer.app").controller("EndpointItemController",l),t.default=l},function(e,t,n){"use strict";n.r(t);var a=n(22),r=n(10),i=n(1),s=n.n(i);function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=function(){function e(t,n,a,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$q=t,this.EndpointService=n,this.GroupService=a,this.Notifications=r,this.Authentication=i,this.associateEndpoint=this.associateEndpoint.bind(this),this.dissociateEndpoint=this.dissociateEndpoint.bind(this),this.getPaginatedEndpointsByGroup=this.getPaginatedEndpointsByGroup.bind(this)}var t,n,i;return e.$inject=["$q","EndpointService","GroupService","Notifications","Authentication"],t=e,(n=[{key:"$onInit",value:function(){this.state={available:{limit:"10",filter:"",pageNumber:1,totalCount:0},associated:{limit:"10",filter:"",pageNumber:1,totalCount:0},allowCreateTag:this.Authentication.isAdmin()}}},{key:"associateEndpoint",value:function(e){var t=this;"create"!==this.pageType||Object(r.a)(this.associatedEndpoints,e)?"edit"===this.pageType&&this.GroupService.addEndpoint(this.model.Id,e).then((function(){t.Notifications.success("Success","Endpoint successfully added to group"),t.reloadTablesContent()})).catch((function(e){return t.Notifications.error("Error",e,"Unable to add endpoint to group")})):this.associatedEndpoints.push(e)}},{key:"dissociateEndpoint",value:function(e){var t=this;"create"===this.pageType?Object(a.a)(this.associatedEndpoints,(function(t){return t.Id===e.Id})):"edit"===this.pageType&&this.GroupService.removeEndpoint(this.model.Id,e.Id).then((function(){t.Notifications.success("Success","Endpoint successfully from group"),t.reloadTablesContent()})).catch((function(e){return t.Notifications.error("Error",e," endpoint from group")}))}},{key:"reloadTablesContent",value:function(){var e=this;this.getPaginatedEndpointsByGroup(this.pageType,"available"),this.getPaginatedEndpointsByGroup(this.pageType,"associated"),this.GroupService.group(this.model.Id).then((function(t){e.model=t}))}},{key:"getPaginatedEndpointsByGroup",value:function(e,t){var n=this;if("available"===t){var a=this.state.available,r=(a.pageNumber-1)*a.limit+1;this.EndpointService.endpointsByGroup(r,a.limit,a.filter,1).then((function(e){n.availableEndpoints=e.value,n.state.available.totalCount=e.totalCount}))}else if("associated"===t&&"edit"===e){var i=this.model.Id?this.model.Id:1,s=this.state.associated,o=(s.pageNumber-1)*s.limit+1;this.EndpointService.endpointsByGroup(o,s.limit,s.filter,i).then((function(e){n.associatedEndpoints=e.value,n.state.associated.totalCount=e.totalCount}))}}}])&&o(t.prototype,n),i&&o(t,i),e}();s.a.module("portainer.app").controller("GroupFormController",l),t.default=l},function(e,t,n){"use strict";function a(e){this.Id=e.id,this.Description=e.description,this.Name=e.name,this.Namespace=e.namespace?e.namespace.name:"",this.PathWithNamespace=e.path_with_namespace,this.RegistryEnabled=e.container_registry_enabled}n.r(t),n.d(t,"RegistryGitlabProject",(function(){return a}))},function(e,t,n){"use strict";function a(e){this.Title=e.Title,this.Message=e.Message,this.Hash=e.Hash,this.Style=e.Style,this.ContentLayout=e.ContentLayout}n.r(t),n.d(t,"MotdViewModel",(function(){return a}))},function(e,t,n){"use strict";n.r(t),n.d(t,"RegistryRepositoryViewModel",(function(){return r})),n.d(t,"RegistryRepositoryGitlabViewModel",(function(){return i}));var a=n(20);function r(e){e.name&&e.tags?(this.Name=e.name,this.TagsCount=Object(a.a)(e.tags,null).length):(this.Name=e,this.TagsCount=0)}function i(e){this.Name=e.path,this.TagsCount=e.tags.length}},function(e,t,n){"use strict";n.r(t),n.d(t,"TemplateViewModel",(function(){return s}));var a=n(36),r=n(61);function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=function(){function e(t,n){switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n){case"2":this.setTemplatesV2(t);break;default:throw new Error("Unsupported template version")}}var t,n,s;return t=e,(n=[{key:"setTemplatesV2",value:function(e){this.Id=e.Id,this.Title=e.title,this.Type=e.type,this.Description=e.description,this.AdministratorOnly=e.AdministratorOnly,this.Name=e.name,this.Note=e.note,this.Categories=e.categories?e.categories:[],this.Platform=e.platform?e.platform:"",this.Logo=e.logo,this.Repository=e.repository,this.Hostname=e.hostname,this.RegistryModel=new r.PorImageRegistryModel,this.RegistryModel.Image=e.image,this.RegistryModel.Registry.URL=e.registry||"",this.Command=e.command?e.command:"",this.Network=e.network?e.network:"",this.Privileged=!!e.privileged&&e.privileged,this.Interactive=!!e.interactive&&e.interactive,this.RestartPolicy=e.restart_policy?e.restart_policy:"always",this.Labels=e.labels?e.labels:[],this.Hosts=e.hosts?e.hosts:[],this.Env=function(e){var t=[];return e.env&&(t=e.env.map((function(e){if(e.type=2,e.value=e.default?e.default:"",e.preset&&(e.type=1),e.select){e.type=3;for(var t=0;t<e.select.length;t++){var n=e.select[t];if(n.default){e.value=n.value;break}}}return e}))),t}(e),this.Volumes=function(e){var t=[];return e.volumes&&(t=e.volumes.map((function(e){return{container:e.container,readonly:e.readonly||!1,type:e.bind?"bind":"auto",bind:e.bind?e.bind:null}}))),t}(e),this.Ports=function(e){var t=[];return e.ports&&(t=e.ports.map((function(e){var t=Object(a.a)(e,"/"),n=Object(a.a)(t[0],":");return{hostPort:n.length>1?n[0]:void 0,containerPort:n.length>1?n[1]:n[0],protocol:t[1]}}))),t}(e)}}])&&i(t.prototype,n),s&&i(t,s),e}()},function(e,t,n){"use strict";function a(e){this.Id=e.Id,this.Token=e.Token,this.ResourceId=e.ResourceID,this.EndpointId=e.EndpointID,this.WebhookType=e.WebhookType}n.r(t),n.d(t,"WebhookViewModel",(function(){return a}))},function(e,t,n){"use strict";function a(e,t){var n={};return n.value=angular.fromJson(e),n.totalCount=t("X-Total-Count"),n}n.r(t),n.d(t,"default",(function(){return a}))},function(e,t,n){"use strict";n.r(t);var a=n(336),r=n.n(a),i=n(41);function s(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){s(i,a,r,o,l,"next",e)}function l(e){s(i,a,r,o,l,"throw",e)}o(void 0)}))}}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var c=function(){function e(t,n,a,r,s,o,l,c,d){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,{$async:t,$state:n,Authentication:a,CustomTemplateService:r,FormValidator:s,Notifications:o,ResourceControlService:l,StackService:c,StateManager:d}),this.formValues={Title:"",FileContent:"",File:null,RepositoryURL:"",RepositoryReferenceName:"",RepositoryAuthentication:!1,RepositoryUsername:"",RepositoryPassword:"",ComposeFilePathInRepository:"docker-compose.yml",Description:"",Note:"",Platform:1,Type:1,AccessControlData:new i.AccessControlFormData},this.state={Method:"editor",formValidationError:"",actionInProgress:!1,fromStack:!1,loading:!0},this.templates=[],this.createCustomTemplate=this.createCustomTemplate.bind(this),this.createCustomTemplateAsync=this.createCustomTemplateAsync.bind(this),this.validateForm=this.validateForm.bind(this),this.createCustomTemplateByMethod=this.createCustomTemplateByMethod.bind(this),this.createCustomTemplateFromFileContent=this.createCustomTemplateFromFileContent.bind(this),this.createCustomTemplateFromFileUpload=this.createCustomTemplateFromFileUpload.bind(this),this.createCustomTemplateFromGitRepository=this.createCustomTemplateFromGitRepository.bind(this),this.editorUpdate=this.editorUpdate.bind(this),this.onChangeMethod=this.onChangeMethod.bind(this)}var t,n,a,s,c;return e.$inject=["$async","$state","Authentication","CustomTemplateService","FormValidator","Notifications","ResourceControlService","StackService","StateManager"],t=e,(n=[{key:"createCustomTemplate",value:function(){return this.$async(this.createCustomTemplateAsync)}},{key:"onChangeMethod",value:function(){this.formValues.FileContent="",this.selectedTemplate=null}},{key:"createCustomTemplateAsync",value:(c=o(regeneratorRuntime.mark((function e(){var t,n,a,r,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("template"===(t=this.state.Method)&&(t="editor"),this.validateForm(t)){e.next=4;break}return e.abrupt("return");case 4:return this.state.actionInProgress=!0,e.prev=5,e.next=8,this.createCustomTemplateByMethod(t);case 8:return n=e.sent,a=n.ResourceControl,r=this.formValues.AccessControlData,i=this.Authentication.getUserDetails(),s=i.ID,e.next=15,this.ResourceControlService.applyResourceControl(s,r,a);case 15:this.Notifications.success("Custom template successfully created"),this.$state.go("docker.templates.custom"),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),this.Notifications.error("",e.t0,"");case 22:return e.prev=22,this.state.actionInProgress=!1,e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[5,19,22,25]])}))),function(){return c.apply(this,arguments)})},{key:"validateForm",value:function(e){if(this.state.formValidationError="","editor"===e&&""===this.formValues.FileContent)return this.state.formValidationError="Template file content must not be empty",!1;var t=this.formValues.Title;if(r()(this.templates,(function(e){return e.Title===t})))return this.state.formValidationError="A template with the same name already exists",!1;var n=this.Authentication.isAdmin(),a=this.formValues.AccessControlData,i=this.FormValidator.validateAccessControl(a,n);return!i||(this.state.formValidationError=i,!1)}},{key:"createCustomTemplateByMethod",value:function(e){switch(e){case"editor":return this.createCustomTemplateFromFileContent();case"upload":return this.createCustomTemplateFromFileUpload();case"repository":return this.createCustomTemplateFromGitRepository()}}},{key:"createCustomTemplateFromFileContent",value:function(){return this.CustomTemplateService.createCustomTemplateFromFileContent(this.formValues)}},{key:"createCustomTemplateFromFileUpload",value:function(){return this.CustomTemplateService.createCustomTemplateFromFileUpload(this.formValues)}},{key:"createCustomTemplateFromGitRepository",value:function(){return this.CustomTemplateService.createCustomTemplateFromGitRepository(this.formValues)}},{key:"editorUpdate",value:function(e){this.formValues.FileContent=e.getValue()}},{key:"$onInit",value:(s=o(regeneratorRuntime.mark((function e(){var t,n,a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.StateManager.getState(),this.state.endpointMode=t.endpoint.mode,n=0,"DOCKER_STANDALONE"===this.state.endpointMode.provider?n=2:"DOCKER_SWARM_MODE"===this.state.endpointMode.provider&&(n=1),this.formValues.Type=n,a=this.$state.params,r=a.fileContent,i=a.type,this.formValues.FileContent=r,i&&(this.formValues.Type=+i),e.prev=8,e.next=11,this.CustomTemplateService.customTemplates();case 11:this.templates=e.sent,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),this.Notifications.error("",e.t0,"");case 17:this.state.loading=!1;case 18:case"end":return e.stop()}}),e,this,[[8,14]])}))),function(){return s.apply(this,arguments)})}])&&l(t.prototype,n),a&&l(t,a),e}();t.default=c},function(e,t,n){"use strict";n.r(t);var a=n(4),r=n(22),i=n(41);function s(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function l(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){l(i,a,r,s,o,"next",e)}function o(e){l(i,a,r,s,o,"throw",e)}s(void 0)}))}}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var u=function(){function e(t,n,a,r,s,o,l,c,d,u,p,m,g,f){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$anchorScroll=t,this.$async=n,this.$rootScope=a,this.$state=r,this.Authentication=s,this.CustomTemplateService=o,this.EndpointProvider=l,this.FormValidator=c,this.ModalService=d,this.NetworkService=u,this.Notifications=p,this.ResourceControlService=m,this.StateManager=f,this.StackService=g,this.state={selectedTemplate:null,showAdvancedOptions:!1,formValidationError:"",actionInProgress:!1,isEditorVisible:!1},this.currentUser={isAdmin:!1,id:null},this.formValues={network:"",name:"",fileContent:"",AccessControlData:new i.AccessControlFormData},this.getTemplates=this.getTemplates.bind(this),this.getTemplatesAsync=this.getTemplatesAsync.bind(this),this.removeTemplates=this.removeTemplates.bind(this),this.removeTemplatesAsync=this.removeTemplatesAsync.bind(this),this.validateForm=this.validateForm.bind(this),this.createStack=this.createStack.bind(this),this.createStackAsync=this.createStackAsync.bind(this),this.selectTemplate=this.selectTemplate.bind(this),this.selectTemplateAsync=this.selectTemplateAsync.bind(this),this.unselectTemplate=this.unselectTemplate.bind(this),this.unselectTemplateAsync=this.unselectTemplateAsync.bind(this),this.getNetworks=this.getNetworks.bind(this),this.getNetworksAsync=this.getNetworksAsync.bind(this),this.confirmDelete=this.confirmDelete.bind(this),this.confirmDeleteAsync=this.confirmDeleteAsync.bind(this),this.editorUpdate=this.editorUpdate.bind(this),this.isEditAllowed=this.isEditAllowed.bind(this)}var t,n,o,l,u,p,m,g,f,h;return e.$inject=["$anchorScroll","$async","$rootScope","$state","Authentication","CustomTemplateService","EndpointProvider","FormValidator","ModalService","NetworkService","Notifications","ResourceControlService","StackService","StateManager"],t=e,(n=[{key:"isEditAllowed",value:function(e){return this.currentUser.isAdmin||this.currentUser.id===e.CreatedByUserId}},{key:"getTemplates",value:function(e){return this.$async(this.getTemplatesAsync,e)}},{key:"getTemplatesAsync",value:(h=c(regeneratorRuntime.mark((function e(t){var n,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.provider,a=t.role,e.prev=1,r=2,"DOCKER_SWARM_MODE"===n&&"MANAGER"===a&&(r=1),e.next=6,this.CustomTemplateService.customTemplates(r);case 6:this.templates=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),this.Notifications.error("Failed loading templates",e.t0,"Unable to load custom templates");case 12:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(e){return h.apply(this,arguments)})},{key:"removeTemplates",value:function(e){return this.$async(this.removeTemplatesAsync,e)}},{key:"removeTemplatesAsync",value:(f=c(regeneratorRuntime.mark((function e(t){var n,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=s(t),e.prev=1,n.s();case 3:if((a=n.n()).done){e.next=17;break}return i=a.value,e.prev=5,e.next=8,this.CustomTemplateService.remove(i.id);case 8:this.Notifications.success("Removed template successfully"),Object(r.a)(this.templates,i),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),this.Notifications.error("Failed removing template",e.t0," custom template");case 15:e.next=3;break;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(1),n.e(e.t1);case 22:return e.prev=22,n.f(),e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[1,19,22,25],[5,12]])}))),function(e){return f.apply(this,arguments)})},{key:"validateForm",value:function(e,t){this.state.formValidationError="";var n=this.FormValidator.validateAccessControl(e,t);return!n||(this.state.formValidationError=n,!1)}},{key:"createStack",value:function(){return this.$async(this.createStackAsync)}},{key:"createStackAsync",value:(g=c(regeneratorRuntime.mark((function e(){var t,n,a,r,i,s,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.currentUser.id,n=this.formValues.AccessControlData,this.validateForm(n,this.currentUser.isAdmin)){e.next=4;break}return e.abrupt("return");case 4:return a=this.formValues.name,r=this.EndpointProvider.endpointID(),this.state.actionInProgress=!0,e.prev=7,i=this.formValues.fileContent,s=1===this.state.selectedTemplate.Type?this.StackService.createSwarmStackFromFileContent:this.StackService.createComposeStackFromFileContent,e.next=12,s(a,i,[],r);case 12:return o=e.sent,l=o.ResourceControl,e.next=16,this.ResourceControlService.applyResourceControl(t,n,l);case 16:this.Notifications.success(" deployed"),this.$state.go("docker.stacks"),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(7),this.Notifications.error("Deployment error",e.t0,"Failed to deploy stack");case 23:return e.prev=23,this.state.actionInProgress=!1,e.finish(23);case 26:case"end":return e.stop()}}),e,this,[[7,20,23,26]])}))),function(){return g.apply(this,arguments)})},{key:"unselectTemplate",value:function(e){return this.$async(this.unselectTemplateAsync,e)}},{key:"unselectTemplateAsync",value:(m=c(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Selected=!1,this.state.selectedTemplate=null,this.formValues={network:"",name:"",fileContent:"",AccessControlData:new i.AccessControlFormData};case 3:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"selectTemplate",value:function(e){return this.$async(this.selectTemplateAsync,e)}},{key:"selectTemplateAsync",value:(p=c(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.selectedTemplate){e.next=3;break}return e.next=3,this.unselectTemplate(this.state.selectedTemplate);case 3:return t.Selected=!0,this.formValues.network=Object(a.a)(this.availableNetworks,(function(e){return"bridge"===e.Name})),this.formValues.name=t.Title?t.Title:"",this.state.selectedTemplate=t,this.$anchorScroll("view-top"),e.next=10,this.CustomTemplateService.customTemplateFile(t.Id);case 10:n=e.sent,this.formValues.fileContent=n;case 12:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"getNetworks",value:function(e,t){return this.$async(this.getNetworksAsync,e,t)}},{key:"getNetworksAsync",value:(u=c(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.NetworkService.networks("DOCKER_STANDALONE"===t||"DOCKER_SWARM_MODE"===t,!1,"DOCKER_SWARM_MODE"===t&&n>=1.25);case 3:a=e.sent,this.availableNetworks=a,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.Notifications.error("",e.t0,".");case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e,t){return u.apply(this,arguments)})},{key:"confirmDelete",value:function(e){return this.$async(this.confirmDeleteAsync,e)}},{key:"confirmDeleteAsync",value:(l=c(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ModalService.confirmDeletionAsync(" that you want to delete this template?");case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,this.CustomTemplateService.remove(t);case 8:Object(r.a)(this.templates,{Id:t}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),this.Notifications.error("",e.t0,"");case 14:case"end":return e.stop()}}),e,this,[[5,11]])}))),function(e){return l.apply(this,arguments)})},{key:"editorUpdate",value:function(e){this.formValues.fileContent=e.getValue()}},{key:"$onInit",value:function(){var e=this.StateManager.getState(),t=e.endpoint.mode,n=e.apiVersion;this.getTemplates(t),this.getNetworks(t.provider,n),this.currentUser.isAdmin=this.Authentication.isAdmin();var a=this.Authentication.getUserDetails();this.currentUser.id=a.ID}}])&&d(t.prototype,n),o&&d(t,o),e}();t.default=u},function(e,t,n){"use strict";n.r(t);var a=n(336),r=n.n(a),i=n(41),s=n(58);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function c(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){c(i,a,r,s,o,"next",e)}function o(e){c(i,a,r,s,o,"throw",e)}s(void 0)}))}}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var p=function(){function e(t,n,a,r,i,s,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,{$async:t,$state:n,Authentication:a,CustomTemplateService:r,FormValidator:i,Notifications:s,ResourceControlService:o}),this.formValues=null,this.state={formValidationError:""},this.templates=[],this.getTemplate=this.getTemplate.bind(this),this.getTemplateAsync=this.getTemplateAsync.bind(this),this.submitAction=this.submitAction.bind(this),this.submitActionAsync=this.submitActionAsync.bind(this),this.editorUpdate=this.editorUpdate.bind(this)}var t,n,a,l,c,p;return e.$inject=["$async","$state","Authentication","CustomTemplateService","FormValidator","Notifications","ResourceControlService"],t=e,(n=[{key:"getTemplate",value:function(){return this.$async(this.getTemplateAsync)}},{key:"getTemplateAsync",value:(p=d(regeneratorRuntime.mark((function e(){var t,n,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([this.CustomTemplateService.customTemplate(this.$state.params.id),this.CustomTemplateService.customTemplateFile(this.$state.params.id)]);case 3:t=e.sent,n=o(t,2),a=n[0],r=n[1],a.FileContent=r,this.formValues=a,this.formValues.ResourceControl=new s.ResourceControlViewModel(a.ResourceControl),this.formValues.AccessControlData=new i.AccessControlFormData,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),this.Notifications.error("",e.t0,"");case 16:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(){return p.apply(this,arguments)})},{key:"validateForm",value:function(){if(this.state.formValidationError="",!this.formValues.FileContent)return this.state.formValidationError="Template file content must not be empty",!1;var e=this.formValues.Title,t=this.$state.params.id;if(r()(this.templates,(function(n){return n.Title===e&&n.Id!=t})))return this.state.formValidationError="A template with the name ".concat(e," already exists"),!1;var n=this.Authentication.isAdmin(),a=this.formValues.AccessControlData,i=this.FormValidator.validateAccessControl(a,n);return!i||(this.state.formValidationError=i,!1)}},{key:"submitAction",value:function(){return this.$async(this.submitActionAsync)}},{key:"submitActionAsync",value:(c=d(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.validateForm()){e.next=2;break}return e.abrupt("return");case 2:return this.actionInProgress=!0,e.prev=3,e.next=6,this.CustomTemplateService.updateCustomTemplate(this.formValues.Id,this.formValues);case 6:return t=this.Authentication.getUserDetails(),n=t.ID,e.next=10,this.ResourceControlService.applyResourceControl(n,this.formValues.AccessControlData,this.formValues.ResourceControl);case 10:this.Notifications.success(""),this.$state.go("docker.templates.custom"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),this.Notifications.error("",e.t0,"");case 17:return e.prev=17,this.actionInProgress=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[3,14,17,20]])}))),function(){return c.apply(this,arguments)})},{key:"editorUpdate",value:function(e){this.formValues.fileContent=e.getValue()}},{key:"$onInit",value:(l=d(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.getTemplate(),e.prev=1,e.next=4,this.CustomTemplateService.customTemplates();case 4:this.templates=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),this.Notifications.error("Failure loading",e.t0,"");case 10:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(){return l.apply(this,arguments)})}])&&u(t.prototype,n),a&&u(t,a),e}();t.default=p},,,,,,,function(e,t,n){"use strict";n.r(t);n(570),n(572),n(574),n(575),n(576),n(577),n(578),n(580),n(581),n(582),n(583),n(584),n(347),n(586),n(587),n(588),n(589),n(590),n(591),n(592),n(593),n(594),n(595),n(597),n(598),n(600),n(601),n(602),n(603),n(604),n(605),n(606),n(607),n(608),n(609),n(610),n(611),n(612),n(614),n(615),n(616),n(617),n(618),n(619),n(620),n(621),n(622),n(623),n(624),n(625),n(626),n(627),n(628),n(629),n(630),n(631),n(633),n(635),n(636),n(637),n(638),n(639),n(640),n(641),n(642),n(643),n(644),n(645),n(646),n(647),n(648),n(649),n(650),n(651),n(652),n(653),n(654),n(655),n(656),n(657),n(658),n(659),n(662),n(663),n(664),n(665),n(666),n(667),n(668),n(669),n(670),n(671),n(672),n(673),n(674),n(675),n(676),n(480),n(677),n(679),n(680),n(681),n(682),n(683),n(684),n(686),n(687),n(688),n(689),n(690),n(691),n(692),n(693),n(694),n(695),n(696),n(697),n(698),n(699),n(700),n(701),n(702),n(703),n(704),n(705),n(706),n(707),n(708),n(709),n(710),n(711),n(712),n(713),n(714),n(715),n(716),n(717),n(718),n(719),n(720),n(721),n(722),n(723),n(724),n(725),n(726),n(727),n(728),n(729),n(487);var a=n(1),r=n.n(a);n(488),n(489),n(490),n(491),n(492),n(493),n(494);r.a.module("portainer",["ui.bootstrap","ui.router","ui.select","isteven-multi-select","ngSanitize","ngFileUpload","ngMessages","ngResource","angularUtils.directives.dirPagination","LocalStorageModule","angular-jwt","angular-json-tree","angular-loading-bar","angular-clipboard","ngFileSaver","luegg.directives","portainer.app","portainer.agent","portainer.azure","portainer.docker","portainer.kubernetes","portainer.edge","portainer.integrations","rzModule","moment-picker","angulartics","angulartics.matomo"]);var i=n(805);i.keys().forEach((function(e){i(e)}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);n(730),n(731)},function(e,t){var n=window._paq=window._paq||[];n.push(["enableLinkTracking"]);n.push(["setTrackerUrl","https://portainer-ce.matomo.cloud/matomo.php"]),n.push(["setSiteId","1"]);var a=document,r=a.createElement("script"),i=a.getElementsByTagName("script")[0];r.type="text/javascript",r.async=!0,r.src="//cdn.matomo.cloud/portainer-ce.matomo.cloud/matomo.js",i.parentNode.insertBefore(r,i)},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a);r.a.module("angulartics.matomo",["angulartics"]).config(["$analyticsProvider","$windowProvider",function(e,t){var n=t.$get();e.settings.pageTracking.trackRelativePath=!0,e.api.setCustomDimension=function(e,t){n._paq&&n._paq.push(["setCustomDimension",e,t])},e.api.deleteCustomDimension=function(e){n._paq&&n._paq.push(["deleteCustomDimension",e])},e.api.setCustomVariable=function(e,t,a,r){n._paq&&(r=r||"page",n._paq.push(["setCustomVariable",e,t,a,r]))},e.api.deleteCustomVariable=function(e,t){n._paq&&(t=t||"page",n._paq.push(["deleteCustomVariable",e,t]))},e.api.trackSiteSearch=function(e,t,a){if(n._paq&&e){var i=["trackSiteSearch",e,t||!1];r.a.isDefined(a)&&i.push(a),n._paq.push(i)}},e.api.trackGoal=function(e,t){n._paq&&_paq.push(["trackGoal",e,t||0])},e.api.trackLink=function(e,t){var a=t||"link";n._paq&&n._paq.push(["trackLink",e,a])},e.registerSetUsername((function(e){n._paq&&n._paq.push(["setUserId",e])})),e.registerPageTrack((function(e){n._paq&&(n._paq.push(["setDocumentTitle",n.document.title]),n._paq.push(["setReferrerUrl",""]),n._paq.push(["setCustomUrl","http://portainer-ce.app"+e]),n._paq.push(["trackPageView"]))})),e.registerEventTrack((function(e,t){if(n._paq)switch(t=t||{},e){case"setEcommerceView":n._paq.push(["setEcommerceView",t.productSKU,t.productName,t.categoryName,t.price]);break;case"addEcommerceItem":n._paq.push(["addEcommerceItem",t.productSKU,t.productName,t.productCategory,t.price,t.quantity]);break;case"trackEcommerceCartUpdate":n._paq.push(["trackEcommerceCartUpdate",t.grandTotal]);break;case"trackEcommerceOrder":n._paq.push(["trackEcommerceOrder",t.orderId,t.grandTotal,t.subTotal,t.tax,t.shipping,t.discount]);break;default:if(t.value){var a=parseInt(t.value,10);t.value=isNaN(a)?0:a}n._paq.push(["trackEvent",t.category,e,t.name||t.label,t.value])}})),e.registerExceptionTrack((function(e){n._paq&&n._paq.push(["trackEvent","Exceptions",e.toString(),e.stack,0])}))}])},function(e,t,n){"use strict";n.r(t);var a=n(1);n.n(a).a.module("portainer.agent",[])},function(e,t,n){function a(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){a(s,r,i,o,l,"next",e)}function l(e){a(s,r,i,o,l,"throw",e)}o(void 0)}))}}var i=n(733),s=n(734),o=n(735);angular.module("portainer.azure",["portainer.app"]).config(["$stateRegistryProvider",function(e){"use strict";var t={name:"azure",url:"/azure",parent:"endpoint",abstract:!0,onEnter:["$async","$state","endpoint","EndpointProvider","Notifications","StateManager",function(e,t,n,a,i,s){return e(r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(3===n.Type){e.next=3;break}return t.go("portainer.home"),e.abrupt("return");case 3:return e.prev=3,a.setEndpointID(n.Id),a.setEndpointPublicURL(n.PublicURL),a.setOfflineModeFromStatus(n.Status),e.next=9,s.updateEndpointState(n,[]);case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),i.error("Failed loading endpoint",e.t0),t.go("portainer.home",{},{reload:!0});case 15:case"end":return e.stop()}}),e,null,[[3,11]])}))))}]},n={name:"azure.containerinstances",url:"/containerinstances",views:{"content@":{templateUrl:i,controller:"AzureContainerInstancesController"}}},a={name:"azure.containerinstances.new",url:"/new/",views:{"content@":{templateUrl:s,controller:"AzureCreateContainerInstanceController"}}},l={name:"azure.dashboard",url:"/dashboard",views:{"content@":{templateUrl:o,controller:"AzureDashboardController"}}};e.register(t),e.register(n),e.register({name:"azure.containerinstances.container",url:"/:id",views:{"content@":{component:"containerInstanceDetails"}}}),e.register(a),e.register(l)}])},function(e,t,n){function a(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){a(s,r,i,o,l,"next",e)}function l(e){a(s,r,i,o,l,"throw",e)}o(void 0)}))}}var i=n(736),s=n(737),o=n(738),l=n(739),c=n(740),d=n(741),u=n(742),p=n(743),m=n(744),g=n(745),f=n(746),h=n(747),v=n(748),b=n(749),y=n(750),x=n(751),w=n(752),k=n(753),S=n(754),C=n(755),$=n(756),A=n(757),P=n(758),I=n(759),T=n(760),N=n(761),R=n(762),E=n(763),O=n(764),D=n(765),V=n(766),U=n(767),L=n(768),_=n(769),j=n(770),F=n(771),M=n(772),K=n(773),B=n(774);angular.module("portainer.docker",["portainer.app"]).config(["$stateRegistryProvider",function(e){"use strict";var t={name:"docker",parent:"endpoint",url:"/docker",abstract:!0,onEnter:["endpoint","$async","$state","EndpointService","EndpointProvider","LegacyExtensionManager","Notifications","StateManager","SystemService",function(e,t,n,a,i,s,o,l,c){return t(r(regeneratorRuntime.mark((function t(){var d,u,p,m,g,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(f=function(){return(f=r(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Status!==n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,a.updateEndpoint(t.Id,{Status:n});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)},g=function(e,t){return f.apply(this,arguments)},m=function(){return(m=r(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.ping(t.Id);case 3:return e.abrupt("return",1);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",2);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)},p=function(e){return m.apply(this,arguments)},[1,2,4].includes(e.Type)){t.next=7;break}return n.go("portainer.home"),t.abrupt("return");case 7:return t.prev=7,t.next=10,p(e);case 10:if(d=t.sent,4===e.Type){t.next=14;break}return t.next=14,g(e,d);case 14:if(e.Status=d,2!==d){t.next=20;break}if(e.Snapshots[0]){t.next=18;break}throw new Error("");case 18:if(!e.Snapshots[0].Swarm){t.next=20;break}throw new Error(" .");case 20:return i.setEndpointID(e.Id),i.setEndpointPublicURL(e.PublicURL),i.setOfflineModeFromStatus(e.Status),t.next=25,s.initEndpointExtensions(e);case 25:return u=t.sent,t.next=28,l.updateEndpointState(e,u);case 28:t.next=34;break;case 30:t.prev=30,t.t0=t.catch(7),o.error("Failed loading endpoint",t.t0),n.go("portainer.home",{},{reload:!0});case 34:case"end":return t.stop()}}),t,null,[[7,30]])}))))}]},n={name:"docker.configs",url:"/configs",views:{"content@":{templateUrl:i,controller:"ConfigsController",controllerAs:"ctrl"}}},a={name:"docker.configs.config",url:"/:id",views:{"content@":{templateUrl:s,controller:"ConfigController"}}},z={name:"docker.configs.new",url:"/new?id",views:{"content@":{templateUrl:o,controller:"CreateConfigController",controllerAs:"ctrl"}}},H={name:"docker.containers",url:"/containers",views:{"content@":{templateUrl:l,controller:"ContainersController"}}},G={name:"docker.containers.container",url:"/:id?nodeName",views:{"content@":{templateUrl:c,controller:"ContainerController"}}},q={name:"docker.containers.container.attach",url:"/attach",views:{"content@":{templateUrl:d,controller:"ContainerConsoleController"}}},W={name:"docker.containers.container.exec",url:"/exec",views:{"content@":{templateUrl:u,controller:"ContainerConsoleController"}}},J={name:"docker.containers.new",url:"/new?nodeName&from",views:{"content@":{templateUrl:p,controller:"CreateContainerController"}}},Y={name:"docker.containers.container.inspect",url:"/inspect",views:{"content@":{templateUrl:m,controller:"ContainerInspectController"}}},Q={name:"docker.containers.container.logs",url:"/logs",views:{"content@":{templateUrl:g,controller:"ContainerLogsController"}}},X={name:"docker.containers.container.stats",url:"/stats",views:{"content@":{templateUrl:f,controller:"ContainerStatsController"}}},Z={name:"docker.dashboard",url:"/dashboard",views:{"content@":{templateUrl:h,controller:"DashboardController"}}},ee={name:"docker.events",url:"/events",views:{"content@":{templateUrl:v,controller:"EventsController"}}},te={name:"docker.images",url:"/images",views:{"content@":{templateUrl:b,controller:"ImagesController"}}},ne={name:"docker.images.image",url:"/:id?nodeName",views:{"content@":{templateUrl:y,controller:"ImageController"}}},ae={name:"docker.images.build",url:"/build",views:{"content@":{templateUrl:x,controller:"BuildImageController"}}},re={name:"docker.images.import",url:"/import",views:{"content@":{templateUrl:w,controller:"ImportImageController"}}},ie={name:"docker.networks",url:"/networks",views:{"content@":{templateUrl:k,controller:"NetworksController"}}},se={name:"docker.networks.network",url:"/:id?nodeName",views:{"content@":{templateUrl:S,controller:"NetworkController"}}},oe={name:"docker.networks.new",url:"/new",views:{"content@":{templateUrl:C,controller:"CreateNetworkController"}}},le={name:"docker.secrets",url:"/secrets",views:{"content@":{templateUrl:$,controller:"SecretsController"}}},ce={name:"docker.secrets.secret",url:"/:id",views:{"content@":{templateUrl:A,controller:"SecretController"}}},de={name:"docker.secrets.new",url:"/new",views:{"content@":{templateUrl:P,controller:"CreateSecretController"}}},ue={name:"docker.services",url:"/services",views:{"content@":{templateUrl:I,controller:"ServicesController"}}},pe={name:"docker.services.service",url:"/:id",views:{"content@":{templateUrl:T,controller:"ServiceController"}}},me={name:"docker.services.new",url:"/new",views:{"content@":{templateUrl:N,controller:"CreateServiceController"}}},ge={name:"docker.services.service.logs",url:"/logs",views:{"content@":{templateUrl:R,controller:"ServiceLogsController"}}},fe={name:"docker.stacks",url:"/stacks",views:{"content@":{templateUrl:E,controller:"StacksController"}}},he={name:"docker.stacks.stack",url:"/:name?id&type&external",views:{"content@":{templateUrl:O,controller:"StackController"}}},ve={name:"docker.stacks.newstack",url:"/newstack",views:{"content@":{templateUrl:D,controller:"CreateStackController"}}},be={name:"docker.swarm",url:"/swarm",views:{"content@":{templateUrl:V,controller:"SwarmController"}}},ye={name:"docker.swarm.visualizer",url:"/visualizer",views:{"content@":{templateUrl:U,controller:"SwarmVisualizerController"}}},xe={name:"docker.tasks.task",url:"/:id",views:{"content@":{templateUrl:L,controller:"TaskController"}}},we={name:"docker.tasks.task.logs",url:"/logs",views:{"content@":{templateUrl:_,controller:"TaskLogsController"}}},ke={name:"docker.templates",url:"/templates",views:{"content@":{templateUrl:j,controller:"TemplatesController"}}},Se={name:"docker.volumes",url:"/volumes",views:{"content@":{templateUrl:F,controller:"VolumesController"}}},Ce={name:"docker.volumes.volume",url:"/:id?nodeName",views:{"content@":{templateUrl:M,controller:"VolumeController"}}},$e={name:"docker.volumes.volume.browse",url:"/browse",views:{"content@":{templateUrl:K,controller:"BrowseVolumeController"}}},Ae={name:"docker.volumes.new",url:"/new",views:{"content@":{templateUrl:B,controller:"CreateVolumeController"}}};e.register(n),e.register(a),e.register(z),e.register(H),e.register(G),e.register(W),e.register(q),e.register(J),e.register(Y),e.register(Q),e.register(X),e.register({name:"docker.templates.custom",url:"/custom",views:{"content@":{component:"customTemplatesView"}}}),e.register({name:"docker.templates.custom.new",url:"/new?fileContent&type",views:{"content@":{component:"createCustomTemplateView"}},params:{fileContent:"",type:""}}),e.register({name:"docker.templates.custom.edit",url:"/:id",views:{"content@":{component:"editCustomTemplateView"}}}),e.register(t),e.register(Z),e.register({name:"docker.host",url:"/host",views:{"content@":{component:"hostView"}}}),e.register({name:"docker.host.browser",url:"/browser",views:{"content@":{component:"hostBrowserView"}}}),e.register(ee),e.register(te),e.register(ne),e.register(ae),e.register(re),e.register(ie),e.register(se),e.register(oe),e.register({name:"docker.nodes",url:"/nodes",abstract:!0}),e.register({name:"docker.nodes.node",url:"/:id",views:{"content@":{component:"nodeDetailsView"}}}),e.register({name:"docker.nodes.node.browse",url:"/browse",views:{"content@":{component:"nodeBrowserView"}}}),e.register(le),e.register(ce),e.register(de),e.register(ue),e.register(pe),e.register(me),e.register(ge),e.register(fe),e.register(he),e.register(ve),e.register(be),e.register(ye),e.register({name:"docker.tasks",url:"/tasks",abstract:!0}),e.register(xe),e.register(we),e.register(ke),e.register(Se),e.register(Ce),e.register($e),e.register(Ae)}])},function(e,t,n){"use strict";n.r(t);var a=n(1);n.n(a).a.module("portainer.edge",[]).config(["$stateRegistryProvider",function(e){e.register({name:"edge",url:"/edge",parent:"root",abstract:!0}),e.register({name:"edge.groups",url:"/groups",views:{"content@":{component:"edgeGroupsView"}}}),e.register({name:"edge.groups.new",url:"/new",views:{"content@":{component:"createEdgeGroupView"}}}),e.register({name:"edge.groups.edit",url:"/:groupId",views:{"content@":{component:"editEdgeGroupView"}}}),e.register({name:"edge.stacks",url:"/stacks",views:{"content@":{component:"edgeStacksView"}}}),e.register({name:"edge.stacks.new",url:"/new",views:{"content@":{component:"createEdgeStackView"}}}),e.register({name:"edge.stacks.edit",url:"/:stackId",views:{"content@":{component:"editEdgeStackView"}},params:{tab:0}}),e.register({name:"edge.jobs",url:"/jobs",views:{"content@":{component:"edgeJobsView"}}}),e.register({name:"edge.jobs.job",url:"/:id",views:{"content@":{component:"edgeJobView"}},params:{tab:0}}),e.register({name:"edge.jobs.new",url:"/new",views:{"content@":{component:"createEdgeJobView"}}})}])},function(e,t,n){"use strict";n.r(t);var a=n(10);function r(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function o(e){r(s,a,i,o,l,"next",e)}function l(e){r(s,a,i,o,l,"throw",e)}o(void 0)}))}}var s=n(775),o=n(778),l=n(779),c=n(780),d=n(781),u=n(782),p=n(783),m=n(784),g=n(785),f=n(786),h=n(787),v=n(788),b=n(789),y=n(790),x=n(791),w=n(792),k=n(793),S=n(794),C=n(795),$=n(796),A=n(797),P=n(798),I=n(799),T=n(800),N=n(801),R=n(802),E=n(803),O=n(804);function D(e,t,n,a){return V.apply(this,arguments)}function V(){return(V=i(regeneratorRuntime.mark((function e(t,n,r,i){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.checkAuthOnRefresh(),r.$on("unauthenticated",(function(e,t){Object(a.a)(t.config.url,"/v2/")||Object(a.a)(t.config.url,"/api/v4/")||!U(i.transition)||i.go("portainer.logout",{error:"Your session has expired"})})),e.next=4,n.init();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){if(!e)return!0;var t=e&&e.to(),n=t?t.name:"";return!["portainer.logout","portainer.auth"].some((function(e){return n.startsWith(e)}))}angular.module("portainer.app",["portainer.oauth"]).config(["$stateRegistryProvider",function(e){var t={name:"root",abstract:!0,onEnter:["$async","StateManager","Authentication","Notifications","authManager","$rootScope","$state",function(e,t,n,a,r,s,o){return e(i(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.getState().loading){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,D(r,n,s,o);case 6:return i=e.sent,e.next=9,t.initialize();case 9:if(i||!U(o.transition)){e.next=12;break}return o.go("portainer.logout"),e.abrupt("return",Promise.reject("Unauthenticated"));case 12:e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(3),a.error("",e.t0,""),e.t0;case 18:case"end":return e.stop()}}),e,null,[[3,14]])}))))}],views:{"sidebar@":{templateUrl:s,controller:"SidebarController"}}},n={name:"endpoint",url:"/:endpointId",parent:"root",abstract:!0,resolve:{endpoint:["$async","$state","$transition$","EndpointService","Notifications",function(e,t,n,a,r){return e(i(regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=+n.params().endpointId,e.next=4,a.endpoint(i);case 4:if(4!==(s=e.sent).Type&&7!==s.Type||s.EdgeID){e.next=8;break}return t.go("portainer.endpoints.endpoint",{id:s.Id}),e.abrupt("return");case 8:return e.abrupt("return",s);case 11:return e.prev=11,e.t0=e.catch(0),r.error("Failed loading endpoint",e.t0),t.go("portainer.home",{},{reload:!0}),e.abrupt("return");case 16:case"end":return e.stop()}}),e,null,[[0,11]])}))))}]}},a={name:"portainer.account",url:"/account",views:{"content@":{templateUrl:o,controller:"AccountController"}}},r={name:"portainer.auth",url:"/auth",params:{reload:!1},views:{"content@":{templateUrl:l,controller:"AuthenticationController",controllerAs:"ctrl"},"sidebar@":{}}},V={name:"portainer.logout",url:"/logout",params:{error:"",performApiLogout:!1},views:{"content@":{templateUrl:c,controller:"LogoutController",controllerAs:"ctrl"},"sidebar@":{}}},L={name:"portainer.endpoints",url:"/endpoints",views:{"content@":{templateUrl:d,controller:"EndpointsController"}}},_={name:"portainer.endpoints.endpoint",url:"/:id",views:{"content@":{templateUrl:u,controller:"EndpointController"}}},j={name:"portainer.endpoints.endpoint.kubernetesConfig",url:"/configure",views:{"content@":{templateUrl:p,controller:"KubernetesConfigureController",controllerAs:"ctrl"}}},F={name:"portainer.endpoints.new",url:"/new",views:{"content@":{templateUrl:m,controller:"CreateEndpointController"}}},M={name:"portainer.endpoints.endpoint.access",url:"/access",views:{"content@":{templateUrl:g,controller:"EndpointAccessController",controllerAs:"ctrl"}}},K={name:"portainer.groups",url:"/groups",views:{"content@":{templateUrl:f,controller:"GroupsController"}}},B={name:"portainer.groups.group",url:"/:id",views:{"content@":{templateUrl:h,controller:"GroupController"}}},z={name:"portainer.groups.new",url:"/new",views:{"content@":{templateUrl:v,controller:"CreateGroupController"}}},H={name:"portainer.groups.group.access",url:"/access",views:{"content@":{templateUrl:b,controller:"GroupAccessController"}}},G={name:"portainer.home",url:"/home",views:{"content@":{templateUrl:y,controller:"HomeController"}}},q={name:"portainer.init.endpoint",url:"/endpoint",views:{"content@":{templateUrl:x,controller:"InitEndpointController",controllerAs:"ctrl"}}},W={name:"portainer.init.admin",url:"/admin",views:{"content@":{templateUrl:w,controller:"InitAdminController"}}},J={name:"portainer.registries",url:"/registries",views:{"content@":{templateUrl:k,controller:"RegistriesController"}}},Y={name:"portainer.registries.registry",url:"/:id",views:{"content@":{templateUrl:S,controller:"RegistryController"}}},Q={name:"portainer.registries.new",url:"/new",views:{"content@":{templateUrl:C,controller:"CreateRegistryController"}}},X={name:"portainer.registries.registry.access",url:"/access",views:{"content@":{templateUrl:$,controller:"RegistryAccessController"}}},Z={name:"portainer.settings",url:"/settings",views:{"content@":{templateUrl:A,controller:"SettingsController"}}},ee={name:"portainer.settings.authentication",url:"/auth",views:{"content@":{templateUrl:P,controller:"SettingsAuthenticationController"}}},te={name:"portainer.tags",url:"/tags",views:{"content@":{templateUrl:I,controller:"TagsController"}}},ne={name:"portainer.users",url:"/users",views:{"content@":{templateUrl:T,controller:"UsersController"}}},ae={name:"portainer.users.user",url:"/:id",views:{"content@":{templateUrl:N,controller:"UserController"}}},re={name:"portainer.teams",url:"/teams",views:{"content@":{templateUrl:R,controller:"TeamsController"}}},ie={name:"portainer.teams.team",url:"/:id",views:{"content@":{templateUrl:E,controller:"TeamController"}}},se={name:"portainer.roles",url:"/roles",views:{"content@":{templateUrl:O}}};e.register(t),e.register(n),e.register({name:"portainer",parent:"root",abstract:!0}),e.register(a),e.register(r),e.register(V),e.register(L),e.register(_),e.register(M),e.register(F),e.register(j),e.register(K),e.register(B),e.register(H),e.register(z),e.register(G),e.register({name:"portainer.init",abstract:!0,url:"/init",views:{"sidebar@":{}}}),e.register(q),e.register(W),e.register(J),e.register(Y),e.register(X),e.register(Q),e.register(Z),e.register(ee),e.register(te),e.register(ne),e.register(ae),e.register(re),e.register(ie),e.register(se)}])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t){var n="app/azure/views/containerinstances/containerinstances.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="">\n    <a data-toggle="tooltip" title="" ui-sref="azure.containerinstances" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content>Container instances</rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <containergroups-datatable\n      title-text=""\n      title-icon="fa-cubes"\n      dataset="containerGroups"\n      table-key="containergroups"\n      order-by="Name"\n      remove-action="deleteAction"\n    ></containergroups-datatable>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/azure/views/containerinstances/create/createcontainerinstance.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text=" instance"></rd-header-title>\n  <rd-header-content> <a ui-sref="azure.containerinstances">Container instances</a> &gt;  </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-body>\n        <form class="form-horizontal" autocomplete="off" name="aciForm">\n          <div class="col-sm-12 form-section-title">\n            Azure settings\n          </div>\n          \x3c!-- subscription-input --\x3e\n          <div class="form-group">\n            <label for="azure_subscription" class="col-sm-1 control-label text-left">Subscription</label>\n            <div class="col-sm-11">\n              <select\n                class="form-control"\n                name="azure_subscription"\n                ng-model="state.selectedSubscription"\n                ng-options="subscription.Name for subscription in subscriptions"\n                ng-change="changeSubscription()"\n              ></select>\n            </div>\n          </div>\n          \x3c!-- !subscription-input --\x3e\n          \x3c!-- resourcegroup-input --\x3e\n          <div class="form-group">\n            <label for="azure_resourcegroup" class="col-sm-1 control-label text-left">Resource group</label>\n            <div class="col-sm-11">\n              <select\n                class="form-control"\n                name="azure_resourcegroup"\n                ng-model="state.selectedResourceGroup"\n                ng-options="resourceGroup.Name for resourceGroup in resourceGroups"\n              ></select>\n            </div>\n          </div>\n          \x3c!-- !resourcegroup-input --\x3e\n          \x3c!-- location-input --\x3e\n          <div class="form-group">\n            <label for="azure_location" class="col-sm-1 control-label text-left">Location</label>\n            <div class="col-sm-11">\n              <select class="form-control" name="azure_location" ng-model="model.Location" ng-options="location for location in locations"></select>\n            </div>\n          </div>\n          \x3c!-- !location-input --\x3e\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          \x3c!-- name-input --\x3e\n          <div class="form-group">\n            <label for="container_name" class="col-sm-1 control-label text-left"></label>\n            <div class="col-sm-11">\n              <input type="text" class="form-control" ng-model="model.Name" name="container_name" placeholder=" myContainer" required />\n            </div>\n          </div>\n          <div class="form-group" ng-show="aciForm.container_name.$invalid">\n            <div class="col-sm-12 small text-warning">\n              <div ng-messages="aciForm.container_name.$error">\n                <p ng-message="required"> <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>  </p>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !name-input --\x3e\n          \x3c!-- image-input --\x3e\n          <div class="form-group">\n            <label for="image_name" class="col-sm-1 control-label text-left"></label>\n            <div class="col-sm-11">\n              <input type="text" class="form-control" ng-model="model.Image" name="image_name" placeholder=" nginx:alpine" required />\n            </div>\n          </div>\n          <div class="form-group" ng-show="aciForm.image_name.$invalid">\n            <div class="col-sm-12 small text-warning">\n              <div ng-messages="aciForm.image_name.$error">\n                <p ng-message="required"> <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Image is required. </p>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !image-input --\x3e\n          \x3c!-- os-input --\x3e\n          <div class="form-group">\n            <label for="container_os" class="col-sm-1 control-label text-left">OS</label>\n            <div class="col-sm-11">\n              <select class="form-control" ng-model="model.OSType" name="container_os">\n                <option value="Linux">Linux</option>\n                <option value="Windows">Windows</option>\n              </select>\n            </div>\n          </div>\n          \x3c!-- !os-input --\x3e\n          \x3c!-- port-mapping --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <label class="control-label text-left"></label>\n              <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addPortBinding()">\n                <i class="fa fa-plus-circle" aria-hidden="true"></i> \n              </span>\n            </div>\n            \x3c!-- port-mapping-input-list --\x3e\n            <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n              <div ng-repeat="binding in model.Ports" style="margin-top: 2px;">\n                \x3c!-- host-port --\x3e\n                <div class="input-group col-sm-4 input-group-sm">\n                  <span class="input-group-addon">host</span>\n                  <input type="text" class="form-control" ng-model="binding.host" placeholder=" 80" />\n                </div>\n                \x3c!-- !host-port --\x3e\n                <span style="margin: 0 10px 0 10px;">\n                  <i class="fa fa-long-arrow-alt-right" aria-hidden="true"></i>\n                </span>\n                \x3c!-- container-port --\x3e\n                <div class="input-group col-sm-4 input-group-sm">\n                  <span class="input-group-addon"></span>\n                  <input type="text" class="form-control" ng-model="binding.container" placeholder=" 80" />\n                </div>\n                \x3c!-- !container-port --\x3e\n                \x3c!-- protocol-actions --\x3e\n                <div class="input-group col-sm-3 input-group-sm">\n                  <div class="btn-group btn-group-sm">\n                    <label class="btn btn-primary" ng-model="binding.protocol" uib-btn-radio="\'TCP\'">TCP</label>\n                    <label class="btn btn-primary" ng-model="binding.protocol" uib-btn-radio="\'UDP\'">UDP</label>\n                  </div>\n                  <button class="btn btn-sm btn-danger" type="button" ng-click="removePortBinding($index)">\n                    <i class="fa fa-trash" aria-hidden="true"></i>\n                  </button>\n                </div>\n                \x3c!-- !protocol-actions --\x3e\n              </div>\n            </div>\n            \x3c!-- !port-mapping-input-list --\x3e\n          </div>\n          \x3c!-- !port-mapping --\x3e\n          \x3c!-- public-ip --\x3e\n          <div class="form-group">\n            <div class="col-sm-12 small text-muted">This will automatically deploy a container with a public IP address</div>\n          </div>\n          \x3c!-- public-ip --\x3e\n\n          <div class="col-sm-12 form-section-title">\n            Container resources\n          </div>\n          \x3c!-- cpu-input --\x3e\n          <div class="form-group">\n            <label for="container_cpu" class="col-sm-1 control-label text-left">CPU</label>\n            <div class="col-sm-11">\n              <input type="number" class="form-control" ng-model="model.CPU" name="container_cpu" placeholder="1" />\n            </div>\n          </div>\n          \x3c!-- !cpu-input --\x3e\n          \x3c!-- memory-input --\x3e\n          <div class="form-group">\n            <label for="container_memory" class="col-sm-1 control-label text-left">Memory</label>\n            <div class="col-sm-11">\n              <input type="number" class="form-control" ng-model="model.Memory" name="container_memory" placeholder="1" />\n            </div>\n          </div>\n          \x3c!-- !memory-input --\x3e\n          \x3c!-- actions --\x3e\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button type="button" class="btn btn-primary btn-sm" ng-disabled="state.actionInProgress" ng-click="create()" button-spinner="state.actionInProgress">\n                <span ng-hide="state.actionInProgress"></span>\n                <span ng-show="state.actionInProgress">...</span>\n              </button>\n              <span class="text-danger" ng-if="state.formValidationError" style="margin-left: 5px;">{{ state.formValidationError }}</span>\n            </div>\n          </div>\n          \x3c!-- !actions --\x3e\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/azure/views/dashboard/dashboard.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text=""></rd-header-title>\n  <rd-header-content></rd-header-content>\n</rd-header>\n\n<div class="row" ng-if="subscriptions">\n  <div class="col-sm-12 col-md-6">\n    <a ui-sref="azure.subscriptions">\n      <rd-widget>\n        <rd-widget-body>\n          <div class="widget-icon blue pull-left">\n            <i class="fa fa-th-list"></i>\n          </div>\n          <div class="title">{{ subscriptions.length }}</div>\n          <div class="comment">Subscriptions</div>\n        </rd-widget-body>\n      </rd-widget>\n    </a>\n  </div>\n  <div class="col-sm-12 col-md-6" ng-if="resourceGroups">\n    <a ui-sref="azure.resourceGroups">\n      <rd-widget>\n        <rd-widget-body>\n          <div class="widget-icon blue pull-left">\n            <i class="fa fa-th-list"></i>\n          </div>\n          <div class="title">{{ resourceGroups.length }}</div>\n          <div class="comment">Resource groups</div>\n        </rd-widget-body>\n      </rd-widget>\n    </a>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/configs/configs.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Configs list">\n    <a data-toggle="tooltip" title="" ui-sref="docker.configs" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content>Configs</rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <configs-datatable\n      title-text=""\n      title-icon="fa-file-code"\n      dataset="ctrl.configs"\n      table-key="configs"\n      order-by="Name"\n      remove-action="ctrl.removeAction"\n      refresh-callback="ctrl.getConfigs"\n    ></configs-datatable>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/configs/edit/config.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="">\n    <a data-toggle="tooltip" title="" ui-sref="docker.configs.config({id: config.Id})" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content>\n    <a ui-sref="docker.configs">Configs</a> &gt; <a ui-sref="docker.configs.config({id: config.Id})">{{ config.Name }}</a>\n  </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-file-code" title-text=""></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <tbody>\n            <tr>\n              <td></td>\n              <td>{{ config.Name }}</td>\n            </tr>\n            <tr>\n              <td>ID</td>\n              <td>\n                {{ config.Id }}\n                <button authorization="DockerConfigDelete" class="btn btn-xs btn-danger" ng-click="removeConfig(config.Id)"\n                  ><i class="fa fa-trash-alt space-right" aria-hidden="true"></i>Delete this config</button\n                >\n                <button authorization="DockerConfigCreate" class="btn btn-xs btn-primary" ui-sref="docker.configs.new({id: config.Id})"\n                  ><i class="fa fa-copy space-right" aria-hidden="true"></i>Clone config</button\n                >\n              </td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ config.CreatedAt | getisodate }}</td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ config.UpdatedAt | getisodate }}</td>\n            </tr>\n            <tr ng-if="!(config.Labels | emptyobject)">\n              <td></td>\n              <td>\n                <table class="table table-bordered table-condensed">\n                  <tr ng-repeat="(k, v) in config.Labels">\n                    <td>{{ k }}</td>\n                    <td>{{ v }}</td>\n                  </tr>\n                </table>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n\x3c!-- access-control-panel --\x3e\n<por-access-control-panel ng-if="config" resource-id="config.Id" resource-control="config.ResourceControl" resource-type="\'config\'"> </por-access-control-panel>\n\x3c!-- !access-control-panel --\x3e\n\n<div class="row" ng-if="config">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-file-code" title-text=""></rd-widget-header>\n      <rd-widget-body>\n        <form class="form-horizontal">\n          <div class="form-group">\n            <div class="col-sm-12">\n              <code-editor identifier="config-editor" yml="false" read-only="true" value="config.Data"></code-editor>\n            </div>\n          </div>\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/configs/create/createconfig.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text=""></rd-header-title>\n  <rd-header-content> <a ui-sref="docker.configs">Configs</a> &gt; Add config </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-body>\n        <form class="form-horizontal">\n          \x3c!-- name-input --\x3e\n          <div class="form-group">\n            <label for="config_name" class="col-sm-1 control-label text-left"></label>\n            <div class="col-sm-11">\n              <input type="text" class="form-control" ng-model="ctrl.formValues.Name" id="config_name" placeholder=" myConfig" />\n            </div>\n          </div>\n          \x3c!-- !name-input --\x3e\n          \x3c!-- config-data --\x3e\n          <div class="form-group">\n            <div class="col-sm-12" ng-if="ctrl.formValues.displayCodeEditor">\n              <code-editor\n                identifier="config-creation-editor"\n                placeholder=""\n                yml="false"\n                on-change="(ctrl.editorUpdate)"\n                value="ctrl.formValues.Data"\n              ></code-editor>\n            </div>\n          </div>\n          \x3c!-- !config-data --\x3e\n          \x3c!-- labels --\x3e\n          <div class="form-group">\n            <div class="col-sm-12" style="margin-top: 5px;">\n              <label class="control-label text-left"></label>\n              <span class="label label-default interactive" style="margin-left: 10px;" ng-click="ctrl.addLabel()">\n                <i class="fa fa-plus-circle" aria-hidden="true"></i> \n              </span>\n            </div>\n            \x3c!-- labels-input-list --\x3e\n            <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n              <div ng-repeat="label in ctrl.formValues.Labels" style="margin-top: 2px;">\n                <div class="input-group col-sm-5 input-group-sm">\n                  <span class="input-group-addon">name</span>\n                  <input type="text" class="form-control" ng-model="label.name" placeholder=" com.example.foo" />\n                </div>\n                <div class="input-group col-sm-5 input-group-sm">\n                  <span class="input-group-addon">value</span>\n                  <input type="text" class="form-control" ng-model="label.value" placeholder=" bar" />\n                </div>\n                <button class="btn btn-sm btn-danger" type="button" ng-click="ctrl.removeLabel($index)">\n                  <i class="fa fa-trash" aria-hidden="true"></i>\n                </button>\n              </div>\n            </div>\n            \x3c!-- !labels-input-list --\x3e\n          </div>\n          \x3c!-- !labels--\x3e\n          \x3c!-- access-control --\x3e\n          <por-access-control-form form-data="ctrl.formValues.AccessControlData"></por-access-control-form>\n          \x3c!-- !access-control --\x3e\n          \x3c!-- actions --\x3e\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button type="button" class="btn btn-primary btn-sm" ng-disabled="!ctrl.formValues.Name" ng-click="ctrl.create()">Create config</button>\n              <span class="text-danger" ng-if="ctrl.state.formValidationError" style="margin-left: 5px;">{{ ctrl.state.formValidationError }}</span>\n            </div>\n          </div>\n          \x3c!-- !actions --\x3e\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/containers/containers.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="">\n    <a data-toggle="tooltip" title="" ui-sref="docker.containers" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content></rd-header-content>\n</rd-header>\n<information-panel-offline ng-if="offlineMode"></information-panel-offline>\n<div class="row">\n  <div class="col-sm-12" ng-if="containers">\n    <containers-datatable\n      title-text=""\n      title-icon="fa-cubes"\n      dataset="containers"\n      table-key="containers"\n      order-by="Status"\n      show-host-column="applicationState.endpoint.mode.agentProxy && applicationState.endpoint.mode.provider === \'DOCKER_SWARM_MODE\'"\n      show-add-action="true"\n      offline-mode="offlineMode"\n      refresh-callback="getContainers"\n    ></containers-datatable>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/containers/edit/container.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text=""> </rd-header-title>\n  <rd-header-content>\n    <a ui-sref="docker.containers"></a> &gt; <a ui-sref="docker.containers.container({id: container.Id})">{{ container.Name | trimcontainername }}</a>\n  </rd-header-content>\n</rd-header>\n\n<div\n  class="row"\n  authorization="DockerContainerStart, DockerContainerStop, DockerContainerKill, DockerContainerRestart, DockerContainerPause, DockerContainerUnpause, DockerContainerDelete, DockerContainerCreate"\n>\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-cogs" title-text=""></rd-widget-header>\n      <rd-widget-body classes="padding">\n        <div class="btn-group" role="group" aria-label="...">\n          <button authorization="DockerContainerStart" class="btn btn-success btn-sm" ng-click="start()" ng-disabled="container.State.Running"\n            ><i class="fa fa-play space-right" aria-hidden="true"></i></button\n          >\n          <button authorization="DockerContainerStop" class="btn btn-danger btn-sm" ng-click="stop()" ng-disabled="!container.State.Running"\n            ><i class="fa fa-stop space-right" aria-hidden="true"></i></button\n          >\n          <button authorization="DockerContainerKill" class="btn btn-danger btn-sm" ng-click="kill()" ng-disabled="!container.State.Running"\n            ><i class="fa fa-bomb space-right" aria-hidden="true"></i></button\n          >\n          <button authorization="DockerContainerRestart" class="btn btn-primary btn-sm" ng-click="restart()" ng-disabled="!container.State.Running"\n            ><i class="fa fa-sync space-right" aria-hidden="true"></i></button\n          >\n          <button authorization="DockerContainerPause" class="btn btn-primary btn-sm" ng-click="pause()" ng-disabled="!container.State.Running || container.State.Paused"\n            ><i class="fa fa-pause space-right" aria-hidden="true"></i></button\n          >\n          <button authorization="DockerContainerUnpause" class="btn btn-primary btn-sm" ng-click="unpause()" ng-disabled="!container.State.Paused"\n            ><i class="fa fa-play space-right" aria-hidden="true"></i></button\n          >\n          <button authorization="DockerContainerDelete" class="btn btn-danger btn-sm" ng-click="confirmRemove()"\n            ><i class="fa fa-trash-alt space-right" aria-hidden="true"></i></button\n          >\n        </div>\n        <div class="btn-group" role="group" aria-label="..." ng-if="displayRecreateButton" authorization="DockerContainerCreate">\n          <button\n            type="button"\n            class="btn btn-danger btn-sm"\n            ng-disabled="state.recreateContainerInProgress"\n            ng-click="recreate()"\n            button-spinner="state.recreateContainerInProgress"\n          >\n            <span ng-hide="state.recreateContainerInProgress"><i class="fa fa-sync space-right" aria-hidden="true"></i></span>\n            <span ng-show="state.recreateContainerInProgress">Recreation in progress...</span>\n          </button>\n          <a class="btn btn-primary btn-sm" type="button" ui-sref="docker.containers.new({ from: container.Id, nodeName: nodeName })"\n            ><i class="fa fa-copy space-right" aria-hidden="true"></i>/</a\n          >\n        </div>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-server" title-text=""></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <tbody>\n            <tr>\n              <td>ID</td>\n              <td>{{ container.Id }}</td>\n            </tr>\n            <tr>\n              <td></td>\n              <td ng-if="!container.edit">\n                {{ container.Name | trimcontainername }}\n                <a authorization="DockerContainerRename" href="" data-toggle="tooltip" title="Edit container name" ng-click="container.edit = true;"><i class="fa fa-edit"></i></a>\n              </td>\n              <td ng-if="container.edit">\n                <form ng-submit="renameContainer()">\n                  <input type="text" class="containerNameInput" ng-model="container.newContainerName" />\n                  <a href="" ng-click="container.edit = false;"><i class="fa fa-times"></i></a>\n                  <a href="" ng-click="renameContainer()"><i class="fa fa-check-square"></i></a>\n                </form>\n              </td>\n            </tr>\n            <tr ng-if="container.NetworkSettings.IPAddress">\n              <td>IP </td>\n              <td>{{ container.NetworkSettings.IPAddress }}</td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>\n                <i class="fa fa-heartbeat space-right green-icon" ng-if="container.State.Running"></i>\n                <i class="fa fa-heartbeat space-right red-icon" ng-if="!container.State.Running && container.State.Status !== \'created\'"></i>\n                {{ container.State | getstatetext }} for {{ activityTime\n                }}<span ng-if="!container.State.Running && container.State.Status !== \'created\'"> with exit code {{ container.State.ExitCode }}</span>\n              </td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ container.Created | getisodate }}</td>\n            </tr>\n            <tr ng-if="container.State.Running">\n              <td></td>\n              <td>{{ container.State.StartedAt | getisodate }}</td>\n            </tr>\n            <tr ng-if="!container.State.Running && container.State.Status !== \'created\'">\n              <td></td>\n              <td>{{ container.State.FinishedAt | getisodate }}</td>\n            </tr>\n            <tr authorization="DockerContainerLogs, DockerContainerInspect, DockerContainerStats, DockerExecStart">\n              <td colspan="2">\n                <div class="btn-group" role="group" aria-label="...">\n                  <a authorization="DockerContainerLogs" class="btn" type="button" ui-sref="docker.containers.container.logs({ id: container.Id })"\n                    ><i class="fa fa-file-alt space-right" aria-hidden="true"></i></a\n                  >\n                  <a authorization="DockerContainerInspect" class="btn" type="button" ui-sref="docker.containers.container.inspect({ id: container.Id })"\n                    ><i class="fa fa-info-circle space-right" aria-hidden="true"></i></a\n                  >\n                  <a authorization="DockerContainerStats" class="btn" type="button" ui-sref="docker.containers.container.stats({ id: container.Id })"\n                    ><i class="fa fa-chart-area space-right" aria-hidden="true"></i></a\n                  >\n                  <a authorization="DockerExecStart" class="btn" type="button" ui-sref="docker.containers.container.exec({ id: container.Id })"\n                    ><i class="fa fa-terminal space-right" aria-hidden="true"></i></a\n                  >\n                  <a authorization="DockerContainerAttach" class="btn" type="button" ui-sref="docker.containers.container.attach({ id: container.Id })"\n                    ><i class="fa fa-plug space-right" aria-hidden="true"></i></a\n                  >\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n\x3c!-- access-control-panel --\x3e\n<por-access-control-panel ng-if="container" resource-id="container.Id" resource-control="container.ResourceControl" resource-type="\'container\'"> </por-access-control-panel>\n\x3c!-- !access-control-panel --\x3e\n\n<div ng-if="container.State.Health" class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-server" title-text=""></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <tbody>\n            <tr>\n              <td>Status</td>\n              <td>\n                <i\n                  ng-class="\n                    { healthy: \'fa fa-heartbeat space-right green-icon\', unhealthy: \'fa fa-heartbeat space-right red-icon\', starting: \'fa fa-heartbeat space-right orange-icon\' }[\n                      container.State.Health.Status\n                    ]\n                  "\n                ></i>\n                {{ container.State.Health.Status }}\n              </td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ container.State.Health.FailingStreak }}</td>\n            </tr>\n            <tr>\n              <td>Last output</td>\n              <td>{{ container.State.Health.Log[container.State.Health.Log.length - 1].Output }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row" authorization="DockerImageCreate">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-clone" title-text=""></rd-widget-header>\n      <rd-widget-body>\n        <form class="form-horizontal">\n          \x3c!-- tag-description --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <span class="small text-muted">\n                \n                \n              </span>\n            </div>\n          </div>\n          \x3c!-- !tag-description --\x3e\n          \x3c!-- image-and-registry --\x3e\n          <por-image-registry model="config.RegistryModel" auto-complete="true" label-class="col-sm-1" input-class="col-sm-11"></por-image-registry>\n          \x3c!-- !image-and-registry --\x3e\n          \x3c!-- tag-note --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <span class="small text-muted">, <span class="label label-default">latest</span> </span>\n            </div>\n          </div>\n          \x3c!-- !tag-note --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button type="button" class="btn btn-primary btn-sm" ng-disabled="!config.RegistryModel.Image || config.commitInProgress" ng-click="commit()"></button>\n            </div>\n          </div>\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-server" title-text=""></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table container-details-table">\n          <tbody>\n            <tr>\n              <td></td>\n              <td\n                ><a ui-sref="docker.images.image({ id: container.Image, nodeName: nodeName })">{{ container.Config.Image }}@{{ container.Image }}</a></td\n              >\n            </tr>\n            <tr ng-if="portBindings.length > 0">\n              <td></td>\n              <td>\n                <div ng-repeat="portMapping in portBindings"> {{ portMapping.host }} <i class="fa fa-long-arrow-alt-right"></i> {{ portMapping.container }} </div>\n              </td>\n            </tr>\n            <tr>\n              <td>CMD</td>\n              <td\n                ><code>{{ container.Config.Cmd | command }}</code></td\n              >\n            </tr>\n            <tr>\n              <td></td>\n              <td\n                ><code>{{ container.Config.Entrypoint ? (container.Config.Entrypoint | command) : \'null\' }}</code></td\n              >\n            </tr>\n            <tr>\n              <td>ENV</td>\n              <td>\n                <table class="table table-bordered table-condensed">\n                  <tr ng-repeat="var in container.Config.Env track by $index">\n                    <td>{{ var|key: \'=\' }}</td>\n                    <td>{{ var|value: \'=\' }}</td>\n                  </tr>\n                </table>\n              </td>\n            </tr>\n            <tr ng-if="!(container.Config.Labels | emptyobject)">\n              <td></td>\n              <td>\n                <table class="table table-bordered table-condensed">\n                  <tr ng-repeat="(k, v) in container.Config.Labels">\n                    <td>{{ k }}</td>\n                    <td>{{ v }}</td>\n                  </tr>\n                </table>\n              </td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>\n                <container-restart-policy\n                  ng-if="container"\n                  name="container.HostConfig.RestartPolicy.Name"\n                  maximum-retry-count="container.HostConfig.RestartPolicy.MaximumRetryCount"\n                  update-restart-policy="updateRestartPolicy(name, maximumRetryCount)"\n                >\n                </container-restart-policy>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row" ng-if="container.Mounts.length > 0">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-hdd" title-text=></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <thead>\n            <tr>\n              <th>/</th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr ng-repeat="vol in container.Mounts">\n              <td ng-if="vol.Type === \'bind\'">{{ vol.Source }}</td>\n              <td ng-if="vol.Type === \'volume\'"\n                ><a ui-sref="docker.volumes.volume({ id: vol.Name, nodeName: nodeName })">{{ vol.Name }}</a></td\n              >\n              <td>{{ vol.Destination }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-12">\n    <container-networks-datatable\n      ng-if="container.NetworkSettings.Networks"\n      title-text=""\n      title-icon="fa-sitemap"\n      dataset="container.NetworkSettings.Networks"\n      table-key="container-networks"\n      container="container"\n      available-networks="availableNetworks"\n      join-network-action="containerJoinNetwork"\n      join-network-action-in-progress="state.joinNetworkInProgress"\n      leave-network-action="containerLeaveNetwork"\n      leave-network-action-in-progress="state.leaveNetworkInProgress"\n      node-name="nodeName"\n    ></container-networks-datatable>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/containers/console/attach.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text=""></rd-header-title>\n  <rd-header-content>\n    <a ui-sref="docker.containers"></a> &gt; <a ui-sref="docker.containers.container({id: container.Id})">{{ container.Name | trimcontainername }}</a> &gt; \n  </rd-header-content>\n</rd-header>\n\n<div class="row" ng-init="autoconnectAttachView()" ng-show="loaded">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-terminal" title-text="Attach"></rd-widget-header>\n      <rd-widget-body>\n        <div class="small text-warning" ng-if="!container.Config.OpenStdin">\n          <p>\n            <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>\n            \n          </p>\n        </div>\n\n        <div class="small text-warning" ng-if="!container.Config.Tty">\n          <p>\n            <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>\n            TTY\n          </p>\n        </div>\n\n        <div class="small text-danger" ng-hide="container.State.Running">\n          <p>\n            <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>\n            \n          </p>\n        </div>\n\n        <button\n          type="button"\n          class="btn btn-primary"\n          ng-disabled="state === states.connecting || !container.State.Running"\n          ng-click="state == states.disconnected ? connectAttach() : disconnect()"\n        >\n          <span ng-show="state === states.disconnected"></span>\n          <span ng-show="state === states.connected"></span>\n          <span ng-show="state === states.connecting">Attaching...</span>\n        </button>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <div id="terminal-container" class="terminal-container"></div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/containers/console/exec.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text=""></rd-header-title>\n  <rd-header-content>\n    <a ui-sref="docker.containers"></a> &gt; <a ui-sref="docker.containers.container({id: container.Id})">{{ container.Name | trimcontainername }}</a> &gt; \n  </rd-header-content>\n</rd-header>\n\n<div class="row" ng-init="initView()" ng-show="loaded">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-terminal" title-text="Execute"></rd-widget-header>\n      <rd-widget-body>\n        <form class="form-horizontal">\n          <div ng-if="state === states.disconnected">\n            \x3c!-- command-list --\x3e\n            <div class="form-group">\n              <label for="command" class="col-lg-1 text-left col-sm-2 control-label"></label>\n              <div class="col-lg-11 col-sm-10">\n                <div class="input-group" ng-if="!formValues.isCustomCommand">\n                  <span class="input-group-addon">\n                    <i class="fab fa-linux" aria-hidden="true" ng-if="imageOS == \'linux\'"></i>\n                    <i class="fab fa-windows" aria-hidden="true" ng-if="imageOS == \'windows\'"></i>\n                  </span>\n                  <select class="form-control" ng-model="formValues.command" id="command">\n                    <option value="ash" ng-if="imageOS == \'linux\'">/bin/ash</option>\n                    <option value="bash" ng-if="imageOS == \'linux\'">/bin/bash</option>\n                    <option value="sh" ng-if="imageOS == \'linux\'">/bin/sh</option>\n                    <option value="powershell" ng-if="imageOS == \'windows\'">powershell</option>\n                    <option value="cmd.exe" ng-if="imageOS == \'windows\'">cmd.exe</option>\n                    <option ng-repeat="command in containerCommands" value="{{ command.command }}">{{ command.title }}: {{ command.command }}</option>\n                  </select>\n                </div>\n                <input class="form-control" ng-if="formValues.isCustomCommand" type="text" name="custom-command" ng-model="formValues.customCommand" placeholder=" ps aux" />\n              </div>\n            </div>\n            \x3c!-- !command-list --\x3e\n            <div class="form-group col-lg-12">\n              <label for="command" class="text-left control-label"></label>\n              <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="formValues.isCustomCommand" /><i></i> </label>\n            </div>\n            <div class="form-group">\n              <label for="username" class="col-lg-1 text-left col-sm-2 control-label">\n                \n                <portainer-tooltip position="bottom" message=" user, user:group, uid  uid:gid"></portainer-tooltip>\n              </label>\n              <div class="col-lg-11 col-sm-10">\n                <input class="form-control" type="text" name="username" ng-model="formValues.user" placeholder="root" />\n              </div>\n            </div>\n            <div class="form-group">\n              <div class="col-sm-12">\n                <button type="button" class="btn btn-primary" ng-disabled="!container.State.Running" ng-click="connectExec()">\n                  <span></span>\n                </button>\n                <span class="small text-danger" ng-hide="container.State.Running">\n                  <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>\n                 \n                </span>\n              </div>\n            </div>\n          </div>\n          <div ng-if="state !== states.disconnected">\n            <label\n              > <code>{{ ::formValues.user || \'\' }}</code> \n              <code>{{ formValues.isCustomCommand ? formValues.customCommand : formValues.command }}</code></label\n            >\n            <button type="button" class="btn btn-primary" ng-click="disconnect()">\n              <span ng-show="state === states.connected"></span>\n              <span ng-show="state === states.connecting"></span>\n            </button>\n          </div>\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <div id="terminal-container" class="terminal-container"></div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/containers/create/createcontainer.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text=""></rd-header-title>\n  <rd-header-content> <a ui-sref="docker.containers"></a> &gt;  </rd-header-content>\n</rd-header>\n\n<information-panel title-text="Caution" ng-if="state.mode == \'duplicate\'">\n  <span class="small">\n    <p class="text-muted">\n      <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n      entrypointcmd\n      <a href="http://portainer.readthedocs.io/en/stable/agent.html" target="_blank"></a> \n    </p>\n  </span>\n</information-panel>\n\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-body>\n        <form class="form-horizontal" autocomplete="off">\n          \x3c!-- name-input --\x3e\n          <div class="form-group">\n            <label for="container_name" class="col-sm-1 control-label text-left"></label>\n            <div class="col-sm-11">\n              <input type="text" class="form-control" ng-model="config.name" id="container_name" placeholder=" myContainer" />\n            </div>\n          </div>\n          \x3c!-- !name-input --\x3e\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          <div ng-if="!formValues.RegistryModel.Registry && fromContainer">\n            <i class="fa fa-exclamation-triangle orange-icon" aria-hidden="true"></i>\n            <span class="small text-danger" style="margin-left: 5px;"\n              >The Docker registry for the <code>{{ config.Image }}</code> image is not registered inside Portainer, you will not be able to create a container. Please register\n              that registry first.</span\n            >\n          </div>\n          <div ng-if="formValues.RegistryModel.Registry || !fromContainer">\n            \x3c!-- image-and-registry --\x3e\n            <por-image-registry\n              model="formValues.RegistryModel"\n              pull-warning="formValues.alwaysPull"\n              ng-if="formValues.RegistryModel.Registry"\n              auto-complete="true"\n              label-class="col-sm-1"\n              input-class="col-sm-11"\n              on-image-change="onImageNameChange()"\n            ></por-image-registry>\n            \x3c!-- !image-and-registry --\x3e\n            \x3c!-- always-pull --\x3e\n            <div class="form-group">\n              <div class="col-sm-12">\n                <label for="ownership" class="control-label text-left">\n                  \n                  <portainer-tooltip\n                    position="bottom"\n                    message="Portainer"\n                  ></portainer-tooltip>\n                </label>\n                <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="formValues.alwaysPull" /><i></i> </label>\n              </div>\n            </div>\n            \x3c!-- !always-pull --\x3e\n          </div>\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          \x3c!-- publish-exposed-ports --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <label class="control-label text-left">\n                \n                <portainer-tooltip\n                  position="bottom"\n                  message="PortainerDockerDockerfile"\n                ></portainer-tooltip>\n              </label>\n              <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="config.HostConfig.PublishAllPorts" /><i></i> </label>\n            </div>\n          </div>\n          \x3c!-- !publish-exposed-ports --\x3e\n          \x3c!-- port-mapping --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <label class="control-label text-left">\n                \n                <portainer-tooltip\n                  position="bottom"\n                  message="Docker"\n                ></portainer-tooltip>\n              </label>\n              <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addPortBinding()">\n                <i class="fa fa-plus-circle" aria-hidden="true"></i> \n              </span>\n            </div>\n            \x3c!-- port-mapping-input-list --\x3e\n            <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n              <div ng-repeat="portBinding in config.HostConfig.PortBindings" style="margin-top: 2px;">\n                \x3c!-- host-port --\x3e\n                <div class="input-group col-sm-4 input-group-sm">\n                  <span class="input-group-addon">host</span>\n                  <input type="text" class="form-control" ng-model="portBinding.hostPort" placeholder=" 80, 80-88, ip:80 or ip:80-88 (optional)" />\n                </div>\n                \x3c!-- !host-port --\x3e\n                <span style="margin: 0 10px 0 10px;">\n                  <i class="fa fa-long-arrow-alt-right" aria-hidden="true"></i>\n                </span>\n                \x3c!-- container-port --\x3e\n                <div class="input-group col-sm-4 input-group-sm">\n                  <span class="input-group-addon"></span>\n                  <input type="text" class="form-control" ng-model="portBinding.containerPort" placeholder=" 80 or 80-88" />\n                </div>\n                \x3c!-- !container-port --\x3e\n                \x3c!-- protocol-actions --\x3e\n                <div class="input-group col-sm-3 input-group-sm">\n                  <div class="btn-group btn-group-sm">\n                    <label class="btn btn-primary" ng-model="portBinding.protocol" uib-btn-radio="\'tcp\'">TCP</label>\n                    <label class="btn btn-primary" ng-model="portBinding.protocol" uib-btn-radio="\'udp\'">UDP</label>\n                  </div>\n                  <button class="btn btn-sm btn-danger" type="button" ng-click="removePortBinding($index)">\n                    <i class="fa fa-trash" aria-hidden="true"></i>\n                  </button>\n                </div>\n                \x3c!-- !protocol-actions --\x3e\n              </div>\n            </div>\n            \x3c!-- !port-mapping-input-list --\x3e\n          </div>\n          \x3c!-- !port-mapping --\x3e\n          <div ng-if="applicationState.endpoint.mode.agentProxy && applicationState.endpoint.mode.provider === \'DOCKER_SWARM_MODE\'">\n            <div class="col-sm-12 form-section-title">\n              Deployment\n            </div>\n            \x3c!-- node-selection --\x3e\n            <node-selector model="formValues.NodeName"> </node-selector>\n            \x3c!-- !node-selection --\x3e\n          </div>\n          \x3c!-- access-control --\x3e\n          <por-access-control-form form-data="formValues.AccessControlData" resource-control="fromContainer.ResourceControl" ng-if="fromContainer"></por-access-control-form>\n          \x3c!-- !access-control --\x3e\n          \x3c!-- actions --\x3e\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          \x3c!-- autoremove --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <label for="ownership" class="control-label text-left">\n                \n                <portainer-tooltip\n                  position="bottom"\n                  message="Portainer"\n                ></portainer-tooltip>\n              </label>\n              <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="config.HostConfig.AutoRemove" /><i></i> </label>\n            </div>\n          </div>\n          \x3c!-- !autoremove --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button\n                type="button"\n                class="btn btn-primary btn-sm"\n                ng-disabled="state.actionInProgress || !formValues.RegistryModel.Image || (!formValues.RegistryModel.Registry && fromContainer)"\n                ng-click="create()"\n                button-spinner="state.actionInProgress"\n              >\n                <span ng-hide="state.actionInProgress"></span>\n                <span ng-show="state.actionInProgress">...</span>\n              </button>\n              <span class="text-danger" ng-if="state.formValidationError" style="margin-left: 5px;">{{ state.formValidationError }}</span>\n            </div>\n          </div>\n          \x3c!-- !actions --\x3e\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-cog" title-text=""></rd-widget-header>\n      <rd-widget-body>\n        <ul class="nav nav-pills nav-justified">\n          <li class="active interactive"><a data-target="#command" data-toggle="tab"></a></li>\n          <li class="interactive"><a data-target="#volumes" data-toggle="tab"></a></li>\n          <li class="interactive"><a data-target="#network" data-toggle="tab"></a></li>\n          <li class="interactive"><a data-target="#env" data-toggle="tab"></a></li>\n          <li class="interactive"><a data-target="#labels" data-toggle="tab"></a></li>\n          <li class="interactive"><a data-target="#restart-policy" data-toggle="tab"></a></li>\n          <li class="interactive"><a data-target="#runtime-resources" ng-click="refreshSlider()" data-toggle="tab"></a></li>\n          <li ng-if="areContainerCapabilitiesEnabled" class="interactive"><a data-target="#container-capabilities" data-toggle="tab">Capabilities</a></li>\n        </ul>\n        \x3c!-- tab-content --\x3e\n        <div class="tab-content">\n          \x3c!-- tab-command --\x3e\n          <div class="tab-pane active" id="command">\n            <form class="form-horizontal" style="margin-top: 15px;">\n              \x3c!-- command-input --\x3e\n              <div class="form-group">\n                <label for="container_command" class="col-sm-2 col-lg-1 control-label text-left"></label>\n                <div class="col-sm-9">\n                  <div class="input-group">\n                    <div class="input-group-btn">\n                      <button class="btn btn-primary" ng-model="formValues.CmdMode" uib-btn-radio="\'default\'" style="margin-left: 0px;"> </button>\n                      <button class="btn btn-primary" ng-model="formValues.CmdMode" uib-btn-radio="\'override\'"></button>\n                    </div>\n                    <input\n                      type="text"\n                      class="form-control"\n                      ng-model="config.Cmd"\n                      ng-disabled="formValues.CmdMode === \'default\'"\n                      id="container_command"\n                      placeholder=" \'-logtostderr\' \'--housekeeping_interval=5s\' or /usr/bin/nginx -t -c /mynginx.conf"\n                    />\n                  </div>\n                </div>\n              </div>\n              \x3c!-- !command-input --\x3e\n              \x3c!-- entrypoint-input --\x3e\n              <div class="form-group">\n                <label for="container_entrypoint" class="col-sm-2 col-lg-1 control-label text-left">\n                  \n                  <portainer-tooltip\n                    position="bottom"\n                    message=""\n                  ></portainer-tooltip>\n                </label>\n                <div class="col-sm-9">\n                  <div class="input-group">\n                    <div class="input-group-btn">\n                      <label class="btn btn-primary" ng-model="formValues.EntrypointMode" uib-btn-radio="\'default\'" style="margin-left: 0px;"> </label>\n                      <label class="btn btn-primary" ng-model="formValues.EntrypointMode" uib-btn-radio="\'override\'"></label>\n                    </div>\n                    <input\n                      type="text"\n                      class="form-control"\n                      ng-model="config.Entrypoint"\n                      ng-disabled="formValues.EntrypointMode === \'default\'"\n                      id="container_entrypoint"\n                      placeholder=" /bin/sh -c"\n                    />\n                  </div>\n                </div>\n              </div>\n              \x3c!-- !entrypoint-input --\x3e\n              \x3c!-- workdir-user-input --\x3e\n              <div class="form-group">\n                <label for="container_workingdir" class="col-sm-2 col-lg-1 control-label text-left"></label>\n                <div class="col-sm-4">\n                  <input type="text" class="form-control" ng-model="config.WorkingDir" id="container_workingdir" placeholder=" /myapp" />\n                </div>\n                <label for="container_user" class="col-sm-1 control-label text-left"></label>\n                <div class="col-sm-4">\n                  <input type="text" class="form-control" ng-model="config.User" id="container_user" placeholder=" nginx" />\n                </div>\n              </div>\n              \x3c!-- !workdir-user-input --\x3e\n              \x3c!-- console --\x3e\n              <div class="form-group">\n                <label for="container_console" class="col-sm-2 col-lg-1 control-label text-left"></label>\n                <div class="col-sm-10 col-lg-11">\n                  <div class="col-sm-4">\n                    <label class="radio-inline">\n                      <input type="radio" name="container_console" ng-model="formValues.Console" value="both" />\n                      Interactive & TTY <span class="small text-muted">(-i -t)</span>\n                    </label>\n                  </div>\n                  <div class="col-sm-4">\n                    <label class="radio-inline">\n                      <input type="radio" name="container_console" ng-model="formValues.Console" value="interactive" />\n                      Interactive <span class="small text-muted">(-i)</span>\n                    </label>\n                  </div>\n                </div>\n                <div class="col-sm-offset-2 col-sm-10 col-lg-offset-1 col-lg-11">\n                  <div class="col-sm-4">\n                    <label class="radio-inline">\n                      <input type="radio" name="container_console" ng-model="formValues.Console" value="tty" />\n                      TTY <span class="small text-muted">(-t)</span>\n                    </label>\n                  </div>\n                  <div class="col-sm-4">\n                    <label class="radio-inline">\n                      <input type="radio" name="container_console" ng-model="formValues.Console" value="none" />\n                      None\n                    </label>\n                  </div>\n                </div>\n              </div>\n              \x3c!-- !console --\x3e\n\n              <div class="col-sm-12 form-section-title">\n                Logging\n              </div>\n              \x3c!-- logging-driver --\x3e\n              <div class="form-group">\n                <label for="log-driver" class="col-sm-2 col-lg-1 control-label text-left"></label>\n                <div class="col-sm-4">\n                  <select class="form-control" ng-model="formValues.LogDriverName" id="log-driver">\n                    <option selected value=""></option>\n                    <option ng-repeat="driver in availableLoggingDrivers" ng-value="driver">{{ driver }}</option>\n                    <option value="none"></option>\n                  </select>\n                </div>\n                <div class="col-sm-5">\n                  <p class="small text-muted">\n                    docker\n                     <a href="https://docs.docker.com/engine/admin/logging/overview/#supported-logging-drivers" target="_blank">Docker</a>\n                  </p>\n                </div>\n              </div>\n              \x3c!-- !logging-driver --\x3e\n              \x3c!-- logging-opts --\x3e\n              <div class="form-group">\n                <div class="col-sm-12" style="margin-top: 5px;">\n                  <label class="control-label text-left">\n                    \n                    <portainer-tooltip\n                      position="top"\n                      message="nonedefault "\n                    ></portainer-tooltip>\n                  </label>\n                  <span\n                    class="label label-default interactive"\n                    style="margin-left: 10px;"\n                    ng-click="!formValues.LogDriverName || formValues.LogDriverName === \'none\' || addLogDriverOpt(formValues.LogDriverName)"\n                  >\n                    <i class="fa fa-plus-circle" aria-hidden="true"></i> \n                  </span>\n                </div>\n                \x3c!-- logging-opts-input-list --\x3e\n                <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n                  <div ng-repeat="opt in formValues.LogDriverOpts" style="margin-top: 2px;">\n                    <div class="input-group col-sm-5 input-group-sm">\n                      <span class="input-group-addon">option</span>\n                      <input type="text" class="form-control" ng-model="opt.name" placeholder=" FOO" />\n                    </div>\n                    <div class="input-group col-sm-5 input-group-sm">\n                      <span class="input-group-addon">value</span>\n                      <input type="text" class="form-control" ng-model="opt.value" placeholder=" bar" />\n                    </div>\n                    <button class="btn btn-sm btn-danger" type="button" ng-click="removeLogDriverOpt($index)">\n                      <i class="fa fa-trash" aria-hidden="true"></i>\n                    </button>\n                  </div>\n                </div>\n                \x3c!-- logging-opts-input-list --\x3e\n              </div>\n              \x3c!-- !logging-opts --\x3e\n            </form>\n          </div>\n          \x3c!-- !tab-command --\x3e\n          \x3c!-- tab-volume --\x3e\n          <div class="tab-pane" id="volumes">\n            <form class="form-horizontal" style="margin-top: 15px;">\n              \x3c!-- volumes --\x3e\n              <div class="form-group">\n                <div class="col-sm-12" style="margin-top: 5px;">\n                  <label class="control-label text-left"></label>\n                  <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addVolume()">\n                    <i class="fa fa-plus-circle" aria-hidden="true"></i> \n                  </span>\n                </div>\n                \x3c!-- volumes-input-list --\x3e\n                <div class="form-inline" style="margin-top: 10px;">\n                  <div ng-repeat="volume in formValues.Volumes">\n                    \x3c!-- volume-line1 --\x3e\n                    <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n                      \x3c!-- container-path --\x3e\n                      <div class="input-group input-group-sm col-sm-6">\n                        <span class="input-group-addon"></span>\n                        <input type="text" class="form-control" ng-model="volume.containerPath" placeholder=" /path/in/container" />\n                      </div>\n                      \x3c!-- !container-path --\x3e\n                      \x3c!-- volume-type --\x3e\n                      <div class="input-group col-sm-5" style="margin-left: 5px;">\n                        <div class="btn-group btn-group-sm" ng-if="allowBindMounts">\n                          <label class="btn btn-primary" ng-model="volume.type" uib-btn-radio="\'volume\'" ng-click="volume.name = \'\'"></label>\n                          <label class="btn btn-primary" ng-model="volume.type" uib-btn-radio="\'bind\'" ng-click="volume.name = \'\'"></label>\n                        </div>\n                        <button class="btn btn-sm btn-danger" type="button" ng-click="removeVolume($index)">\n                          <i class="fa fa-trash" aria-hidden="true"></i>\n                        </button>\n                      </div>\n                      \x3c!-- !volume-type --\x3e\n                    </div>\n                    \x3c!-- !volume-line1 --\x3e\n                    \x3c!-- volume-line2 --\x3e\n                    <div class="col-sm-12 form-inline" style="margin-top: 5px;">\n                      <i class="fa fa-long-arrow-alt-right" aria-hidden="true"></i>\n                      \x3c!-- volume --\x3e\n                      <div class="input-group input-group-sm col-sm-6" ng-if="volume.type === \'volume\'">\n                        <span class="input-group-addon"></span>\n                        <select class="form-control" ng-model="volume.name">\n                          <option selected disabled hidden value=""></option>\n                          <option ng-repeat="vol in availableVolumes" ng-value="vol.Name">{{ vol.Name | truncate: 30 }} - {{ vol.Driver | truncate: 30 }}</option>\n                        </select>\n                      </div>\n                      \x3c!-- !volume --\x3e\n                      \x3c!-- bind --\x3e\n                      <div class="input-group input-group-sm col-sm-6" ng-if="volume.type === \'bind\'">\n                        <span class="input-group-addon">host</span>\n                        <input type="text" class="form-control" ng-model="volume.name" placeholder=" /path/on/host" />\n                      </div>\n                      \x3c!-- !bind --\x3e\n                      \x3c!-- read-only --\x3e\n                      <div class="input-group input-group-sm col-sm-5" style="margin-left: 5px;">\n                        <div class="btn-group btn-group-sm">\n                          <label class="btn btn-primary" ng-model="volume.readOnly" uib-btn-radio="false"></label>\n                          <label class="btn btn-primary" ng-model="volume.readOnly" uib-btn-radio="true"></label>\n                        </div>\n                      </div>\n                      \x3c!-- !read-only --\x3e\n                    </div>\n                    \x3c!-- !volume-line2 --\x3e\n                  </div>\n                </div>\n                \x3c!-- !volumes-input-list --\x3e\n              </div>\n            </form>\n            \x3c!-- !volumes --\x3e\n          </div>\n          \x3c!-- !tab-volume --\x3e\n          \x3c!-- tab-network --\x3e\n          <div class="tab-pane" id="network">\n            <form class="form-horizontal" style="margin-top: 15px;">\n              <div class="form-group" ng-if="globalNetworkCount === 0 && applicationState.endpoint.mode.provider !== \'DOCKER_SWARM_MODE\'">\n                <div class="col-sm-12">\n                  <span class="small text-muted">You don\'t have any shared networks. Head over to the <a ui-sref="docker.networks">networks view</a> to create one.</span>\n                </div>\n              </div>\n              \x3c!-- network-input --\x3e\n              <div class="form-group">\n                <label for="container_network" class="col-sm-2 col-lg-1 control-label text-left"></label>\n                <div class="col-sm-9">\n                  <select\n                    class="form-control"\n                    ng-options="net.Name as net.Name for net in availableNetworks"\n                    ng-model="config.HostConfig.NetworkMode"\n                    id="container_network"\n                    ng-change="resetNetworkConfig()"\n                  >\n                    <option selected disabled hidden value=""></option>\n                  </select>\n                </div>\n              </div>\n              \x3c!-- !network-input --\x3e\n              \x3c!-- container-name-input --\x3e\n              <div class="form-group" ng-if="config.HostConfig.NetworkMode == \'container\'">\n                <label for="container_network_container" class="col-sm-2 col-lg-1 control-label text-left"></label>\n                <div class="col-sm-9">\n                  <select ng-options="container|containername for container in runningContainers" class="form-control" ng-model="formValues.NetworkContainer">\n                    <option selected disabled hidden value="">Select a container</option>\n                  </select>\n                </div>\n              </div>\n              \x3c!-- !container-name-input --\x3e\n              \x3c!-- hostname-input --\x3e\n              <div class="form-group">\n                <label for="container_hostname" class="col-sm-2 col-lg-1 control-label text-left"></label>\n                <div class="col-sm-9">\n                  <input type="text" class="form-control" ng-model="config.Hostname" id="container_hostname" placeholder=" web01" />\n                </div>\n              </div>\n              \x3c!-- !hostname-input --\x3e\n              \x3c!-- domainname-input --\x3e\n              <div class="form-group">\n                <label for="container_domainname" class="col-sm-2 col-lg-1 control-label text-left"></label>\n                <div class="col-sm-9">\n                  <input type="text" class="form-control" ng-model="config.Domainname" id="container_domainname" placeholder=" example.com" />\n                </div>\n              </div>\n              \x3c!-- !domainname --\x3e\n              \x3c!-- mac-address-input --\x3e\n              <div class="form-group">\n                <label for="container_macaddress" class="col-sm-2 col-lg-1 control-label text-left">Mac </label>\n                <div class="col-sm-9">\n                  <input type="text" class="form-control" ng-model="formValues.MacAddress" id="container_macaddress" placeholder=" 12-34-56-78-9a-bc" />\n                </div>\n              </div>\n              \x3c!-- !mac-address-input --\x3e\n              \x3c!-- ipv4-input --\x3e\n              <div class="form-group">\n                <label for="container_ipv4" class="col-sm-2 col-lg-1 control-label text-left">IPv4 </label>\n                <div class="col-sm-9">\n                  <input type="text" class="form-control" ng-model="formValues.IPv4" id="container_ipv4" placeholder=" 172.20.0.7" />\n                </div>\n              </div>\n              \x3c!-- !ipv4-input --\x3e\n              \x3c!-- ipv6-input --\x3e\n              <div class="form-group">\n                <label for="container_ipv6" class="col-sm-2 col-lg-1 control-label text-left">IPv6 </label>\n                <div class="col-sm-9">\n                  <input type="text" class="form-control" ng-model="formValues.IPv6" id="container_ipv6" placeholder=" a:b:c:d::1234" />\n                </div>\n              </div>\n              \x3c!-- !ipv6-input --\x3e\n              \x3c!-- dns-primary-input --\x3e\n              <div class="form-group">\n                <label for="container_dns_primary" class="col-sm-2 col-lg-1 control-label text-left"></label>\n                <div class="col-sm-9">\n                  <input type="text" class="form-control" ng-model="formValues.DnsPrimary" id="container_dns_primary" placeholder=" 1.1.1.1, 2606:4700:4700::1111" />\n                </div>\n              </div>\n              \x3c!-- !dns-primary-input --\x3e\n              \x3c!-- dns-secondary-input --\x3e\n              <div class="form-group">\n                <label for="container_dns_secondary" class="col-sm-2 col-lg-1 control-label text-left">DNS</label>\n                <div class="col-sm-9">\n                  <input type="text" class="form-control" ng-model="formValues.DnsSecondary" id="container_dns_secondary" placeholder=" 1.0.0.1, 2606:4700:4700::1001" />\n                </div>\n              </div>\n              \x3c!-- !dns-secondary-input --\x3e\n              \x3c!-- extra-hosts-variables --\x3e\n              <div class="form-group">\n                <div class="col-sm-12" style="margin-top: 5px;">\n                  <label class="control-label text-left"></label>\n                  <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addExtraHost()">\n                    <i class="fa fa-plus-circle" aria-hidden="true"></i> \n                  </span>\n                </div>\n                \x3c!-- extra-hosts-input-list --\x3e\n                <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n                  <div ng-repeat="variable in formValues.ExtraHosts" style="margin-top: 2px;">\n                    <div class="input-group col-sm-5 input-group-sm">\n                      <span class="input-group-addon">value</span>\n                      <input type="text" class="form-control" ng-model="variable.value" placeholder=" host:IP" />\n                    </div>\n                    <button class="btn btn-sm btn-danger" type="button" ng-click="removeExtraHost($index)">\n                      <i class="fa fa-trash" aria-hidden="true"></i>\n                    </button>\n                  </div>\n                </div>\n                \x3c!-- !extra-hosts-input-list --\x3e\n              </div>\n              \x3c!-- !extra-hosts-variables --\x3e\n            </form>\n          </div>\n          \x3c!-- !tab-network --\x3e\n          \x3c!-- tab-labels --\x3e\n          <div class="tab-pane" id="labels">\n            <form class="form-horizontal" style="margin-top: 15px;">\n              \x3c!-- labels --\x3e\n              <div class="form-group">\n                <div class="col-sm-12" style="margin-top: 5px;">\n                  <label class="control-label text-left"></label>\n                  <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addLabel()">\n                    <i class="fa fa-plus-circle" aria-hidden="true"></i> \n                  </span>\n                </div>\n                \x3c!-- labels-input-list --\x3e\n                <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n                  <div ng-repeat="label in formValues.Labels" style="margin-top: 2px;">\n                    <div class="input-group col-sm-5 input-group-sm">\n                      <span class="input-group-addon">name</span>\n                      <input type="text" class="form-control" ng-model="label.name" placeholder=" com.example.foo" />\n                    </div>\n                    <div class="input-group col-sm-5 input-group-sm">\n                      <span class="input-group-addon">value</span>\n                      <input type="text" class="form-control" ng-model="label.value" placeholder=" bar" />\n                    </div>\n                    <button class="btn btn-sm btn-danger" type="button" ng-click="removeLabel($index)">\n                      <i class="fa fa-trash" aria-hidden="true"></i>\n                    </button>\n                  </div>\n                </div>\n                \x3c!-- !labels-input-list --\x3e\n              </div>\n              \x3c!-- !labels--\x3e\n            </form>\n          </div>\n          \x3c!-- !tab-labels --\x3e\n          \x3c!-- tab-env --\x3e\n          <div class="tab-pane" id="env">\n            <form class="form-horizontal" style="margin-top: 15px;">\n              \x3c!-- environment-variables --\x3e\n              <div class="form-group">\n                <div class="col-sm-12" style="margin-top: 5px;">\n                  <label class="control-label text-left"></label>\n                  <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addEnvironmentVariable()">\n                    <i class="fa fa-plus-circle" aria-hidden="true"></i> \n                  </span>\n                </div>\n                \x3c!-- environment-variable-input-list --\x3e\n                <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n                  <div ng-repeat="variable in config.Env" style="margin-top: 2px;">\n                    <div class="input-group col-sm-5 input-group-sm">\n                      <span class="input-group-addon">name</span>\n                      <input type="text" class="form-control" ng-model="variable.name" placeholder=" FOO" />\n                    </div>\n                    <div class="input-group col-sm-5 input-group-sm">\n                      <span class="input-group-addon">value</span>\n                      <input type="text" class="form-control" ng-model="variable.value" placeholder=" bar" />\n                    </div>\n                    <button class="btn btn-sm btn-danger" type="button" ng-click="removeEnvironmentVariable($index)">\n                      <i class="fa fa-trash" aria-hidden="true"></i>\n                    </button>\n                  </div>\n                </div>\n                \x3c!-- !environment-variable-input-list --\x3e\n              </div>\n              \x3c!-- !environment-variables --\x3e\n            </form>\n          </div>\n          \x3c!-- !tab-labels --\x3e\n          \x3c!-- tab-restart-policy --\x3e\n          <div class="tab-pane" id="restart-policy">\n            <form class="form-horizontal" style="margin-top: 15px;">\n              <div class="form-group">\n                <div class="col-sm-12">\n                  <label class="control-label text-left">\n                    \n                  </label>\n                  <div class="btn-group btn-group-sm" style="margin-left: 20px;">\n                    <label class="btn btn-primary" ng-model="config.HostConfig.RestartPolicy.Name" uib-btn-radio="\'no\'">\n                      \n                    </label>\n                    <label class="btn btn-primary" ng-model="config.HostConfig.RestartPolicy.Name" uib-btn-radio="\'always\'">\n                      \n                    </label>\n                    <label class="btn btn-primary" ng-model="config.HostConfig.RestartPolicy.Name" uib-btn-radio="\'on-failure\'">\n                      \n                    </label>\n                    <label class="btn btn-primary" ng-model="config.HostConfig.RestartPolicy.Name" uib-btn-radio="\'unless-stopped\'">\n                      ,\n                    </label>\n                  </div>\n                </div>\n              </div>\n            </form>\n          </div>\n          \x3c!-- !tab-restart-policy --\x3e\n          \x3c!-- tab-runtime-resources --\x3e\n          <div class="tab-pane" id="runtime-resources">\n            <form class="form-horizontal" style="margin-top: 15px;">\n              <div class="col-sm-12 form-section-title">\n                Runtime\n              </div>\n              \x3c!-- privileged-mode --\x3e\n              <div class="form-group" ng-if="isAdmin || allowPrivilegedMode">\n                <div class="col-sm-12">\n                  <label for="privileged_mode" class="control-label text-left">\n                    \n                  </label>\n                  <label class="switch" style="margin-left: 20px;"> <input type="checkbox" name="privileged_mode" ng-model="config.HostConfig.Privileged" /><i></i> </label>\n                </div>\n              </div>\n              \x3c!-- !privileged-mode --\x3e\n              \x3c!-- init --\x3e\n              <div class="form-group" ng-if="applicationState.endpoint.apiVersion >= 1.37">\n                <div class="col-sm-12">\n                  <label for="init" class="control-label text-left">\n                    \n                  </label>\n                  <label class="switch" style="margin-left: 20px;"> <input type="checkbox" name="init" ng-model="config.HostConfig.Init" /><i></i> </label>\n                </div>\n              </div>\n              \x3c!-- !init --\x3e\n              \x3c!-- runtimes --\x3e\n              <div class="form-group">\n                <label for="container_runtime" class="col-sm-1 control-label text-left">Runtime</label>\n                <div class="col-sm-11">\n                  <select class="form-control" ng-model="config.HostConfig.Runtime" id="container_runtime" ng-options="runtime for runtime in availableRuntimes">\n                    <option selected value=""></option>\n                  </select>\n                </div>\n              </div>\n              \x3c!-- !runtimes --\x3e\n            </form>\n            <form class="form-horizontal" style="margin-top: 15px;">\n              \x3c!-- devices --\x3e\n              <div ng-if="showDeviceMapping" class="form-group">\n                <div class="col-sm-12" style="margin-top: 5px;">\n                  <label class="control-label text-left"></label>\n                  <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addDevice()">\n                    <i class="fa fa-plus-circle" aria-hidden="true"></i> \n                  </span>\n                </div>\n                \x3c!-- devices-input-list --\x3e\n                <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n                  <div ng-repeat="device in config.HostConfig.Devices" style="margin-top: 2px;">\n                    <div class="input-group col-sm-5 input-group-sm">\n                      <span class="input-group-addon">host</span>\n                      <input type="text" class="form-control" ng-model="device.pathOnHost" placeholder=" /dev/tty0" />\n                    </div>\n                    <div class="input-group col-sm-5 input-group-sm">\n                      <span class="input-group-addon"></span>\n                      <input type="text" class="form-control" ng-model="device.pathInContainer" placeholder=" /dev/tty0" />\n                    </div>\n                    <button class="btn btn-sm btn-danger" type="button" ng-click="removeDevice($index)">\n                      <i class="fa fa-trash" aria-hidden="true"></i>\n                    </button>\n                  </div>\n                </div>\n                \x3c!-- !devices-input-list --\x3e\n              </div>\n              \x3c!-- !devices--\x3e\n              <div class="col-sm-12 form-section-title">\n                Resources\n              </div>\n              \x3c!-- memory-reservation-input --\x3e\n              <div class="form-group">\n                <label for="memory-reservation" class="col-sm-3 col-lg-2 control-label text-left" style="margin-top: 20px;">\n                  \n                </label>\n                <div class="col-sm-3">\n                  <slider model="formValues.MemoryReservation" floor="0" ceil="state.sliderMaxMemory" step="256" ng-if="state.sliderMaxMemory"></slider>\n                </div>\n                <div class="col-sm-2">\n                  <input type="number" min="0" class="form-control" ng-model="formValues.MemoryReservation" id="memory-reservation" />\n                </div>\n                <div class="col-sm-4">\n                  <p class="small text-muted" style="margin-top: 7px;">\n                     (<b>MB</b>)\n                  </p>\n                </div>\n              </div>\n              \x3c!-- !memory-reservation-input --\x3e\n              \x3c!-- memory-limit-input --\x3e\n              <div class="form-group">\n                <label for="memory-limit" class="col-sm-3 col-lg-2 control-label text-left" style="margin-top: 20px;">\n                  \n                </label>\n                <div class="col-sm-3">\n                  <slider model="formValues.MemoryLimit" floor="0" ceil="state.sliderMaxMemory" step="256" ng-if="state.sliderMaxMemory"></slider>\n                </div>\n                <div class="col-sm-2">\n                  <input type="number" min="0" class="form-control" ng-model="formValues.MemoryLimit" id="memory-limit" />\n                </div>\n                <div class="col-sm-4">\n                  <p class="small text-muted" style="margin-top: 7px;">\n                     (<b>MB</b>)\n                  </p>\n                </div>\n              </div>\n              \x3c!-- !memory-limit-input --\x3e\n              \x3c!-- cpu-limit-input --\x3e\n              <div class="form-group">\n                <label for="cpu-limit" class="col-sm-3 col-lg-2 control-label text-left" style="margin-top: 20px;">\n                  CPU \n                </label>\n                <div class="col-sm-5">\n                  <slider model="formValues.CpuLimit" floor="0" ceil="state.sliderMaxCpu" step="0.25" precision="2" ng-if="state.sliderMaxCpu"></slider>\n                </div>\n                <div class="col-sm-4" style="margin-top: 20px;">\n                  <p class="small text-muted">\n                    CPU\n                  </p>\n                </div>\n              </div>\n              \x3c!-- !cpu-limit-input --\x3e\n            </form>\n          </div>\n          \x3c!-- !tab-runtime-resources --\x3e\n          \x3c!-- tab-container-capabilities --\x3e\n          <div class="tab-pane" id="container-capabilities">\n            <container-capabilities capabilities="formValues.capabilities"></container-capabilities>\n          </div>\n          \x3c!-- !tab-container-capabilities --\x3e\n        </div>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/containers/inspect/containerinspect.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text=""> </rd-header-title>\n  <rd-header-content>\n    <a ui-sref="docker.containers"></a> &gt; <a ui-sref="docker.containers.container({id: containerInfo.Id})">{{ containerInfo.Name | trimcontainername }}</a> &gt;\n    \n  </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-circle" title-text="">\n        <span class="btn-group btn-group-sm">\n          <label class="btn btn-primary" ng-model="state.DisplayTextView" uib-btn-radio="false"><i class="fa fa-code space-right" aria-hidden="true"></i></label>\n          <label class="btn btn-primary" ng-model="state.DisplayTextView" uib-btn-radio="true"><i class="fa fa-file-alt space-right" aria-hidden="true"></i></label>\n        </span>\n      </rd-widget-header>\n      <rd-widget-body>\n        <pre ng-show="state.DisplayTextView">{{ containerInfo | json: 4 }}</pre>\n        <json-tree ng-hide="state.DisplayTextView" object="containerInfo" root-name="containerInfo.Id" start-expanded="true"></json-tree>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/containers/logs/containerlogs.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text=""></rd-header-title>\n  <rd-header-content>\n    <a ui-sref="docker.containers"></a> &gt; <a ui-sref="docker.containers.container({id: container.Id})">{{ container.Name | trimcontainername }}</a> &gt; Logs\n  </rd-header-content>\n</rd-header>\n\n<log-viewer\n  data="logs"\n  ng-if="logs"\n  log-collection-change="changeLogCollection"\n  display-timestamps="state.displayTimestamps"\n  line-count="state.lineCount"\n  since-timestamp="state.sinceTimestamp"\n  resource-name="container.Name"\n></log-viewer>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/containers/stats/containerstats.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text=""></rd-header-title>\n  <rd-header-content>\n    <a ui-sref="docker.containers"></a> &gt; <a ui-sref="docker.containers.container({id: container.Id})">{{ container.Name | trimcontainername }}</a> &gt; Stats\n  </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-md-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-info-circle" title-text=""> </rd-widget-header>\n      <rd-widget-body>\n        <form class="form-horizontal">\n          <div class="form-group">\n            <div class="col-sm-12">\n              <span class="small text-muted">\n                 <b>{{ container.Name | trimcontainername }}</b> \n                container.\n              </span>\n            </div>\n          </div>\n          <div class="form-group">\n            <label for="refreshRate" class="col-sm-3 col-md-2 col-lg-2 margin-sm-top control-label text-left">\n              \n            </label>\n            <div class="col-sm-3 col-md-2">\n              <select id="refreshRate" ng-model="state.refreshRate" ng-change="changeUpdateRepeater()" class="form-control">\n                <option value="1">1s</option>\n                <option value="3">3s</option>\n                <option value="5">5s</option>\n                <option value="10">10s</option>\n                <option value="30">30s</option>\n                <option value="60">60s</option>\n              </select>\n            </div>\n            <span>\n              <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="margin-top: 7px; display: none;"></i>\n            </span>\n          </div>\n          <div class="form-group" ng-if="state.networkStatsUnavailable">\n            <div class="col-sm-12">\n              <span class="small text-muted"> <i class="fa fa-exclamation-triangle orange-icon" aria-hidden="true"></i> Network stats are unavailable for this container. </span>\n            </div>\n          </div>\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row">\n  <div ng-class="{ true: \'col-md-6 col-sm-12\', false: \'col-lg-4 col-md-6 col-sm-12\' }[state.networkStatsUnavailable]">\n    <rd-widget>\n      <rd-widget-header icon="fa-chart-area" title-text=""></rd-widget-header>\n      <rd-widget-body>\n        <div class="chart-container" style="position: relative;">\n          <canvas id="memoryChart" width="770" height="300"></canvas>\n        </div>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n  <div ng-class="{ true: \'col-md-6 col-sm-12\', false: \'col-lg-4 col-md-6 col-sm-12\' }[state.networkStatsUnavailable]">\n    <rd-widget>\n      <rd-widget-header icon="fa-chart-area" title-text="CPU"></rd-widget-header>\n      <rd-widget-body>\n        <div class="chart-container" style="position: relative;">\n          <canvas id="cpuChart" width="770" height="300"></canvas>\n        </div>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n  <div class="col-lg-4 col-md-12 col-sm-12" ng-if="!state.networkStatsUnavailable">\n    <rd-widget>\n      <rd-widget-header icon="fa-chart-area" title-text=""></rd-widget-header>\n      <rd-widget-body>\n        <div class="chart-container" style="position: relative;">\n          <canvas id="networkChart" width="770" height="300"></canvas>\n        </div>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n\n  <div class="col-sm-12">\n    <container-processes-datatable\n      title-text="Processes"\n      title-icon="fa-tasks"\n      dataset="processInfo.Processes"\n      headerset="processInfo.Titles"\n      table-key="container-processes"\n    ></container-processes-datatable>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/dashboard/dashboard.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text=""></rd-header-title>\n  <rd-header-content></rd-header-content>\n</rd-header>\n\n<div class="row" ng-if="applicationState.endpoint.mode.agentProxy && applicationState.endpoint.mode.provider === \'DOCKER_SWARM_MODE\'">\n  <div class="col-sm-12">\n    <dashboard-cluster-agent-info></dashboard-cluster-agent-info>\n  </div>\n</div>\n<information-panel-offline ng-if="offlineMode"></information-panel-offline>\n<information-panel\n  ng-if="\n    !applicationState.UI.dismissedInfoPanels[\'docker-dashboard-info-01\'] &&\n    !applicationState.endpoint.mode.agentProxy &&\n    applicationState.endpoint.mode.provider === \'DOCKER_SWARM_MODE\'\n  "\n  title-text="Information"\n  dismiss-action="dismissInformationPanel(\'docker-dashboard-info-01\')"\n>\n  <span class="small">\n    <p class="text-muted" ng-if="applicationState.endpoint.mode.role === \'MANAGER\'">\n      <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n      PortainerSwarm \n      <a href="http://portainer.readthedocs.io/en/stable/agent.html" target="_blank"></a> \n    </p>\n    <p class="text-muted" ng-if="applicationState.endpoint.mode.role === \'WORKER\'">\n      <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n      Portainer is connected to a worker node. Swarm management features will not be available.\n    </p>\n  </span>\n</information-panel>\n\n<div class="row" ng-if="(!applicationState.endpoint.mode.agentProxy || applicationState.endpoint.mode.provider !== \'DOCKER_SWARM_MODE\') && info && endpoint">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-tachometer-alt" title-text=">"></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <tbody>\n            <tr>\n              <td></td>\n              <td>\n                {{ endpoint.Name }}\n                <span class="small text-muted space-left">\n                  <i class="fa fa-microchip"></i> {{ endpoint.Snapshots[0].TotalCPU }} <i class="fa fa-memory space-left"></i> {{ endpoint.Snapshots[0].TotalMemory | humansize }}\n                </span>\n                <span class="small text-muted">\n                  - {{ info.Swarm && info.Swarm.NodeID !== \'\' ? \'Swarm\' : \'Standalone\' }} {{ info.ServerVersion }}\n                  <span ng-if="endpoint.Type === 2">+ <i class="fa fa-bolt" aria-hidden="true"></i> Agent</span></span\n                >\n              </td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ endpoint.URL | stripprotocol }}</td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ endpointTags }}</td>\n            </tr>\n            <tr ng-if="applicationState.endpoint.mode.provider === \'DOCKER_SWARM_MODE\' && applicationState.endpoint.mode.role === \'MANAGER\'">\n              <td colspan="2">\n                <div class="btn-group" role="group" aria-label="...">\n                  <a ui-sref="docker.swarm.visualizer"><i class="fa fa-object-group space-right" aria-hidden="true"></i>Go to cluster visualizer</a>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-12 col-md-6" ng-if="showStacks">\n    <a ui-sref="docker.stacks">\n      <rd-widget>\n        <rd-widget-body>\n          <div class="widget-icon blue pull-left">\n            <i class="fa fa-th-list"></i>\n          </div>\n          <div class="title">{{ stackCount }}</div>\n          <div class="comment">{{ stackCount === 1 ? \'Stack\' : \'\' }}</div>\n        </rd-widget-body>\n      </rd-widget>\n    </a>\n  </div>\n  <div class="col-xs-12 col-md-6" ng-if="applicationState.endpoint.mode.provider === \'DOCKER_SWARM_MODE\' && applicationState.endpoint.mode.role === \'MANAGER\'">\n    <a ui-sref="docker.services">\n      <rd-widget>\n        <rd-widget-body>\n          <div class="widget-icon blue pull-left">\n            <i class="fa fa-list-alt"></i>\n          </div>\n          <div class="title">{{ serviceCount }}</div>\n          <div class="comment">{{ serviceCount === 1 ? \'Service\' : \'Services\' }}</div>\n        </rd-widget-body>\n      </rd-widget>\n    </a>\n  </div>\n  <div class="col-xs-12 col-md-6" ng-if="containers">\n    <a ui-sref="docker.containers">\n      <rd-widget>\n        <rd-widget-body>\n          <div class="widget-icon blue pull-left">\n            <i class="fa fa-cubes"></i>\n          </div>\n          <div class="pull-right" style="padding-left: 5px;">\n            <div><i class="fa fa-power-off space-right green-icon"></i>{{ containers | runningcontainers }} </div>\n            <div><i class="fa fa-power-off space-right red-icon"></i>{{ containers | stoppedcontainers }} </div>\n          </div>\n          <div class="pull-right" style="padding-right: 5px;">\n            <div><i class="fa fa-heartbeat space-right green-icon"></i>{{ containers | healthycontainers }} </div>\n            <div><i class="fa fa-heartbeat space-right orange-icon"></i>{{ containers | unhealthycontainers }} </div>\n          </div>\n          <div class="title">{{ containers.length }}</div>\n          <div class="comment">{{ containers.length === 1 ? \'\' : \'\' }}</div>\n        </rd-widget-body>\n      </rd-widget>\n    </a>\n  </div>\n  <div class="col-xs-12 col-md-6" ng-if="images">\n    <a ui-sref="docker.images">\n      <rd-widget>\n        <rd-widget-body>\n          <div class="widget-icon blue pull-left">\n            <i class="fa fa-clone"></i>\n          </div>\n          <div class="pull-right">\n            <div><i class="fa fa-chart-pie space-right"></i>{{ images | imagestotalsize | humansize }}</div>\n          </div>\n          <div class="title">{{ images.length }}</div>\n          <div class="comment">{{ images.length === 1 ? \'\' : \'\' }}</div>\n        </rd-widget-body>\n      </rd-widget>\n    </a>\n  </div>\n  <div class="col-xs-12 col-md-6">\n    <a ui-sref="docker.volumes">\n      <rd-widget>\n        <rd-widget-body>\n          <div class="widget-icon blue pull-left">\n            <i class="fa fa-hdd"></i>\n          </div>\n          <div class="title">{{ volumeCount }}</div>\n          <div class="comment">{{ volumeCount === 1 ? \'\' : \'\' }}</div>\n        </rd-widget-body>\n      </rd-widget>\n    </a>\n  </div>\n  <div class="col-xs-12 col-md-6">\n    <a ui-sref="docker.networks">\n      <rd-widget>\n        <rd-widget-body>\n          <div class="widget-icon blue pull-left">\n            <i class="fa fa-sitemap"></i>\n          </div>\n          <div class="title">{{ networkCount }}</div>\n          <div class="comment">{{ networkCount === 1 ? \'Network\' : \'\' }}</div>\n        </rd-widget-body>\n      </rd-widget>\n    </a>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/events/events.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="">\n    <a data-toggle="tooltip" title="" ui-sref="docker.events" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content></rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <events-datatable title-text="" title-icon="fa-history" dataset="events" table-key="events" order-by="Time" reverse-order="true"></events-datatable>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/images/images.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="">\n    <a data-toggle="tooltip" title="" ui-sref="docker.images" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content></rd-header-content>\n</rd-header>\n\n<div class="row" ng-if="!offlineMode" authorization="DockerImageCreate">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-download" title-text=" "> </rd-widget-header>\n      <rd-widget-body>\n        <form class="form-horizontal">\n          \x3c!-- image-and-registry --\x3e\n          <por-image-registry model="formValues.RegistryModel" auto-complete="true" pull-warning="true" label-class="col-sm-1" input-class="col-sm-11"></por-image-registry>\n          \x3c!-- !image-and-registry --\x3e\n          <div ng-if="applicationState.endpoint.mode.agentProxy && applicationState.endpoint.mode.provider === \'DOCKER_SWARM_MODE\'">\n            <div class="col-sm-12 form-section-title">\n              Deployment\n            </div>\n            \x3c!-- node-selection --\x3e\n            <node-selector model="formValues.NodeName"> </node-selector>\n            \x3c!-- !node-selection --\x3e\n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button\n                type="button"\n                class="btn btn-primary btn-sm"\n                ng-disabled="state.actionInProgress || !formValues.RegistryModel.Image"\n                ng-click="pullImage()"\n                button-spinner="state.actionInProgress"\n              >\n                <span ng-hide="state.actionInProgress"></span>\n                <span ng-show="state.actionInProgress">Download in progress...</span>\n              </button>\n            </div>\n          </div>\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n<information-panel-offline ng-if="offlineMode"></information-panel-offline>\n<div class="row">\n  <div class="col-sm-12">\n    <images-datatable\n      title-text=""\n      title-icon="fa-clone"\n      dataset="images"\n      table-key="images"\n      order-by="RepoTags"\n      show-host-column="applicationState.endpoint.mode.agentProxy && applicationState.endpoint.mode.provider === \'DOCKER_SWARM_MODE\'"\n      download-action="downloadAction"\n      remove-action="removeAction"\n      force-remove-action="confirmRemovalAction"\n      export-in-progress="state.exportInProgress"\n      offline-mode="offlineMode"\n      refresh-callback="getImages"\n    ></images-datatable>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/images/edit/image.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text=""></rd-header-title>\n  <rd-header-content>\n    <a ui-sref="docker.images"></a> &gt; <a ui-sref="docker.images.image({id: image.Id})">{{ image.Id }}</a>\n  </rd-header-content>\n</rd-header>\n\n<div class="row" ng-if="image.RepoTags.length > 0">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa fa-tags" title-text=""></rd-widget-header>\n      <rd-widget-body>\n        <form class="form-horizontal">\n          <div class="form-group">\n            <div class="row">\n              <div class="pull-left" ng-repeat="tag in image.RepoTags" style="display: table;">\n                <div class="input-group col-md-1" style="padding: 0 15px;">\n                  <span class="input-group-addon">{{ tag }}</span>\n                  <span class="input-group-btn" authorization="DockerImagePush, DockerImageCreate, DockerImageDelete">\n                    <a data-toggle="tooltip" class="btn btn-primary interactive" title="Push to registry" ng-click="pushTag(tag)" authorization="DockerImagePush">\n                      <span class="fa fa-upload white-icon" aria-hidden="true"></span>\n                    </a>\n                    <a data-toggle="tooltip" class="btn btn-primary interactive" title="Pull from registry" ng-click="pullTag(tag)" authorization="DockerImageCreate">\n                      <span class="fa fa-download white-icon" aria-hidden="true"></span>\n                    </a>\n                    <a data-toggle="tooltip" class="btn btn-primary interactive" title="Remove tag" ng-click="removeTag(tag)" authorization="DockerImageDelete">\n                      <span class="fa fa-trash-alt white-icon" aria-hidden="true"></span>\n                    </a>\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <span class="small text-muted">\n                 <span class="fa fa-upload" aria-hidden="true"></span> \n                <span class="fa fa-download" aria-hidden="true"></span>  <span class="fa fa-trash-alt" aria-hidden="true"></span> \n                \n              </span>\n            </div>\n            <div class="col-sm-12">\n              <span id="downloadResourceHint" class="createResource" style="display: none; margin-left: 0;">\n                Download in progress...\n                <i class="fa fa-circle-notch fa-spin" aria-hidden="true" style="margin-left: 2px;"></i>\n              </span>\n              <span id="uploadResourceHint" class="createResource" style="display: none; margin-left: 0;">\n                ...\n                <i class="fa fa-circle-notch fa-spin" aria-hidden="true" style="margin-left: 2px;"></i>\n              </span>\n            </div>\n          </div>\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row" authorization="DockerImageCreate">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-tag" title-text=""></rd-widget-header>\n      <rd-widget-body>\n        <form class="form-horizontal">\n          \x3c!-- image-and-registry --\x3e\n          <por-image-registry model="formValues.RegistryModel" label-class="col-sm-1" input-class="col-sm-11"></por-image-registry>\n          \x3c!-- !image-and-registry --\x3e\n          \x3c!-- tag-note --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <span class="small text-muted"> <span class="label label-default">latest</span> </span>\n            </div>\n          </div>\n          \x3c!-- !tag-note --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button type="button" class="btn btn-primary btn-sm" ng-disabled="!formValues.RegistryModel.Image" ng-click="tagImage()"></button>\n            </div>\n          </div>\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-clone" title-text=""></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <tbody>\n            <tr>\n              <td>ID</td>\n              <td>\n                {{ image.Id }}\n                <button authorization="DockerImageDelete" class="btn btn-xs btn-danger" ng-click="removeImage(image.Id)"\n                  ><i class="fa fa-trash-alt space-right" aria-hidden="true"></i></button\n                >\n                <button\n                  authorization="DockerImageGet"\n                  class="btn btn-xs btn-primary"\n                  ng-click="exportImage(image)"\n                  button-spinner="$ctrl.exportInProgress"\n                  ng-disabled="state.exportInProgress"\n                >\n                  <i class="fa fa-download space-right" aria-hidden="true"></i>\n                  <span ng-hide="state.exportInProgress"></span>\n                  <span ng-show="state.exportInProgress">Export in progress...</span>\n                </button>\n              </td>\n            </tr>\n            <tr ng-if="image.Parent">\n              <td>Parent</td>\n              <td\n                ><a ui-sref="docker.images.image({id: image.Parent})">{{ image.Parent }}</a></td\n              >\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ image.VirtualSize | humansize }}</td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ image.Created | getisodate }}</td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>Docker {{ image.DockerVersion }} on {{ image.Os }}, {{ image.Architecture }}</td>\n            </tr>\n            <tr ng-if="image.Author">\n              <td>Author</td>\n              <td>{{ image.Author }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-clone" title-text="Dockerfile "></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <tbody>\n            <tr>\n              <td>CMD</td>\n              <td\n                ><code>{{ image.Command | command }}</code></td\n              >\n            </tr>\n            <tr ng-if="image.Entrypoint">\n              <td></td>\n              <td\n                ><code>{{ image.Entrypoint | command }}</code></td\n              >\n            </tr>\n            <tr ng-if="image.ExposedPorts.length > 0">\n              <td></td>\n              <td>\n                <span class="label label-default space-right" ng-repeat="port in image.ExposedPorts">\n                  {{ port }}\n                </span>\n              </td>\n            </tr>\n            <tr ng-if="image.Volumes.length > 0">\n              <td></td>\n              <td>\n                <span class="label label-default space-right" ng-repeat="volume in image.Volumes">\n                  {{ volume }}\n                </span>\n              </td>\n            </tr>\n            <tr ng-if="image.Env.length > 0">\n              <td>ENV</td>\n              <td>\n                <table class="table table-bordered table-condensed">\n                  <tr ng-repeat="var in image.Env">\n                    <td>{{ var|key: \'=\' }}</td>\n                    <td>{{ var|value: \'=\' }}</td>\n                  </tr>\n                </table>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n<div class="row" ng-if="history.length > 0">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-clone" title-text=""></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table id="image-layers" class="table">\n          <thead>\n            <th style="white-space: nowrap;">\n              <a ng-click="order(\'Order\')">\n                Order\n                <span ng-show="sortType == \'Order\' && !sortReverse" class="glyphicon glyphicon-chevron-down"></span>\n                <span ng-show="sortType == \'Order\' && sortReverse" class="glyphicon glyphicon-chevron-up"></span>\n              </a>\n            </th>\n            <th>\n              <a ng-click="order(\'Size\')">\n                Size\n                <span ng-show="sortType == \'Size\' && !sortReverse" class="glyphicon glyphicon-chevron-down"></span>\n                <span ng-show="sortType == \'Size\' && sortReverse" class="glyphicon glyphicon-chevron-up"></span>\n              </a>\n            </th>\n            <th>\n              <a ng-click="order(\'CreatedBy\')">\n                Layer\n                <span ng-show="sortType == \'CreatedBy\' && !sortReverse" class="glyphicon glyphicon-chevron-down"></span>\n                <span ng-show="sortType == \'CreatedBy\' && sortReverse" class="glyphicon glyphicon-chevron-up"></span>\n              </a>\n            </th>\n          </thead>\n          <tbody>\n            <tr ng-repeat="layer in history | orderBy:sortType:sortReverse">\n              <td style="white-space: nowrap;">\n                {{ layer.Order }}\n              </td>\n              <td style="white-space: nowrap;">\n                {{ layer.Size | humansize }}\n              </td>\n              <td class="expand">\n                <div ng-if="layer.CreatedBy.length > 130">\n                  <span id="layer-command-{{ $index }}-full" style="display: none;">\n                    {{ layer.CreatedBy | imagelayercommand }}\n                  </span>\n                  <span id="layer-command-{{ $index }}-short">\n                    {{ layer.CreatedBy | imagelayercommand | truncate: 130 }}\n                    <span ng-if="layer.CreatedBy.length > 130" style="margin-left: 5px;">\n                      <a id="layer-command-expander{{ $index }}" class="btn" ng-click="toggleLayerCommand($index)">\n                        <i class="fa fa-plus-circle" aria-hidden="true"></i>\n                      </a>\n                    </span>\n                  </span>\n                </div>\n                <div ng-if="layer.CreatedBy.length <= 130">\n                  <span id="layer-command-{{ $index }}-full">\n                    {{ layer.CreatedBy | imagelayercommand }}\n                  </span>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/images/build/buildimage.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text=""></rd-header-title>\n  <rd-header-content> <a ui-sref="docker.images"></a> &gt;  </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-body>\n        <uib-tabset active="state.activeTab">\n          <uib-tab index="0">\n            <uib-tab-heading> <i class="fa fa-wrench space-right" aria-hidden="true"></i> Builder </uib-tab-heading>\n            <form class="form-horizontal">\n              <div class="col-sm-12 form-section-title">\n                Naming\n              </div>\n              \x3c!-- names --\x3e\n              <div class="form-group">\n                <span class="col-sm-12 text-muted small">\n                  \n                </span>\n              </div>\n              <div class="form-group">\n                <div class="col-sm-12">\n                  <label class="control-label text-left"></label>\n                  <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addImageName()">\n                    <i class="fa fa-plus-circle" aria-hidden="true"></i> \n                  </span>\n                </div>\n              </div>\n              \x3c!-- !names --\x3e\n              <div class="form-group" ng-if="formValues.ImageNames.length === 0">\n                <span class="col-sm-12 text-danger small">\n                  <i class="fa fa-exclamation-triangle space-right" aria-hidden="true"></i>You must specify at least one name for the image.\n                </span>\n              </div>\n              \x3c!-- name-input-list --\x3e\n              <div ng-if="formValues.ImageNames.length > 0">\n                <div class="form-group">\n                  <span class="col-sm-12 text-muted small">\n                     <code>name:tag</code>, <code>repository/name:tag</code> \n                    <code>registryfqdn:port/repository/name:tag</code>   <b>latest</b> \n                  </span>\n                </div>\n                <div class="form-group">\n                  <div class="col-sm-12">\n                    <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n                      <div ng-repeat="item in formValues.ImageNames track by $index" style="margin-top: 2px;">\n                        \x3c!-- name-input --\x3e\n                        <div class="input-group col-sm-5 input-group-sm">\n                          <span class="input-group-addon">name</span>\n                          <input type="text" class="form-control" ng-model="item.Name" placeholder=" myImage:myTag" auto-focus />\n                          <span class="input-group-addon"\n                            ><i ng-class="{ true: \'fa fa-check green-icon\', false: \'fa fa-times red-icon\' }[item.Name !== \'\']" aria-hidden="true"></i\n                          ></span>\n                        </div>\n                        \x3c!-- !name-input --\x3e\n                        \x3c!-- actions --\x3e\n                        <div class="input-group col-sm-2 input-group-sm">\n                          <button class="btn btn-sm btn-danger" type="button" ng-click="removeImageName($index)">\n                            <i class="fa fa-trash" aria-hidden="true"></i>\n                          </button>\n                        </div>\n                        \x3c!-- !actions --\x3e\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              \x3c!-- !name-input-list --\x3e\n              \x3c!-- build-method --\x3e\n              <div class="col-sm-12 form-section-title">\n                \n              </div>\n              <div class="form-group"></div>\n              <div class="form-group" style="margin-bottom: 0;">\n                <div class="boxselector_wrapper">\n                  <div>\n                    <input type="radio" id="method_editor" ng-model="state.BuildType" value="editor" ng-click="toggleEditor()" />\n                    <label for="method_editor">\n                      <div class="boxselector_header">\n                        <i class="fa fa-edit" aria-hidden="true" style="margin-right: 2px;"></i>\n                        \n                      </div>\n                      <p></p>\n                    </label>\n                  </div>\n                  <div>\n                    <input type="radio" id="method_upload" ng-model="state.BuildType" value="upload" ng-click="saveEditorContent()" />\n                    <label for="method_upload">\n                      <div class="boxselector_header">\n                        <i class="fa fa-upload" aria-hidden="true" style="margin-right: 2px;"></i>\n                        \n                      </div>\n                      <p>tarballDockerfile</p>\n                    </label>\n                  </div>\n                  <div>\n                    <input type="radio" id="method_url" ng-model="state.BuildType" value="url" ng-click="saveEditorContent()" />\n                    <label for="method_url">\n                      <div class="boxselector_header">\n                        <i class="fa fa-globe" aria-hidden="true" style="margin-right: 2px;"></i>\n                        URL\n                      </div>\n                      <p>URL</p>\n                    </label>\n                  </div>\n                </div>\n              </div>\n              \x3c!-- !build-method --\x3e\n              \x3c!-- web-editor --\x3e\n              <div ng-show="state.BuildType === \'editor\'">\n                <div class="col-sm-12 form-section-title">\n                  \n                </div>\n                <div class="form-group">\n                  <span class="col-sm-12 text-muted small">\n                    Dockerfile\n                    <a href="https://docs.docker.com/engine/reference/builder/" target="_blank"></a>.\n                  </span>\n                </div>\n                <div class="form-group">\n                  <div class="col-sm-12">\n                    <code-editor\n                      identifier="image-build-editor"\n                      placeholder="Dockerfile"\n                      yml="false"\n                      on-change="(editorUpdate)"\n                    ></code-editor>\n                  </div>\n                </div>\n              </div>\n              \x3c!-- !web-editor --\x3e\n              \x3c!-- upload --\x3e\n              <div ng-show="state.BuildType === \'upload\'">\n                <div class="col-sm-12 form-section-title">\n                  \n                </div>\n                <div class="form-group">\n                  <span class="col-sm-12 text-muted small">\n                    DockerfileDockerfiletar tarball\n                    context.\n                  </span>\n                </div>\n                <div class="form-group">\n                  <div class="col-sm-12">\n                    <button class="btn btn-sm btn-primary" ngf-select ngf-min-size="10" ng-model="formValues.UploadFile"></button>\n                    <span style="margin-left: 5px;">\n                      {{ formValues.UploadFile.name }}\n                      <i class="fa fa-times red-icon" ng-if="!formValues.UploadFile" aria-hidden="true"></i>\n                    </span>\n                  </div>\n                </div>\n                <div ng-if="formValues.UploadFile.type === \'application/gzip\' || formValues.UploadFile.type === \'application/x-tar\'">\n                  <div class="form-group">\n                    <span class="col-sm-12 text-muted small">\n                      Indicate the path to the Dockerfile within the tarball.\n                    </span>\n                  </div>\n                  <div class="form-group">\n                    <label for="image_path" class="col-sm-2 control-label text-left">Dockerfile path</label>\n                    <div class="col-sm-10">\n                      <input type="text" class="form-control" ng-model="formValues.Path" id="image_path" placeholder="Dockerfile" />\n                    </div>\n                  </div>\n                </div>\n              </div>\n              \x3c!-- !upload --\x3e\n              \x3c!-- url --\x3e\n              <div ng-show="state.BuildType === \'url\'">\n                <div class="col-sm-12 form-section-title">\n                  URL\n                </div>\n                <div class="form-group">\n                  <span class="col-sm-12 text-muted small">\n                    DockerfiletarballGitURL<b>.git </b> tarballGitURL\n                    \n                  </span>\n                </div>\n                <div class="form-group">\n                  <label for="image_url" class="col-sm-2 control-label text-left">URL</label>\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control" ng-model="formValues.URL" id="image_url" placeholder="https://myhost.mydomain/myimage.tar.gz" />\n                  </div>\n                </div>\n                <div class="form-group">\n                  <span class="col-sm-12 text-muted small">\n                    tarball/repository DockerfileDockerfile\n                  </span>\n                </div>\n                <div class="form-group">\n                  <label for="image_path" class="col-sm-2 control-label text-left">Dockerfile </label>\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control" ng-model="formValues.Path" id="image_path" placeholder="Dockerfile" />\n                  </div>\n                </div>\n              </div>\n              \x3c!-- !url --\x3e\n              <div ng-if="applicationState.endpoint.mode.agentProxy && applicationState.endpoint.mode.provider === \'DOCKER_SWARM_MODE\'">\n                <div class="col-sm-12 form-section-title">\n                  Deployment\n                </div>\n                \x3c!-- node-selection --\x3e\n                <node-selector model="formValues.NodeName"> </node-selector>\n                \x3c!-- !node-selection --\x3e\n              </div>\n              \x3c!-- actions --\x3e\n              <div class="col-sm-12 form-section-title">\n                \n              </div>\n              <div class="form-group">\n                <div class="col-sm-12">\n                  <button\n                    type="button"\n                    class="btn btn-primary btn-sm"\n                    ng-disabled="state.actionInProgress\n                    || (state.BuildType === \'upload\' && (!formValues.UploadFile || !formValues.Path))\n                    || (state.BuildType === \'url\' && (!formValues.URL || !formValues.Path))\n                    || (formValues.ImageNames.length === 0 || !validImageNames())"\n                    ng-click="buildImage()"\n                    button-spinner="state.actionInProgress"\n                  >\n                    <span ng-hide="state.actionInProgress"></span>\n                    <span ng-show="state.actionInProgress">Image building in progress...</span>\n                  </button>\n                  <span class="text-danger" ng-if="state.formValidationError" style="margin-left: 5px;">{{ state.formValidationError }}</span>\n                </div>\n              </div>\n              \x3c!-- !actions --\x3e\n            </form>\n          </uib-tab>\n          <uib-tab index="1" disable="!buildLogs">\n            <uib-tab-heading> <i class="fa fa-file-alt space-right" aria-hidden="true"></i> Output </uib-tab-heading>\n            <pre class="log_viewer">\n              <div ng-repeat="line in buildLogs track by $index" class="line"><p class="inner_line" ng-click="active=!active" ng-class="{\'line_selected\': active}">{{ line }}</p></div>\n              <div ng-if="!buildLogs.length" class="line"><p class="inner_line">No build output available.</p></div>\n            </pre>\n          </uib-tab>\n        </uib-tabset>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/images/import/importimage.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text=""></rd-header-title>\n  <rd-header-content> <a ui-sref="docker.images"></a> &gt;  </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-body>\n        <form class="form-horizontal">\n          \x3c!-- upload --\x3e\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          <div class="form-group">\n            <span class="col-sm-12 text-muted small">\n              You can upload a tar archive containing your images.\n            </span>\n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button class="btn btn-sm btn-primary" ngf-select ngf-min-size="10" ngf-accept="\'application/x-tar,application/x-gzip\'" ng-model="formValues.UploadFile"\n                ></button\n              >\n              <span style="margin-left: 5px;">\n                {{ formValues.UploadFile.name }}\n                <i class="fa fa-times red-icon" ng-if="!formValues.UploadFile" aria-hidden="true"></i>\n              </span>\n            </div>\n          </div>\n          \x3c!-- !upload --\x3e\n          <div ng-if="applicationState.endpoint.mode.agentProxy && applicationState.endpoint.mode.provider === \'DOCKER_SWARM_MODE\'">\n            <div class="col-sm-12 form-section-title">\n              Deployment\n            </div>\n            \x3c!-- node-selection --\x3e\n            <node-selector model="formValues.NodeName"> </node-selector>\n            \x3c!-- !node-selection --\x3e\n          </div>\n          \x3c!-- actions --\x3e\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button\n                type="button"\n                class="btn btn-primary btn-sm"\n                ng-disabled="state.actionInProgress || !formValues.UploadFile"\n                ng-click="uploadImage()"\n                button-spinner="state.actionInProgress"\n              >\n                <span ng-hide="state.actionInProgress">Upload</span>\n                <span ng-show="state.actionInProgress">...</span>\n              </button>\n              <span class="text-danger" ng-if="state.formValidationError" style="margin-left: 5px;">{{ state.formValidationError }}</span>\n            </div>\n          </div>\n          \x3c!-- !actions --\x3e\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/networks/networks.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="">\n    <a data-toggle="tooltip" title="" ui-sref="docker.networks" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content>Networks</rd-header-content>\n</rd-header>\n<information-panel-offline ng-if="offlineMode"></information-panel-offline>\n<div class="row">\n  <div class="col-sm-12">\n    <networks-datatable\n      title-text=""\n      title-icon="fa-sitemap"\n      dataset="networks"\n      table-key="networks"\n      order-by="Name"\n      remove-action="removeAction"\n      show-host-column="applicationState.endpoint.mode.agentProxy && applicationState.endpoint.mode.provider === \'DOCKER_SWARM_MODE\'"\n      offline-mode="offlineMode"\n      refresh-callback="getNetworks"\n    ></networks-datatable>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/networks/edit/network.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text=""></rd-header-title>\n  <rd-header-content>\n    <a ui-sref="docker.networks">Networks</a> &gt; <a ui-sref="docker.networks.network({id: network.Id})">{{ network.Name }}</a>\n  </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-sitemap" title-text=""></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <tbody>\n            <tr>\n              <td></td>\n              <td>{{ network.Name }}</td>\n            </tr>\n            <tr>\n              <td>ID</td>\n              <td>\n                {{ network.Id }}\n                <button authorization="DockerNetworkDelete" ng-if="allowRemove()" class="btn btn-xs btn-danger" ng-click="removeNetwork(network.Id)"\n                  ><i class="fa fa-trash-alt space-right" aria-hidden="true"></i>Delete this network</button\n                >\n              </td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ network.Driver }}</td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ network.Scope }}</td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ network.Attachable }}</td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ network.Internal }}</td>\n            </tr>\n            <tr ng-if="network.IPAM.IPV4Configs.length > 0" ng-repeat-start="config in network.IPAM.IPV4Configs">\n              <td>IPV4  - {{ config.Subnet }}</td>\n              <td>IPV4  - {{ config.Gateway }}</td>\n            </tr>\n            <tr ng-if="network.IPAM.IPV4Configs.length > 0" ng-repeat-end>\n              <td>IPV4 IP  - {{ config.IPRange }}</td>\n              <td\n                >IPV4  IP<span ng-repeat="auxAddress in config.AuxiliaryAddresses"> - {{ auxAddress }}</span></td\n              >\n            </tr>\n            <tr ng-if="network.IPAM.IPV6Configs.length > 0" ng-repeat-start="config in network.IPAM.IPV6Configs">\n              <td>IPV6 Subnet - {{ config.Subnet }}</td>\n              <td>IPV6 Gateway - {{ config.Gateway }}</td>\n            </tr>\n            <tr ng-if="network.IPAM.IPV6Configs.length > 0" ng-repeat-end>\n              <td>IPV6 IP  - {{ config.IPRange }}</td>\n              <td\n                >IPV6  IP<span ng-repeat="auxAddress in config.AuxiliaryAddresses"> - {{ auxAddress }}</span></td\n              >\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n\x3c!-- access-control-panel --\x3e\n<por-access-control-panel\n  ng-if="network"\n  resource-id="network.Id"\n  resource-control="network.ResourceControl"\n  resource-type="\'network\'"\n  disable-ownership-change="isSystemNetwork()"\n>\n</por-access-control-panel>\n\x3c!-- !access-control-panel --\x3e\n\n<div class="row" ng-if="!(network.Options | emptyobject)">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-cogs" title-text=""></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <tbody>\n            <tr ng-repeat="(key, value) in network.Options">\n              <td>{{ key }}</td>\n              <td>{{ value }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row" ng-if="containersInNetwork.length > 0">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-server" title-text=""></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <thead>\n            <th></th>\n            <th>IPv4 </th>\n            <th>IPv6 </th>\n            <th>Mac </th>\n            <th authorization="DockerNetworkDisconnect"></th>\n          </thead>\n          <tbody>\n            <tr ng-repeat="container in containersInNetwork">\n              <td\n                ><a ui-sref="docker.containers.container({ id: container.Id, nodeName: nodeName })">{{ container.Name }}</a></td\n              >\n              <td>{{ container.IPv4Address || \'-\' }}</td>\n              <td>{{ container.IPv6Address || \'-\' }}</td>\n              <td>{{ container.MacAddress || \'-\' }}</td>\n              <td authorization="DockerNetworkDisconnect">\n                <button type="button" class="btn btn-xs btn-danger" ng-click="containerLeaveNetwork(network, container)"\n                  ><i class="fa fa-trash-alt space-right" aria-hidden="true"></i></button\n                >\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/networks/create/createnetwork.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text=""></rd-header-title>\n  <rd-header-content> <a ui-sref="docker.networks"></a> &gt;  </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-body>\n        <form class="form-horizontal" name="networkCreationForm">\n          \x3c!-- name-input --\x3e\n          <div class="form-group">\n            <label for="network_name" class="col-sm-2 col-lg-1 control-label text-left"></label>\n            <div class="col-sm-10 col-lg-11">\n              <input type="text" class="form-control" ng-model="config.Name" id="network_name" placeholder=" myNetwork" />\n            </div>\n          </div>\n          \x3c!-- !name-input --\x3e\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          \x3c!-- driver-input --\x3e\n          <div class="form-group">\n            <label for="network_driver" class="col-sm-2 col-lg-1 control-label text-left"></label>\n            <div class="col-sm-10 col-lg-11">\n              <select class="form-control" ng-options="driver for driver in availableNetworkDrivers" ng-model="config.Driver" ng-if="availableNetworkDrivers.length > 0">\n                <option disabled hidden value="">Select a driver</option>\n              </select>\n              <input type="text" class="form-control" ng-model="config.Driver" id="network_driver" placeholder=" driverName" ng-if="availableNetworkDrivers.length === 0" />\n            </div>\n          </div>\n          \x3c!-- !driver-input --\x3e\n          \x3c!-- driver-options --\x3e\n          <div class="form-group">\n            <div class="col-sm-12" style="margin-top: 5px;">\n              <label class="control-label text-left">\n                \n                <portainer-tooltip\n                  position="bottom"\n                  message=""\n                ></portainer-tooltip>\n              </label>\n              <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addDriverOption()">\n                <i class="fa fa-plus-circle" aria-hidden="true"></i> \n              </span>\n            </div>\n            \x3c!-- driver-options-input-list --\x3e\n            <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n              <div ng-repeat="option in formValues.DriverOptions" style="margin-top: 2px;">\n                <div class="input-group col-sm-5 input-group-sm">\n                  <span class="input-group-addon">name</span>\n                  <input type="text" class="form-control" ng-model="option.name" placeholder=" com.docker.network.bridge.enable_icc" />\n                </div>\n                <div class="input-group col-sm-5 input-group-sm">\n                  <span class="input-group-addon">value</span>\n                  <input type="text" class="form-control" ng-model="option.value" placeholder=" true" />\n                </div>\n                <button class="btn btn-sm btn-danger" type="button" ng-click="removeDriverOption($index)">\n                  <i class="fa fa-trash" aria-hidden="true"></i>\n                </button>\n              </div>\n            </div>\n            \x3c!-- !driver-options-input-list --\x3e\n          </div>\n          \x3c!-- !driver-options --\x3e\n          \x3c!-- macvlan-management --\x3e\n          <network-macvlan-form ng-show="config.Driver === \'macvlan\'" data="formValues.Macvlan" application-state="applicationState"></network-macvlan-form>\n          \x3c!-- !macvlan-management --\x3e\n          <div ng-hide="config.Driver === \'macvlan\' && formValues.Macvlan.Scope === \'swarm\'">\n            <div class="col-sm-12 form-section-title">\n              IPV4 \n            </div>\n            \x3c!-- -gateway-inputs --\x3e\n            <div class="form-group">\n              <label for="ipv4_network_subnet" class="col-sm-2 col-lg-1 control-label text-left"></label>\n              <div class="col-sm-4 col-lg-5">\n                <input type="text" class="form-control" ng-model="formValues.IPV4.Subnet" id="ipv4_network_subnet" placeholder=" 172.20.0.0/16" />\n              </div>\n              <label for="ipv4_network_gateway" class="col-sm-2 col-lg-1 control-label text-left"></label>\n              <div class="col-sm-4 col-lg-5">\n                <input type="text" class="form-control" ng-model="formValues.IPV4.Gateway" id="ipv4_network_gateway" placeholder=" 172.20.10.11" />\n              </div>\n            </div>\n            \x3c!-- !subnet-gateway-inputs --\x3e\n            \x3c!-- iprange-auxaddr-inputs --\x3e\n            <div class="form-group">\n              <label for="ipv4_network_iprange" class="col-sm-2 col-lg-1 control-label text-left">IP </label>\n              <div class="col-sm-4 col-lg-5">\n                <input type="text" class="form-control" ng-model="formValues.IPV4.IPRange" id="ipv4_network_iprange" placeholder=" 172.20.10.128/25" />\n              </div>\n            </div>\n            <div ng-repeat="auxAddress in formValues.IPV4.AuxiliaryAddresses track by $index" class="form-group">\n              <label for="ipv4_network_auxaddr_{{ $index }}" class="col-sm-2 col-lg-1 control-label text-left"> IP</label>\n              <div class="col-sm-4 col-lg-5">\n                <input\n                  type="text"\n                  class="form-control"\n                  ng-model="formValues.IPV4.AuxiliaryAddresses[$index]"\n                  ng-change="checkIPV4AuxiliaryAddress($index)"\n                  id="ipv4_network_auxaddr_{{ $index }}"\n                  placeholder=" my-router=172.20.10.129"\n                />\n              </div>\n              <button class="btn btn-sm btn-danger" type="button" ng-click="removeIPV4AuxAddress($index)">\n                <i class="fa fa-trash" aria-hidden="true"></i>\n              </button>\n              <div class="col-sm-12 small text-warning" ng-show="state.IPV4AuxiliaryAddressesError[$index]">\n                <p><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> ip</p>\n              </div>\n            </div>\n            \x3c!-- !iprange-auxaddr-inputs --\x3e\n            <div class="form-group">\n              <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addIPV4AuxAddress()">\n                <i class="fa fa-plus-circle" aria-hidden="true"></i> IP\n              </span>\n            </div>\n          </div>\n          <div ng-show="config.Driver === \'bridge\' || (config.Driver === \'macvlan\' && formValues.Macvlan.Scope !== \'swarm\')">\n            <div class="col-sm-12 form-section-title">\n              IPV6 \n            </div>\n            \x3c!-- subnet-gateway-inputs --\x3e\n            <div class="form-group">\n              <label for="ipv6_network_subnet" class="col-sm-2 col-lg-1 control-label text-left"></label>\n              <div class="col-sm-4 col-lg-5">\n                <input type="text" class="form-control" ng-model="formValues.IPV6.Subnet" id="ipv6_network_subnet" placeholder=" 2001:db8::/48" />\n              </div>\n              <label for="ipv6_network_gateway" class="col-sm-2 col-lg-1 control-label text-left"></label>\n              <div class="col-sm-4 col-lg-5">\n                <input type="text" class="form-control" ng-model="formValues.IPV6.Gateway" id="ipv6_network_gateway" placeholder=" 2001:db8::1" />\n              </div>\n            </div>\n            \x3c!-- !subnet-gateway-inputs --\x3e\n            \x3c!-- iprange-auxaddr-inputs --\x3e\n            <div class="form-group">\n              <label for="ipv6_network_iprange" class="col-sm-2 col-lg-1 control-label text-left">IP </label>\n              <div class="col-sm-4 col-lg-5">\n                <input type="text" class="form-control" ng-model="formValues.IPV6.IPRange" id="ipv6_network_iprange" placeholder=" 2001:db8::/64" />\n              </div>\n            </div>\n            <div ng-repeat="auxAddress in formValues.IPV6.AuxiliaryAddresses track by $index" class="form-group">\n              <label for="ipv6_network_auxaddr_{{ $index }}" class="col-sm-2 col-lg-1 control-label text-left"> IP</label>\n              <div class="col-sm-4 col-lg-5">\n                <input\n                  type="text"\n                  class="form-control"\n                  ng-model="formValues.IPV6.AuxiliaryAddresses[$index]"\n                  ng-change="checkIPV6AuxiliaryAddress($index)"\n                  id="ipv6_network_auxaddr_{{ $index }}"\n                  placeholder=" my-router=2001:db8::1"\n                />\n              </div>\n              <button class="btn btn-sm btn-danger" type="button" ng-click="removeIPV6AuxAddress($index)">\n                <i class="fa fa-trash" aria-hidden="true"></i>\n              </button>\n              <div class="col-sm-12 small text-warning" ng-show="state.IPV6AuxiliaryAddressesError[$index]">\n                <p><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> ip</p>\n              </div>\n            </div>\n            \x3c!-- !iprange-auxaddr-inputs --\x3e\n            <div class="form-group">\n              <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addIPV6AuxAddress()">\n                <i class="fa fa-plus-circle" aria-hidden="true"></i> IP\n              </span>\n            </div>\n          </div>\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          \x3c!-- labels --\x3e\n          <div class="form-group">\n            <div class="col-sm-12" style="margin-top: 5px;">\n              <label class="control-label text-left"></label>\n              <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addLabel()"> <i class="fa fa-plus-circle" aria-hidden="true"></i>  </span>\n            </div>\n            \x3c!-- labels-input-list --\x3e\n            <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n              <div ng-repeat="label in formValues.Labels" style="margin-top: 2px;">\n                <div class="input-group col-sm-5 input-group-sm">\n                  <span class="input-group-addon">name</span>\n                  <input type="text" class="form-control" ng-model="label.key" placeholder=" com.example.foo" />\n                </div>\n                <div class="input-group col-sm-5 input-group-sm">\n                  <span class="input-group-addon">value</span>\n                  <input type="text" class="form-control" ng-model="label.value" placeholder=" bar" />\n                </div>\n                <button class="btn btn-sm btn-danger" type="button" ng-click="removeLabel($index)">\n                  <i class="fa fa-trash" aria-hidden="true"></i>\n                </button>\n              </div>\n            </div>\n            \x3c!-- !labels-input-list --\x3e\n          </div>\n          \x3c!-- !labels--\x3e\n          \x3c!-- internal --\x3e\n          <div class="form-group" ng-hide="config.Driver === \'macvlan\' && formValues.Macvlan.Scope === \'local\'">\n            <div class="col-sm-12">\n              <label for="ownership" class="control-label text-left">\n                \n              </label>\n              <label name="ownership" class="switch" style="margin-left: 20px;">\n                <input type="checkbox" ng-model="config.Internal" />\n                <i></i>\n              </label>\n            </div>\n          </div>\n          \x3c!-- !internal --\x3e\n          \x3c!-- attachable --\x3e\n          <div class="form-group" ng-hide="config.Driver === \'macvlan\' && formValues.Macvlan.Scope === \'local\'">\n            <div class="col-sm-12">\n              <label for="attachable" class="control-label text-left">\n                \n              </label>\n              <label name="attachable" class="switch" style="margin-left: 20px;">\n                <input type="checkbox" ng-model="config.Attachable" />\n                <i></i>\n              </label>\n            </div>\n          </div>\n          \x3c!-- !attachable --\x3e\n          <div\n            ng-if="\n              applicationState.endpoint.mode.agentProxy &&\n              applicationState.endpoint.mode.provider === \'DOCKER_SWARM_MODE\' &&\n              config.Driver !== \'overlay\' &&\n              config.Driver !== \'macvlan\'\n            "\n          >\n            <div class="col-sm-12 form-section-title">\n              Deployment\n            </div>\n            \x3c!-- node-selection --\x3e\n            <node-selector model="formValues.NodeName"> </node-selector>\n            \x3c!-- !node-selection --\x3e\n          </div>\n          \x3c!-- access-control --\x3e\n          <por-access-control-form form-data="formValues.AccessControlData"></por-access-control-form>\n          \x3c!-- !access-control --\x3e\n          \x3c!-- actions --\x3e\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button\n                type="button"\n                class="btn btn-primary btn-sm"\n                ng-disabled="state.actionInProgress || !config.Name || (config.Driver === \'macvlan\' && networkCreationForm.$invalid) || !isValid()"\n                ng-click="create()"\n                button-spinner="state.actionInProgress"\n              >\n                <span ng-hide="state.actionInProgress"></span>\n                <span ng-show="state.actionInProgress">Creating network...</span>\n              </button>\n              <i id="createResourceSpinner" class="fa fa-cog fa-spin" style="margin-left: 5px; display: none;"></i>\n              <span class="text-danger" ng-if="state.formValidationError" style="margin-left: 5px;">{{ state.formValidationError }}</span>\n            </div>\n          </div>\n          \x3c!-- !actions --\x3e\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/secrets/secrets.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Secrets list">\n    <a data-toggle="tooltip" title="" ui-sref="docker.secrets" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content>Secrets</rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <secrets-datatable\n      title-text="Secrets"\n      title-icon="fa-user-secret"\n      dataset="secrets"\n      table-key="secrets"\n      order-by="Name"\n      remove-action="removeAction"\n      refresh-callback="getSecrets"\n    ></secrets-datatable>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/secrets/edit/secret.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Secret details">\n    <a data-toggle="tooltip" title="" ui-sref="docker.secrets.secret({id: secret.Id})" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content>\n    <a ui-sref="docker.secrets">Secrets</a> &gt; <a ui-sref="docker.secrets.secret({id: secret.Id})">{{ secret.Name }}</a>\n  </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-user-secret" title-text="Secret details"></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <tbody>\n            <tr>\n              <td></td>\n              <td>{{ secret.Name }}</td>\n            </tr>\n            <tr>\n              <td>ID</td>\n              <td>\n                {{ secret.Id }}\n                <button authorization="DockerSecretDelete" class="btn btn-xs btn-danger" ng-click="removeSecret(secret.Id)"\n                  ><i class="fa fa-trash-alt space-right" aria-hidden="true"></i>Delete this secret</button\n                >\n              </td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ secret.CreatedAt | getisodate }}</td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ secret.UpdatedAt | getisodate }}</td>\n            </tr>\n            <tr ng-if="!(secret.Labels | emptyobject)">\n              <td></td>\n              <td>\n                <table class="table table-bordered table-condensed">\n                  <tr ng-repeat="(k, v) in secret.Labels">\n                    <td>{{ k }}</td>\n                    <td>{{ v }}</td>\n                  </tr>\n                </table>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n\x3c!-- access-control-panel --\x3e\n<por-access-control-panel ng-if="secret" resource-id="secret.Id" resource-control="secret.ResourceControl" resource-type="\'secret\'"> </por-access-control-panel>\n\x3c!-- !access-control-panel --\x3e\n')}]),e.exports=n},function(e,t){var n="app/docker/views/secrets/create/createsecret.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Create secret"></rd-header-title>\n  <rd-header-content> <a ui-sref="docker.secrets">Secrets</a> &gt; Add secret </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-body>\n        <form class="form-horizontal">\n          \x3c!-- name-input --\x3e\n          <div class="form-group">\n            <label for="secret_name" class="col-sm-1 control-label text-left"></label>\n            <div class="col-sm-11">\n              <input type="text" class="form-control" ng-model="formValues.Name" id="secret_name" placeholder=" mySecret" />\n            </div>\n          </div>\n          \x3c!-- !name-input --\x3e\n          \x3c!-- secret-data --\x3e\n          <div class="form-group">\n            <label for="secret_data" class="col-sm-1 control-label text-left">Secret</label>\n            <div class="col-sm-11">\n              <textarea class="form-control" rows="5" ng-model="formValues.Data"></textarea>\n            </div>\n          </div>\n          \x3c!-- !secret-data --\x3e\n          \x3c!-- encode-secret --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <label for="encode_secret" class="control-label text-left">\n                Encode secret\n                <portainer-tooltip position="bottom" message="Secrets need to be base64 encoded. Disable this if your secret is already base64 encoded."></portainer-tooltip>\n              </label>\n              <label class="switch" style="margin-left: 20px;"> <input type="checkbox" name="encode_secret" ng-model="formValues.encodeSecret" /><i></i> </label>\n            </div>\n          </div>\n          \x3c!-- !encode-secret --\x3e\n          \x3c!-- labels --\x3e\n          <div class="form-group">\n            <div class="col-sm-12" style="margin-top: 5px;">\n              <label class="control-label text-left"></label>\n              <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addLabel()"> <i class="fa fa-plus-circle" aria-hidden="true"></i>  </span>\n            </div>\n            \x3c!-- labels-input-list --\x3e\n            <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n              <div ng-repeat="label in formValues.Labels" style="margin-top: 2px;">\n                <div class="input-group col-sm-5 input-group-sm">\n                  <span class="input-group-addon">name</span>\n                  <input type="text" class="form-control" ng-model="label.key" placeholder=" com.example.foo" />\n                </div>\n                <div class="input-group col-sm-5 input-group-sm">\n                  <span class="input-group-addon">value</span>\n                  <input type="text" class="form-control" ng-model="label.value" placeholder=" bar" />\n                </div>\n                <button class="btn btn-sm btn-danger" type="button" ng-click="removeLabel($index)">\n                  <i class="fa fa-trash" aria-hidden="true"></i>\n                </button>\n              </div>\n            </div>\n            \x3c!-- !labels-input-list --\x3e\n          </div>\n          \x3c!-- !labels--\x3e\n          \x3c!-- access-control --\x3e\n          <por-access-control-form form-data="formValues.AccessControlData"></por-access-control-form>\n          \x3c!-- !access-control --\x3e\n          \x3c!-- actions --\x3e\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button\n                type="button"\n                class="btn btn-primary btn-sm"\n                ng-disabled="state.actionInProgress || !formValues.Name || !formValues.Data"\n                ng-click="create()"\n                button-spinner="state.actionInProgress"\n              >\n                <span ng-hide="state.actionInProgress">Create the secret</span>\n                <span ng-show="state.actionInProgress">Creating secret...</span>\n              </button>\n              <span class="text-danger" ng-if="state.formValidationError" style="margin-left: 5px;">{{ state.formValidationError }}</span>\n            </div>\n          </div>\n          \x3c!-- !actions --\x3e\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/services/services.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Service list">\n    <a data-toggle="tooltip" title="" ui-sref="docker.services" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content>Services</rd-header-content>\n</rd-header>\n\n<div class="row" ng-if="services">\n  <div class="col-sm-12">\n    <services-datatable\n      title-text="Services"\n      title-icon="fa-list-alt"\n      dataset="services"\n      table-key="services"\n      order-by="Name"\n      nodes="nodes"\n      agent-proxy="applicationState.endpoint.mode.agentProxy"\n      show-update-action="applicationState.endpoint.apiVersion >= 1.25"\n      show-task-logs-button="applicationState.endpoint.apiVersion >= 1.30"\n      show-add-action="true"\n      show-stack-column="true"\n      refresh-callback="getServices"\n    ></services-datatable>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/services/edit/service.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Service details">\n    <a data-toggle="tooltip" title="" ui-sref="docker.services.service({id: service.Id})" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content>\n    <a ui-sref="docker.services">Services</a> &gt; <a ui-sref="docker.services.service({id: service.Id})">{{ service.Name }}</a>\n  </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div ng-if="isUpdating" class="col-lg-12 col-md-12 col-xs-12">\n    <div class="alert alert-info" role="alert" id="service-update-alert">\n      <p></p>\n      <a ui-sref="docker.services.service({id: service.Id}, {reload: true})"></a>\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-lg-9 col-md-9 col-xs-9">\n    <rd-widget>\n      <rd-widget-header icon="fa-list-alt" title-text="Service details"></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <tbody>\n            <tr>\n              <td></td>\n              <td ng-if="applicationState.endpoint.apiVersion <= 1.24">\n                <input type="text" class="form-control" ng-model="service.Name" ng-change="updateServiceAttribute(service, \'Name\')" ng-disabled="isUpdating" />\n              </td>\n              <td ng-if="applicationState.endpoint.apiVersion >= 1.25">\n                {{ service.Name }}\n              </td>\n            </tr>\n            <tr>\n              <td>ID</td>\n              <td>\n                {{ service.Id }}\n              </td>\n            </tr>\n            <tr ng-if="service.CreatedAt">\n              <td>Created at</td>\n              <td>{{ service.CreatedAt | getisodate }}</td>\n            </tr>\n            <tr ng-if="service.UpdatedAt">\n              <td></td>\n              <td>{{ service.UpdatedAt | getisodate }}</td>\n            </tr>\n            <tr ng-if="service.Version">\n              <td></td>\n              <td>{{ service.Version }}</td>\n            </tr>\n            <tr>\n              <td>Scheduling mode</td>\n              <td>{{ service.Mode }}</td>\n            </tr>\n            <tr ng-if="service.Mode === \'replicated\'">\n              <td>Replicas</td>\n              <td>\n                <span ng-if="service.Mode === \'replicated\'">\n                  <input\n                    class="input-sm"\n                    type="number"\n                    ng-model="service.Replicas"\n                    ng-change="updateServiceAttribute(service, \'Replicas\')"\n                    disable-authorization="DockerServiceUpdate"\n                  />\n                </span>\n              </td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ service.Image }}</td>\n            </tr>\n            <tr ng-if="applicationState.endpoint.type !== 4">\n              <td colspan="{{ webhookURL ? \'1\' : \'2\' }}">\n                Service webhook\n                <portainer-tooltip\n                  position="top"\n                  message="WebhookURIURIPOST"\n                ></portainer-tooltip>\n                <label class="switch" style="margin-left: 20px;">\n                  <input disable-authorization="DockerServiceUpdate" type="checkbox" ng-model="WebhookExists" ng-click="updateWebhook(service)" /><i></i>\n                </label>\n              </td>\n              <td ng-if="webhookURL">\n                <span class="text-muted">{{ webhookURL | truncatelr }}</span>\n                <button type="button" class="btn btn-sm btn-primary btn-sm space-left" ng-if="webhookURL" ng-click="copyWebhook()">\n                  <span><i class="fa fa-copy space-right" aria-hidden="true"></i>Copy link</span>\n                </button>\n                <span>\n                  <i id="copyNotification" class="fa fa-check green-icon" aria-hidden="true" style="margin-left: 7px; display: none;"></i>\n                </span>\n              </td>\n            </tr>\n            <tr authorization="DockerServiceLogs, DockerServiceUpdate, DockerServiceDelete">\n              <td colspan="2">\n                <p class="small text-muted" authorization="DockerServiceUpdate">\n                   </p\n                ><p>\n                  <a\n                    authorization="DockerServiceLogs"\n                    ng-if="applicationState.endpoint.apiVersion >= 1.3"\n                    class="btn btn-primary btn-sm"\n                    type="button"\n                    ui-sref="docker.services.service.logs({id: service.Id})"\n                    ><i class="fa fa-file-alt space-right" aria-hidden="true"></i>Service logs</a\n                  >\n                  <button\n                    authorization="DockerServiceUpdate"\n                    type="button"\n                    class="btn btn-primary btn-sm"\n                    ng-disabled="state.updateInProgress || isUpdating"\n                    ng-click="forceUpdateService(service)"\n                    button-spinner="state.updateInProgress"\n                    ng-if="applicationState.endpoint.apiVersion >= 1.25"\n                  >\n                    <span ng-hide="state.updateInProgress"><i class="fa fa-sync space-right" aria-hidden="true"></i>Update the service</span>\n                    <span ng-show="state.updateInProgress">Update in progress...</span>\n                  </button>\n                  <button\n                    authorization="DockerServiceUpdate"\n                    type="button"\n                    class="btn btn-primary btn-sm"\n                    ng-disabled="state.rollbackInProgress || isUpdating"\n                    ng-click="rollbackService(service)"\n                    button-spinner="state.rollbackInProgress"\n                    ng-if="applicationState.endpoint.apiVersion >= 1.25"\n                  >\n                    <span ng-hide="state.rollbackInProgress"><i class="fa fa-undo space-right" aria-hidden="true"></i>Rollback the service</span>\n                    <span ng-show="state.rollbackInProgress">Rollback in progress...</span>\n                  </button>\n                  <button\n                    authorization="DockerServiceDelete"\n                    type="button"\n                    class="btn btn-danger btn-sm"\n                    ng-disabled="state.deletionInProgress || isUpdating"\n                    ng-click="removeService()"\n                    button-spinner="state.deletionInProgress"\n                  >\n                    <span ng-hide="state.deletionInProgress"><i class="fa fa-trash-alt space-right" aria-hidden="true"></i>Delete the service</span>\n                    <span ng-show="state.deletionInProgress">Deletion in progress...</span>\n                  </button>\n                </p></td\n              >\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n      <rd-widget-footer authorization="DockerServiceUpdate">\n        <p class="small text-muted">\n          Docker <a href="https://docs.docker.com/engine/reference/commandline/service_update/" target="self"></a>.\n        </p>\n        <div class="btn-toolbar" role="toolbar">\n          <div class="btn-group" role="group">\n            <button type="button" class="btn btn-primary" ng-disabled="!hasChanges(service, [\'Mode\', \'Replicas\', \'Name\', \'Webhooks\'])" ng-click="updateService(service)"\n              >Apply changes</button\n            >\n            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n              <span class="caret"></span>\n            </button>\n            <ul class="dropdown-menu">\n              <li><a ng-click="cancelChanges(service, [\'Mode\', \'Replicas\', \'Name\'])">Reset changes</a></li>\n              <li><a ng-click="cancelChanges(service)">Reset all changes</a></li>\n            </ul>\n          </div>\n        </div>\n      </rd-widget-footer>\n    </rd-widget>\n  </div>\n\n  <div class="col-lg-3 col-md-3 col-xs-3">\n    <rd-widget>\n      <rd-widget-header icon="fa-bars" title-text="Quick navigation"></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <ul class="nav nav-pills nav-stacked">\n          <li><a href ng-click="goToItem(\'service-env-variables\')"></a></li>\n          <li><a href ng-click="goToItem(\'service-container-image\')">Container image</a></li>\n          <li><a href ng-click="goToItem(\'service-container-labels\')">Container labels</a></li>\n          <li><a href ng-click="goToItem(\'service-mounts\')">Mounts</a></li>\n          <li><a href ng-click="goToItem(\'service-network-specs\')">Network &amp; published ports</a></li>\n          <li><a href ng-click="goToItem(\'service-resources\')">Resource limits &amp; reservations</a></li>\n          <li><a href ng-click="goToItem(\'service-placement-constraints\')">Placement constraints</a></li>\n          <li ng-if="applicationState.endpoint.apiVersion >= 1.3"><a href ng-click="goToItem(\'service-placement-preferences\')">Placement preferences</a></li>\n          <li><a href ng-click="goToItem(\'service-restart-policy\')">\n</a></li>\n          <li><a href ng-click="goToItem(\'service-update-config\')">Update configuration</a></li>\n          <li><a href ng-click="goToItem(\'service-logging\')">Logging</a></li>\n          <li><a href ng-click="goToItem(\'service-labels\')">Service labels</a></li>\n          <li><a href ng-click="goToItem(\'service-configs\')">Configs</a></li>\n          <li ng-if="applicationState.endpoint.apiVersion >= 1.25"><a href ng-click="goToItem(\'service-secrets\')">Secrets</a></li>\n          <li><a href ng-click="goToItem(\'service-tasks\')">Tasks</a></li>\n        </ul>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n\x3c!-- access-control-panel --\x3e\n<por-access-control-panel ng-if="service" resource-id="service.Id" resource-control="service.ResourceControl" resource-type="\'service\'"> </por-access-control-panel>\n\x3c!-- !access-control-panel --\x3e\n\n<div class="row">\n  <hr />\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <h3 id="container-specs">Container specification</h3>\n    <div id="service-container-spec" class="padding-top" ng-include="\'app/docker/views/services/edit/includes/container-specs.html\'"></div>\n    <div id="service-container-image" class="padding-top" ng-include="\'app/docker/views/services/edit/includes/image.html\'"></div>\n    <div id="service-env-variables" class="padding-top" ng-include="\'app/docker/views/services/edit/includes/environmentvariables.html\'"></div>\n    <div id="service-container-labels" class="padding-top" ng-include="\'app/docker/views/services/edit/includes/containerlabels.html\'"></div>\n    <div id="service-mounts" class="padding-top" ng-include="\'app/docker/views/services/edit/includes/mounts.html\'"></div>\n  </div>\n</div>\n\n<div class="row">\n  <hr />\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <h3 id="service-network-specs">Networks &amp; ports</h3>\n    <div id="service-networks" class="padding-top" ng-include="\'app/docker/views/services/edit/includes/networks.html\'"></div>\n    <div id="service-published-ports" class="padding-top" ng-include="\'app/docker/views/services/edit/includes/ports.html\'"></div>\n    <div id="service-hosts-entries" class="padding-top" ng-include="\'app/docker/views/services/edit/includes/hosts.html\'"></div>\n  </div>\n</div>\n\n<div class="row">\n  <hr />\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <h3 id="service-specs">Service specification</h3>\n    <div id="service-resources" class="padding-top" ng-include="\'app/docker/views/services/edit/includes/resources.html\'"></div>\n    <div id="service-placement-constraints" class="padding-top" ng-include="\'app/docker/views/services/edit/includes/constraints.html\'"></div>\n    <div\n      id="service-placement-preferences"\n      ng-if="applicationState.endpoint.apiVersion >= 1.3"\n      class="padding-top"\n      ng-include="\'app/docker/views/services/edit/includes/placementPreferences.html\'"\n    ></div>\n    <div id="service-restart-policy" class="padding-top" ng-include="\'app/docker/views/services/edit/includes/restart.html\'"></div>\n    <div id="service-update-config" class="padding-top" ng-include="\'app/docker/views/services/edit/includes/updateconfig.html\'"></div>\n    <div id="service-logging" class="padding-top" ng-include="\'app/docker/views/services/edit/includes/logging.html\'"></div>\n    <div id="service-labels" class="padding-top" ng-include="\'app/docker/views/services/edit/includes/servicelabels.html\'"></div>\n    <div id="service-configs" class="padding-top" ng-include="\'app/docker/views/services/edit/includes/configs.html\'"></div>\n    <div id="service-secrets" ng-if="applicationState.endpoint.apiVersion >= 1.25" class="padding-top" ng-include="\'app/docker/views/services/edit/includes/secrets.html\'"></div>\n    <div id="service-tasks" class="padding-top" ng-include="\'app/docker/views/services/edit/includes/tasks.html\'"></div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/services/create/createservice.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Create service"></rd-header-title>\n  <rd-header-content> <a ui-sref="docker.services">Services</a> &gt; Add service </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-body>\n        <form class="form-horizontal" autocomplete="off">\n          \x3c!-- name-input --\x3e\n          <div class="form-group">\n            <label for="service_name" class="col-sm-1 control-label text-left"></label>\n            <div class="col-sm-11">\n              <input type="text" class="form-control" ng-model="formValues.Name" id="service_name" placeholder=" myService" />\n            </div>\n          </div>\n          \x3c!-- !name-input --\x3e\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          \x3c!-- image-and-registry --\x3e\n          <por-image-registry model="formValues.RegistryModel" auto-complete="true" label-class="col-sm-1" input-class="col-sm-11"></por-image-registry>\n          \x3c!-- !image-and-registry --\x3e\n          <div class="col-sm-12 form-section-title">\n            Scheduling\n          </div>\n          \x3c!-- scheduling-mode --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <label class="control-label text-left">\n                Scheduling mode\n              </label>\n              <div class="btn-group btn-group-sm" style="margin-left: 20px;">\n                <label class="btn btn-primary" ng-model="formValues.Mode" uib-btn-radio="\'global\'">Global</label>\n                <label class="btn btn-primary" ng-model="formValues.Mode" uib-btn-radio="\'replicated\'">Replicated</label>\n              </div>\n            </div>\n          </div>\n          <div class="form-group form-inline" ng-if="formValues.Mode === \'replicated\'">\n            <div class="col-sm-12">\n              <label class="control-label text-left">\n                Replicas\n              </label>\n              <input type="number" class="form-control" ng-model="formValues.Replicas" id="replicas" placeholder=" 3" style="margin-left: 20px;" />\n            </div>\n          </div>\n          \x3c!-- !scheduling-mode --\x3e\n          <div class="col-sm-12 form-section-title">\n            Ports configuration\n          </div>\n          \x3c!-- port-mapping --\x3e\n          <div class="form-group">\n            <div class="col-sm-12" style="margin-top: 5px;">\n              <label class="control-label text-left"></label>\n              <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addPortBinding()">\n                <i class="fa fa-plus-circle" aria-hidden="true"></i> \n              </span>\n            </div>\n            <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n              <div ng-repeat="portBinding in formValues.Ports" style="margin-top: 2px;">\n                \x3c!-- host-port --\x3e\n                <div class="input-group col-sm-3 input-group-sm">\n                  <span class="input-group-addon">host</span>\n                  <input type="text" class="form-control" ng-model="portBinding.PublishedPort" placeholder=" 80 or 1.2.3.4:80 (optional)" />\n                </div>\n                \x3c!-- !host-port --\x3e\n                <span style="margin: 0 10px 0 10px;">\n                  <i class="fa fa-long-arrow-alt-right" aria-hidden="true"></i>\n                </span>\n                \x3c!-- container-port --\x3e\n                <div class="input-group col-sm-3 input-group-sm">\n                  <span class="input-group-addon"></span>\n                  <input type="text" class="form-control" ng-model="portBinding.TargetPort" placeholder=" 80" />\n                </div>\n                \x3c!-- !container-port --\x3e\n                \x3c!-- protocol-actions --\x3e\n                <div class="input-group col-sm-5 input-group-sm">\n                  <div class="btn-group btn-group-sm">\n                    <label class="btn btn-primary" ng-model="portBinding.Protocol" uib-btn-radio="\'tcp\'">TCP</label>\n                    <label class="btn btn-primary" ng-model="portBinding.Protocol" uib-btn-radio="\'udp\'">UDP</label>\n                  </div>\n                  <div class="btn-group btn-group-sm">\n                    <label class="btn btn-primary" ng-model="portBinding.PublishMode" uib-btn-radio="\'ingress\'">Ingress</label>\n                    <label class="btn btn-primary" ng-model="portBinding.PublishMode" uib-btn-radio="\'host\'"></label>\n                  </div>\n                  <button class="btn btn-sm btn-danger" type="button" ng-click="removePortBinding($index)">\n                    <i class="fa fa-trash" aria-hidden="true"></i>\n                  </button>\n                </div>\n                \x3c!-- !protocol-actions --\x3e\n              </div>\n            </div>\n            \x3c!-- !port-mapping-input-list --\x3e\n          </div>\n          \x3c!-- !port-mapping --\x3e\n          \x3c!-- create-webhook --\x3e\n          <div class="col-sm-12 form-section-title">\n            Webhooks\n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <label class="control-label text-left">\n                Create a service webhook\n                <portainer-tooltip\n                  position="top"\n                  message="webhookURIURIPOST"\n                ></portainer-tooltip>\n              </label>\n              <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="formValues.Webhook" /><i></i> </label>\n            </div>\n          </div>\n          \x3c!-- !create-webhook  --\x3e\n          \x3c!-- access-control --\x3e\n          <por-access-control-form form-data="formValues.AccessControlData"></por-access-control-form>\n          \x3c!-- !access-control --\x3e\n          \x3c!-- actions --\x3e\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button\n                type="button"\n                class="btn btn-primary btn-sm"\n                ng-disabled="state.actionInProgress || !formValues.RegistryModel.Image || !volumesAreValid()"\n                ng-click="create()"\n                button-spinner="state.actionInProgress"\n              >\n                <span ng-hide="state.actionInProgress">Create the service</span>\n                <span ng-show="state.actionInProgress">Creating service...</span>\n              </button>\n              <span class="text-danger" ng-if="state.formValidationError" style="margin-left: 5px;">{{ state.formValidationError }}</span>\n            </div>\n          </div>\n          \x3c!-- !actions --\x3e\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-body>\n        <ul class="nav nav-pills nav-justified">\n          <li class="active interactive"><a data-target="#command" data-toggle="tab"></a></li>\n          <li class="interactive"><a data-target="#volumes" data-toggle="tab"></a></li>\n          <li class="interactive"><a data-target="#network" data-toggle="tab"></a></li>\n          <li class="interactive"><a data-target="#labels" data-toggle="tab"></a></li>\n          <li class="interactive"><a data-target="#update-config" data-toggle="tab">Update config & Restart</a></li>\n          <li class="interactive" ng-if="applicationState.endpoint.apiVersion >= 1.25"><a data-target="#secrets" data-toggle="tab">Secrets</a></li>\n          <li class="interactive"><a data-target="#configs" data-toggle="tab" ng-if="applicationState.endpoint.apiVersion >= 1.3">Configs</a></li>\n          <li class="interactive"><a data-target="#resources-placement" data-toggle="tab" ng-click="refreshSlider()">Resources & Placement</a></li>\n        </ul>\n        \x3c!-- tab-content --\x3e\n        <div class="tab-content">\n          \x3c!-- tab-command --\x3e\n          <div class="tab-pane active" id="command">\n            <form class="form-horizontal" style="margin-top: 15px;">\n              <div class="col-sm-12 form-section-title">\n                Command\n              </div>\n              \x3c!-- command-input --\x3e\n              <div class="form-group">\n                <label for="service_command" class="col-sm-2 col-lg-1 control-label text-left"></label>\n                <div class="col-sm-9">\n                  <input type="text" class="form-control" ng-model="formValues.Command" id="service_command" placeholder=" /usr/bin/nginx -t -c /mynginx.conf" />\n                </div>\n              </div>\n              \x3c!-- !command-input --\x3e\n              \x3c!-- entrypoint-input --\x3e\n              <div class="form-group">\n                <label for="service_entrypoint" class="col-sm-2 col-lg-1 control-label text-left">Entrypoint</label>\n                <div class="col-sm-9">\n                  <input type="text" class="form-control" ng-model="formValues.EntryPoint" id="service_entrypoint" placeholder=" /bin/sh -c" />\n                </div>\n              </div>\n              \x3c!-- !entrypoint-input --\x3e\n              \x3c!-- workdir-user-input --\x3e\n              <div class="form-group">\n                <label for="service_workingdir" class="col-sm-2 col-lg-1 control-label text-left"></label>\n                <div class="col-sm-4">\n                  <input type="text" class="form-control" ng-model="formValues.WorkingDir" id="service_workingdir" placeholder=" /myapp" />\n                </div>\n                <label for="service_user" class="col-sm-1 control-label text-left"></label>\n                <div class="col-sm-4">\n                  <input type="text" class="form-control" ng-model="formValues.User" id="service_user" placeholder=" nginx" />\n                </div>\n              </div>\n              \x3c!-- !workdir-user-input --\x3e\n              \x3c!-- environment-variables --\x3e\n              <div class="form-group">\n                <div class="col-sm-12" style="margin-top: 5px;">\n                  <label class="control-label text-left"></label>\n                  <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addEnvironmentVariable()">\n                    <i class="fa fa-plus-circle" aria-hidden="true"></i> \n                  </span>\n                </div>\n                \x3c!-- environment-variable-input-list --\x3e\n                <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n                  <div ng-repeat="variable in formValues.Env" style="margin-top: 2px;">\n                    <div class="input-group col-sm-5 input-group-sm">\n                      <span class="input-group-addon">name</span>\n                      <input type="text" class="form-control" ng-model="variable.name" placeholder=" FOO" />\n                    </div>\n                    <div class="input-group col-sm-5 input-group-sm">\n                      <span class="input-group-addon">value</span>\n                      <input type="text" class="form-control" ng-model="variable.value" placeholder=" bar" />\n                    </div>\n                    <button class="btn btn-sm btn-danger" type="button" ng-click="removeEnvironmentVariable($index)">\n                      <i class="fa fa-trash" aria-hidden="true"></i>\n                    </button>\n                  </div>\n                </div>\n                \x3c!-- !environment-variable-input-list --\x3e\n              </div>\n              \x3c!-- !environment-variables --\x3e\n\n              <div class="col-sm-12 form-section-title">\n                Logging\n              </div>\n              \x3c!-- logging-driver --\x3e\n              <div class="form-group">\n                <label for="log-driver" class="col-sm-2 col-lg-1 control-label text-left"></label>\n                <div class="col-sm-4">\n                  <select class="form-control" ng-model="formValues.LogDriverName" id="log-driver">\n                    <option selected value=""></option>\n                    <option ng-repeat="driver in availableLoggingDrivers" ng-value="driver">{{ driver }}</option>\n                    <option value="none"></option>\n                  </select>\n                </div>\n                <div class="col-sm-5">\n                  <p class="small text-muted">\n                    docker daemon  \n                    \n                    <a href="https://docs.docker.com/engine/admin/logging/overview/#supported-logging-drivers" target="_blank"> Docker </a>.\n                  </p>\n                </div>\n              </div>\n              \x3c!-- !logging-driver --\x3e\n              \x3c!-- logging-opts --\x3e\n              <div class="form-group">\n                <div class="col-sm-12" style="margin-top: 5px;">\n                  <label class="control-label text-left">\n                    Options\n                    <portainer-tooltip\n                      position="top"\n                      message=""\n                    ></portainer-tooltip>\n                  </label>\n                  <span\n                    class="label label-default interactive"\n                    style="margin-left: 10px;"\n                    ng-click="!formValues.LogDriverName || formValues.LogDriverName === \'none\' || addLogDriverOpt(formValues.LogDriverName)"\n                  >\n                    <i class="fa fa-plus-circle" aria-hidden="true"></i> add logging driver option\n                  </span>\n                </div>\n                \x3c!-- logging-opts-input-list --\x3e\n                <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n                  <div ng-repeat="opt in formValues.LogDriverOpts" style="margin-top: 2px;">\n                    <div class="input-group col-sm-5 input-group-sm">\n                      <span class="input-group-addon">option</span>\n                      <input type="text" class="form-control" ng-model="opt.name" placeholder=" FOO" />\n                    </div>\n                    <div class="input-group col-sm-5 input-group-sm">\n                      <span class="input-group-addon">value</span>\n                      <input type="text" class="form-control" ng-model="opt.value" placeholder=" bar" />\n                    </div>\n                    <button class="btn btn-sm btn-danger" type="button" ng-click="removeLogDriverOpt($index)">\n                      <i class="fa fa-trash" aria-hidden="true"></i>\n                    </button>\n                  </div>\n                </div>\n                \x3c!-- logging-opts-input-list --\x3e\n              </div>\n              \x3c!-- !logging-opts --\x3e\n            </form>\n          </div>\n          \x3c!-- !tab-command --\x3e\n          \x3c!-- tab-volume --\x3e\n          <div class="tab-pane" id="volumes">\n            <form class="form-horizontal" style="margin-top: 15px;">\n              \x3c!-- volumes --\x3e\n              <div class="form-group">\n                <div class="col-sm-12" style="margin-top: 5px;">\n                  <label class="control-label text-left"></label>\n                  <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addVolume()">\n                    <i class="fa fa-plus-circle" aria-hidden="true"></i> \n                  </span>\n                </div>\n                \x3c!-- volumes-input-list --\x3e\n                <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n                  <div ng-repeat="volume in formValues.Volumes">\n                    <div class="col-sm-12" style="margin-top: 10px;">\n                      \x3c!-- volume-line1 --\x3e\n                      <div class="col-sm-12 form-inline">\n                        \x3c!-- container-path --\x3e\n                        <div class="input-group col-sm-6">\n                          <div class="input-group input-group-sm w-full">\n                            <span class="input-group-addon"></span>\n                            <input type="text" class="form-control" ng-model="volume.Target" placeholder=" /path/in/container" />\n                          </div>\n                          <div class="small text-warning" ng-show="!volume.Target"> <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Target is required. </div>\n                        </div>\n                        \x3c!-- !container-path --\x3e\n                        \x3c!-- volume-type --\x3e\n                        <div class="input-group col-sm-5" style="margin-left: 5px; vertical-align: top;">\n                          <div class="btn-group btn-group-sm" ng-if="allowBindMounts">\n                            <label class="btn btn-primary" ng-model="volume.Type" uib-btn-radio="\'volume\'" ng-click="volume.name = \'\'"></label>\n                            <label class="btn btn-primary" ng-model="volume.Type" uib-btn-radio="\'bind\'" ng-click="volume.Id = \'\'"></label>\n                          </div>\n                          <button class="btn btn-sm btn-danger" type="button" ng-click="removeVolume($index)">\n                            <i class="fa fa-trash" aria-hidden="true"></i>\n                          </button>\n                        </div>\n                        \x3c!-- !volume-type --\x3e\n                      </div>\n                      \x3c!-- !volume-line1 --\x3e\n                      \x3c!-- volume-line2 --\x3e\n                      <div class="col-sm-12 form-inline" style="margin-top: 5px;">\n                        <div style="height: 30px; display: inline-block; vertical-align: top; display: inline-flex; align-items: center;">\n                          <i class="fa fa-long-arrow-alt-right" aria-hidden="true"></i>\n                        </div>\n                        \x3c!-- volume --\x3e\n                        <div class="col-sm-6 input-group" ng-if="volume.Type === \'volume\'" style="float: none; padding: 0;">\n                          <div class="input-group input-group-sm w-full">\n                            <span class="input-group-addon"></span>\n                            <select\n                              class="form-control"\n                              ng-model="volume.Source"\n                              ng-options="vol as ((vol.Id|truncate:30) + \' - \' + (vol.Driver|truncate:30)) for vol in availableVolumes"\n                            >\n                              <option selected disabled hidden value="">Select a volume</option>\n                            </select>\n                          </div>\n                          <div class="small text-warning" ng-show="!volume.Source"> <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Source is required. </div>\n                        </div>\n                        \x3c!-- !volume --\x3e\n                        \x3c!-- bind --\x3e\n                        <div class="input-group input-group-sm col-sm-6" ng-if="volume.Type === \'bind\'">\n                          <div class="input-group input-group-sm w-full">\n                            <span class="input-group-addon">host</span>\n                            <input type="text" class="form-control" ng-model="volume.Source" placeholder=" /path/on/host" />\n                          </div>\n                          <div class="small text-warning" ng-show="!volume.Source"> <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Source is required. </div>\n                        </div>\n                        \x3c!-- !bind --\x3e\n                        \x3c!-- read-only --\x3e\n                        <div class="input-group input-group-sm col-sm-5" style="margin-left: 5px; vertical-align: top;">\n                          <div class="btn-group btn-group-sm">\n                            <label class="btn btn-primary" ng-model="volume.ReadOnly" uib-btn-radio="false"></label>\n                            <label class="btn btn-primary" ng-model="volume.ReadOnly" uib-btn-radio="true"></label>\n                          </div>\n                        </div>\n                        \x3c!-- !read-only --\x3e\n                      </div>\n                      \x3c!-- !volume-line2 --\x3e\n                    </div>\n                  </div>\n                </div>\n                \x3c!-- !volumes-input-list --\x3e\n              </div>\n              \x3c!-- !volumes --\x3e\n            </form>\n          </div>\n          \x3c!-- !tab-volume --\x3e\n          \x3c!-- tab-network --\x3e\n          <div class="tab-pane" id="network">\n            <form class="form-horizontal" style="margin-top: 15px;">\n              \x3c!-- network-input --\x3e\n              <div class="form-group">\n                <label for="container_network" class="col-sm-2 col-lg-1 control-label text-left"></label>\n                <div class="col-sm-9">\n                  <select class="form-control" ng-model="formValues.Network">\n                    <option selected disabled hidden value=""></option>\n                    <option ng-repeat="net in availableNetworks | orderBy: \'Name\'" ng-value="net.Name">{{ net.Name }}</option>\n                  </select>\n                </div>\n                <div class="col-sm-2"></div>\n              </div>\n              \x3c!-- !network-input --\x3e\n              \x3c!-- extra-networks --\x3e\n              <div class="form-group">\n                <div class="col-sm-12" style="margin-top: 5px;">\n                  <label class="control-label text-left">Extra networks</label>\n                  <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addExtraNetwork()">\n                    <i class="fa fa-plus-circle" aria-hidden="true"></i> add extra network\n                  </span>\n                </div>\n                \x3c!-- network-input-list --\x3e\n                <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n                  <div ng-repeat="network in formValues.ExtraNetworks" style="margin-top: 2px;">\n                    <select class="form-control" ng-model="network.Name">\n                      <option selected disabled hidden value=""></option>\n                      <option ng-repeat="net in availableNetworks" ng-value="net.Name">{{ net.Name }}</option>\n                    </select>\n                    <button class="btn btn-sm btn-danger" type="button" ng-click="removeExtraNetwork($index)">\n                      <i class="fa fa-trash" aria-hidden="true"></i>\n                    </button>\n                  </div>\n                </div>\n                \x3c!-- !network-input-list --\x3e\n              </div>\n              \x3c!-- !extra-networks --\x3e\n              \x3c!-- extra-hosts-variables --\x3e\n              <div class="form-group" ng-if="applicationState.endpoint.apiVersion >= 1.25">\n                <div class="col-sm-12" style="margin-top: 5px;">\n                  <label class="control-label text-left"></label>\n                  <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addHostsEntry()">\n                    <i class="fa fa-plus-circle" aria-hidden="true"></i> \n                  </span>\n                </div>\n                \x3c!-- hosts-input-list --\x3e\n                <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n                  <div ng-repeat="variable in formValues.HostsEntries" style="margin-top: 2px;">\n                    <div class="input-group col-sm-5 input-group-sm">\n                      <span class="input-group-addon">value</span>\n                      <input type="text" class="form-control" ng-model="variable.value" placeholder=" host:IP" />\n                    </div>\n                    <button class="btn btn-sm btn-danger" type="button" ng-click="removeHostsEntry($index)">\n                      <i class="fa fa-trash" aria-hidden="true"></i>\n                    </button>\n                  </div>\n                </div>\n                \x3c!-- !hosts-input-list --\x3e\n              </div>\n              \x3c!-- !extra-hosts-variables --\x3e\n            </form>\n          </div>\n          \x3c!-- !tab-network --\x3e\n          \x3c!-- tab-labels --\x3e\n          <div class="tab-pane" id="labels">\n            <form class="form-horizontal" style="margin-top: 15px;">\n              \x3c!-- labels --\x3e\n              <div class="form-group">\n                <div class="col-sm-12" style="margin-top: 5px;">\n                  <label class="control-label text-left">Service labels</label>\n                  <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addLabel()">\n                    <i class="fa fa-plus-circle" aria-hidden="true"></i> add service label\n                  </span>\n                </div>\n                \x3c!-- labels-input-list --\x3e\n                <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n                  <div ng-repeat="label in formValues.Labels" style="margin-top: 2px;">\n                    <div class="input-group col-sm-5 input-group-sm">\n                      <span class="input-group-addon">name</span>\n                      <input type="text" class="form-control" ng-model="label.key" placeholder=" com.example.foo" />\n                    </div>\n                    <div class="input-group col-sm-5 input-group-sm">\n                      <span class="input-group-addon">value</span>\n                      <input type="text" class="form-control" ng-model="label.value" placeholder=" bar" />\n                    </div>\n                    <button class="btn btn-sm btn-danger" type="button" ng-click="removeLabel($index)">\n                      <i class="fa fa-trash" aria-hidden="true"></i>\n                    </button>\n                  </div>\n                </div>\n                \x3c!-- !labels-input-list --\x3e\n              </div>\n              \x3c!-- !labels--\x3e\n              \x3c!-- container-labels --\x3e\n              <div class="form-group">\n                <div class="col-sm-12" style="margin-top: 5px;">\n                  <label class="control-label text-left">Container labels</label>\n                  <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addContainerLabel()">\n                    <i class="fa fa-plus-circle" aria-hidden="true"></i> add container label\n                  </span>\n                </div>\n                \x3c!-- container-labels-input-list --\x3e\n                <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n                  <div ng-repeat="label in formValues.ContainerLabels" style="margin-top: 2px;">\n                    <div class="input-group col-sm-5 input-group-sm">\n                      <span class="input-group-addon">name</span>\n                      <input type="text" class="form-control" ng-model="label.key" placeholder=" com.example.foo" />\n                    </div>\n                    <div class="input-group col-sm-5 input-group-sm">\n                      <span class="input-group-addon">value</span>\n                      <input type="text" class="form-control" ng-model="label.value" placeholder=" bar" />\n                    </div>\n                    <button class="btn btn-sm btn-danger" type="button" ng-click="removeContainerLabel($index)">\n                      <i class="fa fa-trash" aria-hidden="true"></i>\n                    </button>\n                  </div>\n                </div>\n                \x3c!-- !container-labels-input-list --\x3e\n              </div>\n              \x3c!-- !container-labels--\x3e\n            </form>\n          </div>\n          \x3c!-- !tab-labels --\x3e\n          \x3c!-- tab-update-config --\x3e\n          <div class="tab-pane" id="update-config" ng-include="\'app/docker/views/services/create/includes/update-restart.html\'"></div>\n          \x3c!-- !tab-update-config --\x3e\n          \x3c!-- tab-secrets --\x3e\n          <div class="tab-pane" id="secrets" ng-if="applicationState.endpoint.apiVersion >= 1.25" ng-include="\'app/docker/views/services/create/includes/secret.html\'"></div>\n          \x3c!-- !tab-secrets --\x3e\n          \x3c!-- tab-configs --\x3e\n          <div class="tab-pane" id="configs" ng-if="applicationState.endpoint.apiVersion >= 1.3" ng-include="\'app/docker/views/services/create/includes/config.html\'"></div>\n          \x3c!-- !tab-configs --\x3e\n          \x3c!-- tab-resources-placement --\x3e\n          <div class="tab-pane" id="resources-placement" ng-include="\'app/docker/views/services/create/includes/resources-placement.html\'"></div>\n          \x3c!-- !tab-resources-placement --\x3e\n        </div>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/services/logs/servicelogs.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Service logs"></rd-header-title>\n  <rd-header-content>\n    <a ui-sref="docker.services">Services</a> > <a ui-sref="docker.services.service({id: service.Id})">{{ service.Name }}</a> &gt; Logs\n  </rd-header-content>\n</rd-header>\n\n<log-viewer\n  data="logs"\n  ng-if="logs"\n  log-collection-change="changeLogCollection"\n  display-timestamps="state.displayTimestamps"\n  line-count="state.lineCount"\n  since-timestamp="state.sinceTimestamp"\n  resource-name="service.Name"\n></log-viewer>\n')}]),e.exports=n},function(e,t){var n="app/portainer/views/stacks/stacks.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="">\n    <a data-toggle="tooltip" title="" ui-sref="docker.stacks" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content></rd-header-content>\n</rd-header>\n<information-panel-offline ng-if="offlineMode"></information-panel-offline>\n<div class="row">\n  <div class="col-sm-12">\n    <stacks-datatable\n      title-text=""\n      title-icon="fa-th-list"\n      dataset="Stacks"\n      table-key="Stacks"\n      order-by="Name"\n      remove-action="removeAction"\n      offline-mode="offlineMode"\n      refresh-callback="getStacks"\n      create-enabled="createEnabled"\n    ></stacks-datatable>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/portainer/views/stacks/edit/stack.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Stack details">\n    <a data-toggle="tooltip" title-text="Refresh" ui-sref="docker.stacks.stack({id: stack.Id})" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content> <a ui-sref="docker.stacks"></a> &gt; {{ stackName }} </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-body>\n        <uib-tabset active="state.activeTab">\n          \x3c!-- tab-info --\x3e\n          <uib-tab index="0">\n            <uib-tab-heading> <i class="fa fa-th-list" aria-hidden="true"></i> Stack </uib-tab-heading>\n            <div style="margin-top: 10px;">\n              \x3c!-- stack-information --\x3e\n              <div ng-if="state.externalStack">\n                <div class="col-sm-12 form-section-title">\n                  Information\n                </div>\n                <div class="form-group">\n                  <span class="small">\n                    <p class="text-muted">\n                      <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                      Portainer\n                    </p>\n                  </span>\n                </div>\n              </div>\n              \x3c!-- !stack-information --\x3e\n              \x3c!-- stack-details --\x3e\n              <div>\n                <div class="col-sm-12 form-section-title">\n                  Stack details\n                </div>\n                <div class="form-group">\n                  {{ stackName }}\n\n                  <a\n                    ng-if="!state.externalStack && stackFileContent"\n                    class="btn btn-primary btn-xs"\n                    ui-sref="docker.templates.custom.new({fileContent: stackFileContent, type: stack.Type})"\n                  >\n                    Create template from stack\n                  </a>\n\n                  <button\n                    authorization="PortainerStackUpdate"\n                    ng-if="!state.externalStack && stack.Status === 2"\n                    ng-disabled="state.actionInProgress"\n                    class="btn btn-xs btn-success"\n                    ng-click="startStack()"\n                  >\n                    <i class="fa fa-play space-right" aria-hidden="true"></i>\n                    Start this stack\n                  </button>\n\n                  <button\n                    ng-if="!state.externalStack && stack.Status === 1"\n                    authorization="PortainerStackUpdate"\n                    ng-disabled="state.actionInProgress"\n                    class="btn btn-xs btn-danger"\n                    ng-click="stopStack()"\n                  >\n                    <i class="fa fa-stop space-right" aria-hidden="true"></i>\n                    Stop this stack\n                  </button>\n\n                  <button authorization="PortainerStackDelete" class="btn btn-xs btn-danger" ng-click="removeStack()" ng-if="!state.externalStack || stack.Type === 1">\n                    <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>\n                    Delete this stack\n                  </button>\n                </div>\n              </div>\n              \x3c!-- !stack-details --\x3e\n              <stack-duplication-form\n                ng-if="!state.externalStack && endpoints.length > 0"\n                endpoints="endpoints"\n                groups="groups"\n                current-endpoint-id="currentEndpointId"\n                on-duplicate="duplicateStack(name, endpointId)"\n                on-migrate="migrateStack(name, endpointId)"\n              >\n              </stack-duplication-form>\n            </div>\n          </uib-tab>\n          \x3c!-- !tab-info --\x3e\n          \x3c!-- tab-file --\x3e\n          <uib-tab index="1" select="showEditor()" ng-if="!state.externalStack">\n            <uib-tab-heading> <i class="fa fa-pencil-alt space-right" aria-hidden="true"></i> Editor </uib-tab-heading>\n            <form class="form-horizontal" ng-if="state.showEditorTab" style="margin-top: 10px;">\n              <div class="form-group">\n                <span class="col-sm-12 text-muted small">\n                  You can get more information about Compose file format in the <a href="https://docs.docker.com/compose/compose-file/" target="_blank"></a>.\n                </span>\n              </div>\n              <div class="form-group">\n                <div class="col-sm-12">\n                  <code-editor\n                    identifier="stack-editor"\n                    placeholder="# docker-compose"\n                    yml="true"\n                    on-change="(editorUpdate)"\n                    value="stackFileContent"\n                  ></code-editor>\n                </div>\n              </div>\n              \x3c!-- environment-variables --\x3e\n              <div ng-if="stack && stack.Type === 1">\n                <div class="col-sm-12 form-section-title">\n                  Environment\n                </div>\n                <div class="form-group">\n                  <div class="col-sm-12" style="margin-top: 5px;" authorization="PortainerStackUpdate">\n                    <label class="control-label text-left"></label>\n                    <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addEnvironmentVariable()">\n                      <i class="fa fa-plus-circle" aria-hidden="true"></i> \n                    </span>\n                  </div>\n                  \x3c!-- environment-variable-input-list --\x3e\n                  <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n                    <div ng-repeat="variable in stack.Env" style="margin-top: 2px;">\n                      <div class="input-group col-sm-5 input-group-sm">\n                        <span class="input-group-addon">name</span>\n                        <input type="text" class="form-control" ng-model="variable.name" placeholder=" FOO" />\n                      </div>\n                      <div class="input-group col-sm-5 input-group-sm">\n                        <span class="input-group-addon">value</span>\n                        <input type="text" class="form-control" ng-model="variable.value" placeholder=" bar" />\n                      </div>\n                      <button class="btn btn-sm btn-danger" type="button" ng-click="removeEnvironmentVariable($index)" authorization="PortainerStackUpdate">\n                        <i class="fa fa-trash" aria-hidden="true"></i>\n                      </button>\n                    </div>\n                  </div>\n                  \x3c!-- !environment-variable-input-list --\x3e\n                </div>\n              </div>\n              \x3c!-- !environment-variables --\x3e\n              \x3c!-- options --\x3e\n              <div ng-if="stack.Type === 1 && applicationState.endpoint.apiVersion >= 1.27" authorization="PortainerStackUpdate">\n                <div class="col-sm-12 form-section-title">\n                  Options\n                </div>\n                <div class="form-group">\n                  <div class="col-sm-12">\n                    <label for="prune" class="control-label text-left">\n                      Prune services\n                      <portainer-tooltip position="bottom" message="Prune services that are no longer referenced."></portainer-tooltip>\n                    </label>\n                    <label class="switch" style="margin-left: 20px;"> <input name="prune" type="checkbox" ng-model="formValues.Prune" /><i></i> </label>\n                  </div>\n                </div>\n              </div>\n              \x3c!-- !options --\x3e\n              <div authorization="PortainerStackUpdate">\n                <div class="col-sm-12 form-section-title">\n                  \n                </div>\n                <div class="form-group">\n                  <div class="col-sm-12">\n                    <button\n                      type="button"\n                      class="btn btn-sm btn-primary"\n                      ng-disabled="state.actionInProgress || stack.Status === 2 || !stackFileContent"\n                      ng-click="deployStack()"\n                      button-spinner="state.actionInProgress"\n                    >\n                      <span ng-hide="state.actionInProgress">Update the stack</span>\n                      <span ng-show="state.actionInProgress">...</span>\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </form>\n          </uib-tab>\n          \x3c!-- !tab-file --\x3e\n        </uib-tabset>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row" ng-if="Containers">\n  <div class="col-sm-12">\n    <containers-datatable\n      title-text=""\n      title-icon="fa-cubes"\n      dataset="Containers"\n      table-key="stack-containers"\n      order-by="Status"\n      show-host-column="false"\n      show-add-action="false"\n    ></containers-datatable>\n  </div>\n</div>\n\n<div class="row" ng-if="services">\n  <div class="col-sm-12">\n    <services-datatable\n      title-text="Services"\n      title-icon="fa-list-alt"\n      dataset="services"\n      table-key="stack-services"\n      order-by="Name"\n      nodes="nodes"\n      agent-proxy="applicationState.endpoint.mode.agentProxy && applicationState.endpoint.mode.provider === \'DOCKER_SWARM_MODE\'"\n      show-ownership-column="false"\n      show-update-action="applicationState.endpoint.apiVersion >= 1.25"\n      show-task-logs-button="applicationState.endpoint.apiVersion >= 1.30"\n      show-add-action="false"\n      show-stack-column="false"\n    ></services-datatable>\n  </div>\n</div>\n\n\x3c!-- access-control-panel --\x3e\n<por-access-control-panel ng-if="stack" resource-id="stack.Name" resource-control="stack.ResourceControl" resource-type="\'stack\'"> </por-access-control-panel>\n\x3c!-- !access-control-panel --\x3e\n')}]),e.exports=n},function(e,t){var n="app/portainer/views/stacks/create/createstack.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text=""></rd-header-title>\n  <rd-header-content> <a ui-sref="docker.stacks"></a> &gt;  </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-body>\n        <form class="form-horizontal">\n          \x3c!-- name-input --\x3e\n          <div class="form-group">\n            <label for="stack_name" class="col-sm-1 control-label text-left"></label>\n            <div class="col-sm-11">\n              <input type="text" class="form-control" ng-model="formValues.Name" id="stack_name" placeholder=" mystack" auto-focus />\n            </div>\n          </div>\n          \x3c!-- !name-input --\x3e\n          <div class="form-group">\n            <span class="col-sm-12 text-muted small" ng-if="state.StackType === 1">\n               <code>docker stack deploy</code> \n            </span>\n            <span class="col-sm-12 text-muted small" ng-if="state.StackType === 2">\n               <code>docker-compose</code>Compose <b>2</b>  <br /><br />\n              <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n              libcompose\n            </span>\n          </div>\n          \x3c!-- build-method --\x3e\n          <div class="col-sm-12 form-section-title">\n            Build method\n          </div>\n          <div class="form-group"></div>\n          <div class="form-group" style="margin-bottom: 0;">\n            <div class="boxselector_wrapper">\n              <div>\n                <input type="radio" id="method_editor" ng-model="state.Method" value="editor" />\n                <label for="method_editor">\n                  <div class="boxselector_header">\n                    <i class="fa fa-edit" aria-hidden="true" style="margin-right: 2px;"></i>\n                    \n                  </div>\n                  <p></p>\n                </label>\n              </div>\n              <div>\n                <input type="radio" id="method_upload" ng-model="state.Method" value="upload" />\n                <label for="method_upload">\n                  <div class="boxselector_header">\n                    <i class="fa fa-upload" aria-hidden="true" style="margin-right: 2px;"></i>\n                    \n                  </div>\n                  <p></p>\n                </label>\n              </div>\n              <div>\n                <input type="radio" id="method_repository" ng-model="state.Method" value="repository" />\n                <label for="method_repository">\n                  <div class="boxselector_header">\n                    <i class="fab fa-git" aria-hidden="true" style="margin-right: 2px;"></i>\n                    Repository\n                  </div>\n                  <p> git </p>\n                </label>\n              </div>\n              <div>\n                <input type="radio" id="method_template" ng-model="state.Method" value="template" />\n                <label for="method_template">\n                  <div class="boxselector_header">\n                    <i class="fa fa-rocket" aria-hidden="true" style="margin-right: 2px;"></i>\n                    \n                  </div>\n                  <p></p>\n                </label>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !build-method --\x3e\n          \x3c!-- web-editor --\x3e\n          <div ng-show="state.Method === \'editor\'">\n            <div class="col-sm-12 form-section-title">\n              \n            </div>\n            <div class="form-group">\n              <span class="col-sm-12 text-muted small">\n                 <a href="https://docs.docker.com/compose/compose-file/" target="_blank"></a>.\n              </span>\n            </div>\n            <div class="form-group">\n              <div class="col-sm-12">\n                <code-editor\n                  identifier="stack-creation-editor"\n                  placeholder="# docker-compose"\n                  yml="true"\n                  on-change="(editorUpdate)"\n                ></code-editor>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !web-editor --\x3e\n          \x3c!-- upload --\x3e\n          <div ng-show="state.Method === \'upload\'">\n            <div class="col-sm-12 form-section-title">\n              \n            </div>\n            <div class="form-group">\n              <span class="col-sm-12 text-muted small">\n                \n              </span>\n            </div>\n            <div class="form-group">\n              <div class="col-sm-12">\n                <button class="btn btn-sm btn-primary" ngf-select ng-model="formValues.StackFile"></button>\n                <span style="margin-left: 5px;">\n                  {{ formValues.StackFile.name }}\n                  <i class="fa fa-times red-icon" ng-if="!formValues.StackFile" aria-hidden="true"></i>\n                </span>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !upload --\x3e\n          \x3c!-- repository --\x3e\n          <div ng-show="state.Method === \'repository\'">\n            <div class="col-sm-12 form-section-title">\n              Git repository\n            </div>\n            <div class="form-group">\n              <span class="col-sm-12 text-muted small">\n                You can use the URL of a git repository.\n              </span>\n            </div>\n            <div class="form-group">\n              <label for="stack_repository_url" class="col-sm-2 control-label text-left">Repository URL</label>\n              <div class="col-sm-10">\n                <input\n                  type="text"\n                  class="form-control"\n                  ng-model="formValues.RepositoryURL"\n                  id="stack_repository_url"\n                  placeholder="https://github.com/portainer/portainer-compose"\n                />\n              </div>\n            </div>\n            <div class="form-group">\n              <span class="col-sm-12 text-muted small">\n                 <code>refs/heads/branch_name</code>  <code>refs/tags/tag_name</code> \n                 <code>HEAD</code> <code>master</code> \n              </span>\n            </div>\n            <div class="form-group">\n              <label for="stack_repository_url" class="col-sm-2 control-label text-left">Repository reference</label>\n              <div class="col-sm-10">\n                <input type="text" class="form-control" ng-model="formValues.RepositoryReferenceName" id="stack_repository_reference_name" placeholder="refs/heads/master" />\n              </div>\n            </div>\n            <div class="form-group">\n              <span class="col-sm-12 text-muted small">\n                Indicate the path to the Compose file from the root of your repository.\n              </span>\n            </div>\n            <div class="form-group">\n              <label for="stack_repository_path" class="col-sm-2 control-label text-left">Compose path</label>\n              <div class="col-sm-10">\n                <input type="text" class="form-control" ng-model="formValues.ComposeFilePathInRepository" id="stack_repository_path" placeholder="docker-compose.yml" />\n              </div>\n            </div>\n            <div class="form-group">\n              <div class="col-sm-12">\n                <label class="control-label text-left">\n                  \n                </label>\n                <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="formValues.RepositoryAuthentication" /><i></i> </label>\n              </div>\n            </div>\n            <div class="form-group" ng-if="formValues.RepositoryAuthentication">\n              <span class="col-sm-12 text-muted small">\n                git2FA<code>authentication required</code>\n              Token\n              </span>\n            </div>\n            <div class="form-group" ng-if="formValues.RepositoryAuthentication">\n              <label for="repository_username" class="col-sm-1 control-label text-left"></label>\n              <div class="col-sm-11 col-md-5">\n                <input type="text" class="form-control" ng-model="formValues.RepositoryUsername" name="repository_username" placeholder="myGitUser" />\n              </div>\n              <label for="repository_password" class="col-sm-1 control-label text-left">\n                Password\n              </label>\n              <div class="col-sm-11 col-md-5">\n                <input type="password" class="form-control" ng-model="formValues.RepositoryPassword" name="repository_password" placeholder="myPassword" />\n              </div>\n            </div>\n          </div>\n          \x3c!-- !repository --\x3e\n          \x3c!-- custom-template --\x3e\n          <div ng-show="state.Method === \'template\'">\n            <div class="form-group">\n              <label for="stack_template" class="col-sm-1 control-label text-left">\n                Template\n              </label>\n              <div class="col-sm-11">\n                <select\n                  ng-if="templates.length"\n                  class="form-control"\n                  ng-model="selectedTemplate"\n                  ng-options="template as template.label for template in templates"\n                  ng-change="onChangeTemplate(selectedTemplate)"\n                >\n                  <option value="" label="Select a Custom template" disabled selected="selected"> </option>\n                </select>\n                <span ng-if="!templates.length">\n                    <a ui-sref="docker.templates.custom.new"></a> \n                </span>\n              </div>\n            </div>\n            \x3c!-- description --\x3e\n            <div ng-if="selectedTemplate.note">\n              <div class="col-sm-12 form-section-title">\n                Information\n              </div>\n              <div class="form-group">\n                <div class="col-sm-12">\n                  <div class="template-note" ng-bind-html="selectedTemplate.note"></div>\n                </div>\n              </div>\n            </div>\n            \x3c!-- !description --\x3e\n            \x3c!-- editor --\x3e\n            <div ng-if="selectedTemplate && formValues.StackFileContent">\n              <div class="col-sm-12 form-section-title">\n                \n              </div>\n              <div class="form-group">\n                <div class="col-sm-12">\n                  <code-editor\n                    identifier="template-content-editor"\n                    placeholder="# docker-compose"\n                    yml="true"\n                    value="formValues.StackFileContent"\n                    on-change="(editorUpdate)"\n                  ></code-editor>\n                </div>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !custom-template --\x3e\n          \x3c!-- environment-variables --\x3e\n          <div>\n            <div class="col-sm-12 form-section-title">\n              Environment\n            </div>\n            <div class="form-group">\n              <div class="col-sm-12" style="margin-top: 5px;">\n                <label class="control-label text-left"></label>\n                <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addEnvironmentVariable()">\n                  <i class="fa fa-plus-circle" aria-hidden="true"></i> \n                </span>\n              </div>\n              \x3c!-- environment-variable-input-list --\x3e\n              <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n                <div ng-repeat="variable in formValues.Env" style="margin-top: 2px;">\n                  <div class="input-group col-sm-5 input-group-sm">\n                    <span class="input-group-addon">name</span>\n                    <input type="text" class="form-control" ng-model="variable.name" placeholder=" FOO" />\n                  </div>\n                  <div class="input-group col-sm-5 input-group-sm">\n                    <span class="input-group-addon">value</span>\n                    <input type="text" class="form-control" ng-model="variable.value" placeholder=" bar" />\n                  </div>\n                  <button class="btn btn-sm btn-danger" type="button" ng-click="removeEnvironmentVariable($index)">\n                    <i class="fa fa-trash" aria-hidden="true"></i>\n                  </button>\n                </div>\n              </div>\n              \x3c!-- !environment-variable-input-list --\x3e\n            </div>\n          </div>\n          \x3c!-- !environment-variables --\x3e\n          <por-access-control-form form-data="formValues.AccessControlData"></por-access-control-form>\n          \x3c!-- actions --\x3e\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button\n                type="button"\n                class="btn btn-primary btn-sm"\n                ng-disabled="state.actionInProgress\n              || (state.Method === \'editor\' && !formValues.StackFileContent)\n              || (state.Method === \'upload\' && !formValues.StackFile)\n              || (state.Method === \'template\' && (!formValues.StackFileContent || !selectedTemplate))\n              || (state.Method === \'repository\' && ((!formValues.RepositoryURL || !formValues.ComposeFilePathInRepository) || (formValues.RepositoryAuthentication && (!formValues.RepositoryUsername || !formValues.RepositoryPassword))))\n              || !formValues.Name"\n                ng-click="deployStack()"\n                button-spinner="state.actionInProgress"\n              >\n                <span ng-hide="state.actionInProgress"></span>\n                <span ng-show="state.actionInProgress">...</span>\n              </button>\n              <span class="text-danger" ng-if="state.formValidationError" style="margin-left: 5px;">{{ state.formValidationError }}</span>\n            </div>\n          </div>\n          \x3c!-- !actions --\x3e\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/swarm/swarm.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Cluster overview">\n    <a data-toggle="tooltip" title="" ui-sref="docker.swarm" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content>Swarm</rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-object-group" title-text="Cluster status"></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <tbody>\n            <tr>\n              <td>Nodes</td>\n              <td>{{ info.Swarm.Nodes }}</td>\n            </tr>\n            <tr>\n              <td>Docker API version</td>\n              <td>{{ docker.ApiVersion }}</td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ totalCPU }}</td>\n            </tr>\n            <tr>\n              <td>Total memory</td>\n              <td>{{ totalMemory | humansize: 2 }}</td>\n            </tr>\n            <tr>\n              <td colspan="2">\n                <div class="btn-group" role="group" aria-label="...">\n                  <a ui-sref="docker.swarm.visualizer"><i class="fa fa-object-group space-right" aria-hidden="true"></i>Go to cluster visualizer</a>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-12">\n    <nodes-datatable\n      title-text="Nodes"\n      title-icon="fa-hdd"\n      dataset="nodes"\n      table-key="nodes"\n      order-by="Hostname"\n      show-ip-address-column="applicationState.endpoint.apiVersion >= 1.25"\n      access-to-node-details="isAdmin"\n      refresh-callback="getNodes"\n    ></nodes-datatable>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/swarm/visualizer/swarmvisualizer.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Swarm visualizer">\n    <a data-toggle="tooltip" title="" ui-sref="docker.swarm.visualizer" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content> <a ui-sref="docker.swarm">Swarm</a> &gt; <a ui-sref="docker.swarm.visualizer">Cluster visualizer</a> </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-object-group" title-text="Cluster information">\n        <div class="pull-right">\n          <button type="button" class="btn btn-sm btn-primary" ng-click="changeShowInformationPanel(true)" ng-if="!state.ShowInformationPanel">Show</button>\n          <button type="button" class="btn btn-sm btn-primary" ng-click="changeShowInformationPanel(false)" ng-if="state.ShowInformationPanel"></button>\n        </div>\n      </rd-widget-header>\n      <rd-widget-body ng-if="state.ShowInformationPanel">\n        <table class="table">\n          <tbody>\n            <tr>\n              <td>Nodes</td>\n              <td>{{ nodes.length }}</td>\n            </tr>\n            <tr>\n              <td>Services</td>\n              <td>{{ services.length }}</td>\n            </tr>\n            <tr>\n              <td>Tasks</td>\n              <td>{{ tasks.length }}</td>\n            </tr>\n          </tbody>\n        </table>\n        <form class="form-horizontal">\n          <div class="col-sm-12 form-section-title">\n            Options\n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <label class="control-label text-left">\n                \n              </label>\n              <label class="switch" style="margin-left: 20px;">\n                <input type="checkbox" ng-model="state.DisplayOnlyRunningTasks" ng-change="changeDisplayOnlyRunningTasks()" /><i></i>\n              </label>\n            </div>\n            <div class="col-sm-12">\n              <label class="control-label text-left">\n                \n              </label>\n              <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="state.DisplayNodeLabels" ng-change="changeDisplayNodeLabels()" /><i></i> </label>\n            </div>\n          </div>\n        </form>\n        <form class="form-horizontal">\n          <div class="col-sm-12 form-section-title">\n            Refresh\n          </div>\n          <div class="form-group">\n            <label for="refreshRate" class="col-sm-1 margin-sm-top control-label text-left">\n              Rate\n              <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="display: none;"></i>\n            </label>\n            <div class="col-sm-2">\n              <select id="refreshRate" ng-model="state.refreshRate" ng-change="changeUpdateRepeater()" class="form-control">\n                <option value="5">5s</option>\n                <option value="10">10s</option>\n                <option value="30">30s</option>\n                <option value="60">60s</option>\n              </select>\n            </div>\n          </div>\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row" ng-if="visualizerData">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-object-group" title-text="Cluster visualizer"></rd-widget-header>\n      <rd-widget-body>\n        <div class="visualizer_container">\n          <div class="node" ng-repeat="node in visualizerData.nodes | orderBy : [\'Role\', \'Hostname\'] track by $index">\n            <div class="node_info">\n              <div>\n                <div>\n                  <b>{{ node.Name || node.Hostname }}</b>\n                  <span class="node_platform">\n                    <i class="fab fa-linux" aria-hidden="true" ng-if="node.PlatformOS === \'linux\'"></i>\n                    <i class="fab fa-windows" aria-hidden="true" ng-if="node.PlatformOS === \'windows\'"></i>\n                  </span>\n                </div>\n              </div>\n              <div>{{ node.Role }}</div>\n              <div>CPU: {{ node.CPUs / 1000000000 }}</div>\n              <div>Memory: {{ node.Memory | humansize: 2 }}</div>\n              <div\n                ><span class="label label-{{ node.Status | nodestatusbadge }}">{{ node.Status }}</span></div\n              >\n              <div class="node_labels" ng-if="node.Labels.length > 0 && state.DisplayNodeLabels">\n                <div></div>\n                <div class="node_label" ng-repeat="label in node.Labels">\n                  <span class="label_key">\n                    {{ label.key }}\n                  </span>\n                  <span class="label_value" ng-if="label.value"> = {{ label.value }} </span>\n                </div>\n              </div>\n            </div>\n            <div class="tasks">\n              <div\n                class="task task_{{ task.Status.State | visualizerTask }}"\n                style="border: 2px solid {{ task.ServiceId | visualizerTaskBorderColor }}"\n                ng-repeat="task in node.Tasks | orderBy: \'ServiceName\' | filter: (state.DisplayOnlyRunningTasks || \'\') && { Status: { State: \'\' } }"\n              >\n                <div class="service_name">{{ task.ServiceName }}</div>\n                <div>Image: {{ task.Spec.ContainerSpec.Image | hideshasum }}</div>\n                <div>Status: {{ task.Status.State }}</div>\n                <div>Update: {{ task.Updated | getisodate }}</div>\n                <div ng-if="task.Spec.Resources.Limits.MemoryBytes">Memory limit: {{ task.Spec.Resources.Limits.MemoryBytes | humansize: 2:2 }}</div>\n                <div ng-if="task.Spec.Resources.Limits.NanoCPUs">CPU limit: {{ task.Spec.Resources.Limits.NanoCPUs / 1000000000 }}</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/tasks/edit/task.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Task details"></rd-header-title>\n  <rd-header-content ng-if="task && service">\n    <a ui-sref="docker.services">Services</a> &gt; <a ui-sref="docker.services.service({id: service.Id })">{{ service.Name }}</a> &gt; {{ task.Id }}\n  </rd-header-content>\n</rd-header>\n\n<div class="row" ng-if="task && service">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-tasks" title-text="Task status"></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <tbody>\n            <tr>\n              <td>ID</td>\n              <td>{{ task.Id }}</td>\n            </tr>\n            <tr>\n              <td>State</td>\n              <td\n                ><span class="label label-{{ task.Status.State | taskstatusbadge }}">{{ task.Status.State }}</span></td\n              >\n            </tr>\n            <tr>\n              <td>State Message</td>\n              <td>{{ task.Status.Message }}</td>\n            </tr>\n            <tr ng-if="task.Status.Err">\n              <td>Error message</td>\n              <td\n                ><code>{{ task.Status.Err }}</code></td\n              >\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ task.Spec.ContainerSpec.Image | hideshasum }}</td>\n            </tr>\n            <tr ng-if="service.Mode !== \'global\'">\n              <td>Slot</td>\n              <td>{{ task.Slot }}</td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ task.Created | getisodate }}</td>\n            </tr>\n            <tr ng-if="task.Status.ContainerStatus.ContainerID">\n              <td>Container ID</td>\n              <td>{{ task.Status.ContainerStatus.ContainerID }}</td>\n            </tr>\n            <tr ng-if="applicationState.endpoint.apiVersion >= 1.3 && task.Status.State | taskhaslogs">\n              <td colspan="2"\n                ><a class="btn btn-primary btn-sm" type="button" ui-sref="docker.tasks.task.logs({id: task.Id})"\n                  ><i class="fa fa-file-alt space-right" aria-hidden="true"></i>Task logs</a\n                ></td\n              >\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/tasks/logs/tasklogs.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Task details"></rd-header-title>\n  <rd-header-content ng-if="task && service">\n    <a ui-sref="docker.services">Services</a> &gt; <a ui-sref="docker.services.service({id: service.Id })">{{ service.Name }}</a> &gt;\n    <a ui-sref="docker.tasks.task({id: task.Id })">{{ task.Id }}</a> &gt; Logs\n  </rd-header-content>\n</rd-header>\n\n<log-viewer\n  data="logs"\n  ng-if="logs"\n  log-collection-change="changeLogCollection"\n  display-timestamps="state.displayTimestamps"\n  line-count="state.lineCount"\n  since-timestamp="state.sinceTimestamp"\n  resource-name="task.Id"\n></log-viewer>\n')}]),e.exports=n},function(e,t){var n="app/portainer/views/templates/templates.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header id="view-top">\n  <rd-header-title title-text="">\n    <a data-toggle="tooltip" title="" ui-sref="docker.templates" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content>Templates</rd-header-content>\n</rd-header>\n\n<div class="row">\n  \x3c!-- stack-form --\x3e\n  <stack-from-template-form\n    ng-if="state.selectedTemplate && (state.selectedTemplate.Type === 2 || state.selectedTemplate.Type === 3)"\n    template="state.selectedTemplate"\n    form-values="formValues"\n    state="state"\n    create-template="createTemplate"\n    unselect-template="unselectTemplate"\n  >\n  </stack-from-template-form>\n  \x3c!-- !stack-form --\x3e\n  \x3c!-- container-form --\x3e\n  <div class="col-sm-12" ng-if="state.selectedTemplate && state.selectedTemplate.Type === 1">\n    <rd-widget>\n      <rd-widget-custom-header icon="state.selectedTemplate.Logo" title-text="state.selectedTemplate.Image"></rd-widget-custom-header>\n      <rd-widget-body classes="padding">\n        <form class="form-horizontal" name="selectedTemplateType1">\n          \x3c!-- description --\x3e\n          <div ng-if="state.selectedTemplate.Note">\n            <div class="col-sm-12 form-section-title">\n              Information\n            </div>\n            <div class="form-group">\n              <div class="col-sm-12">\n                <div class="template-note" ng-if="state.selectedTemplate.Note" ng-bind-html="state.selectedTemplate.Note"></div>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !description --\x3e\n          <div class="col-sm-12 form-section-title">\n            Configuration\n          </div>\n          \x3c!-- name-input --\x3e\n          <div class="form-group">\n            <label for="container_name" class="col-sm-2 control-label text-left"></label>\n            <div class="col-sm-10">\n              <input type="text" name="container_name" class="form-control" ng-model="formValues.name" placeholder=" web (optional)" />\n            </div>\n          </div>\n          \x3c!-- !name-input --\x3e\n          \x3c!-- network-input --\x3e\n          <div class="form-group">\n            <label for="container_network" class="col-sm-2 control-label text-left"></label>\n            <div class="col-sm-10">\n              <select class="form-control" ng-options="net.Name for net in availableNetworks | orderBy: \'Name\'" ng-model="formValues.network">\n                <option disabled hidden value=""></option>\n              </select>\n            </div>\n          </div>\n          \x3c!-- !network-input --\x3e\n          \x3c!-- env --\x3e\n          <div ng-repeat="var in state.selectedTemplate.Env" ng-if="!var.preset || var.select" class="form-group">\n            <label for="field_{{ $index }}" class="col-sm-2 control-label text-left">\n              {{ var.label }}\n              <portainer-tooltip ng-if="var.description" position="bottom" message="{{ var.description }}"></portainer-tooltip>\n            </label>\n            <div class="col-sm-10">\n              <input type="text" class="form-control" ng-if="!var.select" ng-model="var.value" id="field_{{ $index }}" />\n              <select class="form-control" ng-if="var.select" ng-model="var.value" id="field_{{ $index }}">\n                <option selected disabled hidden value="">Select value</option>\n                <option ng-repeat="choice in var.select" value="{{ choice.value }}">{{ choice.text }}</option>\n              </select>\n            </div>\n          </div>\n          \x3c!-- !env --\x3e\n          \x3c!-- access-control --\x3e\n          <por-access-control-form form-data="formValues.AccessControlData"></por-access-control-form>\n          \x3c!-- !access-control --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <a class="small interactive" ng-if="!state.showAdvancedOptions" ng-click="state.showAdvancedOptions = true;">\n                <i class="fa fa-plus space-right" aria-hidden="true"></i> \n              </a>\n              <a class="small interactive" ng-if="state.showAdvancedOptions" ng-click="state.showAdvancedOptions = false;">\n                <i class="fa fa-minus space-right" aria-hidden="true"></i> \n              </a>\n            </div>\n          </div>\n          <div ng-if="state.showAdvancedOptions">\n            \x3c!-- port-mapping --\x3e\n            <div class="form-group">\n              <div class="col-sm-12" style="margin-top: 5px;">\n                <label class="control-label text-left"></label>\n                <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addPortBinding()">\n                  <i class="fa fa-plus-circle" aria-hidden="true"></i> \n                </span>\n              </div>\n              <div class="col-sm-12" style="margin-top: 10px;" ng-if="state.selectedTemplate.Ports.length > 0">\n                <span class="small text-muted">Portainer</span>\n              </div>\n              \x3c!-- !port-mapping --\x3e\n              \x3c!-- port-mapping-input-list --\x3e\n              <div class="col-sm-12">\n                <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n                  <div ng-repeat="portBinding in state.selectedTemplate.Ports" style="margin-top: 2px;">\n                    \x3c!-- host-port --\x3e\n                    <div class="input-group col-sm-4 input-group-sm">\n                      <span class="input-group-addon">host</span>\n                      <input type="text" class="form-control" ng-model="portBinding.hostPort" placeholder=" 80 or 1.2.3.4:80 (optional)" />\n                    </div>\n                    \x3c!-- !host-port --\x3e\n                    <span style="margin: 0 10px 0 10px;">\n                      <i class="fa fa-long-arrow-alt-right" aria-hidden="true"></i>\n                    </span>\n                    \x3c!-- container-port --\x3e\n                    <div class="input-group col-sm-4 input-group-sm">\n                      <span class="input-group-addon"></span>\n                      <input type="text" class="form-control" ng-model="portBinding.containerPort" placeholder=" 80" />\n                    </div>\n                    \x3c!-- !container-port --\x3e\n                    \x3c!-- protocol-actions --\x3e\n                    <div class="input-group col-sm-3 input-group-sm">\n                      <div class="btn-group btn-group-sm">\n                        <label class="btn btn-primary" ng-model="portBinding.protocol" uib-btn-radio="\'tcp\'">TCP</label>\n                        <label class="btn btn-primary" ng-model="portBinding.protocol" uib-btn-radio="\'udp\'">UDP</label>\n                      </div>\n                      <button class="btn btn-sm btn-danger" type="button" ng-click="removePortBinding($index)">\n                        <i class="fa fa-trash" aria-hidden="true"></i>\n                      </button>\n                    </div>\n                    \x3c!-- !protocol-actions --\x3e\n                  </div>\n                </div>\n              </div>\n            </div>\n            \x3c!-- !port-mapping-input-list --\x3e\n            \x3c!-- volume-mapping --\x3e\n            <div class="form-group">\n              <div class="col-sm-12" style="margin-top: 5px;">\n                <label class="control-label text-left"></label>\n                <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addVolume()">\n                  <i class="fa fa-plus-circle" aria-hidden="true"></i> \n                </span>\n              </div>\n              <div class="col-sm-12" style="margin-top: 10px;" ng-if="state.selectedTemplate.Volumes.length > 0">\n                <span class="small text-muted"> <b>auto</b> Portainer</span>\n              </div>\n              <div ng-repeat="volume in state.selectedTemplate.Volumes">\n                <div class="col-sm-12" style="margin-top: 10px;">\n                  \x3c!-- volume-line1 --\x3e\n                  <div class="col-sm-12 form-inline">\n                    \x3c!-- container-path --\x3e\n                    <div class="input-group input-group-sm col-sm-6">\n                      <span class="input-group-addon"></span>\n                      <input type="text" class="form-control" ng-model="volume.container" placeholder=" /path/in/container" />\n                    </div>\n                    \x3c!-- !container-path --\x3e\n                    \x3c!-- volume-type --\x3e\n                    <div class="input-group col-sm-5" style="margin-left: 5px;">\n                      <div class="btn-group btn-group-sm">\n                        <label class="btn btn-primary" ng-model="volume.type" uib-btn-radio="\'auto\'" ng-click="volume.bind = \'\'">Auto</label>\n                        <label class="btn btn-primary" ng-model="volume.type" uib-btn-radio="\'volume\'" ng-click="volume.bind = \'\'"></label>\n                        <label class="btn btn-primary" ng-model="volume.type" uib-btn-radio="\'bind\'" ng-click="volume.bind = \'\'" ng-if="isAdmin || allowBindMounts"></label>\n                      </div>\n                      <button class="btn btn-sm btn-danger" type="button" ng-click="removeVolume($index)">\n                        <i class="fa fa-trash" aria-hidden="true"></i>\n                      </button>\n                    </div>\n                    \x3c!-- !volume-type --\x3e\n                  </div>\n                  \x3c!-- !volume-line1 --\x3e\n                  \x3c!-- volume-line2 --\x3e\n                  <div class="col-sm-12 form-inline" style="margin-top: 5px;" ng-if="volume.type !== \'auto\'">\n                    <i class="fa fa-long-arrow-alt-right" aria-hidden="true"></i>\n                    \x3c!-- volume --\x3e\n                    <div class="input-group input-group-sm col-sm-6" ng-if="volume.type === \'volume\'">\n                      <div class="col-sm-12 input-group">\n                        <span class="input-group-addon"></span>\n                        <div class="col-sm-12 input-group">\n                          <select class="form-control" ng-model="volume.bind" ng-options="vol.Name as vol.Name for vol in availableVolumes">\n                            <option value="" disabled selected>Select a volume</option>\n                          </select>\n                        </div>\n                      </div>\n                    </div>\n                    \x3c!-- !volume --\x3e\n                    \x3c!-- bind --\x3e\n                    <div class="input-group input-group-sm col-sm-6" ng-if="volume.type === \'bind\'">\n                      <span class="input-group-addon">host</span>\n                      <input type="text" class="form-control" ng-model="volume.bind" placeholder=" /path/on/host" />\n                    </div>\n                    \x3c!-- !bind --\x3e\n                    \x3c!-- read-only --\x3e\n                    <div class="input-group input-group-sm col-sm-5" style="margin-left: 5px;">\n                      <div class="btn-group btn-group-sm">\n                        <label class="btn btn-primary" ng-model="volume.readonly" uib-btn-radio="false"></label>\n                        <label class="btn btn-primary" ng-model="volume.readonly" uib-btn-radio="true"></label>\n                      </div>\n                    </div>\n                    \x3c!-- !read-only --\x3e\n                  </div>\n                  \x3c!-- !volume-line2 --\x3e\n                </div>\n              </div>\n            </div>\n            \x3c!-- !volume-mapping --\x3e\n            \x3c!-- extra-host --\x3e\n            <div class="form-group">\n              <div class="col-sm-12" style="margin-top: 5px;">\n                <label class="control-label text-left"></label>\n                <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addExtraHost()">\n                  <i class="fa fa-plus-circle" aria-hidden="true"></i> \n                </span>\n              </div>\n              \x3c!-- extra-host-input-list --\x3e\n              <div class="col-sm-12">\n                <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n                  <div ng-repeat="(idx, host) in state.selectedTemplate.Hosts track by $index" style="margin-top: 2px;">\n                    <div class="input-group col-sm-5 input-group-sm">\n                      <span class="input-group-addon">value</span>\n                      <input type="text" class="form-control" ng-model="state.selectedTemplate.Hosts[idx]" placeholder=" host:IP" />\n                    </div>\n                    <button class="btn btn-sm btn-danger" type="button" ng-click="removeExtraHost($index)">\n                      <i class="fa fa-trash" aria-hidden="true"></i>\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n            \x3c!-- !extra-host --\x3e\n            \x3c!-- labels --\x3e\n            <div class="form-group">\n              <div class="col-sm-12" style="margin-top: 5px;">\n                <label class="control-label text-left"></label>\n                <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addLabel()">\n                  <i class="fa fa-plus-circle" aria-hidden="true"></i> \n                </span>\n              </div>\n              \x3c!-- labels-input-list --\x3e\n              <div class="col-sm-12">\n                <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n                  <div ng-repeat="label in state.selectedTemplate.Labels" style="margin-top: 2px;">\n                    <div class="input-group col-sm-5 input-group-sm">\n                      <span class="input-group-addon">name</span>\n                      <input type="text" class="form-control" ng-model="label.name" placeholder=" com.example.foo" />\n                    </div>\n                    <div class="input-group col-sm-5 input-group-sm">\n                      <span class="input-group-addon">value</span>\n                      <input type="text" class="form-control" ng-model="label.value" placeholder=" bar" />\n                    </div>\n                    <button class="btn btn-sm btn-danger" type="button" ng-click="removeLabel($index)">\n                      <i class="fa fa-trash" aria-hidden="true"></i>\n                    </button>\n                  </div>\n                </div>\n              </div>\n              \x3c!-- !labels-input-list --\x3e\n            </div>\n            \x3c!-- !labels --\x3e\n            \x3c!-- hostname --\x3e\n            <div class="form-group">\n              <label for="container_hostname" class="col-sm-2 control-label text-left"></label>\n              <div class="col-sm-10">\n                <input type="text" name="container_hostname" class="form-control" ng-model="state.selectedTemplate.Hostname" placeholder="leave empty to use docker default" />\n              </div>\n            </div>\n            \x3c!-- !hostname --\x3e\n          </div>\n          \x3c!-- !advanced-options --\x3e\n          \x3c!-- actions --\x3e\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button\n                type="button"\n                class="btn btn-primary btn-sm"\n                ng-disabled="state.actionInProgress || !formValues.network"\n                ng-click="createTemplate()"\n                button-spinner="state.actionInProgress"\n              >\n                <span ng-hide="state.actionInProgress"></span>\n                <span ng-show="state.actionInProgress">...</span>\n              </button>\n              <button type="button" class="btn btn-sm btn-default" ng-click="unselectTemplate(state.selectedTemplate)"></button>\n              <span class="text-danger" ng-if="state.formValidationError" style="margin-left: 5px;">{{ state.formValidationError }}</span>\n            </div>\n          </div>\n          \x3c!-- !actions --\x3e\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n  \x3c!-- container-form --\x3e\n</div>\n\n<div class="row">\n  <div class="col-sm-12">\n    <template-list\n      ng-if="templates"\n      title-text="Templates"\n      title-icon="fa-rocket"\n      templates="templates"\n      table-key="templates"\n      select-action="selectTemplate"\n      show-swarm-stacks="applicationState.endpoint.mode.provider === \'DOCKER_SWARM_MODE\' && applicationState.endpoint.mode.role === \'MANAGER\' && applicationState.endpoint.apiVersion >= 1.25"\n    ></template-list>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/volumes/volumes.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="">\n    <a data-toggle="tooltip" title="" ui-sref="docker.volumes" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content></rd-header-content>\n</rd-header>\n<information-panel-offline ng-if="offlineMode"></information-panel-offline>\n<div class="row">\n  <div class="col-sm-12">\n    <volumes-datatable\n      title-text=\n      title-icon="fa-hdd"\n      dataset="volumes"\n      table-key="volumes"\n      order-by="Id"\n      remove-action="removeAction"\n      show-host-column="applicationState.endpoint.mode.agentProxy && applicationState.endpoint.mode.provider === \'DOCKER_SWARM_MODE\'"\n      show-browse-action="showBrowseAction"\n      offline-mode="offlineMode"\n      refresh-callback="getVolumes"\n    ></volumes-datatable>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/volumes/edit/volume.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text=""></rd-header-title>\n  <rd-header-content>\n    <a ui-sref="docker.volumes"></a> &gt; <a ui-sref="docker.volumes.volume({id: volume.Id})">{{ volume.Id }}</a>\n  </rd-header-content>\n</rd-header>\n\n<div class="row" ng-if="volume">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-cube" title-text=""></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <tbody>\n            <tr>\n              <td>ID</td>\n              <td>\n                {{ volume.Id }}\n                <button authorization="DockerVolumeDelete" class="btn btn-xs btn-danger" ng-click="removeVolume()"\n                  ><i class="fa fa-trash-alt space-right" aria-hidden="true"></i></button\n                >\n              </td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ volume.CreatedAt | getisodate }}</td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ volume.Mountpoint }}</td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ volume.Driver }}</td>\n            </tr>\n            <tr ng-if="!(volume.Labels | emptyobject)">\n              <td></td>\n              <td>\n                <table class="table table-bordered table-condensed">\n                  <tr ng-repeat="(k, v) in volume.Labels">\n                    <td>{{ k }}</td>\n                    <td>{{ v }}</td>\n                  </tr>\n                </table>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row" ng-if="isCioDriver">\n  <div class="col-sm-12">\n    <volume-storidge-info volume="storidgeVolume"> </volume-storidge-info>\n  </div>\n</div>\n\n<div class="row" ng-if="isCioDriver">\n  <div class="col-sm-12">\n    <storidge-snapshot-creation volume-id="storidgeVolume.Vdisk" ng-if="storidgeVolume.SnapshotEnabled"> </storidge-snapshot-creation>\n  </div>\n</div>\n\n<div class="row" ng-if="isCioDriver && storidgeVolume.SnapshotEnabled">\n  <div class="col-sm-12">\n    <storidge-snapshots-datatable\n      title-text="Snapshots"\n      title-icon="fa-camera"\n      dataset="storidgeSnapshots"\n      table-key="storidgeSnapshots"\n      order-by="Id"\n      remove-action="removeSnapshot"\n    >\n    </storidge-snapshots-datatable>\n  </div>\n</div>\n\n\x3c!-- access-control-panel --\x3e\n<por-access-control-panel ng-if="volume" resource-id="volume.Id + volume.CreatedAt" resource-control="volume.ResourceControl" resource-type="\'volume\'"> </por-access-control-panel>\n\x3c!-- !access-control-panel --\x3e\n\n<div class="row" ng-if="!(volume.Options | emptyobject)">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-cogs" title-text="Volume options"></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <tbody>\n            <tr ng-repeat="(key, value) in volume.Options">\n              <td>{{ key }}</td>\n              <td>{{ value }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n<div class="row" ng-if="containersUsingVolume.length > 0">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-cubes" title-text=""></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <thead>\n            <th></th>\n            <th></th>\n            <th></th>\n          </thead>\n          <tbody>\n            <tr ng-repeat="container in containersUsingVolume">\n              <td\n                ><a ui-sref="docker.containers.container({ id: container.Id, nodeName: container.NodeName })">{{ container | containername }}</a></td\n              >\n              <td>{{ container.volumeData.Destination }}</td>\n              <td>{{ !container.volumeData.RW }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/volumes/browse/browsevolume.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Volume browser"></rd-header-title>\n  <rd-header-content>\n    <a ui-sref="docker.volumes"></a> &gt; <a ui-sref="docker.volumes.volume({ id: volumeId })">{{ volumeId }}</a> &gt; browse\n  </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <volume-browser volume-id="volumeId" node-name="nodeName" is-upload-enabled="agentApiVersion > 1"></volume-browser>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/volumes/create/createvolume.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text=""></rd-header-title>\n  <rd-header-content> <a ui-sref="docker.volumes"></a> &gt;  </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-body>\n        <form class="form-horizontal" name="volumeCreationForm">\n          \x3c!-- name-input --\x3e\n          <div class="form-group">\n            <label for="volume_name" class="col-sm-2 col-md-1 control-label text-left"></label>\n            <div class="col-sm-10 col-md-11">\n              <input type="text" class="form-control" ng-model="formValues.Name" id="volume_name" placeholder=" myVolume" />\n            </div>\n          </div>\n          \x3c!-- !name-input --\x3e\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          \x3c!-- driver-input --\x3e\n          <div class="form-group">\n            <label for="volume_driver" class="col-sm-2 col-md-1 control-label text-left"></label>\n            <div class="col-sm-10 col-md-11">\n              <select class="form-control" ng-options="driver for driver in availableVolumeDrivers" ng-model="formValues.Driver" ng-if="availableVolumeDrivers.length > 0">\n                <option disabled hidden value="">Select a driver</option>\n              </select>\n              <input type="text" class="form-control" ng-model="formValues.Driver" id="volume_driver" placeholder=" driverName" ng-if="availableVolumeDrivers.length === 0" />\n            </div>\n          </div>\n          \x3c!-- !driver-input --\x3e\n          \x3c!-- driver-options --\x3e\n          <div class="form-group" ng-hide="formValues.CIFSData.useCIFS || formValues.NFSData.useNFS">\n            <div class="col-sm-12" style="margin-top: 5px;">\n              <label class="control-label text-left">\n                \n                <portainer-tooltip\n                  position="bottom"\n                  message=""\n                ></portainer-tooltip>\n              </label>\n              <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addDriverOption()">\n                <i class="fa fa-plus-circle" aria-hidden="true"></i> \n              </span>\n            </div>\n            \x3c!-- driver-options-input-list --\x3e\n            <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n              <div ng-repeat="option in formValues.DriverOptions" style="margin-top: 2px;">\n                <div class="input-group col-sm-5 input-group-sm">\n                  <span class="input-group-addon">name</span>\n                  <input type="text" class="form-control" ng-model="option.name" placeholder=" mountpoint" />\n                </div>\n                <div class="input-group col-sm-5 input-group-sm">\n                  <span class="input-group-addon">value</span>\n                  <input type="text" class="form-control" ng-model="option.value" placeholder=" /path/on/host" />\n                </div>\n                <button class="btn btn-sm btn-danger" type="button" ng-click="removeDriverOption($index)">\n                  <i class="fa fa-trash" aria-hidden="true"></i>\n                </button>\n              </div>\n            </div>\n            \x3c!-- !driver-options-input-list --\x3e\n          </div>\n          \x3c!-- !driver-options --\x3e\n          \x3c!-- nfs-management --\x3e\n          <div class="form-group col-md-12">\n            <label for="useNFS" class="control-label text-left">\n              NFS\n            </label>\n            <label class="switch" style="margin-left: 20px;">\n              <input type="checkbox" name="useNFS" ng-model="formValues.NFSData.useNFS" ng-click="formValues.CIFSData.useCIFS = false" />\n              <i></i>\n            </label>\n            <div ng-if="formValues.NFSData.useNFS" class="small text-muted" style="margin-top: 10px;"> Ensure <code>nfs-utils</code> are installed on your hosts. </div>\n          </div>\n          <volumes-nfs-form data="formValues.NFSData" ng-show="formValues.Driver === \'local\'"></volumes-nfs-form>\n          \x3c!-- !nfs-management --\x3e\n          \x3c!-- cifs-management --\x3e\n          <div class="form-group col-md-12">\n            <label for="useCIFS" class="control-label text-left">\n              CIFS\n            </label>\n            <label class="switch" style="margin-left: 20px;">\n              <input type="checkbox" name="useCIFS" ng-model="formValues.CIFSData.useCIFS" ng-click="formValues.NFSData.useNFS = false" />\n              <i></i>\n            </label>\n            <div ng-if="formValues.CIFSData.useCIFS" class="small text-muted" style="margin-top: 10px;"> Ensure <code>cifs-utils</code> are installed on your hosts. </div>\n          </div>\n          <volumes-cifs-form data="formValues.CIFSData" ng-show="formValues.Driver === \'local\'"></volumes-cifs-form>\n          \x3c!-- !cifs-management --\x3e\n          \x3c!-- storidge --\x3e\n          <div ng-if="formValues.Driver === \'cio:latest\'">\n            <div class="col-sm-12 form-section-title">\n              Storidge\n            </div>\n            <storidge-profile-selector storidge-profile="formValues.StoridgeProfile"></storidge-profile-selector>\n          </div>\n          \x3c!-- storidge --\x3e\n          <div ng-if="applicationState.endpoint.mode.agentProxy && applicationState.endpoint.mode.provider === \'DOCKER_SWARM_MODE\' && formValues.Driver === \'local\'">\n            <div class="col-sm-12 form-section-title">\n              Deployment\n            </div>\n            \x3c!-- node-selection --\x3e\n            <node-selector model="formValues.NodeName"> </node-selector>\n            \x3c!-- !node-selection --\x3e\n          </div>\n          \x3c!-- access-control --\x3e\n          <por-access-control-form form-data="formValues.AccessControlData"></por-access-control-form>\n          \x3c!-- !access-control --\x3e\n          \x3c!-- actions --\x3e\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button\n                type="button"\n                class="btn btn-primary btn-sm"\n                ng-click="create()"\n                ng-disabled="state.actionInProgress || (formValues.NFSData.useNFS && !volumeCreationForm.nfsInformationForm.$valid) || (formValues.CIFSData.useCIFS && !volumeCreationForm.cifsInformationForm.$valid)"\n                button-spinner="state.actionInProgress"\n              >\n                <span ng-hide="state.actionInProgress"></span>\n                <span ng-show="state.actionInProgress">Creating volume...</span>\n              </button>\n              <span class="text-danger" ng-if="state.formValidationError" style="margin-left: 5px;">{{ state.formValidationError }}</span>\n            </div>\n          </div>\n          \x3c!-- !actions --\x3e\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){var a="app/portainer/views/sidebar/sidebar.html",r='\x3c!-- Sidebar --\x3e\n<div id="sidebar-wrapper">\n  <div class="sidebar-header">\n    <a ui-sref="portainer.home">\n      <img ng-if="logo" ng-src="{{ logo }}" class="img-responsive logo" />\n      <img ng-if="!logo" src="'+n(776)+'" class="img-responsive logo" alt="Portainer" />\n    </a>\n    <a ng-click="toggleSidebar()"><span class="menu-icon glyphicon glyphicon-transfer"></span></a>\n  </div>\n  <div class="sidebar-content">\n    <ul class="sidebar">\n      <li class="sidebar-list">\n        <a ui-sref="portainer.home" ui-sref-active="active"> <span class="menu-icon fa fa-home fa-fw"></span></a>\n      </li>\n      <li class="sidebar-title endpoint-name" ng-if="applicationState.endpoint.name"> <span class="fa fa-plug space-right"></span>{{ applicationState.endpoint.name }} </li>\n      <kubernetes-sidebar-content\n        ng-if="applicationState.endpoint.mode && applicationState.endpoint.mode.provider === \'KUBERNETES\'"\n        admin-access="isAdmin"\n        endpoint-id="endpointId"\n        current-state="$state.current.name"\n      >\n      </kubernetes-sidebar-content>\n      <azure-sidebar-content ng-if="applicationState.endpoint.mode && applicationState.endpoint.mode.provider === \'AZURE\'" endpoint-id="endpointId"> </azure-sidebar-content>\n      <docker-sidebar-content\n        ng-if="applicationState.endpoint.mode && applicationState.endpoint.mode.provider !== \'AZURE\' && applicationState.endpoint.mode.provider !== \'KUBERNETES\'"\n        current-route-name="$state.current.name"\n        toggle="toggle"\n        show-stacks="showStacks"\n        endpoint-api-version="applicationState.endpoint.apiVersion"\n        swarm-management="applicationState.endpoint.mode.provider === \'DOCKER_SWARM_MODE\' && applicationState.endpoint.mode.role === \'MANAGER\'"\n        standalone-management="applicationState.endpoint.mode.provider === \'DOCKER_STANDALONE\'"\n        admin-access="isAdmin"\n        offline-mode="endpointState.OfflineMode"\n        endpoint-id="endpointId"\n      ></docker-sidebar-content>\n      <li class="sidebar-title" authorization="IntegrationStoridgeAdmin" ng-if="applicationState.endpoint.mode && applicationState.endpoint.extensions.length > 0">\n        <span>Integrations</span>\n      </li>\n      <li\n        authorization="IntegrationStoridgeAdmin"\n        class="sidebar-list"\n        ng-if="\n          applicationState.endpoint.mode &&\n          applicationState.endpoint.extensions.indexOf(\'storidge\') !== -1 &&\n          applicationState.endpoint.mode.provider === \'DOCKER_SWARM_MODE\' &&\n          applicationState.endpoint.mode.role === \'MANAGER\'\n        "\n      >\n        <a ui-sref="storidge.cluster" ui-sref-active="active">Storidge <span class="menu-icon fa fa-bolt fa-fw"></span></a>\n        <div\n          class="sidebar-sublist"\n          ng-if="\n            toggle &&\n            ($state.current.name === \'storidge.cluster\' ||\n              $state.current.name === \'storidge.profiles\' ||\n              $state.current.name === \'storidge.monitor\' ||\n              $state.current.name === \'storidge.profiles.new\' ||\n              $state.current.name === \'storidge.profiles.profile\' ||\n              $state.current.name === \'storidge.drives\' ||\n              $state.current.name === \'storidge.drives.drive\' ||\n              $state.current.name === \'storidge.cluster.node\')\n          "\n        >\n          <a ui-sref="storidge.monitor" ui-sref-active="active">Monitor</a>\n        </div>\n        <div\n          class="sidebar-sublist"\n          ng-if="\n            toggle &&\n            ($state.current.name === \'storidge.cluster\' ||\n              $state.current.name === \'storidge.profiles\' ||\n              $state.current.name === \'storidge.monitor\' ||\n              $state.current.name === \'storidge.profiles.new\' ||\n              $state.current.name === \'storidge.profiles.profile\' ||\n              $state.current.name === \'storidge.drives\' ||\n              $state.current.name === \'storidge.drives.drive\' ||\n              $state.current.name === \'storidge.cluster.node\')\n          "\n        >\n          <a ui-sref="storidge.profiles" ui-sref-active="active">Profiles</a>\n        </div>\n        <div\n          class="sidebar-sublist"\n          ng-if="\n            toggle &&\n            ($state.current.name === \'storidge.cluster\' ||\n              $state.current.name === \'storidge.profiles\' ||\n              $state.current.name === \'storidge.monitor\' ||\n              $state.current.name === \'storidge.profiles.new\' ||\n              $state.current.name === \'storidge.profiles.profile\' ||\n              $state.current.name === \'storidge.drives\' ||\n              $state.current.name === \'storidge.drives.drive\' ||\n              $state.current.name === \'storidge.cluster.node\')\n          "\n        >\n          <a ui-sref="storidge.drives" ui-sref-active="active">Drives</a>\n        </div>\n      </li>\n      <li class="sidebar-title" ng-if="isAdmin && applicationState.application.enableEdgeComputeFeatures">\n        <span>Edge Compute</span>\n      </li>\n      <li class="sidebar-list" ng-if="isAdmin && applicationState.application.enableEdgeComputeFeatures">\n        <a ui-sref="edge.groups" ui-sref-active="active">Edge Groups <span class="menu-icon fa fa-object-group fa-fw"></span></a>\n      </li>\n      <li class="sidebar-list" ng-if="isAdmin && applicationState.application.enableEdgeComputeFeatures">\n        <a ui-sref="edge.stacks" ui-sref-active="active"> <span class="menu-icon fa fa-layer-group fa-fw"></span></a>\n      </li>\n      <li class="sidebar-list" ng-if="isAdmin && applicationState.application.enableEdgeComputeFeatures">\n        <a ui-sref="edge.jobs" ui-sref-active="active">Edge Jobs <span class="menu-icon fa fa-clock fa-fw"></span></a>\n      </li>\n      <li class="sidebar-title">\n        <span></span>\n      </li>\n      <li class="sidebar-list" ng-if="isAdmin || isTeamLeader">\n        <a ui-sref="portainer.users" ui-sref-active="active"> <span class="menu-icon fa fa-users fa-fw"></span></a>\n        <div\n          class="sidebar-sublist"\n          ng-if="\n            toggle &&\n            ($state.current.name === \'portainer.users\' ||\n              $state.current.name === \'portainer.users.user\' ||\n              $state.current.name === \'portainer.teams\' ||\n              $state.current.name === \'portainer.teams.team\' ||\n              $state.current.name === \'portainer.roles\')\n          "\n        >\n          <a ui-sref="portainer.teams" ui-sref-active="active"></a>\n        </div>\n        <div\n          class="sidebar-sublist"\n          ng-if="\n            toggle &&\n            ($state.current.name === \'portainer.users\' ||\n              $state.current.name === \'portainer.users.user\' ||\n              $state.current.name === \'portainer.teams\' ||\n              $state.current.name === \'portainer.teams.team\' ||\n              $state.current.name === \'portainer.roles\')\n          "\n        >\n          <a ui-sref="portainer.roles" ui-sref-active="active"></a>\n        </div>\n      </li>\n      <li class="sidebar-list" ng-if="isAdmin">\n        <a\n          ui-sref="portainer.endpoints"\n          ng-class="{ active: $state.current.name.includes(\'portainer.endpoints\') && $state.current.name !== \'portainer.endpoints.endpoint.kubernetesConfig\' }"\n          > <span class="menu-icon fa fa-plug fa-fw"></span\n        ></a>\n        <div\n          class="sidebar-sublist"\n          ng-if="\n            toggle &&\n            ($state.current.name === \'portainer.endpoints\' ||\n              $state.current.name === \'portainer.endpoints.endpoint\' ||\n              $state.current.name === \'portainer.endpoints.new\' ||\n              $state.current.name === \'portainer.endpoints.endpoint.access\' ||\n              $state.current.name === \'portainer.groups\' ||\n              $state.current.name === \'portainer.groups.group\' ||\n              $state.current.name === \'portainer.groups.group.access\' ||\n              $state.current.name === \'portainer.groups.new\' ||\n              $state.current.name === \'portainer.tags\')\n          "\n        >\n          <a ui-sref="portainer.groups" ui-sref-active="active"></a>\n        </div>\n        <div\n          class="sidebar-sublist"\n          ng-if="\n            toggle &&\n            ($state.current.name === \'portainer.endpoints\' ||\n              $state.current.name === \'portainer.endpoints.endpoint\' ||\n              $state.current.name === \'portainer.endpoints.new\' ||\n              $state.current.name === \'portainer.endpoints.endpoint.access\' ||\n              $state.current.name === \'portainer.groups\' ||\n              $state.current.name === \'portainer.groups.group\' ||\n              $state.current.name === \'portainer.groups.group.access\' ||\n              $state.current.name === \'portainer.groups.new\' ||\n              $state.current.name === \'portainer.tags\')\n          "\n        >\n          <a ui-sref="portainer.tags" ui-sref-active="active"> </a>\n        </div>\n      </li>\n      <li class="sidebar-list">\n        <a ui-sref="portainer.registries" ui-sref-active="active"> <span class="menu-icon fa fa-database fa-fw"></span></a>\n      </li>\n      <li class="sidebar-list" ng-if="isAdmin">\n        <a ui-sref="portainer.settings" ui-sref-active="active"> <span class="menu-icon fa fa-cogs fa-fw"></span></a>\n        <div class="sidebar-sublist" ng-if="toggle && ($state.current.name === \'portainer.settings\' || $state.current.name === \'portainer.settings.authentication\') && isAdmin">\n          <a ui-sref="portainer.settings.authentication" ui-sref-active="active"></a></div\n        >\n        <div class="sidebar-sublist" ng-if="toggle && ($state.current.name === \'portainer.settings\' || $state.current.name === \'portainer.settings.authentication\')">\n          <a href="http://www.portainer.io/help_about" target="_blank">/</a>\n        </div>\n      </li>\n    </ul>\n    <div class="sidebar-footer-content">\n      <div class="update-notification" ng-if="applicationState.application.versionStatus.UpdateAvailable">\n        <a target="_blank" href="https://github.com/portainer/portainer/releases/tag/{{ applicationState.application.versionStatus.LatestVersion }}" style="color: #091e5d;">\n          <i class="fa-lg fas fa-cloud-download-alt" style="margin-right: 2px;"></i> \n        </a>\n      </div>\n      <div>\n        <img src="'+n(777)+'" class="img-responsive logo" alt="Portainer" />\n        <span class="version">{{ uiVersion }}</span>\n      </div>\n    </div>\n  </div>\n</div>\n\x3c!-- End Sidebar --\x3e\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(a,r)}]),e.exports=a},function(e,t,n){e.exports=n.p+"f461b0cc3c2692b7b8475389b6a051ec.png"},function(e,t,n){e.exports=n.p+"24b23490023e318f9c08cf94253542a0.png"},function(e,t){var n="app/portainer/views/account/account.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text=""></rd-header-title>\n  <rd-header-content></rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-lock" title-text=""></rd-widget-header>\n      <rd-widget-body>\n        <form class="form-horizontal" style="margin-top: 15px;">\n          \x3c!-- current-password-input --\x3e\n          <div class="form-group">\n            <label for="current_password" class="col-sm-2 control-label text-left"></label>\n            <div class="col-sm-8">\n              <div class="input-group">\n                <span class="input-group-addon"><i class="fa fa-lock" aria-hidden="true"></i></span>\n                <input type="password" class="form-control" ng-model="formValues.currentPassword" id="current_password" />\n              </div>\n            </div>\n          </div>\n          \x3c!-- !current-password-input --\x3e\n          \x3c!-- new-password-input --\x3e\n          <div class="form-group">\n            <label for="new_password" class="col-sm-2 control-label text-left"></label>\n            <div class="col-sm-8">\n              <div class="input-group">\n                <span class="input-group-addon"><i class="fa fa-lock" aria-hidden="true"></i></span>\n                <input type="password" class="form-control" ng-model="formValues.newPassword" id="new_password" />\n              </div>\n            </div>\n          </div>\n          \x3c!-- !new-password-input --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <i ng-class="{ true: \'fa fa-check green-icon\', false: \'fa fa-times red-icon\' }[formValues.newPassword.length >= 8]" aria-hidden="true"></i>\n              <span class="small text-muted">8</span>\n            </div>\n          </div>\n          \x3c!-- confirm-password-input --\x3e\n          <div class="form-group">\n            <label for="confirm_password" class="col-sm-2 control-label text-left"></label>\n            <div class="col-sm-8">\n              <div class="input-group">\n                <span class="input-group-addon"><i class="fa fa-lock" aria-hidden="true"></i></span>\n                <input type="password" class="form-control" ng-model="formValues.confirmPassword" id="confirm_password" />\n                <span class="input-group-addon"\n                  ><i\n                    ng-class="\n                      { true: \'fa fa-check green-icon\', false: \'fa fa-times red-icon\' }[formValues.newPassword !== \'\' && formValues.newPassword === formValues.confirmPassword]\n                    "\n                    aria-hidden="true"\n                  ></i\n                ></span>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !confirm-password-input --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button\n                type="submit"\n                class="btn btn-primary btn-sm"\n                ng-disabled="(AuthenticationMethod !== 1 && userID !== 1) || !formValues.currentPassword || formValues.newPassword.length < 8 || formValues.newPassword !== formValues.confirmPassword"\n                ng-click="updatePassword()"\n                ></button\n              >\n              <span class="text-muted small" style="margin-left: 5px;" ng-if="AuthenticationMethod === 2 && userID !== 1">\n                <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>\n                You cannot change your password when using LDAP authentication.\n              </span>\n              <span class="text-muted small" style="margin-left: 5px;" ng-if="AuthenticationMethod === 3 && userID !== 1">\n                <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>\n                OAuth\n              </span>\n            </div>\n          </div>\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){var a="app/portainer/views/auth/auth.html",r='<div class="page-wrapper">\n  \x3c!-- login box --\x3e\n  <div class="container simple-box">\n    <div class="col-sm-6 col-sm-offset-3">\n      \x3c!-- login box logo --\x3e\n      <div class="row">\n        <img ng-if="!ctrl.logo" src="'+n(264)+'" class="simple-box-logo" alt="Portainer" />\n        <img ng-if="ctrl.logo" ng-src="{{ ctrl.logo }}" class="simple-box-logo" />\n      </div>\n      \x3c!-- !login box logo --\x3e\n      \x3c!-- login panel --\x3e\n      <div class="panel panel-default" ng-if="!ctrl.state.loginInProgress">\n        <div class="panel-body">\n          \x3c!-- login form --\x3e\n          <form class="simple-box-form form-horizontal">\n            \x3c!-- username input --\x3e\n            <div class="input-group">\n              <span class="input-group-addon"><i class="fa fa-user" aria-hidden="true"></i></span>\n              <input id="username" type="text" class="form-control" name="username" ng-model="ctrl.formValues.Username" auto-focus />\n            </div>\n            \x3c!-- !username input --\x3e\n            \x3c!-- password input --\x3e\n            <div class="input-group">\n              <span class="input-group-addon"><i class="fa fa-lock" aria-hidden="true"></i></span>\n              <input id="password" type="password" class="form-control" name="password" ng-model="ctrl.formValues.Password" />\n            </div>\n            \x3c!-- !password input --\x3e\n            \x3c!-- login button --\x3e\n            <div class="form-group">\n              <div class="col-sm-12">\n                <a ng-href="{{ ctrl.OAuthLoginURI }}" ng-if="ctrl.AuthenticationMethod === 3">\n                  <div class="btn btn-primary btn-sm pull-left" style="margin-left: 2px;" ng-if="ctrl.state.OAuthProvider === \'Microsoft\'">\n                    <i class="fab fa-microsoft" aria-hidden="true"></i> Login with Microsoft\n                  </div>\n                  <div class="btn btn-primary btn-sm pull-left" style="margin-left: 2px;" ng-if="ctrl.state.OAuthProvider === \'Google\'">\n                    <i class="fab fa-google" aria-hidden="true"></i> Login with Google\n                  </div>\n                  <div class="btn btn-primary btn-sm pull-left" style="margin-left: 2px;" ng-if="ctrl.state.OAuthProvider === \'Github\'">\n                    <i class="fab fa-github" aria-hidden="true"></i> Login with Github\n                  </div>\n                  <div class="btn btn-primary btn-sm pull-left" style="margin-left: 2px;" ng-if="ctrl.state.OAuthProvider === \'OAuth\'">\n                    <i class="fa fa-sign-in-alt" aria-hidden="true"></i> Login with OAuth\n                  </div>\n                </a>\n\n                <button\n                  type="submit"\n                  class="btn btn-primary btn-sm pull-right"\n                  ng-click="ctrl.authenticateUser()"\n                  button-spinner="ctrl.state.loginInProgress"\n                  ng-disabled="ctrl.state.loginInProgress"\n                >\n                  <span ng-hide="ctrl.state.loginInProgress"><i class="fa fa-sign-in-alt" aria-hidden="true"></i> </span>\n                  <span ng-show="ctrl.state.loginInProgress">Login in progress...</span>\n                </button>\n\n                <span class="pull-right" style="margin: 5px;" ng-if="ctrl.state.AuthenticationError">\n                  <i class="fa fa-exclamation-triangle red-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                  <span class="small text-danger">{{ ctrl.state.AuthenticationError }}</span>\n                </span>\n              </div>\n            </div>\n\n            \x3c!-- !login button --\x3e\n          </form>\n          \x3c!-- !login form --\x3e\n        </div>\n      </div>\n      \x3c!-- !login panel --\x3e\n      <div class="panel panel-default" ng-show="ctrl.state.loginInProgress">\n        <div class="panel-body">\n          <div class="form-group text-center">\n            <span class="small text-muted">Authentication in progress... <span button-spinner="true"></span></span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  \x3c!-- !login box --\x3e\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(a,r)}]),e.exports=a},function(e,t,n){var a="app/portainer/views/logout/logout.html",r='<div class="page-wrapper">\n  \x3c!-- login box --\x3e\n  <div class="container simple-box">\n    <div class="col-md-6 col-md-offset-3 col-sm-6 col-sm-offset-3">\n      \x3c!-- login box logo --\x3e\n      <div class="row">\n        <img ng-if="!ctrl.logo" src="'+n(264)+'" class="simple-box-logo" alt="Portainer" />\n        <img ng-if="ctrl.logo" ng-src="{{ ctrl.logo }}" class="simple-box-logo" />\n      </div>\n      <div class="row" style="text-align: center;">\n        Logout in progress...\n        <i class="fa fa-cog fa-spin" style="margin-left: 5px;"></i>\n      </div>\n    </div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(a,r)}]),e.exports=a},function(e,t){var n="app/portainer/views/endpoints/endpoints.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="">\n    <a data-toggle="tooltip" title="" ui-sref="portainer.endpoints" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content></rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <endpoints-datatable\n      title-text=""\n      title-icon="fa-plug"\n      table-key="endpoints"\n      order-by="Name"\n      remove-action="removeAction"\n      retrieve-page="getPaginatedEndpoints"\n    ></endpoints-datatable>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/portainer/views/endpoints/edit/endpoint.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="">\n    <a data-toggle="tooltip" title="" ui-sref="portainer.endpoints.endpoint({id: endpoint.Id})" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content>\n    <a ui-sref="portainer.endpoints"></a> &gt; <a ui-sref="portainer.endpoints.endpoint({id: endpoint.Id})">{{ endpoint.Name }}</a>\n  </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <information-panel ng-if="state.edgeEndpoint && endpoint.EdgeID" title-text="Edge information">\n    <span class="small text-muted">\n      <p>\n        <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n        This Edge endpoint is associated to an Edge environment {{ state.kubernetesEndpoint ? \'(Kubernetes)\' : \'(Docker)\' }}.\n      </p>\n      <p>\n        Edge key: <code>{{ endpoint.EdgeKey }}</code>\n      </p>\n      <p>\n        Edge identifier: <code>{{ endpoint.EdgeID }}</code>\n      </p>\n    </span>\n  </information-panel>\n  <information-panel ng-if="state.edgeEndpoint && !endpoint.EdgeID" title-text="Deploy an agent">\n    <span class="small text-muted">\n      <p>\n        <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n        Edge\n      </p>\n      <p>\n        The agent will communicate with Portainer via <u>{{ edgeKeyDetails.instanceURL }}</u> and <u>tcp://{{ edgeKeyDetails.tunnelServerAddr }}</u>\n      </p>\n      <div class="input-group input-group-sm" style="margin-top: 10px; margin-bottom: 10px;">\n        <div class="btn-group btn-group-sm">\n          <label class="btn btn-primary" ng-model="state.platformType" uib-btn-radio="\'linux\'"><i class="fab fa-linux" style="margin-right: 2px;"></i> Linux</label>\n          <label class="btn btn-primary" ng-model="state.platformType" uib-btn-radio="\'windows\'"><i class="fab fa-windows" style="margin-right: 2px;"></i> Windows</label>\n        </div>\n      </div>\n      <div style="margin-top: 10px;">\n        <uib-tabset active="state.deploymentTab">\n          <uib-tab index="0" ng-if="state.platformType === \'linux\'" heading="Kubernetes">\n            <code style="display: block; white-space: pre-wrap; padding: 16px 90px;"\n              >curl https://downloads.portainer.io/portainer-edge-agent-setup.sh | sudo bash -s -- {{ randomEdgeID }} {{ endpoint.EdgeKey }}</code\n            >\n          </uib-tab>\n          <uib-tab index="1" heading="Docker Swarm">\n            <code ng-if="state.platformType === \'linux\'" style="display: block; white-space: pre-wrap; padding: 16px 90px;">{{ dockerCommands.linuxSwarm }}</code>\n            <code ng-if="state.platformType === \'windows\'" style="display: block; white-space: pre-wrap; padding: 16px 90px;">{{ dockerCommands.windowsSwarm }}</code>\n          </uib-tab>\n          <uib-tab index="2" heading="Docker Standalone">\n            <code ng-if="state.platformType === \'linux\'" style="display: block; white-space: pre-wrap; padding: 16px 90px;">{{ dockerCommands.linuxStandalone }}</code>\n            <code ng-if="state.platformType === \'windows\'" style="display: block; white-space: pre-wrap; padding: 16px 90px;">{{ dockerCommands.windowsStandalone }}</code>\n          </uib-tab>\n        </uib-tabset>\n        <div style="margin-top: 10px;">\n          <span class="btn btn-primary btn-sm" ng-click="copyEdgeAgentDeploymentCommand()"><i class="fa fa-copy space-right" aria-hidden="true"></i>Copy command</span>\n          <span id="copyNotificationDeploymentCommand" style="margin-left: 7px; display: none; color: #23ae89;"> <i class="fa fa-check" aria-hidden="true"></i> copied </span>\n        </div>\n      </div>\n      <div class="col-sm-12 form-section-title" style="margin-top: 25px;">\n        Join token\n      </div>\n      <p>\n        <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n        For those prestaging the edge agent, use the following join token to associate the Edge agent with this endpoint.\n      </p>\n      <p> You can read more about pre-staging in the userguide available <a href="https://downloads.portainer.io/edge_agent_guide.pdf">here.</a> </p>\n      <div style="margin-top: 10px; overflow-wrap: break-word;">\n        <code>\n          {{ endpoint.EdgeKey }}\n        </code>\n        <div style="margin-top: 10px;">\n          <span class="btn btn-primary btn-sm" ng-click="copyEdgeAgentKey()"><i class="fa fa-copy space-right" aria-hidden="true"></i>Copy token</span>\n          <span id="copyNotificationEdgeKey" style="margin-left: 7px; display: none; color: #23ae89;"> <i class="fa fa-check" aria-hidden="true"></i> copied </span>\n        </div>\n      </div>\n    </span>\n  </information-panel>\n  <information-panel ng-if="state.kubernetesEndpoint && (!state.edgeEndpoint || (state.edgeEndpoint && endpoint.EdgeID))" title-text="Kubernetes features configuration">\n    <span class="small text-muted">\n      <i class="fa fa-tools blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n      You should configure the features available in this Kubernetes environment in the\n      <a ui-sref="portainer.endpoints.endpoint.kubernetesConfig({id: endpoint.Id})">Kubernetes configuration</a> view.\n    </span>\n  </information-panel>\n</div>\n\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-body>\n        <form class="form-horizontal">\n          <div class="col-sm-12 form-section-title">\n            Configuration\n          </div>\n          \x3c!-- name-input --\x3e\n          <div class="form-group">\n            <label for="container_name" class="col-sm-3 col-lg-2 control-label text-left"></label>\n            <div class="col-sm-9 col-lg-10">\n              <input type="text" class="form-control" id="container_name" ng-model="endpoint.Name" placeholder=" kubernetes-cluster01 / docker-prod01" />\n            </div>\n          </div>\n          \x3c!-- !name-input --\x3e\n          \x3c!-- endpoint-url-input --\x3e\n          <div class="form-group" ng-if="!state.edgeEndpoint">\n            <label for="endpoint_url" class="col-sm-3 col-lg-2 control-label text-left">\n              Endpoint URL\n              <portainer-tooltip\n                position="bottom"\n                message="URL DockerIPDocker APITCPDocker"\n              >\n              </portainer-tooltip>\n            </label>\n            <div class="col-sm-9 col-lg-10">\n              <input\n                ng-disabled="endpointType === \'local\' || state.azureEndpoint"\n                type="text"\n                class="form-control"\n                id="endpoint_url"\n                ng-model="endpoint.URL"\n                placeholder=" 10.0.0.10:2375 or mydocker.mydomain.com:2375"\n              />\n            </div>\n          </div>\n          \x3c!-- !endpoint-url-input --\x3e\n          \x3c!-- endpoint-public-url-input --\x3e\n          <div class="form-group" ng-if="!state.azureEndpoint">\n            <label for="endpoint_public_url" class="col-sm-3 col-lg-2 control-label text-left">\n              Public IP\n              <portainer-tooltip\n                position="bottom"\n                message="URL IPURL"\n              >\n              </portainer-tooltip>\n            </label>\n            <div class="col-sm-9 col-lg-10">\n              <input type="text" class="form-control" id="endpoint_public_url" ng-model="endpoint.PublicURL" placeholder=" 10.0.0.10 or mydocker.mydomain.com" />\n            </div>\n          </div>\n          <div class="form-group" ng-if="state.edgeEndpoint">\n            <label for="edge_checkin" class="col-sm-2 control-label text-left">\n              Poll frequency\n              <portainer-tooltip\n                position="bottom"\n                message="EdgePortainer EdgeEdge"\n              ></portainer-tooltip>\n            </label>\n            <div class="col-sm-10">\n              <select\n                id="edge_checkin"\n                class="form-control"\n                ng-model="endpoint.EdgeCheckinInterval"\n                ng-options="+(opt.value) as opt.key for opt in state.availableEdgeAgentCheckinOptions"\n              ></select>\n            </div>\n          </div>\n          \x3c!-- !endpoint-public-url-input --\x3e\n          <azure-endpoint-config\n            ng-if="state.azureEndpoint"\n            application-id="endpoint.AzureCredentials.ApplicationID"\n            tenant-id="endpoint.AzureCredentials.TenantID"\n            authentication-key="endpoint.AzureCredentials.AuthenticationKey"\n          ></azure-endpoint-config>\n          <div class="col-sm-12 form-section-title">\n            Metadata\n          </div>\n          \x3c!-- group --\x3e\n          <div class="form-group">\n            <label for="endpoint_group" class="col-sm-3 col-lg-2 control-label text-left">\n              Group\n            </label>\n            <div class="col-sm-9 col-lg-10">\n              <select ng-options="group.Id as group.Name for group in groups" ng-model="endpoint.GroupId" id="endpoint_group" class="form-control"></select>\n            </div>\n          </div>\n          \x3c!-- !group --\x3e\n          \x3c!-- tags --\x3e\n          <div class="form-group">\n            <tag-selector ng-if="endpoint && availableTags" tags="availableTags" model="endpoint.TagIds" on-create="(onCreateTag)" allow-create="state.allowCreate"></tag-selector>\n          </div>\n          \x3c!-- !tags --\x3e\n          \x3c!-- endpoint-security --\x3e\n          <div ng-if="endpointType === \'remote\' && !state.azureEndpoint && !state.kubernetesEndpoint && !state.edgeEndpoint && endpoint.Type !== 6">\n            <div class="col-sm-12 form-section-title">\n              Security\n            </div>\n            <por-endpoint-security form-data="formValues.SecurityFormData" endpoint="endpoint"></por-endpoint-security>\n          </div>\n          \x3c!-- !endpoint-security --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button\n                type="button"\n                class="btn btn-primary btn-sm"\n                ng-disabled="state.actionInProgress || !endpoint.Name || !endpoint.URL || (endpoint.TLS && ((endpoint.TLSVerify && !formValues.TLSCACert) || (endpoint.TLSClientCert && (!formValues.TLSCert || !formValues.TLSKey))))"\n                ng-click="updateEndpoint()"\n                button-spinner="state.actionInProgress"\n              >\n                <span ng-hide="state.actionInProgress">Update endpoint</span>\n                <span ng-show="state.actionInProgress">Updating endpoint...</span>\n              </button>\n              <a type="button" class="btn btn-default btn-sm" ui-sref="portainer.endpoints"></a>\n            </div>\n          </div>\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/kubernetes/views/configure/configure.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<kubernetes-view-header title="Kubernetes features configuration" state="portainer.endpoints.endpoint.kubernetesConfig" view-ready="ctrl.state.viewReady">\n  <a ui-sref="portainer.endpoints"></a> &gt; <a ui-sref="portainer.endpoints.endpoint({id: ctrl.endpoint.Id})">{{ ctrl.endpoint.Name }}</a> &gt; Kubernetes configuration\n</kubernetes-view-header>\n\n<kubernetes-view-loading view-ready="ctrl.state.viewReady"></kubernetes-view-loading>\n\n<div ng-if="ctrl.state.viewReady">\n  <div class="row">\n    <div class="col-sm-12">\n      <rd-widget>\n        <rd-widget-body>\n          <form class="form-horizontal" name="kubernetesClusterSetupForm">\n            <div class="col-sm-12 form-section-title">\n              Networking\n            </div>\n\n            <div class="form-group">\n              <span class="col-sm-12 text-muted small">\n                Enabling the load balancer feature will allow users to expose application they deploy over an external IP address assigned by cloud provider.\n                <p style="margin-top: 2px;">\n                  <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                  Ensure that your cloud provider allows you to create load balancers if you want to use this feature. Might incur costs.\n                </p>\n              </span>\n\n              <div class="col-sm-12">\n                <label class="control-label text-left">\n                  Allow users to use external load balancer\n                </label>\n                <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="ctrl.formValues.UseLoadBalancer" /><i></i> </label>\n              </div>\n            </div>\n\n            <div class="form-group">\n              <span class="col-sm-12 text-muted small">\n                HTTP<br />\n                <p style="margin-top: 2px;">\n                  <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                  \n                </p>\n              </span>\n            </div>\n            <div class="form-group">\n              <div class="col-sm-12">\n                <label class="control-label text-left">Ingress controller</label>\n                <span class="label label-default interactive" style="margin-left: 10px;" ng-click="ctrl.addIngressClass()">\n                  <i class="fa fa-plus-circle" aria-hidden="true"></i> add ingress controller\n                </span>\n              </div>\n\n              <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n                <div ng-repeat-start="ingressClass in ctrl.formValues.IngressClasses" style="margin-top: 2px;">\n                  <div class="col-sm-7 input-group input-group-sm" ng-class="{ striked: ingressClass.NeedsDeletion }">\n                    <span class="input-group-addon">Ingress class</span>\n                    <input\n                      type="text"\n                      class="form-control"\n                      name="ingress_class_name_{{ $index }}"\n                      ng-model="ingressClass.Name"\n                      placeholder="nginx"\n                      ng-pattern="/^[a-z]([-a-z0-9]*[a-z0-9])?$/"\n                      ng-change="ctrl.onChangeIngressClassName($index)"\n                      required\n                    />\n                  </div>\n                  <div class="col-sm-3 input-group input-group-sm" ng-class="{ striked: ingressClass.NeedsDeletion }">\n                    <span class="input-group-addon"></span>\n                    <select\n                      class="form-control"\n                      name="ingress_class_type_{{ $index }}"\n                      ng-model="ingressClass.Type"\n                      ng-options="value as value for (key, value) in ctrl.IngressClassTypes"\n                      required\n                    >\n                      <option selected disabled hidden value="">Select a type</option>\n                    </select>\n                  </div>\n                  <div class="col-sm-1 input-group input-group-sm">\n                    <button ng-if="!ingressClass.NeedsDeletion" class="btn btn-sm btn-danger" type="button" ng-click="ctrl.removeIngressClass($index)">\n                      <i class="fa fa-trash-alt" aria-hidden="true"></i>\n                    </button>\n                    <button ng-if="ingressClass.NeedsDeletion" class="btn btn-sm btn-primary" type="button" ng-click="ctrl.restoreIngressClass($index)">\n                      <i class="fa fa-trash-restore" aria-hidden="true"></i>\n                    </button>\n                  </div>\n                </div>\n\n                <div\n                  ng-repeat-end\n                  ng-show="\n                    kubernetesClusterSetupForm[\'ingress_class_name_\' + $index].$invalid ||\n                    kubernetesClusterSetupForm[\'ingress_class_type_\' + $index].$invalid ||\n                    ctrl.state.duplicates.ingressClasses.refs[$index] !== undefined\n                  "\n                >\n                  <div class="col-sm-7 input-group">\n                    <div\n                      class="small text-warning"\n                      style="margin-top: 5px;"\n                      ng-if="kubernetesClusterSetupForm[\'ingress_class_name_\' + $index].$invalid || ctrl.state.duplicates.ingressClasses.refs[$index] !== undefined"\n                    >\n                      <div ng-messages="kubernetesClusterSetupForm[\'ingress_class_name_\'+$index].$error">\n                        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Ingress class name is required.</p>\n                        <p ng-message="pattern"\n                          ><i class="fa fa-exclamation-triangle" aria-hidden="true"></i>   \'-\', \n                           ( \'my-name\', or \'abc-123\').</p\n                        >\n                      </div>\n                      <p ng-if="ctrl.state.duplicates.ingressClasses.refs[$index] !== undefined">\n                        <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> This ingress class is already defined.\n                      </p>\n                    </div>\n                  </div>\n                  <div class="col-sm-3 input-group">\n                    <div class="small text-warning" style="margin-top: 5px;" ng-if="kubernetesClusterSetupForm[\'ingress_class_type_\' + $index].$invalid">\n                      <div ng-messages="kubernetesClusterSetupForm[\'ingress_class_type_\'+$index].$error">\n                        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Ingress class type is required.</p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div class="form-group" ng-if="ctrl.hasTraefikIngress()">\n              <span class="col-sm-12 text-muted small">\n                <p>\n                  <i class="fa fa-flask blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                  Traefik support is experimental.\n                </p>\n              </span>\n            </div>\n\n            <div class="col-sm-12 form-section-title">\n              Security\n            </div>\n\n            <div class="form-group">\n              <span class="col-sm-12 text-muted small">\n                By default, all the users have access to the default namespace. Enable this option to set accesses on the default namespace.\n              </span>\n            </div>\n            <div class="form-group">\n              <div class="col-sm-12">\n                <label class="control-label text-left">\n                  Restrict access to the default namespace\n                </label>\n                <label class="switch" style="margin-left: 20px;"> <input type="checkbox" disabled /><i></i> </label>\n                <span class="text-muted small" style="margin-left: 15px;">\n                  <i class="fa fa-user" aria-hidden="true"></i>\n                   <a href="https://www.portainer.io/business-upsell?from=k8s-setup-default" target="_blank">Portainer</a>.\n                </span>\n              </div>\n            </div>\n\n            <div class="col-sm-12 form-section-title">\n              Resources and Metrics\n            </div>\n\n            <div class="form-group">\n              <span class="col-sm-12 text-muted small">\n                By ENABLING resource over-commit, you are able to assign more resources to namespaces than is physically available in the cluster. This may lead to unexpected\n                deployment failures if there is insufficient resource to service demand.\n                <p style="margin-top: 2px;">\n                  <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                  By DISABLING resource over-commit (highly recommended), you are only able to assign resources to namespaces that are less (in aggregate) than the cluster total\n                  minus any system resource reservation.\n                </p>\n              </span>\n            </div>\n            <div class="form-group">\n              <div class="col-sm-12">\n                <label class="control-label text-left">\n                  Allow resource over-commit\n                </label>\n                <label class="switch" style="margin-left: 20px;"> <input type="checkbox" checked disabled /><i></i> </label>\n                <span class="text-muted small" style="margin-left: 15px;">\n                  <i class="fa fa-user" aria-hidden="true"></i>\n                   <a href="https://www.portainer.io/business-upsell?from=k8s-setup-overcommit" target="_blank">Portainer</a>.\n                </span>\n              </div>\n            </div>\n\n            <div class="form-group">\n              <span class="col-sm-12 text-muted small">\n               \n                <p style="margin-top: 2px;">\n                  <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                  Ensure that <a href="https://kubernetes.io/docs/tasks/debug-application-cluster/resource-metrics-pipeline/#metrics-server" target="_blank">metrics server</a> is\n                  \n                </p>\n              </span>\n            </div>\n            <div class="form-group">\n              <div class="col-sm-12">\n                <label class="control-label text-left">\n                  Enable features using metrics server\n                </label>\n                <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="ctrl.formValues.UseServerMetrics" /><i></i> </label>\n              </div>\n            </div>\n\n            <div class="col-sm-12 form-section-title">\n              \n            </div>\n\n            <div class="form-group" ng-if="!ctrl.storageClassAvailable()">\n              <div class="col-sm-12 small text-muted">\n                <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                 \n              </div>\n            </div>\n\n            <div class="form-group" ng-if="ctrl.storageClassAvailable()">\n              <span class="col-sm-12 text-muted small">\n                <p>\n                   \n                  \n                </p>\n                <p>\n                  \n                  <a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/#access-modes" target="_blank">Kubernetes</a>.\n                </p>\n              </span>\n            </div>\n\n            <div class="form-group" ng-if="ctrl.storageClassAvailable()">\n              <div style="margin-top: 10px;" class="col-sm-12">\n                <table class="table" style="table-layout: fixed;">\n                  <tbody>\n                    <tr class="text-muted">\n                      <td>Storage</td>\n                      <td>Shared access policy</td>\n                      <td>Volume expansion</td>\n                    </tr>\n                    <tr ng-repeat="class in ctrl.StorageClasses">\n                      <td>\n                        <div style="margin: 5px;">\n                          <label class="switch" style="margin-right: 10px;"> <input type="checkbox" ng-model="class.selected" /><i></i> </label>\n                          <span>{{ class.Name }}</span>\n                        </div>\n                      </td>\n                      <td>\n                        <span\n                          isteven-multi-select\n                          input-model="class.availableAccessModes"\n                          output-model="class.AccessModes"\n                          button-label="Name"\n                          item-label="Description"\n                          tick-property="selected"\n                          directive-id="{{ class.Name }}"\n                          helper-elements=""\n                          translation="{nothingSelected: \'Not configured\'}"\n                        >\n                        </span>\n                      </td>\n                      <td>\n                        <div style="margin: 5px;">\n                          <label class="switch"><input type="checkbox" ng-model="class.AllowVolumeExpansion" /><i></i> </label>\n                        </div>\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n              <div class="col-sm-12">\n                <span ng-if="!ctrl.hasValidStorageConfiguration()" style="margin-left: 5px;" class="text-muted small">\n                  <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                  Shared access policy configuration required\n                </span>\n              </div>\n            </div>\n\n            <div class="col-sm-12 form-section-title">\n              \n            </div>\n            \x3c!-- actions --\x3e\n            <div class="form-group">\n              <div class="col-sm-12">\n                <button\n                  type="submit"\n                  class="btn btn-primary btn-sm"\n                  ng-click="ctrl.configure()"\n                  ng-disabled="ctrl.state.actionInProgress || !kubernetesClusterSetupForm.$valid || !ctrl.hasValidStorageConfiguration()"\n                  button-spinner="ctrl.state.actionInProgress"\n                >\n                  <span ng-hide="ctrl.state.actionInProgress">Save configuration</span>\n                  <span ng-show="ctrl.state.actionInProgress">Saving configuration...</span>\n                </button>\n              </div>\n            </div>\n          </form>\n        </rd-widget-body>\n      </rd-widget>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/portainer/views/endpoints/create/createendpoint.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Create endpoint"></rd-header-title>\n  <rd-header-content> <a ui-sref="portainer.endpoints"></a> &gt;  </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-body>\n        <form class="form-horizontal" name="endpointCreationForm">\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          <div class="form-group"></div>\n          <div class="form-group" style="margin-bottom: 0;">\n            <div class="boxselector_wrapper">\n              <div ng-click="resetEndpointURL()">\n                <input type="radio" id="agent_endpoint" ng-model="state.EnvironmentType" value="agent" />\n                <label for="agent_endpoint">\n                  <div class="boxselector_header">\n                    <i class="fa fa-bolt" aria-hidden="true" style="margin-right: 2px;"></i>\n                    \n                  </div>\n                  <p>Portainer </p>\n                </label>\n              </div>\n              <div ng-click="setDefaultPortainerInstanceURL()">\n                <input type="radio" id="edge_agent_endpoint" ng-model="state.EnvironmentType" value="edge_agent" />\n                <label for="edge_agent_endpoint">\n                  <div class="boxselector_header">\n                    <i class="fa fa-cloud" aria-hidden="true" style="margin-right: 2px;"></i>\n                    Edge \n                  </div>\n                  <p>Portainer Edge </p>\n                </label>\n              </div>\n              <div ng-click="resetEndpointURL()">\n                <input type="radio" id="docker_endpoint" ng-model="state.EnvironmentType" value="docker" />\n                <label for="docker_endpoint">\n                  <div class="boxselector_header">\n                    <i class="fab fa-docker" aria-hidden="true" style="margin-right: 2px;"></i>\n                    Docker\n                  </div>\n                  <p>Docker API</p>\n                </label>\n              </div>\n              <div ng-click="resetEndpointURL()">\n                <input type="radio" id="kubernetes_endpoint" ng-model="state.EnvironmentType" value="kubernetes" />\n                <label for="kubernetes_endpoint">\n                  <div class="boxselector_header">\n                    <i class="fas fa-dharmachakra" aria-hidden="true" style="margin-right: 2px;"></i>\n                    Kubernetes\n                  </div>\n                  <p>Kubernetes</p>\n                </label>\n              </div>\n              <div>\n                <input type="radio" id="azure_endpoint" ng-model="state.EnvironmentType" value="azure" />\n                <label for="azure_endpoint">\n                  <div class="boxselector_header">\n                    <i class="fab fa-microsoft" aria-hidden="true" style="margin-right: 2px;"></i>\n                    Azure\n                  </div>\n                  <p> Microsoft Azure ACI</p>\n                </label>\n              </div>\n            </div>\n          </div>\n          <div ng-if="state.EnvironmentType === \'docker\'">\n            <div class="col-sm-12 form-section-title">\n              \n            </div>\n            <div class="form-group">\n              <p class="col-sm-12 text-muted small">\n                TCPPortainerDocker TCPDocker API\n                <a href="https://docs.docker.com/engine/security/https/">  Docker </a>.\n              </p>\n\n              <p class="col-sm-12 text-muted small">\n                DockerPortainer\n                <code> -v "/var/run/docker.sock:/var/run/docker.sock" </code>\n                (on Linux) \n                <code> -v \\.\\pipe\\docker_engine:\\.\\pipe\\docker_engine </code>\n                (on Windows).\n              </p>\n            </div>\n          </div>\n          <div ng-if="state.EnvironmentType === \'agent\'">\n            <div class="col-sm-12 form-section-title">\n              Information\n            </div>\n            <div class="form-group">\n              <span class="col-sm-12 text-muted small">\n                Portainer \n                <div class="input-group input-group-sm" style="margin-top: 10px; margin-bottom: 10px;">\n                  <div class="btn-group btn-group-sm">\n                    <label class="btn btn-primary" ng-model="state.PlatformType" uib-btn-radio="\'linux\'"><i class="fab fa-linux" style="margin-right: 2px;"></i> Linux</label>\n                    <label class="btn btn-primary" ng-model="state.PlatformType" uib-btn-radio="\'windows\'"><i class="fab fa-windows" style="margin-right: 2px;"></i> Windows</label>\n                  </div>\n                </div>\n                <div style="margin-top: 10px;">\n                  <uib-tabset active="state.deploymentTab">\n                    <uib-tab index="0" ng-if="state.PlatformType === \'linux\'" heading="Kubernetes">\n                      <code style="display: block; white-space: pre-wrap; padding: 16px 90px;"\n                        >curl -L https://downloads.portainer.io/portainer-agent-k8s-lb.yaml -o portainer-agent-k8s.yaml; kubectl apply -f portainer-agent-k8s.yaml</code\n                      >\n                    </uib-tab>\n\n                    <uib-tab index="1" ng-if="state.PlatformType === \'linux\'" heading="Kubernetes">\n                      <code style="display: block; white-space: pre-wrap; padding: 16px 90px;"\n                        >curl -L https://downloads.portainer.io/portainer-agent-k8s-nodeport.yaml -o portainer-agent-k8s.yaml; kubectl apply -f portainer-agent-k8s.yaml</code\n                      >\n                    </uib-tab>\n\n                    <uib-tab index="2" heading="Docker ">\n                      <code ng-if="state.PlatformType === \'linux\'" style="display: block; white-space: pre-wrap; padding: 16px 90px;"\n                        >curl -L https://downloads.portainer.io/agent-stack.yml -o agent-stack.yml && docker stack deploy --compose-file=agent-stack.yml portainer-agent</code\n                      >\n                      <code ng-if="state.PlatformType === \'windows\'" style="display: block; white-space: pre-wrap; padding: 16px 90px;"\n                        >curl -L https://downloads.portainer.io/agent-stack-windows.yml -o agent-stack.yml && docker stack deploy --compose-file=agent-stack-windows.yml portainer-agent</code\n                      >\n                    </uib-tab>\n                  </uib-tabset>\n                  <div style="margin-top: 10px;">\n                    <span class="btn btn-primary btn-sm space-left" ng-click="copyAgentCommand()"><i class="fa fa-copy space-right" aria-hidden="true"></i></span>\n                    <span>\n                      <i id="copyNotification" class="fa fa-check green-icon" aria-hidden="true" style="margin-left: 7px; display: none;"></i>\n                    </span>\n                  </div>\n                </div>\n              </span>\n            </div>\n          </div>\n          <div ng-if="state.EnvironmentType === \'edge_agent\'">\n            <div class="col-sm-12 form-section-title">\n              Information\n            </div>\n            <div class="form-group">\n              <span class="col-sm-12 text-muted small">\n                <p>\n                  Edge EdgePortainer \n                  Edge\n                </p>\n                <p> Edge <a href="https://downloads.portainer.io/edge_agent_guide.pdf"></a> </p>\n              </span>\n            </div>\n          </div>\n          <div ng-if="state.EnvironmentType === \'kubernetes\'">\n            <div class="col-sm-12 form-section-title">\n              \n            </div>\n            <div class="form-group">\n              <p class="col-sm-12 text-muted small">\n                This will allow you to PortainerKubernetes\n              </p>\n\n              <p class="col-sm-12 text-muted small">\n                <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                Kubernetes\n              </p>\n            </div>\n          </div>\n          <div ng-if="state.EnvironmentType === \'azure\'">\n            <div class="col-sm-12 form-section-title">\n              Information\n            </div>\n            <div class="form-group">\n              <div class="col-sm-12">\n                <span class="small">\n                  <p class="text-muted"> <i class="fa fa-flask orange-icon" aria-hidden="true" style="margin-right: 2px;"></i> This feature is experimental. </p>\n                  <p class="text-primary">\n                    Microsoft AzureAzureACI\n                  </p>\n                  <p class="text-muted">\n                    <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                    \n                    <a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-create-service-principal-portal" target="_blank"\n                      >Azure </a\n                    >\n                    \n                  </p>\n                </span>\n              </div>\n            </div>\n          </div>\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          \x3c!-- name-input --\x3e\n          <div class="form-group">\n            <label for="container_name" class="col-sm-3 col-lg-2 control-label text-left"></label>\n            <div class="col-sm-9 col-lg-10">\n              <input\n                type="text"\n                class="form-control"\n                name="container_name"\n                ng-model="formValues.Name"\n                placeholder=" docker-prod01 / kubernetes-cluster01"\n                required\n                auto-focus\n              />\n            </div>\n          </div>\n          <div class="form-group" ng-show="endpointCreationForm.container_name.$invalid">\n            <div class="col-sm-12 small text-warning">\n              <div ng-messages="endpointCreationForm.container_name.$error">\n                <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !name-input --\x3e\n          \x3c!-- connect-via-socket-input --\x3e\n          <div ng-if="state.EnvironmentType === \'docker\'">\n            <div class="form-group" style="padding-left: 15px;">\n              <label for="connect_socket" class="col-sm_12 control-label text-left">\n                \n              </label>\n              <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="formValues.ConnectSocket" /><i></i> </label>\n            </div>\n          </div>\n          \x3c!-- !connect-via-socket-input --\x3e\n          \x3c!-- endpoint-url-input --\x3e\n          <div ng-if="(state.EnvironmentType === \'docker\' && !formValues.ConnectSocket) || state.EnvironmentType === \'agent\'">\n            <div class="form-group">\n              <label for="endpoint_url" class="col-sm-3 col-lg-2 control-label text-left">\n                 URL\n                <portainer-tooltip\n                  position="bottom"\n                  message="DockerURLIP Docker APITCP Docker"\n                >\n                </portainer-tooltip>\n              </label>\n              <div class="col-sm-9 col-lg-10">\n                <input\n                  ng-if="state.EnvironmentType === \'docker\'"\n                  type="text"\n                  class="form-control"\n                  name="endpoint_url"\n                  ng-model="formValues.URL"\n                  placeholder=" 10.0.0.10:2375 or mydocker.mydomain.com:2375"\n                  required\n                />\n                <input\n                  ng-if="state.EnvironmentType === \'agent\'"\n                  type="text"\n                  class="form-control"\n                  name="endpoint_url"\n                  ng-model="formValues.URL"\n                  placeholder=" 10.0.0.10:9001 or tasks.portainer_agent:9001"\n                  required\n                />\n              </div>\n            </div>\n            <div class="form-group" ng-show="endpointCreationForm.endpoint_url.$invalid">\n              <div class="col-sm-12 small text-warning">\n                <div ng-messages="endpointCreationForm.endpoint_url.$error">\n                  <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n                </div>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !endpoint-url-input --\x3e\n          \x3c!-- portainer-instance-input --\x3e\n          <div ng-if="state.EnvironmentType === \'edge_agent\'">\n            <div class="form-group">\n              <label for="endpoint_url" class="col-sm-3 col-lg-2 control-label text-left">\n                Portainer server URL\n                <portainer-tooltip position="bottom" message="PortainerURL"></portainer-tooltip>\n              </label>\n              <div class="col-sm-9 col-lg-10">\n                <input type="text" class="form-control" name="endpoint_url" ng-model="formValues.URL" placeholder=" 10.0.0.10:9000 or portainer.mydomain.com" required />\n              </div>\n            </div>\n            <div class="form-group" ng-show="endpointCreationForm.endpoint_url.$invalid">\n              <div class="col-sm-12 small text-warning">\n                <div ng-messages="endpointCreationForm.endpoint_url.$error">\n                  <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n                </div>\n              </div>\n            </div>\n            \x3c!-- !portainer-instance-input --\x3e\n            <div class="form-group">\n              <label for="edge_checkin" class="col-sm-2 control-label text-left">\n                Poll frequency\n                <portainer-tooltip\n                  position="bottom"\n                  message="EdgePortainer EdgeEdge"\n                >\n                </portainer-tooltip>\n              </label>\n              <div class="col-sm-10">\n                <select\n                  id="edge_checkin"\n                  class="form-control"\n                  ng-model="formValues.CheckinInterval"\n                  ng-options="+(opt.value) as opt.key for opt in state.availableEdgeAgentCheckinOptions"\n                ></select>\n              </div>\n            </div>\n          </div>\n          \x3c!-- endpoint-public-url-input --\x3e\n          <div ng-if="state.EnvironmentType === \'docker\' || state.EnvironmentType === \'agent\'">\n            <div class="form-group">\n              <label for="endpoint_public_url" class="col-sm-3 col-lg-2 control-label text-left">\n                 IP\n                <portainer-tooltip\n                  position="bottom"\n                  message="URLIP URL"\n                >\n                </portainer-tooltip>\n              </label>\n              <div class="col-sm-9 col-lg-10">\n                <input type="text" class="form-control" id="endpoint_public_url" ng-model="formValues.PublicURL" placeholder=" 10.0.0.10 or mydocker.mydomain.com" />\n              </div>\n            </div>\n          </div>\n          \x3c!-- !endpoint-public-url-input --\x3e\n          \x3c!-- azure-details --\x3e\n          <div ng-if="state.EnvironmentType === \'azure\'">\n            \x3c!-- applicationId-input --\x3e\n            <div class="form-group">\n              <label for="azure_credential_appid" class="col-sm-3 col-lg-2 control-label text-left"> ID</label>\n              <div class="col-sm-9 col-lg-10">\n                <input\n                  type="text"\n                  class="form-control"\n                  name="azure_credential_appid"\n                  ng-model="formValues.AzureApplicationId"\n                  placeholder="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"\n                  required\n                />\n              </div>\n            </div>\n            <div class="form-group" ng-show="endpointCreationForm.azure_credential_appid.$invalid">\n              <div class="col-sm-12 small text-warning">\n                <div ng-messages="endpointCreationForm.azure_credential_appid.$error">\n                  <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n                </div>\n              </div>\n            </div>\n            \x3c!-- !applicationId-input --\x3e\n            \x3c!-- tenantId-input --\x3e\n            <div class="form-group">\n              <label for="azure_credential_tenantid" class="col-sm-3 col-lg-2 control-label text-left">Tenant ID</label>\n              <div class="col-sm-9 col-lg-10">\n                <input\n                  type="text"\n                  class="form-control"\n                  name="azure_credential_tenantid"\n                  ng-model="formValues.AzureTenantId"\n                  placeholder="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"\n                  required\n                />\n              </div>\n            </div>\n            <div class="form-group" ng-show="endpointCreationForm.azure_credential_tenantid.$invalid">\n              <div class="col-sm-12 small text-warning">\n                <div ng-messages="endpointCreationForm.azure_credential_tenantid.$error">\n                  <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n                </div>\n              </div>\n            </div>\n            \x3c!-- !tenantId-input --\x3e\n            \x3c!-- authenticationkey-input --\x3e\n            <div class="form-group">\n              <label for="azure_credential_authkey" class="col-sm-3 col-lg-2 control-label text-left">Authentication key</label>\n              <div class="col-sm-9 col-lg-10">\n                <input\n                  type="text"\n                  class="form-control"\n                  name="azure_credential_authkey"\n                  ng-model="formValues.AzureAuthenticationKey"\n                  placeholder="cOrXoK/1D35w8YQ8nH1/8ZGwzz45JIYD5jxHKXEQknk="\n                  required\n                />\n              </div>\n            </div>\n            <div class="form-group" ng-show="endpointCreationForm.azure_credential_authkey.$invalid">\n              <div class="col-sm-12 small text-warning">\n                <div ng-messages="endpointCreationForm.azure_credential_authkey.$error">\n                  <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n                </div>\n              </div>\n            </div>\n            \x3c!-- !authenticationkey-input --\x3e\n          </div>\n          \x3c!-- !azure-details --\x3e\n          \x3c!-- endpoint-security --\x3e\n          <por-endpoint-security ng-if="state.EnvironmentType === \'docker\'" form-data="formValues.SecurityFormData"></por-endpoint-security>\n          \x3c!-- !endpoint-security --\x3e\n          <div class="col-sm-12 form-section-title">\n            Metadata\n          </div>\n          \x3c!-- group --\x3e\n          <div class="form-group">\n            <label for="endpoint_group" class="col-sm-3 col-lg-2 control-label text-left">\n              Group\n            </label>\n            <div class="col-sm-9 col-lg-10">\n              <select ng-options="group.Id as group.Name for group in groups" ng-model="formValues.GroupId" id="endpoint_group" class="form-control"></select>\n            </div>\n          </div>\n          \x3c!-- !group --\x3e\n          \x3c!-- tags --\x3e\n          <div class="form-group">\n            <tag-selector ng-if="formValues && availableTags" tags="availableTags" model="formValues.TagIds" allow-create="state.allowCreateTag" on-create="(onCreateTag)">\n            </tag-selector>\n          </div>\n          \x3c!-- !tags --\x3e\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          \x3c!-- actions --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button\n                ng-if="state.EnvironmentType === \'docker\'"\n                type="submit"\n                class="btn btn-primary btn-sm"\n                ng-disabled="state.actionInProgress || !endpointCreationForm.$valid || (formValues.TLS && ((formValues.TLSVerify && !formValues.TLSCACert) || (formValues.TLSClientCert && (!formValues.TLSCert || !formValues.TLSKey))))"\n                ng-click="addDockerEndpoint()"\n                button-spinner="state.actionInProgress"\n              >\n                <span ng-hide="state.actionInProgress"><i class="fa fa-plus" aria-hidden="true"></i> </span>\n                <span ng-show="state.actionInProgress">Creating endpoint...</span>\n              </button>\n              <button\n                ng-if="state.EnvironmentType === \'agent\'"\n                type="submit"\n                class="btn btn-primary btn-sm"\n                ng-disabled="state.actionInProgress || !endpointCreationForm.$valid"\n                ng-click="addAgentEndpoint()"\n                button-spinner="state.actionInProgress"\n              >\n                <span ng-hide="state.actionInProgress"><i class="fa fa-plus" aria-hidden="true"></i> </span>\n                <span ng-show="state.actionInProgress">Creating endpoint...</span>\n              </button>\n              <button\n                ng-if="state.EnvironmentType === \'edge_agent\'"\n                type="submit"\n                class="btn btn-primary btn-sm"\n                ng-disabled="state.actionInProgress || !endpointCreationForm.$valid"\n                ng-click="addEdgeAgentEndpoint()"\n                button-spinner="state.actionInProgress"\n              >\n                <span ng-hide="state.actionInProgress"><i class="fa fa-plus" aria-hidden="true"></i> </span>\n                <span ng-show="state.actionInProgress">Creating endpoint...</span>\n              </button>\n              <button\n                ng-if="state.EnvironmentType === \'kubernetes\'"\n                type="submit"\n                class="btn btn-primary btn-sm"\n                ng-disabled="state.actionInProgress || !endpointCreationForm.$valid"\n                ng-click="addKubernetesEndpoint()"\n                button-spinner="state.actionInProgress"\n              >\n                <span ng-hide="state.actionInProgress"><i class="fa fa-plus" aria-hidden="true"></i> </span>\n                <span ng-show="state.actionInProgress">Creating endpoint...</span>\n              </button>\n              <button\n                ng-if="state.EnvironmentType === \'azure\'"\n                type="submit"\n                class="btn btn-primary btn-sm"\n                ng-disabled="state.actionInProgress || !endpointCreationForm.$valid"\n                ng-click="addAzureEndpoint()"\n                button-spinner="state.actionInProgress"\n              >\n                <span ng-hide="state.actionInProgress"><i class="fa fa-plus" aria-hidden="true"></i> </span>\n                <span ng-show="state.actionInProgress">Creating endpoint...</span>\n              </button>\n            </div>\n          </div>\n          \x3c!-- !actions --\x3e\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/portainer/views/endpoints/access/endpointAccess.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Endpoint access"></rd-header-title>\n  <rd-header-content>\n    <a ui-sref="portainer.endpoints"></a> &gt; <a ui-sref="portainer.endpoints.endpoint({id: ctrl.endpoint.Id})">{{ ctrl.endpoint.Name }}</a> &gt; Access management\n  </rd-header-content>\n</rd-header>\n\n<div class="row" ng-if="ctrl.endpoint">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-plug" title-text=""></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <tbody>\n            <tr>\n              <td></td>\n              <td>\n                {{ ctrl.endpoint.Name }}\n              </td>\n            </tr>\n            <tr>\n              <td>URL</td>\n              <td>\n                {{ ctrl.endpoint.URL | stripprotocol }}\n              </td>\n            </tr>\n            <tr>\n              <td>Group</td>\n              <td>\n                <a ui-sref="portainer.groups.group({ id: ctrl.group.Id })">{{ ctrl.group.Name }}</a>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<por-access-management\n  ng-if="ctrl.endpoint && ctrl.group"\n  access-controlled-entity="ctrl.endpoint"\n  action-in-progress="ctrl.state.actionInProgress"\n  entity-type="endpoint"\n  inherit-from="ctrl.group"\n  update-access="ctrl.updateAccess"\n>\n</por-access-management>\n')}]),e.exports=n},function(e,t){var n="app/portainer/views/groups/groups.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="">\n    <a data-toggle="tooltip" title="" ui-sref="portainer.groups" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content>><</rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <groups-datatable title-text="" title-icon="fa-object-group" dataset="groups" table-key="groups" order-by="Name" remove-action="removeAction"></groups-datatable>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/portainer/views/groups/edit/group.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Endpoint group details"></rd-header-title>\n  <rd-header-content> <a ui-sref="portainer.groups"></a> &gt; {{ ::group.Name }} </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-body>\n        <group-form\n          loaded="loaded"\n          page-type="edit"\n          model="group"\n          available-endpoints="availableEndpoints"\n          available-tags="availableTags"\n          associated-endpoints="associatedEndpoints"\n          add-label-action="addLabel"\n          remove-label-action="removeLabel"\n          form-action="update"\n          form-action-label=""\n          action-in-progress="state.actionInProgress"\n          on-create-tag="(onCreateTag)"\n        ></group-form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/portainer/views/groups/create/creategroup.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text=""></rd-header-title>\n  <rd-header-content> <a ui-sref="portainer.groups"></a> &gt;  </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-body>\n        <group-form\n          loaded="loaded"\n          page-type="create"\n          model="model"\n          available-endpoints="availableEndpoints"\n          available-tags="availableTags"\n          associated-endpoints="associatedEndpoints"\n          add-label-action="addLabel"\n          remove-label-action="removeLabel"\n          form-action="create"\n          form-action-label=""\n          action-in-progress="state.actionInProgress"\n          on-create-tag="(onCreateTag)"\n        ></group-form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/portainer/views/groups/access/groupAccess.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Endpoint group access"></rd-header-title>\n  <rd-header-content>\n    <a ui-sref="portainer.groups"></a> &gt; <a ui-sref="portainer.groups.group({id: group.Id})">{{ group.Name }}</a> &gt; Access management\n  </rd-header-content>\n</rd-header>\n\n<div class="row" ng-if="group">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-object-group" title-text="Group"></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <tbody>\n            <tr>\n              <td></td>\n              <td>\n                {{ group.Name }}\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<por-access-management\n  ng-if="group"\n  access-controlled-entity="group"\n  entity-type="group"\n  action-in-progress="state.actionInProgress"\n  update-access="updateAccess"\n></por-access-management>\n')}]),e.exports=n},function(e,t){var n="app/portainer/views/home/home.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="">\n    <a data-toggle="tooltip" title="" ui-sref="portainer.home" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content></rd-header-content>\n</rd-header>\n\n\n\n\n\n\n<information-panel ng-if="!isAdmin && endpoints.length === 0" title-text="Information">\n  <span class="small text-muted">\n    <p>\n      <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n       \n    </p>\n  </span>\n</information-panel>\n\n<div\n  class="row"\n  style="width: 100%; height: 100%; text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: center;"\n  ng-if="state.connectingToEdgeEndpoint"\n>\n  Connecting to the Edge endpoint...\n  <i class="fa fa-cog fa-spin" style="margin-left: 5px;"></i>\n</div>\n\n<information-panel ng-if="isAdmin && endpoints.length === 0" title-text="Information">\n  <span class="small text-muted">\n    <p>\n      <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n      No environment available for management. Please head over the\n      <a ui-sref="portainer.endpoints.new"> endpoints view </a>\n      to add an endpoint.\n    </p>\n  </span>\n</information-panel>\n\n<div class="row" ng-if="!state.connectingToEdgeEndpoint">\n  <div class="col-sm-12">\n    <endpoint-list\n      title-text=""\n      title-icon="fa-plug"\n      endpoints="endpoints"\n      table-key="home_endpoints"\n      tags="tags"\n      dashboard-action="goToDashboard"\n      show-snapshot-action="isAdmin"\n      snapshot-action="triggerSnapshot"\n      edit-action="goToEdit"\n      is-admin="isAdmin"\n      total-count="totalCount"\n      retrieve-page="getPaginatedEndpoints"\n    ></endpoint-list>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){var a="app/portainer/views/init/endpoint/initEndpoint.html",r='<div class="page-wrapper">\n  \x3c!-- simple box --\x3e\n  <div class="container simple-box">\n    <div class="col-sm-12">\n      \x3c!-- simple box logo --\x3e\n      <div class="row">\n        <img ng-if="ctrl.logo" ng-src="{{ ctrl.logo }}" class="simple-box-logo" />\n        <img ng-if="!ctrl.logo" src="'+n(264)+'" class="simple-box-logo" alt="Portainer" />\n      </div>\n      \x3c!-- !simple box logo --\x3e\n      \x3c!-- init-endpoint panel --\x3e\n      <div class="panel panel-default">\n        <div class="panel-body">\n          \x3c!-- init-endpoint form --\x3e\n          <form class="simple-box-form form-horizontal">\n            \x3c!-- note --\x3e\n            <div class="form-group">\n              <div class="col-sm-12">\n                <span class="small text-muted">\n                  Portainer\n                </span>\n              </div>\n            </div>\n            \x3c!-- !note --\x3e\n            \x3c!-- endpoint-type --\x3e\n            <div class="form-group" style="margin-bottom: 0;">\n              <div class="boxselector_wrapper">\n                <div ng-repeat="type in ctrl.endpointSections">\n                  <input type="radio" id="{{ type.Id }}" ng-model="ctrl.formValues.ConnectionType" ng-value="type.Value" />\n                  <label for="{{ type.Id }}">\n                    <div class="boxselector_header">\n                      <i ng-class="type.Classes" aria-hidden="true" style="margin-right: 2px;"></i>\n                      {{ type.Title }}\n                    </div>\n                    <p>{{ type.Description }}</p>\n                  </label>\n                </div>\n              </div>\n            </div>\n            \x3c!-- !endpoint-type  --\x3e\n            \x3c!-- endpoint-type-details --\x3e\n            <div ng-if="ctrl.formValues.ConnectionType === ctrl.PortainerEndpointConnectionTypes.DOCKER_LOCAL">\n              <ng-include src="\'app/portainer/views/init/endpoint/includes/localDocker.html\'"></ng-include>\n            </div>\n            <div ng-if="ctrl.formValues.ConnectionType === ctrl.PortainerEndpointConnectionTypes.KUBERNETES_LOCAL">\n              <ng-include src="\'app/portainer/views/init/endpoint/includes/localKubernetes.html\'"></ng-include>\n            </div>\n            <div ng-if="ctrl.formValues.ConnectionType === ctrl.PortainerEndpointConnectionTypes.AGENT">\n              <ng-include src="\'app/portainer/views/init/endpoint/includes/agent.html\'"></ng-include>\n            </div>\n            \x3c!-- !endpoint-type-details --\x3e\n            \x3c!-- actions --\x3e\n            <div class="form-group">\n              <div class="col-sm-12">\n                <button\n                  type="submit"\n                  class="btn btn-primary btn-sm"\n                  ng-disabled="ctrl.isConnectButtonDisabled()"\n                  ng-click="ctrl.createEndpoint()"\n                  button-spinner="ctrl.state.actionInProgress"\n                >\n                  <span ng-hide="ctrl.state.actionInProgress"><i class="fa fa-bolt" aria-hidden="true"></i> Connect</span>\n                  <span ng-show="ctrl.state.actionInProgress"></span>\n                </button>\n                <button type="submit" class="btn btn-sm btn-default" ng-click="ctrl.skipEndpointCreation()" button-spinner="ctrl.state.actionInProgress">\n                  <span ng-hide="ctrl.state.actionInProgress"><i class="fa fa-share" aria-hidden="true"></i> </span>\n                </button>\n              </div>\n            </div>\n            \x3c!-- !actions --\x3e\n          </form>\n          \x3c!-- !init-endpoint form --\x3e\n        </div>\n      </div>\n      \x3c!-- !init-endpoint panel --\x3e\n    </div>\n  </div>\n  \x3c!-- !simple box --\x3e\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(a,r)}]),e.exports=a},function(e,t,n){var a="app/portainer/views/init/admin/initAdmin.html",r='<div class="page-wrapper">\n  \x3c!-- simple box --\x3e\n  <div class="container simple-box">\n    <div class="col-md-8 col-md-offset-2 col-sm-10 col-sm-offset-1">\n      \x3c!-- simple box logo --\x3e\n      <div class="row">\n        <img ng-if="logo" ng-src="{{ logo }}" class="simple-box-logo" />\n        <img ng-if="!logo" src="'+n(264)+'" class="simple-box-logo" alt="Portainer" />\n      </div>\n      \x3c!-- !simple box logo --\x3e\n      \x3c!-- init password panel --\x3e\n      <div class="panel panel-default">\n        <div class="panel-body">\n          \x3c!-- init password form --\x3e\n          <form class="simple-box-form form-horizontal">\n            \x3c!-- note --\x3e\n            <div class="form-group">\n              <div class="col-sm-12">\n                <span class="small text-muted">\n                  \n                </span>\n              </div>\n            </div>\n            \x3c!-- !note --\x3e\n            \x3c!-- username-input --\x3e\n            <div class="form-group">\n              <label for="username" class="col-sm-4 control-label text-left">\n                \n              </label>\n              <div class="col-sm-8">\n                <input type="text" class="form-control" id="username" ng-model="formValues.Username" placeholder=" admin" />\n              </div>\n            </div>\n            \x3c!-- !username-input --\x3e\n            \x3c!-- new-password-input --\x3e\n            <div class="form-group">\n              <label for="password" class="col-sm-4 control-label text-left"></label>\n              <div class="col-sm-8">\n                <input type="password" class="form-control" ng-model="formValues.Password" id="password" auto-focus />\n              </div>\n            </div>\n            \x3c!-- !new-password-input --\x3e\n            \x3c!-- confirm-password-input --\x3e\n            <div class="form-group">\n              <label for="confirm_password" class="col-sm-4 control-label text-left"></label>\n              <div class="col-sm-8">\n                <div class="input-group">\n                  <input type="password" class="form-control" ng-model="formValues.ConfirmPassword" id="confirm_password" />\n                  <span class="input-group-addon"\n                    ><i\n                      ng-class="{ true: \'fa fa-check green-icon\', false: \'fa fa-times red-icon\' }[formValues.Password !== \'\' && formValues.Password === formValues.ConfirmPassword]"\n                      aria-hidden="true"\n                    ></i\n                  ></span>\n                </div>\n              </div>\n            </div>\n            \x3c!-- !confirm-password-input --\x3e\n            \x3c!-- note --\x3e\n            <div class="form-group">\n              <div class="col-sm-12">\n                <span class="small text-muted">\n                  <i ng-class="{ true: \'fa fa-check green-icon\', false: \'fa fa-times red-icon\' }[formValues.Password.length >= 8]" aria-hidden="true"></i>\n                  8\n                </span>\n              </div>\n            </div>\n            \x3c!-- !note --\x3e\n            \x3c!-- actions --\x3e\n            <div class="form-group">\n              <div class="col-sm-12">\n                <button\n                  type="submit"\n                  class="btn btn-primary btn-sm"\n                  ng-disabled="state.actionInProgress || formValues.Password.length < 8 || formValues.Password !== formValues.ConfirmPassword"\n                  ng-click="createAdminUser()"\n                  button-spinner="state.actionInProgress"\n                >\n                  <span ng-hide="state.actionInProgress"><i class="fa fa-user-plus" aria-hidden="true"></i> </span>\n                  <span ng-show="state.actionInProgress">Creating user...</span>\n                </button>\n              </div>\n            </div>\n            \x3c!-- !actions --\x3e\n            \x3c!-- enableTelemetry--\x3e\n            <div class="form-group">\n              <div class="col-sm-12">\n                <input type="checkbox" name="toggle_enableTelemetry" ng-model="formValues.enableTelemetry" />\n                <span class="text-muted small" style="margin-left: 2px;"\n                  >\n                  <a href="https://www.portainer.io/documentation/in-app-analytics-and-privacy-policy/" target="_blank"></a>.</span\n                >\n              </div>\n            </div>\n            \x3c!-- !enableTelemetry--\x3e\n          </form>\n          \x3c!-- !init password form --\x3e\n        </div>\n      </div>\n      \x3c!-- !init password panel --\x3e\n    </div>\n  </div>\n  \x3c!-- !simple box --\x3e\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(a,r)}]),e.exports=a},function(e,t){var n="app/portainer/views/registries/registries.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="">\n    <a data-toggle="tooltip" title="" ui-sref="portainer.registries" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content></rd-header-content>\n</rd-header>\n\n<information-panel title-text="">\n  <span class="small">\n    <p class="text-muted">\n      <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n      DockerHubDocker\n    </p>\n  </span>\n</information-panel>\n\n<div class="row" ng-if="dockerhub && isAdmin">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-database" title-text="DockerHub"> </rd-widget-header>\n      <rd-widget-body>\n        <form class="form-horizontal">\n          \x3c!-- note --\x3e\n          <div class="form-group">\n            <span class="col-sm-12 text-muted small">\n              DockerHub amp; \n            </span>\n          </div>\n          \x3c!-- !note --\x3e\n          \x3c!-- authentication-checkbox --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <label for="registry_auth" class="control-label text-left">\n                \n                <portainer-tooltip position="bottom" message="/"></portainer-tooltip>\n              </label>\n              <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="dockerhub.Authentication" /><i></i> </label>\n            </div>\n          </div>\n          \x3c!-- !authentication-checkbox --\x3e\n          \x3c!-- authentication-credentials --\x3e\n          <div ng-if="dockerhub.Authentication">\n            \x3c!-- credentials-user --\x3e\n            <div class="form-group">\n              <label for="hub_username" class="col-sm-3 col-lg-2 control-label text-left"></label>\n              <div class="col-sm-9 col-lg-10">\n                <input type="text" class="form-control" id="hub_username" ng-model="dockerhub.Username" />\n              </div>\n            </div>\n            \x3c!-- !credentials-user --\x3e\n            \x3c!-- credentials-password --\x3e\n            <div class="form-group">\n              <label for="hub_password" class="col-sm-3 col-lg-2 control-label text-left"></label>\n              <div class="col-sm-9 col-lg-10">\n                <input type="password" class="form-control" id="hub_password" ng-model="formValues.dockerHubPassword" placeholder="*******" />\n              </div>\n            </div>\n            \x3c!-- !credentials-password --\x3e\n          </div>\n          \x3c!-- !authentication-credentials --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button\n                type="button"\n                class="btn btn-primary btn-sm"\n                ng-disabled="state.actionInProgress || dockerhub.Authentication && (!dockerhub.Username || !formValues.dockerHubPassword)"\n                ng-click="updateDockerHub()"\n                button-spinner="state.actionInProgress"\n              >\n                <span ng-hide="state.actionInProgress"></span>\n                <span ng-show="state.actionInProgress">Updating DockerHub settings...</span>\n              </button>\n            </div>\n          </div>\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-12">\n    <registries-datatable\n      title-text=""\n      title-icon="fa-database"\n      dataset="registries"\n      table-key="registries"\n      order-by="Name"\n      access-management="isAdmin"\n      remove-action="removeAction"\n      can-browse="canBrowse"\n    ></registries-datatable>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/portainer/views/registries/edit/registry.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Registry details"></rd-header-title>\n  <rd-header-content>\n    <a ui-sref="portainer.registries"></a> &gt; <a ui-sref="portainer.registries.registry({id: registry.Id})">{{ registry.Name }}</a>\n  </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-body>\n        <form class="form-horizontal">\n          \x3c!-- name-input --\x3e\n          <div class="form-group">\n            <label for="registry_name" class="col-sm-3 col-lg-2 control-label text-left"></label>\n            <div class="col-sm-9 col-lg-10">\n              <input type="text" class="form-control" id="registry_name" ng-model="registry.Name" placeholder=" my-registry" />\n            </div>\n          </div>\n          \x3c!-- !name-input --\x3e\n          \x3c!-- registry-url-input --\x3e\n          <div class="form-group">\n            <label for="registry_url" class="col-sm-3 col-lg-2 control-label text-left">\n              Registry URL\n              <portainer-tooltip\n                position="bottom"\n                message="URL DockerIP"\n              ></portainer-tooltip>\n            </label>\n            <div class="col-sm-9 col-lg-10">\n              <input type="text" class="form-control" id="registry_url" ng-model="registry.URL" placeholder=" 10.0.0.10:5000 or myregistry.domain.tld" />\n            </div>\n          </div>\n          \x3c!-- !registry-url-input --\x3e\n          \x3c!-- authentication-checkbox --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <label for="registry_auth" class="control-label text-left">\n                \n                <portainer-tooltip position="bottom" message="Enable this option if you need to specify credentials to connect to this registry."></portainer-tooltip>\n              </label>\n              <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="registry.Authentication" /><i></i> </label>\n            </div>\n          </div>\n          \x3c!-- !authentication-checkbox --\x3e\n          \x3c!-- authentication-credentials --\x3e\n          <div ng-if="registry.Authentication">\n            \x3c!-- credentials-user --\x3e\n            <div class="form-group">\n              <label for="credentials_username" class="col-sm-3 col-lg-2 control-label text-left"></label>\n              <div class="col-sm-9 col-lg-10">\n                <input type="text" class="form-control" id="credentials_username" ng-model="registry.Username" />\n              </div>\n            </div>\n            \x3c!-- !credentials-user --\x3e\n            \x3c!-- credentials-password --\x3e\n            <div class="form-group">\n              <label for="credentials_password" class="col-sm-3 col-lg-2 control-label text-left"></label>\n              <div class="col-sm-9 col-lg-10">\n                <input type="password" class="form-control" id="credentials_password" ng-model="formValues.Password" placeholder="*******" />\n              </div>\n            </div>\n            \x3c!-- !credentials-password --\x3e\n          </div>\n          \x3c!-- !authentication-credentials --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button\n                type="button"\n                class="btn btn-primary btn-sm"\n                ng-disabled="state.actionInProgress || !registry.Name || !registry.URL"\n                ng-click="updateRegistry()"\n                button-spinner="state.actionInProgress"\n              >\n                <span ng-hide="state.actionInProgress">Update registry</span>\n                <span ng-show="state.actionInProgress">Updating registry...</span>\n              </button>\n              <a type="button" class="btn btn-default btn-sm" ui-sref="portainer.registries"></a>\n            </div>\n          </div>\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/portainer/views/registries/create/createregistry.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Create registry"></rd-header-title>\n  <rd-header-content> <a ui-sref="portainer.registries"></a> &gt;  </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-body>\n        <form class="form-horizontal">\n          <div class="col-sm-12 form-section-title">\n            Registry provider\n          </div>\n\n          <div class="form-group"></div>\n\n          <div class="form-group" style="margin-bottom: 0;">\n            <div class="boxselector_wrapper">\n              <div>\n                <input type="radio" id="registry_quay" ng-model="model.Type" ng-value="RegistryTypes.QUAY" />\n                <label for="registry_quay" ng-click="selectQuayRegistry()">\n                  <div class="boxselector_header">\n                    <i class="fa fa-database" aria-hidden="true" style="margin-right: 2px;"></i>\n                    Quay.io\n                  </div>\n                  <p>Quay </p>\n                </label>\n              </div>\n              <div>\n                <input type="radio" id="registry_azure" ng-model="model.Type" ng-value="RegistryTypes.AZURE" />\n                <label for="registry_azure" ng-click="selectAzureRegistry()">\n                  <div class="boxselector_header">\n                    <i class="fab fa-microsoft" aria-hidden="true" style="margin-right: 2px;"></i>\n                    Azure\n                  </div>\n                  <p>Azure </p>\n                </label>\n              </div>\n              <div>\n                <input type="radio" id="registry_gitlab" ng-model="model.Type" ng-value="RegistryTypes.GITLAB" />\n                <label for="registry_gitlab" ng-click="selectGitlabRegistry()">\n                  <div class="boxselector_header">\n                    <i class="fab fa-gitlab" aria-hidden="true" style="margin-right: 2px;"></i>\n                    Gitlab\n                  </div>\n                  <p>Gitlab </p>\n                </label>\n              </div>\n              <div>\n                <input type="radio" id="registry_custom" ng-model="model.Type" ng-value="RegistryTypes.CUSTOM" />\n                <label for="registry_custom" ng-click="selectCustomRegistry()">\n                  <div class="boxselector_header">\n                    <i class="fa fa-database" aria-hidden="true" style="margin-right: 2px;"></i>\n                    \n                  </div>\n                  <p></p>\n                </label>\n              </div>\n            </div>\n          </div>\n\n          <registry-form-quay\n            ng-if="model.Type === RegistryTypes.QUAY"\n            model="model"\n            form-action="create"\n            form-action-label="Add registry"\n            action-in-progress="state.actionInProgress"\n          ></registry-form-quay>\n\n          <registry-form-azure\n            ng-if="model.Type === RegistryTypes.AZURE"\n            model="model"\n            form-action="create"\n            form-action-label="Add registry"\n            action-in-progress="state.actionInProgress"\n          ></registry-form-azure>\n\n          <registry-form-custom\n            ng-if="model.Type === RegistryTypes.CUSTOM"\n            model="model"\n            form-action="create"\n            form-action-label="Add registry"\n            action-in-progress="state.actionInProgress"\n          ></registry-form-custom>\n\n          <registry-form-gitlab\n            ng-if="model.Type === RegistryTypes.GITLAB"\n            model="model"\n            retrieve-registries="retrieveGitlabRegistries"\n            create-registries="createGitlabRegistries"\n            projects="gitlabProjects"\n            state="state"\n            action-in-progress="state.actionInProgress"\n            reset-defaults="useDefaultGitlabConfiguration"\n          ></registry-form-gitlab>\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/portainer/views/registries/access/registryAccess.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Registry access"></rd-header-title>\n  <rd-header-content>\n    <a ui-sref="portainer.registries"></a> &gt; <a ui-sref="portainer.registries.registry({id: registry.Id})">{{ registry.Name }}</a> &gt; Access management\n  </rd-header-content>\n</rd-header>\n\n<div class="row" ng-if="registry">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-plug" title-text="Registry"></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <tbody>\n            <tr>\n              <td></td>\n              <td>\n                {{ registry.Name }}\n              </td>\n            </tr>\n            <tr>\n              <td>URL</td>\n              <td>\n                {{ registry.URL }}\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<por-access-management ng-if="registry" access-controlled-entity="registry" entity-type="registry" action-in-progress="state.actionInProgress" update-access="updateAccess">\n</por-access-management>\n')}]),e.exports=n},function(e,t){var n="app/portainer/views/settings/settings.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text=""></rd-header-title>\n  <rd-header-content></rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-cogs" title-text=""></rd-widget-header>\n      <rd-widget-body>\n        <form class="form-horizontal">\n          \x3c!-- snapshot-interval --\x3e\n          <div class="form-group">\n            <label for="snapshot_interval" class="col-sm-2 control-label text-left"></label>\n            <div class="col-sm-10">\n              <input type="text" class="form-control" ng-model="settings.SnapshotInterval" id="snapshot_interval" placeholder=" 15m" />\n            </div>\n          </div>\n          \x3c!-- !snapshot-interval --\x3e\n          \x3c!-- logo --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <label for="toggle_logo" class="control-label text-left">\n                 logo\n              </label>\n              <label class="switch" style="margin-left: 20px;"> <input type="checkbox" name="toggle_logo" ng-model="formValues.customLogo" /><i></i> </label>\n            </div>\n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <label for="toggle_enableTelemetry" class="control-label text-left">\n                \n              </label>\n              <label class="switch" style="margin-left: 20px;"> <input type="checkbox" name="toggle_enableTelemetry" ng-model="formValues.enableTelemetry" /><i></i> </label>\n            </div>\n            <div class="col-sm-12 text-muted small" style="margin-top: 10px;">\n              \n              <a href="https://www.portainer.io/documentation/in-app-analytics-and-privacy-policy/" target="_blank"></a>.\n            </div>\n          </div>\n          <div ng-if="formValues.customLogo">\n            <div class="form-group">\n              <span class="col-sm-12 text-muted small">\n                URL 155x55\n              </span>\n            </div>\n            <div class="form-group">\n              <label for="logo_url" class="col-sm-1 control-label text-left">\n                URL\n              </label>\n              <div class="col-sm-11">\n                <input type="text" class="form-control" ng-model="settings.LogoURL" id="logo_url" placeholder="https://mycompany.com/logo.png" />\n              </div>\n            </div>\n          </div>\n          \x3c!-- !logo --\x3e\n          \x3c!-- templates --\x3e\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          <div>\n            <div class="form-group">\n              <span class="col-sm-12 text-muted small">\n                URL \n                <a href="https://www.portainer.io/documentation/how-to-use-templates/" target="_blank">Portainer </a> \n              </span>\n            </div>\n            <div class="form-group">\n              <label for="templates_url" class="col-sm-1 control-label text-left">\n                URL\n              </label>\n              <div class="col-sm-11">\n                <input type="text" class="form-control" ng-model="settings.TemplatesURL" id="templates_url" placeholder="https://myserver.mydomain/templates.json" required />\n              </div>\n            </div>\n          </div>\n          \x3c!-- !templates --\x3e\n          \x3c!-- host-filesystem --\x3e\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <label for="toggle_enableHostManagementFeatures" class="control-label text-left">\n                \n                <portainer-tooltip position="bottom" message=""></portainer-tooltip>\n              </label>\n              <label class="switch" style="margin-left: 20px;">\n                <input type="checkbox" name="toggle_enableHostManagementFeatures" ng-model="formValues.enableHostManagementFeatures" /><i></i>\n              </label>\n            </div>\n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <label for="toggle_allowvolumebrowser" class="control-label text-left">\n                \n                <portainer-tooltip position="bottom" message="Portainer"></portainer-tooltip>\n              </label>\n              <label class="switch" style="margin-left: 20px;"> <input type="checkbox" name="toggle_allowvolumebrowser" ng-model="formValues.enableVolumeBrowser" /><i></i> </label>\n            </div>\n          </div>\n          \x3c!-- !host-filesystem --\x3e\n          \x3c!-- security --\x3e\n          <div class="col-sm-12 form-section-title">\n            Docker\n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <label for="toggle_allowbindmounts" class="control-label text-left">\n                \n                <portainer-tooltip position="bottom" message=""></portainer-tooltip>\n              </label>\n              <label class="switch" style="margin-left: 20px;"> <input type="checkbox" name="toggle_allowbindmounts" ng-model="formValues.restrictBindMounts" /><i></i> </label>\n            </div>\n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <label for="toggle_allowbindmounts" class="control-label text-left">\n                \n                <portainer-tooltip position="bottom" message=""></portainer-tooltip>\n              </label>\n              <label class="switch" style="margin-left: 20px;"> <input type="checkbox" name="toggle_allowbindmounts" ng-model="formValues.restrictPrivilegedMode" /><i></i> </label>\n            </div>\n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <label for="toggle_allowHostNamespaceForRegularUsers" class="control-label text-left">\n                PID 1\n                <portainer-tooltip position="bottom" message="PID"></portainer-tooltip>\n              </label>\n              <label class="switch" style="margin-left: 20px;">\n                <input type="checkbox" name="toggle_allowHostNamespaceForRegularUsers" ng-model="formValues.restrictHostNamespaceForRegularUsers" /><i></i>\n              </label>\n            </div>\n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <label for="toggle_disableStackManagementForRegularUsers" class="control-label text-left">\n                \n              </label>\n              <label class="switch" style="margin-left: 20px;">\n                <input type="checkbox" name="toggle_disableStackManagementForRegularUsers" ng-model="formValues.disableStackManagementForRegularUsers" /><i></i>\n              </label>\n            </div>\n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <label for="toggle_disableDeviceMappingForRegularUsers" class="control-label text-left">\n                \n              </label>\n              <label class="switch" style="margin-left: 20px;">\n                <input type="checkbox" name="toggle_disableDeviceMappingForRegularUsers" ng-model="formValues.disableDeviceMappingForRegularUsers" /><i></i>\n              </label>\n            </div>\n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <label for="toggle_disableContainerCapabilitiesForRegularUsers" class="control-label text-left">\n                \n              </label>\n              <label class="switch" style="margin-left: 20px;">\n                <input type="checkbox" name="toggle_disableContainerCapabilitiesForRegularUsers" ng-model="formValues.disableContainerCapabilitiesForRegularUsers" /><i></i>\n              </label>\n            </div>\n          </div>\n\n          <div class="form-group" ng-if="isContainerEditDisabled()">\n            <span class="col-sm-12 text-muted small">\n              //\n            </span>\n          </div>\n          \x3c!-- !security --\x3e\n          \x3c!-- edge --\x3e\n          <div class="col-sm-12 form-section-title">\n            Edge \n          </div>\n          <div class="form-group">\n            <label for="edge_checkin" class="col-sm-2 control-label text-left">\n              \n              <portainer-tooltip\n                position="bottom"\n                message="EdgePortainer EdgeEdge"\n              ></portainer-tooltip>\n            </label>\n            <div class="col-sm-10">\n              <select\n                id="edge_checkin"\n                class="form-control"\n                ng-model="settings.EdgeAgentCheckinInterval"\n                ng-options="+(opt.value) as opt.key for opt in state.availableEdgeAgentCheckinOptions"\n              ></select>\n            </div>\n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <label for="toggle_enableEdgeComputeFeatures" class="control-label text-left">\n                \n              </label>\n              <label class="switch" style="margin-left: 20px;">\n                <input type="checkbox" name="toggle_enableEdgeComputeFeatures" ng-model="formValues.enableEdgeComputeFeatures" /><i></i>\n              </label>\n            </div>\n          </div>\n          \x3c!-- !edge --\x3e\n          \x3c!-- actions --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button\n                type="button"\n                class="btn btn-primary btn-sm"\n                ng-click="saveApplicationSettings()"\n                ng-disabled="state.actionInProgress || !settings.TemplatesURL"\n                button-spinner="state.actionInProgress"\n              >\n                <span ng-hide="state.actionInProgress"></span>\n                <span ng-show="state.actionInProgress">Saving...</span>\n              </button>\n            </div>\n          </div>\n          \x3c!-- !actions --\x3e\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-tags" title-text=""></rd-widget-header>\n      <rd-widget-body>\n        <form class="form-horizontal" ng-submit="addFilteredContainerLabel()" name="addTagForm">\n          <div class="form-group">\n            <span class="col-sm-12 text-muted small">\n              Portainer UI \n            </span>\n          </div>\n          <div class="form-group">\n            <label for="header_name" class="col-sm-1 control-label text-left"></label>\n            <div class="col-sm-11 col-md-4">\n              <input type="text" required class="form-control" id="header_name" name="label_name" ng-model="formValues.labelName" placeholder=" com.example.foo" />\n            </div>\n            <label for="header_value" class="col-sm-1 margin-sm-top control-label text-left">Value</label>\n            <div class="col-sm-11 col-md-4 margin-sm-top">\n              <input type="text" class="form-control" id="header_value" ng-model="formValues.labelValue" placeholder=" bar" />\n            </div>\n            <div class="col-sm-12 col-md-2 margin-sm-top">\n              <button type="submit" class="btn btn-primary btn-sm" ng-disabled="!formValues.labelName"><i class="fa fa-plus space-right" aria-hidden="true"></i>Add filter</button>\n            </div>\n          </div>\n          <div class="form-group">\n            <div class="col-sm-12 table-responsive">\n              <table class="table table-hover">\n                <thead>\n                  <tr>\n                    <th></th>\n                    <th>Value</th>\n                    <th></th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr ng-repeat="label in settings.BlackListedLabels">\n                    <td>{{ label.name }}</td>\n                    <td>{{ label.value }}</td>\n                    <td\n                      ><button type="button" class="btn btn-danger btn-xs" ng-click="removeFilteredContainerLabel($index)"\n                        ><i class="fa fa-trash-alt space-right" aria-hidden="true"></i></button\n                      ></td\n                    >\n                  </tr>\n                  <tr ng-if="settings.BlackListedLabels.length === 0">\n                    <td colspan="3" class="text-center text-muted"></td>\n                  </tr>\n                  <tr ng-if="!settings.BlackListedLabels">\n                    <td colspan="3" class="text-center text-muted">Loading...</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n          \x3c!-- !filtered-labels --\x3e\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/portainer/views/settings/authentication/settingsAuthentication.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text=""></rd-header-title>\n  <rd-header-content> <a ui-sref="portainer.settings"></a> &gt;  </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-users" title-text=""></rd-widget-header>\n      <rd-widget-body>\n        <form class="form-horizontal">\n          <div class="col-sm-12 form-section-title">\n            Configuration\n          </div>\n          <div class="form-group">\n            <label for="user_timeout" class="col-sm-2 control-label text-left">\n              \n              <portainer-tooltip message=""></portainer-tooltip>\n            </label>\n            <div class="col-sm-10">\n              <select\n                id="user_timeout"\n                class="form-control"\n                ng-model="settings.UserSessionTimeout"\n                ng-options="opt.value as opt.key for opt in state.availableUserSessionTimeoutOptions"\n              ></select>\n            </div>\n          </div>\n          <div class="form-group">\n            <span class="col-sm-12 text-muted small">\n              Portainer\n            </span>\n          </div>\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          <div class="form-group"></div>\n          <div class="form-group" style="margin-bottom: 0;">\n            <div class="boxselector_wrapper">\n              <div>\n                <input type="radio" id="registry_quay" ng-model="settings.AuthenticationMethod" ng-value="1" />\n                <label for="registry_quay">\n                  <div class="boxselector_header">\n                    <i class="fa fa-users" aria-hidden="true" style="margin-right: 2px;"></i>\n                    Internal\n                  </div>\n                  <p></p>\n                </label>\n              </div>\n              <div>\n                <input type="radio" id="registry_custom" ng-model="settings.AuthenticationMethod" ng-value="2" />\n                <label for="registry_custom">\n                  <div class="boxselector_header">\n                    <i class="fa fa-users" aria-hidden="true" style="margin-right: 2px;"></i>\n                    LDAP\n                  </div>\n                  <p>LDAP authentication</p>\n                </label>\n              </div>\n              <div>\n                <input type="radio" id="registry_auth" ng-model="settings.AuthenticationMethod" ng-value="3" />\n                <label for="registry_auth">\n                  <div class="boxselector_header">\n                    <i class="fa fa-users" aria-hidden="true" style="margin-right: 2px;"></i>\n                    OAuth\n                  </div>\n                  <p>OAuth</p>\n                </label>\n              </div>\n            </div>\n          </div>\n\n          <div ng-if="settings.AuthenticationMethod === 1">\n            <div class="col-sm-12 form-section-title">\n              Information\n            </div>\n            <div class="form-group col-sm-12 text-muted small">\n              Portainer\n            </div>\n          </div>\n\n          <div ng-if="settings.AuthenticationMethod === 2">\n            <div>\n              <div class="col-sm-12 form-section-title">\n                Information\n              </div>\n              <div class="form-group col-sm-12 text-muted small">\n                LDAPPortainerLDAPLDAP\n              </div>\n            </div>\n\n            <div class="col-sm-12 form-section-title">\n              LDAP \n            </div>\n\n            <div class="form-group">\n              <label for="ldap_url" class="col-sm-3 col-lg-2 control-label text-left">\n                LDAP \n                <portainer-tooltip position="bottom" message="LDAPURLIP"></portainer-tooltip>\n              </label>\n              <div class="col-sm-9 col-lg-10">\n                <input type="text" class="form-control" id="ldap_url" ng-model="formValues.LDAPSettings.URL" placeholder=" 10.0.0.10:389 or myldap.domain.tld:389" />\n              </div>\n            </div>\n\n            \x3c!-- Anonymous mode--\x3e\n            <div class="form-group">\n              <div class="col-sm-12">\n                <label for="anonymous_mode" class="control-label text-left">\n                  \n                  <portainer-tooltip position="bottom" message=""></portainer-tooltip>\n                </label>\n                <label class="switch" style="margin-left: 20px;"> <input type="checkbox" id="anonymous_mode" ng-model="formValues.LDAPSettings.AnonymousMode" /><i></i> </label>\n              </div>\n            </div>\n            \x3c!-- !Anonymous mode--\x3e\n\n            <div ng-if="!formValues.LDAPSettings.AnonymousMode">\n              <div class="form-group">\n                <label for="ldap_username" class="col-sm-3 col-lg-2 control-label text-left">\n                  Reader DN\n                  <portainer-tooltip position="bottom" message=""></portainer-tooltip>\n                </label>\n                <div class="col-sm-9 col-lg-10">\n                  <input\n                    type="text"\n                    class="form-control"\n                    id="ldap_username"\n                    ng-model="formValues.LDAPSettings.ReaderDN"\n                    placeholder="cn=readonly-account,dc=ldap,dc=domain,dc=tld"\n                  />\n                </div>\n              </div>\n\n              <div class="form-group">\n                <label for="ldap_password" class="col-sm-3 col-lg-2 control-label text-left">\n                  Password\n                  <portainer-tooltip position="bottom" message="Portainer"></portainer-tooltip>\n                </label>\n                <div class="col-sm-9 col-lg-10">\n                  <input type="password" class="form-control" id="ldap_password" ng-model="formValues.LDAPSettings.Password" placeholder="password" />\n                </div>\n              </div>\n            </div>\n\n            <div class="form-group" ng-if="!formValues.LDAPSettings.TLSConfig.TLS && !formValues.LDAPSettings.StartTLS">\n              <label for="ldap_password" class="col-sm-3 col-lg-2 control-label text-left">\n                \n                <i class="fa fa-check green-icon" style="margin-left: 5px;" ng-if="state.successfulConnectivityCheck"></i>\n                <i class="fa fa-times red-icon" style="margin-left: 5px;" ng-if="state.failedConnectivityCheck"></i>\n              </label>\n              <div class="col-sm-9 col-lg-10">\n                <button\n                  type="button"\n                  class="btn btn-primary btn-sm"\n                  ng-disabled="(state.connectivityCheckInProgress) || (!formValues.LDAPSettings.URL) || ((!formValues.LDAPSettings.ReaderDN || !formValues.LDAPSettings.Password) && !formValues.LDAPSettings.AnonymousMode)"\n                  ng-click="LDAPConnectivityCheck()"\n                  button-spinner="state.connectivityCheckInProgress"\n                >\n                  <span ng-hide="state.connectivityCheckInProgress"></span>\n                  <span ng-show="state.connectivityCheckInProgress">Testing connectivity...</span>\n                </button>\n              </div>\n            </div>\n\n            <div class="col-sm-12 form-section-title">\n              LDAP security\n            </div>\n\n            \x3c!-- starttls --\x3e\n            <div class="form-group" ng-if="!formValues.LDAPSettings.TLSConfig.TLS">\n              <div class="col-sm-12">\n                <label for="tls" class="control-label text-left">\n                  Use StartTLS\n                  <portainer-tooltip\n                    position="bottom"\n                    message="StartTLSTLS"\n                  ></portainer-tooltip>\n                </label>\n                <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="formValues.LDAPSettings.StartTLS" /><i></i> </label>\n              </div>\n            </div>\n            \x3c!-- !starttls --\x3e\n\n            \x3c!-- tls-checkbox --\x3e\n            <div class="form-group" ng-if="!formValues.LDAPSettings.StartTLS">\n              <div class="col-sm-12">\n                <label for="tls" class="control-label text-left">\n                   TLS\n                  <portainer-tooltip position="bottom" message="TLSLDAP"></portainer-tooltip>\n                </label>\n                <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="formValues.LDAPSettings.TLSConfig.TLS" /><i></i> </label>\n              </div>\n            </div>\n            \x3c!-- !tls-checkbox --\x3e\n\n            \x3c!-- tls-skip-verify --\x3e\n            <div class="form-group">\n              <div class="col-sm-12">\n                <label for="tls" class="control-label text-left">\n                  \n                  <portainer-tooltip position="bottom" message="TLS"></portainer-tooltip>\n                </label>\n                <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="formValues.LDAPSettings.TLSConfig.TLSSkipVerify" /><i></i> </label>\n              </div>\n            </div>\n            \x3c!-- !tls-skip-verify --\x3e\n\n            \x3c!-- tls-certs --\x3e\n            <div ng-if="formValues.LDAPSettings.TLSConfig.TLS || formValues.LDAPSettings.StartTLS">\n              \x3c!-- ca-input --\x3e\n              <div class="form-group" ng-if="!formValues.LDAPSettings.TLSConfig.TLSSkipVerify">\n                <label class="col-sm-2 control-label text-left">TLS CA </label>\n                <div class="col-sm-10">\n                  <button class="btn btn-sm btn-primary" ngf-select ng-model="formValues.TLSCACert"></button>\n                  <span style="margin-left: 5px;">\n                    {{ formValues.TLSCACert.name }}\n                    <i class="fa fa-check green-icon" ng-if="formValues.TLSCACert && formValues.TLSCACert === formValues.LDAPSettings.TLSConfig.TLSCACert" aria-hidden="true"></i>\n                    <i class="fa fa-times red-icon" ng-if="!formValues.TLSCACert" aria-hidden="true"></i>\n                    <i class="fa fa-circle-notch fa-spin" ng-if="state.uploadInProgress"></i>\n                  </span>\n                </div>\n              </div>\n              \x3c!-- !ca-input --\x3e\n            </div>\n            \x3c!-- !tls-certs --\x3e\n\n            <div class="form-group" ng-if="formValues.LDAPSettings.TLSConfig.TLS || formValues.LDAPSettings.StartTLS">\n              <label for="ldap_password" class="col-sm-3 col-lg-2 control-label text-left">\n                \n                <i class="fa fa-check green-icon" style="margin-left: 5px;" ng-if="state.successfulConnectivityCheck"></i>\n                <i class="fa fa-times red-icon" style="margin-left: 5px;" ng-if="state.failedConnectivityCheck"></i>\n              </label>\n              <div class="col-sm-9 col-lg-10">\n                <button\n                  type="button"\n                  class="btn btn-primary btn-sm"\n                  ng-click="LDAPConnectivityCheck()"\n                  ng-disabled="(!formValues.LDAPSettings.URL) || (!formValues.TLSCACert && !formValues.LDAPSettings.TLSConfig.TLSSkipVerify) || ((!formValues.LDAPSettings.ReaderDN || !formValues.LDAPSettings.Password) && !formValues.LDAPSettings.AnonymousMode)"\n                  ></button\n                >\n                <i id="connectivityCheckSpinner" class="fa fa-cog fa-spin" style="margin-left: 5px; display: none;"></i>\n              </div>\n            </div>\n\n            <div class="col-sm-12 form-section-title">\n              \n            </div>\n            <div class="form-group">\n              <span class="col-sm-12 text-muted small">\n                PortainerLDAP\n                 Portainer\n              </span>\n            </div>\n            <div class="form-group">\n              <div class="col-sm-12">\n                <label for="tls" class="control-label text-left">\n                  \n                </label>\n                <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="formValues.LDAPSettings.AutoCreateUsers" /><i></i> </label>\n              </div>\n            </div>\n\n            <div class="col-sm-12 form-section-title">\n              \n            </div>\n\n            \x3c!-- search-settings --\x3e\n            <div ng-repeat="config in formValues.LDAPSettings.SearchSettings | limitTo: (1 - formValues.LDAPSettings.SearchSettings)" style="margin-top: 5px;">\n              <div class="form-group" ng-if="$index > 0">\n                <span class="col-sm-12 text-muted small">\n                  Extra search configuration\n                </span>\n              </div>\n\n              <div class="form-group">\n                <label for="ldap_basedn_{{ $index }}" class="col-sm-4 col-md-2 control-label text-left">\n                  Base DN\n                  <portainer-tooltip position="bottom" message="LDAP"></portainer-tooltip>\n                </label>\n                <div class="col-sm-8 col-md-4">\n                  <input type="text" class="form-control" id="ldap_basedn_{{ $index }}" ng-model="config.BaseDN" placeholder="dc=ldap,dc=domain,dc=tld" />\n                </div>\n\n                <label for="ldap_username_att_{{ $index }}" class="col-sm-4 col-md-3 col-lg-2 margin-sm-top control-label text-left">\n                  \n                  <portainer-tooltip position="bottom" message="LDAP"></portainer-tooltip>\n                </label>\n                <div class="col-sm-8 col-md-3 col-lg-4 margin-sm-top">\n                  <input type="text" class="form-control" id="ldap_username_att_{{ $index }}" ng-model="config.UserNameAttribute" placeholder="uid" />\n                </div>\n              </div>\n              <div class="form-group">\n                <label for="ldap_filter_{{ $index }}" class="col-sm-4 col-md-2 control-label text-left">\n                  \n                  <portainer-tooltip position="bottom" message="LDAP"></portainer-tooltip>\n                </label>\n                <div class="col-sm-7 col-md-9">\n                  <input type="text" class="form-control" id="ldap_filter_{{ $index }}" ng-model="config.Filter" placeholder="(objectClass=account)" />\n                </div>\n                <div class="col-sm-1" ng-if="$index > 0">\n                  <button class="btn btn-sm btn-danger" type="button" ng-click="removeSearchConfiguration($index)">\n                    <i class="fa fa-trash" aria-hidden="true"></i>\n                  </button>\n                </div>\n              </div>\n\n              <div class="form-group">\n                <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addSearchConfiguration()">\n                  <i class="fa fa-plus-circle" aria-hidden="true"></i> \n                </span>\n              </div>\n            </div>\n            \x3c!-- !search-settings --\x3e\n\n            <div class="col-sm-12 form-section-title">\n              \n            </div>\n\n            \x3c!-- group-search-settings --\x3e\n            <div ng-repeat="groupConfig in formValues.LDAPSettings.GroupSearchSettings | limitTo: (1 - formValues.LDAPSettings.GroupSearchSettings)" style="margin-top: 5px;">\n              <div class="form-group" ng-if="$index > 0">\n                <span class="col-sm-12 text-muted small">\n                  Extra search configuration\n                </span>\n              </div>\n\n              <div class="form-group">\n                <label for="ldap_group_basedn_{{ $index }}" class="col-sm-4 col-md-2 control-label text-left">\n                   DN\n                  <portainer-tooltip position="bottom" message="LDAP"></portainer-tooltip>\n                </label>\n                <div class="col-sm-8 col-md-4">\n                  <input type="text" class="form-control" id="ldap_group_basedn_{{ $index }}" ng-model="groupConfig.GroupBaseDN" placeholder="dc=ldap,dc=domain,dc=tld" />\n                </div>\n\n                <label for="ldap_group_att_{{ $index }}" class="col-sm-4 col-md-3 col-lg-2 margin-sm-top control-label text-left">\n                  \n                  <portainer-tooltip position="bottom" message="LDAP"></portainer-tooltip>\n                </label>\n                <div class="col-sm-8 col-md-3 col-lg-4 margin-sm-top">\n                  <input type="text" class="form-control" id="ldap_group_att_{{ $index }}" ng-model="groupConfig.GroupAttribute" placeholder="member" />\n                </div>\n              </div>\n              <div class="form-group">\n                <label for="ldap_group_filter_{{ $index }}" class="col-sm-4 col-md-2 control-label text-left">\n                  \n                  <portainer-tooltip position="bottom" message="LDAP"></portainer-tooltip>\n                </label>\n                <div class="col-sm-7 col-md-9">\n                  <input type="text" class="form-control" id="ldap_group_filter_{{ $index }}" ng-model="groupConfig.GroupFilter" placeholder="(objectClass=account)" />\n                </div>\n                <div class="col-sm-1" ng-if="$index > 0">\n                  <button class="btn btn-sm btn-danger" type="button" ng-click="removeGroupSearchConfiguration($index)">\n                    <i class="fa fa-trash" aria-hidden="true"></i>\n                  </button>\n                </div>\n              </div>\n\n              <div class="form-group">\n                <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addGroupSearchConfiguration()">\n                  <i class="fa fa-plus-circle" aria-hidden="true"></i> \n                </span>\n              </div>\n            </div>\n            \x3c!-- !group-search-settings --\x3e\n          </div>\n\n          <div ng-if="isOauthEnabled()">\n            <div class="col-sm-12 form-section-title">\n              Provider\n            </div>\n            <div class="form-group"></div>\n            <div class="form-group" style="margin-bottom: 0;">\n              <div class="boxselector_wrapper">\n                <div data-toggle="tooltip" title="Portainer" style="color: #767676;">\n                  <input type="radio" id="microsoft" disabled />\n                  <label for="microsoft" style="cursor: pointer; border-color: #767676;">\n                    <div class="boxselector_header">\n                      <i class="fab fa-microsoft" aria-hidden="true" style="margin-right: 2px;"></i>\n                      Microsoft\n                    </div>\n                    <p>Microsoft OAuth provider</p>\n                  </label>\n                </div>\n                <div data-toggle="tooltip" title="Portainer" style="color: #767676;">\n                  <input type="radio" id="google" disabled />\n                  <label for="google" style="cursor: pointer; border-color: #767676;">\n                    <div class="boxselector_header">\n                      <i class="fab fa-google" aria-hidden="true" style="margin-right: 2px;"></i>\n                      Google\n                    </div>\n                    <p>Google OAuth provider</p>\n                  </label>\n                </div>\n                <div data-toggle="tooltip" title="Portainer" style="color: #767676;">\n                  <input type="radio" id="registry_auth" disabled />\n                  <label for="Github" style="cursor: pointer; border-color: #767676;">\n                    <div class="boxselector_header">\n                      <i class="fab fa-github" aria-hidden="true" style="margin-right: 2px;"></i>\n                      Github\n                    </div>\n                    <p>Github OAuth provider</p>\n                  </label>\n                </div>\n                <div>\n                  <input type="radio" id="custom" ng-model="settings.AuthenticationMethod" ng-value="3" />\n                  <label for="custom">\n                    <div class="boxselector_header">\n                      <i class="fa fa-user-check" aria-hidden="true" style="margin-right: 2px;"></i>\n                      Custom\n                    </div>\n                    <p>OAuth</p>\n                  </label>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <oauth-settings ng-if="isOauthEnabled()" settings="OAuthSettings" teams="teams"></oauth-settings>\n\n          \x3c!-- actions --\x3e\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button type="button" class="btn btn-primary btn-sm" ng-click="saveSettings()" ng-disabled="state.actionInProgress" button-spinner="state.actionInProgress">\n                <span ng-hide="state.actionInProgress"></span>\n                <span ng-show="state.actionInProgress">Saving...</span>\n              </button>\n            </div>\n          </div>\n          \x3c!-- !actions --\x3e\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/portainer/views/tags/tags.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="">\n    <a data-toggle="tooltip" title="" ui-sref="portainer.tags" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content></rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-plus" title-text=""> </rd-widget-header>\n      <rd-widget-body>\n        <form class="form-horizontal" name="tagCreationForm" ng-submit="createTag()">\n          \x3c!-- name-input --\x3e\n          <div class="form-group">\n            <label for="name" class="col-sm-2 control-label text-left">\n              \n            </label>\n            <div class="col-sm-10">\n              <input\n                type="text"\n                class="form-control"\n                name="name"\n                ng-model="formValues.Name"\n                ng-change="checkNameValidity(tagCreationForm)"\n                placeholder="org/acme"\n                required\n                auto-focus\n              />\n            </div>\n          </div>\n          <div class="form-group" ng-show="tagCreationForm.name.$invalid">\n            <div class="col-sm-12 small text-warning">\n              <div ng-messages="tagCreationForm.name.$error">\n                <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n                <p ng-message="validName"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> This tag already exists.</p>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !name-input --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button\n                type="button"\n                class="btn btn-primary btn-sm"\n                ng-disabled="state.actionInProgress || !tagCreationForm.$valid"\n                ng-click="createTag()"\n                button-spinner="state.actionInProgress"\n              >\n                <span ng-hide="state.actionInProgress"><i class="fa fa-plus" aria-hidden="true"></i> </span>\n                <span ng-show="state.actionInProgress">Creating tag...</span>\n              </button>\n            </div>\n          </div>\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-12">\n    <tags-datatable title-text="" title-icon="fa-tags" dataset="tags" table-key="tags" order-by="Name" remove-action="removeAction"></tags-datatable>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/portainer/views/users/users.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="">\n    <a data-toggle="tooltip" title="" ui-sref="portainer.users" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content></rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-plus" title-text=""> </rd-widget-header>\n      <rd-widget-body>\n        <form class="form-horizontal">\n          \x3c!-- name-input --\x3e\n          <div class="form-group">\n            <label for="username" class="col-sm-3 col-lg-2 control-label text-left">\n              \n              <portainer-tooltip\n                ng-if="AuthenticationMethod === 2"\n                position="bottom"\n                message="Username must exactly match username defined in external LDAP source."\n              ></portainer-tooltip>\n            </label>\n            <div class="col-sm-8">\n              <div class="input-group">\n                <input type="text" class="form-control" id="username" ng-model="formValues.Username" ng-change="checkUsernameValidity()" placeholder=" jdoe" auto-focus />\n                <span class="input-group-addon"><i ng-class="{ true: \'fa fa-check green-icon\', false: \'fa fa-times red-icon\' }[state.validUsername]" aria-hidden="true"></i></span>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !name-input --\x3e\n          \x3c!-- new-password-input --\x3e\n          <div class="form-group" ng-if="AuthenticationMethod === 1">\n            <label for="password" class="col-sm-3 col-lg-2 control-label text-left"></label>\n            <div class="col-sm-8">\n              <div class="input-group">\n                <span class="input-group-addon"><i class="fa fa-lock" aria-hidden="true"></i></span>\n                <input type="password" class="form-control" ng-model="formValues.Password" id="password" />\n              </div>\n            </div>\n          </div>\n          \x3c!-- !new-password-input --\x3e\n          \x3c!-- confirm-password-input --\x3e\n          <div class="form-group" ng-if="AuthenticationMethod === 1">\n            <label for="confirm_password" class="col-sm-3 col-lg-2 control-label text-left"></label>\n            <div class="col-sm-8">\n              <div class="input-group">\n                <span class="input-group-addon"><i class="fa fa-lock" aria-hidden="true"></i></span>\n                <input type="password" class="form-control" ng-model="formValues.ConfirmPassword" id="confirm_password" />\n                <span class="input-group-addon"\n                  ><i\n                    ng-class="{ true: \'fa fa-check green-icon\', false: \'fa fa-times red-icon\' }[formValues.Password !== \'\' && formValues.Password === formValues.ConfirmPassword]"\n                    aria-hidden="true"\n                  ></i\n                ></span>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !confirm-password-input --\x3e\n          \x3c!-- admin-checkbox --\x3e\n          <div class="form-group" ng-if="isAdmin">\n            <div class="col-sm-12">\n              <label for="permissions" class="control-label text-left">\n                \n                <portainer-tooltip\n                  position="bottom"\n                  message="Portainer"\n                ></portainer-tooltip>\n              </label>\n              <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="formValues.Administrator" /><i></i> </label>\n            </div>\n          </div>\n          \x3c!-- !admin-checkbox --\x3e\n          \x3c!-- teams --\x3e\n          <div class="form-group" ng-if="!formValues.Administrator">\n            <div class="col-sm-12">\n              <label class="control-label text-left">\n                \n              </label>\n              <span class="small text-muted" style="margin-left: 20px;" ng-if="teams.length === 0">\n                  <a ui-sref="portainer.teams"></a> \n              </span>\n              <span\n                isteven-multi-select\n                ng-if="teams.length > 0"\n                input-model="teams"\n                output-model="formValues.Teams"\n                button-label="Name"\n                item-label="Name"\n                tick-property="ticked"\n                helper-elements="filter"\n                search-property="Name"\n                translation="{nothingSelected: \'\', search: \'...\'}"\n                style="margin-left: 20px;"\n              >\n              </span>\n            </div>\n          </div>\n          \x3c!-- !teams --\x3e\n          <div class="form-group" ng-if="isAdmin && !formValues.Administrator && formValues.Teams.length === 0">\n            <div class="col-sm-12">\n              <span class="small text-muted">\n                 \n                <a ui-sref="portainer.endpoints"></a> \n              </span>\n            </div>\n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button\n                type="button"\n                class="btn btn-primary btn-sm"\n                ng-disabled="state.actionInProgress || !state.validUsername || formValues.Username === \'\' || (AuthenticationMethod === 1 && formValues.Password === \'\') || (AuthenticationMethod === 1 && formValues.Password !== formValues.ConfirmPassword)"\n                ng-click="addUser()"\n                button-spinner="state.actionInProgress"\n              >\n                <span ng-hide="state.actionInProgress"><i class="fa fa-plus" aria-hidden="true"></i> </span>\n                <span ng-show="state.actionInProgress">Creating user...</span>\n              </button>\n              <span class="text-danger" ng-if="state.userCreationError" style="margin: 5px;">\n                <i class="fa fa-exclamation-circle" aria-hidden="true"></i> {{ state.userCreationError }}\n              </span>\n            </div>\n          </div>\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-12">\n    <users-datatable\n      title-text=""\n      title-icon="fa-user"\n      dataset="users"\n      table-key="users"\n      order-by="Username"\n      authentication-method="AuthenticationMethod"\n      remove-action="removeAction"\n    ></users-datatable>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/portainer/views/users/edit/user.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text=""></rd-header-title>\n  <rd-header-content>\n    <a ui-sref="portainer.users"></a> &gt; <a ui-sref="portainer.users.user({id: user.Id})">{{ formValues.username }}</a>\n  </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-user" title-text=""></rd-widget-header>\n      <rd-widget-body>\n        <form class="form-horizontal" style="margin-top: 15px;">\n          <div class="form-group">\n            <label for="username_field" class="col-sm-2 control-label text-left"></label>\n            <div class="col-sm-8">\n              <input class="form-control" ng-model="formValues.username" id="username_field" />\n            </div>\n          </div>\n\n          <div class="form-group" ng-if="isAdmin">\n            <div class="col-sm-4">\n              <label for="permissions" class="control-label text-left">\n                Administrator\n                <portainer-tooltip\n                  position="bottom"\n                  message="Portainer"\n                ></portainer-tooltip>\n              </label>\n              <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="formValues.Administrator" /><i></i> </label>\n            </div>\n          </div>\n\n          <div class="form-group">\n            <div class="col-sm-4">\n              <button class="btn btn-primary btn-sm" ng-disabled="!isSubmitEnabled()" ng-click="updateUser()"></button>\n              <button class="btn btn-danger btn-sm" ng-disabled="isDeleteDisabled()" ng-click="deleteUser()"\n                ><i class="fa fa-trash-alt space-right" aria-hidden="true"></i></button\n              >\n            </div>\n          </div>\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row" ng-if="AuthenticationMethod === 1">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-lock" title-text=""></rd-widget-header>\n      <rd-widget-body>\n        <form class="form-horizontal" style="margin-top: 15px;">\n          \x3c!-- new-password-input --\x3e\n          <div class="form-group">\n            <label for="new_password" class="col-sm-2 control-label text-left"></label>\n            <div class="col-sm-8">\n              <div class="input-group">\n                <span class="input-group-addon"><i class="fa fa-lock" aria-hidden="true"></i></span>\n                <input type="password" class="form-control" ng-model="formValues.newPassword" id="new_password" />\n              </div>\n            </div>\n          </div>\n          \x3c!-- !new-password-input --\x3e\n          \x3c!-- confirm-password-input --\x3e\n          <div class="form-group">\n            <label for="confirm_password" class="col-sm-2 control-label text-left"></label>\n            <div class="col-sm-8">\n              <div class="input-group">\n                <span class="input-group-addon"><i class="fa fa-lock" aria-hidden="true"></i></span>\n                <input type="password" class="form-control" ng-model="formValues.confirmPassword" id="confirm_password" />\n                <span class="input-group-addon"\n                  ><i\n                    ng-class="\n                      { true: \'fa fa-check green-icon\', false: \'fa fa-times red-icon\' }[formValues.newPassword !== \'\' && formValues.newPassword === formValues.confirmPassword]\n                    "\n                    aria-hidden="true"\n                  ></i\n                ></span>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !confirm-password-input --\x3e\n          <div class="form-group">\n            <div class="col-sm-2">\n              <button\n                type="submit"\n                class="btn btn-primary btn-sm"\n                ng-disabled="formValues.newPassword === \'\' || formValues.newPassword !== formValues.confirmPassword"\n                ng-click="updatePassword()"\n                ></button\n              >\n            </div>\n          </div>\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/portainer/views/teams/teams.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="">\n    <a data-toggle="tooltip" title="" ui-sref="portainer.teams" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content></rd-header-content>\n</rd-header>\n\n<div class="row" ng-if="isAdmin">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-plus" title-text=""> </rd-widget-header>\n      <rd-widget-body>\n        <form class="form-horizontal" name="teamCreationForm" ng-submit="addTeam()">\n          \x3c!-- name-input --\x3e\n          <div class="form-group">\n            <label for="team_name" class="col-sm-2 control-label text-left"></label>\n            <div class="col-sm-10">\n              <input\n                type="text"\n                class="form-control"\n                id="team_name"\n                name="team_name"\n                ng-model="formValues.Name"\n                ng-change="checkNameValidity(teamCreationForm)"\n                placeholder=" development"\n                auto-focus\n                required\n              />\n            </div>\n          </div>\n          <div class="form-group" ng-show="teamCreationForm.team_name.$invalid">\n            <div class="col-sm-12 small text-warning">\n              <div ng-messages="teamCreationForm.team_name.$error">\n                <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n                <p ng-message="validName"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> This team already exists.</p>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !name-input --\x3e\n          \x3c!-- team-leaders --\x3e\n          <div class="form-group" ng-if="users.length > 0">\n            <div class="col-sm-12">\n              <label class="control-label text-left">\n                Select team leader(s)\n                <portainer-tooltip\n                  position="bottom"\n                  message=" "\n                ></portainer-tooltip>\n              </label>\n              <span\n                isteven-multi-select\n                ng-if="users.length > 0"\n                input-model="users"\n                output-model="formValues.Leaders"\n                button-label="Username"\n                item-label="Username"\n                tick-property="ticked"\n                helper-elements="filter"\n                search-property="Username"\n                translation="{nothingSelected: \'\', search: \'...\'}"\n                style="margin-left: 20px;"\n              >\n              </span>\n            </div>\n          </div>\n          \x3c!-- !team-leaders --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button\n                type="button"\n                class="btn btn-primary btn-sm"\n                ng-disabled="state.actionInProgress || !teamCreationForm.$valid"\n                ng-click="addTeam()"\n                button-spinner="state.actionInProgress"\n              >\n                <span ng-hide="state.actionInProgress"><i class="fa fa-plus" aria-hidden="true"></i> </span>\n                <span ng-show="state.actionInProgress">Creating team...</span>\n              </button>\n            </div>\n          </div>\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-12">\n    <teams-datatable title-text="" title-icon="fa-users" dataset="teams" table-key="teams" order-by="Name" remove-action="removeAction"></teams-datatable>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/portainer/views/teams/edit/team.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Team details"></rd-header-title>\n  <rd-header-content>\n    <a ui-sref="portainer.teams"></a> &gt; <a ui-sref="portainer.teams.team({id: team.Id})">{{ team.Name }}</a>\n  </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-users" title-text="Team details"></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <tbody>\n            <tr>\n              <td></td>\n              <td>\n                {{ team.Name }}\n                <button class="btn btn-xs btn-danger" ng-if="isAdmin" ng-click="deleteTeam()"\n                  ><i class="fa fa-trash-alt space-right" aria-hidden="true"></i>Delete this team</button\n                >\n              </td>\n            </tr>\n            <tr>\n              <td>Leaders</td>\n              <td>{{ leaderCount }}</td>\n            </tr>\n            <tr>\n              <td>Total users in team</td>\n              <td>{{ teamMembers.length }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row" ng-if="team">\n  <div class="col-sm-6">\n    <rd-widget>\n      <rd-widget-header classes="col-sm-12 col-md-6 nopadding" icon="fa-users" title-text="">\n        <div class="pull-md-right pull-lg-right">\n          Items per page:\n          <select ng-model="state.pagination_count_users" ng-change="changePaginationCountUsers()">\n            <option value="0"></option>\n            <option value="10">10</option>\n            <option value="25">25</option>\n            <option value="50">50</option>\n            <option value="100">100</option>\n          </select>\n        </div>\n      </rd-widget-header>\n      <rd-widget-taskbar classes="col-sm-12 nopadding">\n        <div class="col-sm-12 col-md-6 nopadding">\n          <button class="btn btn-primary btn-sm" ng-click="addAllUsers()" ng-if="isAdmin" ng-disabled="users.length ===  0 || filteredUsers.length === 0"\n            ><i class="fa fa-user-plus space-right" aria-hidden="true"></i>Add all users</button\n          >\n        </div>\n        <div class="col-sm-12 col-md-6 nopadding">\n          <input type="text" id="filter-users" ng-model="state.filterUsers" placeholder="..." class="form-control input-sm" />\n        </div>\n      </rd-widget-taskbar>\n      <rd-widget-body classes="no-padding">\n        <div class="table-responsive">\n          <table class="table table-hover">\n            <thead>\n              <tr>\n                <th>\n                  <a ng-click="orderUsers(\'Username\')">\n                    \n                    <span ng-show="sortTypeUsers == \'Username\' && !sortReverseUsers" class="glyphicon glyphicon-chevron-down"></span>\n                    <span ng-show="sortTypeUsers == \'Username\' && sortReverseUsers" class="glyphicon glyphicon-chevron-up"></span>\n                  </a>\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr\n                pagination-id="table1"\n                dir-paginate="user in users | filter:state.filterUsers | orderBy:sortTypeUsers:sortReverseUsers | itemsPerPage: state.pagination_count_users"\n              >\n                <td>\n                  {{ user.Username }}\n                  <span style="margin-left: 5px;">\n                    <a ng-click="addUser(user)"><i class="fa fa-plus-circle space-right" aria-hidden="true"></i>Add</a>\n                  </span>\n                </td>\n              </tr>\n              <tr ng-if="!users">\n                <td colspan="2" class="text-center text-muted">...</td>\n              </tr>\n              <tr ng-if="users.length === 0 || (users | filter: state.filterUsers).length === 0">\n                <td colspan="2" class="text-center text-muted">No users.</td>\n              </tr>\n            </tbody>\n          </table>\n          <div ng-if="users" class="pull-left pagination-controls">\n            <dir-pagination-controls pagination-id="table1"></dir-pagination-controls>\n          </div>\n        </div>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n  <div class="col-sm-6">\n    <rd-widget>\n      <rd-widget-header classes="col-sm-12 col-md-6 nopadding" icon="fa-users" title-text="Team members">\n        <div class="pull-md-right pull-lg-right">\n          Items per page:\n          <select ng-model="state.pagination_count_members" ng-change="changePaginationCountGroupMembers()">\n            <option value="0"></option>\n            <option value="10">10</option>\n            <option value="25">25</option>\n            <option value="50">50</option>\n            <option value="100">100</option>\n          </select>\n        </div>\n      </rd-widget-header>\n      <rd-widget-taskbar classes="col-sm-12 nopadding">\n        <div class="col-sm-12 col-md-6 nopadding">\n          <button class="btn btn-primary btn-sm" ng-click="removeAllUsers()" ng-if="isAdmin" ng-disabled="teamMembers.length ===  0 || filteredGroupMembers.length === 0"\n            ><i class="fa fa-user-times space-right" aria-hidden="true"></i>Remove all users</button\n          >\n        </div>\n        <div class="col-sm-12 col-md-6 nopadding">\n          <input type="text" id="filter-group" ng-model="state.filterGroupMembers" placeholder="..." class="form-control input-sm" />\n        </div>\n      </rd-widget-taskbar>\n      <rd-widget-body classes="no-padding">\n        <div class="table-responsive">\n          <table class="table table-hover">\n            <thead>\n              <tr>\n                <th>\n                  <a ng-click="orderGroupMembers(\'Username\')">\n                    \n                    <span ng-show="sortTypeGroupMembers == \'Username\' && !sortReverseGroupMembers" class="glyphicon glyphicon-chevron-down"></span>\n                    <span ng-show="sortTypeGroupMembers == \'Username\' && sortReverseGroupMembers" class="glyphicon glyphicon-chevron-up"></span>\n                  </a>\n                </th>\n                <th>\n                  <a ng-click="orderGroupMembers(\'TeamRole\')">\n                    Team Role\n                    <span ng-show="sortTypeGroupMembers == \'TeamRole\' && !sortReverseGroupMembers" class="glyphicon glyphicon-chevron-down"></span>\n                    <span ng-show="sortTypeGroupMembers == \'TeamRole\' && sortReverseGroupMembers" class="glyphicon glyphicon-chevron-up"></span>\n                  </a>\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr\n                pagination-id="table2"\n                dir-paginate="user in teamMembers | filter:state.filterGroupMembers | orderBy:sortTypeGroupMembers:sortReverseGroupMembers | itemsPerPage: state.pagination_count_groupMembers"\n              >\n                <td>\n                  {{ user.Username }}\n                  <span style="margin-left: 5px;" ng-if="isAdmin || user.TeamRole === \'Member\'">\n                    <a ng-click="removeUser(user)"><i class="fa fa-minus-circle space-right" aria-hidden="true"></i></a>\n                  </span>\n                </td>\n                <td>\n                  <i ng-if="user.TeamRole === \'Leader\'" class="fa fa-user-plus" aria-hidden="true" style="margin-right: 2px;"></i>\n                  <i ng-if="user.TeamRole === \'Member\'" class="fa fa-user" aria-hidden="true" style="margin-right: 2px;"></i>\n                  {{ user.TeamRole }}\n                  <span style="margin-left: 5px;" ng-if="isAdmin">\n                    <a style="margin-left: 5px;" ng-click="promoteToLeader(user)" ng-if="user.TeamRole === \'Member\'"\n                      ><i class="fa fa-user-plus space-right" aria-hidden="true"></i>Leader</a\n                    >\n                    <a style="margin-left: 5px;" ng-click="demoteToMember(user)" ng-if="user.TeamRole === \'Leader\'"\n                      ><i class="fa fa-user-times space-right" aria-hidden="true"></i>Member</a\n                    >\n                  </span>\n                </td>\n              </tr>\n              <tr ng-if="!teamMembers">\n                <td colspan="2" class="text-center text-muted">...</td>\n              </tr>\n              <tr ng-if="teamMembers.length === 0 || (teamMembers | filter: state.filterGroupMembers).length === 0">\n                <td colspan="2" class="text-center text-muted"></td>\n              </tr>\n            </tbody>\n          </table>\n          <div ng-if="teamMembers" class="pull-left pagination-controls">\n            <dir-pagination-controls pagination-id="table2"></dir-pagination-controls>\n          </div>\n        </div>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/portainer/views/roles/roles.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Roles">\n    <a data-toggle="tooltip" title="" ui-sref="portainer.roles" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content></rd-header-content>\n</rd-header>\n\n<information-panel title-text="Information">\n  <span class="small">\n    <p class="text-muted">\n      <i class="fa fa-user" aria-hidden="true" style="margin-right: 2px;"></i>\n       <a href="https://www.portainer.io/business-upsell?from=k8s-rbac-roles" target="_blank">Portainer </a>\n    </p>\n  </span>\n</information-panel>\n\n<div class="row">\n  <div class="col-sm-12">\n    <roles-datatable title-text="Roles" title-icon="fa-file-code" table-key="roles" order-by="Name"></roles-datatable>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-12" style="margin-bottom: 0px;">\n    <rd-widget>\n      <rd-widget-header icon="fa-user-lock" title-text="Effective access viewer"></rd-widget-header>\n      <rd-widget-body>\n        <form class="form-horizontal">\n          <div class="col-sm-12 form-section-title">\n            User\n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <span class="small text-muted">\n                No user available\n              </span>\n            </div>\n          </div>\n\n          <div class="col-sm-12 form-section-title">\n            Access\n          </div>\n          <div>\n            <div class="small text-muted" style="margin-bottom: 15px;">\n              <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n              Effective role for each endpoint will be displayed for the selected user\n            </div>\n          </div>\n          <access-viewer-datatable table-key="access_viewer" order-by="EndpointName"> </access-viewer-datatable>\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){var a={"./__module.js":458,"./agent/components/file-uploader/fileUploaderController.js":383,"./agent/components/file-uploader/index.js":806,"./agent/components/files-datatable/index.js":808,"./agent/components/host-browser/hostBrowserController.js":384,"./agent/components/host-browser/index.js":810,"./agent/components/node-selector/index.js":812,"./agent/components/node-selector/nodeSelectorController.js":385,"./agent/components/volume-browser/index.js":814,"./agent/components/volume-browser/volumeBrowserController.js":386,"./agent/index.js":490,"./agent/models/agent.js":387,"./agent/rest/agent.js":816,"./agent/rest/browse.js":817,"./agent/rest/host.js":818,"./agent/rest/ping.js":819,"./agent/rest/response/browse.js":233,"./agent/rest/v1/agent.js":820,"./agent/rest/v1/browse.js":821,"./agent/services/agentService.js":822,"./agent/services/hostBrowserService.js":823,"./agent/services/pingService.js":824,"./agent/services/volumeBrowserService.js":825,"./app.js":826,"./assets/css/index.js":487,"./assets/js/angulartics-matomo.js":489,"./azure/_module.js":491,"./azure/components/azure-endpoint-config/azure-endpoint-config.js":827,"./azure/components/azure-sidebar-content/azure-sidebar-content.js":829,"./azure/components/datatables/containergroups-datatable/containerGroupsDatatable.js":831,"./azure/models/container_group.js":165,"./azure/models/location.js":388,"./azure/models/provider.js":389,"./azure/models/resource_group.js":288,"./azure/models/subscription.js":289,"./azure/rest/azure.js":833,"./azure/rest/container_group.js":834,"./azure/rest/location.js":835,"./azure/rest/provider.js":836,"./azure/rest/resource_group.js":837,"./azure/rest/subscription.js":838,"./azure/services/azureService.js":839,"./azure/services/containerGroupService.js":840,"./azure/services/locationService.js":841,"./azure/services/providerService.js":842,"./azure/services/resourceGroupService.js":843,"./azure/services/subscriptionService.js":844,"./azure/views/containerinstances/container-instance-details/containerInstanceDetailsController.js":390,"./azure/views/containerinstances/container-instance-details/index.js":845,"./azure/views/containerinstances/containerInstancesController.js":847,"./azure/views/containerinstances/create/createContainerInstanceController.js":848,"./azure/views/dashboard/dashboardController.js":849,"./config.js":850,"./constants.js":888,"./docker/__module.js":492,"./docker/components/container-capabilities/container-capabilities.js":889,"./docker/components/container-quick-actions/containerQuickActions.js":891,"./docker/components/container-restart-policy/container-restart-policy-controller.js":893,"./docker/components/container-restart-policy/container-restart-policy.js":894,"./docker/components/dashboard-cluster-agent-info/dashboard-cluster-agent-info.js":896,"./docker/components/dashboard-cluster-agent-info/dashboardClusterAgentInfoController.js":898,"./docker/components/datatables/configs-datatable/configsDatatable.js":899,"./docker/components/datatables/container-networks-datatable/containerNetworksDatatable.js":901,"./docker/components/datatables/container-networks-datatable/containerNetworksDatatableController.js":903,"./docker/components/datatables/container-processes-datatable/containerProcessesDatatable.js":904,"./docker/components/datatables/containers-datatable/actions/containersDatatableActions.js":906,"./docker/components/datatables/containers-datatable/actions/containersDatatableActionsController.js":908,"./docker/components/datatables/containers-datatable/containersDatatable.js":909,"./docker/components/datatables/containers-datatable/containersDatatableController.js":911,"./docker/components/datatables/events-datatable/eventsDatatable.js":912,"./docker/components/datatables/images-datatable/imagesDatatable.js":914,"./docker/components/datatables/images-datatable/imagesDatatableController.js":916,"./docker/components/datatables/macvlan-nodes-datatable/macvlanNodesDatatable.js":917,"./docker/components/datatables/networks-datatable/network-row-content/networkRowContent.js":919,"./docker/components/datatables/networks-datatable/networksDatatable.js":921,"./docker/components/datatables/networks-datatable/networksDatatableController.js":923,"./docker/components/datatables/node-tasks-datatable/nodeTasksDatatable.js":924,"./docker/components/datatables/nodes-datatable/nodesDatatable.js":926,"./docker/components/datatables/secrets-datatable/secretsDatatable.js":928,"./docker/components/datatables/service-tasks-datatable/serviceTasksDatatable.js":930,"./docker/components/datatables/service-tasks-datatable/serviceTasksDatatableController.js":932,"./docker/components/datatables/services-datatable/actions/servicesDatatableActions.js":933,"./docker/components/datatables/services-datatable/actions/servicesDatatableActionsController.js":935,"./docker/components/datatables/services-datatable/servicesDatatable.js":936,"./docker/components/datatables/services-datatable/servicesDatatableController.js":938,"./docker/components/datatables/tasks-datatable/tasksDatatable.js":939,"./docker/components/datatables/tasks-datatable/tasksDatatableController.js":941,"./docker/components/datatables/volumes-datatable/volumesDatatable.js":942,"./docker/components/datatables/volumes-datatable/volumesDatatableController.js":944,"./docker/components/dockerSidebarContent/docker-sidebar-content.js":945,"./docker/components/host-overview/host-overview.js":947,"./docker/components/host-view-panels/devices-panel/devices-panel.js":949,"./docker/components/host-view-panels/disks-panel/disks-panel.js":951,"./docker/components/host-view-panels/engine-details-panel/engine-details-panel.js":953,"./docker/components/host-view-panels/host-details-panel/host-details-panel.js":955,"./docker/components/host-view-panels/node-availability-select/node-availability-select-controller.js":957,"./docker/components/host-view-panels/node-availability-select/node-availability-select.js":958,"./docker/components/host-view-panels/node-labels-table/node-labels-table-controller.js":960,"./docker/components/host-view-panels/node-labels-table/node-labels-table.js":961,"./docker/components/host-view-panels/swarm-node-details-panel/swarm-node-details-panel-controller.js":963,"./docker/components/host-view-panels/swarm-node-details-panel/swarm-node-details-panel.js":964,"./docker/components/imageRegistry/por-image-registry.js":966,"./docker/components/imageRegistry/porImageRegistryController.js":968,"./docker/components/log-viewer/log-viewer.js":969,"./docker/components/log-viewer/logViewerController.js":971,"./docker/components/network-macvlan-form/network-macvlan-form.js":973,"./docker/components/network-macvlan-form/networkMacvlanFormController.js":975,"./docker/components/network-macvlan-form/networkMacvlanFormModel.js":391,"./docker/components/volumesCIFSForm/volumesCifsForm.js":976,"./docker/components/volumesCIFSForm/volumesCifsFormModel.js":392,"./docker/components/volumesNFSForm/volumes-nfs-form.js":978,"./docker/components/volumesNFSForm/volumesNFSFormModel.js":393,"./docker/filters/filters.js":980,"./docker/helpers/configHelper.js":981,"./docker/helpers/constraintsHelper.js":982,"./docker/helpers/containerHelper.js":983,"./docker/helpers/imageHelper.js":984,"./docker/helpers/infoHelper.js":985,"./docker/helpers/labelHelper.js":986,"./docker/helpers/logHelper.js":987,"./docker/helpers/networkHelper.js":170,"./docker/helpers/nodeHelper.js":988,"./docker/helpers/secretHelper.js":989,"./docker/helpers/serviceHelper.js":990,"./docker/helpers/taskHelper.js":991,"./docker/helpers/volumeHelper.js":992,"./docker/interceptors/containersInterceptor.js":993,"./docker/interceptors/imagesInterceptor.js":994,"./docker/interceptors/infoInterceptor.js":995,"./docker/interceptors/networksInterceptor.js":996,"./docker/interceptors/versionInterceptor.js":997,"./docker/interceptors/volumesInterceptor.js":998,"./docker/models/config.js":299,"./docker/models/container.js":171,"./docker/models/containerCapabilities.js":218,"./docker/models/event.js":394,"./docker/models/image.js":172,"./docker/models/imageDetails.js":395,"./docker/models/imageLayer.js":396,"./docker/models/network.js":300,"./docker/models/node.js":301,"./docker/models/plugin.js":397,"./docker/models/porImageRegistry.js":61,"./docker/models/secret.js":302,"./docker/models/service.js":303,"./docker/models/swarm.js":398,"./docker/models/task.js":304,"./docker/models/volume.js":240,"./docker/rest/build.js":999,"./docker/rest/commit.js":1e3,"./docker/rest/config.js":1001,"./docker/rest/container.js":1002,"./docker/rest/exec.js":1003,"./docker/rest/image.js":1004,"./docker/rest/network.js":1005,"./docker/rest/node.js":1006,"./docker/rest/plugin.js":1007,"./docker/rest/response/handlers.js":24,"./docker/rest/response/image.js":399,"./docker/rest/secret.js":1008,"./docker/rest/service.js":1009,"./docker/rest/swarm.js":1010,"./docker/rest/system.js":1011,"./docker/rest/systemEndpoint.js":1012,"./docker/rest/task.js":1013,"./docker/rest/volume.js":1014,"./docker/services/buildService.js":1015,"./docker/services/configService.js":1016,"./docker/services/containerService.js":1017,"./docker/services/execService.js":1018,"./docker/services/imageService.js":1019,"./docker/services/networkService.js":1020,"./docker/services/nodeService.js":1021,"./docker/services/pluginService.js":1022,"./docker/services/secretService.js":1023,"./docker/services/serviceService.js":1024,"./docker/services/swarmService.js":1025,"./docker/services/systemService.js":1026,"./docker/services/taskService.js":1027,"./docker/services/volumeService.js":1028,"./docker/views/configs/configsController.js":1029,"./docker/views/configs/create/createConfigController.js":1030,"./docker/views/configs/edit/configController.js":1031,"./docker/views/containers/console/containerConsoleController.js":1032,"./docker/views/containers/containersController.js":1033,"./docker/views/containers/create/createContainerController.js":1034,"./docker/views/containers/edit/containerController.js":1035,"./docker/views/containers/inspect/containerInspectController.js":1036,"./docker/views/containers/logs/containerLogsController.js":1037,"./docker/views/containers/stats/containerStatsController.js":1038,"./docker/views/dashboard/dashboardController.js":1039,"./docker/views/events/eventsController.js":1082,"./docker/views/host/host-browser-view/host-browser-view-controller.js":1083,"./docker/views/host/host-browser-view/host-browser-view.js":1084,"./docker/views/host/host-view-controller.js":1086,"./docker/views/host/host-view.js":1087,"./docker/views/images/build/buildImageController.js":1089,"./docker/views/images/edit/imageController.js":1090,"./docker/views/images/imagesController.js":1091,"./docker/views/images/import/importImageController.js":1092,"./docker/views/networks/create/createNetworkController.js":1093,"./docker/views/networks/edit/networkController.js":1094,"./docker/views/networks/networksController.js":1095,"./docker/views/nodes/node-browser/node-browser-controller.js":1096,"./docker/views/nodes/node-browser/node-browser.js":1097,"./docker/views/nodes/node-details/node-details-view-controller.js":1099,"./docker/views/nodes/node-details/node-details-view.js":1100,"./docker/views/secrets/create/createSecretController.js":1102,"./docker/views/secrets/edit/secretController.js":1103,"./docker/views/secrets/secretsController.js":1104,"./docker/views/services/create/createServiceController.js":1105,"./docker/views/services/edit/serviceController.js":1110,"./docker/views/services/logs/serviceLogsController.js":1129,"./docker/views/services/servicesController.js":1130,"./docker/views/swarm/swarmController.js":1131,"./docker/views/swarm/visualizer/swarmVisualizerController.js":1132,"./docker/views/tasks/edit/taskController.js":1133,"./docker/views/tasks/logs/taskLogsController.js":1134,"./docker/views/volumes/browse/browseVolumeController.js":1135,"./docker/views/volumes/create/createVolumeController.js":1136,"./docker/views/volumes/edit/volumeController.js":1137,"./docker/views/volumes/volumesController.js":1138,"./edge/__module.js":493,"./edge/components/associated-endpoints-datatable/associatedEndpointsDatatableController.js":400,"./edge/components/associated-endpoints-datatable/index.js":1139,"./edge/components/edge-groups-selector/index.js":1141,"./edge/components/edge-job-form/edgeJobFormController.js":401,"./edge/components/edge-job-form/index.js":1143,"./edge/components/edge-job-results-datatable/edgeJobResultsDatatableController.js":402,"./edge/components/edge-job-results-datatable/index.js":1145,"./edge/components/edge-jobs-datatable/index.js":1148,"./edge/components/edge-stack-endpoints-datatable/edgeStackEndpointsDatatableController.js":403,"./edge/components/edge-stack-endpoints-datatable/index.js":1150,"./edge/components/edge-stack-status/edgeStackStatusController.js":404,"./edge/components/edge-stack-status/index.js":1152,"./edge/components/edge-stacks-datatable/index.js":1155,"./edge/components/edit-edge-stack-form/editEdgeStackFormController.js":405,"./edge/components/edit-edge-stack-form/index.js":1157,"./edge/components/group-form/groupFormController.js":406,"./edge/components/group-form/index.js":1159,"./edge/components/groups-datatable/groupsDatatableController.js":407,"./edge/components/groups-datatable/index.js":1161,"./edge/rest/edge-groups.js":1163,"./edge/rest/edge-job-results.js":1164,"./edge/rest/edge-jobs.js":1165,"./edge/rest/edge-stacks.js":1166,"./edge/rest/edge-templates.js":1167,"./edge/services/edge-group.js":1168,"./edge/services/edge-job.js":1169,"./edge/services/edge-stack.js":1170,"./edge/services/edge-template.js":1171,"./edge/views/edge-groups/createEdgeGroupView/createEdgeGroupViewController.js":408,"./edge/views/edge-groups/createEdgeGroupView/index.js":1172,"./edge/views/edge-groups/edgeGroupsView/edgeGroupsViewController.js":409,"./edge/views/edge-groups/edgeGroupsView/index.js":1174,"./edge/views/edge-groups/editEdgeGroupView/editEdgeGroupViewController.js":410,"./edge/views/edge-groups/editEdgeGroupView/index.js":1176,"./edge/views/edge-jobs/createEdgeJobView/createEdgeJobViewController.js":411,"./edge/views/edge-jobs/createEdgeJobView/index.js":1178,"./edge/views/edge-jobs/edgeJob/edgeJobController.js":412,"./edge/views/edge-jobs/edgeJob/index.js":1180,"./edge/views/edge-jobs/edgeJobsView/edgeJobsViewController.js":413,"./edge/views/edge-jobs/edgeJobsView/index.js":1182,"./edge/views/edge-stacks/createEdgeStackView/createEdgeStackViewController.js":414,"./edge/views/edge-stacks/createEdgeStackView/index.js":1184,"./edge/views/edge-stacks/edgeStacksView/edgeStacksViewController.js":415,"./edge/views/edge-stacks/edgeStacksView/index.js":1186,"./edge/views/edge-stacks/editEdgeStackView/editEdgeStackViewController.js":416,"./edge/views/edge-stacks/editEdgeStackView/index.js":1188,"./integrations/_module.js":1190,"./integrations/storidge/_module.js":1191,"./integrations/storidge/components/cluster-events-datatable/storidgeClusterEventsDatatable.js":1201,"./integrations/storidge/components/drives-datatable/storidgeDrivesDatatable.js":1203,"./integrations/storidge/components/drives-datatable/storidgeDrivesDatatableController.js":1205,"./integrations/storidge/components/nodes-datatable/storidgeNodesDatatable.js":1206,"./integrations/storidge/components/nodes-datatable/storidgeNodesDatatableController.js":1208,"./integrations/storidge/components/profileSelector/storidgeProfileSelector.js":1209,"./integrations/storidge/components/profileSelector/storidgeProfileSelectorController.js":1211,"./integrations/storidge/components/profiles-datatable/storidgeProfilesDatatable.js":1212,"./integrations/storidge/components/snapshot-creation/storidgeSnapshotCreation.js":1214,"./integrations/storidge/components/snapshot-creation/storidgeSnapshotCreationController.js":1216,"./integrations/storidge/components/snapshots-datatable/storidgeSnapshotsDatatable.js":1217,"./integrations/storidge/components/volume-storidge-info/volumeStoridgeInfo.js":1219,"./integrations/storidge/components/volume-storidge-info/volumeStoridgeInfoController.js":1221,"./integrations/storidge/filters/filters.js":1222,"./integrations/storidge/models/drive.js":309,"./integrations/storidge/models/events.js":417,"./integrations/storidge/models/info.js":418,"./integrations/storidge/models/node.js":310,"./integrations/storidge/models/profile.js":112,"./integrations/storidge/models/snapshot.js":311,"./integrations/storidge/models/volume.js":312,"./integrations/storidge/rest/storidge.js":1223,"./integrations/storidge/services/chartService.js":1224,"./integrations/storidge/services/clusterService.js":1272,"./integrations/storidge/services/driveService.js":1273,"./integrations/storidge/services/nodeService.js":1274,"./integrations/storidge/services/profileService.js":1275,"./integrations/storidge/services/snapshotService.js":1276,"./integrations/storidge/services/volumeService.js":1277,"./integrations/storidge/views/cluster/clusterController.js":1278,"./integrations/storidge/views/drives/drivesController.js":1279,"./integrations/storidge/views/drives/inspect/driveController.js":1280,"./integrations/storidge/views/monitor/monitorController.js":1281,"./integrations/storidge/views/nodes/inspect/nodeController.js":1282,"./integrations/storidge/views/profiles/create/createProfileController.js":1283,"./integrations/storidge/views/profiles/edit/profileController.js":1284,"./integrations/storidge/views/profiles/profilesController.js":1285,"./integrations/storidge/views/snapshots/inspect/snapshotController.js":1286,"./kubernetes/__module.js":1287,"./kubernetes/component-status/converter.js":419,"./kubernetes/component-status/models.js":420,"./kubernetes/component-status/rest.js":1288,"./kubernetes/component-status/service.js":1289,"./kubernetes/components/datatables/application/containers-datatable/containersDatatable.js":1290,"./kubernetes/components/datatables/applications-datatable/applicationsDatatable.js":1292,"./kubernetes/components/datatables/applications-datatable/applicationsDatatableController.js":1294,"./kubernetes/components/datatables/applications-ports-datatable/applicationsPortsDatatable.js":1297,"./kubernetes/components/datatables/applications-ports-datatable/applicationsPortsDatatableController.js":1299,"./kubernetes/components/datatables/applications-stacks-datatable/applicationsStacksDatatable.js":1300,"./kubernetes/components/datatables/applications-stacks-datatable/applicationsStacksDatatableController.js":1302,"./kubernetes/components/datatables/configurations-datatable/configurationsDatatable.js":1303,"./kubernetes/components/datatables/configurations-datatable/configurationsDatatableController.js":1305,"./kubernetes/components/datatables/events-datatable/eventsDatatable.js":1306,"./kubernetes/components/datatables/integrated-applications-datatable/integratedApplicationsDatatable.js":1308,"./kubernetes/components/datatables/node-applications-datatable/nodeApplicationsDatatable.js":1310,"./kubernetes/components/datatables/node-applications-datatable/nodeApplicationsDatatableController.js":1312,"./kubernetes/components/datatables/nodes-datatable/nodesDatatable.js":1313,"./kubernetes/components/datatables/resource-pool-applications-datatable/resourcePoolApplicationsDatatable.js":1315,"./kubernetes/components/datatables/resource-pool-applications-datatable/resourcePoolApplicationsDatatableController.js":1317,"./kubernetes/components/datatables/resource-pools-datatable/resourcePoolsDatatable.js":1318,"./kubernetes/components/datatables/resource-pools-datatable/resourcePoolsDatatableController.js":1320,"./kubernetes/components/datatables/volumes-datatable/volumesDatatable.js":1321,"./kubernetes/components/datatables/volumes-datatable/volumesDatatableController.js":1323,"./kubernetes/components/kubernetes-configuration-data/kubernetesConfigurationData.js":1324,"./kubernetes/components/kubernetes-configuration-data/kubernetesConfigurationDataController.js":1326,"./kubernetes/components/kubernetes-sidebar-content/kubernetesSidebarContent.js":1327,"./kubernetes/components/resource-reservation/resourceReservation.js":1329,"./kubernetes/components/resource-reservation/resourceReservationController.js":1331,"./kubernetes/components/view-header/viewHeader.js":1332,"./kubernetes/components/view-loading/viewLoading.js":1334,"./kubernetes/components/yaml-inspector/yamlInspector.js":1336,"./kubernetes/components/yaml-inspector/yamlInspectorController.js":1338,"./kubernetes/converters/application.js":72,"./kubernetes/converters/configMap.js":79,"./kubernetes/converters/configuration.js":220,"./kubernetes/converters/daemonSet.js":207,"./kubernetes/converters/deployment.js":206,"./kubernetes/converters/event.js":427,"./kubernetes/converters/namespace.js":242,"./kubernetes/converters/persistentVolumeClaim.js":115,"./kubernetes/converters/resourcePool.js":316,"./kubernetes/converters/resourceQuota.js":177,"./kubernetes/converters/secret.js":117,"./kubernetes/converters/service.js":173,"./kubernetes/converters/statefulSet.js":208,"./kubernetes/converters/storageClass.js":320,"./kubernetes/converters/volume.js":321,"./kubernetes/endpoint/converter.js":431,"./kubernetes/endpoint/models.js":243,"./kubernetes/endpoint/rest.js":1343,"./kubernetes/endpoint/service.js":1344,"./kubernetes/filters/applicationFilters.js":1345,"./kubernetes/filters/configurationFilters.js":1346,"./kubernetes/filters/eventFilters.js":1347,"./kubernetes/filters/filters.js":1348,"./kubernetes/helpers/application/index.js":13,"./kubernetes/helpers/application/rollback.js":432,"./kubernetes/helpers/commonHelper.js":47,"./kubernetes/helpers/configMapHelper.js":244,"./kubernetes/helpers/configurationHelper.js":97,"./kubernetes/helpers/eventHelper.js":93,"./kubernetes/helpers/formValidationHelper.js":48,"./kubernetes/helpers/history/daemonset.js":322,"./kubernetes/helpers/history/deployment.js":245,"./kubernetes/helpers/history/index.js":433,"./kubernetes/helpers/history/statefulset.js":323,"./kubernetes/helpers/namespaceHelper.js":1349,"./kubernetes/helpers/resourceQuotaHelper.js":143,"./kubernetes/helpers/resourceReservationHelper.js":15,"./kubernetes/helpers/serviceHelper.js":210,"./kubernetes/helpers/stackHelper.js":434,"./kubernetes/helpers/volumeHelper.js":66,"./kubernetes/horizontal-pod-auto-scaler/converter.js":119,"./kubernetes/horizontal-pod-auto-scaler/helper.js":178,"./kubernetes/horizontal-pod-auto-scaler/models.js":324,"./kubernetes/horizontal-pod-auto-scaler/payload.js":436,"./kubernetes/horizontal-pod-auto-scaler/rest.js":1350,"./kubernetes/horizontal-pod-auto-scaler/service.js":1351,"./kubernetes/ingress/constants.js":59,"./kubernetes/ingress/converter.js":54,"./kubernetes/ingress/helper.js":426,"./kubernetes/ingress/models.js":147,"./kubernetes/ingress/payloads.js":246,"./kubernetes/ingress/rest.js":1352,"./kubernetes/ingress/service.js":1353,"./kubernetes/models/application/formValues.js":18,"./kubernetes/models/application/models/constants.js":373,"./kubernetes/models/application/models/index.js":3,"./kubernetes/models/application/payloads.js":74,"./kubernetes/models/common/params.js":11,"./kubernetes/models/common/payloads.js":37,"./kubernetes/models/config-map/models.js":67,"./kubernetes/models/config-map/payloads.js":315,"./kubernetes/models/configuration/formvalues.js":113,"./kubernetes/models/configuration/models.js":26,"./kubernetes/models/daemon-set/models.js":163,"./kubernetes/models/daemon-set/payloads.js":422,"./kubernetes/models/deploy.js":326,"./kubernetes/models/deployment/models.js":162,"./kubernetes/models/deployment/payloads.js":421,"./kubernetes/models/event/models.js":428,"./kubernetes/models/history/models.js":118,"./kubernetes/models/namespace/models.js":235,"./kubernetes/models/namespace/payloads.js":429,"./kubernetes/models/port/models.js":313,"./kubernetes/models/resource-pool/formValues.js":116,"./kubernetes/models/resource-pool/models.js":71,"./kubernetes/models/resource-quota/models.js":85,"./kubernetes/models/resource-quota/payloads.js":317,"./kubernetes/models/resource-reservation/models.js":161,"./kubernetes/models/secret/models.js":319,"./kubernetes/models/secret/payloads.js":318,"./kubernetes/models/service/models.js":28,"./kubernetes/models/service/payloads.js":425,"./kubernetes/models/stack/models.js":435,"./kubernetes/models/stateful-set/models.js":114,"./kubernetes/models/stateful-set/payloads.js":423,"./kubernetes/models/storage-class/models.js":211,"./kubernetes/models/storage-class/payload.js":430,"./kubernetes/models/volume/models.js":209,"./kubernetes/models/volume/payloads.js":424,"./kubernetes/node/converter.js":100,"./kubernetes/node/filters.js":1354,"./kubernetes/node/formValues.js":148,"./kubernetes/node/helper.js":174,"./kubernetes/node/models.js":120,"./kubernetes/node/payload.js":327,"./kubernetes/node/rest.js":1355,"./kubernetes/node/service.js":1356,"./kubernetes/pod/converter.js":328,"./kubernetes/pod/filters.js":1357,"./kubernetes/pod/models/affinities.js":374,"./kubernetes/pod/models/index.js":31,"./kubernetes/pod/payloads/affinities.js":176,"./kubernetes/pod/service.js":1358,"./kubernetes/rest/configMap.js":1359,"./kubernetes/rest/controllerRevision.js":1360,"./kubernetes/rest/daemonSet.js":1361,"./kubernetes/rest/deployment.js":1362,"./kubernetes/rest/endpoint.js":1363,"./kubernetes/rest/event.js":1364,"./kubernetes/rest/health.js":1365,"./kubernetes/rest/namespace.js":1366,"./kubernetes/rest/persistentVolumeClaim.js":1367,"./kubernetes/rest/pod.js":1368,"./kubernetes/rest/replicaSet.js":1369,"./kubernetes/rest/resourceQuota.js":1370,"./kubernetes/rest/response/transform.js":21,"./kubernetes/rest/secret.js":1371,"./kubernetes/rest/service.js":1372,"./kubernetes/rest/statefulSet.js":1373,"./kubernetes/rest/storage.js":1374,"./kubernetes/services/applicationService.js":1375,"./kubernetes/services/configMapService.js":1376,"./kubernetes/services/configurationService.js":1377,"./kubernetes/services/controllerRevisionService.js":1378,"./kubernetes/services/daemonSetService.js":1379,"./kubernetes/services/deploymentService.js":1380,"./kubernetes/services/eventService.js":1381,"./kubernetes/services/healthService.js":1382,"./kubernetes/services/historyService.js":1383,"./kubernetes/services/namespaceService.js":1384,"./kubernetes/services/persistentVolumeClaimService.js":1385,"./kubernetes/services/replicaSetService.js":1386,"./kubernetes/services/resourcePoolService.js":1387,"./kubernetes/services/resourceQuotaService.js":1388,"./kubernetes/services/secretService.js":1389,"./kubernetes/services/serviceService.js":1390,"./kubernetes/services/stackService.js":1391,"./kubernetes/services/statefulSetService.js":1392,"./kubernetes/services/storageService.js":1393,"./kubernetes/services/volumeService.js":1394,"./kubernetes/views/applications/applications.js":1395,"./kubernetes/views/applications/applicationsController.js":1397,"./kubernetes/views/applications/console/console.js":1398,"./kubernetes/views/applications/console/consoleController.js":1400,"./kubernetes/views/applications/create/createApplication.js":1401,"./kubernetes/views/applications/create/createApplicationController.js":1403,"./kubernetes/views/applications/edit/application.js":1404,"./kubernetes/views/applications/edit/applicationController.js":1406,"./kubernetes/views/applications/edit/components/placements-datatable/controller.js":1407,"./kubernetes/views/applications/edit/components/placements-datatable/index.js":1408,"./kubernetes/views/applications/logs/logs.js":1410,"./kubernetes/views/applications/logs/logsController.js":1412,"./kubernetes/views/cluster/cluster.js":1413,"./kubernetes/views/cluster/clusterController.js":1415,"./kubernetes/views/cluster/node/node.js":1416,"./kubernetes/views/cluster/node/nodeController.js":1418,"./kubernetes/views/configurations/configurations.js":1419,"./kubernetes/views/configurations/configurationsController.js":1421,"./kubernetes/views/configurations/create/createConfiguration.js":1422,"./kubernetes/views/configurations/create/createConfigurationController.js":1424,"./kubernetes/views/configurations/edit/configuration.js":1425,"./kubernetes/views/configurations/edit/configurationController.js":1427,"./kubernetes/views/configure/configureController.js":1428,"./kubernetes/views/dashboard/dashboard.js":1429,"./kubernetes/views/dashboard/dashboardController.js":1431,"./kubernetes/views/deploy/deploy.js":1432,"./kubernetes/views/deploy/deployController.js":1434,"./kubernetes/views/resource-pools/access/resourcePoolAccess.js":1436,"./kubernetes/views/resource-pools/access/resourcePoolAccessController.js":1438,"./kubernetes/views/resource-pools/create/createResourcePool.js":1439,"./kubernetes/views/resource-pools/create/createResourcePoolController.js":1441,"./kubernetes/views/resource-pools/edit/components/ingresses-datatable/controller.js":1442,"./kubernetes/views/resource-pools/edit/components/ingresses-datatable/index.js":1443,"./kubernetes/views/resource-pools/edit/resourcePool.js":1445,"./kubernetes/views/resource-pools/edit/resourcePoolController.js":1447,"./kubernetes/views/resource-pools/resourcePools.js":1448,"./kubernetes/views/resource-pools/resourcePoolsController.js":1450,"./kubernetes/views/stacks/logs/logs.js":1451,"./kubernetes/views/stacks/logs/logsController.js":1453,"./kubernetes/views/volumes/components/volumes-storages-datatable/controller.js":1454,"./kubernetes/views/volumes/components/volumes-storages-datatable/index.js":1455,"./kubernetes/views/volumes/edit/volume.js":1457,"./kubernetes/views/volumes/edit/volumeController.js":1459,"./kubernetes/views/volumes/volumes.js":1460,"./kubernetes/views/volumes/volumesController.js":1462,"./matomo-setup.js":488,"./portainer/__module.js":494,"./portainer/components/access-datatable/accessDatatable.js":1463,"./portainer/components/access-datatable/accessDatatableController.js":1465,"./portainer/components/access-table/access-table.js":1466,"./portainer/components/accessControlForm/por-access-control-form.js":1468,"./portainer/components/accessControlForm/porAccessControlFormController.js":1470,"./portainer/components/accessControlForm/porAccessControlFormModel.js":41,"./portainer/components/accessControlPanel/por-access-control-panel.js":1471,"./portainer/components/accessControlPanel/porAccessControlPanelController.js":1473,"./portainer/components/accessControlPanel/porAccessControlPanelModel.js":437,"./portainer/components/accessManagement/por-access-management.js":1474,"./portainer/components/accessManagement/porAccessManagementController.js":1476,"./portainer/components/associated-endpoints-selector/associatedEndpointsSelector.js":1477,"./portainer/components/associated-endpoints-selector/associatedEndpointsSelectorController.js":438,"./portainer/components/autofocus.js":1479,"./portainer/components/beta-panel/betaPanel.js":1480,"./portainer/components/buttonSpinner.js":1482,"./portainer/components/code-editor/code-editor.js":1483,"./portainer/components/code-editor/codeEditorController.js":1485,"./portainer/components/custom-template-common-fields/customTemplateCommonFieldsController.js":439,"./portainer/components/custom-template-common-fields/index.js":1486,"./portainer/components/custom-templates-list/customTemplatesListController.js":1488,"./portainer/components/custom-templates-list/index.js":1489,"./portainer/components/datatables/access-viewer-datatable/accessViewerDatatable.js":1491,"./portainer/components/datatables/endpoints-datatable/endpointsDatatable.js":1493,"./portainer/components/datatables/endpoints-datatable/endpointsDatatableController.js":1495,"./portainer/components/datatables/genericDatatableController.js":1496,"./portainer/components/datatables/groups-datatable/groupsDatatable.js":1498,"./portainer/components/datatables/registries-datatable/registriesDatatable.js":1500,"./portainer/components/datatables/roles-datatable/rolesDatatable.js":1502,"./portainer/components/datatables/stacks-datatable/stacksDatatable.js":1504,"./portainer/components/datatables/stacks-datatable/stacksDatatableController.js":1506,"./portainer/components/datatables/tags-datatable/tagsDatatable.js":1507,"./portainer/components/datatables/teams-datatable/teamsDatatable.js":1509,"./portainer/components/datatables/users-datatable/usersDatatable.js":1511,"./portainer/components/datatables/users-datatable/usersDatatableController.js":440,"./portainer/components/endpoint-list/endpoint-item/endpoint-item-controller.js":441,"./portainer/components/endpoint-list/endpoint-item/endpointItem.js":1517,"./portainer/components/endpoint-list/endpoint-list-controller.js":1522,"./portainer/components/endpoint-list/endpoint-list.js":1523,"./portainer/components/endpoint-selector/endpoint-selector.js":1525,"./portainer/components/endpoint-selector/endpointSelectorController.js":1527,"./portainer/components/endpointSecurity/por-endpoint-security.js":1528,"./portainer/components/endpointSecurity/porEndpointSecurityController.js":1530,"./portainer/components/endpointSecurity/porEndpointSecurityModel.js":238,"./portainer/components/forms/group-form/group-form.js":1531,"./portainer/components/forms/group-form/groupFormController.js":442,"./portainer/components/forms/registry-form-azure/registry-form-azure.js":1533,"./portainer/components/forms/registry-form-custom/registry-form-custom.js":1535,"./portainer/components/forms/registry-form-gitlab/gitlab-projects-datatable/gitlabProjectsDatatable.js":1537,"./portainer/components/forms/registry-form-gitlab/gitlab-projects-datatable/gitlabProjectsDatatableController.js":1539,"./portainer/components/forms/registry-form-gitlab/registry-form-gitlab.js":1540,"./portainer/components/forms/registry-form-quay/registry-form-quay.js":1542,"./portainer/components/forms/stack-from-template-form/index.js":1544,"./portainer/components/forms/template-form/template-form.js":1546,"./portainer/components/forms/template-form/templateFormController.js":1548,"./portainer/components/group-association-table/group-association-table.js":1549,"./portainer/components/header-content.js":1551,"./portainer/components/header-title.js":1552,"./portainer/components/header.js":1553,"./portainer/components/information-panel-offline/informationPanelOffline.js":1554,"./portainer/components/information-panel-offline/informationPanelOfflineController.js":1556,"./portainer/components/information-panel/information-panel.js":1557,"./portainer/components/loading.js":1559,"./portainer/components/motd-panel/motd-panel.js":1560,"./portainer/components/onEnterKey.js":1562,"./portainer/components/product-list/product-item/product-item.js":1563,"./portainer/components/product-list/product-list.js":1567,"./portainer/components/slider/slider.js":1569,"./portainer/components/slider/sliderController.js":1571,"./portainer/components/stack-duplication-form/stack-duplication-form-controller.js":1572,"./portainer/components/stack-duplication-form/stack-duplication-form.js":1573,"./portainer/components/tag-selector/tag-selector.js":1575,"./portainer/components/tag-selector/tagSelectorController.js":1577,"./portainer/components/template-list/template-item/template-item.js":1578,"./portainer/components/template-list/template-list-controller.js":1581,"./portainer/components/template-list/template-list.js":1582,"./portainer/components/template-widget.js":1584,"./portainer/components/tooltip.js":1585,"./portainer/components/widget-body.js":1586,"./portainer/components/widget-custom-header.js":1587,"./portainer/components/widget-footer.js":1588,"./portainer/components/widget-header.js":1589,"./portainer/components/widget-taskbar.js":1590,"./portainer/components/widget.js":1591,"./portainer/error.js":8,"./portainer/filters/filters.js":1592,"./portainer/helpers/endpointHelper.js":1593,"./portainer/helpers/formHelper.js":1594,"./portainer/helpers/networkHelper.js":1595,"./portainer/helpers/resourceControlHelper.js":1596,"./portainer/helpers/stackHelper.js":1597,"./portainer/helpers/tagHelper.js":237,"./portainer/helpers/templateHelper.js":1598,"./portainer/helpers/urlHelper.js":1599,"./portainer/helpers/userHelper.js":1600,"./portainer/helpers/webhookHelper.js":1601,"./portainer/interceptors/endpointStatusInterceptor.js":1602,"./portainer/models/access.js":98,"./portainer/models/dockerhub.js":234,"./portainer/models/endpoint/formValues.js":329,"./portainer/models/endpoint/models.js":14,"./portainer/models/gitlabRegistry.js":443,"./portainer/models/group.js":175,"./portainer/models/motd.js":444,"./portainer/models/registry.js":149,"./portainer/models/registryRepository.js":445,"./portainer/models/registryTypes.js":65,"./portainer/models/resourceControl/resourceControl.js":58,"./portainer/models/resourceControl/resourceControlCreatePayload.js":1603,"./portainer/models/resourceControl/resourceControlOwnership.js":16,"./portainer/models/resourceControl/resourceControlOwnershipParameters.js":221,"./portainer/models/resourceControl/resourceControlTypes.js":121,"./portainer/models/resourceControl/resourceControlUpdatePayload.js":1604,"./portainer/models/schedule.js":241,"./portainer/models/settings.js":330,"./portainer/models/stack.js":179,"./portainer/models/status.js":331,"./portainer/models/tag.js":332,"./portainer/models/team.js":333,"./portainer/models/teamMembership.js":164,"./portainer/models/template.js":446,"./portainer/models/user.js":334,"./portainer/models/webhook.js":447,"./portainer/oauth/__module.js":1605,"./portainer/oauth/components/oauth-providers-selector/oauth-provider-selector-controller.js":1606,"./portainer/oauth/components/oauth-providers-selector/oauth-providers-selector.js":1607,"./portainer/oauth/components/oauth-settings/oauth-settings-controller.js":1609,"./portainer/oauth/components/oauth-settings/oauth-settings.js":1610,"./portainer/oauth/services/rest/oauth.js":1612,"./portainer/rest/auth.js":1613,"./portainer/rest/customTemplate.js":1614,"./portainer/rest/dockerhub.js":1615,"./portainer/rest/endpoint.js":1616,"./portainer/rest/gitlab.js":1617,"./portainer/rest/group.js":1618,"./portainer/rest/legacyExtension.js":1619,"./portainer/rest/motd.js":1620,"./portainer/rest/registry.js":1621,"./portainer/rest/resourceControl.js":1622,"./portainer/rest/settings.js":1623,"./portainer/rest/stack.js":1624,"./portainer/rest/status.js":1625,"./portainer/rest/support.js":1626,"./portainer/rest/tag.js":1627,"./portainer/rest/team.js":1628,"./portainer/rest/teamMembership.js":1629,"./portainer/rest/template.js":1630,"./portainer/rest/transform/getEndpointsTotalCount.js":448,"./portainer/rest/transform/gitlabResponseGetLink.js":335,"./portainer/rest/user.js":1631,"./portainer/rest/webhooks.js":1632,"./portainer/services/allSettled.js":236,"./portainer/services/api/accessService.js":1633,"./portainer/services/api/customTemplate.js":1634,"./portainer/services/api/dockerhubService.js":1635,"./portainer/services/api/endpointService.js":1636,"./portainer/services/api/groupService.js":1637,"./portainer/services/api/legacyExtensionService.js":1638,"./portainer/services/api/motdService.js":1639,"./portainer/services/api/registryService.js":1640,"./portainer/services/api/resourceControlService.js":1641,"./portainer/services/api/settingsService.js":1642,"./portainer/services/api/stackService.js":1643,"./portainer/services/api/statusService.js":1644,"./portainer/services/api/supportService.js":1645,"./portainer/services/api/tagService.js":1646,"./portainer/services/api/teamMembershipService.js":1647,"./portainer/services/api/teamService.js":1648,"./portainer/services/api/templateService.js":1649,"./portainer/services/api/userService.js":1650,"./portainer/services/api/webhookService.js":1651,"./portainer/services/async.js":1652,"./portainer/services/authentication.js":1653,"./portainer/services/chartService.js":1654,"./portainer/services/codeMirror.js":1655,"./portainer/services/datatableService.js":1681,"./portainer/services/endpointProvider.js":1682,"./portainer/services/fileUpload.js":1683,"./portainer/services/formValidator.js":1684,"./portainer/services/httpRequestHelper.js":1685,"./portainer/services/legacyExtensionManager.js":1686,"./portainer/services/localStorage.js":1687,"./portainer/services/modalService.js":1688,"./portainer/services/notifications.js":1689,"./portainer/services/pagination.js":1690,"./portainer/services/registryGitlabService.js":1691,"./portainer/services/stateManager.js":1692,"./portainer/views/account/accountController.js":1693,"./portainer/views/auth/authController.js":1694,"./portainer/views/custom-templates/create-custom-template-view/createCustomTemplateViewController.js":449,"./portainer/views/custom-templates/create-custom-template-view/index.js":1697,"./portainer/views/custom-templates/custom-templates-view/customTemplatesViewController.js":450,"./portainer/views/custom-templates/custom-templates-view/index.js":1699,"./portainer/views/custom-templates/edit-custom-template-view/editCustomTemplateViewController.js":451,"./portainer/views/custom-templates/edit-custom-template-view/index.js":1701,"./portainer/views/endpoints/access/endpointAccessController.js":1703,"./portainer/views/endpoints/create/createEndpointController.js":1704,"./portainer/views/endpoints/edit/endpointController.js":1705,"./portainer/views/endpoints/endpointsController.js":1706,"./portainer/views/groups/access/groupAccessController.js":1707,"./portainer/views/groups/create/createGroupController.js":1708,"./portainer/views/groups/edit/groupController.js":1709,"./portainer/views/groups/groupsController.js":1710,"./portainer/views/home/homeController.js":1711,"./portainer/views/init/admin/initAdminController.js":1712,"./portainer/views/init/endpoint/initEndpointController.js":1713,"./portainer/views/logout/logoutController.js":1717,"./portainer/views/main/mainController.js":1718,"./portainer/views/registries/access/registryAccessController.js":1719,"./portainer/views/registries/create/createRegistryController.js":1720,"./portainer/views/registries/edit/registryController.js":1721,"./portainer/views/registries/registriesController.js":1722,"./portainer/views/settings/authentication/settingsAuthenticationController.js":1723,"./portainer/views/settings/settingsController.js":1724,"./portainer/views/sidebar/sidebarController.js":1725,"./portainer/views/stacks/create/createStackController.js":1726,"./portainer/views/stacks/edit/stackController.js":1727,"./portainer/views/stacks/stacksController.js":1728,"./portainer/views/tags/tagsController.js":1729,"./portainer/views/teams/edit/teamController.js":1730,"./portainer/views/teams/teamsController.js":1731,"./portainer/views/templates/templatesController.js":1732,"./portainer/views/users/edit/userController.js":1733,"./portainer/views/users/usersController.js":1734,"./vendors.js":1735};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=805},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(383),s=n(807);r.a.module("portainer.agent").component("fileUploader",{templateUrl:s,controller:i.FileUploaderController,bindings:{uploadFile:"<onFileSelected"}})},function(e,t){var n="app/agent/components/file-uploader/fileUploader.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<button ngf-select="$ctrl.onFileSelected($file)" class="btn ng-scope" button-spinner="$ctrl.state.uploadInProgress">\n  <i style="margin: 0;" class="fa fa-upload" ng-if="!$ctrl.state.uploadInProgress"></i>\n</button>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(809);r.a.module("portainer.agent").component("filesDatatable",{templateUrl:i,controller:"GenericDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",isRoot:"<",goToParent:"&",browse:"&",rename:"&",download:"&",delete:"&",isUploadAllowed:"<",onFileSelectedForUpload:"<"}})},function(e,t){var n="app/agent/components/files-datatable/filesDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-header icon="{{ $ctrl.titleIcon }}" title-text="{{ $ctrl.titleText }}">\n      <file-uploader authorization="DockerAgentBrowsePut" ng-if="$ctrl.isUploadAllowed" on-file-selected="($ctrl.onFileSelectedForUpload)"> </file-uploader>\n    </rd-widget-header>\n    <rd-widget-body classes="no-padding">\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-model-options="{ debounce: 300 }"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table">\n          <thead>\n            <tr>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Size\')">\n                  Size\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Size\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Size\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'ModTime\')">\n                  Last modification\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'ModTime\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'ModTime\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                \n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr ng-if="!$ctrl.isRoot">\n              <td colspan="4">\n                <a ng-click="$ctrl.goToParent()"><i class="fa fa-level-up-alt space-right"></i>Go to parent</a>\n              </td>\n            </tr>\n            <tr ng-repeat="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder))">\n              <td>\n                <span ng-if="item.edit">\n                  <input\n                    class="input-sm"\n                    type="text"\n                    ng-model="item.newName"\n                    on-enter-key="$ctrl.rename({ name: item.Name, newName: item.newName }); item.edit = false"\n                    auto-focus\n                  />\n                  <a class="interactive" ng-click="item.edit = false;"><i class="fa fa-times"></i></a>\n                  <a class="interactive" ng-click="$ctrl.rename({name: item.Name, newName: item.newName}); item.edit = false;"><i class="fa fa-check-square"></i></a>\n                </span>\n                <span ng-if="!item.edit && item.Dir">\n                  <a ng-click="$ctrl.browse({name: item.Name})"><i class="fa fa-folder space-right" aria-hidden="true"></i>{{ item.Name }}</a>\n                </span>\n                <span ng-if="!item.edit && !item.Dir"> <i class="fa fa-file space-right" aria-hidden="true"></i>{{ item.Name }} </span>\n              </td>\n              <td>{{ item.Size | humansize }}</td>\n              <td>\n                {{ item.ModTime | getisodatefromtimestamp }}\n              </td>\n              <td>\n                <btn authorization="DockerAgentBrowseGet" class="btn btn-xs btn-primary space-right" ng-click="$ctrl.download({ name: item.Name })" ng-if="!item.Dir">\n                  <i class="fa fa-download" aria-hidden="true"></i> Download\n                </btn>\n                <btn authorization="DockerAgentBrowseRename" class="btn btn-xs btn-primary space-right" ng-click="item.newName = item.Name; item.edit = true">\n                  <i class="fa fa-edit" aria-hidden="true"></i> Re\n                </btn>\n                <btn authorization="DockerAgentBrowseDelete" class="btn btn-xs btn-danger" ng-click="$ctrl.delete({ name: item.Name })">\n                  <i class="fa fa-trash" aria-hidden="true"></i> Delete\n                </btn>\n              </td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="5" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="5" class="text-center text-muted">No files found.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(384),s=n(811);r.a.module("portainer.agent").component("hostBrowser",{controller:i.HostBrowserController,templateUrl:s})},function(e,t){var n="app/agent/components/host-browser/hostBrowser.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<files-datatable\n  title-text="Host browser - {{ $ctrl.getRelativePath() }}"\n  title-icon="fa-file"\n  dataset="$ctrl.files"\n  table-key="host_browser"\n  order-by="Dir"\n  is-root="$ctrl.isRoot()"\n  go-to-parent="$ctrl.goToParent()"\n  browse="$ctrl.browse(name)"\n  rename="$ctrl.renameFile(name, newName)"\n  download="$ctrl.downloadFile(name)"\n  delete="$ctrl.confirmDeleteFile(name)"\n  is-upload-allowed="true"\n  on-file-selected-for-upload="($ctrl.onFileSelectedForUpload)"\n>\n</files-datatable>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(385),s=n(813);r.a.module("portainer.agent").component("nodeSelector",{templateUrl:s,controller:i.NodeSelectorController,bindings:{model:"="}})},function(e,t){var n="app/agent/components/node-selector/nodeSelector.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="form-group">\n  <label for="target_node" class="col-sm-1 control-label text-left">Node</label>\n  <div class="col-sm-11">\n    <select class="form-control" ng-model="$ctrl.model" ng-options="agent.NodeName as agent.NodeName for agent in $ctrl.agents"></select>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(386),s=n(815);r.a.module("portainer.agent").component("volumeBrowser",{templateUrl:s,controller:i.VolumeBrowserController,bindings:{volumeId:"<",nodeName:"<",isUploadEnabled:"<"}})},function(e,t){var n="app/agent/components/volume-browser/volumeBrowser.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<files-datatable\n  title-text="Volume browser"\n  title-icon="fa-file"\n  dataset="$ctrl.files"\n  table-key="volume_browser"\n  order-by="Dir"\n  is-root="$ctrl.state.path === \'/\'"\n  go-to-parent="$ctrl.up()"\n  browse="$ctrl.browse(name)"\n  rename="$ctrl.rename(name, newName)"\n  download="$ctrl.download(name)"\n  delete="$ctrl.confirmDelete(name)"\n  is-upload-allowed="$ctrl.isUploadEnabled"\n  on-file-selected-for-upload="($ctrl.onFileSelectedForUpload)"\n></files-datatable>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a);function i(e,t,n,a){return e("".concat(t,"/:endpointId/docker/v:version/agents"),{endpointId:n.endpointID,version:a.getAgentApiVersion},{query:{method:"GET",isArray:!0}})}i.$inject=["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider","StateManager"],r.a.module("portainer.agent").factory("Agent",i)},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(233);function s(e,t,n,a){return e("".concat(t,"/:endpointId/docker/v:version/browse/:action"),{endpointId:n.endpointID,version:a.getAgentApiVersion},{ls:{method:"GET",isArray:!0,params:{action:"ls"}},get:{method:"GET",params:{action:"get"},transformResponse:i.browseGetResponse,responseType:"arraybuffer"},delete:{method:"DELETE",params:{action:"delete"}},rename:{method:"PUT",params:{action:"rename"}}})}s.$inject=["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider","StateManager"],r.a.module("portainer.agent").factory("Browse",s)},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a);function i(e,t,n,a){return e("".concat(t,"/:endpointId/docker/v:version/host/:action"),{endpointId:n.endpointID,version:a.getAgentApiVersion},{info:{method:"GET",params:{action:"info"}}})}i.$inject=["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider","StateManager"],r.a.module("portainer.agent").factory("Host",i)},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a);function i(e,t,n,a){return e("".concat(t,"/:endpointId/docker/ping"),{endpointId:n.endpointID},{ping:{method:"GET",interceptor:{response:function(e){var t=e.resource,n=e.headers("Portainer-Agent-Api-Version")||1;return t.version=Number(n),t},responseError:function(e){return 404===e.status?{version:1}:a.reject(e)}}}})}i.$inject=["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider","$q"],r.a.module("portainer.agent").factory("AgentPing",i)},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a);function i(e,t,n){return e("".concat(t,"/:endpointId/docker/agents"),{endpointId:n.endpointID},{query:{method:"GET",isArray:!0}})}i.$inject=["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider"],r.a.module("portainer.agent").factory("AgentVersion1",i)},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(233);function s(e,t,n){return e("".concat(t,"/:endpointId/docker/browse/:volumeID/:action"),{endpointId:n.endpointID},{ls:{method:"GET",isArray:!0,params:{action:"ls"}},get:{method:"GET",params:{action:"get"},transformResponse:i.browseGetResponse,responseType:"arraybuffer"},delete:{method:"DELETE",params:{action:"delete"}},rename:{method:"PUT",params:{action:"rename"}}})}s.$inject=["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider"],r.a.module("portainer.agent").factory("BrowseVersion1",s)},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(387);function s(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){s(i,a,r,o,l,"next",e)}function l(e){s(i,a,r,o,l,"throw",e)}o(void 0)}))}}function l(e,t,n,a,r){return{agents:function(){return l.apply(this,arguments)},hostInfo:function(e){return n.setPortainerAgentTargetHeader(e),a.info().$promise}};function s(){return r.getState().endpoint.agentApiVersion}function l(){return(l=o(regeneratorRuntime.mark((function n(){var a,r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=s(),r=a>1?e:t,n.prev=2,n.next=5,r.query({version:a}).$promise;case 5:return o=n.sent,n.abrupt("return",o.map((function(e){return new i.AgentViewModel(e)})));case 9:throw n.prev=9,n.t0=n.catch(2),{msg:"Unable to retrieve agents",err:n.t0};case 12:case"end":return n.stop()}}),n,null,[[2,9]])})))).apply(this,arguments)}}l.$inject=["Agent","AgentVersion1","HttpRequestHelper","Host","StateManager"],r.a.module("portainer.agent").factory("AgentService",l)},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a);function i(e,t,n,a,r){return{ls:function(t){return e.ls({path:t}).$promise},get:function(t){return e.get({path:t}).$promise},delete:function(t){return e.delete({path:t}).$promise},rename:function(t,n){var a={CurrentFilePath:t,NewFilePath:n};return e.rename({},a).$promise},upload:function(e,i,s){var o=r.getAgentApiVersion(),l="".concat(n,"/").concat(a.endpointID(),"/docker").concat(o>1?"/v"+o:"","/browse/put");return new Promise((function(n,a){t.upload({url:l,data:{file:i,Path:e}}).then(n,a,s)}))}}}i.$inject=["Browse","Upload","API_ENDPOINT_ENDPOINTS","EndpointProvider","StateManager"],r.a.module("portainer.agent").factory("HostBrowserService",i)},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a);function i(e){return{ping:function(){return e.ping().$promise}}}i.$inject=["AgentPing"],r.a.module("portainer.agent").service("AgentPingService",i)},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a);function i(e,t,n,a,r,i){return{ls:function(e,t){return o().ls({volumeID:e,path:t,version:s()}).$promise},get:function(e,t){return o().get({volumeID:e,path:t,version:s()}).$promise},delete:function(e,t){return o().delete({volumeID:e,path:t,version:s()}).$promise},rename:function(e,t,n){var a={CurrentFilePath:t,NewFilePath:n};return o().rename({volumeID:e,version:s()},a).$promise},upload:function(t,n,s,o){var l=e.getAgentApiVersion();if(l<2)throw new Error("upload is not supported on this agent version");var c="".concat(a,"/").concat(r.endpointID(),"/docker/v").concat(l,"/browse/put?volumeID=").concat(s);return new Promise((function(e,a){i.upload({url:c,data:{file:n,Path:t}}).then(e,a,o)}))}};function s(){return e.getState().endpoint.agentApiVersion}function o(){return s()>1?t:n}}i.$inject=["StateManager","Browse","BrowseVersion1","API_ENDPOINT_ENDPOINTS","EndpointProvider","Upload"],r.a.module("portainer.agent").factory("VolumeBrowserService",i)},function(e,t,n){"use strict";n.r(t);var a=n(45),r=n.n(a);angular.module("portainer").run(["$rootScope","$state","$interval","LocalStorage","EndpointProvider","SystemService","cfpLoadingBar","$transitions","HttpRequestHelper",function(e,t,n,a,i,s,o,l,c){i.initialize(),e.$state=t,e.defaultTitle=document.title;var d=o.set;o.set=function(e){e>o.status()&&d.apply(o,arguments)},l.onBefore({},(function(){c.resetAgentHeaders()})),t.defaultErrorHandler((function(){})),n((function(){!function(e,t){var n=e.currentEndpoint();void 0!==n&&4===n.Type&&t.ping(n.Id)}(i,s)}),6e4),r()(document).ajaxSend((function(e,t,n){var r="POST"===n.type||"PUT"===n.type||"PATCH"===n.type,i="application/json"!==n.contentType&&n.headers&&!n.headers["Content-Type"];r&&i&&t.setRequestHeader("Content-Type","application/json"),t.setRequestHeader("Authorization","Bearer "+a.getJWT())}))}])},function(e,t,n){var a=n(828);angular.module("portainer.azure").component("azureEndpointConfig",{bindings:{applicationId:"=",tenantId:"=",authenticationKey:"="},templateUrl:a})},function(e,t){var n="app/azure/components/azure-endpoint-config/azureEndpointConfig.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div>\n  <div class="col-sm-12 form-section-title">\n    Azure configuration\n  </div>\n  \x3c!-- applicationId-input --\x3e\n  <div class="form-group">\n    <label for="azure_credential_appid" class="col-sm-3 col-lg-2 control-label text-left"> ID</label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="text" class="form-control" name="azure_credential_appid" ng-model="$ctrl.applicationId" placeholder="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx" required />\n    </div>\n  </div>\n  \x3c!-- !applicationId-input --\x3e\n  \x3c!-- tenantId-input --\x3e\n  <div class="form-group">\n    <label for="azure_credential_tenantid" class="col-sm-3 col-lg-2 control-label text-left">Tenant ID</label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="text" class="form-control" name="azure_credential_tenantid" ng-model="$ctrl.tenantId" placeholder="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx" required />\n    </div>\n  </div>\n  \x3c!-- !tenantId-input --\x3e\n  \x3c!-- authenticationkey-input --\x3e\n  <div class="form-group">\n    <label for="azure_credential_authkey" class="col-sm-3 col-lg-2 control-label text-left">Authentication key</label>\n    <div class="col-sm-9 col-lg-10">\n      <input\n        type="text"\n        class="form-control"\n        name="azure_credential_authkey"\n        ng-model="$ctrl.authenticationKey"\n        placeholder="cOrXoK/1D35w8YQ8nH1/8ZGwzz45JIYD5jxHKXEQknk="\n        required\n      />\n    </div>\n  </div>\n  \x3c!-- !authenticationkey-input --\x3e\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(830);r.a.module("portainer.azure").component("azureSidebarContent",{templateUrl:i,bindings:{endpointId:"<"}})},function(e,t){var n="app/azure/components/azure-sidebar-content/azureSidebarContent.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<li class="sidebar-list">\n  <a ui-sref="azure.dashboard({endpointId: $ctrl.endpointId})" ui-sref-active="active"> <span class="menu-icon fa fa-tachometer-alt fa-fw"></span></a>\n</li>\n<li class="sidebar-list">\n  <a ui-sref="azure.containerinstances({endpointId: $ctrl.endpointId})" ui-sref-active="active">Container instances <span class="menu-icon fa fa-cubes fa-fw"></span></a>\n</li>\n')}]),e.exports=n},function(e,t,n){var a=n(832);angular.module("portainer.azure").component("containergroupsDatatable",{templateUrl:a,controller:"GenericDatatableController",bindings:{title:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",removeAction:"<"}})},function(e,t){var n="app/azure/components/datatables/containergroups-datatable/containerGroupsDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n      </div>\n      <div class="actionBar">\n        <button type="button" class="btn btn-sm btn-danger" ng-disabled="$ctrl.state.selectedItemCount === 0" ng-click="$ctrl.removeAction($ctrl.state.selectedItems)">\n          <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>\n        </button>\n        <button type="button" class="btn btn-sm btn-primary" ui-sref="azure.containerinstances.new">\n          <i class="fa fa-plus space-right" aria-hidden="true"></i>\n        </button>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover table-filters nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <span class="md-checkbox">\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Location\')">\n                  Location\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Location\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Location\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                \n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>\n                <span class="md-checkbox">\n                  <input id="select_{{ $index }}" type="checkbox" ng-model="item.Checked" ng-click="$ctrl.selectItem(item, $event)" />\n                  <label for="select_{{ $index }}"></label>\n                </span>\n                <a ui-sref="azure.containerinstances.container({ id: item.Id })">{{ item.Name | truncate: 50 }}</a>\n              </td>\n              <td>{{ item.Location }}</td>\n              <td>\n                <a ng-if="item.Ports.length > 0" ng-repeat="p in item.Ports" class="image-tag" ng-href="http://{{ item.IPAddress }}:{{ p.host }}" target="_blank">\n                  <i class="fa fa-external-link-alt" aria-hidden="true"></i> {{ item.IPAddress }}:{{ p.host }}\n                </a>\n                <span ng-if="item.Ports.length == 0">-</span>\n              </td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="3" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="3" class="text-center text-muted">No container available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.azure").factory("Azure",["$http","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){"use strict";var a={delete:function(a,r){var i=t+"/"+n.endpointID()+"/azure"+a+"?api-version="+r;return e({method:"DELETE",url:i})}};return a}])},function(e,t){angular.module("portainer.azure").factory("ContainerGroup",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){"use strict";var a={},r=e(t+"/:endpointId/azure/subscriptions/:subscriptionId/providers/Microsoft.ContainerInstance/containerGroups",{endpointId:n.endpointID,"api-version":"2018-04-01"},{query:{method:"GET",params:{subscriptionId:"@subscriptionId"}}}),i=e(t+"/:endpointId/azure/subscriptions/:subscriptionId/resourceGroups/:resourceGroupName/providers/Microsoft.ContainerInstance/containerGroups/:containerGroupName",{endpointId:n.endpointID,"api-version":"2018-04-01"},{create:{method:"PUT",params:{subscriptionId:"@subscriptionId",resourceGroupName:"@resourceGroupName",containerGroupName:"@containerGroupName"}},get:{method:"GET"}});return a.query=r.query,a.create=i.create,a.get=i.get,a}])},function(e,t){angular.module("portainer.azure").factory("Location",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){"use strict";return e(t+"/:endpointId/azure/subscriptions/:subscriptionId/locations",{endpointId:n.endpointID,"api-version":"2016-06-01"},{query:{method:"GET",params:{subscriptionId:"@subscriptionId"}}})}])},function(e,t){angular.module("portainer.azure").factory("Provider",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){"use strict";return e(t+"/:endpointId/azure/subscriptions/:subscriptionId/providers/:providerNamespace",{endpointId:n.endpointID,"api-version":"2018-02-01"},{get:{method:"GET",params:{subscriptionId:"@subscriptionId",providerNamespace:"@providerNamespace"}}})}])},function(e,t){angular.module("portainer.azure").factory("ResourceGroup",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){"use strict";return e(t+"/:endpointId/azure/subscriptions/:subscriptionId/resourcegroups/:resourceGroupName",{endpointId:n.endpointID,"api-version":"2018-02-01"},{query:{method:"GET",params:{subscriptionId:"@subscriptionId"}},get:{method:"GET"}})}])},function(e,t){angular.module("portainer.azure").factory("Subscription",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){"use strict";return e(t+"/:endpointId/azure/subscriptions/:id",{endpointId:n.endpointID,"api-version":"2016-06-01"},{query:{method:"GET"},get:{method:"GET",params:{id:"@id"}}})}])},function(e,t){angular.module("portainer.azure").factory("AzureService",["$q","Azure","SubscriptionService","ResourceGroupService","ContainerGroupService","ProviderService",function(e,t,n,a,r,i){"use strict";var s={};function o(t,n){for(var a=e.defer(),r={},i=[],s=0;s<t.length;s++){var o=t[s];i.push(n(o.Id))}return e.all(i).then((function(e){for(var n=0;n<e.length;n++){var i=e[n];r[t[n].Id]=i}a.resolve(r)})).catch((function(e){a.reject({msg:"Unable to retrieve resources",err:e})})),a.promise}return s.deleteContainerGroup=function(e){return t.delete(e,"2018-04-01")},s.createContainerGroup=function(e,t,n){return r.create(e,t,n)},s.subscriptions=function(){return n.subscriptions()},s.containerInstanceProvider=function(e){return o(e,i.containerInstanceProvider)},s.resourceGroups=function(e){return o(e,a.resourceGroups)},s.containerGroups=function(e){return o(e,r.containerGroups)},s.aggregate=function(e){var t=[];return Object.keys(e).forEach((function(n){t=t.concat(e[n])})),t},s}])},function(e,t,n){"use strict";n.r(t);var a=n(165);function r(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function o(e){r(s,a,i,o,l,"next",e)}function l(e){r(s,a,i,o,l,"throw",e)}o(void 0)}))}}angular.module("portainer.azure").factory("ContainerGroupService",["$q","ContainerGroup",function(e,t){var n={};function r(){return(r=i(regeneratorRuntime.mark((function e(n,r,i){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get({subscriptionId:n,resourceGroupName:r,containerGroupName:i}).$promise;case 2:return s=e.sent,e.abrupt("return",new a.ContainerGroupViewModel(s));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return n.containerGroups=function(n){var r=e.defer();return t.query({subscriptionId:n}).$promise.then((function(e){var t=e.value.map((function(e){return new a.ContainerGroupViewModel(e)}));r.resolve(t)})).catch((function(e){r.reject({msg:"Unable to retrieve container groups",err:e})})),r.promise},n.containerGroup=function(e,t,n){return r.apply(this,arguments)},n.create=function(e,n,r){var i=new a.CreateContainerGroupRequest(e);return t.create({subscriptionId:n,resourceGroupName:r,containerGroupName:e.Name},i).$promise},n}])},function(e,t,n){"use strict";n.r(t);var a=n(388);angular.module("portainer.azure").factory("LocationService",["$q","Location",function(e,t){var n={locations:function(n){var r=e.defer();return t.query({subscriptionId:n}).$promise.then((function(e){var t=e.value.map((function(e){return new a.LocationViewModel(e)}));r.resolve(t)})).catch((function(e){r.reject({msg:"Unable to retrieve locations",err:e})})),r.promise}};return n}])},function(e,t,n){"use strict";n.r(t);var a=n(389);angular.module("portainer.azure").factory("ProviderService",["$q","Provider",function(e,t){var n={containerInstanceProvider:function(n){var r=e.defer();return t.get({subscriptionId:n,providerNamespace:"Microsoft.ContainerInstance"}).$promise.then((function(e){var t=new a.ContainerInstanceProviderViewModel(e);r.resolve(t)})).catch((function(e){r.reject({msg:"Unable to retrieve provider",err:e})})),r.promise}};return n}])},function(e,t,n){"use strict";n.r(t);var a=n(288);function r(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function o(e){r(s,a,i,o,l,"next",e)}function l(e){r(s,a,i,o,l,"throw",e)}o(void 0)}))}}angular.module("portainer.azure").factory("ResourceGroupService",["$q","ResourceGroup",function(e,t){var n={};function r(){return(r=i(regeneratorRuntime.mark((function e(n,r){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get({subscriptionId:n,resourceGroupName:r}).$promise;case 2:return i=e.sent,e.abrupt("return",new a.ResourceGroupViewModel(i));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return n.resourceGroups=function(n){var r=e.defer();return t.query({subscriptionId:n}).$promise.then((function(e){var t=e.value.map((function(e){return new a.ResourceGroupViewModel(e,n)}));r.resolve(t)})).catch((function(e){r.reject({msg:"Unable to retrieve resource groups",err:e})})),r.promise},n.resourceGroup=function(e,t){return r.apply(this,arguments)},n}])},function(e,t,n){"use strict";n.r(t);var a=n(289);function r(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function o(e){r(s,a,i,o,l,"next",e)}function l(e){r(s,a,i,o,l,"throw",e)}o(void 0)}))}}angular.module("portainer.azure").factory("SubscriptionService",["$q","Subscription",function(e,t){var n={};function r(){return(r=i(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get({id:n}).$promise;case 2:return r=e.sent,e.abrupt("return",new a.SubscriptionViewModel(r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return n.subscriptions=function(){var n=e.defer();return t.query({}).$promise.then((function(e){var t=e.value.map((function(e){return new a.SubscriptionViewModel(e)}));n.resolve(t)})).catch((function(e){n.reject({msg:"Unable to retrieve subscriptions",err:e})})),n.promise},n.subscription=function(e){return r.apply(this,arguments)},n}])},function(e,t,n){"use strict";n.r(t);var a=n(390),r=n(846);angular.module("portainer.azure").component("containerInstanceDetails",{templateUrl:r,controller:a.default})},function(e,t){var n="app/azure/views/containerinstances/container-instance-details/containerInstanceDetails.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Container Instance"></rd-header-title>\n  <rd-header-content> <a ui-sref="azure.containerinstances">Container instances</a> &gt; {{ $ctrl.container.Name }} </rd-header-content>\n</rd-header>\n\n<div class="row" ng-if="!$ctrl.state.loading">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-body>\n        <div class="form-horizontal" autocomplete="off">\n          <div class="col-sm-12 form-section-title">\n            Azure settings\n          </div>\n          \x3c!-- subscription-input --\x3e\n          <div class="form-group">\n            <label for="azure_subscription" class="col-sm-2 control-label text-left">Subscription</label>\n            <div class="col-sm-10">\n              <input type="text" class="form-control" ng-model="$ctrl.subscription.Name" disabled />\n            </div>\n          </div>\n          \x3c!-- !subscription-input --\x3e\n          \x3c!-- resourcegroup-input --\x3e\n          <div class="form-group">\n            <label for="azure_resourcegroup" class="col-sm-2 control-label text-left">Resource group</label>\n            <div class="col-sm-10">\n              <input type="text" class="form-control" ng-model="$ctrl.resourceGroup.Name" disabled />\n            </div>\n          </div>\n          \x3c!-- !resourcegroup-input --\x3e\n          \x3c!-- location-input --\x3e\n          <div class="form-group">\n            <label for="azure_location" class="col-sm-2 control-label text-left">Location</label>\n            <div class="col-sm-10">\n              <input type="text" class="form-control" ng-model="$ctrl.container.Location" disabled />\n            </div>\n          </div>\n          \x3c!-- !location-input --\x3e\n          <div class="col-sm-12 form-section-title">\n            Container configuration\n          </div>\n          \x3c!-- name-input --\x3e\n          <div class="form-group">\n            <label for="container_name" class="col-sm-2 control-label text-left"></label>\n            <div class="col-sm-10">\n              <input type="text" class="form-control" ng-model="$ctrl.container.Name" disabled />\n            </div>\n          </div>\n          \x3c!-- !name-input --\x3e\n          \x3c!-- image-input --\x3e\n          <div class="form-group">\n            <label for="image_name" class="col-sm-2 control-label text-left"></label>\n            <div class="col-sm-10">\n              <input type="text" class="form-control" ng-model="$ctrl.container.Image" disabled />\n            </div>\n          </div>\n          \x3c!-- !image-input --\x3e\n          \x3c!-- os-input --\x3e\n          <div class="form-group">\n            <label for="container_os" class="col-sm-2 control-label text-left">OS</label>\n            <div class="col-sm-10">\n              <input type="text" class="form-control" ng-model="$ctrl.container.OSType" disabled />\n            </div>\n          </div>\n          \x3c!-- !os-input --\x3e\n          \x3c!-- port-mapping --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <label class="control-label text-left"></label>\n            </div>\n            \x3c!-- port-mapping-input-list --\x3e\n            <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n              <div ng-repeat="binding in $ctrl.container.Ports" style="margin-top: 2px;">\n                \x3c!-- host-port --\x3e\n                <div class="input-group col-sm-4 input-group-sm">\n                  <span class="input-group-addon">host</span>\n                  <input type="text" class="form-control" ng-model="binding.host" placeholder=" 80" disabled />\n                </div>\n                \x3c!-- !host-port --\x3e\n                <span style="margin: 0 10px 0 10px;">\n                  <i class="fa fa-long-arrow-alt-right" aria-hidden="true"></i>\n                </span>\n                \x3c!-- container-port --\x3e\n                <div class="input-group col-sm-4 input-group-sm">\n                  <span class="input-group-addon"></span>\n                  <input type="text" class="form-control" ng-model="binding.container" placeholder=" 80" disabled />\n                </div>\n                \x3c!-- !container-port --\x3e\n                \x3c!-- protocol-actions --\x3e\n                <div class="input-group col-sm-3 input-group-sm">\n                  <div class="btn-group btn-group-sm">\n                    <label class="btn btn-primary" ng-model="binding.protocol" uib-btn-radio="\'TCP\'" disabled>TCP</label>\n                    <label class="btn btn-primary" ng-model="binding.protocol" uib-btn-radio="\'UDP\'" disabled>UDP</label>\n                  </div>\n                </div>\n                \x3c!-- !protocol-actions --\x3e\n              </div>\n            </div>\n            \x3c!-- !port-mapping-input-list --\x3e\n          </div>\n          \x3c!-- !port-mapping --\x3e\n          \x3c!-- public-ip --\x3e\n          <div class="form-group" ng-if="$ctrl.container.AllocatePublicIP">\n            <label for="public_ip" class="col-sm-2 control-label text-left">\n               IP\n            </label>\n            <div class="col-sm-10">\n              <input type="text" class="form-control" ng-model="$ctrl.container.IPAddress" disabled />\n            </div>\n          </div>\n          \x3c!-- public-ip --\x3e\n          <div class="col-sm-12 form-section-title">\n            Container resources\n          </div>\n          \x3c!-- cpu-input --\x3e\n          <div class="form-group">\n            <label for="container_cpu" class="col-sm-2 control-label text-left">CPU</label>\n            <div class="col-sm-10">\n              <input type="text" class="form-control" ng-model="$ctrl.container.CPU" disabled />\n            </div>\n          </div>\n          \x3c!-- !cpu-input --\x3e\n          \x3c!-- memory-input --\x3e\n          <div class="form-group">\n            <label for="container_memory" class="col-sm-2 control-label text-left">Memory</label>\n            <div class="col-sm-10">\n              <input type="text" class="form-control" ng-model="$ctrl.container.Memory" disabled />\n            </div>\n          </div>\n          \x3c!-- !memory-input --\x3e\n        </div>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.azure").controller("AzureContainerInstancesController",["$scope","$state","AzureService","Notifications",function(e,t,n,a){e.deleteAction=function(r){var i=r.length;angular.forEach(r,(function(r){n.deleteContainerGroup(r.Id).then((function(){a.success("Container group successfully",r.Name);var t=e.containerGroups.indexOf(r);e.containerGroups.splice(t,1)})).catch((function(e){a.error("",e,"")})).finally((function(){0===--i&&t.reload()}))}))},n.subscriptions().then((function(e){var t=e;return n.containerGroups(t)})).then((function(t){e.containerGroups=n.aggregate(t)})).catch((function(e){a.error("",e,"")}))}])},function(e,t,n){"use strict";n.r(t);var a=n(165);angular.module("portainer.azure").controller("AzureCreateContainerInstanceController",["$q","$scope","$state","AzureService","Notifications",function(e,t,n,r,i){var s,o=[],l=[];function c(e,n,a){t.state.selectedResourceGroup=n[e.Id][0],t.resourceGroups=n[e.Id];var r=a[e.Id].Locations;t.model.Location=r[0],t.locations=r}t.state={actionInProgress:!1,selectedSubscription:null,selectedResourceGroup:null,formValidationError:""},t.changeSubscription=function(){c(t.state.selectedSubscription,o,l)},t.addPortBinding=function(){t.model.Ports.push({host:"",container:"",protocol:"TCP"})},t.removePortBinding=function(e){t.model.Ports.splice(e,1)},t.create=function(){var e=t.model,a=t.state.selectedSubscription.Id,s=t.state.selectedResourceGroup.Name;if(t.state.formValidationError=function(e){if(!e.Ports||!e.Ports.length||e.Ports.every((function(e){return!e.host||!e.container})))return"At least one port binding is required";return null}(e),t.state.formValidationError)return!1;t.state.actionInProgress=!0,r.createContainerGroup(e,a,s).then((function(){i.success("",e.Name),n.go("azure.containerinstances")})).catch((function(e){e=e.data?e.data.error:e,i.error("",e,"")})).finally((function(){t.state.actionInProgress=!1}))},s=new a.ContainerGroupDefaultModel,r.subscriptions().then((function(n){var a=n;return t.state.selectedSubscription=a[0],t.subscriptions=a,e.all({resourceGroups:r.resourceGroups(a),containerInstancesProviders:r.containerInstanceProvider(a)})})).then((function(e){var n=e.resourceGroups;o=n;var a=e.containerInstancesProviders;l=a,t.model=s,c(t.state.selectedSubscription,n,a)})).catch((function(e){i.error("",e,"Azure")}))}])},function(e,t){angular.module("portainer.azure").controller("AzureDashboardController",["$scope","AzureService","Notifications",function(e,t,n){t.subscriptions().then((function(n){var a=n;return e.subscriptions=a,t.resourceGroups(a)})).then((function(n){e.resourceGroups=t.aggregate(n)})).catch((function(e){n.error("",e,"")}))}])},function(e,t,n){"use strict";n.r(t);var a=n(216),r=n.n(a),i=n(202),s=n(552);angular.module("portainer").config(["$urlRouterProvider","$httpProvider","localStorageServiceProvider","jwtOptionsProvider","$uibTooltipProvider","$compileProvider","cfpLoadingBarProvider",function(e,t,n,a,o,l,c){n.setPrefix("portainer"),a.config({tokenGetter:["LocalStorage",function(e){return e.getJWT()}]}),t.interceptors.push("jwtInterceptor"),t.interceptors.push("EndpointStatusInterceptor"),t.defaults.headers.post["Content-Type"]="application/json",t.defaults.headers.put["Content-Type"]="application/json",t.defaults.headers.patch["Content-Type"]="application/json",t.interceptors.push(["HttpRequestHelper",function(e){return{request:function(t){return t.url.indexOf("/docker/")>-1&&(t.headers["X-PortainerAgent-Target"]=e.portainerAgentTargetHeader(),e.portainerAgentManagerOperation()&&(t.headers["X-PortainerAgent-ManagerOperation"]="1")),t}}}]),r.a.options.timeOut=3e3,i.Terminal.applyAddon(s),o.setTriggers({mouseenter:"mouseleave",click:"click",focus:"blur",outsideClick:"outsideClick"}),c.includeSpinner=!1,c.parentSelector="#loadingbar-placeholder",c.latencyThreshold=600,e.otherwise("/auth")}])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){angular.module("portainer").constant("API_ENDPOINT_AUTH","api/auth").constant("API_ENDPOINT_DOCKERHUB","api/dockerhub").constant("API_ENDPOINT_CUSTOM_TEMPLATES","api/custom_templates").constant("API_ENDPOINT_EDGE_GROUPS","api/edge_groups").constant("API_ENDPOINT_EDGE_JOBS","api/edge_jobs").constant("API_ENDPOINT_EDGE_STACKS","api/edge_stacks").constant("API_ENDPOINT_EDGE_TEMPLATES","api/edge_templates").constant("API_ENDPOINT_ENDPOINTS","api/endpoints").constant("API_ENDPOINT_ENDPOINT_GROUPS","api/endpoint_groups").constant("API_ENDPOINT_MOTD","api/motd").constant("API_ENDPOINT_REGISTRIES","api/registries").constant("API_ENDPOINT_RESOURCE_CONTROLS","api/resource_controls").constant("API_ENDPOINT_SETTINGS","api/settings").constant("API_ENDPOINT_STACKS","api/stacks").constant("API_ENDPOINT_STATUS","api/status").constant("API_ENDPOINT_SUPPORT","api/support").constant("API_ENDPOINT_USERS","api/users").constant("API_ENDPOINT_TAGS","api/tags").constant("API_ENDPOINT_TEAMS","api/teams").constant("API_ENDPOINT_TEAM_MEMBERSHIPS","api/team_memberships").constant("API_ENDPOINT_TEMPLATES","api/templates").constant("API_ENDPOINT_WEBHOOKS","api/webhooks").constant("DEFAULT_TEMPLATES_URL","https://raw.githubusercontent.com/portainer/templates/master/templates.json").constant("PAGINATION_MAX_ITEMS",10).constant("APPLICATION_CACHE_VALIDITY",3600).constant("CONSOLE_COMMANDS_LABEL_PREFIX","io.portainer.commands.").constant("PREDEFINED_NETWORKS",["host","bridge","none"]).constant("KUBERNETES_SYSTEM_NAMESPACES",["kube-system","kube-public","kube-node-lease","portainer"])},function(e,t,n){var a=n(890);angular.module("portainer.docker").component("containerCapabilities",{templateUrl:a,bindings:{capabilities:"="}})},function(e,t){var n="app/docker/components/container-capabilities/containerCapabilities.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<form class="form-horizontal" style="margin-top: 15px;">\n  <div class="col-sm-12 form-section-title">\n    Container capabilities\n  </div>\n  <div class="form-group">\n    <div ng-repeat="cap in $ctrl.capabilities">\n      <div class="col-xs-8 col-sm-3 col-md-2">\n        <label for="capability" class="control-label text-left">\n          {{ cap.capability }}\n          <portainer-tooltip position="bottom" message="{{ cap.description }}"></portainer-tooltip>\n        </label>\n      </div>\n      <div class="col-xs-4 col-sm-2 col-md-1">\n        <label class="switch" style="margin-left: 20px;"> <input type="checkbox" name="capability" ng-model="cap.allowed" /><i></i> </label>\n      </div>\n      <div class="col-xs-0 col-sm-1 col-md-1"> </div>\n    </div>\n  </div>\n</form>\n')}]),e.exports=n},function(e,t,n){var a=n(892);angular.module("portainer.docker").component("containerQuickActions",{templateUrl:a,bindings:{containerId:"<",nodeName:"<",status:"<",state:"<",taskId:"<"}})},function(e,t){var n="app/docker/components/container-quick-actions/containerQuickActions.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="btn-group btn-group-xs" role="group" aria-label="..." style="display: inline-flex;">\n  <a\n    authorization="DockerContainerLogs"\n    ng-if="$ctrl.state.showQuickActionLogs && $ctrl.taskId === undefined"\n    style="margin: 0 2.5px;"\n    ui-sref="docker.containers.container.logs({id: $ctrl.containerId, nodeName: $ctrl.nodeName})"\n    title=""\n  >\n    <i class="fa fa-file-alt space-right" aria-hidden="true"></i>\n  </a>\n  <a\n    authorization="DockerTaskLogs"\n    ng-if="$ctrl.state.showQuickActionLogs && $ctrl.taskId !== undefined"\n    style="margin: 0 2.5px;"\n    ui-sref="docker.tasks.task.logs({id: $ctrl.taskId})"\n    title=""\n  >\n    <i class="fa fa-file-alt space-right" aria-hidden="true"></i>\n  </a>\n  <a\n    authorization="DockerContainerInspect"\n    ng-if="$ctrl.state.showQuickActionInspect && $ctrl.taskId === undefined"\n    style="margin: 0 2.5px;"\n    ui-sref="docker.containers.container.inspect({id: $ctrl.containerId, nodeName: $ctrl.nodeName})"\n    title=""\n  >\n    <i class="fa fa-info-circle space-right" aria-hidden="true"></i>\n  </a>\n  <a\n    authorization="DockerTaskInspect"\n    ng-if="$ctrl.state.showQuickActionInspect && $ctrl.taskId !== undefined"\n    style="margin: 0 2.5px;"\n    ui-sref="docker.tasks.task({id: $ctrl.taskId})"\n    title=""\n  >\n    <i class="fa fa-info-circle space-right" aria-hidden="true"></i>\n  </a>\n  <a\n    authorization="DockerContainerStats"\n    ng-if="$ctrl.state.showQuickActionStats && [\'\', \'\', \'\', \'\'].indexOf($ctrl.status) !== -1 && $ctrl.taskId === undefined"\n    style="margin: 0 2.5px;"\n    ui-sref="docker.containers.container.stats({id: $ctrl.containerId, nodeName: $ctrl.nodeName})"\n    title=""\n  >\n    <i class="fa fa-chart-area space-right" aria-hidden="true"></i>\n  </a>\n  <a\n    authorization="DockerExecStart"\n    ng-if="$ctrl.state.showQuickActionExec && [\'\', \'\', \'\', \'\'].indexOf($ctrl.status) !== -1 && $ctrl.taskId === undefined"\n    style="margin: 0 2.5px;"\n    ui-sref="docker.containers.container.exec({id: $ctrl.containerId, nodeName: $ctrl.nodeName})"\n    title=""\n  >\n    <i class="fa fa-terminal space-right" aria-hidden="true"></i>\n  </a>\n  <a\n    authorization="DockerContainerAttach"\n    ng-if="$ctrl.state.showQuickActionAttach && [\'\', \'\', \'\', \'\'].indexOf($ctrl.status) !== -1 && $ctrl.taskId === undefined"\n    style="margin: 0 2.5px;"\n    ui-sref="docker.containers.container.attach({id: $ctrl.containerId, nodeName: $ctrl.nodeName})"\n    title=""\n  >\n    <i class="fa fa-plug space-right" aria-hidden="true"></i>\n  </a>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.docker").controller("ContainerRestartPolicyController",[function(){var e=this;this.state={editModel:{}},e.save=function(){if(e.state.editModel.name===e.name&&e.state.editModel.maximumRetryCount===e.maximumRetryCount)return;e.updateRestartPolicy(e.state.editModel)},this.$onInit=function(){e.state.editModel={name:e.name?e.name:"no",maximumRetryCount:e.maximumRetryCount}}}])},function(e,t,n){var a=n(895);angular.module("portainer.docker").component("containerRestartPolicy",{templateUrl:a,controller:"ContainerRestartPolicyController",bindings:{name:"<",maximumRetryCount:"<",updateRestartPolicy:"&"}})},function(e,t){var n="app/docker/components/container-restart-policy/container-restart-policy.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div>\n  <table class="table table-bordered table-condensed">\n    <tr>\n      <td class="col-md-3">\n        <span></span>\n      </td>\n      <td>\n        <select class="form-control" ng-model="$ctrl.state.editModel.name" disable-authorization="DockerContainerUpdate">\n          <option value="no"></option>\n          <option value="on-failure"></option>\n          <option value="always"></option>\n          <option value="unless-stopped">,()</option>\n        </select>\n      </td>\n      <td class="col-md-2" authorization="DockerContainerUpdate">\n        <button class="btn btn-sm btn-primary" ng-click="$ctrl.save()"></button>\n      </td>\n    </tr>\n    <tr ng-if="$ctrl.state.editModel.name === \'on-failure\'">\n      <td class="col-md-3"></td>\n      <td colspan="2">\n        <input type="number" class="form-control" ng-model="$ctrl.state.editModel.maximumRetryCount" />\n      </td>\n    </tr>\n  </table>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(897);angular.module("portainer.docker").component("dashboardClusterAgentInfo",{templateUrl:a,controller:"DashboardClusterAgentInfoController"})},function(e,t){var n="app/docker/components/dashboard-cluster-agent-info/dashboardClusterAgentInfo.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-widget>\n  <rd-widget-header icon="fa-tachometer-alt" title-text="Cluster information"></rd-widget-header>\n  <rd-widget-body classes="no-padding">\n    <table class="table">\n      <tbody>\n        <tr>\n          <td>Nodes in the cluster</td>\n          <td>{{ $ctrl.agentCount }}</td>\n        </tr>\n        <tr>\n          <td colspan="2">\n            <div class="btn-group" role="group" aria-label="...">\n              <a ui-sref="docker.swarm.visualizer"><i class="fa fa-object-group space-right" aria-hidden="true"></i>Go to cluster visualizer</a>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </rd-widget-body>\n</rd-widget>\n')}]),e.exports=n},function(e,t){angular.module("portainer.docker").controller("DashboardClusterAgentInfoController",["AgentService","Notifications",function(e,t){var n=this;this.$onInit=function(){e.agents().then((function(e){n.agentCount=e.length})).catch((function(e){t.error("",e,"")}))}}])},function(e,t,n){var a=n(900);angular.module("portainer.docker").component("configsDatatable",{templateUrl:a,controller:"GenericDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",removeAction:"<",refreshCallback:"<"}})},function(e,t){var n="app/docker/components/datatables/configs-datatable/configsDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n        <div class="settings">\n          <span class="setting" ng-class="{ \'setting-active\': $ctrl.settings.open }" uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.settings.open">\n            <span uib-dropdown-toggle><i class="fa fa-cog" aria-hidden="true"></i> </span>\n            <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n              <div class="tableMenu">\n                <div class="menuHeader">\n                  \n                </div>\n                <div class="menuContent">\n                  <div>\n                    <div class="md-checkbox">\n                      <input id="setting_auto_refresh" type="checkbox" ng-model="$ctrl.settings.repeater.autoRefresh" ng-change="$ctrl.onSettingsRepeaterChange()" />\n                      <label for="setting_auto_refresh"></label>\n                    </div>\n                    <div ng-if="$ctrl.settings.repeater.autoRefresh">\n                      <label for="settings_refresh_rate">\n                        \n                      </label>\n                      <select id="settings_refresh_rate" ng-model="$ctrl.settings.repeater.refreshRate" ng-change="$ctrl.onSettingsRepeaterChange()" class="small-select">\n                        <option value="10">10s</option>\n                        <option value="30">30s</option>\n                        <option value="60">1min</option>\n                        <option value="120">2min</option>\n                        <option value="300">5min</option>\n                      </select>\n                      <span>\n                        <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="margin-top: 7px; display: none;"></i>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.settings.open = false;"></a>\n                </div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div class="actionBar" authorization="DockerConfigDelete, DockerConfigCreate">\n        <button\n          type="button"\n          class="btn btn-sm btn-danger"\n          authorization="DockerConfigDelete"\n          ng-disabled="$ctrl.state.selectedItemCount === 0"\n          ng-click="$ctrl.removeAction($ctrl.state.selectedItems)"\n        >\n          <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>\n        </button>\n        <button type="button" class="btn btn-sm btn-primary" ui-sref="docker.configs.new" authorization="DockerConfigCreate">\n          <i class="fa fa-plus space-right" aria-hidden="true"></i>Add config\n        </button>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <span class="md-checkbox" authorization="DockerConfigDelete, DockerConfigCreate">\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'CreatedAt\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'CreatedAt\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'CreatedAt\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'ResourceControl.Ownership\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'ResourceControl.Ownership\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'ResourceControl.Ownership\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>\n                <span class="md-checkbox" authorization="DockerConfigDelete, DockerConfigCreate">\n                  <input id="select_{{ $index }}" type="checkbox" ng-model="item.Checked" ng-click="$ctrl.selectItem(item, $event)" />\n                  <label for="select_{{ $index }}"></label>\n                </span>\n                <a ui-sref="docker.configs.config({id: item.Id})">{{ item.Name }}</a>\n              </td>\n              <td>{{ item.CreatedAt | getisodate }}</td>\n              <td>\n                <span>\n                  <i ng-class="item.ResourceControl.Ownership | ownershipicon" aria-hidden="true"></i>\n                  {{ item.ResourceControl.Ownership ? item.ResourceControl.Ownership : item.ResourceControl.Ownership = $ctrl.RCO.ADMINISTRATORS }}\n                </span>\n              </td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="3" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="3" class="text-center text-muted">No config available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(902);angular.module("portainer.docker").component("containerNetworksDatatable",{templateUrl:a,controller:"ContainerNetworksDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",container:"<",availableNetworks:"<",joinNetworkAction:"<",joinNetworkActionInProgress:"<",leaveNetworkActionInProgress:"<",leaveNetworkAction:"<",nodeName:"<"}})},function(e,t){var n="app/docker/components/datatables/container-networks-datatable/containerNetworksDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n      </div>\n      <div class="actionBar">\n        <form class="form-horizontal">\n          <div class="row" authorization="DockerNetworkConnect">\n            <label for="container_network" class="col-sm-3 col-lg-2 control-label text-left"></label>\n            <div class="col-sm-5 col-lg-4">\n              <select class="form-control" ng-model="$ctrl.selectedNetwork" id="container_network">\n                <option selected disabled hidden value=""></option>\n                <option ng-repeat="net in $ctrl.availableNetworks | orderBy: \'Name\'" ng-value="net.Id">{{ net.Name }}</option>\n              </select>\n            </div>\n            <div class="col-sm-1">\n              <button\n                type="button"\n                class="btn btn-primary btn-sm"\n                ng-disabled="$ctrl.joinNetworkActionInProgress || !$ctrl.selectedNetwork"\n                ng-click="$ctrl.joinNetworkAction($ctrl.container, $ctrl.selectedNetwork)"\n                button-spinner="$ctrl.joinNetworkActionInProgress"\n              >\n                <span ng-hide="$ctrl.joinNetworkActionInProgress"></span>\n                <span ng-show="$ctrl.joinNetworkActionInProgress">Joining network...</span>\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th></th>\n              <th>\n                IP \n                <a ng-click="$ctrl.expandAll()" ng-if="$ctrl.hasExpandableItems()">\n                  <i ng-class="{ \'fas fa-angle-down\': $ctrl.state.expandAll, \'fas fa-angle-right\': !$ctrl.state.expandAll }" aria-hidden="true"></i>\n                </a>\n              </th>\n              <th></th>\n              <th>MAC </th>\n              <th authorization="DockerNetworkDisconnect"></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate-start="(key, value) in $ctrl.dataset | itemsPerPage: $ctrl.state.paginatedItemLimit"\n              ng-class="{ active: item.Checked }"\n              ng-click="$ctrl.expandItem(value, !value.Expanded)"\n            >\n              <td>\n                <a ng-if="$ctrl.itemCanExpand(value)">\n                  <i ng-class="{ \'fas fa-angle-down\': value.Expanded, \'fas fa-angle-right\': !value.Expanded }" class="space-right" aria-hidden="true"></i>\n                </a>\n                <a ui-sref="docker.networks.network({ id: key, nodeName: $ctrl.nodeName })">{{ key }}</a>\n              </td>\n              <td>{{ value.IPAddress || \'-\' }}</td>\n              <td>{{ value.Gateway || \'-\' }}</td>\n              <td>{{ value.MacAddress || \'-\' }}</td>\n              <td authorization="DockerNetworkDisconnect">\n                <button\n                  type="button"\n                  class="btn btn-xs btn-danger"\n                  ng-disabled="$ctrl.leaveNetworkActionInProgress"\n                  button-spinner="$ctrl.leaveNetworkActionInProgress"\n                  ng-click="$ctrl.leaveNetworkAction($ctrl.container, key)"\n                >\n                  <span ng-hide="$ctrl.leaveNetworkActionInProgress"><i class="fa fa-trash-alt space-right" aria-hidden="true"></i> </span>\n                  <span ng-show="$ctrl.leaveNetworkActionInProgress">Leaving network...</span>\n                </button>\n              </td>\n            </tr>\n            <tr dir-paginate-end ng-show="$ctrl.itemCanExpand(value) && value.Expanded" ng-style="{ background: value.Highlighted ? \'#d5e8f3\' : \'#f5f5f5\' }">\n              <td colspan="1"></td>\n              <td colspan="1">\n                {{ value.GlobalIPv6Address }}\n              </td>\n              <td colspan="3">\n                {{ value.IPv6Gateway || \'-\' }}\n              </td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="5" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.dataset.length === 0">\n              <td colspan="5" class="text-center text-muted">No network available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(7),r=n(5);angular.module("portainer.docker").controller("ContainerNetworksDatatableController",["$scope","$controller","DatatableService",function(e,t,n){angular.extend(this,t("GenericDatatableController",{$scope:e})),this.state=Object.assign(this.state,{expandedItems:[],expandAll:!0}),this.expandItem=function(e,t){this.itemCanExpand(e)&&(e.Expanded=t,t||(e.Highlighted=!1),e.Expanded||(this.state.expandAll=!1))},this.itemCanExpand=function(e){return""!==e.GlobalIPv6Address},this.hasExpandableItems=function(){var e=this;return Object(r.a)(this.dataset,(function(t){return e.itemCanExpand(t)})).length},this.expandAll=function(){var e=this;this.state.expandAll=!this.state.expandAll,Object(a.a)(this.dataset,(function(t){e.itemCanExpand(t)&&e.expandItem(t,e.state.expandAll)}))},this.$onInit=function(){this.setDefaults(),this.prepareTableFromDataset(),this.state.orderBy=this.orderBy;var e=n.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=n.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var r=n.getDataTableFilters(this.tableKey);null!==r&&(this.filters=r),this.filters&&this.filters.state&&(this.filters.state.open=!1);var i=n.getDataTableSettings(this.tableKey);null!==i&&(this.settings=i,this.settings.open=!1),Object(a.a)(this.dataset,(function(e){e.Expanded=!0,e.Highlighted=!0}))}}])},function(e,t,n){var a=n(905);angular.module("portainer.docker").component("containerProcessesDatatable",{templateUrl:a,controller:"GenericDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"=",headerset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<"}})},function(e,t){var n="app/docker/components/datatables/container-processes-datatable/containerProcessesDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input type="text" class="searchInput" ng-model="$ctrl.state.textFilter" placeholder="..." auto-focus ng-model-options="{ debounce: 300 }" />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th ng-repeat="header in $ctrl.headerset">\n                {{ header }}\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr dir-paginate="item in ($ctrl.state.filteredProcesses = ($ctrl.dataset | filter:$ctrl.state.textFilter | itemsPerPage: $ctrl.state.paginatedItemLimit))">\n              <td ng-repeat="info in item track by $index">{{ info }}</td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="{{ $ctrl.headerset.length }}" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredProcesses.length === 0">\n              <td colspan="{{ $ctrl.headerset.length }}" class="text-center text-muted">No process available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(907);angular.module("portainer.docker").component("containersDatatableActions",{templateUrl:a,controller:"ContainersDatatableActionsController",bindings:{selectedItems:"=",selectedItemCount:"=",noStoppedItemsSelected:"=",noRunningItemsSelected:"=",noPausedItemsSelected:"=",showAddAction:"<"}})},function(e,t){var n="app/docker/components/datatables/containers-datatable/actions/containersDatatableActions.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div\n  class="actionBar"\n  authorization="DockerContainerStart, DockerContainerStop, DockerContainerKill, DockerContainerRestart, DockerContainerPause, DockerContainerUnpause, DockerContainerDelete, DockerContainerCreate"\n>\n  <div class="btn-group" role="group" aria-label="...">\n    <button\n      authorization="DockerContainerStart"\n      type="button"\n      class="btn btn-sm btn-success"\n      ng-click="$ctrl.startAction($ctrl.selectedItems)"\n      ng-disabled="$ctrl.selectedItemCount === 0 || $ctrl.noStoppedItemsSelected"\n    >\n      <i class="fa fa-play space-right" aria-hidden="true"></i>\n    </button>\n    <button\n      authorization="DockerContainerStop"\n      type="button"\n      class="btn btn-sm btn-danger"\n      ng-click="$ctrl.stopAction($ctrl.selectedItems)"\n      ng-disabled="$ctrl.selectedItemCount === 0 || $ctrl.noRunningItemsSelected"\n    >\n      <i class="fa fa-stop space-right" aria-hidden="true"></i>\n    </button>\n    <button\n      authorization="DockerContainerKill"\n      type="button"\n      class="btn btn-sm btn-danger"\n      ng-click="$ctrl.killAction($ctrl.selectedItems)"\n      ng-disabled="$ctrl.selectedItemCount === 0"\n    >\n      <i class="fa fa-bomb space-right" aria-hidden="true"></i>\n    </button>\n    <button\n      authorization="DockerContainerRestart"\n      type="button"\n      class="btn btn-sm btn-primary"\n      ng-click="$ctrl.restartAction($ctrl.selectedItems)"\n      ng-disabled="$ctrl.selectedItemCount === 0"\n    >\n      <i class="fa fa-sync space-right" aria-hidden="true"></i>\n    </button>\n    <button\n      authorization="DockerContainerPause"\n      type="button"\n      class="btn btn-sm btn-primary"\n      ng-click="$ctrl.pauseAction($ctrl.selectedItems)"\n      ng-disabled="$ctrl.selectedItemCount === 0 || $ctrl.noRunningItemsSelected"\n    >\n      <i class="fa fa-pause space-right" aria-hidden="true"></i>\n    </button>\n    <button\n      authorization="DockerContainerUnpause"\n      type="button"\n      class="btn btn-sm btn-primary"\n      ng-click="$ctrl.resumeAction($ctrl.selectedItems)"\n      ng-disabled="$ctrl.selectedItemCount === 0 || $ctrl.noPausedItemsSelected"\n    >\n      <i class="fa fa-play space-right" aria-hidden="true"></i>\n    </button>\n    <button\n      authorization="DockerContainerDelete"\n      type="button"\n      class="btn btn-sm btn-danger"\n      ng-disabled="$ctrl.selectedItemCount === 0"\n      ng-click="$ctrl.removeAction($ctrl.selectedItems)"\n    >\n      <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>\n    </button>\n  </div>\n  <button authorization="DockerContainerCreate" type="button" class="btn btn-sm btn-primary" ui-sref="docker.containers.new" ng-if="$ctrl.showAddAction">\n    <i class="fa fa-plus space-right" aria-hidden="true"></i>\n  </button>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.docker").controller("ContainersDatatableActionsController",["$state","ContainerService","ModalService","Notifications","HttpRequestHelper",function(e,t,n,a,r){function i(t,n,i,s){var o=t.length;angular.forEach(t,(function(t){r.setPortainerAgentTargetHeader(t.NodeName),n(t.Id).then((function(){a.success(i,t.Names[0])})).catch((function(e){s=s+":"+t.Names[0],a.error("",e,s)})).finally((function(){0===--o&&e.reload()}))}))}this.startAction=function(e){i(e,t.startContainer,"","")},this.stopAction=function(e){i(e,t.stopContainer,"","Unable to stop container")},this.restartAction=function(e){i(e,t.restartContainer,"","Unable to restart container")},this.killAction=function(e){i(e,t.killContainer,"","Unable to kill container")},this.pauseAction=function(e){i(e,t.pauseContainer,"","Unable to pause container")},this.resumeAction=function(e){i(e,t.resumeContainer,"","Unable to resume container")},this.removeAction=function(i){for(var s=!1,o=0;o<i.length;o++){if("running"===i[o].State){s=!0;break}}var l="";s&&(l=""),n.confirmContainerDeletion(l,(function(n){if(n){var s=!1;n[0]&&(s=!0),function(n,i){var s=n.length;angular.forEach(n,(function(n){r.setPortainerAgentTargetHeader(n.NodeName),t.remove(n,i).then((function(){a.success("",n.Names[0])})).catch((function(e){a.error("",e,"")})).finally((function(){0===--s&&e.reload()}))}))}(i,s)}}))}}])},function(e,t,n){var a=n(910);angular.module("portainer.docker").component("containersDatatable",{templateUrl:a,controller:"ContainersDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",showHostColumn:"<",showAddAction:"<",offlineMode:"<",refreshCallback:"<"}})},function(e,t){var n="app/docker/components/datatables/containers-datatable/containersDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n        <div class="settings">\n          <span\n            class="setting"\n            ng-class="{ \'setting-active\': $ctrl.columnVisibility.state.open }"\n            uib-dropdown\n            dropdown-append-to-body\n            auto-close="disabled"\n            is-open="$ctrl.columnVisibility.state.open"\n          >\n            <span uib-dropdown-toggle><i class="fa fa-columns space-right" aria-hidden="true"></i></span>\n            <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n              <div class="tableMenu">\n                <div class="menuHeader">\n                   / \n                </div>\n                <div class="menuContent">\n                  <div class="md-checkbox">\n                    <input\n                      id="col_vis_state"\n                      ng-change="$ctrl.onColumnVisibilityChange($ctrl.columnVisibility)"\n                      type="checkbox"\n                      ng-model="$ctrl.columnVisibility.columns.state.display"\n                    />\n                    <label for="col_vis_state" ng-bind="$ctrl.columnVisibility.columns.state.label"></label>\n                  </div>\n                  <div class="md-checkbox">\n                    <input\n                      id="col_vis_actions"\n                      ng-change="$ctrl.onColumnVisibilityChange($ctrl.columnVisibility)"\n                      type="checkbox"\n                      ng-model="$ctrl.columnVisibility.columns.actions.display"\n                    />\n                    <label for="col_vis_actions" ng-bind="$ctrl.columnVisibility.columns.actions.label"></label>\n                  </div>\n                  <div class="md-checkbox">\n                    <input\n                      id="col_vis_stack"\n                      ng-change="$ctrl.onColumnVisibilityChange($ctrl.columnVisibility)"\n                      type="checkbox"\n                      ng-model="$ctrl.columnVisibility.columns.stack.display"\n                    />\n                    <label for="col_vis_stack" ng-bind="$ctrl.columnVisibility.columns.stack.label"></label>\n                  </div>\n                  <div class="md-checkbox">\n                    <input\n                      id="col_vis_image"\n                      ng-change="$ctrl.onColumnVisibilityChange($ctrl.columnVisibility)"\n                      type="checkbox"\n                      ng-model="$ctrl.columnVisibility.columns.image.display"\n                    />\n                    <label for="col_vis_image" ng-bind="$ctrl.columnVisibility.columns.image.label"></label>\n                  </div>\n                  <div class="md-checkbox">\n                    <input\n                      id="col_vis_created"\n                      ng-change="$ctrl.onColumnVisibilityChange($ctrl.columnVisibility)"\n                      type="checkbox"\n                      ng-model="$ctrl.columnVisibility.columns.created.display"\n                    />\n                    <label for="col_vis_created" ng-bind="$ctrl.columnVisibility.columns.created.label"></label>\n                  </div>\n                  <div class="md-checkbox" ng-if="$ctrl.showHostColumn">\n                    <input\n                      id="col_vis_host"\n                      ng-change="$ctrl.onColumnVisibilityChange($ctrl.columnVisibility)"\n                      type="checkbox"\n                      ng-model="$ctrl.columnVisibility.columns.host.display"\n                    />\n                    <label for="col_vis_host" ng-bind="$ctrl.columnVisibility.columns.host.label"></label>\n                  </div>\n                  <div class="md-checkbox">\n                    <input\n                      id="col_vis_ports"\n                      ng-change="$ctrl.onColumnVisibilityChange($ctrl.columnVisibility)"\n                      type="checkbox"\n                      ng-model="$ctrl.columnVisibility.columns.ports.display"\n                    />\n                    <label for="col_vis_ports" ng-bind="$ctrl.columnVisibility.columns.ports.label"></label>\n                  </div>\n                  <div class="md-checkbox">\n                    <input\n                      id="col_vis_ownership"\n                      ng-change="$ctrl.onColumnVisibilityChange($ctrl.columnVisibility)"\n                      type="checkbox"\n                      ng-model="$ctrl.columnVisibility.columns.ownership.display"\n                    />\n                    <label for="col_vis_ownership" ng-bind="$ctrl.columnVisibility.columns.ownership.label"></label>\n                  </div>\n                </div>\n                <div>\n                  <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.columnVisibility.state.open = false;"></a>\n                </div>\n              </div>\n            </div>\n          </span>\n          <span class="setting" ng-class="{ \'setting-active\': $ctrl.settings.open }" uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.settings.open">\n            <span uib-dropdown-toggle><i class="fa fa-cog" aria-hidden="true"></i> </span>\n            <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n              <div class="tableMenu">\n                <div class="menuHeader">\n                  \n                </div>\n                <div class="menuContent">\n                  <div class="md-checkbox">\n                    <input id="setting_container_trunc" type="checkbox" ng-model="$ctrl.settings.truncateContainerName" ng-change="$ctrl.onSettingsContainerNameTruncateChange()" />\n                    <label for="setting_container_trunc"></label>\n                  </div>\n                  <div>\n                    <div class="md-checkbox">\n                      <input id="setting_auto_refresh" type="checkbox" ng-model="$ctrl.settings.repeater.autoRefresh" ng-change="$ctrl.onSettingsRepeaterChange()" />\n                      <label for="setting_auto_refresh"></label>\n                    </div>\n                    <div ng-if="$ctrl.settings.repeater.autoRefresh">\n                      <label for="settings_refresh_rate">\n                        \n                      </label>\n                      <select id="settings_refresh_rate" ng-model="$ctrl.settings.repeater.refreshRate" ng-change="$ctrl.onSettingsRepeaterChange()" class="small-select">\n                        <option value="10">10s</option>\n                        <option value="30">30s</option>\n                        <option value="60">1min</option>\n                        <option value="120">2min</option>\n                        <option value="300">5min</option>\n                      </select>\n                      <span>\n                        <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="margin-top: 7px; display: none;"></i>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div authorization="DockerContainerStats, DockerContainerLogs, DockerExecStart, DockerContainerInspect, DockerTaskInspect, DockerTaskLogs, DockerContainerAttach">\n                  <div class="menuHeader">\n                    \n                  </div>\n                  <div class="menuContent">\n                    <div class="md-checkbox" authorization="DockerContainerStats">\n                      <input id="setting_show_stats" type="checkbox" ng-model="$ctrl.settings.showQuickActionStats" ng-change="$ctrl.onSettingsQuickActionChange()" />\n                      <label for="setting_show_stats"></label>\n                    </div>\n                    <div class="md-checkbox" authorization="DockerContainerLogs">\n                      <input id="setting_show_logs" type="checkbox" ng-model="$ctrl.settings.showQuickActionLogs" ng-change="$ctrl.onSettingsQuickActionChange()" />\n                      <label for="setting_show_logs"></label>\n                    </div>\n                    <div class="md-checkbox" authorization="DockerExecStart">\n                      <input id="setting_show_console" type="checkbox" ng-model="$ctrl.settings.showQuickActionExec" ng-change="$ctrl.onSettingsQuickActionChange()" />\n                      <label for="setting_show_console"></label>\n                    </div>\n                    <div class="md-checkbox" authorization="DockerContainerInspect">\n                      <input id="setting_show_inspect" type="checkbox" ng-model="$ctrl.settings.showQuickActionInspect" ng-change="$ctrl.onSettingsQuickActionChange()" />\n                      <label for="setting_show_inspect"></label>\n                    </div>\n                    <div class="md-checkbox" authorization="DockerContainerAttach">\n                      <input id="setting_show_attach" type="checkbox" ng-model="$ctrl.settings.showQuickActionAttach" ng-change="$ctrl.onSettingsQuickActionChange()" />\n                      <label for="setting_show_attach"></label>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.settings.open = false;"></a>\n                </div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <containers-datatable-actions\n        ng-if="!$ctrl.offlineMode"\n        selected-items="$ctrl.state.selectedItems"\n        selected-item-count="$ctrl.state.selectedItemCount"\n        no-stopped-items-selected="$ctrl.state.noStoppedItemsSelected"\n        no-running-items-selected="$ctrl.state.noRunningItemsSelected"\n        no-paused-items-selected="$ctrl.state.noPausedItemsSelected"\n        show-add-action="$ctrl.showAddAction"\n      ></containers-datatable-actions>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover table-filters nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <span\n                  class="md-checkbox"\n                  ng-if="!$ctrl.offlineMode"\n                  authorization="DockerContainerStart, DockerContainerStop, DockerContainerKill, DockerContainerRestart, DockerContainerPause, DockerContainerUnpause, DockerContainerDelete, DockerContainerCreate"\n                >\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.changeOrderBy(\'Names\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Names\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Names\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.filters.state.open" ng-show="$ctrl.columnVisibility.columns.state.display">\n                <a ng-click="$ctrl.changeOrderBy(\'Status\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Status\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Status\' && $ctrl.state.reverseOrder"></i>\n                </a>\n                <div>\n                  <span uib-dropdown-toggle class="table-filter" ng-if="!$ctrl.filters.state.enabled"> <i class="fa fa-filter" aria-hidden="true"></i></span>\n                  <span uib-dropdown-toggle class="table-filter filter-active" ng-if="$ctrl.filters.state.enabled"> <i class="fa fa-check" aria-hidden="true"></i></span>\n                </div>\n                <div class="dropdown-menu" uib-dropdown-menu>\n                  <div class="tableMenu">\n                    <div class="menuHeader">\n                      Filter by state\n                    </div>\n                    <div class="menuContent">\n                      <div class="md-checkbox" ng-repeat="filter in $ctrl.filters.state.values track by $index">\n                        <input id="filter_state_{{ $index }}" type="checkbox" ng-model="filter.display" ng-change="$ctrl.onStateFilterChange()" />\n                        <label for="filter_state_{{ $index }}">{{ filter.label }}</label>\n                      </div>\n                    </div>\n                    <div>\n                      <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.filters.state.open = false;"></a>\n                    </div>\n                  </div>\n                </div>\n              </th>\n              <th\n                ng-if="\n                  $ctrl.settings.showQuickActionStats ||\n                  $ctrl.settings.showQuickActionLogs ||\n                  $ctrl.settings.showQuickActionExec ||\n                  $ctrl.settings.showQuickActionAttach ||\n                  $ctrl.settings.showQuickActionInspect\n                "\n                ng-show="$ctrl.columnVisibility.columns.actions.display"\n                authorization="DockerContainerStats, DockerContainerLogs, DockerExecStart, DockerContainerInspect, DockerTaskInspect, DockerTaskLogs, DockerContainerAttach"\n              >\n                \n              </th>\n              <th ng-show="$ctrl.columnVisibility.columns.stack.display">\n                <a ng-click="$ctrl.changeOrderBy(\'StackName\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'StackName\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'StackName\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th ng-show="$ctrl.columnVisibility.columns.image.display">\n                <a ng-click="$ctrl.changeOrderBy(\'Image\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Image\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Image\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th ng-show="$ctrl.columnVisibility.columns.created.display">\n                <a ng-click="$ctrl.changeOrderBy(\'Created\')">\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Created\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Created\' && $ctrl.state.reverseOrder"></i>\n                  \n                </a>\n              </th>\n              <th ng-if="$ctrl.showHostColumn" ng-show="$ctrl.columnVisibility.columns.host.display">\n                <a ng-click="$ctrl.changeOrderBy(\'NodeName\')">\n                                    <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'NodeName\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'NodeName\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th ng-show="$ctrl.columnVisibility.columns.ports.display">\n                <a ng-click="$ctrl.changeOrderBy(\'Ports\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Ports\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Ports\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th ng-show="$ctrl.columnVisibility.columns.ownership.display">\n                <a ng-click="$ctrl.changeOrderBy(\'ResourceControl.Ownership\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'ResourceControl.Ownership\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'ResourceControl.Ownership\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter: $ctrl.applyFilters | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>\n                <span\n                  class="md-checkbox"\n                  ng-if="!$ctrl.offlineMode"\n                  authorization="DockerContainerStart, DockerContainerStop, DockerContainerKill, DockerContainerRestart, DockerContainerPause, DockerContainerUnpause, DockerContainerDelete, DockerContainerCreate"\n                >\n                  <input id="select_{{ $index }}" type="checkbox" ng-model="item.Checked" ng-click="$ctrl.selectItem(item, $event)" />\n                  <label for="select_{{ $index }}"></label>\n                </span>\n                <a ng-if="!$ctrl.offlineMode" ui-sref="docker.containers.container({ id: item.Id, nodeName: item.NodeName })" title="{{ item | containername }}">{{\n                  item | containername | truncate: $ctrl.settings.containerNameTruncateSize\n                }}</a>\n                <span ng-if="$ctrl.offlineMode">{{ item | containername | truncate: $ctrl.settings.containerNameTruncateSize }}</span>\n              </td>\n              <td ng-show="$ctrl.columnVisibility.columns.state.display">\n                <span\n                  ng-if="[\'\', \'\', \'\'].indexOf(item.Status) !== -1"\n                  class="label label-{{ item.Status | containerstatusbadge }} interactive"\n                  uib-tooltip="This container has a health check"\n                  >{{ item.Status }}</span\n                >\n                <span ng-if="[\'\', \'\', \'\'].indexOf(item.Status) === -1" class="label label-{{ item.Status | containerstatusbadge }}">{{ item.Status }}</span>\n              </td>\n              <td\n                ng-if="\n                  !$ctrl.offlineMode &&\n                  ($ctrl.settings.showQuickActionStats ||\n                    $ctrl.settings.showQuickActionLogs ||\n                    $ctrl.settings.showQuickActionExec ||\n                    $ctrl.settings.showQuickActionAttach ||\n                    $ctrl.settings.showQuickActionInspect)\n                "\n                ng-show="$ctrl.columnVisibility.columns.actions.display"\n                authorization="DockerContainerStats, DockerContainerLogs, DockerExecStart, DockerContainerInspect, DockerTaskInspect, DockerTaskLogs"\n              >\n                <container-quick-actions container-id="item.Id" node-name="item.NodeName" status="item.Status" state="$ctrl.settings"></container-quick-actions>\n              </td>\n              <td ng-if="$ctrl.offlineMode"> </td>\n              <td ng-show="$ctrl.columnVisibility.columns.stack.display">{{ item.StackName ? item.StackName : \'-\' }}</td>\n              <td ng-show="$ctrl.columnVisibility.columns.image.display">\n                <a ng-if="!$ctrl.offlineMode" ui-sref="docker.images.image({ id: item.Image })">{{ item.Image | trimshasum }}</a>\n                <span ng-if="$ctrl.offlineMode">{{ item.Image | trimshasum }}</span>\n              </td>\n              <td ng-show="$ctrl.columnVisibility.columns.created.display">\n                {{ item.Created | getisodatefromtimestamp }}\n              </td>\n              <td ng-if="$ctrl.showHostColumn" ng-show="$ctrl.columnVisibility.columns.host.display">{{ item.NodeName ? item.NodeName : \'-\' }}</td>\n              <td ng-show="$ctrl.columnVisibility.columns.ports.display">\n                <a\n                  ng-if="item.Ports.length > 0"\n                  ng-repeat="p in item.Ports"\n                  class="image-tag"\n                  ng-href="http://{{ $ctrl.state.publicURL || p.host }}:{{ p.public }}"\n                  target="_blank"\n                >\n                  <i class="fa fa-external-link-alt" aria-hidden="true"></i> {{ p.public }}:{{ p.private }}\n                </a>\n                <span ng-if="item.Ports.length == 0">-</span>\n              </td>\n              <td ng-show="$ctrl.columnVisibility.columns.ownership.display">\n                <span>\n                  <i ng-class="item.ResourceControl.Ownership | ownershipicon" aria-hidden="true"></i>\n                  {{ item.ResourceControl.Ownership ? item.ResourceControl.Ownership : item.ResourceControl.Ownership = $ctrl.RCO.ADMINISTRATORS }}\n                </span>\n              </td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="9" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="9" class="text-center text-muted">No container available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(4),r=n(110);angular.module("portainer.docker").controller("ContainersDatatableController",["$scope","$controller","DatatableService","EndpointProvider",function(e,t,n,i){angular.extend(this,t("GenericDatatableController",{$scope:e}));var s=this;this.state=Object.assign(this.state,{noStoppedItemsSelected:!0,noRunningItemsSelected:!0,noPausedItemsSelected:!0,publicURL:i.endpointPublicURL()}),this.settings=Object.assign(this.settings,{truncateContainerName:!0,containerNameTruncateSize:32,showQuickActionStats:!0,showQuickActionLogs:!0,showQuickActionExec:!0,showQuickActionInspect:!0,showQuickActionAttach:!1}),this.filters={state:{open:!1,enabled:!1,values:[]}},this.columnVisibility={state:{open:!1},columns:{state:{label:"",display:!0},actions:{label:"",display:!0},stack:{label:"",display:!0},image:{label:"",display:!0},created:{label:"",display:!0},host:{label:"Host",display:!0},ports:{label:"",display:!0},ownership:{label:"Ownership",display:!0}}},this.onColumnVisibilityChange=function(e){n.setColumnVisibilitySettings(this.tableKey,e)},this.onSelectionChanged=function(){this.updateSelectionState()},this.updateSelectionState=function(){this.state.noStoppedItemsSelected=!0,this.state.noRunningItemsSelected=!0,this.state.noPausedItemsSelected=!0;for(var e=0;e<this.dataset.length;e++){var t=this.dataset[e];t.Checked&&this.updateSelectionStateBasedOnItemStatus(t)}},this.updateSelectionStateBasedOnItemStatus=function(e){""===e.Status?this.state.noPausedItemsSelected=!1:-1!==["","created"].indexOf(e.Status)?this.state.noStoppedItemsSelected=!1:-1!==["","","",""].indexOf(e.Status)&&(this.state.noRunningItemsSelected=!1)},this.applyFilters=function(e){for(var t=e,n=s.filters,a=0;a<n.state.values.length;a++){var r=n.state.values[a];if(t.Status===r.label&&r.display)return!0}return!1},this.onStateFilterChange=function(){for(var e=this.filters.state.values,t=!1,n=0;n<e.length;n++){e[n].display||(t=!0)}this.filters.state.enabled=t},this.onSettingsContainerNameTruncateChange=function(){this.settings.truncateContainerName?this.settings.containerNameTruncateSize=32:this.settings.containerNameTruncateSize=256,n.setDataTableSettings(this.tableKey,this.settings)},this.onSettingsQuickActionChange=function(){n.setDataTableSettings(this.tableKey,this.settings)},this.prepareTableFromDataset=function(){for(var e=[],t=0;t<this.dataset.length;t++){var n=this.dataset[t];e.push({label:n.Status,display:!0})}this.filters.state.values=Object(r.a)(e,"label")},this.updateStoredFilters=function(e){for(var t=this.filters.state.values,n=0;n<t.length;n++){var r=t[n],i=Object(a.a)(e,["label",r.label]);i&&!i.display&&(r.display=i.display,this.filters.state.enabled=!0)}},this.$onInit=function(){this.setDefaults(),this.prepareTableFromDataset(),this.state.orderBy=this.orderBy;var e=n.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=n.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var a=n.getDataTableFilters(this.tableKey);null!==a&&(this.filters=a,this.filters.state.open=!1,this.updateStoredFilters(a.state.values));var r=n.getDataTableSettings(this.tableKey);null!==r&&(this.settings=r,this.settings.open=!1),this.onSettingsRepeaterChange();var i=n.getColumnVisibilitySettings(this.tableKey);null!==i&&(this.columnVisibility=i,this.columnVisibility.state.open=!1)}}])},function(e,t,n){var a=n(913);angular.module("portainer.docker").component("eventsDatatable",{templateUrl:a,controller:"GenericDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<"}})},function(e,t){var n="app/docker/components/datatables/events-datatable/eventsDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Time\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Time\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Time\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Type\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Type\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Type\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Details\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Details\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Details\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>{{ item.Time | getisodatefromtimestamp }}</td>\n              <td>{{ item.Type }}</td>\n              <td>{{ item.Details }}</td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="3" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="3" class="text-center text-muted">No event available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(915);angular.module("portainer.docker").component("imagesDatatable",{templateUrl:a,controller:"ImagesDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",showHostColumn:"<",removeAction:"<",downloadAction:"<",forceRemoveAction:"<",exportInProgress:"<",offlineMode:"<",refreshCallback:"<"}})},function(e,t){var n="app/docker/components/datatables/images-datatable/imagesDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n        <div class="settings">\n          <span class="setting" ng-class="{ \'setting-active\': $ctrl.settings.open }" uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.settings.open">\n            <span uib-dropdown-toggle><i class="fa fa-cog" aria-hidden="true"></i> </span>\n            <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n              <div class="tableMenu">\n                <div class="menuHeader">\n                  \n                </div>\n                <div class="menuContent">\n                  <div>\n                    <div class="md-checkbox">\n                      <input id="setting_auto_refresh" type="checkbox" ng-model="$ctrl.settings.repeater.autoRefresh" ng-change="$ctrl.onSettingsRepeaterChange()" />\n                      <label for="setting_auto_refresh"></label>\n                    </div>\n                    <div ng-if="$ctrl.settings.repeater.autoRefresh">\n                      <label for="settings_refresh_rate">\n                        \n                      </label>\n                      <select id="settings_refresh_rate" ng-model="$ctrl.settings.repeater.refreshRate" ng-change="$ctrl.onSettingsRepeaterChange()" class="small-select">\n                        <option value="10">10s</option>\n                        <option value="30">30s</option>\n                        <option value="60">1min</option>\n                        <option value="120">2min</option>\n                        <option value="300">5min</option>\n                      </select>\n                      <span>\n                        <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="margin-top: 7px; display: none;"></i>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.settings.open = false;"></a>\n                </div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div class="actionBar" ng-if="!$ctrl.offlineMode" authorization="DockerImageDelete, DockerImageBuild, DockerImageLoad, DockerImageGet">\n        <div class="btn-group" authorization="DockerImageDelete">\n          <button type="button" class="btn btn-sm btn-danger" ng-disabled="$ctrl.state.selectedItemCount === 0" ng-click="$ctrl.removeAction($ctrl.state.selectedItems, false)">\n            <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>\n          </button>\n          <button\n            type="button"\n            class="btn btn-sm btn-danger dropdown-toggle"\n            data-toggle="dropdown"\n            aria-haspopup="true"\n            aria-expanded="false"\n            ng-disabled="$ctrl.state.selectedItemCount === 0"\n          >\n            <span class="caret"></span>\n            <span class="sr-only">Toggle Dropdown</span>\n          </button>\n          <ul class="dropdown-menu">\n            <li><a ng-click="$ctrl.forceRemoveAction($ctrl.state.selectedItems, true)" ng-disabled="$ctrl.state.selectedItemCount === 0"></a></li>\n          </ul>\n        </div>\n        <button type="button" class="btn btn-sm btn-primary" ui-sref="docker.images.build" authorization="DockerImageBuild">\n          <i class="fa fa-plus space-right" aria-hidden="true"></i>\n        </button>\n        <div class="btn-group">\n          <button type="button" class="btn btn-sm btn-primary" ng-disabled="$ctrl.exportInProgress" ui-sref="docker.images.import" authorization="DockerImageLoad">\n            <i class="fa fa-upload space-right" aria-hidden="true"></i>\n          </button>\n          <button\n            type="button"\n            class="btn btn-sm btn-primary"\n            ng-disabled="$ctrl.state.selectedItemCount === 0 || $ctrl.exportInProgress"\n            ng-click="$ctrl.downloadAction($ctrl.state.selectedItems)"\n            button-spinner="$ctrl.exportInProgress"\n            authorization="DockerImageGet"\n          >\n            <i class="fa fa-download space-right" aria-hidden="true"></i>\n            <span ng-hide="$ctrl.exportInProgress"></span>\n            <span ng-show="$ctrl.exportInProgress">Export in progress...</span>\n          </button>\n        </div>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover table-filters nowrap-cells">\n          <thead>\n            <tr>\n              <th uib-dropdown dropdown-append-to-body auto-close="disabled" popover-placement="bottom-left" is-open="$ctrl.filters.state.open">\n                <span class="md-checkbox" ng-if="!$ctrl.offlineMode">\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.changeOrderBy(\'Id\')">\n                  Id\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Id\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Id\' && $ctrl.state.reverseOrder"></i>\n                </a>\n                <div>\n                  <span uib-dropdown-toggle class="table-filter" ng-if="!$ctrl.filters.state.enabled"> <i class="fa fa-filter" aria-hidden="true"></i></span>\n                  <span uib-dropdown-toggle class="table-filter filter-active" ng-if="$ctrl.filters.state.enabled"> <i class="fa fa-check" aria-hidden="true"></i></span>\n                </div>\n                <div class="dropdown-menu" uib-dropdown-menu>\n                  <div class="tableMenu">\n                    <div class="menuHeader">\n                      \n                    </div>\n                    <div class="menuContent">\n                      <div class="md-checkbox">\n                        <input id="filter_usage_usedImages" type="checkbox" ng-model="$ctrl.filters.state.showUsedImages" ng-change="$ctrl.onstateFilterChange()" />\n                        <label for="filter_usage_usedImages">Used images</label>\n                      </div>\n                      <div class="md-checkbox">\n                        <input id="filter_usage_unusedImages" type="checkbox" ng-model="$ctrl.filters.state.showUnusedImages" ng-change="$ctrl.onstateFilterChange()" />\n                        <label for="filter_usage_unusedImages"></label>\n                      </div>\n                    </div>\n                    <div>\n                      <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.filters.state.open = false;"></a>\n                    </div>\n                  </div>\n                </div>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'RepoTags\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'RepoTags\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'RepoTags\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'VirtualSize\')">\n                  Size\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'VirtualSize\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'VirtualSize\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Created\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Created\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Created\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th ng-if="$ctrl.showHostColumn">\n                <a ng-click="$ctrl.changeOrderBy(\'NodeName\')">\n                                    <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'NodeName\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'NodeName\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter: $ctrl.applyFilters | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>\n                <span class="md-checkbox" ng-if="!$ctrl.offlineMode">\n                  <input id="select_{{ $index }}" type="checkbox" ng-model="item.Checked" ng-click="$ctrl.selectItem(item, $event)" />\n                  <label for="select_{{ $index }}"></label>\n                </span>\n                <a ng-if="!$ctrl.offlineMode" ui-sref="docker.images.image({ id: item.Id, nodeName: item.NodeName })" class="monospaced" title="{{ item.Id }}">{{\n                  item.Id | truncate: 40\n                }}</a>\n                <span ng-if="$ctrl.offlineMode">{{ item.Id | truncate: 40 }}</span>\n                <span style="margin-left: 10px;" class="label label-warning image-tag" ng-if="::item.ContainerCount === 0"></span>\n              </td>\n              <td>\n                <span class="label label-primary image-tag" ng-repeat="tag in (item | repotags) track by $index">{{ tag }}</span>\n              </td>\n              <td>{{ item.VirtualSize | humansize }}</td>\n              <td>{{ item.Created | getisodatefromtimestamp }}</td>\n              <td ng-if="$ctrl.showHostColumn">{{ item.NodeName ? item.NodeName : \'-\' }}</td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="5" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="5" class="text-center text-muted">No image available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.docker").controller("ImagesDatatableController",["$scope","$controller","DatatableService",function(e,t,n){angular.extend(this,t("GenericDatatableController",{$scope:e}));var a=this;this.filters={state:{open:!1,enabled:!1,showUsedImages:!0,showUnusedImages:!0}},this.applyFilters=function(e){var t=e,n=a.filters;return!!(0===t.ContainerCount&&n.state.showUnusedImages||0!==t.ContainerCount&&n.state.showUsedImages)},this.onstateFilterChange=function(){var e=this.filters.state,t=!1;e.showUsedImages&&e.showUnusedImages||(t=!0),this.filters.state.enabled=t,n.setDataTableFilters(this.tableKey,this.filters)},this.$onInit=function(){this.setDefaults(),this.prepareTableFromDataset(),this.state.orderBy=this.orderBy;var e=n.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=n.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var a=n.getDataTableFilters(this.tableKey);null!==a&&(this.filters=a),this.filters&&this.filters.state&&(this.filters.state.open=!1);var r=n.getDataTableSettings(this.tableKey);null!==r&&(this.settings=r,this.settings.open=!1),this.onSettingsRepeaterChange()}}])},function(e,t,n){var a=n(918);angular.module("portainer.docker").component("macvlanNodesDatatable",{templateUrl:a,controller:"GenericDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",showIpAddressColumn:"<",accessToNodeDetails:"<",state:"="}})},function(e,t){var n="app/docker/components/datatables/macvlan-nodes-datatable/macvlanNodesDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <span class="md-checkbox">\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.changeOrderBy(\'Hostname\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Hostname\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Hostname\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Role\')">\n                  Role\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Role\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Role\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'EngineVersion\')">\n                  Engine\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'EngineVersion\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'EngineVersion\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th ng-if="$ctrl.showIpAddressColumn">\n                <a ng-click="$ctrl.changeOrderBy(\'Addr\')">\n                  IP \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Addr\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Addr\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Status\')">\n                  Status\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Status\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Status\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>\n                <span class="md-checkbox">\n                  <input id="select_{{ $index }}" type="checkbox" ng-model="item.Checked" ng-click="$ctrl.selectItem(item, $event)" />\n                  <label for="select_{{ $index }}"></label>\n                </span>\n                <a ui-sref="docker.nodes.node({id: item.Id})" ng-if="$ctrl.accessToNodeDetails">{{ item.Hostname }}</a>\n                <span ng-if="!$ctrl.accessToNodeDetails">{{ item.Hostname }}</span>\n              </td>\n              <td>{{ item.Role }}</td>\n              <td>{{ item.EngineVersion }}</td>\n              <td ng-if="$ctrl.showIpAddressColumn">{{ item.Addr }}</td>\n              <td>\n                <span class="label label-{{ item.Status | nodestatusbadge }}">{{ item.Status }}</span>\n              </td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="7" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="7" class="text-center text-muted">No node available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(16),r=n(920);angular.module("portainer.docker").directive("networkRowContent",[function(){return{templateUrl:r,restrict:"A",transclude:!0,scope:{item:"<",parentCtrl:"<",allowCheckbox:"<",allowExpand:"<"},controller:["$scope",function(e){e.RCO=a.ResourceControlOwnership}]}}])},function(e,t){var n="app/docker/components/datatables/networks-datatable/network-row-content/networkRowContent.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<td ng-if="allowCheckbox">\n  <span class="md-checkbox" ng-if="!parentCtrl.offlineMode" authorization="DockerNetworkDelete, DockerNetworkCreate">\n    <input\n      id="select_{{ $index }}"\n      type="checkbox"\n      ng-model="item.Checked"\n      ng-click="parentCtrl.selectItem(item, $event); $event.stopPropagation()"\n      ng-disabled="parentCtrl.disableRemove(item)"\n    />\n    <label for="select_{{ $index }}"></label>\n  </span>\n  <a ng-if="parentCtrl.itemCanExpand(item)"\n    ><i ng-class="{ \'fas fa-angle-down\': item.Expanded, \'fas fa-angle-right\': !item.Expanded }" class="space-right" aria-hidden="true"></i\n  ></a>\n</td>\n<td ng-if="!allowCheckbox"></td>\n<td>\n  <a ng-if="!parentCtrl.offlineMode" ui-sref="docker.networks.network({ id: item.Id, nodeName: item.NodeName })" title="{{ item.Name }}">{{ item.Name | truncate: 40 }}</a>\n  <span ng-if="parentCtrl.offlineMode">{{ item.Name | truncate: 40 }}</span>\n  <span style="margin-left: 10px;" class="label label-info image-tag space-left" ng-if="item.ResourceControl.System">System</span>\n</td>\n<td>{{ item.StackName ? item.StackName : \'-\' }}</td>\n<td>{{ item.Driver }}</td>\n<td>{{ item.Attachable }}</td>\n<td>{{ item.IPAM.Driver }}</td>\n<td>{{ item.IPAM.IPV4Configs[0].Subnet ? item.IPAM.IPV4Configs[0].Subnet : \'-\' }}</td>\n<td>{{ item.IPAM.IPV4Configs[0].Gateway ? item.IPAM.IPV4Configs[0].Gateway : \'-\' }}</td>\n<td>{{ item.IPAM.IPV6Configs[0].Subnet ? item.IPAM.IPV6Configs[0].Subnet : \'-\' }}</td>\n<td>{{ item.IPAM.IPV6Configs[0].Gateway ? item.IPAM.IPV6Configs[0].Gateway : \'-\' }}</td>\n<td ng-if="parentCtrl.showHostColumn">{{ item.NodeName ? item.NodeName : \'-\' }}</td>\n<td>\n  <span>\n    <i ng-class="item.ResourceControl.Ownership | ownershipicon" aria-hidden="true"></i>\n    {{ item.ResourceControl.Ownership ? item.ResourceControl.Ownership : item.ResourceControl.Ownership = RCO.ADMINISTRATORS }}\n  </span>\n</td>\n')}]),e.exports=n},function(e,t,n){var a=n(922);angular.module("portainer.docker").component("networksDatatable",{templateUrl:a,controller:"NetworksDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",showHostColumn:"<",removeAction:"<",offlineMode:"<",refreshCallback:"<"}})},function(e,t){var n="app/docker/components/datatables/networks-datatable/networksDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n        <div class="settings">\n          <span class="setting" ng-class="{ \'setting-active\': $ctrl.settings.open }" uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.settings.open">\n            <span uib-dropdown-toggle><i class="fa fa-cog" aria-hidden="true"></i> </span>\n            <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n              <div class="tableMenu">\n                <div class="menuHeader">\n                  \n                </div>\n                <div class="menuContent">\n                  <div>\n                    <div class="md-checkbox">\n                      <input id="setting_auto_refresh" type="checkbox" ng-model="$ctrl.settings.repeater.autoRefresh" ng-change="$ctrl.onSettingsRepeaterChange()" />\n                      <label for="setting_auto_refresh"></label>\n                    </div>\n                    <div ng-if="$ctrl.settings.repeater.autoRefresh">\n                      <label for="settings_refresh_rate">\n                        \n                      </label>\n                      <select id="settings_refresh_rate" ng-model="$ctrl.settings.repeater.refreshRate" ng-change="$ctrl.onSettingsRepeaterChange()" class="small-select">\n                        <option value="10">10s</option>\n                        <option value="30">30s</option>\n                        <option value="60">1min</option>\n                        <option value="120">2min</option>\n                        <option value="300">5min</option>\n                      </select>\n                      <span>\n                        <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="margin-top: 7px; display: none;"></i>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.settings.open = false;"></a>\n                </div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div class="actionBar" ng-if="!$ctrl.offlineMode" authorization="DockerNetworkDelete, DockerNetworkCreate">\n        <button\n          type="button"\n          class="btn btn-sm btn-danger"\n          authorization="DockerNetworkDelete"\n          ng-disabled="$ctrl.state.selectedItemCount === 0"\n          ng-click="$ctrl.removeAction($ctrl.state.selectedItems)"\n        >\n          <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>\n        </button>\n        <button type="button" class="btn btn-sm btn-primary" ui-sref="docker.networks.new" authorization="DockerNetworkCreate">\n          <i class="fa fa-plus space-right" aria-hidden="true"></i>\n        </button>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th style="width: 55px;">\n                <span class="md-checkbox" ng-if="!$ctrl.offlineMode" authorization="DockerNetworkDelete, DockerNetworkCreate">\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.expandAll()" ng-if="$ctrl.hasExpandableItems()">\n                  <i ng-class="{ \'fas fa-angle-down\': $ctrl.state.expandAll, \'fas fa-angle-right\': !$ctrl.state.expandAll }" aria-hidden="true"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'StackName\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'StackName\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'StackName\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Driver\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Driver\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Driver\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Attachable\')">\n                  Attachable\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Attachable\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Attachable\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'IPAM.Driver\')">\n                  IPAM \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'IPAM.Driver\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'IPAM.Driver\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'IPAM.IPV4Configs[0].Subnet\')">\n                  IPV4 IPAM \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'IPAM.IPV4Configs[0].Subnet\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'IPAM.IPV4Configs[0].Subnet\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'IPAM.IPV4Configs[0].Gateway\')">\n                  IPV4 IPAM \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'IPAM.IPV4Configs[0].Gateway\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'IPAM.IPV4Configs[0].Gateway\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'IPAM.IPV6Configs[0].Subnet\')">\n                  IPV6 IPAM \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'IPAM.IPV6Configs[0].Subnet\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'IPAM.IPV6Configs[0].Subnet\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'IPAM.IPV6Configs[0].Gateway\')">\n                  IPV6 IPAM \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'IPAM.IPV6Configs[0].Gateway\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'IPAM.IPV6Configs[0].Gateway\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th ng-if="$ctrl.showHostColumn">\n                <a ng-click="$ctrl.changeOrderBy(\'NodeName\')">\n                                    <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'NodeName\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'NodeName\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'ResourceControl.Ownership\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'ResourceControl.Ownership\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'ResourceControl.Ownership\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate-start="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n              network-row-content\n              item="item"\n              parent-ctrl="$ctrl"\n              ng-click="$ctrl.expandItem(item, !item.Expanded)"\n              allow-checkbox="true"\n            >\n            </tr>\n            <tr dir-paginate-end ng-show="item.Expanded" ng-repeat="it in item.Subs" style="background: #d5e8f3;" network-row-content item="it" parent-ctrl="$ctrl"> </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="9" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="9" class="text-center text-muted">No network available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(7),r=n(5);angular.module("portainer.docker").controller("NetworksDatatableController",["$scope","$controller","NetworkHelper","DatatableService",function(e,t,n,i){angular.extend(this,t("GenericDatatableController",{$scope:e})),this.disableRemove=function(e){return n.isSystemNetwork(e)},this.state=Object.assign(this.state,{expandedItems:[]}),this.allowSelection=function(e){return!this.disableRemove(e)},this.$onInit=function(){this.setDefaults(),this.prepareTableFromDataset(),this.state.orderBy=this.orderBy;var e=i.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=i.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var n=i.getDataTableFilters(this.tableKey);null!==n&&(this.filters=n),this.filters&&this.filters.state&&(this.filters.state.open=!1);var a=i.getDataTableSettings(this.tableKey);null!==a&&(this.settings=a,this.settings.open=!1),this.onSettingsRepeaterChange()},this.expandItem=function(e,t){e.Expanded=t},this.itemCanExpand=function(e){return e.Subs.length>0},this.hasExpandableItems=function(){var e=this;return Object(r.a)(this.state.filteredDataSet,(function(t){return e.itemCanExpand(t)})).length},this.expandAll=function(){var e=this;this.state.expandAll=!this.state.expandAll,Object(a.a)(this.state.filteredDataSet,(function(t){e.itemCanExpand(t)&&e.expandItem(t,e.state.expandAll)}))}}])},function(e,t,n){var a=n(925);angular.module("portainer.docker").component("nodeTasksDatatable",{templateUrl:a,controller:"GenericDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<"}})},function(e,t){var n="app/docker/components/datatables/node-tasks-datatable/nodeTasksDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Id\')">\n                  Id\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Id\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Id\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Status\')">\n                  Status\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Status\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Status\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Slot\')">\n                  Slot\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Slot\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Slot\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Spec.ContainerSpec.Image\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Spec.ContainerSpec.Image\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Spec.ContainerSpec.Image\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Updated\')">\n                  Last Update\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Updated\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Updated\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n            >\n              <td\n                ><a ui-sref="docker.tasks.task({id: item.Id})" class="monospaced">{{ item.Id }}</a></td\n              >\n              <td\n                ><span class="label label-{{ item.Status.State | taskstatusbadge }}">{{ item.Status.State }}</span></td\n              >\n              <td>{{ item.Slot ? item.Slot : \'-\' }}</td>\n              <td>{{ item.Spec.ContainerSpec.Image | hideshasum }}</td>\n              <td>{{ item.Updated | getisodate }}</td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="5" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="5" class="text-center text-muted">No task available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(927);angular.module("portainer.docker").component("nodesDatatable",{templateUrl:a,controller:"GenericDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",showIpAddressColumn:"<",accessToNodeDetails:"<",refreshCallback:"<"}})},function(e,t){var n="app/docker/components/datatables/nodes-datatable/nodesDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n        <div class="settings">\n          <span class="setting" ng-class="{ \'setting-active\': $ctrl.settings.open }" uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.settings.open">\n            <span uib-dropdown-toggle><i class="fa fa-cog" aria-hidden="true"></i> </span>\n            <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n              <div class="tableMenu">\n                <div class="menuHeader">\n                  \n                </div>\n                <div class="menuContent">\n                  <div>\n                    <div class="md-checkbox">\n                      <input id="setting_auto_refresh" type="checkbox" ng-model="$ctrl.settings.repeater.autoRefresh" ng-change="$ctrl.onSettingsRepeaterChange()" />\n                      <label for="setting_auto_refresh"></label>\n                    </div>\n                    <div ng-if="$ctrl.settings.repeater.autoRefresh">\n                      <label for="settings_refresh_rate">\n                        \n                      </label>\n                      <select id="settings_refresh_rate" ng-model="$ctrl.settings.repeater.refreshRate" ng-change="$ctrl.onSettingsRepeaterChange()" class="small-select">\n                        <option value="10">10s</option>\n                        <option value="30">30s</option>\n                        <option value="60">1min</option>\n                        <option value="120">2min</option>\n                        <option value="300">5min</option>\n                      </select>\n                      <span>\n                        <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="margin-top: 7px; display: none;"></i>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.settings.open = false;"></a>\n                </div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Hostname\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Hostname\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Hostname\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Role\')">\n                  Role\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Role\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Role\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'CPUs\')">\n                  CPU\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'CPUs\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'CPUs\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Memory\')">\n                  Memory\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Memory\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Memory\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'EngineVersion\')">\n                  Engine\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'EngineVersion\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'EngineVersion\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th ng-if="$ctrl.showIpAddressColumn">\n                <a ng-click="$ctrl.changeOrderBy(\'Addr\')">\n                  IP \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Addr\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Addr\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Status\')">\n                  Status\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Status\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Status\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Availability\')">\n                  Availability\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Availability\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Availability\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>\n                <a ui-sref="docker.nodes.node({id: item.Id})" ng-if="$ctrl.accessToNodeDetails">{{ item.Name || item.Hostname }}</a>\n                <span ng-if="!$ctrl.accessToNodeDetails">{{ item.Name || item.Hostname }}</span>\n              </td>\n              <td>{{ item.Role }}</td>\n              <td>{{ item.CPUs / 1000000000 }}</td>\n              <td>{{ item.Memory | humansize }}</td>\n              <td>{{ item.EngineVersion }}</td>\n              <td ng-if="$ctrl.showIpAddressColumn">{{ item.Addr }}</td>\n              <td\n                ><span class="label label-{{ item.Status | nodestatusbadge }}">{{ item.Status }}</span></td\n              >\n              <td\n                ><span class="label label-{{ item.Availability | dockerNodeAvailabilityBadge }}">{{ item.Availability }}</span></td\n              >\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="7" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="7" class="text-center text-muted">No node available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(929);angular.module("portainer.docker").component("secretsDatatable",{templateUrl:a,controller:"GenericDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",removeAction:"<",refreshCallback:"<"}})},function(e,t){var n="app/docker/components/datatables/secrets-datatable/secretsDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n        <div class="settings">\n          <span class="setting" ng-class="{ \'setting-active\': $ctrl.settings.open }" uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.settings.open">\n            <span uib-dropdown-toggle><i class="fa fa-cog" aria-hidden="true"></i> </span>\n            <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n              <div class="tableMenu">\n                <div class="menuHeader">\n                  \n                </div>\n                <div class="menuContent">\n                  <div>\n                    <div class="md-checkbox">\n                      <input id="setting_auto_refresh" type="checkbox" ng-model="$ctrl.settings.repeater.autoRefresh" ng-change="$ctrl.onSettingsRepeaterChange()" />\n                      <label for="setting_auto_refresh"></label>\n                    </div>\n                    <div ng-if="$ctrl.settings.repeater.autoRefresh">\n                      <label for="settings_refresh_rate">\n                        \n                      </label>\n                      <select id="settings_refresh_rate" ng-model="$ctrl.settings.repeater.refreshRate" ng-change="$ctrl.onSettingsRepeaterChange()" class="small-select">\n                        <option value="10">10s</option>\n                        <option value="30">30s</option>\n                        <option value="60">1min</option>\n                        <option value="120">2min</option>\n                        <option value="300">5min</option>\n                      </select>\n                      <span>\n                        <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="margin-top: 7px; display: none;"></i>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.settings.open = false;"></a>\n                </div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div class="actionBar" authorization="DockerSecretDelete, DockerSecretCreate">\n        <button\n          type="button"\n          class="btn btn-sm btn-danger"\n          authorization="DockerSecretDelete"\n          ng-disabled="$ctrl.state.selectedItemCount === 0"\n          ng-click="$ctrl.removeAction($ctrl.state.selectedItems)"\n        >\n          <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>\n        </button>\n        <button type="button" class="btn btn-sm btn-primary" ui-sref="docker.secrets.new" authorization="DockerSecretCreate">\n          <i class="fa fa-plus space-right" aria-hidden="true"></i>Add secret\n        </button>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <span class="md-checkbox" authorization="DockerSecretDelete, DockerSecretCreate">\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'CreatedAt\')">\n                  Creation \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'CreatedAt\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'CreatedAt\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'ResourceControl.Ownership\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'ResourceControl.Ownership\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'ResourceControl.Ownership\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>\n                <span class="md-checkbox" authorization="DockerSecretDelete, DockerSecretCreate">\n                  <input id="select_{{ $index }}" type="checkbox" ng-model="item.Checked" ng-click="$ctrl.selectItem(item, $event)" />\n                  <label for="select_{{ $index }}"></label>\n                </span>\n                <a ui-sref="docker.secrets.secret({id: item.Id})">{{ item.Name }}</a>\n              </td>\n              <td>{{ item.CreatedAt | getisodate }}</td>\n              <td>\n                <span>\n                  <i ng-class="item.ResourceControl.Ownership | ownershipicon" aria-hidden="true"></i>\n                  {{ item.ResourceControl.Ownership ? item.ResourceControl.Ownership : item.ResourceControl.Ownership = $ctrl.RCO.ADMINISTRATORS }}\n                </span>\n              </td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="3" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="3" class="text-center text-muted">No secret available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(931);angular.module("portainer.docker").component("serviceTasksDatatable",{templateUrl:a,controller:"ServiceTasksDatatableController",bindings:{dataset:"<",serviceId:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",nodes:"<",agentProxy:"<",textFilter:"=",showTaskLogsButton:"<"}})},function(e,t){var n="app/docker/components/datatables/service-tasks-datatable/serviceTasksDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div style="background-color: #d5e8f3; padding: 2px;">\n  <table class="table table-condensed table-hover nowrap-cells">\n    <thead style="background-color: #e7f6ff;">\n      <tr>\n        <th uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.filters.state.open" style="width: 10%;">\n          <a ng-click="$ctrl.changeOrderBy(\'Status.State\')">\n            Status\n            <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Status.State\' && !$ctrl.state.reverseOrder"></i>\n            <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Status.State\' && $ctrl.state.reverseOrder"></i>\n          </a>\n          <span class="space-left">\n            <span uib-dropdown-toggle class="table-filter" ng-if="!$ctrl.filters.state.enabled"> <i class="fa fa-filter" aria-hidden="true"></i></span>\n            <span uib-dropdown-toggle class="table-filter filter-active" ng-if="$ctrl.filters.state.enabled"> <i class="fa fa-check" aria-hidden="true"></i></span>\n          </span>\n          <div class="dropdown-menu" uib-dropdown-menu>\n            <div class="tableMenu">\n              <div class="menuHeader">\n                Filter by state\n              </div>\n              <div class="menuContent">\n                <div class="md-checkbox" ng-repeat="filter in $ctrl.filters.state.values track by $index">\n                  <input id="filter_state_{{ $ctrl.serviceId }}_{{ $index }}" type="checkbox" ng-model="filter.display" ng-change="$ctrl.onStateFilterChange()" />\n                  <label for="filter_state_{{ $ctrl.serviceId }}_{{ $index }}">{{ filter.label }}</label>\n                </div>\n              </div>\n              <div>\n                <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.filters.state.open = false;"></a>\n              </div>\n            </div>\n          </div>\n        </th>\n        <th style="width: 22%;">Task</th>\n        <th></th>\n        <th>\n          <a ng-click="$ctrl.changeOrderBy(\'Slot\')">\n            Slot\n            <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Slot\' && !$ctrl.state.reverseOrder"></i>\n            <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Slot\' && $ctrl.state.reverseOrder"></i>\n          </a>\n        </th>\n        <th>\n          <a ng-click="$ctrl.changeOrderBy(\'NodeId\')">\n            Node\n            <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'NodeId\' && !$ctrl.state.reverseOrder"></i>\n            <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'NodeId\' && $ctrl.state.reverseOrder"></i>\n          </a>\n        </th>\n        <th>\n          <a ng-click="$ctrl.changeOrderBy(\'Updated\')">\n            Last Update\n            <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Updated\' && !$ctrl.state.reverseOrder"></i>\n            <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Updated\' && $ctrl.state.reverseOrder"></i>\n          </a>\n        </th>\n      </tr>\n    </thead>\n    <tbody style="background-color: #f1f9fd;">\n      <tr\n        ng-repeat="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter: $ctrl.applyFilters | filter:$ctrl.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder))"\n      >\n        <td class="text-center">\n          <span class="label label-{{ item.Status.State | taskstatusbadge }} space-right">{{ item.Status.State }}</span>\n        </td>\n        <td>\n          <a ng-if="!$ctrl.agentProxy || !item.Container" ui-sref="docker.tasks.task({id: item.Id})" class="monospaced">{{ item.Id }}</a>\n          <a ng-if="$ctrl.agentProxy && item.Container" ui-sref="docker.containers.container({ id: item.Container.Id, nodeName: item.Container.NodeName })" class="monospaced">{{\n            item.Id\n          }}</a>\n        </td>\n        <td>\n          <container-quick-actions\n            ng-if="!$ctrl.agentProxy || !item.Container"\n            container-id="item.ContainerId"\n            task-id="item.Id"\n            status="item.Status.State"\n            state="$ctrl.state"\n          ></container-quick-actions>\n          <container-quick-actions\n            ng-if="$ctrl.agentProxy && item.Container"\n            container-id="item.Container.Id"\n            node-name="item.Container.NodeName"\n            status="item.Status.State"\n            state="$ctrl.state"\n          ></container-quick-actions>\n        </td>\n        <td>{{ item.Slot ? item.Slot : \'-\' }}</td>\n        <td>{{ item.NodeId | tasknodename: $ctrl.nodes }}</td>\n        <td>{{ item.Updated | getisodate }}</td>\n      </tr>\n      <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n        <td colspan="5" class="text-center text-muted">No task matching filter.</td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(110);angular.module("portainer.docker").controller("ServiceTasksDatatableController",["$scope","$controller","DatatableService",function(e,t,n){angular.extend(this,t("GenericDatatableController",{$scope:e}));var r=this;this.state=Object.assign(this.state,{showQuickActionStats:!0,showQuickActionLogs:!0,showQuickActionConsole:!0,showQuickActionInspect:!0,showQuickActionExec:!0,showQuickActionAttach:!1}),this.filters={state:{open:!1,enabled:!1,values:[]}},this.applyFilters=function(e){for(var t=r.filters,n=0;n<t.state.values.length;n++){var a=t.state.values[n];if(e.Status.State===a.label&&a.display)return!0}return!1},this.onStateFilterChange=function(){for(var e=this.filters.state.values,t=!1,n=0;n<e.length;n++){e[n].display||(t=!0)}this.filters.state.enabled=t},this.prepareTableFromDataset=function(){for(var e=[],t=0;t<this.dataset.length;t++){var n=this.dataset[t];e.push({label:n.Status.State,display:!0})}this.filters.state.values=Object(a.a)(e,"label")},this.$onInit=function(){this.setDefaults(),this.prepareTableFromDataset(),this.state.orderBy=this.orderBy;var e=n.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=n.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var a=n.getDataTableFilters(this.tableKey);null!==a&&(this.filters=a),this.filters&&this.filters.state&&(this.filters.state.open=!1);var r=n.getDataTableSettings(this.tableKey);null!==r&&(this.settings=r,this.settings.open=!1),this.onSettingsRepeaterChange()}}])},function(e,t,n){var a=n(934);angular.module("portainer.docker").component("servicesDatatableActions",{templateUrl:a,controller:"ServicesDatatableActionsController",bindings:{selectedItems:"=",selectedItemCount:"=",showUpdateAction:"<",showAddAction:"<"}})},function(e,t){var n="app/docker/components/datatables/services-datatable/actions/servicesDatatableActions.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="actionBar" authorization="DockerServiceUpdate, DockerServiceDelete, DockerServiceCreate">\n  <div class="btn-group" role="group" aria-label="...">\n    <button\n      ng-if="$ctrl.showUpdateAction"\n      type="button"\n      class="btn btn-sm btn-primary"\n      authorization="DockerServiceUpdate"\n      ng-disabled="$ctrl.selectedItemCount === 0"\n      ng-click="$ctrl.updateAction($ctrl.selectedItems)"\n    >\n      <i class="fa fa-sync space-right" aria-hidden="true"></i>Update\n    </button>\n    <button\n      type="button"\n      class="btn btn-sm btn-danger"\n      authorization="DockerServiceDelete"\n      ng-disabled="$ctrl.selectedItemCount === 0"\n      ng-click="$ctrl.removeAction($ctrl.selectedItems)"\n    >\n      <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>\n    </button>\n  </div>\n  <button type="button" class="btn btn-sm btn-primary" ui-sref="docker.services.new" ng-if="$ctrl.showAddAction" authorization="DockerServiceCreate">\n    <i class="fa fa-plus space-right" aria-hidden="true"></i>Add service\n  </button>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.docker").controller("ServicesDatatableActionsController",["$q","$state","ServiceService","ServiceHelper","Notifications","ModalService","ImageHelper","WebhookService","EndpointProvider",function(e,t,n,a,r,i,s,o,l){this.scaleAction=function(e){var i=a.serviceToConfig(e.Model);i.Mode.Replicated.Replicas=e.Replicas,n.update(e,i).then((function(){r.success("Service successfully scaled","New replica count: "+e.Replicas),t.reload()})).catch((function(t){r.error("",t,""),e.Scale=!1,e.Replicas=e.ReplicaCount}))},this.removeAction=function(a){i.confirmDeletion("",(function(i){var s,c;i&&(c=(s=a).length,angular.forEach(s,(function(a){n.remove(a).then((function(){return o.webhooks(a.Id,l.endpointID())})).then((function(t){return e.when(0!==t.length&&o.deleteWebhook(t[0].Id))})).then((function(){r.success("Service successfully",a.Name)})).catch((function(e){r.error("",e,"")})).finally((function(){0==--c&&t.reload()}))})))}))},this.updateAction=function(e){i.confirmServiceForceUpdate("Do you want to force an update of the selected service(s)? All the tasks associated to the selected service(s) will be recreated.",(function(i){if(i){var o=!1;i[0]&&(o=!0),function(e,i){var o=e.length;angular.forEach(e,(function(e){var l=a.serviceToConfig(e.Model);i&&(l.TaskTemplate.ContainerSpec.Image=s.removeDigestFromRepository(l.TaskTemplate.ContainerSpec.Image)),l.TaskTemplate.ForceUpdate++,n.update(e,l).then((function(){r.success("Service successfully updated",e.Name)})).catch((function(t){r.error("",t,"",e.Name)})).finally((function(){0===--o&&t.reload()}))}))}(e,o)}}))}}])},function(e,t,n){var a=n(937);angular.module("portainer.docker").component("servicesDatatable",{templateUrl:a,controller:"ServicesDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",nodes:"<",agentProxy:"<",showUpdateAction:"<",showAddAction:"<",showStackColumn:"<",showTaskLogsButton:"<",refreshCallback:"<"}})},function(e,t){var n="app/docker/components/datatables/services-datatable/servicesDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n        <div class="settings">\n          <span class="setting" ng-class="{ \'setting-active\': $ctrl.settings.open }" uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.settings.open">\n            <span uib-dropdown-toggle><i class="fa fa-cog" aria-hidden="true"></i> </span>\n            <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n              <div class="tableMenu">\n                <div class="menuHeader">\n                  \n                </div>\n                <div class="menuContent">\n                  <div>\n                    <div class="md-checkbox">\n                      <input id="setting_auto_refresh" type="checkbox" ng-model="$ctrl.settings.repeater.autoRefresh" ng-change="$ctrl.onSettingsRepeaterChange()" />\n                      <label for="setting_auto_refresh"></label>\n                    </div>\n                    <div ng-if="$ctrl.settings.repeater.autoRefresh">\n                      <label for="settings_refresh_rate">\n                        \n                      </label>\n                      <select id="settings_refresh_rate" ng-model="$ctrl.settings.repeater.refreshRate" ng-change="$ctrl.onSettingsRepeaterChange()" class="small-select">\n                        <option value="10">10s</option>\n                        <option value="30">30s</option>\n                        <option value="60">1min</option>\n                        <option value="120">2min</option>\n                        <option value="300">5min</option>\n                      </select>\n                      <span>\n                        <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="margin-top: 7px; display: none;"></i>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.settings.open = false;"></a>\n                </div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <services-datatable-actions\n        selected-items="$ctrl.state.selectedItems"\n        selected-item-count="$ctrl.state.selectedItemCount"\n        show-add-action="$ctrl.showAddAction"\n        show-update-action="$ctrl.showUpdateAction"\n      ></services-datatable-actions>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th style="width: 55px;">\n                <span class="md-checkbox" authorization="DockerServiceUpdate, DockerServiceDelete, DockerServiceCreate">\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.expandAll()">\n                  <i ng-class="{ \'fas fa-angle-down\': $ctrl.state.expandAll, \'fas fa-angle-right\': !$ctrl.state.expandAll }" aria-hidden="true"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th ng-if="$ctrl.showStackColumn">\n                <a ng-click="$ctrl.changeOrderBy(\'StackName\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'StackName\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'StackName\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Image\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Image\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Image\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Mode\')">\n                  Scheduling Mode\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Mode\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Mode\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Ports\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Ports\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Ports\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'UpdatedAt\')">\n                  Last Update\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'UpdatedAt\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'UpdatedAt\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'ResourceControl.Ownership\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'ResourceControl.Ownership\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'ResourceControl.Ownership\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              ng-click="$ctrl.expandItem(item, !item.Expanded)"\n              dir-paginate-start="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n              class="interactive"\n            >\n              <td>\n                <span class="md-checkbox" authorization="DockerServiceUpdate, DockerServiceDelete, DockerServiceCreate">\n                  <input id="select_{{ $index }}" type="checkbox" ng-model="item.Checked" ng-click="$ctrl.selectItem(item, $event); $event.stopPropagation()" />\n                  <label for="select_{{ $index }}"></label>\n                </span>\n                <a><i ng-class="{ \'fas fa-angle-down\': item.Expanded, \'fas fa-angle-right\': !item.Expanded }" class="space-right" aria-hidden="true"></i></a>\n              </td>\n              <td>\n                <a ui-sref="docker.services.service({id: item.Id})" ng-click="$event.stopPropagation()">{{ item.Name }}</a>\n              </td>\n              <td ng-if="$ctrl.showStackColumn">{{ item.StackName ? item.StackName : \'-\' }}</td>\n              <td>{{ item.Image | hideshasum }}</td>\n              <td ng-controller="ServicesDatatableActionsController as actionCtrl">\n                {{ item.Mode }}\n                <code>{{ item.Tasks | runningtaskscount }}</code> / <code>{{ item.Mode === \'replicated\' ? item.Replicas : ($ctrl.nodes | availablenodecount: item) }}</code>\n                <span ng-if="item.Mode === \'replicated\' && !item.Scale" authorization="DockerServiceUpdate">\n                  <a class="interactive" ng-click="item.Scale = true; item.ReplicaCount = item.Replicas; $event.stopPropagation();">\n                    <i class="fa fa-arrows-alt-v" aria-hidden="true"></i> Scale\n                  </a>\n                </span>\n                <span ng-if="item.Mode === \'replicated\' && item.Scale">\n                  <input\n                    class="input-sm"\n                    type="number"\n                    min="0"\n                    step="1"\n                    ng-model="item.Replicas"\n                    on-enter-key="actionCtrl.scaleAction(item)"\n                    auto-focus\n                    ng-click="$event.stopPropagation();"\n                  />\n                  <a class="interactive" ng-click="item.Scale = false; $event.stopPropagation();"><i class="fa fa-times"></i></a>\n                  <a class="interactive" ng-click="actionCtrl.scaleAction(item); $event.stopPropagation();"><i class="fa fa-check-square"></i></a>\n                </span>\n              </td>\n              <td>\n                <a\n                  ng-if="item.Ports && item.Ports.length > 0 && p.PublishedPort"\n                  ng-repeat="p in item.Ports"\n                  class="image-tag"\n                  ng-href="http://{{ $ctrl.state.publicURL }}:{{ p.PublishedPort }}"\n                  target="_blank"\n                  ng-click="$event.stopPropagation();"\n                >\n                  <i class="fa fa-external-link-alt" aria-hidden="true"></i> {{ p.PublishedPort }}:{{ p.TargetPort }}\n                </a>\n                <span ng-if="!item.Ports || item.Ports.length === 0">-</span>\n              </td>\n              <td>{{ item.UpdatedAt | getisodate }}</td>\n              <td>\n                <span>\n                  <i ng-class="item.ResourceControl.Ownership | ownershipicon" aria-hidden="true"></i>\n                  {{ item.ResourceControl.Ownership ? item.ResourceControl.Ownership : item.ResourceControl.Ownership = $ctrl.RCO.ADMINISTRATORS }}\n                </span>\n              </td>\n            </tr>\n            <tr dir-paginate-end ng-show="item.Expanded">\n              <td></td>\n              <td colspan="8">\n                <service-tasks-datatable\n                  dataset="item.Tasks"\n                  service-id="item.Id"\n                  table-key="service-tasks"\n                  order-by="Status.State"\n                  nodes="$ctrl.nodes"\n                  agent-proxy="$ctrl.agentProxy"\n                  show-task-logs-button="$ctrl.showTaskLogsButton"\n                  text-filter="$ctrl.state.textFilter"\n                ></service-tasks-datatable>\n              </td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="8" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="8" class="text-center text-muted">No service available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(4);angular.module("portainer.docker").controller("ServicesDatatableController",["$scope","$controller","DatatableService","EndpointProvider",function(e,t,n,r){angular.extend(this,t("GenericDatatableController",{$scope:e}));var i=this;function s(e,t){Object(a.a)(t,(function(t){return e.Id===t}))&&i.expandItem(e,!0)}this.state=Object.assign(this.state,{expandAll:!1,expandedItems:[],publicURL:r.endpointPublicURL()}),this.expandAll=function(){this.state.expandAll=!this.state.expandAll;for(var e=0;e<this.state.filteredDataSet.length;e++){var t=this.state.filteredDataSet[e];this.expandItem(t,this.state.expandAll)}},this.expandItem=function(e,t){if(e.Expanded=t,e.Expanded)-1===this.state.expandedItems.indexOf(e.Id)&&this.state.expandedItems.push(e.Id);else{var a=this.state.expandedItems.indexOf(e.Id);a>-1&&this.state.expandedItems.splice(a,1)}n.setDataTableExpandedItems(this.tableKey,this.state.expandedItems)},this.expandItems=function(e){var t=0;this.state.expandedItems=e;for(var n=0;n<this.dataset.length;n++){var a=this.dataset[n];s(a,e),a.Expanded&&++t}t===this.dataset.length&&(this.state.expandAll=!0)},this.$onInit=function(){this.setDefaults(),this.prepareTableFromDataset(),this.state.orderBy=this.orderBy;var e=n.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=n.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var a=n.getDataTableFilters(this.tableKey);null!==a&&(this.filters=a),this.filters&&this.filters.state&&(this.filters.state.open=!1);var r=n.getDataTableExpandedItems(this.tableKey);null!==r&&this.expandItems(r);var i=n.getDataTableSettings(this.tableKey);null!==i&&(this.settings=i,this.settings.open=!1),this.onSettingsRepeaterChange()}}])},function(e,t,n){var a=n(940);angular.module("portainer.docker").component("tasksDatatable",{templateUrl:a,controller:"TasksDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",nodes:"<",showSlotColumn:"<",showLogsButton:"<",agentProxy:"<"}})},function(e,t){var n="app/docker/components/datatables/tasks-datatable/tasksDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Status\')">\n                  Status\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Status\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Status\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Id\')">\n                  Id\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Id\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Id\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th></th>\n              <th ng-if="$ctrl.showSlotColumn">\n                <a ng-click="$ctrl.changeOrderBy(\'Slot\')">\n                  Slot\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Slot\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Slot\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'NodeId\')">\n                  Node\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'NodeId\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'NodeId\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Updated\')">\n                  Last Update\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Updated\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Updated\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n            >\n              <td\n                ><span class="label label-{{ item.Status.State | taskstatusbadge }}">{{ item.Status.State }}</span></td\n              >\n              <td>\n                <a ng-if="!$ctrl.agentProxy || !item.Container" ui-sref="docker.tasks.task({id: item.Id})" class="monospaced"\n                  >{{ item.ServiceName }}{{ item.Slot ? \'.\' + item.Slot : \'\' }}{{ \'.\' + item.Id }}</a\n                >\n                <a ng-if="$ctrl.agentProxy && item.Container" ui-sref="docker.containers.container({ id: item.Container.Id, nodeName: item.Container.NodeName })" class="monospaced"\n                  >{{ item.ServiceName }}{{ item.Slot ? \'.\' + item.Slot : \'\' }}{{ \'.\' + item.Id }}</a\n                >\n              </td>\n              <td>\n                <container-quick-actions\n                  ng-if="!$ctrl.agentProxy || !item.Container"\n                  container-id="item.ContainerId"\n                  task-id="item.Id"\n                  status="item.Status.State"\n                  state="$ctrl.state"\n                ></container-quick-actions>\n                <container-quick-actions\n                  ng-if="$ctrl.agentProxy && item.Container"\n                  container-id="item.Container.Id"\n                  node-name="item.Container.NodeName"\n                  status="item.Status.State"\n                  state="$ctrl.state"\n                ></container-quick-actions>\n              </td>\n              <td ng-if="$ctrl.showSlotColumn">{{ item.Slot ? item.Slot : \'-\' }}</td>\n              <td>{{ item.NodeId | tasknodename: $ctrl.nodes }}</td>\n              <td>{{ item.Updated | getisodate }}</td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="6" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="6" class="text-center text-muted">No task available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.docker").controller("TasksDatatableController",["$scope","$controller","DatatableService",function(e,t,n){angular.extend(this,t("GenericDatatableController",{$scope:e})),this.state=Object.assign(this.state,{showQuickActionStats:!0,showQuickActionLogs:!0,showQuickActionExec:!0,showQuickActionInspect:!0,showQuickActionAttach:!1}),this.$onInit=function(){this.setDefaults(),this.prepareTableFromDataset(),this.state.orderBy=this.orderBy;var e=n.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=n.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var a=n.getDataTableFilters(this.tableKey);null!==a&&(this.filters=a),this.filters&&this.filters.state&&(this.filters.state.open=!1);var r=n.getDataTableSettings(this.tableKey);null!==r&&(this.settings=r,this.settings.open=!1),this.onSettingsRepeaterChange()}}])},function(e,t,n){var a=n(943);angular.module("portainer.docker").component("volumesDatatable",{templateUrl:a,controller:"VolumesDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",showHostColumn:"<",removeAction:"<",showBrowseAction:"<",offlineMode:"<",refreshCallback:"<"}})},function(e,t){var n="app/docker/components/datatables/volumes-datatable/volumesDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n        <div class="settings">\n          <span class="setting" ng-class="{ \'setting-active\': $ctrl.settings.open }" uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.settings.open">\n            <span uib-dropdown-toggle><i class="fa fa-cog" aria-hidden="true"></i> </span>\n            <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n              <div class="tableMenu">\n                <div class="menuHeader">\n                  \n                </div>\n                <div class="menuContent">\n                  <div>\n                    <div class="md-checkbox">\n                      <input id="setting_auto_refresh" type="checkbox" ng-model="$ctrl.settings.repeater.autoRefresh" ng-change="$ctrl.onSettingsRepeaterChange()" />\n                      <label for="setting_auto_refresh"></label>\n                    </div>\n                    <div ng-if="$ctrl.settings.repeater.autoRefresh">\n                      <label for="settings_refresh_rate">\n                        \n                      </label>\n                      <select id="settings_refresh_rate" ng-model="$ctrl.settings.repeater.refreshRate" ng-change="$ctrl.onSettingsRepeaterChange()" class="small-select">\n                        <option value="10">10s</option>\n                        <option value="30">30s</option>\n                        <option value="60">1min</option>\n                        <option value="120">2min</option>\n                        <option value="300">5min</option>\n                      </select>\n                      <span>\n                        <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="margin-top: 7px; display: none;"></i>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.settings.open = false;"></a>\n                </div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div class="actionBar" ng-if="!$ctrl.offlineMode" authorization="DockerVolumeDelete, DockerVolumeCreate">\n        <button\n          type="button"\n          class="btn btn-sm btn-danger"\n          authorization="DockerVolumeDelete"\n          ng-disabled="$ctrl.state.selectedItemCount === 0"\n          ng-click="$ctrl.removeAction($ctrl.state.selectedItems)"\n        >\n          <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>\n        </button>\n        <button type="button" class="btn btn-sm btn-primary" ui-sref="docker.volumes.new" authorization="DockerVolumeCreate">\n          <i class="fa fa-plus space-right" aria-hidden="true"></i>\n        </button>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover table-filters nowrap-cells">\n          <thead>\n            <tr>\n              <th uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.filters.state.open">\n                <span class="md-checkbox" ng-if="!$ctrl.offlineMode" authorization="DockerVolumeDelete, DockerVolumeCreate">\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.changeOrderBy(\'Id\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Id\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Id\' && $ctrl.state.reverseOrder"></i>\n                </a>\n                <div>\n                  <span uib-dropdown-toggle class="table-filter" ng-if="!$ctrl.filters.state.enabled"> <i class="fa fa-filter" aria-hidden="true"></i></span>\n                  <span uib-dropdown-toggle class="table-filter filter-active" ng-if="$ctrl.filters.state.enabled"> <i class="fa fa-check" aria-hidden="true"></i></span>\n                </div>\n                <div class="dropdown-menu" uib-dropdown-menu>\n                  <div class="tableMenu">\n                    <div class="menuHeader">\n                      \n                    </div>\n                    <div class="menuContent">\n                      <div class="md-checkbox">\n                        <input id="filter_usage_usedImages" type="checkbox" ng-model="$ctrl.filters.state.showUsedVolumes" ng-change="$ctrl.onstateFilterChange()" />\n                        <label for="filter_usage_usedImages">Used volumes</label>\n                      </div>\n                      <div class="md-checkbox">\n                        <input id="filter_usage_unusedImages" type="checkbox" ng-model="$ctrl.filters.state.showUnusedVolumes" ng-change="$ctrl.onstateFilterChange()" />\n                        <label for="filter_usage_unusedImages"></label>\n                      </div>\n                    </div>\n                    <div>\n                      <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.filters.state.open = false;"></a>\n                    </div>\n                  </div>\n                </div>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'StackName\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'StackName\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'StackName\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Driver\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Driver\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Driver\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Mountpoint\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Mountpoint\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Mountpoint\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'CreatedAt\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'CreatedAt\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'CreatedAt\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th ng-if="$ctrl.showHostColumn">\n                <a ng-click="$ctrl.changeOrderBy(\'NodeName\')">\n                                    <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'NodeName\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'NodeName\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'ResourceControl.Ownership\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'ResourceControl.Ownership\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'ResourceControl.Ownership\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter: $ctrl.applyFilters | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>\n                <span class="md-checkbox" ng-if="!$ctrl.offlineMode" authorization="DockerVolumeDelete, DockerVolumeCreate">\n                  <input id="select_{{ $index }}" type="checkbox" ng-model="item.Checked" ng-click="$ctrl.selectItem(item, $event)" />\n                  <label for="select_{{ $index }}"></label>\n                </span>\n                <a ng-if="!$ctrl.offlineMode" ui-sref="docker.volumes.volume({ id: item.Id, nodeName: item.NodeName })" class="monospaced" title="{{ item.Id }}">{{\n                  item.Id | truncate: 40\n                }}</a>\n                <span ng-if="$ctrl.offlineMode">{{ item.Id | truncate: 40 }}</span>\n                <btn authorization="DockerAgentBrowseList" ng-if="$ctrl.showBrowseAction && !$ctrl.offlineMode">\n                  <a ui-sref="docker.volumes.volume.browse({ id: item.Id, nodeName: item.NodeName })" class="btn btn-xs btn-primary space-left">\n                    <i class="fa fa-search"></i> browse\n                  </a>\n                </btn>\n                <span style="margin-left: 10px;" class="label label-warning image-tag space-left" ng-if="item.dangling"></span>\n              </td>\n              <td>{{ item.StackName ? item.StackName : \'-\' }}</td>\n              <td>{{ item.Driver }}</td>\n              <td>{{ item.Mountpoint | truncatelr }}</td>\n              <td>{{ item.CreatedAt | getisodate }}</td>\n              <td ng-if="$ctrl.showHostColumn">{{ item.NodeName ? item.NodeName : \'-\' }}</td>\n              <td>\n                <span>\n                  <i ng-class="item.ResourceControl.Ownership | ownershipicon" aria-hidden="true"></i>\n                  {{ item.ResourceControl.Ownership ? item.ResourceControl.Ownership : item.ResourceControl.Ownership = $ctrl.RCO.ADMINISTRATORS }}\n                </span>\n              </td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="6" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="6" class="text-center text-muted">No volume available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.docker").controller("VolumesDatatableController",["$scope","$controller","DatatableService",function(e,t,n){angular.extend(this,t("GenericDatatableController",{$scope:e}));var a=this;this.filters={state:{open:!1,enabled:!1,showUsedVolumes:!0,showUnusedVolumes:!0}},this.applyFilters=function(e){var t=e,n=a.filters;return!!(t.dangling&&n.state.showUnusedVolumes||!t.dangling&&n.state.showUsedVolumes)},this.onstateFilterChange=function(){var e=this.filters.state,t=!1;e.showUsedVolumes&&e.showUnusedVolumes||(t=!0),this.filters.state.enabled=t,n.setDataTableFilters(this.tableKey,this.filters)},this.$onInit=function(){this.setDefaults(),this.prepareTableFromDataset(),this.state.orderBy=this.orderBy;var e=n.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=n.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var a=n.getDataTableFilters(this.tableKey);null!==a&&(this.filters=a),this.filters&&this.filters.state&&(this.filters.state.open=!1);var r=n.getDataTableSettings(this.tableKey);null!==r&&(this.settings=r,this.settings.open=!1),this.onSettingsRepeaterChange()}}])},function(e,t,n){var a=n(946);angular.module("portainer.docker").component("dockerSidebarContent",{templateUrl:a,bindings:{endpointApiVersion:"<",swarmManagement:"<",standaloneManagement:"<",adminAccess:"<",offlineMode:"<",toggle:"<",currentRouteName:"<",endpointId:"<",showStacks:"<"}})},function(e,t){var n="app/docker/components/dockerSidebarContent/dockerSidebarContent.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<li class="sidebar-list">\n  <a ui-sref="docker.dashboard({endpointId: $ctrl.endpointId})" ui-sref-active="active"> <span class="menu-icon fa fa-tachometer-alt fa-fw"></span></a>\n</li>\n<li class="sidebar-list" ng-if="!$ctrl.offlineMode" authorization="DockerContainerCreate, PortainerStackCreate">\n  <a ui-sref="docker.templates({endpointId: $ctrl.endpointId})" ui-sref-active="active"> <span class="menu-icon fa fa-rocket fa-fw"></span></a>\n\n  <div class="sidebar-sublist" ng-if="$ctrl.toggle && $ctrl.currentRouteName.includes(\'docker.templates\')">\n    <a ui-sref="docker.templates.custom({endpointId: $ctrl.endpointId})" ui-sref-active="active"></a>\n  </div>\n</li>\n<li class="sidebar-list" ng-if="$ctrl.showStacks">\n  <a ui-sref="docker.stacks({endpointId: $ctrl.endpointId})" ui-sref-active="active"> <span class="menu-icon fa fa-th-list fa-fw"></span></a>\n</li>\n<li class="sidebar-list" ng-if="$ctrl.swarmManagement">\n  <a ui-sref="docker.services({endpointId: $ctrl.endpointId})" ui-sref-active="active">Services <span class="menu-icon fa fa-list-alt fa-fw"></span></a>\n</li>\n<li class="sidebar-list">\n  <a ui-sref="docker.containers({endpointId: $ctrl.endpointId})" ui-sref-active="active"> <span class="menu-icon fa fa-cubes fa-fw"></span></a>\n</li>\n<li class="sidebar-list">\n  <a ui-sref="docker.images({endpointId: $ctrl.endpointId})" ui-sref-active="active"> <span class="menu-icon fa fa-clone fa-fw"></span></a>\n</li>\n<li class="sidebar-list">\n  <a ui-sref="docker.networks({endpointId: $ctrl.endpointId})" ui-sref-active="active"> <span class="menu-icon fa fa-sitemap fa-fw"></span></a>\n</li>\n<li class="sidebar-list">\n  <a ui-sref="docker.volumes({endpointId: $ctrl.endpointId})" ui-sref-active="active"> <span class="menu-icon fa fa-hdd fa-fw"></span></a>\n</li>\n<li class="sidebar-list" ng-if="$ctrl.endpointApiVersion >= 1.3 && $ctrl.swarmManagement">\n  <a ui-sref="docker.configs({endpointId: $ctrl.endpointId})" ui-sref-active="active">Configs <span class="menu-icon fa fa-file-code fa-fw"></span></a>\n</li>\n<li class="sidebar-list" ng-if="$ctrl.endpointApiVersion >= 1.25 && $ctrl.swarmManagement">\n  <a ui-sref="docker.secrets({endpointId: $ctrl.endpointId})" ui-sref-active="active">Secrets <span class="menu-icon fa fa-user-secret fa-fw"></span></a>\n</li>\n<li class="sidebar-list" ng-if="$ctrl.standaloneManagement && $ctrl.adminAccess && !$ctrl.offlineMode">\n  <a ui-sref="docker.events({endpointId: $ctrl.endpointId})" ui-sref-active="active"> <span class="menu-icon fa fa-history fa-fw"></span></a>\n</li>\n<li class="sidebar-list" ng-if="$ctrl.swarmManagement">\n  <a ui-sref="docker.swarm({endpointId: $ctrl.endpointId})" ui-sref-active="active">Swarm <span class="menu-icon fa fa-object-group fa-fw"></span></a>\n</li>\n<li class="sidebar-list" ng-if="$ctrl.standaloneManagement">\n  <a ui-sref="docker.host({endpointId: $ctrl.endpointId})" ui-sref-active="active"> <span class="menu-icon fa fa-th fa-fw"></span></a>\n</li>\n')}]),e.exports=n},function(e,t,n){var a=n(948);angular.module("portainer.docker").component("hostOverview",{templateUrl:a,bindings:{hostDetails:"<",engineDetails:"<",devices:"<",disks:"<",isAgent:"<",offlineMode:"<",agentApiVersion:"<",refreshUrl:"@",browseUrl:"@",hostFeaturesEnabled:"<"},transclude:!0})},function(e,t){var n="app/docker/components/host-overview/host-overview.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="">\n    <a data-toggle="tooltip" title="" ui-sref="{{ $ctrl.refreshUrl }}" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content>Docker</rd-header-content>\n</rd-header>\n\n<information-panel-offline ng-if="$ctrl.offlineMode"></information-panel-offline>\n\n<host-details-panel\n  host="$ctrl.hostDetails"\n  is-browse-enabled="$ctrl.isAgent && $ctrl.agentApiVersion > 1 && !$ctrl.offlineMode && $ctrl.hostFeaturesEnabled"\n  browse-url="{{ $ctrl.browseUrl }}"\n></host-details-panel>\n\n<engine-details-panel engine="$ctrl.engineDetails"></engine-details-panel>\n\n<devices-panel ng-if="$ctrl.isAgent && $ctrl.agentApiVersion > 1 && !$ctrl.offlineMode && $ctrl.hostFeaturesEnabled" devices="$ctrl.devices"></devices-panel>\n<disks-panel ng-if="$ctrl.isAgent && $ctrl.agentApiVersion > 1 && !$ctrl.offlineMode && $ctrl.hostFeaturesEnabled" disks="$ctrl.disks"></disks-panel>\n\n<ng-transclude></ng-transclude>\n')}]),e.exports=n},function(e,t,n){var a=n(950);angular.module("portainer.docker").component("devicesPanel",{templateUrl:a,bindings:{devices:"<"}})},function(e,t){var n="app/docker/components/host-view-panels/devices-panel/devices-panel.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="row">\n  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-code" title-text="PCI Devices"></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <thead>\n            <tr>\n              <th></th>\n              <th>Vendor</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr ng-if="$ctrl.devices && $ctrl.devices.length" ng-repeat="device in $ctrl.devices">\n              <td>{{ device.Name }}</td>\n              <td>{{ device.Vendor }}</td>\n            </tr>\n            <tr ng-if="!$ctrl.devices">\n              <td colspan="2" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.devices.length === 0">\n              <td colspan="2" class="text-center text-muted">\n                No device available.\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(952);angular.module("portainer.docker").component("disksPanel",{templateUrl:a,bindings:{disks:"<"}})},function(e,t){var n="app/docker/components/host-view-panels/disks-panel/disks-panel.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="row">\n  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-code" title-text="Physical Disks"></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <thead>\n            <tr>\n              <th>Vendor</th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr ng-if="$ctrl.disks" ng-repeat="disk in $ctrl.disks">\n              <td>{{ disk.Vendor }}</td>\n              <td>{{ disk.Size | humansize }}</td>\n            </tr>\n            <tr ng-if="!$ctrl.disks">\n              <td colspan="2" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.disks.length === 0">\n              <td colspan="2" class="text-center text-muted">\n                No disks available.\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(954);angular.module("portainer.docker").component("engineDetailsPanel",{templateUrl:a,bindings:{engine:"<"}})},function(e,t){var n="app/docker/components/host-view-panels/engine-details-panel/engine-details-panel.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="row">\n  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-code" title-text=""></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <tbody>\n            <tr>\n              <td></td>\n              <td\n                >{{ $ctrl.engine.releaseVersion }} <span ng-if="$ctrl.engine.apiVersion">(API: {{ $ctrl.engine.apiVersion }})</span></td\n              >\n            </tr>\n            <tr ng-if="$ctrl.engine.rootDirectory">\n              <td></td>\n              <td>{{ $ctrl.engine.rootDirectory }}</td>\n            </tr>\n            <tr ng-if="$ctrl.engine.storageDriver">\n              <td></td>\n              <td>{{ $ctrl.engine.storageDriver }}</td>\n            </tr>\n            <tr ng-if="$ctrl.engine.loggingDriver">\n              <td></td>\n              <td>{{ $ctrl.engine.loggingDriver }}</td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ $ctrl.engine.volumePlugins | arraytostr: \', \' }}</td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ $ctrl.engine.networkPlugins | arraytostr: \', \' }}</td>\n            </tr>\n            <tr ng-if="$ctrl.engine.engineLabels.length">\n              <td>Engine Labels</td>\n              <td>{{ $ctrl.engine.engineLabels | labelsToStr: \', \' }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(956);angular.module("portainer.docker").component("hostDetailsPanel",{templateUrl:a,bindings:{host:"<",isBrowseEnabled:"<",browseUrl:"@"}})},function(e,t){var n="app/docker/components/host-view-panels/host-details-panel/host-details-panel.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="row">\n  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-code" title-text=""></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <tbody>\n            <tr>\n              <td></td>\n              <td>{{ $ctrl.host.name }}</td>\n            </tr>\n            <tr ng-if="$ctrl.host.os">\n              <td></td>\n              <td>{{ $ctrl.host.os.type }} {{ $ctrl.host.os.arch }} {{ $ctrl.host.os.name }}</td>\n            </tr>\n            <tr ng-if="$ctrl.host.kernelVersion">\n              <td></td>\n              <td>{{ $ctrl.host.kernelVersion }}</td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ $ctrl.host.totalCPU }}</td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ $ctrl.host.totalMemory | humansize }}</td>\n            </tr>\n            <tr ng-if="$ctrl.isBrowseEnabled">\n              <td colspan="2">\n                <button class="btn btn-primary btn-sm" title="Browse" ui-sref="{{ $ctrl.browseUrl }}">\n                  Browse\n                </button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.docker").controller("NodeAvailabilitySelectController",[function(){this.onChange=function(){this.onSave({availability:this.availability})}}])},function(e,t,n){var a=n(959);angular.module("portainer.docker").component("nodeAvailabilitySelect",{templateUrl:a,controller:"NodeAvailabilitySelectController",bindings:{availability:"<",originalValue:"<",onSave:"&"}})},function(e,t){var n="app/docker/components/host-view-panels/node-availability-select/node-availability-select.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="input-group input-group-sm">\n  <select name="nodeAvailability" class="selectpicker form-control" ng-model="$ctrl.availability" ng-change="$ctrl.onChange()">\n    <option value="active">Active</option>\n    <option value="pause"></option>\n    <option value="drain">Drain</option>\n  </select>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.docker").controller("NodeLabelsTableController",[function(){var e=this;e.removeLabel=function(t){null!==e.labels.splice(t,1)&&e.onChangedLabels({labels:e.labels})},e.updateLabel=function(t){t.value===t.originalValue&&t.key===t.originalKey||e.onChangedLabels({labels:e.labels})}}])},function(e,t,n){var a=n(962);angular.module("portainer.docker").component("nodeLabelsTable",{templateUrl:a,controller:"NodeLabelsTableController",bindings:{labels:"<",onChangedLabels:"&"}})},function(e,t){var n="app/docker/components/host-view-panels/node-labels-table/node-labels-table.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div ng-if="!$ctrl.labels.length">\n  There are no labels for this node.\n</div>\n\n<div class="col-sm-12 form-inline" style="padding: 0px;" ng-if="$ctrl.labels.length">\n  <div ng-repeat="label in $ctrl.labels" style="margin-top: 2px;">\n    <div class="input-group col-sm-5 input-group-sm">\n      <span class="input-group-addon">name</span>\n      <input type="text" class="form-control" ng-model="label.key" placeholder=" com.example.foo" ng-change="$ctrl.updateLabel(label)" />\n    </div>\n    <div class="input-group col-sm-5 input-group-sm">\n      <span class="input-group-addon">value</span>\n      <input type="text" class="form-control" ng-model="label.value" placeholder=" bar" ng-change="$ctrl.updateLabel(label)" />\n    </div>\n    <button class="btn btn-sm btn-danger" type="button" ng-click="$ctrl.removeLabel($index)">\n      <i class="fa fa-trash" aria-hidden="true"></i>\n    </button>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.docker").controller("SwarmNodeDetailsPanelController",["NodeService","LabelHelper","Notifications","$state",function(e,t,n,a){var r=this;r.state={managerAddress:"",hasChanges:!1},r.$onChanges=function(){if(!r.details)return;"manager"===r.details.role&&(r.state.managerAddress="("+r.details.managerAddress+")")},r.addLabel=function(){r.details.nodeLabels.push({key:"",value:"",originalValue:"",originalKey:""})},r.updateNodeLabels=function(e){r.details.nodeLabels=e,r.state.hasChanges=!0},r.updateNodeAvailability=function(e){r.details.availability=e,r.state.hasChanges=!0},r.saveChanges=function(){var i=r.originalNode,s={Name:i.Name,Availability:r.details.availability,Role:i.Role,Labels:t.fromKeyValueToLabelHash(r.details.nodeLabels),Id:i.Id,Version:i.Version};e.updateNode(s).then((function(){n.success("Node successfully updated","Node updated"),a.go("docker.nodes.node",{id:i.Id},{reload:!0})})).catch((function(e){n.error("",e,"")}))},r.cancelChanges=function(){r.details.nodeLabels=r.details.nodeLabels.filter((function(e){return e.originalValue||e.originalKey})).map((function(e){return Object.assign(e,{value:e.originalValue,key:e.originalKey})})),r.details.availability=r.originalNode.Availability,r.state.hasChanges=!1}}])},function(e,t,n){var a=n(965);angular.module("portainer.docker").component("swarmNodeDetailsPanel",{templateUrl:a,controller:"SwarmNodeDetailsPanelController",bindings:{details:"<",originalNode:"<"}})},function(e,t){var n="app/docker/components/host-view-panels/swarm-node-details-panel/swarm-node-details-panel.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="row">\n  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-code" title-text="Node Details"></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <tbody>\n            <tr ng-if="$ctrl.details.name">\n              <td>Node name</td>\n              <td>{{ $ctrl.details.name }}</td>\n            </tr>\n            <tr>\n              <td>Role</td>\n              <td>{{ $ctrl.details.role }} {{ $ctrl.state.managerAddress }}</td>\n            </tr>\n            <tr>\n              <td>Availability</td>\n              <td>\n                <node-availability-select\n                  on-save="$ctrl.updateNodeAvailability(availability)"\n                  availability="$ctrl.details.availability"\n                  original-value="$ctrl.details.availability"\n                >\n                </node-availability-select>\n              </td>\n            </tr>\n            <tr>\n              <td>Status</td>\n              <td\n                ><span class="label label-{{ $ctrl.details.status | nodestatusbadge }}">{{ $ctrl.details.status }}</span></td\n              >\n            </tr>\n            <tr>\n              <td>\n                <div class="nopadding">\n                  <a class="btn btn-default btn-sm pull-right" ng-click="$ctrl.addLabel(node)"> <i class="fa fa-plus-circle" aria-hidden="true"></i> label </a>\n                </div>\n                Node Labels\n              </td>\n              <td></td>\n            </tr>\n            <tr>\n              <td colspan="2">\n                <node-labels-table labels="$ctrl.details.nodeLabels" on-changed-labels="$ctrl.updateNodeLabels(labels)"></node-labels-table>\n              </td>\n            </tr>\n            <tr>\n              <td colspan="2">\n                <div class="btn-toolbar" role="toolbar">\n                  <div class="btn-group" role="group">\n                    <button type="button" class="btn btn-primary btn-sm" ng-disabled="!$ctrl.state.hasChanges" ng-click="$ctrl.saveChanges()">\n                      Apply changes\n                    </button>\n                    <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                      <span class="caret"></span>\n                    </button>\n                    <ul class="dropdown-menu">\n                      <li><a ng-click="$ctrl.cancelChanges()">Reset changes</a></li>\n                    </ul>\n                  </div>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(967);angular.module("portainer.docker").component("porImageRegistry",{templateUrl:a,controller:"porImageRegistryController",bindings:{model:"=",pullWarning:"<",autoComplete:"<",labelClass:"@",inputClass:"@",onImageChange:"&"},require:{form:"^form"}})},function(e,t){var n="app/docker/components/imageRegistry/porImageRegistry.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'\x3c!-- use registry --\x3e\n<div ng-if="$ctrl.model.UseRegistry">\n  <div class="form-group">\n    <label for="image_registry" class="control-label text-left" ng-class="$ctrl.labelClass">\n      \n    </label>\n    <div ng-class="$ctrl.inputClass">\n      <select\n        ng-options="registry as registry.Name for registry in $ctrl.availableRegistries track by registry.Name"\n        ng-model="$ctrl.model.Registry"\n        id="image_registry"\n        selected-item-id="ctrl.selectedItemId"\n        class="form-control"\n      ></select>\n    </div>\n    <label for="image_name" ng-class="$ctrl.labelClass" class="margin-sm-top control-label text-left"></label>\n    <div ng-class="$ctrl.inputClass" class="margin-sm-top">\n      <div class="input-group">\n        <span class="input-group-addon" id="registry-name">{{ $ctrl.displayedRegistryURL() }}</span>\n        <input\n          type="text"\n          class="form-control"\n          aria-describedby="registry-name"\n          uib-typeahead="image for image in $ctrl.availableImages | filter:$viewValue | limitTo:5"\n          ng-model="$ctrl.model.Image"\n          name="image_name"\n          placeholder=" myImage:myTag"\n          ng-change="$ctrl.onImageChange()"\n          required\n        />\n      </div>\n    </div>\n  </div>\n</div>\n\x3c!-- ! use registry --\x3e\n\x3c!-- don\'t use registry --\x3e\n<div ng-if="!$ctrl.model.UseRegistry">\n  <div class="form-group">\n    <label for="image_name" ng-class="$ctrl.labelClass" class="control-label text-left"\n      >\n      <portainer-tooltip position="bottom" message="Image and repository should be publicly available."></portainer-tooltip>\n    </label>\n    <div ng-class="$ctrl.inputClass">\n      <input type="text" class="form-control" ng-model="$ctrl.model.Image" name="image_name" placeholder=" registry:port/myImage:myTag" required />\n    </div>\n  </div>\n</div>\n\x3c!-- ! don\'t use registry --\x3e\n\x3c!-- info message --\x3e\n<div class="form-group" ng-show="$ctrl.form.image_name.$invalid">\n  <div class="col-sm-12 small text-warning">\n    <div ng-messages="$ctrl.form.image_name.$error">\n      <p ng-message="required"\n        ><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> \n        <span ng-if="$ctrl.canPull">Tag must be specified otherwise Portainer will pull all tags associated to the image.</span></p\n      >\n    </div>\n  </div>\n</div>\n\x3c!-- ! info message --\x3e\n<div class="form-group">\n  <div class="col-sm-12">\n    <p>\n      <a class="small interactive" ng-if="!$ctrl.model.UseRegistry" ng-click="$ctrl.model.UseRegistry = true;">\n        <i class="fa fa-database space-right" aria-hidden="true"></i> \n      </a>\n      <a class="small interactive" ng-if="$ctrl.model.UseRegistry" ng-click="$ctrl.model.UseRegistry = false;">\n        <i class="fa fa-globe space-right" aria-hidden="true"></i> \n      </a>\n    </p>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(4),r=n(23),i=n(553),s=n(35),o=n(99),l=n(2),c=n(10),d=n(5),u=n(1),p=n.n(u),m=n(234),g=n(65);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function v(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function b(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var y=function(){function e(t,n,a,r,i,s,o){var l=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.$scope=n,this.ImageHelper=a,this.RegistryService=r,this.DockerHubService=i,this.ImageService=s,this.Notifications=o,this.onInit=this.onInit.bind(this),this.onRegistryChange=this.onRegistryChange.bind(this),this.$scope.$watch((function(){return l.model.Registry}),this.onRegistryChange)}var t,n,u,p,h;return e.$inject=["$async","$scope","ImageHelper","RegistryService","DockerHubService","ImageService","Notifications"],t=e,(n=[{key:"isKnownRegistry",value:function(e){return!(e instanceof m.DockerHubViewModel)&&e.URL}},{key:"getRegistryURL",value:function(e){var t=e.URL;return e.Type===g.RegistryTypes.GITLAB&&(t=e.URL+"/"+e.Gitlab.ProjectPath),t}},{key:"prepareAutocomplete",value:function(){var e=this,t=[],n=this.model.Registry;if(this.isKnownRegistry(n)){var a=this.getRegistryURL(n),r=Object(d.a)(this.images,(function(e){return Object(c.a)(e,a)}));t=Object(l.a)(r,(function(e){return Object(o.a)(e,new RegExp(a+"/?"),"")}))}else{var u=Object(d.a)(this.availableRegistries,(function(t){return e.isKnownRegistry(t)})),p=Object(s.a)(u,(function(t){return Object(d.a)(e.images,(function(e){return Object(c.a)(e,t.URL)}))})),m=Object(i.a)(this.images,p);t=Object(d.a)(m,(function(t){return!e.ImageHelper.imageContainsURL(t)}))}this.availableImages=t}},{key:"onRegistryChange",value:function(){this.prepareAutocomplete(),this.model.Registry.Type===g.RegistryTypes.GITLAB&&this.model.Image&&(this.model.Image=Object(o.a)(this.model.Image,this.model.Registry.Gitlab.ProjectPath,""))}},{key:"displayedRegistryURL",value:function(){return this.getRegistryURL(this.model.Registry)||"docker.io"}},{key:"onInit",value:(p=regeneratorRuntime.mark((function e(){var t,n,i,s,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([this.RegistryService.registries(),this.DockerHubService.dockerhub(),this.autoComplete?this.ImageService.images():[]]);case 3:t=e.sent,n=f(t,3),i=n[0],s=n[1],o=n[2],this.images=this.ImageService.getUniqueTagListFromImages(o),this.availableRegistries=Object(r.a)(s,i),l=this.model.Registry.Id,this.model.Registry=l?Object(a.a)(this.availableRegistries,{Id:l}):s,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),this.Notifications.error("",e.t0,"");case 17:case"end":return e.stop()}}),e,this,[[0,14]])})),h=function(){var e=this,t=arguments;return new Promise((function(n,a){var r=p.apply(e,t);function i(e){v(r,n,a,i,s,"next",e)}function s(e){v(r,n,a,i,s,"throw",e)}i(void 0)}))},function(){return h.apply(this,arguments)})},{key:"$onInit",value:function(){return this.$async(this.onInit)}}])&&b(t.prototype,n),u&&b(t,u),e}();t.default=y,p.a.module("portainer.docker").controller("porImageRegistryController",y)},function(e,t,n){var a=n(970);angular.module("portainer.docker").component("logViewer",{templateUrl:a,controller:"LogViewerController",bindings:{data:"=",displayTimestamps:"=",logCollectionChange:"<",sinceTimestamp:"=",lineCount:"=",resourceName:"<"}})},function(e,t){var n="app/docker/components/log-viewer/logViewer.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="row">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-file-alt" title-text=""></rd-widget-header>\n      <rd-widget-body>\n        <form class="form-horizontal">\n          <div class="form-group">\n            <div class="col-sm-12">\n              <label for="tls" class="control-label text-left">\n                \n                <portainer-tooltip position="bottom" message="Disabling this option allows you to pause the log collection process and the auto-scrolling."></portainer-tooltip>\n              </label>\n              <label class="switch" style="margin-left: 20px;">\n                <input\n                  type="checkbox"\n                  ng-model="$ctrl.state.logCollection"\n                  ng-change="$ctrl.state.autoScroll = $ctrl.state.logCollection; $ctrl.logCollectionChange($ctrl.state.logCollection)"\n                /><i></i>\n              </label>\n            </div>\n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <label for="tls" class="control-label text-left">\n                \n              </label>\n              <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="$ctrl.state.wrapLines" /><i></i> </label>\n            </div>\n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <label for="tls" class="control-label text-left">\n                \n              </label>\n              <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="$ctrl.displayTimestamps" /><i></i> </label>\n            </div>\n          </div>\n          <div class="form-group">\n            <label for="logs_since" class="col-sm-1 control-label text-left">\n              \n            </label>\n            <div class="col-sm-2">\n              <select class="form-control" ng-model="$ctrl.sinceTimestamp" id="logs_since">\n                <option selected value=""></option>\n                <option ng-repeat="dt in $ctrl.state.availableSinceDatetime" ng-value="dt.value" title="{{ dt.value }}">{{ dt.desc }}</option>\n              </select>\n            </div>\n          </div>\n          <div class="form-group">\n            <label for="logs_search" class="col-sm-1 control-label text-left">\n              10\n            </label>\n            <div class="col-sm-11">\n              <input class="form-control" type="text" name="logs_search" ng-model="$ctrl.state.search" ng-change="$ctrl.state.selectedLines.length = 0;" placeholder="..." />\n            </div>\n          </div>\n          <div class="form-group">\n            <label for="lines_count" class="col-sm-1 control-label text-left">\n              \n            </label>\n            <div class="col-sm-11">\n              <input class="form-control" type="number" name="lines_count" ng-model="$ctrl.lineCount" placeholder="Enter no of lines..." />\n            </div>\n          </div>\n          <div class="form-group" ng-if="$ctrl.state.copySupported">\n            <label class="col-sm-1 control-label text-left">\n              \n            </label>\n            <div class="col-sm-11">\n              <button class="btn btn-primary btn-sm" type="button" ng-click="$ctrl.downloadLogs()" style="margin-left: 0;"><i class="fa fa-download"></i> </button>\n              <button\n                class="btn btn-primary btn-sm"\n                ng-click="$ctrl.copy()"\n                ng-disabled="($ctrl.state.filteredLogs.length === 1 && !$ctrl.state.filteredLogs[0]) || !$ctrl.state.filteredLogs.length"\n                ><i class="fa fa-copy space-right" aria-hidden="true"></i></button\n              >\n              <button\n                class="btn btn-primary btn-sm"\n                ng-click="$ctrl.copySelection()"\n                ng-disabled="($ctrl.state.filteredLogs.length === 1 && !$ctrl.state.filteredLogs[0]) || !$ctrl.state.filteredLogs.length || !$ctrl.state.selectedLines.length"\n                ><i class="fa fa-copy space-right" aria-hidden="true"></i>\n</button\n              >\n              <button class="btn btn-primary btn-sm" ng-click="$ctrl.clearSelection()" ng-disabled="$ctrl.state.selectedLines.length === 0"\n                ><i class="fa fa-times space-right" aria-hidden="true"></i></button\n              >\n              <span>\n                <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="margin-left: 7px; display: none;"></i>\n              </span>\n            </div>\n          </div>\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row" style="height: 54%;">\n  <div class="col-sm-12" style="height: 100%;">\n    <pre ng-class="{ wrap_lines: $ctrl.state.wrapLines }" class="log_viewer" scroll-glue="$ctrl.state.autoScroll" force-glue>\n      <div ng-repeat="line in $ctrl.state.filteredLogs = ($ctrl.data | filter:$ctrl.state.search) track by $index" class="line" ng-if="line"><p class="inner_line" ng-click="$ctrl.selectLine(line)" ng-class="{ \'line_selected\': $ctrl.state.selectedLines.indexOf(line) > -1 }">{{ line }}</p></div>\n      <div ng-if="!$ctrl.state.filteredLogs.length" class="line"><p class="inner_line">No log line matching the \'{{ $ctrl.state.search }}\' filter</p></div>\n      <div ng-if="$ctrl.state.filteredLogs.length === 1 && !$ctrl.state.filteredLogs[0]" class="line"><p class="inner_line"></p></div>\n    </pre>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t),function(e){var t=n(19),a=n(12),r=n.n(a);angular.module("portainer.docker").controller("LogViewerController",["clipboard","Blob","FileSaver",function(n,a,i){this.state={availableSinceDatetime:[{desc:"",value:r()().subtract(1,"days").format()},{desc:"4",value:r()().subtract(4,"hours").format()},{desc:"1",value:r()().subtract(1,"hours").format()},{desc:"10",value:r()().subtract(10,"").format()}],copySupported:n.supported,logCollection:!0,autoScroll:!0,wrapLines:!0,search:"",filteredLogs:[],selectedLines:[]},this.copy=function(){n.copyText(this.state.filteredLogs),e("#refreshRateChange").show(),e("#refreshRateChange").fadeOut(2e3)},this.copySelection=function(){n.copyText(this.state.selectedLines),e("#refreshRateChange").show(),e("#refreshRateChange").fadeOut(2e3)},this.clearSelection=function(){this.state.selectedLines=[]},this.selectLine=function(e){var t=this.state.selectedLines.indexOf(e);-1===t?this.state.selectedLines.push(e):this.state.selectedLines.splice(t,1)},this.downloadLogs=function(){var e=new a([Object(t.a)(this.state.filteredLogs,(function(e,t){return e+"\n"+t}),"")]);i.saveAs(e,this.resourceName+"_logs.txt")}}])}.call(this,n(45))},,function(e,t,n){var a=n(974);angular.module("portainer.docker").component("networkMacvlanForm",{templateUrl:a,controller:"NetworkMacvlanFormController",bindings:{data:"=",applicationState:"<"}})},function(e,t){var n="app/docker/components/network-macvlan-form/networkMacvlanForm.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div>\n  <div class="col-sm-12 form-section-title">\n    Macvlan configuration\n  </div>\n  \x3c!-- selector --\x3e\n  <div class="form-group">\n    <span class="col-sm-12 text-muted small">\n      <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n      To create a MACVLAN network you need to create a configuration, then create the network from this configuration.\n    </span>\n  </div>\n  <div class="col-sm-12">\n    <div class="form-group" style="margin-bottom: 0;">\n      <div class="boxselector_wrapper">\n        <div>\n          <input type="radio" id="network_config" ng-model="$ctrl.data.Scope" value="local" />\n          <label for="network_config">\n            <div class="boxselector_header">\n              <i class="fa fa-cog" aria-hidden="true" style="margin-right: 2px;"></i>\n              Configuration\n            </div>\n            <p>I want to configure a network before deploying it</p>\n          </label>\n        </div>\n        <div>\n          <input type="radio" id="network_deploy" ng-model="$ctrl.data.Scope" value="swarm" ng-disabled="$ctrl.availableNetworks.length === 0" />\n          <label for="network_deploy" ng-class="$ctrl.availableNetworks.length === 0 ? \'boxselector_disabled\' : \'\'">\n            <div class="boxselector_header">\n              <i class="fa fa-sitemap" aria-hidden="true" style="margin-right: 2px;"></i>\n              Creation\n            </div>\n            <p>I want to create a network from a configuration</p>\n          </label>\n        </div>\n      </div>\n    </div>\n  </div>\n  \x3c!-- !selector --\x3e\n\n  <ng-form name="macvlanConfigurationForm">\n    \x3c!-- configuration-inputs --\x3e\n    <div ng-show="$ctrl.data.Scope === \'local\'">\n      \x3c!-- network-card-input --\x3e\n      <div class="form-group">\n        <label for="network_card" class="col-sm-3 col-lg-2 control-label text-left">Parent network card</label>\n        <div class="col-sm-9 col-lg-10">\n          <input\n            type="text"\n            class="form-control"\n            name="network_card"\n            ng-model="$ctrl.data.ParentNetworkCard"\n            placeholder=" eth0 or ens160 ..."\n            ng-required="$ctrl.data.Scope === \'local\' && !$ctrl.data.ParentNetworkCard"\n          />\n        </div>\n      </div>\n      <div class="form-group" ng-show="macvlanConfigurationForm.network_card.$invalid">\n        <div class="col-sm-12 small text-warning">\n          <div ng-messages="macvlanConfigurationForm.network_card.$error">\n            <p ng-message="required"> <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Parent network card must be specified.</p>\n          </div>\n        </div>\n      </div>\n      \x3c!-- network-card-input --\x3e\n      \x3c!-- nodes-selector --\x3e\n      <div ng-if="$ctrl.applicationState.endpoint.mode.agentProxy && $ctrl.applicationState.endpoint.mode.provider === \'DOCKER_SWARM_MODE\'">\n        <div class="form-group">\n          <div class="col-sm-12">\n            <macvlan-nodes-datatable\n              title-text="Select the nodes where you want to deploy the local configuration"\n              title-icon="fa-hdd"\n              dataset="$ctrl.nodes"\n              table-key="nodes"\n              state="$ctrl.data.DatatableState"\n              order-by="Hostname"\n              show-ip-address-column="$ctrl.applicationState.endpoint.apiVersion >= 1.25"\n              access-to-node-details="$ctrl.isAdmin"\n              name="node_selector"\n              ng-model="tmp"\n              ng-required="$ctrl.requiredNodeSelection()"\n            ></macvlan-nodes-datatable>\n          </div>\n        </div>\n        <div class="form-group" ng-show="macvlanConfigurationForm.node_selector.$invalid">\n          <div class="col-sm-12 small text-warning">\n            <div ng-messages="macvlanConfigurationForm.node_selector.$error">\n              <p ng-message="required"> <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> At least one node must be selected.</p>\n            </div>\n          </div>\n        </div>\n      </div>\n      \x3c!-- !nodes-selector --\x3e\n    </div>\n    \x3c!-- configuration-inputs --\x3e\n    \x3c!-- deploy-inputs --\x3e\n    <div ng-show="$ctrl.data.Scope === \'swarm\'">\n      \x3c!-- configuration-selector --\x3e\n      \x3c!-- network-input --\x3e\n      <div class="form-group">\n        <label for="config_network" class="col-sm-2 col-lg-1 control-label text-left"></label>\n        <div class="col-sm-9">\n          <select\n            class="form-control"\n            ng-options="net.Name for net in $ctrl.availableNetworks"\n            ng-model="$ctrl.data.SelectedNetworkConfig"\n            name="config_network"\n            ng-required="$ctrl.requiredConfigSelection()"\n          >\n            <option selected disabled hidden value=""></option>\n          </select>\n        </div>\n      </div>\n      \x3c!-- !network-input --\x3e\n      <div class="form-group" ng-show="macvlanConfigurationForm.config_network.$invalid">\n        <div class="col-sm-12 small text-warning">\n          <div ng-messages="macvlanConfigurationForm.config_network.$error">\n            <p ng-message="required"> <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Select a configuration network.</p>\n          </div>\n        </div>\n      </div>\n      \x3c!-- !configuration-selector --\x3e\n    </div>\n    \x3c!-- deploy-inputs --\x3e\n  </ng-form>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.docker").controller("NetworkMacvlanFormController",["$q","NodeService","NetworkService","Notifications","StateManager","Authentication",function(e,t,n,a,r,i){var s=this;s.requiredNodeSelection=function(){return"local"===s.data.Scope&&void 0!==s.data.DatatableState&&0===s.data.DatatableState.selectedItemCount},s.requiredConfigSelection=function(){return"swarm"===s.data.Scope&&!s.data.SelectedNetworkConfig},this.$onInit=function(){var r=i.isAdmin();s.isAdmin=r;var o=s.applicationState.endpoint.mode.provider,l=s.applicationState.endpoint.apiVersion;e.all({nodes:"DOCKER_SWARM_MODE"!==o||t.nodes(),networks:n.networks("DOCKER_STANDALONE"===o||"DOCKER_SWARM_MODE"===o,!1,"DOCKER_SWARM_MODE"===o&&l>=1.25)}).then((function(e){!0!==e.nodes&&(s.nodes=e.nodes),s.availableNetworks=e.networks.filter((function(e){return!0===e.ConfigOnly}))})).catch((function(e){a.error("",e,"macvlan")}))}}])},function(e,t,n){var a=n(977);angular.module("portainer.docker").component("volumesCifsForm",{templateUrl:a,bindings:{data:"="}})},function(e,t){var n="app/docker/components/volumesCIFSForm/volumesCifsForm.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'\x3c!-- CIFS-settings --\x3e\n<div ng-show="$ctrl.data.useCIFS">\n  <ng-form class="form-horizontal" name="cifsInformationForm">\n    <div class="col-sm-12 form-section-title">\n      CIFS Settings\n    </div>\n    \x3c!-- address-input --\x3e\n    <div class="form-group col-md-12">\n      <label for="cifs_address" class="col-sm-2 col-md-1 control-label text-left">Address</label>\n      <div class="col-sm-10 col-md-11">\n        <input type="text" class="form-control" ng-model="$ctrl.data.serverAddress" name="cifs_address" placeholder=" my.cifs-server.com OR xxx.xxx.xxx.xxx" required />\n      </div>\n    </div>\n    <div class="form-group col-md-12" ng-show="cifsInformationForm.cifs_address.$invalid">\n      <div class="small text-warning">\n        <div ng-messages="cifsInformationForm.cifs_address.$error">\n          <p ng-message="required"> <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n        </div>\n      </div>\n    </div>\n    \x3c!-- !address-input --\x3e\n    \x3c!-- mount-point-input --\x3e\n    <div class="form-group col-md-12">\n      <label for="cifs_share" class="col-sm-2 col-md-1 control-label text-left">Share</label>\n      <div class="col-sm-10 col-md-11">\n        <input type="text" class="form-control" ng-model="$ctrl.data.share" name="cifs_share" placeholder=" /myshare" required />\n      </div>\n    </div>\n    <div class="form-group col-md-12" ng-show="cifsInformationForm.cifs_share.$invalid">\n      <div class="small text-warning">\n        <div ng-messages="cifsInformationForm.cifs_share.$error">\n          <p ng-message="required"> <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n        </div>\n      </div>\n    </div>\n    \x3c!-- !mount-point-input --\x3e\n    \x3c!-- version-input --\x3e\n    <div class="form-group col-md-12">\n      <label for="cifs_version" class="col-sm-2 col-md-1 control-label text-left">CIFS </label>\n      <div class="col-sm-10 col-md-11">\n        <select class="form-control" ng-model="$ctrl.data.version" name="cifs_version" ng-options="version for version in $ctrl.data.versions" required></select>\n      </div>\n    </div>\n    <div class="form-group col-md-12" ng-show="cifsInformationForm.cifs_version.$invalid">\n      <div class="small text-warning">\n        <div ng-messages="cifsInformationForm.cifs_version.$error">\n          <p ng-message="required"> <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n        </div>\n      </div>\n    </div>\n    \x3c!-- !version-input --\x3e\n    \x3c!-- username --\x3e\n    <div class="form-group col-md-12">\n      <label for="cifs_username" class="col-sm-2 col-md-1 control-label text-left"></label>\n      <div class="col-sm-10 col-md-11">\n        <input type="text" class="form-control" ng-model="$ctrl.data.username" name="cifs_username" required />\n      </div>\n    </div>\n    <div class="form-group col-md-12" ng-show="cifsInformationForm.cifs_username.$invalid">\n      <div class="small text-warning">\n        <div ng-messages="cifsInformationForm.cifs_username.$error">\n          <p ng-message="required"> <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n        </div>\n      </div>\n    </div>\n    \x3c!-- !username --\x3e\n    \x3c!-- password --\x3e\n    <div class="form-group col-md-12">\n      <label for="cifs_password" class="col-sm-2 col-md-1 control-label text-left"></label>\n      <div class="col-sm-10 col-md-11">\n        <input type="text" class="form-control" ng-model="$ctrl.data.password" name="cifs_password" required />\n      </div>\n    </div>\n    <div class="form-group col-md-12" ng-show="cifsInformationForm.password.$invalid">\n      <div class="small text-warning">\n        <div ng-messages="cifsInformationForm.cifs_password.$error">\n          <p ng-message="required"> <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n        </div>\n      </div>\n    </div>\n    \x3c!-- !password --\x3e\n  </ng-form>\n</div>\n\x3c!-- !CIFS-settings --\x3e\n')}]),e.exports=n},function(e,t,n){var a=n(979);angular.module("portainer.docker").component("volumesNfsForm",{templateUrl:a,bindings:{data:"="}})},function(e,t){var n="app/docker/components/volumesNFSForm/volumesnfsForm.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'\x3c!-- NFS-settings --\x3e\n<div ng-show="$ctrl.data.useNFS">\n  <ng-form class="form-horizontal" name="nfsInformationForm">\n    <div class="col-sm-12 form-section-title">\n      NFS Settings\n    </div>\n    \x3c!-- address-input --\x3e\n    <div class="form-group col-md-12">\n      <label for="nfs_address" class="col-sm-2 col-md-1 control-label text-left">Address</label>\n      <div class="col-sm-10 col-md-11">\n        <input type="text" class="form-control" ng-model="$ctrl.data.serverAddress" name="nfs_address" placeholder=" my.nfs-server.com OR xxx.xxx.xxx.xxx" required />\n      </div>\n    </div>\n    <div class="form-group col-md-12" ng-show="nfsInformationForm.nfs_address.$invalid">\n      <div class="small text-warning">\n        <div ng-messages="nfsInformationForm.nfs_address.$error">\n          <p ng-message="required"> <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n        </div>\n      </div>\n    </div>\n    \x3c!-- !address-input --\x3e\n    \x3c!-- version-input --\x3e\n    <div class="form-group col-md-12">\n      <label for="nfs_version" class="col-sm-2 col-md-1 control-label text-left">NFS </label>\n      <div class="col-sm-10 col-md-11">\n        <select class="form-control" ng-model="$ctrl.data.version" name="nfs_version" ng-options="version for version in $ctrl.data.versions" required></select>\n      </div>\n    </div>\n    <div class="form-group col-md-12" ng-show="nfsInformationForm.nfs_version.$invalid">\n      <div class="small text-warning">\n        <div ng-messages="nfsInformationForm.nfs_version.$error">\n          <p ng-message="required"> <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n        </div>\n      </div>\n    </div>\n    \x3c!-- !version-input --\x3e\n    \x3c!-- mount-point-input --\x3e\n    <div class="form-group col-md-12">\n      <label for="nfs_mountpoint" class="col-sm-2 col-md-1 control-label text-left"></label>\n      <div class="col-sm-10 col-md-11">\n        <input\n          type="text"\n          class="form-control"\n          ng-model="$ctrl.data.mountPoint"\n          name="nfs_mountpoint"\n          placeholder=" /export/share, :/export/share, /share or :/share"\n          required\n        />\n      </div>\n    </div>\n    <div class="form-group col-md-12" ng-show="nfsInformationForm.nfs_mountpoint.$invalid">\n      <div class="small text-warning">\n        <div ng-messages="nfsInformationForm.nfs_mountpoint.$error">\n          <p ng-message="required"> <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n        </div>\n      </div>\n    </div>\n    \x3c!-- !mount-point-input --\x3e\n    \x3c!-- options-input --\x3e\n    <div class="form-group col-md-12">\n      <label for="nfs_options" class="col-sm-2 col-md-1 control-label text-left"\n        >Options\n        <portainer-tooltip position="bottom" message="Comma separated list of options"></portainer-tooltip>\n      </label>\n      <div class="col-sm-10 col-md-11">\n        <input type="text" class="form-control" ng-model="$ctrl.data.options" name="nfs_options" placeholder=" rw,noatime,tcp ..." required />\n      </div>\n    </div>\n    <div class="form-group col-md-12" ng-show="nfsInformationForm.nfs_options.$invalid">\n      <div class="small text-warning">\n        <div ng-messages="nfsInformationForm.nfs_options.$error">\n          <p ng-message="required"> <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n        </div>\n      </div>\n    </div>\n    \x3c!-- !options-input --\x3e\n  </ng-form>\n</div>\n\x3c!-- !NFS-settings --\x3e\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(4),r=n(36),i=n(34);function s(e,t){return t.some((function(t){return-1!==e.indexOf(t)}))}angular.module("portainer.docker").filter("visualizerTask",(function(){return function(e){var t=Object(i.a)(e);return s(t,["new","allocated","assigned","accepted","complete","preparing"])?"info":s(t,["pending"])?"warning":s(t,["shutdown","failed","rejected"])?"":""}})).filter("visualizerTaskBorderColor",(function(){return function(e){return function(e){for(var t="#",n=0;n<3;)t+=("00"+(e>>8*n++&255).toString(16)).slice(-2);return t}(function(e){for(var t=0,n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);return t}(e))}})).filter("taskstatusbadge",(function(){return function(e){var t=Object(i.a)(e),n="default";return s(t,["new","allocated","assigned","accepted","preparing","ready","","remove"])?n="info":s(t,["pending"])?n="warning":s(t,["shutdown","failed","rejected","orphaned"])?n="danger":s(t,["complete"])?n="primary":s(t,["running"])&&(n="success"),n}})).filter("taskhaslogs",(function(){return function(e){return["running","complete","failed","shutdown"].indexOf(e)>-1}})).filter("containerstatusbadge",(function(){return function(e){var t=Object(i.a)(e);return s(t,["","",""])?"warning":s(t,["created"])?"info":s(t,["","dead","exited"])?"danger":"success"}})).filter("nodestatusbadge",(function(){return function(e){return"down"===e||"Unhealthy"===e?"danger":"success"}})).filter("dockerNodeAvailabilityBadge",(function(){return function(e){return"pause"===e?"warning":"drain"===e?"danger":"success"}})).filter("trimcontainername",(function(){return function(e){return e?0===e.indexOf("/")?e.replace("/",""):e:""}})).filter("getstatetext",(function(){return function(e){return void 0===e?"":e.Dead?"Dead":e.Ghost&&e.Running?"Ghost":e.Running&&e.Paused?"Running (Paused)":e.Running?"Running":"created"===e.Status?"Created":"Stopped"}})).filter("getstatelabel",(function(){return function(e){return void 0===e?"label-default":e.Ghost&&e.Running?"label-important":e.Running?"label-success":"label-default"}})).filter("containername",(function(){return function(e){var t=e.Names[0];return t.substring(1,t.length)}})).filter("swarmversion",(function(){return function(e){return Object(r.a)(e,"/")[1]}})).filter("swarmhostname",(function(){return function(e){return Object(r.a)(e.Names[0],"/")[1]}})).filter("repotags",(function(){return function(e){return e.RepoTags&&e.RepoTags.length>0?"<none>:<none>"===e.RepoTags[0]?[]:e.RepoTags:[]}})).filter("command",(function(){return function(e){if(e)return e.join(" ")}})).filter("hideshasum",(function(){return function(e){return e?e.split("@sha")[0]:""}})).filter("availablenodecount",["ConstraintsHelper",function(e){return function(t,n){for(var a=0,r=0;r<t.length;r++){var i=t[r];"active"===i.Availability&&"ready"===i.Status&&e.matchesServiceConstraints(n,i)&&a++}return a}}]).filter("runningtaskscount",(function(){return function(e){for(var t=0,n=0;n<e.length;n++){var a=e[n];"running"===a.Status.State&&"running"===a.DesiredState&&t++}return t}})).filter("runningcontainers",(function(){return function(e){return e.filter((function(e){return""===e.State})).length}})).filter("stoppedcontainers",(function(){return function(e){return e.filter((function(e){return"exited"===e.State})).length}})).filter("healthycontainers",(function(){return function(e){return e.filter((function(e){return"healthy"===e.Status})).length}})).filter("unhealthycontainers",(function(){return function(e){return e.filter((function(e){return"unhealthy"===e.Status})).length}})).filter("imagestotalsize",(function(){return function(e){for(var t=0,n=0;n<e.length;n++){t+=e[n].VirtualSize}return t}})).filter("tasknodename",(function(){return function(e,t){var n=Object(a.a)(t,{Id:e});return n?n.Hostname:""}})).filter("imagelayercommand",(function(){return function(e){return e.replace("/bin/sh -c #(nop) ","").replace("/bin/sh -c ","RUN ")}})).filter("trimshasum",(function(){return function(e){if(e)return 0===e.indexOf("sha256:")?e.substring(7,19):Object(r.a)(e,"@sha256")[0]}}))},function(e,t){angular.module("portainer.docker").factory("ConfigHelper",[function(){"use strict";return{flattenConfig:function(e){return e?{Id:e.ConfigID,Name:e.ConfigName,FileName:e.File.Name,Uid:e.File.UID,Gid:e.File.GID,Mode:e.File.Mode}:{}},configConfig:function(e){return e?{ConfigID:e.Id,ConfigName:e.Name,File:{Name:e.FileName||e.Name,UID:e.Uid||"0",GID:e.Gid||"0",Mode:e.Mode||292}}:{}}}}])},function(e,t,n){"use strict";n.r(t);var a=n(4);function r(e,t,n){this.op=e,this.value=n,this.key=t}var i={nodeId:"node.id",nodeHostname:"node.hostname",nodeRole:"node.role",nodeLabels:"node.labels.",engineLabels:"engine.labels."},s={eq:"==",neq:"!="};function o(e,t){return!t||t.op===s.eq&&e===t.value||t.op===s.neq&&e!==t.value}function l(e,t){return!t||void 0!==Object(a.a)(e,(function(e){return e.key===t.key&&e.value===t.value}))}function c(e,t){return e.split(t).pop().trim()}function d(e,t,n){return e.split(t).shift().trim().replace(n,"")}angular.module("portainer.docker").factory("ConstraintsHelper",[function(){return{transformConstraints:function(e){for(var t={},n=0;n<e.length;n++){var a,o=e[n];o.includes(s.eq)?a=s.eq:o.includes(s.neq)&&(a=s.neq);var l=c(o,a),u="";switch(!0){case o.includes(i.nodeId):t.nodeId=new r(a,u,l);break;case o.includes(i.nodeHostname):t.nodeHostname=new r(a,u,l);break;case o.includes(i.nodeRole):t.nodeRole=new r(a,u,l);break;case o.includes(i.nodeLabels):u=d(o,a,i.nodeLabels),t.nodeLabels=new r(a,u,l);break;case o.includes(i.engineLabels):u=d(o,a,i.engineLabels),t.engineLabels=new r(a,u,l)}}return t},matchesServiceConstraints:function(e,t){if(void 0===e.Constraints||0===e.Constraints.length)return!0;var n=this.transformConstraints(angular.copy(e.Constraints));return!!(o(t.Id,n.nodeId)&&o(t.Hostname,n.nodeHostname)&&o(t.Role,n.nodeRole)&&l(t.Labels,n.nodeLabels)&&l(t.EngineLabels,n.engineLabels))}}}])},function(e,t,n){"use strict";n.r(t);var a=n(64),r=n(87),i=n(38),s=n(7),o=n(2),l=n(36),c=n(554),d=n.n(c);function u(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var m=/^([1-9]|[1-5]?[0-9]{2,4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$/m;function g(e){return m.test(e)?parseInt(e):0}function f(e){"string"!=typeof e&&(e=e.toString());var t=Object(l.a)(e,"-",2),n=Object(o.a)(t,g);return 1==n.length&&n.push(n[0]),n}function h(e){return"string"==typeof e&&(e=f()),Array.isArray(e)&&2===e.length&&e[0]>0&&e[1]>=e[0]}function v(e,t){"string"!=typeof e&&(e=e.toString());var n=null,a=e.indexOf(":");a>=0&&(n=e.substr(0,a),e=e.substr(a+1)),t="number"==typeof t?t:g(t);var r=f(e),i=Math.min(r[0],t),s=Math.max(r[1],t);return n?n+":"+i+"-"+s:i+"-"+s}angular.module("portainer.docker").factory("ContainerHelper",[function(){var e={commandStringToArray:function(e){return d()(e)},commandArrayToString:function(e){return e.map((function(e){return"'"+e+"'"})).join(" ")},configFromContainer:function(e){var t=e.Config;t.HostConfig=e.HostConfig,t.name=e.Name.replace(/^\//g,"");var n=t.HostConfig.NetworkMode;t.NetworkingConfig={EndpointsConfig:{}},t.NetworkingConfig.EndpointsConfig=e.NetworkSettings.Networks,void 0===t.ExposedPorts&&(t.ExposedPorts={}),-1!==n.indexOf("container:")&&(delete t.Hostname,delete t.ExposedPorts);var a=[],r={};for(var i in e.Mounts)if({}.hasOwnProperty.call(e.Mounts,i)){var s=e.Mounts[i],o=s.Name||s.Source,l=s.Destination;if(o&&l){var c=o+":"+l;r[l]={},!1===s.RW&&(c+=":ro"),a.push(c)}}return t.HostConfig.Binds=a,t.Volumes=r,t},preparePortBindings:function(e){var t={};return Object(s.a)(e,(function(e){if(e.containerPort){var n=e.hostPort,a=f(e.containerPort);if(!h(a))throw new Error("Invalid port specification: "+e.containerPort);var r=a[0],i=a[1],s=void 0,o=0,c=0;if(n){if(n.indexOf("[")>-1){var d=Object(l.a)(n,"]:");if(d.length<2)throw new Error("Invalid port specification: "+e.containerPort);s=d[0].replace("[",""),n=d[1]}else if(n.indexOf(":")>-1){var u=Object(l.a)(n,":");s=u[0],n=u[1]}var p=f(n);if(!h(p))throw new Error("Invalid port specification: "+n);if(o=p[0],c=p[1],i!==r&&i-r!=c-o)throw new Error("Invalid port specification: "+n)}for(var m=0;m<=i-r;m++){var g=(r+m).toString();o>0&&(n=(o+m).toString()),r===i&&o!==c&&(n+="-"+c.toString());var v=g+"/"+e.protocol;t[v]?t[v].push({HostIp:s,HostPort:n}):t[v]=[{HostIp:s,HostPort:n}]}}})),t},sortAndCombinePorts:function(e){var t=[],n=Object(i.a)(e),o=Object(r.a)(n,(function(e){return Object(l.a)(e,"/")[1]}));return Object(s.a)(o,(function(n,r){var i,o={},c=u(n);try{for(c.s();!(i=c.n()).done;){var d,p=i.value,m=u(e[p]);try{for(m.s();!(d=m.n()).done;){var f=d.value;o[f.HostIp]=o[f.HostIp]||[],o[f.HostIp].push(p)}}catch(e){m.e(e)}finally{m.f()}}}catch(e){c.e(e)}finally{c.f()}Object(s.a)(o,(function(n,i){var o=Object(a.a)(n,(function(e){return parseInt(Object(l.a)(e,"/")[0])})),c=-1,d=-1;Object(s.a)(o,(function(n){var a=Object(l.a)(n,"/"),s=parseInt(a[0]),o=e[n][0];e[n].shift();var u=g(o.HostPort);if(u>0){if(t.length>0&&c===u-1&&d===s-1)return t[t.length-1].hostPort=v(t[t.length-1].hostPort,u),t[t.length-1].containerPort=v(t[t.length-1].containerPort,s),c=u,void(d=s);c=u,d=s}else c=-1,d=-1;var p=o.HostPort.toString();i&&(p="".concat(i,":").concat(p));var m={hostPort:p,containerPort:s,protocol:r};t.push(m)}))}))})),t}};return e}])},function(e,t,n){"use strict";n.r(t);var a=n(36),r=n(10),i=n(55),s=n(65);angular.module("portainer.docker").factory("ImageHelper",[function(){var e={};return e.isValidTag=function(e){return e.match(/^(?![\.\-])([a-zA-Z0-9\_\.\-])+$/g)},e.createImageConfigForContainer=function(e){var t={fromImage:""},n="";if(e.UseRegistry){if(e.Registry.Type===s.RegistryTypes.GITLAB){var a=Object(i.a)(e.Image,":")?"":"/";n=e.Registry.URL+"/"+e.Registry.Gitlab.ProjectPath+a+e.Image}else{var o=e.Registry.URL?e.Registry.URL+"/":"";n=o+e.Image}Object(r.a)(e.Image,":")||(n+=":latest")}else n=e.Image;return t.fromImage=n,t},e.getImagesNamesForDownload=function(e){return{names:e.map((function(e){return"<none>:<none>"!==e.RepoTags[0]?e.RepoTags[0]:e.Id}))}},e.removeDigestFromRepository=function(e){return e.split("@sha")[0]},e.imageContainsURL=function(e){var t=Object(a.a)(e,"/"),n=t[0];if(t.length>1)return Object(r.a)(n,".")||Object(r.a)(n,":");return!1},e}])},function(e,t,n){"use strict";n.r(t);var a=n(53);angular.module("portainer.docker").factory("InfoHelper",[function(){var e={determineEndpointMode:function(e,t){var n={provider:"",role:"",agentProxy:!1};return 2!==t&&4!==t||(n.agentProxy=!0),!e.Swarm||Object(a.a)(e.Swarm.NodeID)?n.provider="DOCKER_STANDALONE":(n.provider="DOCKER_SWARM_MODE",e.Swarm.ControlAvailable?n.role="MANAGER":n.role="WORKER"),n}};return e}])},function(e,t){angular.module("portainer.docker").factory("LabelHelper",[function(){"use strict";return{fromLabelHashToKeyValue:function(e){return e?Object.keys(e).map((function(t){return{key:t,value:e[t],originalKey:t,originalValue:e[t],added:!0}})):[]},fromKeyValueToLabelHash:function(e){var t={};return e&&e.forEach((function(e){e.key&&(t[e.key]=e.value)})),t}}}])},function(e,t){angular.module("portainer.docker").factory("LogHelper",[function(){"use strict";var e={formatLogs:function(e,t){return e=e.replace(/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,""),t&&(e=(e=e.substring(8)).replace(/\n(.{8})/g,"\n\r")),e.split("\n")}};return e}])},function(e,t){angular.module("portainer.docker").factory("NodeHelper",[function(){"use strict";return{nodeToConfig:function(e){return{Name:e.Spec.Name,Role:e.Spec.Role,Labels:e.Spec.Labels,Availability:e.Spec.Availability}}}}])},function(e,t){angular.module("portainer.docker").factory("SecretHelper",[function(){"use strict";return{flattenSecret:function(e){return e?{Id:e.SecretID,Name:e.SecretName,FileName:e.File.Name,Uid:e.File.UID,Gid:e.File.GID,Mode:e.File.Mode}:{}},secretConfig:function(e){return e?{SecretID:e.Id,SecretName:e.Name,File:{Name:e.FileName,UID:e.Uid||"0",GID:e.Gid||"0",Mode:e.Mode||444}}:{}}}}])},function(e,t,n){"use strict";n.r(t);var a=n(12),r=n.n(a);angular.module("portainer.docker").factory("ServiceHelper",[function(){var e={associateTasksToService:function(e,t){e.Tasks=[];for(var n=[],a=0;a<t.length;a++){var r=t[a];r.ServiceId===e.Id?(e.Tasks.push(r),r.ServiceName=e.Name):n.push(r)}t=n},serviceToConfig:function(e){return{Name:e.Spec.Name,Labels:e.Spec.Labels,TaskTemplate:e.Spec.TaskTemplate,Mode:e.Spec.Mode,UpdateConfig:e.Spec.UpdateConfig,Networks:e.Spec.Networks,EndpointSpec:e.Spec.EndpointSpec}},translateKeyValueToPlacementPreferences:function(e){if(e){var t=[];return e.forEach((function(e){if(e.strategy&&""!==e.strategy&&e.value&&""!==e.value)switch(e.strategy.toLowerCase()){case"spread":t.push({Spread:{SpreadDescriptor:e.value}})}})),t}return[]},translateKeyValueToPlacementConstraints:function(e){if(e){var t=[];return e.forEach((function(e){e.key&&""!==e.key&&e.value&&""!==e.value&&t.push(e.key+e.operator+e.value)})),t}return[]},translateEnvironmentVariables:function(e){if(e){var t=[];return e.forEach((function(e){var n=e.indexOf("="),a=[e.slice(0,n),e.slice(n+1)],r=a.length>1?a[1]:"";t.push({key:a[0],value:r,originalKey:a[0],originalValue:r,added:!0})})),t}return[]},translateEnvironmentVariablesToEnv:function(e){if(e){var t=[];return e.forEach((function(e){e.key&&""!==e.key&&t.push(e.key+"="+e.value)})),t}return[]},translatePreferencesToKeyValue:function(e){if(e){var t=[];return e.forEach((function(e){e.Spread&&t.push({strategy:"Spread",value:e.Spread.SpreadDescriptor})})),t}return[]},translateConstraintsToKeyValue:function(e){if(e){var t=[];return e.forEach((function(e){var n=function(e){var t=e.indexOf("==");return t>=0?[t,"=="]:[e.indexOf("!="),"!="]}(e),a=e.slice(0,n[0]),r=n[1],i=e.slice(n[0]+2);t.push({key:a,value:i,operator:r,originalKey:a,originalValue:i})})),t}},translateHumanDurationToNanos:function(e){var t,n=e.match(/^([0-9]+)(h|m|s|ms|us|ns)$/i);if(null!==n&&3===n.length){var a=parseInt(n[1],10),i=n[2];switch(i){case"ns":t=a;break;case"us":t=1e3*a;break;default:t=1e6*r.a.duration(a,i).asMilliseconds()}}return t},translateNanosToHumanDuration:function(e){var t="0s",n={ns:1};return n.us=1e3*n.ns,n.ms=1e3*n.us,n.s=1e3*n.ms,n.m=60*n.s,n.h=60*n.m,Object.keys(n).forEach((function(a){e%n[a]==0&&e/n[a]>0&&(t=e/n[a]+a)})),t},translateLogDriverOptsToKeyValue:function(e){var t=[];return e&&Object.keys(e).forEach((function(n){t.push({key:n,value:e[n],originalKey:n,originalValue:e[n],added:!0})})),t},translateKeyValueToLogDriverOpts:function(e){var t={};return e&&e.forEach((function(e){e.key&&""!==e.key&&e.value&&""!==e.value&&(t[e.key]=e.value)})),t},translateHostsEntriesToHostnameIP:function(e){var t=[];return e&&e.forEach((function(e){if(e.indexOf(" ")&&2===e.split(" ").length){var n=e.split(" ");t.push({hostname:n[1],ip:n[0]})}})),t},translateHostnameIPToHostsEntries:function(e){var t=[];return e&&e.forEach((function(e){e.ip&&e.hostname&&t.push(e.ip+" "+e.hostname)})),t}};return e}])},function(e,t){angular.module("portainer.docker").factory("TaskHelper",[function(){"use strict";var e={associateContainerToTask:function(e,t){for(var n=0;n<t.length;n++){var a=t[n];if(e.ContainerId===a.Id){e.Container=a;break}}}};return e}])},function(e,t){angular.module("portainer.docker").factory("VolumeHelper",[function(){"use strict";var e={createDriverOptions:function(e){var t={};return e.forEach((function(e){t[e.name]=e.value})),t},isVolumeUsedByAService:function(e,t){for(var n=0;n<t.length;n++)for(var a=t[n].Mounts,r=0;r<a.length;r++){if(a[r].Source===e.Id)return!0}return!1}};return e}])},function(e,t){angular.module("portainer.app").factory("ContainersInterceptor",["$q","EndpointProvider",function(e,t){"use strict";var n={};return n.responseError=function(n){if(502===n.status||503===n.status||-1===n.status){var a=t.currentEndpoint();if(void 0!==a){var r=a.Snapshots[0].SnapshotRaw.Containers;if(void 0!==r)return r}}return e.reject(n)},n}])},function(e,t){angular.module("portainer.app").factory("ImagesInterceptor",["$q","EndpointProvider",function(e,t){"use strict";var n={};return n.responseError=function(n){if(502===n.status||503===n.status||-1===n.status){var a=t.currentEndpoint();if(void 0!==a){var r=a.Snapshots[0].SnapshotRaw.Images;if(void 0!==r)return r}}return e.reject(n)},n}])},function(e,t){angular.module("portainer.app").factory("InfoInterceptor",["$q","EndpointProvider",function(e,t){"use strict";var n={};return n.responseError=function(n){if(502===n.status||503===n.status||-1===n.status){var a=t.currentEndpoint();if(void 0!==a&&a.Snapshots.length&&a.Snapshots[0].SnapshotRaw){var r=a.Snapshots[0].SnapshotRaw.Info;if(void 0!==r)return r}}return e.reject(n)},n}])},function(e,t){angular.module("portainer.app").factory("NetworksInterceptor",["$q","EndpointProvider",function(e,t){"use strict";var n={};return n.responseError=function(n){if(502===n.status||503===n.status||-1===n.status){var a=t.currentEndpoint();if(void 0!==a){var r=a.Snapshots[0].SnapshotRaw.Networks;if(void 0!==r)return r}}return e.reject(n)},n}])},function(e,t){angular.module("portainer.app").factory("VersionInterceptor",["$q","EndpointProvider",function(e,t){"use strict";var n={};return n.responseError=function(n){if(502===n.status||503===n.status||-1===n.status){var a=t.currentEndpoint();if(void 0!==a&&a.Snapshots.length&&a.Snapshots[0].SnapshotRaw){var r=a.Snapshots[0].SnapshotRaw.Version;if(void 0!==r)return r}}return e.reject(n)},n}])},function(e,t){angular.module("portainer.app").factory("VolumesInterceptor",["$q","EndpointProvider",function(e,t){"use strict";var n={};return n.responseError=function(n){if(502===n.status||503===n.status||-1===n.status){var a=t.currentEndpoint();if(void 0!==a){var r=a.Snapshots[0].SnapshotRaw.Volumes;if(void 0!==r)return r}}return e.reject(n)},n}])},function(e,t,n){"use strict";n.r(t);var a=n(24);angular.module("portainer.docker").factory("Build",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){return e(t+"/:endpointId/docker/build",{endpointId:n.endpointID},{buildImage:{method:"POST",ignoreLoadingBar:!0,transformResponse:a.jsonObjectsToArrayHandler,isArray:!0,headers:{"Content-Type":"application/x-tar"}},buildImageOverride:{method:"POST",ignoreLoadingBar:!0,transformResponse:a.jsonObjectsToArrayHandler,isArray:!0}})}])},function(e,t){angular.module("portainer.docker").factory("Commit",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){"use strict";return e(t+"/:endpointId/docker/commit",{endpointId:n.endpointID},{commitContainer:{method:"POST",params:{container:"@id",repo:"@repo"},ignoreLoadingBar:!0}})}])},function(e,t){angular.module("portainer.docker").factory("Config",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){"use strict";return e(t+"/:endpointId/docker/configs/:id/:action",{endpointId:n.endpointID},{get:{method:"GET",params:{id:"@id"}},query:{method:"GET",isArray:!0},create:{method:"POST",params:{action:"create"},ignoreLoadingBar:!0},remove:{method:"DELETE",params:{id:"@id"}}})}])},function(e,t,n){"use strict";n.r(t);var a=n(24);angular.module("portainer.docker").factory("Container",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider","ContainersInterceptor",function(e,t,n,r){return e(t+"/:endpointId/docker/containers/:id/:action",{name:"@name",endpointId:n.endpointID},{query:{method:"GET",params:{all:0,action:"json",filters:"@filters"},isArray:!0,interceptor:r},get:{method:"GET",params:{action:"json"}},stop:{method:"POST",params:{id:"@id",action:"stop"}},restart:{method:"POST",params:{id:"@id",action:"restart"}},kill:{method:"POST",params:{id:"@id",action:"kill"}},pause:{method:"POST",params:{id:"@id",action:"pause"}},unpause:{method:"POST",params:{id:"@id",action:"unpause"}},logs:{method:"GET",params:{id:"@id",action:"logs"},ignoreLoadingBar:!0,transformResponse:a.logsHandler},stats:{method:"GET",params:{id:"@id",stream:!1,action:"stats"},ignoreLoadingBar:!0},top:{method:"GET",params:{id:"@id",action:"top"},ignoreLoadingBar:!0},start:{method:"POST",params:{id:"@id",action:"start"},transformResponse:a.genericHandler},create:{method:"POST",params:{action:"create"},transformResponse:a.genericHandler,ignoreLoadingBar:!0},remove:{method:"DELETE",params:{id:"@id",v:"@v",force:"@force"},transformResponse:a.genericHandler},rename:{method:"POST",params:{id:"@id",action:"rename",name:"@name"},transformResponse:a.genericHandler},exec:{method:"POST",params:{id:"@id",action:"exec"},transformResponse:a.genericHandler,ignoreLoadingBar:!0},inspect:{method:"GET",params:{id:"@id",action:"json"}},update:{method:"POST",params:{id:"@id",action:"update"}},prune:{method:"POST",params:{action:"prune",filters:"@filters"}},resize:{method:"POST",params:{id:"@id",action:"resize",h:"@height",w:"@width"},transformResponse:a.genericHandler,ignoreLoadingBar:!0}})}])},function(e,t,n){"use strict";n.r(t);var a=n(24);angular.module("portainer.docker").factory("Exec",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){return e(t+"/:endpointId/docker/exec/:id/:action",{endpointId:n.endpointID},{resize:{method:"POST",params:{id:"@id",action:"resize",h:"@height",w:"@width"},transformResponse:a.genericHandler,ignoreLoadingBar:!0}})}])},function(e,t,n){"use strict";n.r(t);var a=n(24),r=n(399);angular.module("portainer.docker").factory("Image",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider","HttpRequestHelper","ImagesInterceptor",function(e,t,n,i,s){return e(t+"/:endpointId/docker/images/:id/:action",{endpointId:n.endpointID},{query:{method:"GET",params:{all:0,action:"json"},isArray:!0,interceptor:s},get:{method:"GET",params:{action:"json"}},search:{method:"GET",params:{action:"search"}},history:{method:"GET",params:{action:"history"},isArray:!0},insert:{method:"POST",params:{id:"@id",action:"insert"}},tag:{method:"POST",params:{id:"@id",action:"tag",force:0,repo:"@repo"},ignoreLoadingBar:!0},inspect:{method:"GET",params:{id:"@id",action:"json"}},push:{method:"POST",params:{action:"push",id:"@imageName"},isArray:!0,transformResponse:a.jsonObjectsToArrayHandler,headers:{"X-Registry-Auth":i.registryAuthenticationHeader},ignoreLoadingBar:!0},create:{method:"POST",params:{action:"create",fromImage:"@fromImage"},isArray:!0,transformResponse:a.jsonObjectsToArrayHandler,headers:{"X-Registry-Auth":i.registryAuthenticationHeader},ignoreLoadingBar:!0},download:{method:"GET",params:{action:"get",names:"@names"},transformResponse:r.imageGetResponse,responseType:"blob",ignoreLoadingBar:!0},remove:{method:"DELETE",params:{id:"@id",force:"@force"},isArray:!0,transformResponse:a.deleteImageHandler}})}])},function(e,t,n){"use strict";n.r(t);var a=n(24);angular.module("portainer.docker").factory("Network",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider","NetworksInterceptor",function(e,t,n,r){return e(t+"/:endpointId/docker/networks/:id/:action",{id:"@id",endpointId:n.endpointID},{query:{method:"GET",isArray:!0,interceptor:r},get:{method:"GET"},create:{method:"POST",params:{action:"create"},transformResponse:a.genericHandler,ignoreLoadingBar:!0},remove:{method:"DELETE",transformResponse:a.genericHandler},connect:{method:"POST",params:{action:"connect"}},disconnect:{method:"POST",params:{action:"disconnect"}}})}])},function(e,t){angular.module("portainer.docker").factory("Node",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){"use strict";return e(t+"/:endpointId/docker/nodes/:id/:action",{endpointId:n.endpointID},{query:{method:"GET",isArray:!0},get:{method:"GET",params:{id:"@id"}},update:{method:"POST",params:{id:"@id",action:"update",version:"@version"}},remove:{method:"DELETE",params:{id:"@id"}}})}])},function(e,t){angular.module("portainer.docker").factory("Plugin",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){"use strict";return e(t+"/:endpointId/docker/plugins/:id/:action",{endpointId:n.endpointID},{query:{method:"GET",isArray:!0}})}])},function(e,t){angular.module("portainer.docker").factory("Secret",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){"use strict";return e(t+"/:endpointId/docker/secrets/:id/:action",{endpointId:n.endpointID},{get:{method:"GET",params:{id:"@id"}},query:{method:"GET",isArray:!0},create:{method:"POST",params:{action:"create"},ignoreLoadingBar:!0},remove:{method:"DELETE",params:{id:"@id"}}})}])},function(e,t,n){"use strict";n.r(t);var a=n(24);angular.module("portainer.docker").factory("Service",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider","HttpRequestHelper",function(e,t,n,r){return e(t+"/:endpointId/docker/services/:id/:action",{endpointId:n.endpointID},{get:{method:"GET",params:{id:"@id"}},query:{method:"GET",isArray:!0,params:{filters:"@filters"}},create:{method:"POST",params:{action:"create"},headers:{"X-Registry-Auth":r.registryAuthenticationHeader,version:"1.29"},ignoreLoadingBar:!0},update:{method:"POST",params:{id:"@id",action:"update",version:"@version",rollback:"@rollback"},headers:{version:"1.29"}},remove:{method:"DELETE",params:{id:"@id"}},logs:{method:"GET",params:{id:"@id",action:"logs"},ignoreLoadingBar:!0,transformResponse:a.logsHandler}})}])},function(e,t){angular.module("portainer.docker").factory("Swarm",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){"use strict";return e(t+"/:endpointId/docker/swarm",{endpointId:n.endpointID},{get:{method:"GET"}})}])},function(e,t,n){"use strict";n.r(t);var a=n(24);angular.module("portainer.docker").factory("System",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider","InfoInterceptor","VersionInterceptor",function(e,t,n,r,i){return e(t+"/:endpointId/docker/:action/:subAction",{name:"@name",endpointId:n.endpointID},{info:{method:"GET",params:{action:"info"},interceptor:r},version:{method:"GET",params:{action:"version"},interceptor:i},events:{method:"GET",params:{action:"events",since:"@since",until:"@until"},isArray:!0,transformResponse:a.jsonObjectsToArrayHandler},auth:{method:"POST",params:{action:"auth"}},dataUsage:{method:"GET",params:{action:"system",subAction:"df"}}})}])},function(e,t){angular.module("portainer.docker").factory("SystemEndpoint",["$resource","API_ENDPOINT_ENDPOINTS",function(e,t){"use strict";return e(t+"/:endpointId/docker/:action/:subAction",{name:"@name"},{ping:{method:"GET",params:{action:"_ping",endpointId:"@endpointId"}}})}])},function(e,t,n){"use strict";n.r(t);var a=n(24);angular.module("portainer.docker").factory("Task",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){return e(t+"/:endpointId/docker/tasks/:id/:action",{endpointId:n.endpointID},{get:{method:"GET",params:{id:"@id"}},query:{method:"GET",isArray:!0,params:{filters:"@filters"}},logs:{method:"GET",params:{id:"@id",action:"logs"},ignoreLoadingBar:!0,transformResponse:a.logsHandler}})}])},function(e,t,n){"use strict";n.r(t);var a=n(24);angular.module("portainer.docker").factory("Volume",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider","VolumesInterceptor",function(e,t,n,r){return e(t+"/:endpointId/docker/volumes/:id/:action",{endpointId:n.endpointID},{query:{method:"GET",interceptor:r},get:{method:"GET",params:{id:"@id"}},create:{method:"POST",params:{action:"create"},transformResponse:a.genericHandler,ignoreLoadingBar:!0,headers:{"X-Portainer-VolumeName":function(e){return e.data.Name||""}}},remove:{method:"DELETE",transformResponse:a.genericHandler,params:{id:"@id"}}})}])},function(e,t,n){"use strict";n.r(t);var a=n(172);angular.module("portainer.docker").factory("BuildService",["$q","Build","FileUploadService",function(e,t,n){var r={buildImageFromUpload:function(t,r,i){var s=e.defer();return n.buildImage(t,r,i).then((function(e){var t=new a.ImageBuildModel(e.data);s.resolve(t)})).catch((function(e){s.reject(e)})),s.promise},buildImageFromURL:function(n,r,i){var s={t:n,remote:r,dockerfile:i},o=e.defer();return t.buildImage(s,{}).$promise.then((function(e){var t=new a.ImageBuildModel(e);o.resolve(t)})).catch((function(e){o.reject(e)})),o.promise},buildImageFromDockerfileContent:function(n,r){var i={t:n},s={content:r},o=e.defer();return t.buildImageOverride(i,s).$promise.then((function(e){var t=new a.ImageBuildModel(e);o.resolve(t)})).catch((function(e){o.reject(e)})),o.promise}};return r}])},function(e,t,n){"use strict";n.r(t);var a=n(299);angular.module("portainer.docker").factory("ConfigService",["$q","Config",function(e,t){var n={config:function(n){var r=e.defer();return t.get({id:n}).$promise.then((function(e){var t=new a.ConfigViewModel(e);r.resolve(t)})).catch((function(e){r.reject({msg:"Unable to retrieve config details",err:e})})),r.promise},configs:function(){var n=e.defer();return t.query({}).$promise.then((function(e){var t=e.map((function(e){return new a.ConfigViewModel(e)}));n.resolve(t)})).catch((function(e){n.reject({msg:"Unable to retrieve configs",err:e})})),n.promise},remove:function(n){var a=e.defer();return t.remove({id:n}).$promise.then((function(e){e.message?a.reject({msg:e.message}):a.resolve()})).catch((function(e){a.reject({msg:" config",err:e})})),a.promise},create:function(e){return t.create(e).$promise}};return n}])},function(e,t,n){"use strict";n.r(t);var a=n(171);angular.module("portainer.docker").factory("ContainerService",["$q","Container","ResourceControlService","LogHelper","$timeout",function(e,t,n,r,i){var s={};return s.container=function(n){var r=e.defer();return t.get({id:n}).$promise.then((function(e){var t=new a.ContainerDetailsViewModel(e);r.resolve(t)})).catch((function(e){r.reject({msg:"Unable to retrieve container information",err:e})})),r.promise},s.containers=function(n,r){var i=e.defer();return t.query({all:n,filters:r}).$promise.then((function(e){var t=e.map((function(e){return new a.ContainerViewModel(e)}));i.resolve(t)})).catch((function(e){i.reject({msg:"Unable to retrieve containers",err:e})})),i.promise},s.resizeTTY=function(n,a,r,s){var o=e.defer();return i((function(){t.resize({},{id:n,height:r,width:a}).$promise.then((function(e){e.message?o.reject({msg:"Unable to resize tty of container "+n,err:e.message}):o.resolve(e)})).catch((function(e){o.reject({msg:"Unable to resize tty of container "+n,err:e})}))}),s),o.promise},s.startContainer=function(e){return t.start({id:e},{}).$promise},s.stopContainer=function(e){return t.stop({id:e},{}).$promise},s.restartContainer=function(e){return t.restart({id:e},{}).$promise},s.killContainer=function(e){return t.kill({id:e},{}).$promise},s.pauseContainer=function(e){return t.pause({id:e},{}).$promise},s.resumeContainer=function(e){return t.unpause({id:e},{}).$promise},s.renameContainer=function(e,n){return t.rename({id:e,name:n},{}).$promise},s.updateRestartPolicy=function(e,n,a){return t.update({id:e},{RestartPolicy:{Name:n,MaximumRetryCount:a}}).$promise},s.createContainer=function(n){var a=e.defer();return t.create(n).$promise.then((function(e){a.resolve(e)})).catch((function(e){a.reject({msg:"Unable to create container",err:e})})),a.promise},s.createAndStartContainer=function(t){var n,a=e.defer();return s.createContainer(t).then((function(e){return n=e,s.startContainer(n.Id)})).then((function(){a.resolve(n)})).catch((function(e){a.reject(e)})),a.promise},s.remove=function(n,a){var r=e.defer();return t.remove({id:n.Id,v:a?1:0,force:!0}).$promise.then((function(e){e.message?r.reject({msg:e.message,err:e.message}):r.resolve()})).catch((function(e){r.reject({msg:" container",err:e})})),r.promise},s.createExec=function(n){var a=e.defer();return t.exec({},n).$promise.then((function(e){e.message?a.reject({msg:e.message,err:e.message}):a.resolve(e)})).catch((function(e){a.reject(e)})),a.promise},s.logs=function(n,a,i,s,o,l,c){var d=e.defer(),u={id:n,stdout:a||0,stderr:i||0,timestamps:s||0,since:o||0,tail:l||"all"};return t.logs(u).$promise.then((function(e){var t=r.formatLogs(e.logs,c);d.resolve(t)})).catch((function(e){d.reject(e)})),d.promise},s.containerStats=function(n){var r=e.defer();return t.stats({id:n}).$promise.then((function(e){var t=new a.ContainerStatsViewModel(e);r.resolve(t)})).catch((function(e){r.reject(e)})),r.promise},s.containerTop=function(e){return t.top({id:e}).$promise},s.inspect=function(e){return t.inspect({id:e}).$promise},s.prune=function(e){return t.prune({filters:e}).$promise},s}])},function(e,t){angular.module("portainer.docker").factory("ExecService",["$q","$timeout","Exec",function(e,t,n){"use strict";var a={resizeTTY:function(a,r,i,s){var o=e.defer();return t((function(){n.resize({},{id:a,height:i,width:r}).$promise.then((function(e){e.message?o.reject({msg:"Unable to resize tty of exec",err:e.message}):o.resolve(e)})).catch((function(e){o.reject({msg:"Unable to resize tty of exec",err:e})}))}),s),o.promise}};return a}])},function(e,t,n){"use strict";n.r(t);var a=n(111),r=n(305),i=n(22),s=n(35),o=n(52),l=n(172),c=n(395),d=n(396);angular.module("portainer.docker").factory("ImageService",["$q","Image","ImageHelper","RegistryService","HttpRequestHelper","ContainerService","FileUploadService",function(e,t,n,u,p,m,g){var f={};return f.image=function(n){var a=e.defer();return t.get({id:n}).$promise.then((function(e){if(e.message)a.reject({msg:e.message});else{var t=new c.ImageDetailsViewModel(e);a.resolve(t)}})).catch((function(e){a.reject({msg:"Unable to retrieve image details",err:e})})),a.promise},f.images=function(n){var a=e.defer();return e.all({containers:n?m.containers(1):[],images:t.query({}).$promise}).then((function(e){var t=e.containers,n=e.images.map((function(e){e.ContainerCount=0;for(var n=0;n<t.length;n++){t[n].ImageID===e.Id&&e.ContainerCount++}return new l.ImageViewModel(e)}));a.resolve(n)})).catch((function(e){a.reject({msg:"Unable to retrieve images",err:e})})),a.promise},f.history=function(n){var a=e.defer();return t.history({id:n}).$promise.then((function(e){if(e.message)a.reject({msg:e.message});else{var t=[],n=e.length;angular.forEach(e,(function(e){t.push(new d.ImageLayerViewModel(n,e)),n--})),a.resolve(t)}})).catch((function(e){a.reject({msg:"Unable to retrieve image details",err:e})})),a.promise},f.pushImage=function(a){var r=e.defer(),i=a.Registry.Authentication?u.encodedCredentials(a.Registry):"";p.setRegistryAuthenticationHeader(i);var s=n.createImageConfigForContainer(a);return t.push({imageName:s.fromImage}).$promise.then((function(e){e[e.length-1].error?r.reject({msg:e[e.length-1].error}):r.resolve()})).catch((function(e){r.reject({msg:"Unable to push image tag",err:e})})),r.promise},f.pullImage=function(a,r){var i=a.Registry.Authentication?u.encodedCredentials(a.Registry):"";p.setRegistryAuthenticationHeader(i);var s=n.createImageConfigForContainer(a);if(r)return function(n){var a=e.defer();return t.create({},n).$promise.catch((function(){})).finally((function(){a.resolve()})),a.promise}(s);return function(n){var a=e.defer();return t.create({},n).$promise.then((function(e){if(e.length>0&&e[e.length-1].hasOwnProperty("message")){var t=e[e.length-1];a.reject({msg:t.message})}else a.resolve(e)})).catch((function(e){a.reject({msg:"Unable to pull image",err:e})})),a.promise}(s)},f.tagImage=function(e,n){return t.tag({id:e,repo:n}).$promise},f.downloadImages=function(e){var a=n.getImagesNamesForDownload(e);return t.download(a).$promise},f.uploadImage=function(e){return g.loadImages(e)},f.deleteImage=function(n,a){var r=e.defer();return t.remove({id:n,force:a}).$promise.then((function(e){e[0].message?r.reject({msg:e[0].message}):r.resolve()})).catch((function(e){r.reject({msg:" image",err:e})})),r.promise},f.getUniqueTagListFromImages=function(e){return Object(o.a)(Object(s.a)(e,(function(e){return Object(i.a)(e.RepoTags,(function(e){return-1!==e.indexOf("<none>")})),e.RepoTags?Object(r.a)(e.RepoTags,a.a):[]})))},f}])},function(e,t,n){"use strict";n.r(t);var a=n(300);angular.module("portainer.docker").factory("NetworkService",["$q","Network",function(e,t){var n={create:function(n){var a=e.defer();return t.create(n).$promise.then((function(e){a.resolve(e)})).catch((function(e){a.reject({msg:"Unable to create network",err:e})})),a.promise},network:function(n){var r=e.defer();return t.get({id:n}).$promise.then((function(e){var t=new a.NetworkViewModel(e);r.resolve(t)})).catch((function(e){r.reject({msg:"Unable to retrieve network details",err:e})})),r.promise},networks:function(n,r,i,s){var o=e.defer();return t.query({filters:s}).$promise.then((function(e){var t=e.filter((function(e){return n&&"local"===e.Scope||r&&"swarm"===e.Scope||i&&"swarm"===e.Scope&&!0===e.Attachable?e:void 0})).map((function(e){return new a.NetworkViewModel(e)}));o.resolve(t)})).catch((function(e){o.reject({msg:"Unable to retrieve networks",err:e})})),o.promise},remove:function(e){return t.remove({id:e}).$promise},disconnectContainer:function(e,n,a){return t.disconnect({id:e},{Container:n,Force:a}).$promise},connectContainer:function(e,n,a){var r={Container:n};return a&&(r.EndpointConfig={Aliases:a}),t.connect({id:e},r).$promise}};return n}])},function(e,t,n){"use strict";n.r(t);var a=n(301);angular.module("portainer.docker").factory("NodeService",["$q","Node",function(e,t){var n={};return n.nodes=function(){var n=e.defer();return t.query({}).$promise.then((function(e){var t=e.map((function(e){return new a.NodeViewModel(e)}));n.resolve(t)})).catch((function(e){n.reject({msg:"Unable to retrieve nodes",err:e})})),n.promise},n.node=function(n){var r=e.defer();return t.get({id:n}).$promise.then((function(e){var t=new a.NodeViewModel(e);return r.resolve(t)})).catch((function(e){r.reject({msg:"Unable to retrieve node",err:e})})),r.promise},n.updateNode=function(e){return t.update({id:e.Id,version:e.Version},e).$promise},n.getActiveManager=function(){var t=e.defer();return n.nodes().then((function(e){for(var n=0;n<e.length;++n){var a=e[n];if("manager"===a.Role&&"active"===a.Availability&&"ready"===a.Status&&"0.0.0.0"!==a.Addr){t.resolve(a);break}}})).catch((function(e){t.reject({msg:"Unable to retrieve nodes",err:e})})),t.promise},n}])},function(e,t,n){"use strict";n.r(t);var a=n(10),r=n(397);angular.module("portainer.docker").factory("PluginService",["$q","Plugin","SystemService",function(e,t,n){var i={};function s(t,r,s){var o=e.defer();return e.all({system:n.plugins(),plugins:t?[]:i.plugins()}).then((function(e){var t=[],n=e.system,i=e.plugins;n[r]&&(t=t.concat(n[r]));for(var l=0;l<i.length;l++){var c=i[l];c.Enabled&&Object(a.a)(c.Config.Interface.Types,s)&&t.push(c.Name)}o.resolve(t)})).catch((function(e){o.reject({msg:e.msg,err:e})})),o.promise}return i.plugins=function(){var n=e.defer(),a=[];return t.query({}).$promise.then((function(e){for(var t=0;t<e.length;t++){var n=new r.PluginViewModel(e[t]);a.push(n)}})).finally((function(){n.resolve(a)})),n.promise},i.volumePlugins=function(e){return s(e,"Volume","docker.volumedriver/1.0")},i.networkPlugins=function(e){return s(e,"Network","docker.networkdriver/1.0")},i.loggingPlugins=function(e){return s(e,"Log","docker.logdriver/1.0")},i}])},function(e,t,n){"use strict";n.r(t);var a=n(302);angular.module("portainer.docker").factory("SecretService",["$q","Secret",function(e,t){var n={secret:function(n){var r=e.defer();return t.get({id:n}).$promise.then((function(e){var t=new a.SecretViewModel(e);r.resolve(t)})).catch((function(e){r.reject({msg:"Unable to retrieve secret details",err:e})})),r.promise},secrets:function(){var n=e.defer();return t.query({}).$promise.then((function(e){var t=e.map((function(e){return new a.SecretViewModel(e)}));n.resolve(t)})).catch((function(e){n.reject({msg:"Unable to retrieve secrets",err:e})})),n.promise},remove:function(n){var a=e.defer();return t.remove({id:n}).$promise.then((function(e){e.message?a.reject({msg:e.message}):a.resolve()})).catch((function(e){a.reject({msg:" secret",err:e})})),a.promise},create:function(e){return t.create(e).$promise}};return n}])},function(e,t,n){"use strict";n.r(t);var a=n(303);angular.module("portainer.docker").factory("ServiceService",["$q","Service","ServiceHelper","TaskService","ResourceControlService","LogHelper",function(e,t,n,r,i,s){var o={services:function(n){var r=e.defer();return t.query({filters:n||{}}).$promise.then((function(e){var t=e.map((function(e){return new a.ServiceViewModel(e)}));r.resolve(t)})).catch((function(e){r.reject({msg:"Unable to retrieve services",err:e})})),r.promise},service:function(n){var r=e.defer();return t.get({id:n}).$promise.then((function(e){var t=new a.ServiceViewModel(e);r.resolve(t)})).catch((function(e){r.reject({msg:"Unable to retrieve service details",err:e})})),r.promise},remove:function(n){var a=e.defer();return t.remove({id:n.Id}).$promise.then((function(e){e.message?a.reject({msg:e.message,err:e.message}):a.resolve()})).catch((function(e){a.reject({msg:" service",err:e})})),a.promise},update:function(e,n,a){return o.service(e.Id).then((function(r){var i={id:e.Id,version:r.Version};return a&&(i.rollback=a),t.update(i,n).$promise}))},logs:function(n,a,r,i,o,l){var c=e.defer(),d={id:n,stdout:a||0,stderr:r||0,timestamps:i||0,since:o||0,tail:l||"all"};return t.logs(d).$promise.then((function(e){var t=s.formatLogs(e.logs,!0);c.resolve(t)})).catch((function(e){c.reject(e)})),c.promise}};return o}])},function(e,t,n){"use strict";n.r(t);var a=n(398);angular.module("portainer.docker").factory("SwarmService",["$q","Swarm",function(e,t){var n={swarm:function(){var n=e.defer();return t.get().$promise.then((function(e){var t=new a.SwarmViewModel(e);n.resolve(t)})).catch((function(e){n.reject({msg:"Unable to retrieve Swarm details",err:e})})),n.promise}};return n}])},function(e,t,n){"use strict";n.r(t);var a=n(394);angular.module("portainer.docker").factory("SystemService",["$q","System","SystemEndpoint",function(e,t,n){var r={plugins:function(){var n=e.defer();return t.info({}).$promise.then((function(e){var t=e.Plugins;n.resolve(t)})).catch((function(e){n.reject({msg:"Unable to retrieve plugins information from system",err:e})})),n.promise},info:function(){return t.info({}).$promise},ping:function(e){return n.ping({endpointId:e}).$promise},version:function(){return t.version({}).$promise},events:function(n,r){var i=e.defer();return t.events({since:n,until:r}).$promise.then((function(e){var t=e.map((function(e){return new a.EventViewModel(e)}));i.resolve(t)})).catch((function(e){i.reject({msg:"Unable to retrieve engine events",err:e})})),i.promise},dataUsage:function(){return t.dataUsage().$promise}};return r}])},function(e,t,n){"use strict";n.r(t);var a=n(304);angular.module("portainer.docker").factory("TaskService",["$q","Task","LogHelper",function(e,t,n){var r={task:function(n){var r=e.defer();return t.get({id:n}).$promise.then((function(e){var t=new a.TaskViewModel(e);r.resolve(t)})).catch((function(e){r.reject({msg:"Unable to retrieve task details",err:e})})),r.promise},tasks:function(n){var r=e.defer();return t.query({filters:n||{}}).$promise.then((function(e){var t=e.map((function(e){return new a.TaskViewModel(e)}));r.resolve(t)})).catch((function(e){r.reject({msg:"Unable to retrieve tasks",err:e})})),r.promise},logs:function(a,r,i,s,o,l){var c=e.defer(),d={id:a,stdout:r||0,stderr:i||0,timestamps:s||0,since:o||0,tail:l||"all"};return t.logs(d).$promise.then((function(e){var t=n.formatLogs(e.logs,!0);c.resolve(t)})).catch((function(e){c.reject(e)})),c.promise}};return r}])},function(e,t,n){"use strict";n.r(t);var a=n(240);angular.module("portainer.docker").factory("VolumeService",["$q","Volume","VolumeHelper",function(e,t,n){var r={volumes:function(n){var r=e.defer();return t.query(n).$promise.then((function(e){var t=e.Volumes||[];t=t.map((function(e){return new a.VolumeViewModel(e)})),r.resolve(t)})).catch((function(e){r.reject({msg:"Unable to retrieve volumes",err:e})})),r.promise},volume:function(n){var r=e.defer();return t.get({id:n}).$promise.then((function(e){var t=new a.VolumeViewModel(e);r.resolve(t)})).catch((function(e){r.reject({msg:"Unable to retrieve volume details",err:e})})),r.promise},getVolumes:function(){return t.query({}).$promise},remove:function(n){var a=e.defer();return t.remove({id:n.Id}).$promise.then((function(e){e.message?a.reject({msg:e.message,err:e.message}):a.resolve()})).catch((function(e){a.reject({msg:" volume",err:e})})),a.promise},createVolumeConfiguration:function(e,t,a){return{Name:e,Driver:t,DriverOpts:n.createDriverOptions(a)}},createVolume:function(n){var r=e.defer();return t.create(n).$promise.then((function(e){if(e.message)r.reject({msg:e.message});else{var t=new a.VolumeViewModel(e);r.resolve(t)}})).catch((function(e){r.reject({msg:"Unable to create volume",err:e})})),r.promise},createVolumes:function(t){var n=t.map((function(e){return r.createVolume(e)}));return e.all(n)},createXAutoGeneratedLocalVolumes:function(t){for(var n=[],a=0;a<t;a++)n.push(r.createVolume({Driver:"local"}));return e.all(n)}};return r}])},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a);function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function o(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){o(i,a,r,s,l,"next",e)}function l(e){o(i,a,r,s,l,"throw",e)}s(void 0)}))}}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function e(t,n,a,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$state=t,this.ConfigService=n,this.Notifications=a,this.$async=r,this.removeAction=this.removeAction.bind(this),this.removeActionAsync=this.removeActionAsync.bind(this),this.getConfigs=this.getConfigs.bind(this),this.getConfigsAsync=this.getConfigsAsync.bind(this)}var t,n,a,r,s,o;return e.$inject=["$state","ConfigService","Notifications","$async"],t=e,(n=[{key:"getConfigs",value:function(){return this.$async(this.getConfigsAsync)}},{key:"getConfigsAsync",value:(o=l(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.ConfigService.configs();case 3:this.configs=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),this.Notifications.error("",e.t0,"");case 9:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(){return o.apply(this,arguments)})},{key:"$onInit",value:(s=l(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.configs=[],this.getConfigs();case 2:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"removeAction",value:function(e){return this.$async(this.removeActionAsync,e)}},{key:"removeActionAsync",value:(r=l(regeneratorRuntime.mark((function e(t){var n,a,r,s,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.length,a=i(t),e.prev=2,a.s();case 4:if((r=a.n()).done){e.next=23;break}return s=r.value,e.prev=6,e.next=9,this.ConfigService.remove(s.Id);case 9:this.Notifications.success("Config successfully",s.Name),o=this.configs.indexOf(s),this.configs.splice(o,1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),this.Notifications.error("",e.t0,"");case 17:return e.prev=17,0==--n&&this.$state.reload(),e.finish(17);case 21:e.next=4;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(2),a.e(e.t1);case 28:return e.prev=28,a.f(),e.finish(28);case 31:case"end":return e.stop()}}),e,this,[[2,25,28,31],[6,14,17,21]])}))),function(e){return r.apply(this,arguments)})}])&&c(t.prototype,n),a&&c(t,a),e}();t.default=d,r.a.module("portainer.docker").controller("ConfigsController",d)},function(e,t,n){"use strict";n.r(t);var a=n(38),r=n(41),i=n(1),s=n.n(i);function o(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){o(i,a,r,s,l,"next",e)}function l(e){o(i,a,r,s,l,"throw",e)}s(void 0)}))}}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function e(t,n,a,i,s,o,l,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$state=n,this.$transition$=a,this.Notifications=i,this.ConfigService=s,this.Authentication=o,this.FormValidator=l,this.ResourceControlService=c,this.$async=t,this.formValues={Name:"",Labels:[],AccessControlData:new r.AccessControlFormData,ConfigContent:""},this.state={formValidationError:""},this.editorUpdate=this.editorUpdate.bind(this),this.createAsync=this.createAsync.bind(this)}var t,n,i,s,o;return e.$inject=["$async","$state","$transition$","Notifications","ConfigService","Authentication","FormValidator","ResourceControlService"],t=e,(n=[{key:"$onInit",value:(o=l(regeneratorRuntime.mark((function e(){var t,n,r,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.$transition$.params().id){e.next=3;break}return this.formValues.displayCodeEditor=!0,e.abrupt("return");case 3:return e.prev=3,e.next=6,this.ConfigService.config(this.$transition$.params().id);case 6:for(t=e.sent,this.formValues.Name=t.Name+"_copy",this.formValues.Data=t.Data,n=Object(a.a)(t.Labels),r=0;r<n.length;r++)i=n[r],s=t.Labels[i],this.formValues.Labels.push({name:i,value:s});this.formValues.displayCodeEditor=!0,e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),this.formValues.displayCodeEditor=!0,this.Notifications.error("",e.t0,"");case 18:case"end":return e.stop()}}),e,this,[[3,14]])}))),function(){return o.apply(this,arguments)})},{key:"addLabel",value:function(){this.formValues.Labels.push({name:"",value:""})}},{key:"removeLabel",value:function(e){this.formValues.Labels.splice(e,1)}},{key:"prepareLabelsConfig",value:function(e){var t={};this.formValues.Labels.forEach((function(e){e.name&&e.value&&(t[e.name]=e.value)})),e.Labels=t}},{key:"prepareConfigData",value:function(e){var t=this.formValues.ConfigContent;e.Data=btoa(unescape(encodeURIComponent(t)))}},{key:"prepareConfiguration",value:function(){var e={};return e.Name=this.formValues.Name,this.prepareConfigData(e),this.prepareLabelsConfig(e),e}},{key:"validateForm",value:function(e,t){var n;return this.state.formValidationError="",!(n=this.FormValidator.validateAccessControl(e,t))||(this.state.formValidationError=n,!1)}},{key:"create",value:function(){return this.$async(this.createAsync)}},{key:"createAsync",value:(s=l(regeneratorRuntime.mark((function e(){var t,n,a,r,i,s,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.formValues.AccessControlData,n=this.Authentication.getUserDetails(),a=this.Authentication.isAdmin(),""!==this.formValues.ConfigContent){e.next=6;break}return this.state.formValidationError="Config content must not be empty",e.abrupt("return");case 6:if(this.validateForm(t,a)){e.next=8;break}return e.abrupt("return");case 8:return r=this.prepareConfiguration(),e.prev=9,e.next=12,this.ConfigService.create(r);case 12:return i=e.sent,s=i.Portainer.ResourceControl,o=n.ID,e.next=17,this.ResourceControlService.applyResourceControl(o,t,s);case 17:this.Notifications.success("Config successfully"),this.$state.go("docker.configs",{},{reload:!0}),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),this.Notifications.error("",e.t0,"");case 24:case"end":return e.stop()}}),e,this,[[9,21]])}))),function(){return s.apply(this,arguments)})},{key:"editorUpdate",value:function(e){this.formValues.ConfigContent=e.getValue()}}])&&c(t.prototype,n),i&&c(t,i),e}();t.default=d,s.a.module("portainer.docker").controller("CreateConfigController",d)},function(e,t){angular.module("portainer.docker").controller("ConfigController",["$scope","$transition$","$state","ConfigService","Notifications",function(e,t,n,a,r){e.removeConfig=function(e){a.remove(e).then((function(){r.success("Config successfully"),n.go("docker.configs",{})})).catch((function(e){r.error("",e,"")}))},a.config(t.params().id).then((function(t){e.config=t})).catch((function(e){r.error("",e,"")}))}])},function(e,t,n){"use strict";n.r(t);var a=n(202);angular.module("portainer.docker").controller("ContainerConsoleController",["$scope","$transition$","ContainerService","ImageService","EndpointProvider","Notifications","ContainerHelper","ExecService","HttpRequestHelper","LocalStorage","CONSOLE_COMMANDS_LABEL_PREFIX",function(e,t,n,r,i,s,o,l,c,d,u){var p,m,g=Object.freeze({disconnected:0,connecting:1,connected:2});function f(e,t){t=t||0,m.fit();var n=m.cols;m.resize(n,30),e(n+t,30+t,1)}function h(n,r){var i=f.bind(this,r);t.params().nodeName&&(n+="&nodeName="+t.params().nodeName),n=n.indexOf("https")>-1?n.replace("https://","wss://"):n.replace("http://","ws://"),(p=new WebSocket(n)).onopen=function(){e.state=g.connected,(m=new a.Terminal).on("data",(function(e){p.send(e)}));var t=document.getElementById("terminal-container");m.open(t),m.focus(),m.setOption("cursorBlink",!0),window.onresize=function(){i(),e.$apply()},e.$watch("toggle",(function(){setTimeout(i,400)})),p.onmessage=function(e){m.write(e.data)},p.onerror=function(t){e.disconnect(),e.$apply(),s.error("",t,"")},p.onclose=function(){e.disconnect(),e.$apply()},i(1),e.$apply()}}e.loaded=!1,e.states=g,e.state=g.disconnected,e.formValues={},e.containerCommands=[],e.$on("$stateChangeStart",(function(){e.disconnect()})),e.connectAttach=function(){var a=this;if(!(e.state>g.disconnected)){e.state=g.connecting;var r=t.params().id;n.container(r).then((function(t){if(!t.State.Running)return s.error("",t," "+r+" !"),void e.disconnect();var o={token:d.getJWT(),endpointId:i.endpointID(),id:r};h(window.location.href.split("#")[0]+"api/websocket/attach?"+Object.keys(o).map((function(e){return e+"="+o[e]})).join("&"),n.resizeTTY.bind(a,r))})).catch((function(t){s.error("Error",t,"Unable to retrieve container details"),e.disconnect()}))}},e.connectExec=function(){if(!(e.state>g.disconnected)){e.state=g.connecting;var a=e.formValues.isCustomCommand?e.formValues.customCommand:e.formValues.command,r={id:t.params().id,AttachStdin:!0,AttachStdout:!0,AttachStderr:!0,Tty:!0,User:e.formValues.user,Cmd:o.commandStringToArray(a)};n.createExec(r).then((function(e){var t={token:d.getJWT(),endpointId:i.endpointID(),id:e.Id};h(window.location.href.split("#")[0]+"api/websocket/exec?"+Object.keys(t).map((function(e){return e+"="+t[e]})).join("&"),l.resizeTTY.bind(this,t.id))})).catch((function(t){s.error("",t,""),e.disconnect()}))}},e.disconnect=function(){p&&p.close(),e.state>g.disconnected&&(e.state=g.disconnected,m&&(m.write("\n\r(connection closed)"),m.dispose()))},e.autoconnectAttachView=function(){return e.initView().then((function(){e.container.State.Running&&e.connectAttach()}))},e.initView=function(){return c.setPortainerAgentTargetHeader(t.params().nodeName),n.container(t.params().id).then((function(t){var n=t;return e.container=n,r.image(n.Image)})).then((function(t){var n=t,a=e.container.Config.Labels;e.imageOS=n.Os,e.formValues.command="windows"===n.Os?"powershell":"bash",e.containerCommands=Object.keys(a).filter((function(e){return 0===e.indexOf(u)})).map((function(e){return{title:e.replace(u,""),command:a[e]}})),e.loaded=!0})).catch((function(e){s.error("Error",e,"Unable to retrieve container details")}))}}])},function(e,t){angular.module("portainer.docker").controller("ContainersController",["$scope","ContainerService","Notifications","EndpointProvider",function(e,t,n,a){function r(){t.containers(1).then((function(t){e.containers=t,e.offlineMode=a.offlineMode()})).catch((function(t){n.error("",t,""),e.containers=[]}))}e.offlineMode=!1,e.getContainers=r,r()}])},function(e,t,n){"use strict";n.r(t);var a=n(555),r=n(4),i=n(248),s=n(2),o=n(55),l=n(5),c=n(167),d=n(53),u=n(7),p=n(61),m=n(218),g=n(41),f=n(171);function h(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){h(i,a,r,s,o,"next",e)}function o(e){h(i,a,r,s,o,"throw",e)}s(void 0)}))}}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}angular.module("portainer.docker").controller("CreateContainerController",["$q","$scope","$async","$state","$timeout","$transition$","$filter","Container","ContainerHelper","Image","ImageHelper","Volume","NetworkService","ResourceControlService","Authentication","Notifications","ContainerService","ImageService","FormValidator","ModalService","RegistryService","SystemService","SettingsService","PluginService","HttpRequestHelper",function(e,t,n,h,y,x,w,k,S,C,$,A,P,I,T,N,R,E,O,D,V,U,L,_,j){function F(){var e=angular.copy(t.config);return function(e){Object(d.a)(e.Cmd)||"default"==t.formValues.CmdMode?delete e.Cmd:e.Cmd=S.commandStringToArray(e.Cmd)}(e),function(e){("default"==t.formValues.EntrypointMode||Object(d.a)(e.Cmd)&&Object(d.a)(e.Entrypoint))&&(e.Entrypoint=null)}(e),function(e){var n=e.HostConfig.NetworkMode,a=t.formValues.NetworkContainer,r=a;a&&"object"===b(a)&&(r=w("trimcontainername")(a.Names[0]));var i=n;if(r&&(i+=":"+r,e.Hostname=""),e.HostConfig.NetworkMode=i,e.MacAddress=t.formValues.MacAddress,e.NetworkingConfig.EndpointsConfig[i]={IPAMConfig:{IPv4Address:t.formValues.IPv4,IPv6Address:t.formValues.IPv6}},i&&Object(c.a)(t.config.NetworkingConfig.EndpointsConfig[i],"Aliases")){var d=t.config.NetworkingConfig.EndpointsConfig[i].Aliases;e.NetworkingConfig.EndpointsConfig[i].Aliases=Object(l.a)(d,(function(e){return!Object(o.a)(t.fromContainer.Id,e)}))}var u=[];t.formValues.DnsPrimary&&u.push(t.formValues.DnsPrimary),t.formValues.DnsSecondary&&u.push(t.formValues.DnsSecondary),e.HostConfig.Dns=u,e.HostConfig.ExtraHosts=Object(s.a)(Object(l.a)(t.formValues.ExtraHosts,(function(e){return e.value})),"value")}(e),function(e){var n=$.createImageConfigForContainer(t.formValues.RegistryModel);e.Image=n.fromImage}(e),function(e){var t=S.preparePortBindings(e.HostConfig.PortBindings);e.ExposedPorts={},Object(u.a)(t,(function(t,n){return e.ExposedPorts[n]={}})),e.HostConfig.PortBindings=t}(e),function(e){var n=t.formValues.Console,a=!0,r=!0;"tty"===n?a=!1:"interactive"===n?r=!1:"none"===n&&(a=!1,r=!1),e.OpenStdin=a,e.Tty=r}(e),function(e){var t=[];e.Env.forEach((function(e){e.name&&e.value&&t.push(e.name+"="+e.value)})),e.Env=t}(e),function(e){var n=[],a={};t.formValues.Volumes.forEach((function(e){var t=e.name,r=e.containerPath;if(t&&r){var i=t+":"+r;a[r]={},e.readOnly&&(i+=":ro"),n.push(i)}})),e.HostConfig.Binds=n,e.Volumes=a}(e),function(e){var n={};t.formValues.Labels.forEach((function(e){e.name&&(e.value?n[e.name]=e.value:n[e.name]="")})),e.Labels=n}(e),function(e){var t=[];e.HostConfig.Devices.forEach((function(e){e.pathOnHost&&(""===e.pathInContainer&&(e.pathInContainer=e.pathOnHost),t.push({PathOnHost:e.pathOnHost,PathInContainer:e.pathInContainer,CgroupPermissions:"rwm"}))})),e.HostConfig.Devices=t}(e),function(e){if(t.formValues.MemoryLimit>=0){var n=(Math.round(8*t.formValues.MemoryLimit)/8).toFixed(3);n*=1048576,e.HostConfig.Memory=n}if(t.formValues.MemoryReservation>=0){var a=(Math.round(8*t.formValues.MemoryReservation)/8).toFixed(3);a*=1048576,e.HostConfig.MemoryReservation=a}t.formValues.CpuLimit>=0&&(e.HostConfig.NanoCpus=1e9*t.formValues.CpuLimit)}(e),function(e){var n={};t.formValues.LogDriverName&&(e.HostConfig.LogConfig={Type:t.formValues.LogDriverName},"none"!==t.formValues.LogDriverName&&(t.formValues.LogDriverOpts.forEach((function(e){e.name&&(n[e.name]=e.value)})),0!==Object.keys(n).length&&n.constructor===Object&&(e.HostConfig.LogConfig.Config=n)))}(e),function(e){var n=t.formValues.capabilities.filter((function(e){return!0===e.allowed})),a=t.formValues.capabilities.filter((function(e){return!1===e.allowed})),r=function(e){return e.capability};e.HostConfig.CapAdd=n.map(r),e.HostConfig.CapDrop=a.map(r)}(e),e}function M(){k.get({id:x.params().from}).$promise.then((function(e){var n,a,o=new f.ContainerDetailsViewModel(e);o.ResourceControl&&o.ResourceControl.Public&&(t.formValues.AccessControlData.AccessControlEnabled=!1),t.fromContainer=o,t.state.mode="duplicate",t.config=S.configFromContainer(o.Model),t.config.Cmd&&(t.config.Cmd=S.commandArrayToString(t.config.Cmd),t.formValues.CmdMode="override"),Object(i.a)(t.config,"Entrypoint")&&(null==t.config.Entrypoint&&(t.config.Entrypoint=""),t.formValues.EntrypointMode="override"),n=e.HostConfig.LogConfig,t.formValues.LogDriverName=n.Type,t.formValues.LogDriverOpts=Object(s.a)(n.Config,(function(e,t){return{name:t,value:e}})),a=S.sortAndCombinePorts(t.config.HostConfig.PortBindings),t.config.HostConfig.PortBindings=a,function(e){for(var n in e.Mounts)if({}.hasOwnProperty.call(e.Mounts,n)){var a=e.Mounts[n],r={type:a.Type,name:a.Name||a.Source,containerPath:a.Destination,readOnly:!1===a.RW};t.formValues.Volumes.push(r)}}(e),function(e){if(t.config.NetworkingConfig={EndpointsConfig:{}},"default"===e.HostConfig.NetworkMode&&(t.config.HostConfig.NetworkMode="bridge",Object(r.a)(t.availableNetworks,{Name:"bridge"})||(t.config.HostConfig.NetworkMode="nat")),0===t.config.HostConfig.NetworkMode.indexOf("container:")){var n=t.config.HostConfig.NetworkMode.split(/^container:/)[1];for(var a in t.config.HostConfig.NetworkMode="container",t.runningContainers)t.runningContainers[a].Id==n&&(t.formValues.NetworkContainer=t.runningContainers[a])}if(t.fromContainerMultipleNetworks=Object.keys(e.NetworkSettings.Networks).length>=2,e.NetworkSettings.Networks[t.config.HostConfig.NetworkMode]&&e.NetworkSettings.Networks[t.config.HostConfig.NetworkMode].IPAMConfig&&(e.NetworkSettings.Networks[t.config.HostConfig.NetworkMode].IPAMConfig.IPv4Address&&(t.formValues.IPv4=e.NetworkSettings.Networks[t.config.HostConfig.NetworkMode].IPAMConfig.IPv4Address),e.NetworkSettings.Networks[t.config.HostConfig.NetworkMode].IPAMConfig.IPv6Address&&(t.formValues.IPv6=e.NetworkSettings.Networks[t.config.HostConfig.NetworkMode].IPAMConfig.IPv6Address)),t.config.NetworkingConfig.EndpointsConfig[t.config.HostConfig.NetworkMode]=e.NetworkSettings.Networks[t.config.HostConfig.NetworkMode],Object.keys(e.NetworkSettings.Networks).length>1){var i=e.NetworkSettings.Networks[Object.keys(e.NetworkSettings.Networks)[0]];t.config.NetworkingConfig.EndpointsConfig[t.config.HostConfig.NetworkMode]=i,t.extraNetworks=angular.copy(e.NetworkSettings.Networks),delete t.extraNetworks[Object.keys(e.NetworkSettings.Networks)[0]]}if(t.formValues.MacAddress=e.Config.MacAddress,e.HostConfig.Dns&&e.HostConfig.Dns[0]&&(t.formValues.DnsPrimary=e.HostConfig.Dns[0],e.HostConfig.Dns[1]&&(t.formValues.DnsSecondary=e.HostConfig.Dns[1])),t.config.HostConfig.ExtraHosts){for(var s=t.config.HostConfig.ExtraHosts,o=0;o<s.length;o++){var l=s[o];t.formValues.ExtraHosts.push({value:l})}t.config.HostConfig.ExtraHosts=[]}}(e),function(){var e=[];for(var n in t.config.Env)if({}.hasOwnProperty.call(t.config.Env,n)){var a=t.config.Env[n].split(/\=(.*)/);e.push({name:a[0],value:a[1]})}t.config.Env=e}(),function(){for(var e in t.config.Labels)({}).hasOwnProperty.call(t.config.Labels,e)&&t.formValues.Labels.push({name:e,value:t.config.Labels[e]})}(),t.config.OpenStdin&&t.config.Tty?t.formValues.Console="both":!t.config.OpenStdin&&t.config.Tty?t.formValues.Console="tty":t.config.OpenStdin&&!t.config.Tty?t.formValues.Console="interactive":t.config.OpenStdin||t.config.Tty||(t.formValues.Console="none"),function(){var e=[];for(var n in t.config.HostConfig.Devices)if({}.hasOwnProperty.call(t.config.HostConfig.Devices,n)){var a=t.config.HostConfig.Devices[n];e.push({pathOnHost:a.PathOnHost,pathInContainer:a.PathInContainer})}t.config.HostConfig.Devices=e}(),V.retrievePorRegistryModelFromRepository(t.config.Image).then((function(e){t.formValues.RegistryModel=e})).catch((function(e){N.error("",e,"")})),function(e){e.HostConfig.NanoCpus&&(t.formValues.CpuLimit=e.HostConfig.NanoCpus/1e9),e.HostConfig.Memory&&(t.formValues.MemoryLimit=e.HostConfig.Memory/1024/1024),e.HostConfig.MemoryReservation&&(t.formValues.MemoryReservation=e.HostConfig.MemoryReservation/1024/1024)}(e),function(e){function n(e){return e.capability===s.capability}e.HostConfig.CapAdd&&e.HostConfig.CapAdd.forEach((function(e){t.formValues.capabilities.push(new m.ContainerCapability(e,!0))})),e.HostConfig.CapDrop&&e.HostConfig.CapDrop.forEach((function(e){t.formValues.capabilities.push(new m.ContainerCapability(e,!1))}));for(var a=new m.ContainerCapabilities,i=0;i<a.length;i++){var s=a[i];Object(r.a)(t.formValues.capabilities,n)||t.formValues.capabilities.push(s)}t.formValues.capabilities.sort((function(e,t){return e.capability<t.capability?-1:1}))}(e)})).catch((function(e){N.error("",e,"")}))}function K(){return(K=v(regeneratorRuntime.mark((function e(){var n,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x.params().nodeName,t.formValues.NodeName=n,j.setPortainerAgentTargetHeader(n),t.isAdmin=T.isAdmin(),e.next=6,B();case 6:return t.showDeviceMapping=e.sent,e.next=9,H();case 9:t.areContainerCapabilitiesEnabled=e.sent,t.isAdminOrEndpointAdmin=T.isAdmin(),A.query({},(function(e){t.availableVolumes=e.Volumes.sort((function(e,t){return e.Name.localeCompare(t.Name)}))}),(function(e){N.error("",e,"")})),a=t.applicationState.endpoint.mode.provider,i=t.applicationState.endpoint.apiVersion,P.networks("DOCKER_STANDALONE"===a||"DOCKER_SWARM_MODE"===a,!1,"DOCKER_SWARM_MODE"===a&&i>=1.25).then((function(e){e.push({Name:"container"}),t.availableNetworks=e.sort((function(e,t){return e.Name.localeCompare(t.Name)})),Object(r.a)(e,{Name:"nat"})&&(t.config.HostConfig.NetworkMode="nat")})).catch((function(e){N.error("",e,"")})),k.query({},(function(e){var n=e;t.runningContainers=n,x.params().from?M():(t.fromContainer={},t.formValues.capabilities=t.areContainerCapabilitiesEnabled?new m.ContainerCapabilities:[])}),(function(e){N.error("",e,"")})),U.info().then((function(e){t.availableRuntimes=e.Runtimes?Object.keys(e.Runtimes):[],t.state.sliderMaxCpu=32,e.NCPU&&(t.state.sliderMaxCpu=e.NCPU),t.state.sliderMaxMemory=32768,e.MemTotal&&(t.state.sliderMaxMemory=Math.floor(e.MemTotal/1e3/1e3))})).catch((function(e){N.error("",e,"")})),L.publicSettings().then((function(e){t.allowBindMounts=t.isAdminOrEndpointAdmin||e.AllowBindMountsForRegularUsers,t.allowPrivilegedMode=e.AllowPrivilegedModeForRegularUsers})).catch((function(e){N.error("",e,"")})),_.loggingPlugins(i<1.25).then((function(e){t.availableLoggingDrivers=e}));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return z.apply(this,arguments)}function z(){return(z=v(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.applicationState.application.allowDeviceMappingForRegularUsers,e.abrupt("return",n||T.isAdmin());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return G.apply(this,arguments)}function G(){return(G=v(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.applicationState.application.allowContainerCapabilitiesForRegularUsers,e.abrupt("return",n||T.isAdmin());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.create=function(){var r=null;return j.setPortainerAgentTargetHeader(t.formValues.NodeName),s().then((function(e){return r=e,e})).then((function(t){if(!t)return e.when(!0);return n=e.defer(),D.confirm({title:" ?",message:"Portainer?",buttons:{confirm:{label:"Replace",className:"btn-danger"}},callback:function(e){n.resolve(e)}}),n.promise;var n})).then((function(n){if(!n)return e.when();if(!function(e,n){var a;return t.state.formValidationError="",!(a=O.validateAccessControl(e,n))||(t.state.formValidationError=a,!1)}(t.formValues.AccessControlData,t.isAdmin))return e.when();return t.state.actionInProgress=!0,function(){return e.when(t.formValues.alwaysPull&&E.pullImage(t.formValues.RegistryModel,!0))}().then(u).then(m).then(g).then(f).then(b).then(y).catch(c)})).catch((function(e){N.error("",e,"")})).finally((function(){t.state.actionInProgress=!1}));function s(){return k.query({all:1,filters:{name:["^/"+t.config.name+"$"]}}).$promise.then((function(e){if(e.length)return e[0]})).catch((function(e){N.error("",e,"")}))}function c(t){var n=e.defer();return s().then((function(e){if(e&&(!r||e.Id!==r.Id))return R.remove(e,!0)})).then(d).then((function(){n.reject(t)})).catch((function(e){n.reject(e)})),n.promise}function d(){if(r)return R.renameContainer(r.Id,r.Names[0].substring(1))}function u(){return r?function(t){if("running"!==t.State)return e.when();return R.stopContainer(t.Id)}(r).then(p):e.when()}function p(){return R.renameContainer(r.Id,r.Names[0].substring(1)+"-old")}function m(){return n(v(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F(),e.next=3,R.createAndStartContainer(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))))}function g(e){var n=T.getUserDetails().ID,a=e.Portainer.ResourceControl,r=e.Id,i=t.formValues.AccessControlData;return I.applyResourceControl(n,i,a).then((function(){return r}))}function f(n){if(!t.extraNetworks)return e.when();var r=Object(a.a)(t.extraNetworks,(function(e,a){if(Object(i.a)(e,"Aliases"))var r=Object(l.a)(e.Aliases,(function(e){return!Object(o.a)(t.fromContainer.Id,e)}));return P.connectContainer(a,n,r)}));return e.all(r)}function b(){var t=e.defer();if(r)return R.remove(r,!0).then((function(){N.success("Container Removed",r.Id),t.resolve()})).catch((function(e){t.reject({msg:" container",err:e})})),t.promise;t.resolve()}function y(){N.success(""),h.go("docker.containers",{},{reload:!0})}},t.formValues={alwaysPull:!0,Console:"none",Volumes:[],NetworkContainer:null,Labels:[],ExtraHosts:[],MacAddress:"",IPv4:"",IPv6:"",DnsPrimary:"",DnsSecondary:"",AccessControlData:new g.AccessControlFormData,CpuLimit:0,MemoryLimit:0,MemoryReservation:0,CmdMode:"default",EntrypointMode:"default",NodeName:null,capabilities:[],LogDriverName:"",LogDriverOpts:[],RegistryModel:new p.PorImageRegistryModel},t.extraNetworks={},t.state={formValidationError:"",actionInProgress:!1,mode:""},t.refreshSlider=function(){y((function(){t.$broadcast("rzSliderForceRender")}))},t.onImageNameChange=function(){t.formValues.CmdMode="default",t.formValues.EntrypointMode="default"},t.config={Image:"",Env:[],Cmd:"",MacAddress:"",ExposedPorts:{},Entrypoint:"",HostConfig:{RestartPolicy:{Name:"no"},PortBindings:[],PublishAllPorts:!1,Binds:[],AutoRemove:!1,NetworkMode:"bridge",Privileged:!1,Init:!1,Runtime:null,ExtraHosts:[],Devices:[],CapAdd:[],CapDrop:[]},NetworkingConfig:{EndpointsConfig:{}},Labels:{}},t.addVolume=function(){t.formValues.Volumes.push({name:"",containerPath:"",readOnly:!1,type:"volume"})},t.removeVolume=function(e){t.formValues.Volumes.splice(e,1)},t.addEnvironmentVariable=function(){t.config.Env.push({name:"",value:""})},t.removeEnvironmentVariable=function(e){t.config.Env.splice(e,1)},t.addPortBinding=function(){t.config.HostConfig.PortBindings.push({hostPort:"",containerPort:"",protocol:"tcp"})},t.removePortBinding=function(e){t.config.HostConfig.PortBindings.splice(e,1)},t.addLabel=function(){t.formValues.Labels.push({name:"",value:""})},t.removeLabel=function(e){t.formValues.Labels.splice(e,1)},t.addExtraHost=function(){t.formValues.ExtraHosts.push({value:""})},t.removeExtraHost=function(e){t.formValues.ExtraHosts.splice(e,1)},t.addDevice=function(){t.config.HostConfig.Devices.push({pathOnHost:"",pathInContainer:""})},t.removeDevice=function(e){t.config.HostConfig.Devices.splice(e,1)},t.addLogDriverOpt=function(){t.formValues.LogDriverOpts.push({name:"",value:""})},t.removeLogDriverOpt=function(e){t.formValues.LogDriverOpts.splice(e,1)},t.fromContainerMultipleNetworks=!1,t.resetNetworkConfig=function(){t.config.NetworkingConfig={EndpointsConfig:{}}},function(){K.apply(this,arguments)}()}])},function(e,t,n){"use strict";n.r(t);var a=n(7),r=n(12),i=n.n(r),s=n(61);function o(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){o(i,a,r,s,l,"next",e)}function l(e){o(i,a,r,s,l,"throw",e)}s(void 0)}))}}angular.module("portainer.docker").controller("ContainerController",["$q","$scope","$state","$transition$","$filter","$async","Commit","ContainerHelper","ContainerService","ImageHelper","NetworkService","Notifications","ModalService","ResourceControlService","RegistryService","ImageService","HttpRequestHelper","Authentication","StateManager",function(e,t,n,r,o,c,d,u,p,m,g,f,h,v,b,y,x,w,k){t.activityTime=0,t.portBindings=[],t.displayRecreateButton=!1,t.config={RegistryModel:new s.PorImageRegistryModel,commitInProgress:!1},t.state={recreateContainerInProgress:!1,joinNetworkInProgress:!1,leaveNetworkInProgress:!1},t.updateRestartPolicy=function(n,a){return a="on-failure"===n?a:void 0,p.updateRestartPolicy(t.container.Id,n,a).then((function(){t.container.HostConfig.RestartPolicy={Name:n,MaximumRetryCount:a},f.success("Restart policy updated")})).catch((function(t){return f.error("",t,""),e.reject(t)}))};var S=function(){var e=r.params().nodeName;x.setPortainerAgentTargetHeader(e),t.nodeName=e,p.container(r.params().id).then((function(e){var n=e;t.container=n,t.container.edit=!1,t.container.newContainerName=o("trimcontainername")(n.Name),n.State.Running?t.activityTime=i.a.duration(i()(n.State.StartedAt).utc().diff(i()().utc())).humanize():"created"===n.State.Status?t.activityTime=i.a.duration(i()(n.Created).utc().diff(i()().utc())).humanize():t.activityTime=i.a.duration(i()().utc().diff(i()(n.State.FinishedAt).utc())).humanize(),t.portBindings=[],n.NetworkSettings.Ports&&Object(a.a)(Object.keys(n.NetworkSettings.Ports),(function(e){n.NetworkSettings.Ports[e]&&Object(a.a)(n.NetworkSettings.Ports[e],(function(n){var a={};a.container=e,a.host="".concat(n.HostIp,":").concat(n.HostPort),t.portBindings.push(a)}))}));var r=t.container.Config.Labels["com.docker.swarm.service.id"],s=t.container.HostConfig.AutoRemove,l=w.isAdmin(),c=k.getState().application,d=c.allowContainerCapabilitiesForRegularUsers,u=c.allowHostNamespaceForRegularUsers,p=c.allowDeviceMappingForRegularUsers,m=c.allowBindMountsForRegularUsers,g=c.allowPrivilegedModeForRegularUsers,f=!(d&&m&&p&&u&&g);t.displayRecreateButton=!r&&!s&&(l||!f)})).catch((function(e){f.error("",e,"")}))};function C(e,t,n,a){t(e).then((function(){f.success(n,e),S()})).catch((function(e){f.error("",e,a)}))}function $(){return A.apply(this,arguments)}function A(){return(A=l(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.config.commitInProgress=!0,a=t.config.RegistryModel,i=m.createImageConfigForContainer(a),e.prev=3,e.next=6,d.commitContainer({id:r.params().id,repo:i.fromImage}).$promise;case 6:f.success("Image created",r.params().id),n.reload(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),f.error("",e.t0,""),t.config.commitInProgress=!1;case 14:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}t.start=function(){C(r.params().id,p.startContainer,"","Unable to start container")},t.stop=function(){C(r.params().id,p.stopContainer,"","Unable to stop container")},t.kill=function(){C(r.params().id,p.killContainer,"","Unable to kill container")},t.pause=function(){C(r.params().id,p.pauseContainer,"","Unable to pause container")},t.unpause=function(){C(r.params().id,p.resumeContainer,"","Unable to resume container")},t.restart=function(){C(r.params().id,p.restartContainer,"","Unable to restart container")},t.renameContainer=function(){var e=t.container;p.renameContainer(r.params().id,e.newContainerName).then((function(){e.Name=e.newContainerName,f.success(" renamed",e.Name)})).catch((function(t){e.newContainerName=e.Name,f.error("",t,"")})).finally((function(){t.container.edit=!1}))},t.containerLeaveNetwork=function(e,a){t.state.leaveNetworkInProgress=!0,g.disconnectContainer(a,e.Id,!1).then((function(){f.success("Container left network",e.Id),n.reload()})).catch((function(e){f.error("",e,"")})).finally((function(){t.state.leaveNetworkInProgress=!1}))},t.containerJoinNetwork=function(e,a){t.state.joinNetworkInProgress=!0,g.connectContainer(a,e.Id).then((function(){f.success("Container joined network",e.Id),n.reload()})).catch((function(e){f.error("",e,"")})).finally((function(){t.state.joinNetworkInProgress=!1}))},t.commit=function(){return c($)},t.confirmRemove=function(){var e="You are about to remove a container.";t.container.State.Running&&(e="You are about to remove a running container."),h.confirmContainerDeletion(e,(function(e){if(e){var a=!1;e[0]&&(a=!0),function(e){p.remove(t.container,e).then((function(){f.success(""),n.go("docker.containers",{},{reload:!0})})).catch((function(e){f.error("",e,"")}))}(a)}}))},t.recreate=function(){h.confirmContainerRecreation((function(a){if(a){var r=!1;a[0]&&(r=!0),function(a){var r=t.container,i=u.configFromContainer(r.Model);t.state.recreateContainerInProgress=!0;var s=r.State.Running;(function(){if(!a)return e.when();return b.retrievePorRegistryModelFromRepository(r.Config.Image).then((function(e){return y.pullImage(e,!0)}))})().then((function(){if(!s)return e.when();return p.stopContainer(r.Id)})).then((function(){return p.renameContainer(r.Id,r.Name+"-old")})).then((function(){var t=i.NetworkingConfig.EndpointsConfig,n=Object.keys(t);n.length>1&&(i.NetworkingConfig.EndpointsConfig={},i.NetworkingConfig.EndpointsConfig[n[0]]=t[0]);return e.all([p.createContainer(i),t])})).then((function(t){var n=t[0],a=t[1],r=Object.keys(a).map((function(e){g.connectContainer(e,n.Id)}));return e.all(r).then((function(){return n}))})).then((function(t){if(!s)return e.when(t);return p.startContainer(t.Id).then((function(){return t}))})).then((function(e){var t=w.getUserDetails().ID,n=r.ResourceControl,a=e.Portainer.ResourceControl;return v.duplicateResourceControl(t,n,a)})).then((function(e){return p.remove(r,!0).then((function(){return e}))})).then((function(){f.success(" re-created"),n.go("docker.containers",{},{reload:!0})})).catch((function(e){f.error("",e,""),t.state.recreateContainerInProgress=!1}))}(r)}}))};var P=t.applicationState.endpoint.mode.provider,I=t.applicationState.endpoint.apiVersion;g.networks("DOCKER_STANDALONE"===P||"DOCKER_SWARM_MODE"===P,!1,"DOCKER_SWARM_MODE"===P&&I>=1.25).then((function(e){var n=e;t.availableNetworks=n})).catch((function(e){f.error("",e,"Unable to retrieve networks")})),S()}])},function(e,t){angular.module("portainer.docker").controller("ContainerInspectController",["$scope","$transition$","Notifications","ContainerService","HttpRequestHelper",function(e,t,n,a,r){e.state={DisplayTextView:!1},e.containerInfo={},r.setPortainerAgentTargetHeader(t.params().nodeName),a.inspect(t.params().id).then((function(t){e.containerInfo=t})).catch((function(e){n.error("",e,"")}))}])},function(e,t,n){"use strict";n.r(t);var a=n(12),r=n.n(a);angular.module("portainer.docker").controller("ContainerLogsController",["$scope","$transition$","$interval","ContainerService","Notifications","HttpRequestHelper",function(e,t,n,a,i,s){function o(){var t=e.repeater;angular.isDefined(t)&&(n.cancel(t),t=null)}function l(s){var l=e.state.refreshRate;e.repeater=n((function(){a.logs(t.params().id,1,1,e.state.displayTimestamps?1:0,r()(e.state.sinceTimestamp).unix(),e.state.lineCount,s).then((function(t){e.logs=t})).catch((function(e){o(),i.error("",e,"")}))}),1e3*l)}e.state={refreshRate:3,lineCount:100,sinceTimestamp:"",displayTimestamps:!1},e.changeLogCollection=function(t){t?l(!e.container.Config.Tty):o()},e.$on("$destroy",(function(){o()})),s.setPortainerAgentTargetHeader(t.params().nodeName),a.container(t.params().id).then((function(n){var s,c=n;e.container=c,s=!c.Config.Tty,a.logs(t.params().id,1,1,e.state.displayTimestamps?1:0,r()(e.state.sinceTimestamp).unix(),e.state.lineCount,s).then((function(t){e.logs=t,l(s)})).catch((function(e){o(),i.error("",e,"")}))})).catch((function(e){i.error("",e,"")}))}])},function(e,t,n){"use strict";n.r(t),function(e){var t=n(12),a=n.n(t);angular.module("portainer.docker").controller("ContainerStatsController",["$q","$scope","$transition$","$document","$interval","ContainerService","ChartService","Notifications","HttpRequestHelper",function(t,n,r,i,s,o,l,c,d){function u(){var e=n.repeater;angular.isDefined(e)&&(s.cancel(e),e=null)}function p(e,t){if(e.Networks.length>0){var n=e.Networks[0].rx_bytes,r=e.Networks[0].tx_bytes,i=a()(e.read).format("HH:mm:ss");l.UpdateNetworkChart(i,n,r,t)}}function m(e,t){var n=a()(e.read).format("HH:mm:ss");l.UpdateMemoryChart(n,e.MemoryUsage,e.MemoryCache,t)}function g(e,t){var n=a()(e.read).format("HH:mm:ss"),r=e.isWindows?function(e){var t=e.NumProcs*parseFloat(a()(e.read,"YYYY-MM-DDTHH:mm:ss.SSSSSSSSSZ").valueOf()-a()(e.preread,"YYYY-MM-DDTHH:mm:ss.SSSSSSSSSZ").valueOf()),n=0;t>0&&(n=parseFloat(e.CurrentCPUTotalUsage-e.PreviousCPUTotalUsage)/parseFloat(100*t));return n}(e):function(e){var t=0,n=e.CurrentCPUTotalUsage-e.PreviousCPUTotalUsage,a=e.CurrentCPUSystemUsage-e.PreviousCPUSystemUsage;a>0&&n>0&&(t=n/a*e.CPUCores*100);return t}(e);l.UpdateCPUChart(n,r,t)}function f(e,a,i){var l=n.state.refreshRate;n.repeater=s((function(){t.all({stats:o.containerStats(r.params().id),top:o.containerTop(r.params().id)}).then((function(t){var r=t.stats;n.processInfo=t.top,p(r,e),m(r,i),g(r,a)})).catch((function(e){u(),c.error("",e,"")}))}),1e3*l)}function h(){var a=e("#networkChart"),i=l.CreateNetworkChart(a);n.networkChart=i;var s=e("#cpuChart"),d=l.CreateCPUChart(s);n.cpuChart=d;var h=e("#memoryChart"),v=l.CreateMemoryChart(h);n.memoryChart=v,function(e,a,i){t.all({stats:o.containerStats(r.params().id),top:o.containerTop(r.params().id)}).then((function(t){var r=t.stats;n.processInfo=t.top,0===r.Networks.length&&(n.state.networkStatsUnavailable=!0),p(r,e),m(r,i),g(r,a),f(e,a,i)})).catch((function(e){u(),c.error("",e,"")}))}(i,d,v)}n.state={refreshRate:"5",networkStatsUnavailable:!1},n.$on("$destroy",(function(){u()})),n.changeUpdateRepeater=function(){var t=n.networkChart,a=n.cpuChart,r=n.memoryChart;u(),f(t,a,r),e("#refreshRateChange").show(),e("#refreshRateChange").fadeOut(1500)},d.setPortainerAgentTargetHeader(r.params().nodeName),o.container(r.params().id).then((function(e){n.container=e})).catch((function(e){c.error("",e,"")})),i.ready((function(){h()}))}])}.call(this,n(45))},function(e,t,n){"use strict";n.r(t);var a=n(306),r=n.n(a),i=n(307),s=n.n(i),o=n(556),l=n.n(o),c=n(1);function d(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){d(i,a,r,s,o,"next",e)}function o(e){d(i,a,r,s,o,"throw",e)}s(void 0)}))}}n.n(c).a.module("portainer.docker").controller("DashboardController",["$scope","$q","Authentication","ContainerService","ImageService","NetworkService","VolumeService","SystemService","ServiceService","StackService","EndpointService","Notifications","EndpointProvider","StateManager","TagService",function(e,t,n,a,i,o,c,d,p,m,g,f,h,v,b){function y(){return(y=u(regeneratorRuntime.mark((function n(){var u,v;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=e.applicationState.endpoint.mode,v=h.endpointID(),e.endpointId=v,n.next=5,x();case 5:e.showStacks=n.sent,t.all({containers:a.containers(1),images:i.images(!1),volumes:c.volumes(),networks:o.networks(!0,!0,!0),services:"DOCKER_SWARM_MODE"===u.provider&&"MANAGER"===u.role?p.services():[],stacks:m.stacks(!0,"DOCKER_SWARM_MODE"===u.provider&&"MANAGER"===u.role,v),info:d.info(),endpoint:g.endpoint(v),tags:b.tags()}).then((function(t){e.containers=t.containers,e.images=t.images,e.volumeCount=t.volumes.length,e.networkCount=t.networks.length,e.serviceCount=t.services.length,e.stackCount=t.stacks.length,e.info=t.info,e.endpoint=t.endpoint,e.endpointTags=e.endpoint.TagIds.length?l()(s()(r()(e.endpoint.TagIds,(function(e){var n=t.tags.find((function(t){return t.Id===e}));return n?n.Name:""})),Boolean),", "):"-",e.offlineMode=h.offlineMode()})).catch((function(e){f.error("",e,"")}));case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function x(){return w.apply(this,arguments)}function w(){return(w=u(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.isAdmin(),r=e.applicationState.application.allowStackManagementForRegularUsers,t.abrupt("return",a||r);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}e.dismissInformationPanel=function(e){v.dismissInformationPanel(e)},e.offlineMode=!1,e.showStacks=!1,function(){y.apply(this,arguments)}()}])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var a=n(12),r=n.n(a);angular.module("portainer.docker").controller("EventsController",["$scope","Notifications","SystemService",function(e,t,n){var a,i;a=r()().subtract(24,"hour").unix(),i=r()().unix(),n.events(a,i).then((function(t){e.events=t})).catch((function(e){t.error("",e,"")}))}])},function(e,t){angular.module("portainer.docker").controller("HostBrowserViewController",["SystemService","Notifications",function(e,t){var n=this;n.$onInit=function(){e.info().then((function(e){n.host=e})).catch((function(e){t.error("Unable to retrieve host information",e)}))}}])},function(e,t,n){var a=n(1085);angular.module("portainer.docker").component("hostBrowserView",{templateUrl:a,controller:"HostBrowserViewController"})},function(e,t){var n="app/docker/views/host/host-browser-view/host-browser-view.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Host Browser"></rd-header-title>\n  <rd-header-content>\n    Host &gt; <a ui-sref="docker.host">{{ $ctrl.host.Name }}</a> &gt; browse\n  </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <host-browser ng-if="$ctrl.host"></host-browser>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.docker").controller("HostViewController",["$q","SystemService","Notifications","StateManager","AgentService","ContainerService","Authentication","EndpointProvider",function(e,t,n,a,r,i,s,o){var l=this;this.$onInit=function(){var c=a.getState();l.state.isAgent=c.endpoint.mode.agentProxy,l.state.isAdmin=s.isAdmin();var d=c.endpoint.agentApiVersion;l.state.agentApiVersion=d,l.state.enableHostManagementFeatures=c.application.enableHostManagementFeatures,e.all({version:t.version(),info:t.info(),jobs:l.state.isAdmin?i.containers(!0,{label:["io.portainer.job.endpoint"]}):[]}).then((function(e){var t;if(l.engineDetails=function(e){var t=e.version,n=e.info;return{releaseVersion:t.Version,apiVersion:t.ApiVersion,rootDirectory:n.DockerRootDir,storageDriver:n.Driver,loggingDriver:n.LoggingDriver,volumePlugins:n.Plugins.Volume,networkPlugins:n.Plugins.Network}}(e),l.hostDetails={os:{arch:(t=e.info).Architecture,type:t.OSType,name:t.OperatingSystem},name:t.Name,kernelVersion:t.KernelVersion,totalCPU:t.NCPU,totalMemory:t.MemTotal},l.state.offlineMode=o.offlineMode(),l.jobs=e.jobs,l.state.isAgent&&d>1)return r.hostInfo(e.info.Hostname).then((function(e){l.devices=e.PCIDevices,l.disks=e.PhysicalDisks}))})).catch((function(e){n.error("",e,"")}))},l.state={isAgent:!1,isAdmin:!1,offlineMode:!1},this.engineDetails={},this.hostDetails={},this.devices=null,this.disks=null}])},function(e,t,n){var a=n(1088);angular.module("portainer.docker").component("hostView",{templateUrl:a,controller:"HostViewController"})},function(e,t){var n="app/docker/views/host/host-view.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<host-overview\n  engine-details="$ctrl.engineDetails"\n  host-details="$ctrl.hostDetails"\n  is-agent="$ctrl.state.isAgent"\n  agent-api-version="$ctrl.state.agentApiVersion"\n  disks="$ctrl.disks"\n  devices="$ctrl.devices"\n  refresh-url="docker.host"\n  browse-url="docker.host.browser"\n  offline-mode="$ctrl.state.offlineMode"\n  host-features-enabled="$ctrl.state.enableHostManagementFeatures"\n></host-overview>\n')}]),e.exports=n},function(e,t){angular.module("portainer.docker").controller("BuildImageController",["$scope","$state","BuildService","Notifications","HttpRequestHelper",function(e,t,n,a,r){e.state={BuildType:"editor",actionInProgress:!1,activeTab:0},e.formValues={ImageNames:[{Name:""}],UploadFile:null,DockerFileContent:"",URL:"",Path:"Dockerfile",NodeName:null},e.addImageName=function(){e.formValues.ImageNames.push({Name:""})},e.removeImageName=function(t){e.formValues.ImageNames.splice(t,1)},e.buildImage=function(){var t=e.state.BuildType;if("editor"!==t||""!==e.formValues.DockerFileContent){e.state.actionInProgress=!0;var i=e.formValues.ImageNames.filter((function(e){return e.Name})).map((function(e){return e.Name})),s=e.formValues.NodeName;r.setPortainerAgentTargetHeader(s),function(t,a){var r=e.state.BuildType,i=e.formValues.Path;if("upload"===r){var s=e.formValues.UploadFile;return n.buildImageFromUpload(a,s,i)}if("url"===r){var o=e.formValues.URL;return n.buildImageFromURL(a,o,i)}var l=e.formValues.DockerFileContent;return n.buildImageFromDockerfileContent(a,l)}(0,i).then((function(t){e.buildLogs=t.buildLogs,e.state.activeTab=1,t.hasError?a.error("An error occured during build",{msg:"Please check build logs output"}):a.success(" built")})).catch((function(e){a.error("",e,"")})).finally((function(){e.state.actionInProgress=!1}))}else e.state.formValidationError="Dockerfile content must not be empty"},e.validImageNames=function(){for(var t=0;t<e.formValues.ImageNames.length;t++){if(""!==e.formValues.ImageNames[t].Name)return!0}return!1},e.editorUpdate=function(t){e.formValues.DockerFileContent=t.getValue()}}])},function(e,t,n){"use strict";n.r(t),function(e){var t=n(10),a=n(61);angular.module("portainer.docker").controller("ImageController",["$q","$scope","$transition$","$state","$timeout","ImageService","ImageHelper","RegistryService","Notifications","HttpRequestHelper","ModalService","FileSaver","Blob",function(n,r,i,s,o,l,c,d,u,p,m,g,f){r.formValues={RegistryModel:new a.PorImageRegistryModel},r.state={exportInProgress:!1},r.sortType="Order",r.sortReverse=!1,r.order=function(e){r.sortReverse=r.sortType===e&&!r.sortReverse,r.sortType=e},r.toggleLayerCommand=function(t){e("#layer-command-expander"+t+" span").toggleClass("glyphicon-plus-sign glyphicon-minus-sign"),e("#layer-command-"+t+"-short").toggle(),e("#layer-command-"+t+"-full").toggle()},r.tagImage=function(){var e=r.formValues.RegistryModel,t=c.createImageConfigForContainer(e);l.tagImage(i.params().id,t.fromImage).then((function(){u.success(" tagged"),s.go("docker.images.image",{id:i.params().id},{reload:!0})})).catch((function(e){u.error("",e,"")}))},r.pushTag=function(t){e("#uploadResourceHint").show(),d.retrievePorRegistryModelFromRepository(t).then((function(e){return l.pushImage(e)})).then((function(){u.success("",t)})).catch((function(e){u.error("",e,"")})).finally((function(){e("#uploadResourceHint").hide()}))},r.pullTag=function(t){e("#downloadResourceHint").show(),d.retrievePorRegistryModelFromRepository(t).then((function(e){return l.pullImage(e,!1)})).then((function(){u.success("",t)})).catch((function(e){u.error("",e,"")})).finally((function(){e("#downloadResourceHint").hide()}))},r.removeTag=function(e){l.deleteImage(e,!1).then((function(){1===r.image.RepoTags.length?(u.success(" deleted",e),s.go("docker.images",{},{reload:!0})):(u.success("Tag successfully deleted",e),s.go("docker.images.image",{id:i.params().id},{reload:!0}))})).catch((function(e){u.error("",e,"")}))},r.removeImage=function(e){l.deleteImage(e,!1).then((function(){u.success(" deleted",e),s.go("docker.images",{},{reload:!0})})).catch((function(e){u.error("",e,"")}))},r.exportImage=function(e){0===e.RepoTags.length||Object(t.a)(e.RepoTags,"<none>")?u.warning("","Cannot download a untagged image"):m.confirmImageExport((function(t){t&&function(e){p.setPortainerAgentTargetHeader(e.NodeName),r.state.exportInProgress=!0,l.downloadImages([e]).then((function(e){var t=new f([e.file],{type:"application/x-tar"});g.saveAs(t,"images.tar"),u.success(" downloaded")})).catch((function(e){u.error("",e,"")})).finally((function(){r.state.exportInProgress=!1}))}(e)}))},p.setPortainerAgentTargetHeader(i.params().nodeName),n.all({image:l.image(i.params().id),history:l.history(i.params().id)}).then((function(e){r.image=e.image,r.history=e.history})).catch((function(e){u.error("",e,""),s.go("docker.images")}))}])}.call(this,n(45))},function(e,t,n){"use strict";n.r(t);var a=n(110),r=n(4),i=n(61);angular.module("portainer.docker").controller("ImagesController",["$scope","$state","ImageService","Notifications","ModalService","HttpRequestHelper","FileSaver","Blob","EndpointProvider",function(e,t,n,s,o,l,c,d,u){function p(){n.images(!0).then((function(t){e.images=t,e.offlineMode=u.offlineMode()})).catch((function(t){s.error("",t,""),e.images=[]}))}e.state={actionInProgress:!1,exportInProgress:!1},e.formValues={RegistryModel:new i.PorImageRegistryModel,NodeName:null},e.pullImage=function(){var a=e.formValues.RegistryModel,r=e.formValues.NodeName;l.setPortainerAgentTargetHeader(r),e.state.actionInProgress=!0,n.pullImage(a,!1).then((function(){s.success("",a.Image),t.reload()})).catch((function(e){s.error("",e,"")})).finally((function(){e.state.actionInProgress=!1}))},e.confirmRemovalAction=function(t,n){o.confirmImageForceRemoval((function(a){a&&e.removeAction(t,n)}))},e.downloadAction=function(t){(function(e){for(var t=0;t<e.length;t++){var n=e[t];if(Object(r.a)(n.RepoTags,(function(e){return e.indexOf("<none>")>-1})))return s.warning("","Cannot download a untagged image"),!1}return!(Object(a.a)(e,"NodeName").length>1)||(s.warning("","Cannot download images from different nodes at the same time"),!1)})(t)&&o.confirmImageExport((function(a){var r;a&&(r=t,l.setPortainerAgentTargetHeader(r[0].NodeName),e.state.exportInProgress=!0,n.downloadImages(r).then((function(e){var t=new d([e.file],{type:"application/x-tar"});c.saveAs(t,"images.tar"),s.success("Image(s) successfully downloaded")})).catch((function(e){s.error("",e,"")})).finally((function(){e.state.exportInProgress=!1})))}))},e.removeAction=function(a,r){var i=a.length;angular.forEach(a,(function(a){l.setPortainerAgentTargetHeader(a.NodeName),n.deleteImage(a.Id,r).then((function(){s.success("",a.Id);var t=e.images.indexOf(a);e.images.splice(t,1)})).catch((function(e){s.error("",e,"")})).finally((function(){0===--i&&t.reload()}))}))},e.offlineMode=!1,e.getImages=p,p()}])},function(e,t){angular.module("portainer.docker").controller("ImportImageController",["$scope","$state","ImageService","Notifications","HttpRequestHelper",function(e,t,n,a,r){e.state={actionInProgress:!1},e.formValues={UploadFile:null,NodeName:null},e.uploadImage=function(){e.state.actionInProgress=!0;var t=e.formValues.NodeName;r.setPortainerAgentTargetHeader(t);var i=e.formValues.UploadFile;n.uploadImage(i).then((function(){a.success("")})).catch((function(e){a.error("",e.message,"")})).finally((function(){e.state.actionInProgress=!1}))}}])},function(e,t,n){"use strict";n.r(t);var a=n(5),r=n(7),i=n(19),s=n(36),o=n(41),l=n(391);angular.module("portainer.docker").controller("CreateNetworkController",["$q","$scope","$state","PluginService","Notifications","NetworkService","LabelHelper","Authentication","ResourceControlService","FormValidator","HttpRequestHelper",function(e,t,n,c,d,u,p,m,g,f,h){function v(e,t){var n=Object(s.a)(e,"=");return 2===n.length?n[1]===t:e===t}function b(e,t){e.AuxiliaryAddresses={},Object(r.a)(t.AuxiliaryAddresses,(function(t,n){var a=Object(s.a)(t,"=");2===a.length?e.AuxiliaryAddresses[a[0]]=a[1]:e.AuxiliaryAddresses["device"+n]=t}))}function y(){var e=angular.copy(t.config);return function(e){if(t.formValues.IPV4.Subnet){var n={};n.Subnet=t.formValues.IPV4.Subnet,t.formValues.IPV4.Gateway&&(n.Gateway=t.formValues.IPV4.Gateway),t.formValues.IPV4.IPRange&&(n.IPRange=t.formValues.IPV4.IPRange),t.formValues.IPV4.AuxiliaryAddresses.length&&b(n,t.formValues.IPV4),e.IPAM.Config.push(n)}if(t.formValues.IPV6.Subnet){var a={};a.Subnet=t.formValues.IPV6.Subnet,t.formValues.IPV6.Gateway&&(a.Gateway=t.formValues.IPV6.Gateway),t.formValues.IPV6.IPRange&&(a.IPRange=t.formValues.IPV6.IPRange),t.formValues.IPV6.AuxiliaryAddresses.length&&b(a,t.formValues.IPV6),e.EnableIPv6=!0,e.IPAM.Config.push(a)}}(e),function(e){var n={};t.formValues.DriverOptions.forEach((function(e){n[e.name]=e.value})),e.Options=n}(e),function(e){e.Labels=p.fromKeyValueToLabelHash(t.formValues.Labels)}(e),e}function x(e){h.setPortainerAgentTargetHeader(e.nodeName),h.setPortainerAgentManagerOperation(e.managerOperation),t.state.actionInProgress=!0,u.create(e.networkConfiguration).then((function(t){var n=e.userDetails.ID,a=e.accessControlData,r=t.Portainer.ResourceControl;return g.applyResourceControl(n,a,r)})).then((function(){d.success(""),e.reload&&n.go("docker.networks",{},{reload:!0})})).catch((function(e){d.error("",e,"")})).finally((function(){t.state.actionInProgress=!1}))}var w;t.formValues={DriverOptions:[],IPV4:{Subnet:"",Gateway:"",IPRange:"",AuxiliaryAddresses:[]},IPV6:{Subnet:"",Gateway:"",IPRange:"",AuxiliaryAddresses:[]},Labels:[],AccessControlData:new o.AccessControlFormData,NodeName:null,Macvlan:new l.MacvlanFormData},t.state={formValidationError:"",actionInProgress:!1},t.availableNetworkDrivers=[],t.config={Driver:"bridge",CheckDuplicate:!0,Internal:!1,Attachable:!1,EnableIPv6:!1,IPAM:{Driver:"default",Config:[]},Labels:{}},t.addDriverOption=function(){t.formValues.DriverOptions.push({name:"",value:""})},t.removeDriverOption=function(e){t.formValues.DriverOptions.splice(e,1)},t.addLabel=function(){t.formValues.Labels.push({key:"",value:""})},t.removeLabel=function(e){t.formValues.Labels.splice(e,1)},t.addIPV4AuxAddress=function(){t.formValues.IPV4.AuxiliaryAddresses.push("")},t.addIPV6AuxAddress=function(){t.formValues.IPV6.AuxiliaryAddresses.push("")},t.removeIPV4AuxAddress=function(e){t.formValues.IPV4.AuxiliaryAddresses.splice(e,1),t.state.IPV4AuxiliaryAddressesError.splice(e,1)},t.removeIPV6AuxAddress=function(e){t.formValues.IPV6.AuxiliaryAddresses.splice(e,1),t.state.IPV6AuxiliaryAddressesError.splice(e,1)},t.checkIPV4AuxiliaryAddress=function(e){t.state.IPV4AuxiliaryAddressesError[e]=v(t.formValues.IPV4.AuxiliaryAddresses[e],t.formValues.IPV4.Gateway)},t.checkIPV6AuxiliaryAddress=function(e){t.state.IPV6AuxiliaryAddressesError[e]=v(t.formValues.IPV6.AuxiliaryAddresses[e],t.formValues.IPV6.Gateway)},t.isValid=function(){var e=!Object(i.a)(t.state.IPV4AuxiliaryAddressesError,(function(e,t){return e||t}),!1),n=!Object(i.a)(t.state.IPV6AuxiliaryAddressesError,(function(e,t){return e||t}),!1);return e&&n},t.create=function(){var e=y(),n=t.formValues.AccessControlData,a=m.getUserDetails();if(function(e,n){var a;return t.state.formValidationError="",!(a=f.validateAccessControl(e,n))||(t.state.formValidationError=a,!1)}(n,m.isAdmin())){var r,i={nodeName:t.formValues.NodeName,managerOperation:!1,networkConfiguration:e,userDetails:a,accessControlData:n,reload:!0};if(t.applicationState.endpoint.mode.agentProxy&&"DOCKER_SWARM_MODE"===t.applicationState.endpoint.mode.provider&&"overlay"===t.config.Driver&&(i.managerOperation=!0),"macvlan"===t.config.Driver)if("local"===t.formValues.Macvlan.Scope)(r=e).Internal=null,r.Attachable=null,r.ConfigOnly=!0,r.Options.parent=t.formValues.Macvlan.ParentNetworkCard;else if("swarm"===t.formValues.Macvlan.Scope){var s=t.formValues.Macvlan.SelectedNetworkConfig;!function(e,n){e.ConfigFrom={Network:n.Name},"DOCKER_SWARM_MODE"===t.applicationState.endpoint.mode.provider?e.Scope="swarm":e.Scope="local"}(e,s),i.nodeName=s.NodeName}if("macvlan"===t.config.Driver&&"local"===t.formValues.Macvlan.Scope&&t.applicationState.endpoint.mode.agentProxy&&"DOCKER_SWARM_MODE"===t.applicationState.endpoint.mode.provider){var o=t.formValues.Macvlan.DatatableState.selectedItems;o.forEach((function(e,t){i.nodeName=e.Hostname,i.reload=t===o.length-1,x(i)}))}else x(i)}},w=t.applicationState.endpoint.apiVersion,t.state.IPV4AuxiliaryAddressesError=[],t.state.IPV6AuxiliaryAddressesError=[],c.networkPlugins(w<1.25).then((function(e){t.availableNetworkDrivers=e,t.availableNetworkDrivers=Object(a.a)(t.availableNetworkDrivers,(function(e){return"host"!==e&&"null"!==e}))})).catch((function(e){d.error("",e,"")}))}])},function(e,t,n){"use strict";n.r(t);var a=n(170);angular.module("portainer.docker").controller("NetworkController",["$scope","$state","$transition$","$filter","NetworkService","Container","Notifications","HttpRequestHelper","NetworkHelper",function(e,t,n,r,i,s,o,l,c){function d(t,n){var a=[];n.forEach((function(e){var n=t.Containers[e.Id];n&&(n.Id=e.Id,n.Name||(n.Name=r("trimcontainername")(e.Names[0])),a.push(n))})),e.containersInNetwork=a}var u;e.removeNetwork=function(){i.remove(n.params().id,n.params().id).then((function(){o.success("Network",n.params().id),t.go("docker.networks",{})})).catch((function(e){o.error("",e,"")}))},e.containerLeaveNetwork=function(e,a){l.setPortainerAgentTargetHeader(a.NodeName),i.disconnectContainer(n.params().id,a.Id,!1).then((function(){o.success("Container left network",n.params().id),t.go("docker.networks.network",{id:e.Id},{reload:!0})})).catch((function(e){o.error("",e,"")}))},e.isSystemNetwork=function(){return e.network&&c.isSystemNetwork(e.network)},e.allowRemove=function(){return!e.isSystemNetwork()},u=n.params().nodeName,l.setPortainerAgentTargetHeader(u),e.nodeName=u,i.network(n.params().id).then((function(t){var r,i;e.network=t,r=t,i=e.applicationState.endpoint.apiVersion,r.Containers&&(i<1.24?s.query({},(function(e){var t=e.filter((function(e){if(e.HostConfig.NetworkMode===r.Name)return e}));d(r,t)}),(function(e){o.error("",e,"")})):s.query({filters:{network:[n.params().id]}},(function(e){d(r,e)}),(function(e){o.error("",e,"")}))),e.network.IPAM.IPV4Configs=a.default.getIPV4Configs(e.network.IPAM.Config),e.network.IPAM.IPV6Configs=a.default.getIPV6Configs(e.network.IPAM.Config)})).catch((function(e){o.error("",e,"")}))}])},function(e,t,n){"use strict";n.r(t);var a=n(7),r=n(23),i=n(62),s=n(2),o=n(87),l=n(566),c=n(22),d=n(4),u=n(170);function p(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}angular.module("portainer.docker").controller("NetworksController",["$q","$scope","$state","NetworkService","Notifications","HttpRequestHelper","EndpointProvider","AgentService",function(e,t,n,m,g,f,h,v){function b(e,t){var n=Object(c.a)(e,(function(e){return"swarm"!==e.Scope})),a=Object(l.a)(Object(o.a)(e,(function(e){return e.Id}))),u=Object(s.a)(a,(function(e){return Object(i.a)(e,(function(e){return function(e){return Object(d.a)(t,(function(t){return t.NodeName===e.NodeName})).NodeRole}(e)}))})),m=Object(s.a)(u,(function(e){for(var t=e[0],n=1;n<e.length;n++)t.Subs.push(e[n]);return t}));return r.a.apply(void 0,[m].concat(p(n)))}function y(){var n={networks:m.networks(!0,!0,!0)};t.applicationState.endpoint.mode.agentProxy&&"DOCKER_SWARM_MODE"===t.applicationState.endpoint.mode.provider&&(n.agents=v.agents()),e.all(n).then((function(e){t.offlineMode=h.offlineMode();var n=Object(a.a)(e.networks,(function(e){return e.Subs=[]}));t.applicationState.endpoint.mode.agentProxy&&"DOCKER_SWARM_MODE"===t.applicationState.endpoint.mode.provider?t.networks=b(e.networks,e.agents):t.networks=n,Object(a.a)(t.networks,(function(e){e.IPAM.IPV4Configs=u.default.getIPV4Configs(e.IPAM.Config),e.IPAM.IPV6Configs=u.default.getIPV6Configs(e.IPAM.Config)}))})).catch((function(e){t.networks=[],g.error("",e,"")}))}t.removeAction=function(e){var a=e.length;angular.forEach(e,(function(e){f.setPortainerAgentTargetHeader(e.NodeName),m.remove(e.Id).then((function(){g.success("",e.Name);var n=t.networks.indexOf(e);t.networks.splice(n,1)})).catch((function(e){g.error("",e,"")})).finally((function(){0===--a&&n.reload()}))}))},t.offlineMode=!1,t.getNetworks=y,y()}])},function(e,t){angular.module("portainer.docker").controller("NodeBrowserController",["$stateParams","NodeService","HttpRequestHelper","Notifications",function(e,t,n,a){var r=this;r.$onInit=function(){r.nodeId=e.id,t.node(r.nodeId).then((function(e){n.setPortainerAgentTargetHeader(e.Hostname),r.node=e})).catch((function(e){a.error("Unable to retrieve host information",e)}))}}])},function(e,t,n){var a=n(1098);angular.module("portainer.docker").component("nodeBrowserView",{templateUrl:a,controller:"NodeBrowserController"})},function(e,t){var n="app/docker/views/nodes/node-browser/node-browser.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Node Browser"></rd-header-title>\n  <rd-header-content>\n    <a ui-sref="docker.swarm">Swarm</a> &gt; <a ui-sref="docker.nodes.node({ id: $ctrl.nodeId })">{{ $ctrl.node.Hostname }}</a> &gt; browse\n  </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <host-browser ng-if="$ctrl.node"></host-browser>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.docker").controller("NodeDetailsViewController",["$q","$stateParams","NodeService","StateManager","AgentService","ContainerService","Authentication",function(e,t,n,a,r,i,s){var o=this;function l(e,t){return e.filter((function(e){return e.Type===t})).map((function(e){return e.Name}))}o.$onInit=function(){var c=a.getState();o.state.isAgent=c.endpoint.mode.agentProxy,o.state.isAdmin=s.isAdmin(),o.state.enableHostManagementFeatures=c.application.enableHostManagementFeatures;var d=o.state.isAdmin&&o.state.isAgent,u=t.id;e.all({node:n.node(u),jobs:d?i.containers(!0,{label:["io.portainer.job.endpoint"]}):[]}).then((function(e){var t=e.node;if(o.originalNode=t,o.hostDetails=function(e){return{os:{arch:e.PlatformArchitecture,type:e.PlatformOS},name:e.Hostname,totalCPU:e.CPUs/1e9,totalMemory:e.Memory}}(t),o.engineDetails=function(e){return{releaseVersion:e.EngineVersion,volumePlugins:l(e.Plugins,"Volume"),networkPlugins:l(e.Plugins,"Network"),engineLabels:e.EngineLabels}}(t),o.nodeDetails=function(e){return{name:e.Name,role:e.Role,managerAddress:e.ManagerAddr,availability:e.Availability,status:e.Status,nodeLabels:e.Labels}}(t),o.jobs=e.jobs,o.state.isAgent){var n=c.endpoint.agentApiVersion;if(o.state.agentApiVersion=n,n<2)return;r.hostInfo(t.Hostname).then((function(e){o.devices=e.PCIDevices,o.disks=e.PhysicalDisks}))}}))},o.state={isAgent:!1,isAdmin:!1}}])},function(e,t,n){var a=n(1101);angular.module("portainer.docker").component("nodeDetailsView",{templateUrl:a,controller:"NodeDetailsViewController"})},function(e,t){var n="app/docker/views/nodes/node-details/node-details-view.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<host-overview\n  agent-api-version="$ctrl.state.agentApiVersion"\n  is-agent="$ctrl.state.isAgent"\n  host-details="$ctrl.hostDetails"\n  engine-details="$ctrl.engineDetails"\n  disks="$ctrl.disks"\n  devices="$ctrl.devices"\n  refresh-url="docker.nodes.node"\n  browse-url="docker.nodes.node.browse"\n  is-job-enabled="$ctrl.state.isAdmin && $ctrl.state.isAgent"\n  host-features-enabled="$ctrl.state.enableHostManagementFeatures"\n  job-url="docker.nodes.node.job"\n  jobs="$ctrl.jobs"\n>\n  <swarm-node-details-panel details="$ctrl.nodeDetails" original-node="$ctrl.originalNode"></swarm-node-details-panel>\n</host-overview>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(41);angular.module("portainer.docker").controller("CreateSecretController",["$scope","$state","Notifications","SecretService","LabelHelper","Authentication","ResourceControlService","FormValidator",function(e,t,n,r,i,s,o,l){function c(){var t={};return t.Name=e.formValues.Name,function(t){e.formValues.encodeSecret?t.Data=btoa(unescape(encodeURIComponent(e.formValues.Data))):t.Data=e.formValues.Data}(t),function(t){t.Labels=i.fromKeyValueToLabelHash(e.formValues.Labels)}(t),t}e.formValues={Name:"",Data:"",Labels:[],encodeSecret:!0,AccessControlData:new a.AccessControlFormData},e.state={formValidationError:"",actionInProgress:!1},e.addLabel=function(){e.formValues.Labels.push({key:"",value:""})},e.removeLabel=function(t){e.formValues.Labels.splice(t,1)},e.create=function(){var a=e.formValues.AccessControlData,i=s.getUserDetails(),d=s.isAdmin();if(function(t,n){var a;return e.state.formValidationError="",!(a=l.validateAccessControl(t,n))||(e.state.formValidationError=a,!1)}(a,d)){e.state.actionInProgress=!0;var u=c();r.create(u).then((function(e){var t=i.ID,n=e.Portainer.ResourceControl;return o.applyResourceControl(t,a,n)})).then((function(){n.success("Secret successfully"),t.go("docker.secrets",{},{reload:!0})})).catch((function(e){n.error("",e,"Unable to")})).finally((function(){e.state.actionInProgress=!1}))}}}])},function(e,t){angular.module("portainer.docker").controller("SecretController",["$scope","$transition$","$state","SecretService","Notifications",function(e,t,n,a,r){e.removeSecret=function(e){a.remove(e).then((function(){r.success("Secret successfully"),n.go("docker.secrets",{})})).catch((function(e){r.error("",e," secret")}))},a.secret(t.params().id).then((function(t){e.secret=t})).catch((function(e){r.error("",e,"Unable to retrieve secret details")}))}])},function(e,t){angular.module("portainer.docker").controller("SecretsController",["$scope","$state","SecretService","Notifications",function(e,t,n,a){function r(){n.secrets().then((function(t){e.secrets=t})).catch((function(t){e.secrets=[],a.error("",t,"Unable to retrieve secrets")}))}e.removeAction=function(r){var i=r.length;angular.forEach(r,(function(r){n.remove(r.Id).then((function(){a.success("",r.Name);var t=e.secrets.indexOf(r);e.secrets.splice(t,1)})).catch((function(e){a.error("",e," secret")})).finally((function(){0===--i&&t.reload()}))}))},e.getSecrets=r,r()}])},function(e,t,n){"use strict";n.r(t);var a=n(111),r=n(305),i=n(61),s=n(41);function o(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){o(i,a,r,s,l,"next",e)}function l(e){o(i,a,r,s,l,"throw",e)}s(void 0)}))}}n(1106),n(1107),n(1108),n(1109),angular.module("portainer.docker").controller("CreateServiceController",["$q","$scope","$state","$timeout","Service","ServiceHelper","ConfigService","ConfigHelper","SecretHelper","SecretService","VolumeService","NetworkService","ImageHelper","LabelHelper","Authentication","ResourceControlService","Notifications","FormValidator","PluginService","RegistryService","HttpRequestHelper","NodeService","SettingsService","WebhookService","EndpointProvider",function(e,t,n,o,c,d,u,p,m,g,f,h,v,b,y,x,w,k,S,C,$,A,P,I,T){function N(e){return[].concat.apply([],e.split("'").map((function(e,t){return t%2?e:e.split(" ")}))).filter(Boolean)}function R(){var e=t.formValues,n={Name:e.Name,TaskTemplate:{ContainerSpec:{Mounts:[]},Placement:{},Resources:{Limits:{},Reservations:{}}},Mode:{},EndpointSpec:{}};return function(e,t){"replicated"===t.Mode?e.Mode.Replicated={Replicas:t.Replicas}:e.Mode.Global={}}(n,e),function(e,t){var n=v.createImageConfigForContainer(t.RegistryModel);e.TaskTemplate.ContainerSpec.Image=n.fromImage}(n,e),function(e,t){var n=[];t.Ports.forEach((function(e){var t={Protocol:e.Protocol,PublishMode:e.PublishMode};e.TargetPort&&(t.TargetPort=+e.TargetPort,e.PublishedPort&&(t.PublishedPort=+e.PublishedPort),n.push(t))})),e.EndpointSpec.Ports=n}(n,e),function(e,t){t.EntryPoint&&(e.TaskTemplate.ContainerSpec.Command=N(t.EntryPoint)),t.Command&&(e.TaskTemplate.ContainerSpec.Args=N(t.Command)),t.User&&(e.TaskTemplate.ContainerSpec.User=t.User),t.WorkingDir&&(e.TaskTemplate.ContainerSpec.Dir=t.WorkingDir)}(n,e),function(e,t){var n=[];t.Env.forEach((function(e){e.name&&n.push(e.name+"="+e.value)})),e.TaskTemplate.ContainerSpec.Env=n}(n,e),function(e,t){e.Labels=b.fromKeyValueToLabelHash(t.Labels),e.TaskTemplate.ContainerSpec.Labels=b.fromKeyValueToLabelHash(t.ContainerLabels)}(n,e),function(e,t){t.Volumes.forEach((function(t){if(t.Source&&t.Target)if("volume"!==t.Type)e.TaskTemplate.ContainerSpec.Mounts.push(t);else{var n=function(e,t,n){return{Target:t,Source:e.Id,Type:"volume",ReadOnly:n,VolumeOptions:{Labels:e.Labels,DriverConfig:{Name:e.Driver,Options:e.Options}}}}(t.Source,t.Target,t.ReadOnly);e.TaskTemplate.ContainerSpec.Mounts.push(n)}}))}(n,e),function(e,t){var n=[];t.Network&&n.push({Target:t.Network}),t.ExtraNetworks.forEach((function(e){n.push({Target:e.Name})})),e.Networks=Object(r.a)(n,a.a)}(n,e),function(e,t){var n=[];t.HostsEntries&&(t.HostsEntries.forEach((function(e){if(e.value&&e.value.indexOf(":")&&2===e.value.split(":").length){var t=e.value.split(":");n.push(t[1]+" "+t[0])}})),n.length>0&&(e.TaskTemplate.ContainerSpec.Hosts=n))}(n,e),function(e,t){e.UpdateConfig={Parallelism:t.Parallelism||0,Delay:d.translateHumanDurationToNanos(t.UpdateDelay)||0,FailureAction:t.FailureAction,Order:t.UpdateOrder}}(n,e),function(e,t){if(t.Configs){var n=[];angular.forEach(t.Configs,(function(e){if(e.model){var t=p.configConfig(e.model);t.File.Name=e.FileName||t.File.Name,n.push(t)}})),e.TaskTemplate.ContainerSpec.Configs=n}}(n,e),function(e,t){if(t.Secrets){var n=[];angular.forEach(t.Secrets,(function(e){if(e.model){var t=m.secretConfig(e.model);t.File.Name=t.SecretName,e.overrideTarget&&e.target&&""!==e.target&&(t.File.Name=e.target),n.push(t)}})),e.TaskTemplate.ContainerSpec.Secrets=n}}(n,e),function(e,t){e.TaskTemplate.Placement.Constraints=d.translateKeyValueToPlacementConstraints(t.PlacementConstraints),e.TaskTemplate.Placement.Preferences=d.translateKeyValueToPlacementPreferences(t.PlacementPreferences)}(n,e),function(e,t){t.CpuLimit>0&&(e.TaskTemplate.Resources.Limits.NanoCPUs=1e9*t.CpuLimit),t.CpuReservation>0&&(e.TaskTemplate.Resources.Reservations.NanoCPUs=1e9*t.CpuReservation)}(n,e),function(e,t){var n=(Math.round(8*t.MemoryLimit)/8).toFixed(3);n*=1048576,"GB"===t.MemoryLimitUnit&&(n*=1024),n>0&&(e.TaskTemplate.Resources.Limits.MemoryBytes=n);var a=(Math.round(8*t.MemoryReservation)/8).toFixed(3);a*=1048576,"GB"===t.MemoryReservationUnit&&(a*=1024),a>0&&(e.TaskTemplate.Resources.Reservations.MemoryBytes=a)}(n,e),function(e,t){e.TaskTemplate.RestartPolicy={Condition:t.RestartCondition||"any",Delay:d.translateHumanDurationToNanos(t.RestartDelay)||5e9,MaxAttempts:t.RestartMaxAttempts||0,Window:d.translateHumanDurationToNanos(t.RestartWindow)||0}}(n,e),function(e,t){var n={};t.LogDriverName&&(e.TaskTemplate.LogDriver={Name:t.LogDriverName},"none"!==t.LogDriverName&&(t.LogDriverOpts.forEach((function(e){e.name&&(n[e.name]=e.value)})),0!==Object.keys(n).length&&n.constructor===Object&&(e.TaskTemplate.LogDriver.Options=n)))}(n,e),n}var E;function O(){return D.apply(this,arguments)}function D(){return(D=l(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.isAdmin(),e.next=3,P.publicSettings();case 3:return n=e.sent,a=n.AllowBindMountsForRegularUsers,e.abrupt("return",t||a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.formValues={Name:"",RegistryModel:new i.PorImageRegistryModel,Mode:"replicated",Replicas:1,Command:"",EntryPoint:"",WorkingDir:"",User:"",Env:[],Labels:[],ContainerLabels:[],Volumes:[],Network:"",ExtraNetworks:[],HostsEntries:[],Ports:[],Parallelism:1,PlacementConstraints:[],PlacementPreferences:[],UpdateDelay:"0s",UpdateOrder:"stop-first",FailureAction:"pause",Secrets:[],Configs:[],AccessControlData:new s.AccessControlFormData,CpuLimit:0,CpuReservation:0,MemoryLimit:0,MemoryReservation:0,MemoryLimitUnit:"MB",MemoryReservationUnit:"MB",RestartCondition:"any",RestartDelay:"5s",RestartMaxAttempts:0,RestartWindow:"0s",LogDriverName:"",LogDriverOpts:[],Webhook:!1},t.state={formValidationError:"",actionInProgress:!1},t.allowBindMounts=!1,t.refreshSlider=function(){o((function(){t.$broadcast("rzSliderForceRender")}))},t.addPortBinding=function(){t.formValues.Ports.push({PublishedPort:"",TargetPort:"",Protocol:"tcp",PublishMode:"ingress"})},t.removePortBinding=function(e){t.formValues.Ports.splice(e,1)},t.addExtraNetwork=function(){t.formValues.ExtraNetworks.push({Name:""})},t.removeExtraNetwork=function(e){t.formValues.ExtraNetworks.splice(e,1)},t.addHostsEntry=function(){t.formValues.HostsEntries.push({})},t.removeHostsEntry=function(e){t.formValues.HostsEntries.splice(e,1)},t.addVolume=function(){t.formValues.Volumes.push({Source:null,Target:"",ReadOnly:!1,Type:"volume"})},t.removeVolume=function(e){t.formValues.Volumes.splice(e,1)},t.addConfig=function(){t.formValues.Configs.push({})},t.removeConfig=function(e){t.formValues.Configs.splice(e,1)},t.addSecret=function(){t.formValues.Secrets.push({overrideTarget:!1})},t.removeSecret=function(e){t.formValues.Secrets.splice(e,1)},t.addEnvironmentVariable=function(){t.formValues.Env.push({name:"",value:""})},t.removeEnvironmentVariable=function(e){t.formValues.Env.splice(e,1)},t.addPlacementConstraint=function(){t.formValues.PlacementConstraints.push({key:"",operator:"==",value:""})},t.removePlacementConstraint=function(e){t.formValues.PlacementConstraints.splice(e,1)},t.addPlacementPreference=function(){t.formValues.PlacementPreferences.push({strategy:"spread",value:""})},t.removePlacementPreference=function(e){t.formValues.PlacementPreferences.splice(e,1)},t.addLabel=function(){t.formValues.Labels.push({key:"",value:""})},t.removeLabel=function(e){t.formValues.Labels.splice(e,1)},t.addContainerLabel=function(){t.formValues.ContainerLabels.push({key:"",value:""})},t.removeContainerLabel=function(e){t.formValues.ContainerLabels.splice(e,1)},t.addLogDriverOpt=function(){t.formValues.LogDriverOpts.push({name:"",value:""})},t.removeLogDriverOpt=function(e){t.formValues.LogDriverOpts.splice(e,1)},t.volumesAreValid=function(){return t.formValues.Volumes.every((function(e){return e.Target&&e.Source}))},t.create=function(){var a=t.formValues.AccessControlData;(function(e,n){var a;return t.state.formValidationError="",!(a=k.validateAccessControl(e,n))||(t.state.formValidationError=a,!1)})(a,t.isAdmin)&&(t.state.actionInProgress=!0,function(a,r){var i=t.formValues.RegistryModel,s=i.Registry.Authentication?C.encodedCredentials(i.Registry):"";$.setRegistryAuthenticationHeader(s),c.create(a).$promise.then((function(n){var a=n.ID,i=n.Portainer.ResourceControl,s=y.getUserDetails().ID,o=x.applyResourceControl(s,r,i),l=e.when(t.formValues.Webhook&&I.createServiceWebhook(a,T.endpointID()));return e.all([o,l])})).then((function(){w.success("Service successfully"),n.go("docker.services",{},{reload:!0})})).catch((function(e){w.error("",e,"")})).finally((function(){t.state.actionInProgress=!1}))}(R(),a))},E=t.applicationState.endpoint.apiVersion,e.all({volumes:f.volumes(),networks:h.networks(!0,!0,!1),secrets:E>=1.25?g.secrets():[],configs:E>=1.3?u.configs():[],nodes:A.nodes(),availableLoggingDrivers:S.loggingPlugins(E<1.25),allowBindMounts:O()}).then((function(e){t.availableVolumes=e.volumes,t.availableNetworks=e.networks,t.availableSecrets=e.secrets,t.availableConfigs=e.configs,t.availableLoggingDrivers=e.availableLoggingDrivers,function(e){var n=0,a=0;for(var r in e)e[r].CPUs&&e[r].CPUs>n&&(n=e[r].CPUs),e[r].Memory&&e[r].Memory>a&&(a=e[r].Memory);t.state.sliderMaxCpu=n>0?n/1e9:32,t.state.sliderMaxMemory=a>0?Math.floor(a/1e3/1e3):32768}(e.nodes),t.isAdmin=y.isAdmin(),t.allowBindMounts=e.allowBindMounts})).catch((function(e){w.error("",e,"")}))}])},function(e,t){var n="app/docker/views/services/create/includes/update-restart.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<form class="form-horizontal" style="margin-top: 15px;">\n  <div class="col-sm-12 form-section-title">\n    Update config\n  </div>\n  \x3c!-- parallelism-input --\x3e\n  <div class="form-group">\n    <label for="parallelism" class="col-sm-3 col-lg-2 control-label text-left">Update parallelism</label>\n    <div class="col-sm-4 col-lg-3">\n      <input type="number" class="form-control" ng-model="formValues.Parallelism" id="parallelism" placeholder=" 1" />\n    </div>\n    <div class="col-sm-5">\n      <p class="small text-muted">\n        Maximum number of tasks to be updated simultaneously (0 to update all at once).\n      </p>\n    </div>\n  </div>\n  \x3c!-- !parallelism-input --\x3e\n  \x3c!-- delay-input --\x3e\n  <div class="form-group">\n    <label for="update-delay" class="col-sm-3 col-lg-2 control-label text-left">\n      Update delay\n      <portainer-tooltip position="bottom" message="Supported format examples: 1h, 5m, 10s, 1000ms, 15us, 60ns."></portainer-tooltip>\n    </label>\n    <div class="col-sm-4 col-lg-3">\n      <input type="text" class="form-control" ng-model="formValues.UpdateDelay" id="update-delay" placeholder=" 1m" ng-pattern="/^([0-9]+)(h|m|s|ms|us|ns)$/i" />\n    </div>\n    <div class="col-sm-5">\n      <p class="small text-muted">\n        Amount of time between updates expressed by a number followed by unit (ns|us|ms|s|m|h). Default value is 0s, 0 seconds.\n      </p>\n    </div>\n  </div>\n  \x3c!-- !delay-input --\x3e\n  \x3c!-- failureAction-input --\x3e\n  <div class="form-group">\n    <label for="failure-action" class="col-sm-3 col-lg-2 control-label text-left">Update failure action</label>\n    <div class="col-sm-4 col-lg-3">\n      <div class="btn-group btn-group-sm">\n        <label class="btn btn-primary" ng-model="formValues.FailureAction" uib-btn-radio="\'continue\'"></label>\n        <label class="btn btn-primary" ng-model="formValues.FailureAction" uib-btn-radio="\'pause\'"></label>\n      </div>\n    </div>\n    <div class="col-sm-5">\n      <p class="small text-muted">\n        Action taken on failure to start after update.\n      </p>\n    </div>\n  </div>\n  \x3c!-- !failureAction-input --\x3e\n  \x3c!-- order-input --\x3e\n  <div class="form-group" ng-if="applicationState.endpoint.apiVersion >= 1.29">\n    <label for="update-order" class="col-sm-3 col-lg-2 control-label text-left">Update order</label>\n    <div class="col-sm-4 col-lg-3">\n      <div class="btn-group btn-group-sm">\n        <label class="btn btn-primary" ng-model="formValues.UpdateOrder" uib-btn-radio="\'start-first\'">start-first</label>\n        <label class="btn btn-primary" ng-model="formValues.UpdateOrder" uib-btn-radio="\'stop-first\'">stop-first</label>\n      </div>\n    </div>\n    <div class="col-sm-5">\n      <p class="small text-muted">\n        Operation order on failure.\n      </p>\n    </div>\n  </div>\n  \x3c!-- !order-input --\x3e\n\n  <div class="col-sm-12 form-section-title">\n    \n  </div>\n  \x3c!-- restartCondition-input --\x3e\n  <div class="form-group">\n    <label for="restart-condition" class="col-sm-3 col-lg-2 control-label text-left">Restart condition</label>\n    <div class="col-sm-4 col-lg-3">\n      <div class="btn-group btn-group-sm">\n        <label class="btn btn-primary" ng-model="formValues.RestartCondition" uib-btn-radio="\'none\'"></label>\n        <label class="btn btn-primary" ng-model="formValues.RestartCondition" uib-btn-radio="\'on-failure\'">On-failure</label>\n        <label class="btn btn-primary" ng-model="formValues.RestartCondition" uib-btn-radio="\'any\'">Any</label>\n      </div>\n    </div>\n    <div class="col-sm-5">\n      <p class="small text-muted">\n        Restart when condition is met (default condition "any").\n      </p>\n    </div>\n  </div>\n  \x3c!-- !restartCondition-input --\x3e\n  \x3c!-- restartDelay-input --\x3e\n  <div class="form-group">\n    <label for="restart-delay" class="col-sm-3 col-lg-2 control-label text-left">\n      Restart delay\n      <portainer-tooltip position="bottom" message="Supported format examples: 1h, 5m, 10s, 1000ms, 15us, 60ns."></portainer-tooltip>\n    </label>\n    <div class="col-sm-4 col-lg-3">\n      <input type="text" class="form-control" ng-model="formValues.RestartDelay" id="restart-delay" placeholder=" 1m" ng-pattern="/^([0-9]+)(h|m|s|ms|us|ns)$/i" />\n    </div>\n    <div class="col-sm-5">\n      <p class="small text-muted">\n        Delay between restart attempts expressed by a number followed by unit (ns|us|ms|s|m|h). Default value is 5s, 5 seconds.\n      </p>\n    </div>\n  </div>\n  \x3c!-- !restartDelay-input --\x3e\n  \x3c!-- restartMaxAttempts-input --\x3e\n  <div class="form-group">\n    <label for="restart-max-attempts" class="col-sm-3 col-lg-2 control-label text-left">Restart max attempts</label>\n    <div class="col-sm-4 col-lg-3">\n      <input type="number" class="form-control" ng-model="formValues.RestartMaxAttempts" id="restart-max-attempts" placeholder=" 0" />\n    </div>\n    <div class="col-sm-5">\n      <p class="small text-muted">\n        0\n      </p>\n    </div>\n  </div>\n  \x3c!-- !restartMaxAttempts-input --\x3e\n  \x3c!-- restartWindow-input --\x3e\n  <div class="form-group">\n    <label for="restart-window" class="col-sm-3 col-lg-2 control-label text-left">\n      Restart window\n      <portainer-tooltip position="bottom" message="Supported format examples: 1h, 5m, 10s, 1000ms, 15us, 60ns."></portainer-tooltip>\n    </label>\n    <div class="col-sm-4 col-lg-3">\n      <input type="text" class="form-control" ng-model="formValues.RestartWindow" id="restart-window" placeholder=" 1m" ng-pattern="/^([0-9]+)(h|m|s|ms|us|ns)$/i" />\n    </div>\n    <div class="col-sm-5">\n      <p class="small text-muted">\n        Time window to evaluate restart attempts expressed by a number followed by unit (ns|us|ms|s|m|h). Default value is 0 seconds, which is unbounded.\n      </p>\n    </div>\n  </div>\n  \x3c!-- !restartWindow-input --\x3e\n</form>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/services/create/includes/secret.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<form class="form-horizontal" style="margin-top: 15px;">\n  <div class="form-group">\n    <div class="col-sm-12 small text-muted"> By default, secrets will be available under <code>/run/secrets/$SECRET_NAME</code> in containers. </div>\n  </div>\n  <div class="form-group">\n    <div class="col-sm-12" style="margin-top: 5px;">\n      <label class="control-label text-left">Secrets</label>\n      <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addSecret()"> <i class="fa fa-plus-circle" aria-hidden="true"></i> add a secret </span>\n    </div>\n    <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n      <div ng-repeat="secret in formValues.Secrets track by $index" style="margin-top: 4px;">\n        <div class="input-group col-sm-4 input-group-sm">\n          <span class="input-group-addon">secret</span>\n          <select class="form-control" ng-model="secret.model" ng-options="secret.Name for secret in availableSecrets | orderBy: \'Name\'">\n            <option value="" selected="selected">Select a secret</option>\n          </select>\n        </div>\n        <div class="input-group col-sm-4 input-group-sm" ng-if="applicationState.endpoint.apiVersion >= 1.3 && secret.overrideTarget">\n          <span class="input-group-addon">target</span>\n          <input class="form-control" ng-model="secret.target" placeholder="/path/in/container" />\n        </div>\n        <div class="input-group col-sm-3 input-group-sm">\n          <div class="btn-group btn-group-sm" ng-if="applicationState.endpoint.apiVersion >= 1.3">\n            <label class="btn btn-primary" ng-model="secret.overrideTarget" uib-btn-radio="false">Default location</label>\n            <label class="btn btn-primary" ng-model="secret.overrideTarget" uib-btn-radio="true"></label>\n          </div>\n          <button class="btn btn-sm btn-danger" type="button" ng-click="removeSecret($index)">\n            <i class="fa fa-trash" aria-hidden="true"></i>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</form>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/services/create/includes/config.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<form class="form-horizontal" style="margin-top: 15px;">\n  <div class="form-group">\n    <div class="col-sm-12" style="margin-top: 5px;">\n      <label class="control-label text-left">Configs</label>\n      <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addConfig()"> <i class="fa fa-plus-circle" aria-hidden="true"></i> add a config </span>\n    </div>\n    <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n      <div ng-repeat="config in formValues.Configs" style="margin-top: 2px;">\n        <div class="input-group col-sm-4 input-group-sm">\n          <span class="input-group-addon">config</span>\n          <select class="form-control" ng-model="config.model" ng-options="config.Name for config in availableConfigs | orderBy: \'Name\'">\n            <option value="" selected="selected">Select a config</option>\n          </select>\n        </div>\n        <div class="input-group col-sm-4 input-group-sm">\n          <span class="input-group-addon"></span>\n          <input class="form-control" ng-model="config.FileName" placeholder=" /path/in/container" />\n        </div>\n        <button class="btn btn-sm btn-danger" type="button" ng-click="removeConfig($index)">\n          <i class="fa fa-trash" aria-hidden="true"></i>\n        </button>\n      </div>\n    </div>\n  </div>\n</form>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/services/create/includes/resources-placement.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<form class="form-horizontal" style="margin-top: 15px;">\n  <div class="col-sm-12 form-section-title">\n    Resources\n  </div>\n  \x3c!-- memory-reservation-input --\x3e\n  <div class="form-group">\n    <label for="memory-reservation" class="col-sm-3 col-lg-2 control-label text-left" style="margin-top: 20px;">\n      \n    </label>\n    <div class="col-sm-3">\n      <slider model="formValues.MemoryReservation" floor="0" ceil="state.sliderMaxMemory" step="256" ng-if="state.sliderMaxMemory"></slider>\n    </div>\n    <div class="col-sm-2">\n      <input type="number" min="0" class="form-control" ng-model="formValues.MemoryReservation" />\n    </div>\n    <div class="col-sm-4">\n      <p class="small text-muted" style="margin-top: 7px;">\n        Minimum memory available on a node to run a task (<b>MB</b>)\n      </p>\n    </div>\n  </div>\n  \x3c!-- !memory-reservation-input --\x3e\n  \x3c!-- memory-limit-input --\x3e\n  <div class="form-group">\n    <label for="memory-limit" class="col-sm-3 col-lg-2 control-label text-left" style="margin-top: 20px;">\n      \n    </label>\n    <div class="col-sm-3">\n      <slider model="formValues.MemoryLimit" floor="0" ceil="state.sliderMaxMemory" step="256" ng-if="state.sliderMaxMemory"></slider>\n    </div>\n    <div class="col-sm-2">\n      <input type="number" min="0" class="form-control" ng-model="formValues.MemoryLimit" />\n    </div>\n    <div class="col-sm-4" style="margin-top: 7px;">\n      <p class="small text-muted">\n        Maximum memory usage per task (<b>MB</b>)\n      </p>\n    </div>\n  </div>\n  \x3c!-- !memory-limit-input --\x3e\n  \x3c!-- cpu-reservation-input --\x3e\n  <div class="form-group">\n    <label for="cpu-reservation" class="col-sm-3 col-lg-2 control-label text-left" style="margin-top: 20px;">\n      CPU reservation\n    </label>\n    <div class="col-sm-5">\n      <slider model="formValues.CpuReservation" floor="0" ceil="state.sliderMaxCpu" step="0.25" precision="2" ng-if="state.sliderMaxCpu"></slider>\n    </div>\n    <div class="col-sm-4" style="margin-top: 20px;">\n      <p class="small text-muted">\n        Minimum CPU available on a node to run a task\n      </p>\n    </div>\n  </div>\n  \x3c!-- !cpu-reservation-input --\x3e\n  \x3c!-- cpu-limit-input --\x3e\n  <div class="form-group">\n    <label for="cpu-limit" class="col-sm-3 col-lg-2 control-label text-left" style="margin-top: 20px;">\n      CPU \n    </label>\n    <div class="col-sm-5">\n      <slider model="formValues.CpuLimit" floor="0" ceil="state.sliderMaxCpu" step="0.25" precision="2" ng-if="state.sliderMaxCpu"></slider>\n    </div>\n    <div class="col-sm-4" style="margin-top: 20px;">\n      <p class="small text-muted">\n        CPU\n      </p>\n    </div>\n  </div>\n  \x3c!-- !cpu-limit-input --\x3e\n  <div class="col-sm-12 form-section-title">\n    Placement\n  </div>\n  \x3c!-- placement-constraints --\x3e\n  <div class="form-group">\n    <div class="col-sm-12" style="margin-top: 5px;">\n      <label class="control-label text-left">Placement constraints</label>\n      <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addPlacementConstraint()">\n        <i class="fa fa-plus-circle" aria-hidden="true"></i> placement constraint\n      </span>\n    </div>\n    <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n      <div ng-repeat="constraint in formValues.PlacementConstraints" style="margin-top: 2px;">\n        <div class="input-group col-sm-4 input-group-sm">\n          <span class="input-group-addon">name</span>\n          <input type="text" class="form-control" ng-model="constraint.key" placeholder=" node.role" />\n        </div>\n        <div class="input-group col-sm-1 input-group-sm">\n          <select name="constraintOperator" class="form-control" ng-model="constraint.operator">\n            <option value="==">==</option>\n            <option value="!=">!=</option>\n          </select>\n        </div>\n        <div class="input-group col-sm-5 input-group-sm">\n          <span class="input-group-addon">value</span>\n          <input type="text" class="form-control" ng-model="constraint.value" placeholder=" manager" />\n        </div>\n        <button class="btn btn-sm btn-danger" type="button" ng-click="removePlacementConstraint($index)">\n          <i class="fa fa-trash" aria-hidden="true"></i>\n        </button>\n      </div>\n    </div>\n  </div>\n  \x3c!-- !placement-constraints --\x3e\n  \x3c!-- placement-preferences --\x3e\n  <div class="form-group" ng-if="applicationState.endpoint.apiVersion >= 1.3">\n    <div class="col-sm-12" style="margin-top: 5px;">\n      <label class="control-label text-left">Placement preferences</label>\n      <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addPlacementPreference()">\n        <i class="fa fa-plus-circle" aria-hidden="true"></i> placement preference\n      </span>\n    </div>\n    <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n      <div ng-repeat="preference in formValues.PlacementPreferences" style="margin-top: 2px;">\n        <div class="input-group col-sm-4 input-group-sm">\n          <span class="input-group-addon">strategy</span>\n          <input type="text" class="form-control" ng-model="preference.strategy" placeholder=" spread" />\n        </div>\n        <div class="input-group col-sm-5 input-group-sm">\n          <span class="input-group-addon">value</span>\n          <input type="text" class="form-control" ng-model="preference.value" placeholder=" node.labels.datacenter" />\n        </div>\n        <button class="btn btn-sm btn-danger" type="button" ng-click="removePlacementPreference($index)">\n          <i class="fa fa-trash" aria-hidden="true"></i>\n        </button>\n      </div>\n    </div>\n  </div>\n  \x3c!-- !placement-preferences --\x3e\n</form>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t),function(e){var t=n(215),a=n(4),r=n(23),i=n(110),s=n(5),o=n(2),l=n(61);function c(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){c(i,a,r,s,o,"next",e)}function o(e){c(i,a,r,s,o,"throw",e)}s(void 0)}))}}n(1111),n(1112),n(1113),n(1114),n(1115),n(1116),n(1117),n(1118),n(1119),n(1120),n(1121),n(1122),n(1123),n(1124),n(1125),n(1126),n(1127),n(1128),angular.module("portainer.docker").controller("ServiceController",["$q","$scope","$transition$","$state","$location","$timeout","$anchorScroll","ServiceService","ConfigService","ConfigHelper","SecretService","ImageService","SecretHelper","Service","ServiceHelper","LabelHelper","TaskService","NodeService","ContainerService","TaskHelper","Notifications","ModalService","PluginService","Authentication","SettingsService","VolumeService","ImageHelper","WebhookService","EndpointProvider","clipboard","WebhookHelper","NetworkService",function(n,c,u,p,m,g,f,h,v,b,y,x,w,k,S,C,$,A,P,I,T,N,R,E,O,D,V,U,L,_,j,F){c.state={updateInProgress:!1,deletionInProgress:!1,rollbackInProgress:!1},c.formValues={RegistryModel:new l.PorImageRegistryModel},c.tasks=[],c.availableImages=[],c.lastVersion=0;var M={},K=[];function B(e){var t=S.serviceToConfig(e.Model);if(t.Name=e.Name,t.Labels=C.fromKeyValueToLabelHash(e.ServiceLabels),t.TaskTemplate.ContainerSpec.Env=S.translateEnvironmentVariablesToEnv(e.EnvironmentVariables),t.TaskTemplate.ContainerSpec.Labels=C.fromKeyValueToLabelHash(e.ServiceContainerLabels),c.hasChanges(e,["Image"])){var n=V.createImageConfigForContainer(c.formValues.RegistryModel);t.TaskTemplate.ContainerSpec.Image=n.fromImage}else t.TaskTemplate.ContainerSpec.Image=e.Image;if(c.hasChanges(e,["Networks"])&&(t.Networks=Object(o.a)(Object(s.a)(e.Networks,(function(e){return e.Id&&e.Editable})),(function(e){return{Target:e.Id}})),t.TaskTemplate.Networks=t.Networks),t.TaskTemplate.ContainerSpec.Secrets=e.ServiceSecrets?e.ServiceSecrets.map(w.secretConfig):[],t.TaskTemplate.ContainerSpec.Configs=e.ServiceConfigs?e.ServiceConfigs.map(b.configConfig):[],t.TaskTemplate.ContainerSpec.Hosts=e.Hosts?S.translateHostnameIPToHostsEntries(e.Hosts):[],"replicated"===e.Mode&&(t.Mode.Replicated.Replicas=e.Replicas),t.TaskTemplate.ContainerSpec.Mounts=e.ServiceMounts,void 0===t.TaskTemplate.Placement&&(t.TaskTemplate.Placement={}),t.TaskTemplate.Placement.Constraints=S.translateKeyValueToPlacementConstraints(e.ServiceConstraints),t.TaskTemplate.Placement.Preferences=S.translateKeyValueToPlacementPreferences(e.ServicePreferences),c.hasChanges(e,["LimitNanoCPUs","LimitMemoryBytes","ReservationNanoCPUs","ReservationMemoryBytes"])){var a=(Math.round(8*e.LimitMemoryBytes)/8).toFixed(3);a*=1048576;var r=(Math.round(8*e.ReservationMemoryBytes)/8).toFixed(3);r*=1048576,t.TaskTemplate.Resources={Limits:{NanoCPUs:1e9*e.LimitNanoCPUs,MemoryBytes:a},Reservations:{NanoCPUs:1e9*e.ReservationNanoCPUs,MemoryBytes:r}}}if(c.hasChanges(e,["UpdateFailureAction","UpdateDelay","UpdateParallelism","UpdateOrder"])&&(t.UpdateConfig={Parallelism:e.UpdateParallelism,Delay:S.translateHumanDurationToNanos(e.UpdateDelay)||0,FailureAction:e.UpdateFailureAction,Order:e.UpdateOrder}),c.hasChanges(e,["RestartCondition","RestartDelay","RestartMaxAttempts","RestartWindow"])&&(t.TaskTemplate.RestartPolicy={Condition:e.RestartCondition,Delay:S.translateHumanDurationToNanos(e.RestartDelay)||5e9,MaxAttempts:e.RestartMaxAttempts,Window:S.translateHumanDurationToNanos(e.RestartWindow)||0}),t.TaskTemplate.LogDriver=null,e.LogDriverName&&(t.TaskTemplate.LogDriver={Name:e.LogDriverName},"none"!==e.LogDriverName)){var i=S.translateKeyValueToLogDriverOpts(e.LogDriverOpts);0!==Object.keys(i).length&&i.constructor===Object&&(t.TaskTemplate.LogDriver.Options=i)}return e.Ports&&e.Ports.forEach((function(e){null!==e.PublishedPort&&""!==e.PublishedPort||delete e.PublishedPort})),t.EndpointSpec={Mode:t.EndpointSpec&&t.EndpointSpec.Mode||"vip",Ports:e.Ports},t}function z(){var e=c.applicationState.endpoint.apiVersion,l=c.applicationState.endpoint.mode.agentProxy,p=null;h.service(u.params().id).then((function(t){return p=t,c.isUpdating=c.lastVersion>=p.Version,c.isUpdating||(c.lastVersion=p.Version),function(e){e.LimitNanoCPUs=e.LimitNanoCPUs/1e9||0,e.ReservationNanoCPUs=e.ReservationNanoCPUs/1e9||0,e.LimitMemoryBytes=e.LimitMemoryBytes/1024/1024||0,e.ReservationMemoryBytes=e.ReservationMemoryBytes/1024/1024||0}(p),function(e){e.ServiceSecrets=e.Secrets?e.Secrets.map(w.flattenSecret):[],e.ServiceConfigs=e.Configs?e.Configs.map(b.flattenConfig):[],e.EnvironmentVariables=S.translateEnvironmentVariables(e.Env),e.LogDriverOpts=S.translateLogDriverOptsToKeyValue(e.LogDriverOpts),e.ServiceLabels=C.fromLabelHashToKeyValue(e.Labels),e.ServiceContainerLabels=C.fromLabelHashToKeyValue(e.ContainerLabels),e.ServiceMounts=angular.copy(e.Mounts),e.ServiceConstraints=S.translateConstraintsToKeyValue(e.Constraints),e.ServicePreferences=S.translatePreferencesToKeyValue(e.Preferences),e.Hosts=S.translateHostsEntriesToHostnameIP(e.Hosts)}(p),function(e){e.RestartDelay=S.translateNanosToHumanDuration(e.RestartDelay)||"5s",e.RestartWindow=S.translateNanosToHumanDuration(e.RestartWindow)||"0s",e.UpdateDelay=S.translateNanosToHumanDuration(e.UpdateDelay)||"0s",e.StopGracePeriod=e.StopGracePeriod?S.translateNanosToHumanDuration(e.StopGracePeriod):""}(p),c.service=p,M=angular.copy(p),n.all({volumes:D.volumes(),tasks:$.tasks({service:[p.Name]}),containers:l?P.containers():[],nodes:A.nodes(),secrets:e>=1.25?y.secrets():[],configs:e>=1.3?v.configs():[],availableImages:x.images(),availableLoggingDrivers:R.loggingPlugins(e<1.25),availableNetworks:F.networks(!0,!0,e>=1.25),settings:O.publicSettings(),webhooks:U.webhooks(p.Id,L.endpointID())})})).then(function(){var e=d(regeneratorRuntime.mark((function e(n){var u,m,h,v,b,y,w,k,C,$;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.nodes=n.nodes,c.configs=n.configs,c.secrets=n.secrets,c.availableImages=x.getUniqueTagListFromImages(n.availableImages),c.availableLoggingDrivers=n.availableLoggingDrivers,c.availableVolumes=n.volumes,c.allowBindMounts=n.settings.AllowBindMountsForRegularUsers,c.isAdmin=E.isAdmin(),c.availableNetworks=n.availableNetworks,c.swarmNetworks=Object(s.a)(c.availableNetworks,(function(e){return"swarm"===e.Scope})),u=Object(i.a)(Object(r.a)(c.service.Model.Spec.Networks||[],c.service.Model.Spec.TaskTemplate.Networks||[]),"Target"),m=Object(s.a)(Object(o.a)(u,(function(e){var t=e.Target;return Object(a.a)(n.availableNetworks,{Id:t})})),Boolean),Object(t.a)(c.service.Ports,(function(e){return"ingress"===e.PublishMode}))&&(h=Object(a.a)(c.availableNetworks,(function(e){return e.Ingress})))&&m.unshift(h),e.next=15,Promise.all(Object(o.a)(m,function(){var e=d(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="",!t.IPAM.Config.length){e.next=5;break}n=t.IPAM.Config[0].Subnet,e.next=9;break;case 5:return e.next=7,F.network(t.Id);case 7:a=e.sent,n=a&&a.IPAM&&a.IPAM.Config&&a.IPAM.Config.length&&a.IPAM.Config[0].Subnet||"";case 9:return e.abrupt("return",{Id:t.Id,Name:t.Name,Addr:n,Editable:!t.Ingress});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 15:if(c.service.Networks=e.sent,M.Networks=angular.copy(c.service.Networks),n.webhooks.length>0&&(v=n.webhooks[0],c.WebhookExists=!0,c.webhookID=v.Id,c.webhookURL=j.returnWebhookUrl(v.Token)),b=n.tasks,l)for(y=n.containers,w=0;w<b.length;w++)k=b[w],I.associateContainerToTask(k,y);for($ in S.associateTasksToService(p,b),c.tasks=n.tasks,C=0,n.nodes)n.nodes[$].CPUs&&n.nodes[$].CPUs>C&&(C=n.nodes[$].CPUs);c.state.sliderMaxCpu=C>0?C/1e9:32,c.state.addSecret={override:!1},g((function(){f()}));case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){c.secrets=[],c.configs=[],T.error("",e,"Unable to retrieve service details")}))}function H(e,t){K.push(t),e.hasChanges=!0}c.goToItem=function(e){m.hash()!==e?m.hash(e):f()},c.addEnvironmentVariable=function(e){e.EnvironmentVariables.push({key:"",value:"",originalValue:""}),H(e,"EnvironmentVariables",e.EnvironmentVariables)},c.removeEnvironmentVariable=function(e,t){null!==e.EnvironmentVariables.splice(t,1)&&H(e,"EnvironmentVariables",e.EnvironmentVariables)},c.updateEnvironmentVariable=function(e,t){t.value===t.originalValue&&t.key===t.originalKey||H(e,"EnvironmentVariables",e.EnvironmentVariables)},c.addConfig=function(e,t){t&&0===e.ServiceConfigs.filter((function(e){return e.Id===t.Id})).length&&(e.ServiceConfigs.push({Id:t.Id,Name:t.Name,FileName:t.Name,Uid:"0",Gid:"0",Mode:292}),H(e,"ServiceConfigs",e.ServiceConfigs))},c.removeConfig=function(e,t){null!==e.ServiceConfigs.splice(t,1)&&H(e,"ServiceConfigs",e.ServiceConfigs)},c.updateConfig=function(e){H(e,"ServiceConfigs",e.ServiceConfigs)},c.addSecret=function(e,t){if(t.secret){var n=t.secret.Name;t.override&&(n=t.target),0===e.ServiceSecrets.filter((function(e){return e.Id===t.secret.Id&&e.FileName===n})).length&&(e.ServiceSecrets.push({Id:t.secret.Id,Name:t.secret.Name,FileName:n,Uid:"0",Gid:"0",Mode:444}),H(e,"ServiceSecrets",e.ServiceSecrets))}},c.removeSecret=function(e,t){null!==e.ServiceSecrets.splice(t,1)&&H(e,"ServiceSecrets",e.ServiceSecrets)},c.addLabel=function(e){e.ServiceLabels.push({key:"",value:"",originalValue:""}),H(e,"ServiceLabels",e.ServiceLabels)},c.removeLabel=function(e,t){null!==e.ServiceLabels.splice(t,1)&&H(e,"ServiceLabels",e.ServiceLabels)},c.updateLabel=function(e,t){t.value===t.originalValue&&t.key===t.originalKey||H(e,"ServiceLabels",e.ServiceLabels)},c.addContainerLabel=function(e){e.ServiceContainerLabels.push({key:"",value:"",originalValue:""}),H(e,"ServiceContainerLabels",e.ServiceContainerLabels)},c.removeContainerLabel=function(e,t){null!==e.ServiceContainerLabels.splice(t,1)&&H(e,"ServiceContainerLabels",e.ServiceContainerLabels)},c.updateContainerLabel=function(e,t){t.value===t.originalValue&&t.key===t.originalKey||H(e,"ServiceContainerLabels",e.ServiceContainerLabels)},c.addMount=function(e){e.ServiceMounts.push({Type:"volume",Source:null,Target:"",ReadOnly:!1}),H(e,"ServiceMounts",e.ServiceMounts)},c.removeMount=function(e,t){null!==e.ServiceMounts.splice(t,1)&&H(e,"ServiceMounts",e.ServiceMounts)},c.updateMount=function(e){H(e,"ServiceMounts",e.ServiceMounts)},c.addNetwork=function(e){e.Networks||(e.Networks=[]),e.Networks.push({Editable:!0})},c.removeNetwork=function(e,t){var n=e.Networks.splice(t,1);n&&n.length&&n[0].Id&&H(e,"Networks",e.Networks)},c.updateNetwork=function(e){H(e,"Networks",e.Networks)},c.addPlacementConstraint=function(e){e.ServiceConstraints.push({key:"",operator:"==",value:""}),H(e,"ServiceConstraints",e.ServiceConstraints)},c.removePlacementConstraint=function(e,t){null!==e.ServiceConstraints.splice(t,1)&&H(e,"ServiceConstraints",e.ServiceConstraints)},c.updatePlacementConstraint=function(e){H(e,"ServiceConstraints",e.ServiceConstraints)},c.addPlacementPreference=function(e){e.ServicePreferences.push({strategy:"spread",value:""}),H(e,"ServicePreferences",e.ServicePreferences)},c.removePlacementPreference=function(e,t){null!==e.ServicePreferences.splice(t,1)&&H(e,"ServicePreferences",e.ServicePreferences)},c.updatePlacementPreference=function(e){H(e,"ServicePreferences",e.ServicePreferences)},c.addPublishedPort=function(e){e.Ports||(e.Ports=[]),e.Ports.push({PublishedPort:"",TargetPort:"",Protocol:"tcp",PublishMode:"ingress"})},c.updatePublishedPort=function(e){H(e,"Ports",e.Ports)},c.removePortPublishedBinding=function(e,t){null!==e.Ports.splice(t,1)&&H(e,"Ports",e.Ports)},c.addLogDriverOpt=function(e){e.LogDriverOpts.push({key:"",value:"",originalValue:""}),H(e,"LogDriverOpts",e.LogDriverOpts)},c.removeLogDriverOpt=function(e,t){null!==e.LogDriverOpts.splice(t,1)&&H(e,"LogDriverOpts",e.LogDriverOpts)},c.updateLogDriverOpt=function(e,t){t.value===t.originalValue&&t.key===t.originalKey||H(e,"LogDriverOpts",e.LogDriverOpts)},c.updateLogDriverName=function(e){H(e,"LogDriverName",e.LogDriverName)},c.addHostsEntry=function(e){e.Hosts||(e.Hosts=[]),e.Hosts.push({hostname:"",ip:""})},c.removeHostsEntry=function(e,t){null!==e.Hosts.splice(t,1)&&H(e,"Hosts",e.Hosts)},c.updateHostsEntry=function(e){H(e,"Hosts",e.Hosts)},c.updateWebhook=function(e){c.WebhookExists?U.deleteWebhook(c.webhookID).then((function(){c.webhookURL=null,c.webhookID=null,c.WebhookExists=!1})).catch((function(e){T.error("",e,"Unable to delete webhook")})):U.createServiceWebhook(e.Id,L.endpointID()).then((function(e){c.WebhookExists=!0,c.webhookID=e.Id,c.webhookURL=j.returnWebhookUrl(e.Token)})).catch((function(e){T.error("",e,"Unable to create webhook")}))},c.copyWebhook=function(){_.copyText(c.webhookURL),e("#copyNotification").show(),e("#copyNotification").fadeOut(2e3)},c.cancelChanges=function(e,t){t?t.forEach((function(e){if("Image"===e)c.formValues.RegistryModel.Image="";else{var t=K.indexOf(e);t>=0&&K.splice(t,1)}})):(c.formValues.RegistryModel.Image="",t=Object.keys(e),K=[]),t.forEach((function(t){e[t]=M[t]})),e.hasChanges=!1},c.hasChanges=function(e,t){var n=!1;return t.forEach((function(e){n="Image"===e?!(!n&&!c.formValues.RegistryModel.Image):n||K.indexOf(e)>=0})),n},c.mountsAreValid=function(){return c.service.ServiceMounts.every((function(e){return e.Source&&e.Target}))},c.rollbackService=function(e){N.confirm({title:"Rollback service",message:" ?",buttons:{confirm:{label:"Yes",className:"btn-danger"}},callback:function(t){t&&function(e){var t;c.state.rollbackInProgress=!0,t=B(e),h.update(e,t,"previous").then((function(e){e.message&&e.message.match(/^rpc error:/)?T.error(e.message,"Error"):(T.success("Success","Service successfully rolled back"),c.cancelChanges({}),z())})).catch((function(e){e.data.message&&e.data.message.includes("does not have a previous spec")?T.error("",{message:"."}):T.error("",e,"Unable to rollback service")})).finally((function(){c.state.rollbackInProgress=!1}))}(e)}})},c.updateService=function(e){var t;t=B(e),h.update(e,t).then((function(e){e.message&&e.message.match(/^rpc error:/)?T.error(e.message,"Error"):T.success("Service successfully updated","Service updated"),c.cancelChanges({}),z()}),(function(e){T.error("",e,"Unable to update service")}))},c.removeService=function(){N.confirmDeletion("",(function(e){e&&(c.state.deletionInProgress=!0,h.remove(c.service).then((function(){return n.when(c.webhookID&&U.deleteWebhook(c.webhookID))})).then((function(){T.success("Service successfully deleted"),p.go("docker.services",{})})).catch((function(e){T.error("",e," service")})).finally((function(){c.state.deletionInProgress=!1})))}))},c.forceUpdateService=function(e){N.confirmServiceForceUpdate("Do you want to force an update of the service? All the tasks associated to the service will be recreated.",(function(t){if(t){var n=!1;t[0]&&(n=!0),function(e,t){var n=S.serviceToConfig(e.Model);t&&(n.TaskTemplate.ContainerSpec.Image=V.removeDigestFromRepository(n.TaskTemplate.ContainerSpec.Image));n.TaskTemplate.ForceUpdate++,c.state.updateInProgress=!0,h.update(e,n).then((function(){T.success("Service successfully updated",e.Name),c.cancelChanges({}),z()})).catch((function(t){T.error("",t,"Unable to force update service",e.Name)})).finally((function(){c.state.updateInProgress=!1}))}(e,n)}}))},c.updateServiceAttribute=function(e,t){e[t]===M[t]&&t in M||(e.hasChanges=!0);K.push(t)},c.filterNetworks=function(e,t){return e.filter((function(e){return!e.Ingress&&(e.Id===t.Id||c.service.Networks.every((function(t){return e.Id!==t.Id})))}))},z()}])}.call(this,n(45))},function(e,t){var n="app/docker/views/services/edit/includes/configs.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<form ng-if="applicationState.endpoint.apiVersion >= 1.3" id="service-configs" ng-submit="updateService(service)">\n  <rd-widget>\n    <rd-widget-header icon="fa-tasks" title-text="Configs"> </rd-widget-header>\n    <rd-widget-body classes="no-padding">\n      <div class="form-inline" style="padding: 10px;" authorization="DockerServiceUpdate">\n        Add a config:\n        <select class="form-control" ng-options="config.Name for config in configs | orderBy: \'Name\'" ng-model="newConfig">\n          <option selected disabled hidden value="">Select a config</option>\n        </select>\n        <a class="btn btn-default btn-sm" ng-click="addConfig(service, newConfig)"> <i class="fa fa-plus-circle" aria-hidden="true"></i> add config </a>\n      </div>\n      <table class="table" style="margin-top: 5px;">\n        <thead>\n          <tr>\n            <th></th>\n            <th></th>\n            <th>UID</th>\n            <th>GID</th>\n            <th>Mode</th>\n            <th></th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="config in service.ServiceConfigs">\n            <td\n              ><a ui-sref="docker.configs.config({id: config.Id})">{{ config.Name }}</a></td\n            >\n            <td>\n              <input\n                class="form-control"\n                ng-model="config.FileName"\n                ng-change="updateConfig(service)"\n                placeholder=" /path/in/container"\n                required\n                disable-authorization="DockerServiceUpdate"\n              />\n            </td>\n            <td>{{ config.Uid }}</td>\n            <td>{{ config.Gid }}</td>\n            <td>{{ config.Mode }}</td>\n            <td authorization="DockerServiceUpdate">\n              <button class="btn btn-xs btn-danger pull-right" type="button" ng-click="removeConfig(service, $index)" ng-disabled="isUpdating">\n                <i class="fa fa-trash" aria-hidden="true"></i> Remove config\n              </button>\n            </td>\n          </tr>\n          <tr ng-if="service.ServiceConfigs.length === 0">\n            <td colspan="6" class="text-center text-muted">No configs associated to this service.</td>\n          </tr>\n        </tbody>\n      </table>\n    </rd-widget-body>\n    <rd-widget-footer authorization="DockerServiceUpdate">\n      <div class="btn-toolbar" role="toolbar">\n        <div class="btn-group" role="group">\n          <button type="submit" class="btn btn-primary btn-sm" ng-disabled="!hasChanges(service, [\'ServiceConfigs\'])">Apply changes</button>\n          <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu">\n            <li><a ng-click="cancelChanges(service, [\'ServiceConfigs\'])">Reset changes</a></li>\n            <li><a ng-click="cancelChanges(service)">Reset all changes</a></li>\n          </ul>\n        </div>\n      </div>\n    </rd-widget-footer>\n  </rd-widget>\n</form>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/services/edit/includes/constraints.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div ng-if="service.ServiceConstraints" id="service-placement-constraints">\n  <rd-widget>\n    <rd-widget-header icon="fa-tasks" title-text="Placement constraints">\n      <div class="nopadding" authorization="DockerServiceUpdate">\n        <a class="btn btn-default btn-sm pull-right" ng-click="isUpdating || addPlacementConstraint(service)" ng-disabled="isUpdating">\n          <i class="fa fa-plus-circle" aria-hidden="true"></i> placement constraint\n        </a>\n      </div>\n    </rd-widget-header>\n    <rd-widget-body ng-if="service.ServiceConstraints.length === 0">\n      <p>There are no placement constraints for this service.</p>\n    </rd-widget-body>\n    <rd-widget-body ng-if="service.ServiceConstraints.length > 0" classes="no-padding">\n      <table class="table">\n        <thead>\n          <tr>\n            <th></th>\n            <th>Operator</th>\n            <th>Value</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="constraint in service.ServiceConstraints">\n            <td>\n              <div class="input-group input-group-sm">\n                <input\n                  type="text"\n                  class="form-control"\n                  ng-model="constraint.key"\n                  placeholder=" node.role"\n                  ng-change="updatePlacementConstraint(service, constraint)"\n                  ng-disabled="isUpdating"\n                  disable-authorization="DockerServiceUpdate"\n                />\n              </div>\n            </td>\n            <td>\n              <div class="input-group input-group-sm">\n                <select\n                  name="constraintOperator"\n                  class="form-control"\n                  ng-model="constraint.operator"\n                  ng-change="updatePlacementConstraint(service, constraint)"\n                  ng-disabled="isUpdating"\n                  disable-authorization="DockerServiceUpdate"\n                >\n                  <option value="==">==</option>\n                  <option value="!=">!=</option>\n                </select>\n              </div>\n            </td>\n            <td>\n              <div class="input-group input-group-sm">\n                <input\n                  type="text"\n                  class="form-control"\n                  ng-model="constraint.value"\n                  placeholder=" manager"\n                  ng-change="updatePlacementConstraint(service, constraint)"\n                  ng-disabled="isUpdating"\n                  disable-authorization="DockerServiceUpdate"\n                />\n                <span class="input-group-btn" authorization="DockerServiceUpdate">\n                  <button class="btn btn-sm btn-danger" type="button" ng-click="removePlacementConstraint(service, $index)" ng-disabled="isUpdating">\n                    <i class="fa fa-trash" aria-hidden="true"></i>\n                  </button>\n                </span>\n              </div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </rd-widget-body>\n    <rd-widget-footer authorization="DockerServiceUpdate">\n      <div class="btn-toolbar" role="toolbar">\n        <div class="btn-group" role="group">\n          <button type="button" class="btn btn-primary btn-sm" ng-disabled="!hasChanges(service, [\'ServiceConstraints\'])" ng-click="updateService(service)">Apply changes</button>\n          <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu">\n            <li><a ng-click="cancelChanges(service, [\'ServiceConstraints\'])">Reset changes</a></li>\n            <li><a ng-click="cancelChanges(service)">Reset all changes</a></li>\n          </ul>\n        </div>\n      </div>\n    </rd-widget-footer>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/services/edit/includes/container-specs.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div>\n  <rd-widget>\n    <rd-widget-header icon="fa-list-alt" title-text="Container spec"></rd-widget-header>\n    <rd-widget-body classes="no-padding">\n      <table class="table">\n        <tbody>\n          <tr>\n            <td>CMD</td>\n            <td\n              ><code ng-if="service.Command">{{ service.Command | command }}</code></td\n            >\n            <td>\n              <p class="small text-muted" style="margin-top: 10px;">\n                Command to execute.\n              </p>\n            </td>\n          </tr>\n          <tr>\n            <td>Args</td>\n            <td\n              ><code ng-if="service.Arguments">{{ service.Arguments }}</code></td\n            >\n            <td>\n              <p class="small text-muted" style="margin-top: 10px;">\n                Arguments passed to command in container.\n              </p>\n            </td>\n          </tr>\n          <tr>\n            <td></td>\n            <td>{{ service.User }}</td>\n            <td>\n              <p class="small text-muted" style="margin-top: 10px;">\n                 UID.\n              </p>\n            </td>\n          </tr>\n          <tr>\n            <td>Working directory</td>\n            <td>{{ service.Dir }}</td>\n            <td>\n              <p class="small text-muted" style="margin-top: 10px;">\n                Working directory inside the container.\n              </p>\n            </td>\n          </tr>\n          <tr>\n            <td>Stop grace period</td>\n            <td>{{ service.StopGracePeriod }}</td>\n            <td>\n              <p class="small text-muted" style="margin-top: 10px;">\n                Time to wait before force killing a container (default none).\n              </p>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/services/edit/includes/containerlabels.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div id="service-container-labels">\n  <rd-widget>\n    <rd-widget-header icon="fa-tasks" title-text="Container labels">\n      <div class="nopadding" authorization="DockerServiceUpdate">\n        <a class="btn btn-default btn-sm pull-right" ng-click="isUpdating ||addContainerLabel(service)" ng-disabled="isUpdating">\n          <i class="fa fa-plus-circle" aria-hidden="true"></i> container label\n        </a>\n      </div>\n    </rd-widget-header>\n    <rd-widget-body ng-if="service.ServiceContainerLabels.length === 0">\n      <p>There are no container labels for this service.</p>\n    </rd-widget-body>\n    <rd-widget-body ng-if="service.ServiceContainerLabels.length > 0" classes="no-padding">\n      <table class="table">\n        <thead>\n          <tr>\n            <th>Label</th>\n            <th>Value</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="label in service.ServiceContainerLabels">\n            <td>\n              <div class="input-group input-group-sm">\n                <span class="input-group-addon fit-text-size">name</span>\n                <input\n                  type="text"\n                  class="form-control"\n                  ng-model="label.key"\n                  placeholder=" com.example.foo"\n                  ng-change="updateContainerLabel(service, label)"\n                  ng-disabled="isUpdating"\n                  disable-authorization="DockerServiceUpdate"\n                />\n              </div>\n            </td>\n            <td>\n              <div class="input-group input-group-sm">\n                <span class="input-group-addon fit-text-size">value</span>\n                <input\n                  type="text"\n                  class="form-control"\n                  ng-model="label.value"\n                  placeholder=" bar"\n                  ng-change="updateContainerLabel(service, label)"\n                  ng-disabled="isUpdating"\n                  disable-authorization="DockerServiceUpdate"\n                />\n                <span class="input-group-btn" authorization="DockerServiceUpdate">\n                  <button class="btn btn-sm btn-danger" type="button" ng-click="removeContainerLabel(service, $index)" ng-disabled="isUpdating">\n                    <i class="fa fa-trash" aria-hidden="true"></i>\n                  </button>\n                </span>\n              </div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </rd-widget-body>\n    <rd-widget-footer authorization="DockerServiceUpdate">\n      <div class="btn-toolbar" role="toolbar">\n        <div class="btn-group" role="group">\n          <button type="button" class="btn btn-primary btn-sm" ng-disabled="!hasChanges(service, [\'ServiceContainerLabels\'])" ng-click="updateService(service)"\n            >Apply changes</button\n          >\n          <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu">\n            <li><a ng-click="cancelChanges(service, [\'ServiceContainerLabels\'])">Reset changes</a></li>\n            <li><a ng-click="cancelChanges(service)">Reset all changes</a></li>\n          </ul>\n        </div>\n      </div>\n    </rd-widget-footer>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/services/edit/includes/environmentvariables.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div ng-if="service.EnvironmentVariables" id="service-env-variables">\n  <rd-widget>\n    <rd-widget-header icon="fa-tasks" title-text="Environment variables">\n      <div class="nopadding" authorization="DockerServiceUpdate">\n        <a class="btn btn-default btn-sm pull-right" ng-click="isUpdating ||addEnvironmentVariable(service)" ng-disabled="isUpdating">\n          <i class="fa fa-plus-circle" aria-hidden="true"></i> environment variable\n        </a>\n      </div>\n    </rd-widget-header>\n    <rd-widget-body ng-if="service.EnvironmentVariables.length === 0">\n      <p>There are no environment variables for this service.</p>\n    </rd-widget-body>\n    <rd-widget-body ng-if="service.EnvironmentVariables.length > 0" classes="no-padding">\n      <table class="table">\n        <thead>\n          <tr>\n            <th></th>\n            <th>Value</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="var in service.EnvironmentVariables">\n            <td>\n              <div class="input-group input-group-sm">\n                <span class="input-group-addon fit-text-size">name</span>\n                <input type="text" class="form-control" ng-model="var.key" ng-disabled="var.added || isUpdating" placeholder=" FOO" />\n              </div>\n            </td>\n            <td>\n              <div class="input-group input-group-sm">\n                <span class="input-group-addon fit-text-size">value</span>\n                <input\n                  type="text"\n                  class="form-control"\n                  ng-model="var.value"\n                  ng-change="updateEnvironmentVariable(service, var)"\n                  placeholder=" bar"\n                  ng-disabled="isUpdating"\n                  disable-authorization="DockerServiceUpdate"\n                />\n                <span class="input-group-btn" authorization="DockerServiceUpdate">\n                  <button class="btn btn-sm btn-danger" type="button" ng-click="removeEnvironmentVariable(service, $index)" ng-disabled="isUpdating">\n                    <i class="fa fa-trash" aria-hidden="true"></i>\n                  </button>\n                </span>\n              </div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </rd-widget-body>\n    <rd-widget-footer authorization="DockerServiceUpdate">\n      <div class="btn-toolbar" role="toolbar">\n        <div class="btn-group" role="group">\n          <button type="button" class="btn btn-primary btn-sm" ng-disabled="!hasChanges(service, [\'EnvironmentVariables\'])" ng-click="updateService(service)">Apply changes</button>\n          <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu">\n            <li><a ng-click="cancelChanges(service, [\'EnvironmentVariables\'])">Reset changes</a></li>\n            <li><a ng-click="cancelChanges(service)">Reset all changes</a></li>\n          </ul>\n        </div>\n      </div>\n    </rd-widget-footer>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/services/edit/includes/hosts.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div>\n  <rd-widget>\n    <rd-widget-header icon="fa-tasks" title-text="">\n      <div class="nopadding" authorization="DockerServiceUpdate">\n        <a class="btn btn-default btn-sm pull-right" ng-click="isUpdating ||addHostsEntry(service)" ng-disabled="isUpdating">\n          <i class="fa fa-plus-circle" aria-hidden="true"></i> add host entry\n        </a>\n      </div>\n    </rd-widget-header>\n    <rd-widget-body ng-if="!service.Hosts || service.Hosts.length === 0">\n      <p>The Hosts file has no extra entries.</p>\n    </rd-widget-body>\n    <rd-widget-body ng-if="service.Hosts.length > 0" classes="no-padding">\n      <table class="table">\n        <thead>\n          <tr>\n            <th></th>\n            <th>IP</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="entry in service.Hosts">\n            <td>\n              <div class="input-group input-group-sm">\n                <input\n                  type="text"\n                  class="form-control"\n                  ng-model="entry.hostname"\n                  placeholder=" example.com"\n                  ng-change="updateHostsEntry(service, entry)"\n                  ng-disabled="isUpdating"\n                  disable-authorization="DockerServiceUpdate"\n                />\n              </div>\n            </td>\n            <td>\n              <div class="input-group input-group-sm">\n                <input\n                  type="text"\n                  class="form-control"\n                  ng-model="entry.ip"\n                  placeholder=" 10.0.1.1"\n                  ng-change="updateHostsEntry(service, entry)"\n                  ng-disabled="isUpdating"\n                  disable-authorization="DockerServiceUpdate"\n                />\n                <span class="input-group-btn" authorization="DockerServiceUpdate">\n                  <button class="btn btn-sm btn-danger" type="button" ng-click="removeHostsEntry(service, $index)" ng-disabled="isUpdating">\n                    <i class="fa fa-trash" aria-hidden="true"></i>\n                  </button>\n                </span>\n              </div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </rd-widget-body>\n    <rd-widget-footer authorization="DockerServiceUpdate">\n      <div class="btn-toolbar" role="toolbar">\n        <div class="btn-group" role="group">\n          <button type="button" class="btn btn-primary btn-sm" ng-disabled="!hasChanges(service, [\'Hosts\'])" ng-click="updateService(service)">Apply changes</button>\n          <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu">\n            <li><a ng-click="cancelChanges(service, [\'Hosts\'])">Reset changes</a></li>\n            <li><a ng-click="cancelChanges(service)">Reset all changes</a></li>\n          </ul>\n        </div>\n      </div>\n    </rd-widget-footer>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/services/edit/includes/image.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div id="service-container-image" authorization="DockerServiceUpdate">\n  <rd-widget>\n    <rd-widget-header icon="fa-clone" title-text="Change container image"> </rd-widget-header>\n    <rd-widget-body ng-if="!isUpdating">\n      <form class="form-horizontal">\n        <por-image-registry model="formValues.RegistryModel" auto-complete="true" label-class="col-sm-1" input-class="col-sm-11"></por-image-registry>\n      </form>\n    </rd-widget-body>\n    <rd-widget-body ng-if="isUpdating">\n      <p>Image modification is disabled while service is updating.</p>\n    </rd-widget-body>\n    <rd-widget-footer authorization="DockerServiceUpdate">\n      <div class="btn-toolbar" role="toolbar">\n        <div class="btn-group" role="group">\n          <button type="button" class="btn btn-primary btn-sm" ng-disabled="!hasChanges(service, [\'Image\'])" ng-click="updateService(service)">Apply changes</button>\n          <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu">\n            <li><a ng-click="cancelChanges(service, [\'Image\'])">Reset changes</a></li>\n            <li><a ng-click="cancelChanges(service)">Reset all changes</a></li>\n          </ul>\n        </div>\n      </div>\n    </rd-widget-footer>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/services/edit/includes/logging.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div id="service-logging-driver">\n  <rd-widget>\n    <rd-widget-header icon="fa-tasks" title-text="Logging driver"> </rd-widget-header>\n    <rd-widget-body classes="no-padding">\n      <div class="form-inline" style="padding: 10px;" authorization="DockerServiceUpdate">\n        Driver:\n        <select class="form-control" ng-model="service.LogDriverName" ng-change="updateLogDriverName(service)" ng-disabled="isUpdating">\n          <option selected value=""></option>\n          <option ng-repeat="driver in availableLoggingDrivers" ng-value="driver">{{ driver }}</option>\n          <option value="none"></option>\n        </select>\n        <a class="btn btn-default btn-sm" ng-click="!service.LogDriverName || service.LogDriverName === \'none\' || addLogDriverOpt(service)">\n          <i class="fa fa-plus-circle" aria-hidden="true"></i> add logging driver option\n        </a>\n      </div>\n      <table class="table">\n        <thead>\n          <tr>\n            <th>Option</th>\n            <th>Value</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="option in service.LogDriverOpts">\n            <td>\n              <div class="input-group input-group-sm">\n                <span class="input-group-addon fit-text-size">name</span>\n                <input type="text" class="form-control" ng-model="option.key" ng-disabled="option.added || isUpdating" placeholder=" FOO" />\n              </div>\n            </td>\n            <td>\n              <div class="input-group input-group-sm">\n                <span class="input-group-addon fit-text-size">value</span>\n                <input\n                  type="text"\n                  class="form-control"\n                  ng-model="option.value"\n                  ng-change="updateLogDriverOpt(service, option)"\n                  placeholder=" bar"\n                  ng-disabled="isUpdating"\n                  disable-authorization="DockerServiceUpdate"\n                />\n                <span class="input-group-btn" authorization="DockerServiceUpdate">\n                  <button class="btn btn-sm btn-danger" type="button" ng-click="removeLogDriverOpt(service, $index)" ng-disabled="isUpdating">\n                    <i class="fa fa-trash" aria-hidden="true"></i>\n                  </button>\n                </span>\n              </div>\n            </td>\n          </tr>\n          <tr ng-if="service.LogDriverOpts.length === 0">\n            <td colspan="6" class="text-center text-muted">No options associated to this logging driver.</td>\n          </tr>\n        </tbody>\n      </table>\n    </rd-widget-body>\n    <rd-widget-footer authorization="DockerServiceUpdate">\n      <div class="btn-toolbar" role="toolbar">\n        <div class="btn-group" role="group">\n          <button type="button" class="btn btn-primary btn-sm" ng-disabled="!hasChanges(service, [\'LogDriverName\', \'LogDriverOpts\'])" ng-click="updateService(service)"\n            >Apply changes</button\n          >\n          <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu">\n            <li><a ng-click="cancelChanges(service, [\'LogDriverName\', \'LogDriverOpts\'])">Reset changes</a></li>\n            <li><a ng-click="cancelChanges(service)">Reset all changes</a></li>\n          </ul>\n        </div>\n      </div>\n    </rd-widget-footer>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/services/edit/includes/mounts.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div ng-if="service.ServiceMounts" id="service-mounts">\n  <rd-widget>\n    <rd-widget-header icon="fa-tasks" title-text="Mounts">\n      <div class="nopadding" authorization="DockerServiceUpdate">\n        <a class="btn btn-default btn-sm pull-right" ng-click="isUpdating ||addMount(service)" ng-disabled="isUpdating">\n          <i class="fa fa-plus-circle" aria-hidden="true"></i> mount\n        </a>\n      </div>\n    </rd-widget-header>\n    <rd-widget-body ng-if="service.ServiceMounts.length === 0">\n      <p>There are no mounts for this service.</p>\n    </rd-widget-body>\n    <rd-widget-body ng-if="service.ServiceMounts.length > 0" classes="no-padding">\n      <table class="table">\n        <thead>\n          <tr>\n            <th ng-if="isAdmin || allowBindMounts"></th>\n            <th>Source</th>\n            <th>Target</th>\n            <th authorization="DockerServiceUpdate">Read only</th>\n            <th authorization="DockerServiceUpdate"></th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="mount in service.ServiceMounts">\n            <td ng-if="isAdmin || allowBindMounts">\n              <select name="mountType" class="form-control" ng-model="mount.Type" ng-disabled="isUpdating" disable-authorization="DockerServiceUpdate">\n                <option value="volume"></option>\n                <option value="bind"></option>\n              </select>\n            </td>\n            <td>\n              <select\n                class="form-control"\n                ng-model="mount.Source"\n                ng-options="vol.Id as ((vol.Id|truncate:30) + \' - \' + (vol.Driver|truncate:30))  for vol in availableVolumes"\n                ng-if="mount.Type === \'volume\'"\n                disable-authorization="DockerServiceUpdate"\n              >\n                <option selected disabled hidden value="">Select a volume</option>\n              </select>\n              <input\n                type="text"\n                class="form-control"\n                name=""\n                ng-model="mount.Source"\n                placeholder=" /tmp/portainer/data"\n                ng-change="updateMount(service, mount)"\n                ng-disabled="isUpdating || (!isAdmin && !allowBindMounts && mount.Type === \'bind\')"\n                ng-if="mount.Type === \'bind\'"\n              />\n              <div class="col-sm-12 small text-warning" ng-show="!mount.Source"> <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Source is required. </div>\n            </td>\n            <td>\n              <input\n                type="text"\n                class="form-control"\n                ng-model="mount.Target"\n                placeholder=" /tmp/portainer/data"\n                ng-change="updateMount(service, mount)"\n                ng-disabled="isUpdating"\n                disable-authorization="DockerServiceUpdate"\n              />\n              <div class="col-sm-12 small text-warning" ng-show="!mount.Target"> <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Target is required. </div>\n            </td>\n            <td authorization="DockerServiceUpdate">\n              <input type="checkbox" class="form-control" ng-model="mount.ReadOnly" ng-change="updateMount(service, mount)" ng-disabled="isUpdating" />\n            </td>\n            <td authorization="DockerServiceUpdate">\n              <span class="input-group-btn">\n                <button class="btn btn-sm btn-danger" type="button" ng-click="removeMount(service, $index)" ng-disabled="isUpdating">\n                  <i class="fa fa-trash" aria-hidden="true"></i>\n                </button>\n              </span>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </rd-widget-body>\n    <rd-widget-footer authorization="DockerServiceUpdate">\n      <div class="btn-toolbar" role="toolbar">\n        <div class="btn-group" role="group">\n          <button type="button" class="btn btn-primary btn-sm" ng-disabled="!mountsAreValid() || !hasChanges(service, [\'ServiceMounts\'])" ng-click="updateService(service)">\n            Apply changes\n          </button>\n          <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu">\n            <li><a ng-click="cancelChanges(service, [\'ServiceMounts\'])">Reset changes</a></li>\n            <li><a ng-click="cancelChanges(service)">Reset all changes</a></li>\n          </ul>\n        </div>\n      </div>\n    </rd-widget-footer>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/services/edit/includes/networks.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div id="service-network-specs">\n  <rd-widget>\n    <rd-widget-header icon="fa-tasks" title-text="">\n      <div class="nopadding" authorization="DockerServiceUpdate">\n        <a class="btn btn-default btn-sm pull-right" ng-click="isUpdating || addNetwork(service)" ng-disabled="isUpdating">\n          <i class="fa fa-plus-circle" aria-hidden="true"></i> network\n        </a>\n      </div>\n    </rd-widget-header>\n    <rd-widget-body ng-if="!service.Networks || service.Networks.length === 0">\n      <p>This service is not connected to any networks.</p>\n    </rd-widget-body>\n    <rd-widget-body ng-if="service.Networks && service.Networks.length > 0" classes="no-padding">\n      <table class="table">\n        <thead>\n          <tr>\n            <th></th>\n            <th>ID</th>\n            <th>IP </th>\n            <th></th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="network in service.Networks">\n            <td>\n              <select\n                ng-if="network.Editable"\n                class="form-control"\n                ng-model="network.Id"\n                ng-change="updateNetwork(service)"\n                ng-options="net.Id as net.Name for net in filterNetworks(swarmNetworks, network)"\n                disable-authorization="DockerServiceUpdate"\n                style="width: initial; min-width: 50%;"\n              >\n                <option disabled value="" selected></option>\n              </select>\n              <span ng-if="!network.Editable">{{ network.Name }}</span>\n            </td>\n            <td>\n              <a ui-sref="docker.networks.network({id: network.Id})">{{ network.Id }}</a>\n            </td>\n            <td>\n              {{ network.Addr }}\n            </td>\n            <td ng-if="network.Editable" authorization="DockerServiceUpdate">\n              <span class="input-group-btn">\n                <button class="btn btn-sm btn-danger" type="button" ng-click="removeNetwork(service, $index)" ng-disabled="isUpdating">\n                  <i class="fa fa-trash" aria-hidden="true"></i>\n                </button>\n              </span>\n            </td>\n            <td ng-if="!network.Editable"></td>\n          </tr>\n        </tbody>\n      </table>\n    </rd-widget-body>\n    <rd-widget-footer authorization="DockerServiceUpdate">\n      <div class="btn-toolbar" role="toolbar">\n        <div class="btn-group" role="group">\n          <button type="button" class="btn btn-primary btn-sm" ng-disabled="isUpdating || !hasChanges(service, [\'Networks\'])" ng-click="updateService(service)">\n            Apply changes\n          </button>\n          <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu">\n            <li><a ng-click="cancelChanges(service, [\'Networks\'])">Reset changes</a></li>\n            <li><a ng-click="cancelChanges(service)">Reset all changes</a></li>\n          </ul>\n        </div>\n      </div>\n    </rd-widget-footer>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/services/edit/includes/placementPreferences.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div ng-if="service.ServicePreferences" id="service-placement-preferences">\n  <rd-widget>\n    <rd-widget-header icon="fa-tasks" title-text="Placement preferences">\n      <div class="nopadding" authorization="DockerServiceUpdate">\n        <a class="btn btn-default btn-sm pull-right" ng-click="isUpdating || addPlacementPreference(service)" ng-disabled="isUpdating">\n          <i class="fa fa-plus-circle" aria-hidden="true"></i> placement preference\n        </a>\n      </div>\n    </rd-widget-header>\n    <rd-widget-body ng-if="service.ServicePreferences.length === 0">\n      <p>There are no placement preferences for this service.</p>\n    </rd-widget-body>\n    <rd-widget-body ng-if="service.ServicePreferences.length > 0" classes="no-padding">\n      <table class="table">\n        <thead>\n          <tr>\n            <th>Strategy</th>\n            <th>Value</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="preference in service.ServicePreferences">\n            <td>\n              <div class="input-group input-group-sm">\n                <input\n                  type="text"\n                  class="form-control"\n                  ng-model="preference.strategy"\n                  placeholder=" node.role"\n                  ng-change="updatePlacementPreference(service, preference)"\n                  ng-disabled="isUpdating"\n                  disable-authorization="DockerServiceUpdate"\n                />\n              </div>\n            </td>\n            <td>\n              <div class="input-group input-group-sm">\n                <input\n                  type="text"\n                  class="form-control"\n                  ng-model="preference.value"\n                  placeholder=" manager"\n                  ng-change="updatePlacementPreference(service, preference)"\n                  ng-disabled="isUpdating"\n                  disable-authorization="DockerServiceUpdate"\n                />\n                <span class="input-group-btn" authorization="DockerServiceUpdate">\n                  <button class="btn btn-sm btn-danger" type="button" ng-click="removePlacementPreference(service, $index)" ng-disabled="isUpdating">\n                    <i class="fa fa-trash" aria-hidden="true"></i>\n                  </button>\n                </span>\n              </div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </rd-widget-body>\n    <rd-widget-footer authorization="DockerServiceUpdate">\n      <div class="btn-toolbar" role="toolbar">\n        <div class="btn-group" role="group">\n          <button type="button" class="btn btn-primary btn-sm" ng-disabled="!hasChanges(service, [\'ServicePreferences\'])" ng-click="updateService(service)">Apply changes</button>\n          <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu">\n            <li><a ng-click="cancelChanges(service, [\'ServicePreferences\'])">Reset changes</a></li>\n            <li><a ng-click="cancelChanges(service)">Reset all changes</a></li>\n          </ul>\n        </div>\n      </div>\n    </rd-widget-footer>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/services/edit/includes/ports.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div>\n  <rd-widget>\n    <rd-widget-header icon="fa-tasks" title-text="Published ports">\n      <div class="nopadding" authorization="DockerServiceUpdate">\n        <a class="btn btn-default btn-sm pull-right" ng-click="isUpdating ||addPublishedPort(service)" ng-disabled="isUpdating">\n          <i class="fa fa-plus-circle" aria-hidden="true"></i> port mapping\n        </a>\n      </div>\n    </rd-widget-header>\n    <rd-widget-body ng-if="!service.Ports || service.Ports.length === 0">\n      <p>This service has no ports published.</p>\n    </rd-widget-body>\n    <rd-widget-body ng-if="service.Ports && service.Ports.length > 0" classes="no-padding">\n      <table class="table">\n        <thead>\n          <tr>\n            <th>Host port</th>\n            <th>Container port</th>\n            <th>Protocol</th>\n            <th>Publish mode</th>\n            <th authorization="DockerServiceUpdate"></th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="portBinding in service.Ports">\n            <td>\n              <div class="input-group input-group-sm">\n                <span class="input-group-addon">host</span>\n                <input\n                  type="number"\n                  class="form-control"\n                  ng-model="portBinding.PublishedPort"\n                  placeholder=" 8080"\n                  ng-change="updatePublishedPort(service, mapping)"\n                  ng-disabled="isUpdating"\n                  disable-authorization="DockerServiceUpdate"\n                />\n              </div>\n            </td>\n            <td>\n              <div class="input-group input-group-sm">\n                <span class="input-group-addon"></span>\n                <input\n                  type="number"\n                  class="form-control"\n                  ng-model="portBinding.TargetPort"\n                  placeholder=" 80"\n                  ng-change="updatePublishedPort(service, mapping)"\n                  ng-disabled="isUpdating"\n                  disable-authorization="DockerServiceUpdate"\n                />\n              </div>\n            </td>\n            <td>\n              <div class="input-group input-group-sm">\n                <select\n                  class="selectpicker form-control"\n                  ng-model="portBinding.Protocol"\n                  ng-change="updatePublishedPort(service, mapping)"\n                  ng-disabled="isUpdating"\n                  disable-authorization="DockerServiceUpdate"\n                >\n                  <option value="tcp">tcp</option>\n                  <option value="udp">udp</option>\n                </select>\n              </div>\n            </td>\n            <td>\n              <div class="input-group input-group-sm">\n                <select\n                  class="selectpicker form-control"\n                  ng-model="portBinding.PublishMode"\n                  ng-change="updatePublishedPort(service, mapping)"\n                  ng-disabled="isUpdating"\n                  disable-authorization="DockerServiceUpdate"\n                >\n                  <option value="ingress">ingress</option>\n                  <option value="host">host</option>\n                </select>\n              </div>\n            </td>\n            <td authorization="DockerServiceUpdate">\n              <span class="input-group-btn">\n                <button class="btn btn-sm btn-danger" type="button" ng-click="removePortPublishedBinding(service, $index)" ng-disabled="isUpdating">\n                  <i class="fa fa-trash" aria-hidden="true"></i>\n                </button>\n              </span>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </rd-widget-body>\n    <rd-widget-footer authorization="DockerServiceUpdate">\n      <div class="btn-toolbar" role="toolbar">\n        <div class="btn-group" role="group">\n          <button type="button" class="btn btn-primary btn-sm" ng-disabled="!hasChanges(service, [\'Ports\'])" ng-click="updateService(service)">Apply changes</button>\n          <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu">\n            <li><a ng-click="cancelChanges(service, [\'Ports\'])">Reset changes</a></li>\n            <li><a ng-click="cancelChanges(service)">Reset all changes</a></li>\n          </ul>\n        </div>\n      </div>\n    </rd-widget-footer>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/services/edit/includes/resources.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div id="service-resources">\n  <rd-widget>\n    <rd-widget-header icon="fa-list-alt" title-text="Resource limits and reservations"> </rd-widget-header>\n    <rd-widget-body classes="no-padding">\n      <table class="table">\n        <tbody>\n          <tr>\n            <td style="vertical-align: middle;">\n               (MB)\n            </td>\n            <td>\n              <input\n                class="input-sm"\n                type="number"\n                step="0.125"\n                min="0"\n                ng-model="service.ReservationMemoryBytes"\n                ng-change="updateServiceAttribute(service, \'ReservationMemoryBytes\')"\n                disable-authorization="DockerServiceUpdate"\n              />\n            </td>\n            <td style="vertical-align: middle;">\n              <p class="small text-muted">\n                0\n              </p>\n            </td>\n          </tr>\n          <tr>\n            <td style="vertical-align: middle;">\n               (MB)\n            </td>\n            <td>\n              <input\n                class="input-sm"\n                type="number"\n                step="0.125"\n                min="0"\n                ng-model="service.LimitMemoryBytes"\n                ng-change="updateServiceAttribute(service, \'LimitMemoryBytes\')"\n                disable-authorization="DockerServiceUpdate"\n              />\n            </td>\n            <td style="vertical-align: middle;">\n              <p class="small text-muted">\n                0\n              </p>\n            </td>\n          </tr>\n          <tr>\n            <td style="vertical-align: middle;">\n              <div>\n                CPU reservation\n              </div>\n            </td>\n            <td>\n              <slider\n                model="service.ReservationNanoCPUs"\n                floor="0"\n                ceil="state.sliderMaxCpu"\n                step="0.25"\n                precision="2"\n                ng-if="service && state.sliderMaxCpu"\n                on-change="updateServiceAttribute(service, \'ReservationNanoCPUs\')"\n                disable-authorization="DockerServiceUpdate"\n              ></slider>\n            </td>\n            <td style="vertical-align: middle;">\n              <p class="small text-muted">\n                Minimum CPU available on a node to run a task\n              </p>\n            </td>\n          </tr>\n          <tr>\n            <td style="vertical-align: middle;">\n              <div>\n                CPU \n              </div>\n            </td>\n            <td>\n              <slider\n                model="service.LimitNanoCPUs"\n                floor="0"\n                ceil="state.sliderMaxCpu"\n                step="0.25"\n                precision="2"\n                ng-if="service && state.sliderMaxCpu"\n                on-change="updateServiceAttribute(service, \'LimitNanoCPUs\')"\n                disable-authorization="DockerServiceUpdate"\n              ></slider>\n            </td>\n            <td style="vertical-align: middle;">\n              <p class="small text-muted">\n                CPU\n              </p>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </rd-widget-body>\n    <rd-widget-footer authorization="DockerServiceUpdate">\n      <div class="btn-toolbar" role="toolbar">\n        <div class="btn-group" role="group">\n          <button\n            type="button"\n            class="btn btn-primary btn-sm"\n            ng-disabled="!hasChanges(service, [\'LimitNanoCPUs\', \'LimitMemoryBytes\', \'ReservationNanoCPUs\', \'ReservationMemoryBytes\'])"\n            ng-click="updateService(service)"\n            >Apply changes</button\n          >\n          <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu">\n            <li><a ng-click="cancelChanges(service, [\'LimitNanoCPUs\', \'LimitMemoryBytes\', \'ReservationNanoCPUs\', \'ReservationMemoryBytes\'])">Reset changes</a></li>\n            <li><a ng-click="cancelChanges(service)">Reset all changes</a></li>\n          </ul>\n        </div>\n      </div>\n    </rd-widget-footer>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/services/edit/includes/restart.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div id="service-restart-policy">\n  <rd-widget>\n    <rd-widget-header icon="fa-list-alt" title-text="Restart policy"> </rd-widget-header>\n    <rd-widget-body classes="no-padding">\n      <table class="table">\n        <tbody>\n          <tr>\n            <td>Restart condition</td>\n            <td>\n              <div class="input-group input-group-sm">\n                <select\n                  class="selectpicker form-control"\n                  ng-model="service.RestartCondition"\n                  ng-change="updateServiceAttribute(service, \'RestartCondition\')"\n                  disable-authorization="DockerServiceUpdate"\n                >\n                  <option value="none"></option>\n                  <option value="on-failure"></option>\n                  <option value="any">Any</option>\n                </select>\n              </div>\n            </td>\n            <td>\n              <p class="small text-muted" style="margin-top: 10px;">\n                Condition for restart.\n              </p>\n            </td>\n          </tr>\n          <tr>\n            <td>Restart delay</td>\n            <td>\n              <input\n                class="input-sm"\n                type="text"\n                ng-model="service.RestartDelay"\n                ng-change="updateServiceAttribute(service, \'RestartDelay\')"\n                ng-pattern="/^([0-9]+)(h|m|s|ms|us|ns)$/i"\n                disable-authorization="DockerServiceUpdate"\n              />\n            </td>\n            <td>\n              <p class="small text-muted" style="margin-top: 10px;">\n                Delay between restart attempts expressed by a number followed by unit (ns|us|ms|s|m|h). Default value is 5s, 5 seconds.\n              </p>\n            </td>\n          </tr>\n          <tr>\n            <td>Restart max attempts</td>\n            <td>\n              <input\n                class="input-sm"\n                type="number"\n                ng-model="service.RestartMaxAttempts"\n                ng-change="updateServiceAttribute(service, \'RestartMaxAttempts\')"\n                disable-authorization="DockerServiceUpdate"\n              />\n            </td>\n            <td>\n              <p class="small text-muted" style="margin-top: 10px;">\n                0\n              </p>\n            </td>\n          </tr>\n          <tr>\n            <td>Restart window</td>\n            <td>\n              <input\n                class="input-sm"\n                type="text"\n                ng-model="service.RestartWindow"\n                ng-change="updateServiceAttribute(service, \'RestartWindow\')"\n                ng-pattern="/^([0-9]+)(h|m|s|ms|us|ns)$/i"\n                disable-authorization="DockerServiceUpdate"\n              />\n            </td>\n            <td>\n              <p class="small text-muted" style="margin-top: 10px;">\n                Time window to evaluate restart attempts expressed by a number followed by unit (ns|us|ms|s|m|h). Default value is 0 seconds, which is unbounded.\n              </p>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </rd-widget-body>\n    <rd-widget-footer authorization="DockerServiceUpdate">\n      <div class="btn-toolbar" role="toolbar">\n        <div class="btn-group" role="group">\n          <button\n            type="button"\n            class="btn btn-primary btn-sm"\n            ng-disabled="!hasChanges(service, [\'RestartCondition\', \'RestartDelay\', \'RestartMaxAttempts\', \'RestartWindow\'])"\n            ng-click="updateService(service)"\n            >Apply changes</button\n          >\n          <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu">\n            <li><a ng-click="cancelChanges(service, [\'RestartCondition\', \'RestartDelay\', \'RestartMaxAttempts\', \'RestartWindow\'])">Reset changes</a></li>\n            <li><a ng-click="cancelChanges(service)">Reset all changes</a></li>\n          </ul>\n        </div>\n      </div>\n    </rd-widget-footer>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/services/edit/includes/secrets.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div ng-if="applicationState.endpoint.apiVersion >= 1.25" id="service-secrets">\n  <rd-widget>\n    <rd-widget-header icon="fa-tasks" title-text="Secrets"> </rd-widget-header>\n    <rd-widget-body classes="no-padding">\n      <div class="form-inline" style="padding: 10px;" authorization="DockerServiceUpdate">\n        Add a secret:\n        <select class="form-control" ng-options="secret.Name for secret in secrets | orderBy: \'Name\'" ng-model="state.addSecret.secret">\n          <option selected disabled hidden value="">Select a secret</option>\n        </select>\n        <div class="form-group" ng-if="applicationState.endpoint.apiVersion >= 1.3 && state.addSecret.override">\n          Target:\n          <input class="form-control" ng-model="state.addSecret.target" placeholder="/path/in/container" />\n        </div>\n        <div class="btn-group btn-group-sm" ng-if="applicationState.endpoint.apiVersion >= 1.3">\n          <label class="btn btn-primary" ng-model="state.addSecret.override" uib-btn-radio="false">Default location</label>\n          <label class="btn btn-primary" ng-model="state.addSecret.override" uib-btn-radio="true"></label>\n        </div>\n        <a class="btn btn-default btn-sm" ng-click="addSecret(service, state.addSecret)"> <i class="fa fa-plus-circle" aria-hidden="true"></i> add secret </a>\n      </div>\n      <table class="table" style="margin-top: 5px;">\n        <thead>\n          <tr>\n            <th></th>\n            <th>File name</th>\n            <th>UID</th>\n            <th>GID</th>\n            <th>Mode</th>\n            <th></th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="secret in service.ServiceSecrets">\n            <td\n              ><a ui-sref="docker.secrets.secret({id: secret.Id})">{{ secret.Name }}</a></td\n            >\n            <td>{{ secret.FileName }}</td>\n            <td>{{ secret.Uid }}</td>\n            <td>{{ secret.Gid }}</td>\n            <td>{{ secret.Mode }}</td>\n            <td authorization="DockerServiceUpdate">\n              <button class="btn btn-xs btn-danger pull-right" type="button" ng-click="removeSecret(service, $index)" ng-disabled="isUpdating">\n                <i class="fa fa-trash" aria-hidden="true"></i> Remove secret\n              </button>\n            </td>\n          </tr>\n          <tr ng-if="service.ServiceSecrets.length === 0">\n            <td colspan="6" class="text-center text-muted">No secrets associated to this service.</td>\n          </tr>\n        </tbody>\n      </table>\n    </rd-widget-body>\n    <rd-widget-footer authorization="DockerServiceUpdate">\n      <div class="btn-toolbar" role="toolbar">\n        <div class="btn-group" role="group">\n          <button type="button" class="btn btn-primary btn-sm" ng-disabled="!hasChanges(service, [\'ServiceSecrets\'])" ng-click="updateService(service)">Apply changes</button>\n          <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu">\n            <li><a ng-click="cancelChanges(service, [\'ServiceSecrets\'])">Reset changes</a></li>\n            <li><a ng-click="cancelChanges(service)">Reset all changes</a></li>\n          </ul>\n        </div>\n      </div>\n    </rd-widget-footer>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/services/edit/includes/servicelabels.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div id="service-labels">\n  <rd-widget>\n    <rd-widget-header icon="fa-tasks" title-text="Service labels">\n      <div class="nopadding" authorization="DockerServiceUpdate">\n        <a class="btn btn-default btn-sm pull-right" ng-click="isUpdating || addLabel(service)" ng-disabled="isUpdating">\n          <i class="fa fa-plus-circle" aria-hidden="true"></i> label\n        </a>\n      </div>\n    </rd-widget-header>\n    <rd-widget-body ng-if="service.ServiceLabels.length === 0">\n      <p>There are no labels for this service.</p>\n    </rd-widget-body>\n    <rd-widget-body classes="no-padding" ng-if="service.ServiceLabels.length > 0">\n      <table class="table">\n        <thead>\n          <tr>\n            <th>\n              Label\n            </th>\n            <th>\n              Value\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="label in service.ServiceLabels">\n            <td>\n              <div class="input-group input-group-sm">\n                <span class="input-group-addon fit-text-size">name</span>\n                <input\n                  type="text"\n                  class="form-control"\n                  ng-model="label.key"\n                  placeholder=" com.example.foo"\n                  ng-change="updateLabel(service, label)"\n                  ng-disabled="isUpdating"\n                  disable-authorization="DockerServiceUpdate"\n                />\n              </div>\n            </td>\n            <td>\n              <div class="input-group input-group-sm">\n                <span class="input-group-addon fit-text-size">value</span>\n                <input\n                  type="text"\n                  class="form-control"\n                  ng-model="label.value"\n                  placeholder=" bar"\n                  ng-change="updateLabel(service, label)"\n                  ng-disabled="isUpdating"\n                  disable-authorization="DockerServiceUpdate"\n                />\n                <span class="input-group-btn" authorization="DockerServiceUpdate">\n                  <button class="btn btn-sm btn-danger" type="button" ng-click="removeLabel(service, $index)" ng-disabled="isUpdating">\n                    <i class="fa fa-trash" aria-hidden="true"></i>\n                  </button>\n                </span>\n              </div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </rd-widget-body>\n    <rd-widget-footer authorization="DockerServiceUpdate">\n      <div class="btn-toolbar" role="toolbar">\n        <div class="btn-group" role="group">\n          <button type="button" class="btn btn-primary btn-sm" ng-disabled="!hasChanges(service, [\'ServiceLabels\'])" ng-click="updateService(service)">Apply changes</button>\n          <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu">\n            <li><a ng-click="cancelChanges(service, [\'ServiceLabels\'])">Reset changes</a></li>\n            <li><a ng-click="cancelChanges(service)">Reset all changes</a></li>\n          </ul>\n        </div>\n      </div>\n    </rd-widget-footer>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/services/edit/includes/tasks.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div ng-if="tasks.length > 0 && nodes" id="service-tasks">\n  <tasks-datatable\n    title-text="Tasks"\n    title-icon="fa-tasks"\n    dataset="tasks"\n    table-key="service-tasks"\n    order-by="Updated"\n    reverse-order="true"\n    nodes="nodes"\n    show-slot-column="service.Mode !== \'global\'"\n    show-logs-button="applicationState.endpoint.apiVersion >= 1.30"\n    agent-proxy="applicationState.endpoint.mode.agentProxy"\n  ></tasks-datatable>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/docker/views/services/edit/includes/updateconfig.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div id="service-update-config">\n  <rd-widget>\n    <rd-widget-header icon="fa-list-alt" title-text="Update configuration"> </rd-widget-header>\n    <rd-widget-body classes="no-padding">\n      <table class="table">\n        <tbody>\n          <tr>\n            <td>Update Parallelism</td>\n            <td>\n              <input\n                class="input-sm"\n                type="number"\n                ng-model="service.UpdateParallelism"\n                ng-change="updateServiceAttribute(service, \'UpdateParallelism\')"\n                disable-authorization="DockerServiceUpdate"\n              />\n            </td>\n            <td>\n              <p class="small text-muted" style="margin-top: 10px;">\n                Maximum number of tasks to be updated simultaneously (0 to update all at once).\n              </p>\n            </td>\n          </tr>\n          <tr>\n            <td>Update Delay</td>\n            <td>\n              <input\n                class="input-sm"\n                type="text"\n                ng-model="service.UpdateDelay"\n                ng-change="updateServiceAttribute(service, \'UpdateDelay\')"\n                ng-pattern="/^([0-9]+)(h|m|s|ms|us|ns)$/i"\n                disable-authorization="DockerServiceUpdate"\n              />\n            </td>\n            <td>\n              <p class="small text-muted" style="margin-top: 10px;">\n                Amount of time between updates expressed by a number followed by unit (ns|us|ms|s|m|h). Example: 1m.\n              </p>\n            </td>\n          </tr>\n          <tr>\n            <td>Update Failure Action</td>\n            <td>\n              <div class="form-group">\n                <label class="radio-inline">\n                  <input\n                    type="radio"\n                    name="failure_action"\n                    ng-model="service.UpdateFailureAction"\n                    value="continue"\n                    ng-change="updateServiceAttribute(service, \'UpdateFailureAction\')"\n                    disable-authorization="DockerServiceUpdate"\n                  />\n                  Continue\n                </label>\n                <label class="radio-inline">\n                  <input\n                    type="radio"\n                    name="failure_action"\n                    ng-model="service.UpdateFailureAction"\n                    value="pause"\n                    ng-change="updateServiceAttribute(service, \'UpdateFailureAction\')"\n                    disable-authorization="DockerServiceUpdate"\n                  />\n                  \n                </label>\n              </div>\n            </td>\n            <td>\n              <p class="small text-muted" style="margin-top: 10px;">\n                Action taken on failure to start after update.\n              </p>\n            </td>\n          </tr>\n          <tr ng-if="applicationState.endpoint.apiVersion >= 1.29">\n            <td>Order</td>\n            <td>\n              <div class="form-group">\n                <label class="radio-inline">\n                  <input\n                    type="radio"\n                    name="updateconfig_order"\n                    ng-model="service.UpdateOrder"\n                    value="start-first"\n                    ng-change="updateServiceAttribute(service, \'UpdateOrder\')"\n                    disable-authorization="DockerServiceUpdate"\n                  />\n                  start-first\n                </label>\n                <label class="radio-inline">\n                  <input\n                    type="radio"\n                    name="updateconfig_order"\n                    ng-model="service.UpdateOrder"\n                    value="stop-first"\n                    ng-change="updateServiceAttribute(service, \'UpdateOrder\')"\n                    disable-authorization="DockerServiceUpdate"\n                  />\n                  stop-first\n                </label>\n              </div>\n            </td>\n            <td>\n              <p class="small text-muted" style="margin-top: 10px;">\n                Operation order on failure.\n              </p>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </rd-widget-body>\n    <rd-widget-footer authorization="DockerServiceUpdate">\n      <div class="btn-toolbar" role="toolbar">\n        <div class="btn-group" role="group">\n          <button\n            type="button"\n            class="btn btn-primary btn-sm"\n            ng-disabled="!hasChanges(service, [\'UpdateFailureAction\', \'UpdateDelay\', \'UpdateParallelism\', \'UpdateOrder\'])"\n            ng-click="updateService(service)"\n            >Apply changes</button\n          >\n          <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu">\n            <li><a ng-click="cancelChanges(service, [\'UpdateFailureAction\', \'UpdateDelay\', \'UpdateParallelism\', \'UpdateOrder\'])">Reset changes</a></li>\n            <li><a ng-click="cancelChanges(service)">Reset all changes</a></li>\n          </ul>\n        </div>\n      </div>\n    </rd-widget-footer>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(12),r=n.n(a);angular.module("portainer.docker").controller("ServiceLogsController",["$scope","$transition$","$interval","ServiceService","Notifications",function(e,t,n,a,i){function s(){var t=e.repeater;angular.isDefined(t)&&(n.cancel(t),t=null)}function o(){var o=e.state.refreshRate;e.repeater=n((function(){a.logs(t.params().id,1,1,e.state.displayTimestamps?1:0,r()(e.state.sinceTimestamp).unix(),e.state.lineCount).then((function(t){e.logs=t})).catch((function(e){s(),i.error("",e,"Unable to retrieve service logs")}))}),1e3*o)}e.state={refreshRate:3,lineCount:100,sinceTimestamp:"",displayTimestamps:!1},e.changeLogCollection=function(e){e?o():s()},e.$on("$destroy",(function(){s()})),a.service(t.params().id).then((function(n){e.service=n,a.logs(t.params().id,1,1,e.state.displayTimestamps?1:0,r()(e.state.sinceTimestamp).unix(),e.state.lineCount).then((function(t){e.logs=t,o()})).catch((function(e){s(),i.error("",e,"Unable to retrieve service logs")}))})).catch((function(e){i.error("",e,"Unable to retrieve service information")}))}])},function(e,t){angular.module("portainer.docker").controller("ServicesController",["$q","$scope","ServiceService","ServiceHelper","Notifications","TaskService","TaskHelper","NodeService","ContainerService",function(e,t,n,a,r,i,s,o,l){function c(){var c=t.applicationState.endpoint.mode.agentProxy;e.all({services:n.services(),tasks:i.tasks(),containers:c?l.containers(1):[],nodes:o.nodes()}).then((function(e){var n=e.services,r=e.tasks;if(c)for(var i=e.containers,o=0;o<r.length;o++){var l=r[o];s.associateContainerToTask(l,i)}for(var d=0;d<n.length;d++){var u=n[d];a.associateTasksToService(u,r)}t.nodes=e.nodes,t.tasks=r,t.services=n})).catch((function(e){t.services=[],r.error("",e,"Unable to retrieve services")}))}t.getServices=c,c()}])},function(e,t){angular.module("portainer.docker").controller("SwarmController",["$q","$scope","SystemService","NodeService","Notifications","StateManager","Authentication",function(e,t,n,a,r,i,s){function o(e){var n=e.SystemStatus;t.swarm[n[1][0]]=n[1][1],t.swarm[n[2][0]]=n[2][1];var a="primary"===n[0][1]?n[3][1]:n[4][1],r=parseInt(a,10);t.swarm[n[3][0]]=r,t.swarm.Status=[],function(e,t){for(var n="primary"===e[0][1]?4:5,a=0;a<t;a++)l(e,n),n+=9}(n,r)}function l(e,n){var a={};a.name=e[n][0],a.ip=e[n][1],a.Id=e[n+1][1],a.status=e[n+2][1],a.containers=e[n+3][1],a.cpu=e[n+4][1].split("/")[1],a.memory=e[n+5][1].split("/")[1],a.labels=e[n+6][1],a.version=e[n+8][1],t.swarm.Status.push(a)}function c(){"DOCKER_SWARM_MODE"===t.applicationState.endpoint.mode.provider&&a.nodes().then((function(e){var n=e;!function(e){var n=0,a=0;angular.forEach(e,(function(e){n+=e.CPUs,a+=e.Memory})),t.totalCPU=n/1e9,t.totalMemory=a}(n),t.nodes=n})).catch((function(e){r.error("",e,"Unable to retrieve cluster details")}))}t.info={},t.docker={},t.swarm={},t.totalCPU=0,t.totalMemory=0,t.getNodes=c,function(){t.isAdmin=s.isAdmin();var a=t.applicationState.endpoint.mode.provider;e.all({version:n.version(),info:n.info()}).then((function(e){t.docker=e.version,t.info=e.info,"DOCKER_SWARM_MODE"===a?c():o(e.info)})).catch((function(e){r.error("",e,"Unable to retrieve cluster details")}))}()}])},function(e,t,n){(function(e){angular.module("portainer.docker").controller("SwarmVisualizerController",["$q","$scope","$document","$interval","NodeService","ServiceService","TaskService","Notifications","LocalStorage",function(t,n,a,r,i,s,o,l,c){function d(){var e=n.repeater;angular.isDefined(e)&&(r.cancel(e),e=null)}function u(){var e=n.state.refreshRate;n.repeater=r((function(){t.all({nodes:i.nodes(),services:s.services(),tasks:o.tasks()}).then((function(e){var t=e.nodes;n.nodes=t;var a=e.services;n.services=a;var r=e.tasks;n.tasks=r,p(t,a,r)})).catch((function(e){d(),l.error("",e,"Unable to retrieve cluster information")}))}),1e3*e)}function p(e,t,a){var r={};!function(e,t){for(var n=0;n<e.length;n++)for(var a=e[n],r=0;r<t.length;r++){var i=t[r];i.ServiceId===a.Id&&(i.ServiceName=a.Name)}}(t,a),function(e,t){for(var n=0;n<e.length;n++){var a=e[n];a.Tasks=[];for(var r=0;r<t.length;r++){var i=t[r];i.NodeId===a.Id&&a.Tasks.push(i)}}}(e,a),r.nodes=e,n.visualizerData=r}n.state={ShowInformationPanel:!0,DisplayOnlyRunningTasks:!1,DisplayNodeLabels:!1,refreshRate:"5"},n.$on("$destroy",(function(){d()})),n.changeShowInformationPanel=function(e){n.state.ShowInformationPanel=e,c.storeSwarmVisualizerSettings("show_info_panel",e)},n.changeDisplayOnlyRunningTasks=function(){var e=n.state.DisplayOnlyRunningTasks;c.storeSwarmVisualizerSettings("display_only_running_tasks",e)},n.changeDisplayNodeLabels=function(){var e=n.state.DisplayNodeLabels;c.storeSwarmVisualizerSettings("display_node_labels",e)},n.changeUpdateRepeater=function(){d(),u(),e("#refreshRateChange").show(),e("#refreshRateChange").fadeOut(1500),c.storeSwarmVisualizerSettings("refresh_rate",n.state.refreshRate)},t.all({nodes:i.nodes(),services:s.services(),tasks:o.tasks()}).then((function(e){var t=e.nodes;n.nodes=t;var a=e.services;n.services=a;var r=e.tasks;n.tasks=r,p(t,a,r),u()})).catch((function(e){l.error("",e,"Unable to initialize cluster visualizer")})),function(){var e=c.getSwarmVisualizerSettings("show_info_panel");null!=e&&(n.state.ShowInformationPanel=e);var t=c.getSwarmVisualizerSettings("display_only_running_tasks");null!=t&&(n.state.DisplayOnlyRunningTasks=t);var a=c.getSwarmVisualizerSettings("display_node_labels");null!=a&&(n.state.DisplayNodeLabels=a);var r=c.getSwarmVisualizerSettings("refresh_rate");null!=r&&(n.state.refreshRate=r)}()}])}).call(this,n(45))},function(e,t){angular.module("portainer.docker").controller("TaskController",["$scope","$transition$","TaskService","ServiceService","Notifications",function(e,t,n,a,r){n.task(t.params().id).then((function(t){var n=t;return e.task=n,a.service(n.ServiceId)})).then((function(t){var n=t;e.service=n})).catch((function(e){r.error("",e,"Unable to retrieve task details")}))}])},function(e,t,n){"use strict";n.r(t);var a=n(12),r=n.n(a);angular.module("portainer.docker").controller("TaskLogsController",["$scope","$transition$","$interval","TaskService","ServiceService","Notifications",function(e,t,n,a,i,s){function o(){var t=e.repeater;angular.isDefined(t)&&(n.cancel(t),t=null)}function l(){var i=e.state.refreshRate;e.repeater=n((function(){a.logs(t.params().id,1,1,e.state.displayTimestamps?1:0,r()(e.state.sinceTimestamp).unix(),e.state.lineCount).then((function(t){e.logs=t})).catch((function(e){o(),s.error("",e,"Unable to retrieve task logs")}))}),1e3*i)}e.state={refreshRate:3,lineCount:100,sinceTimestamp:"",displayTimestamps:!1},e.changeLogCollection=function(e){e?l():o()},e.$on("$destroy",(function(){o()})),a.task(t.params().id).then((function(t){var n=t;return e.task=n,i.service(n.ServiceId)})).then((function(n){var i=n;e.service=i,a.logs(t.params().id,1,1,e.state.displayTimestamps?1:0,r()(e.state.sinceTimestamp).unix(),e.state.lineCount).then((function(t){e.logs=t,l()})).catch((function(e){o(),s.error("",e,"Unable to retrieve task logs")}))})).catch((function(e){s.error("",e,"Unable to retrieve task details")}))}])},function(e,t){angular.module("portainer.docker").controller("BrowseVolumeController",["$scope","$transition$","StateManager",function(e,t,n){e.volumeId=t.params().id,e.nodeName=t.params().nodeName,e.agentApiVersion=n.getAgentApiVersion()}])},function(e,t,n){"use strict";n.r(t);var a=n(41),r=n(393),i=n(392);angular.module("portainer.docker").controller("CreateVolumeController",["$q","$scope","$state","VolumeService","PluginService","ResourceControlService","Authentication","Notifications","FormValidator","HttpRequestHelper",function(e,t,n,s,o,l,c,d,u,p){var m;t.formValues={Driver:"local",DriverOptions:[],AccessControlData:new a.AccessControlFormData,NodeName:null,NFSData:new r.VolumesNFSFormData,CIFSData:new i.VolumesCIFSFormData},t.state={formValidationError:"",actionInProgress:!1},t.availableVolumeDrivers=[],t.addDriverOption=function(){t.formValues.DriverOptions.push({name:"",value:""})},t.removeDriverOption=function(e){t.formValues.DriverOptions.splice(e,1)},t.create=function(){var e=t.formValues.Name,a=t.formValues.Driver,r=t.formValues.DriverOptions,i=t.formValues.StoridgeProfile;"cio:latest"===a&&i&&r.push({name:"profile",value:i.Name}),t.formValues.NFSData.useNFS&&function(e){var n=t.formValues.NFSData;e.push({name:"type",value:n.version.toLowerCase()});var a="addr="+n.serverAddress+","+n.options;e.push({name:"o",value:a});var r=":"===n.mountPoint[0]?n.mountPoint:":"+n.mountPoint;e.push({name:"device",value:r})}(r),t.formValues.CIFSData.useCIFS&&function(e){var n=t.formValues.CIFSData;e.push({name:"type",value:"cifs"});var a=n.share.replace("\\","/");"/"!==a[0]&&(a="/"+a);var r="//"+n.serverAddress+a;e.push({name:"device",value:r});var i=n.versionsNumber[n.versions.indexOf(n.version)],s="username="+n.username+",password="+n.password+",vers="+i;e.push({name:"o",value:s})}(r);var o=s.createVolumeConfiguration(e,a,r),m=t.formValues.AccessControlData,g=c.getUserDetails(),f=c.isAdmin();if(function(e,n){var a;return t.state.formValidationError="",!(a=u.validateAccessControl(e,n))||(t.state.formValidationError=a,!1)}(m,f)){var h=t.formValues.NodeName;p.setPortainerAgentTargetHeader(h),t.state.actionInProgress=!0,s.createVolume(o).then((function(e){var t=g.ID,n=e.ResourceControl;return l.applyResourceControl(t,m,n)})).then((function(){d.success(""),n.go("docker.volumes",{},{reload:!0})})).catch((function(e){d.error("",e,"An error occured during volume creation")})).finally((function(){t.state.actionInProgress=!1}))}},m=t.applicationState.endpoint.apiVersion,o.volumePlugins(m<1.25).then((function(e){t.availableVolumeDrivers=e})).catch((function(e){d.error("",e,"Unable to retrieve volume drivers")}))}])},function(e,t){angular.module("portainer.docker").controller("VolumeController",["$scope","$state","$transition$","$q","ModalService","VolumeService","ContainerService","Notifications","HttpRequestHelper","StoridgeVolumeService","StoridgeSnapshotService",function(e,t,n,a,r,i,s,o,l,c,d){e.storidgeSnapshots=[],e.storidgeVolume={},e.removeSnapshot=function(n){r.confirm({title:"?",message:"Do you want really want to remove this snapshot?",buttons:{confirm:{label:"Remove",className:"btn-danger"}},callback:function(a){if(a){var r=n.length;angular.forEach(n,(function(n){d.remove(n.Id).then((function(){o.success("Snapshot successfully",n.Id);var t=e.storidgeSnapshots.indexOf(n);e.storidgeSnapshots.splice(t,1)})).catch((function(e){o.error("",e," snapshot")})).finally((function(){0===--r&&t.reload()}))}))}}})},e.removeVolume=function(){r.confirmDeletion("?",(function(a){a&&i.remove(e.volume).then((function(){o.success("",n.params().id),t.go("docker.volumes",{})})).catch((function(e){o.error("",e," volume")}))}))},l.setPortainerAgentTargetHeader(n.params().nodeName),i.volume(n.params().id).then((function(t){var r=t;e.volume=r;var i={volume:[r.Id]};return e.isCioDriver=r.Driver.includes("cio"),e.isCioDriver?a.all({containers:s.containers(1,i),storidgeVolume:c.volume(n.params().id)}):s.containers(1,i)})).then((function(t){var n=(e.isCioDriver?t.containers:t).map((function(t){return t.volumeData=function(e,t){return e.Mounts.find((function(e){return e.Name===t}))}(t,e.volume.Id),t}));if(e.containersUsingVolume=n,e.isCioDriver&&(e.storidgeVolume=t.storidgeVolume,e.storidgeVolume.SnapshotEnabled))return d.snapshots(t.storidgeVolume.Vdisk)})).then((function(t){e.storidgeSnapshots=t})).catch((function(e){o.error("",e,"Unable to retrieve volume details")}))}])},function(e,t){angular.module("portainer.docker").controller("VolumesController",["$q","$scope","$state","VolumeService","ServiceService","VolumeHelper","Notifications","HttpRequestHelper","EndpointProvider","Authentication","ModalService",function(e,t,n,a,r,i,s,o,l,c,d){function u(){var n=t.applicationState.endpoint.mode.provider,o=t.applicationState.endpoint.mode.role;e.all({attached:a.volumes({filters:{dangling:["false"]}}),dangling:a.volumes({filters:{dangling:["true"]}}),services:"DOCKER_SWARM_MODE"===n&&"MANAGER"===o?r.services():[]}).then((function(e){var n=e.services;t.offlineMode=l.offlineMode(),t.volumes=e.attached.map((function(e){return e.dangling=!1,e})).concat(e.dangling.map((function(e){return e.dangling=!0,i.isVolumeUsedByAService(e,n)&&(e.dangling=!1),e})))})).catch((function(e){s.error("",e,"Unable to retrieve volumes")}))}t.removeAction=function(e){d.confirmDeletion("Do you want to remove the selected volume(s)?",(function(r){if(r){var i=e.length;angular.forEach(e,(function(e){o.setPortainerAgentTargetHeader(e.NodeName),a.remove(e).then((function(){s.success("",e.Id);var n=t.volumes.indexOf(e);t.volumes.splice(n,1)})).catch((function(e){s.error("",e," volume")})).finally((function(){0===--i&&n.reload()}))}))}}))},t.offlineMode=!1,t.getVolumes=u,u(),t.showBrowseAction=t.applicationState.endpoint.mode.agentProxy&&(c.isAdmin()||t.applicationState.application.enableVolumeBrowserForNonAdminUsers)}])},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(400),s=n(1140);r.a.module("portainer.edge").component("associatedEndpointsDatatable",{templateUrl:s,controller:i.AssociatedEndpointsDatatableController,bindings:{titleText:"@",titleIcon:"@",tableKey:"@",orderBy:"@",reverseOrder:"<",retrievePage:"<",updateKey:"<"}})},function(e,t){var n="app/edge/components/associated-endpoints-datatable/associatedEndpointsDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          auto-focus\n          placeholder="..."\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'GroupName\')">\n                  Group\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'GroupName\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'GroupName\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in $ctrl.state.filteredDataSet | itemsPerPage: $ctrl.state.paginatedItemLimit"\n              total-items="$ctrl.state.totalFilteredDataSet"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>\n                <span>{{ item.Name }}</span>\n              </td>\n\n              <td>{{ item.GroupName }}</td>\n            </tr>\n            <tr ng-if="$ctrl.state.loading">\n              <td colspan="5" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="!$ctrl.state.loading && $ctrl.state.filteredDataSet.length === 0">\n              <td colspan="5" class="text-center text-muted">No endpoint available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="!$ctrl.state.loading">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5" on-page-change="$ctrl.onPageChange(newPageNumber, oldPageNumber)"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(1142);r.a.module("portainer.edge").component("edgeGroupsSelector",{templateUrl:i,bindings:{model:"=",items:"<"}})},function(e,t){var n="app/edge/components/edge-groups-selector/edgeGroupsSelector.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<ui-select multiple ng-model="$ctrl.model" close-on-select="false">\n  <ui-select-match placeholder="">\n    <span>\n      {{ $item.Name }}\n    </span>\n  </ui-select-match>\n  <ui-select-choices repeat="item.Id as item in $ctrl.items | filter: { Name: $select.search }">\n    <span>\n      {{ item.Name }}\n    </span>\n  </ui-select-choices>\n</ui-select>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(401),s=n(1144);r.a.module("portainer.edge").component("edgeJobForm",{templateUrl:s,controller:i.EdgeJobFormController,bindings:{model:"=",groups:"<",tags:"<",addLabelAction:"<",removeLabelAction:"<",formAction:"<",formActionLabel:"@",actionInProgress:"<"}})},function(e,t){var n="app/edge/components/edge-job-form/edgeJobForm.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<form class="form-horizontal" name="edgeJobForm">\n  <div class="col-sm-12 form-section-title">\n    Edge job configuration\n  </div>\n  \x3c!-- name-input --\x3e\n  <div class="form-group">\n    <label for="edgejob_name" class="col-sm-1 control-label text-left"></label>\n    <div class="col-sm-11">\n      <input\n        type="text"\n        class="form-control"\n        ng-model="$ctrl.model.Name"\n        ng-pattern="/^[a-zA-Z0-9][a-zA-Z0-9_.-]+$/"\n        id="edgejob_name"\n        name="edgejob_name"\n        placeholder="backup-app-prod"\n        required\n        auto-focus\n      />\n    </div>\n  </div>\n  <div class="form-group" ng-show="edgeJobForm.edgejob_name.$invalid">\n    <div class="col-sm-12 small text-warning">\n      <div ng-messages="edgeJobForm.edgejob_name.$error">\n        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n        <p ng-message="pattern"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Allowed characters are: [a-zA-Z0-9_.-]</p>\n      </div>\n    </div>\n  </div>\n  \x3c!-- !name-input --\x3e\n  \x3c!-- cron-input --\x3e\n  \x3c!-- edge-job-method-select --\x3e\n  <div class="col-sm-12 form-section-title">\n    Edge job configuration\n  </div>\n  <div class="form-group"></div>\n  <div class="form-group" style="margin-bottom: 0;">\n    <div class="boxselector_wrapper">\n      <div>\n        <input type="radio" id="config_basic" ng-model="$ctrl.formValues.cronMethod" value="basic" />\n        <label for="config_basic">\n          <div class="boxselector_header">\n            <i class="fa fa-calendar-alt" aria-hidden="true" style="margin-right: 2px;"></i>\n            Basic configuration\n          </div>\n          <p>Select date from calendar</p>\n        </label>\n      </div>\n      <div>\n        <input type="radio" id="config_advanced" ng-model="$ctrl.formValues.cronMethod" value="advanced" />\n        <label for="config_advanced">\n          <div class="boxselector_header">\n            <i class="fa fa-edit" aria-hidden="true" style="margin-right: 2px;"></i>\n            \n          </div>\n          <p>Write your own cron rule</p>\n        </label>\n      </div>\n    </div>\n  </div>\n  \x3c!-- !edge-job-method-select --\x3e\n  \x3c!-- basic-edge-job --\x3e\n  <div ng-if="$ctrl.formValues.cronMethod === \'basic\'">\n    <div class="form-group">\n      <label for="recurring" class="col-sm-2 control-label text-left">Recurring Edge job</label>\n      <div class="col-sm-10">\n        <label class="switch" style="margin-left: 20px;"> <input type="checkbox" name="recurring" ng-model="$ctrl.model.Recurring" /><i></i> </label>\n      </div>\n    </div>\n    \x3c!-- not-recurring --\x3e\n    <div ng-if="!$ctrl.model.Recurring">\n      <div class="form-group">\n        <label for="edgejob_cron" class="col-sm-2 control-label text-left">Schedule date</label>\n        <div class="col-sm-10">\n          <input class="form-control" moment-picker ng-model="$ctrl.formValues.datetime" format="YYYY-MM-DD HH:mm" />\n        </div>\n        <div class="col-sm-12 small text-muted" style="margin-top: 10px;">\n          Time should be set according to the chosen endpoints\' timezone.\n        </div>\n        <div ng-show="edgeJobForm.datepicker.$invalid">\n          <div class="col-sm-12 small text-warning">\n            <div ng-messages="edgeJobForm.datepicker.$error">\n              <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    \x3c!-- !not-recurring --\x3e\n    \x3c!-- recurring --\x3e\n    <div ng-if="$ctrl.model.Recurring">\n      <div class="form-group">\n        <label for="edgejob_value" class="col-sm-2 control-label text-left">Edge job time</label>\n        <div class="col-sm-10">\n          <select\n            id="edgejob_value"\n            name="edgejob_value"\n            class="form-control"\n            ng-model="$ctrl.formValues.scheduleValue"\n            ng-options="value.displayed for value in $ctrl.scheduleValues"\n            required\n          ></select>\n        </div>\n        <div ng-show="edgeJobForm.edgejob_value.$invalid">\n          <div class="col-sm-12 small text-warning">\n            <div ng-messages="edgeJobForm.edgejob_value.$error">\n              <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    \x3c!-- !recurring --\x3e\n  </div>\n  \x3c!-- !basic-edge-job --\x3e\n  \x3c!-- advanced-schedule --\x3e\n  <div ng-if="$ctrl.formValues.cronMethod === \'advanced\'">\n    <div class="form-group">\n      <label for="edgejob_cron" class="col-sm-2 control-label text-left">Cron rule</label>\n      <div class="col-sm-10">\n        <input\n          type="text"\n          class="form-control"\n          ng-model="$ctrl.model.CronExpression"\n          id="edgejob_cron"\n          name="edgejob_cron"\n          placeholder="0 2 * * *"\n          required\n          ng-pattern="$ctrl.cronRegex"\n        />\n      </div>\n      <div class="col-sm-12 small text-muted" style="margin-top: 10px;">\n        Time should be set according to the chosen endpoints\' timezone.\n      </div>\n    </div>\n    <div class="form-group" ng-show="edgeJobForm.edgejob_cron.$invalid && edgeJobForm.edgejob_cron.$dirty">\n      <div class="col-sm-12 small text-warning">\n        <div ng-messages="edgeJobForm.edgejob_cron.$error">\n          <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n          <p ng-message="pattern"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> This field format is invalid.</p>\n        </div>\n      </div>\n    </div>\n  </div>\n  \x3c!-- !advanced-schedule --\x3e\n\n  \x3c!-- execution-method --\x3e\n  <div ng-if="!$ctrl.model.Id">\n    <div class="col-sm-12 form-section-title">\n      Job content\n    </div>\n    <div class="form-group"></div>\n    <div class="form-group" style="margin-bottom: 0;">\n      <div class="boxselector_wrapper">\n        <div>\n          <input type="radio" id="method_editor" ng-model="$ctrl.formValues.method" value="editor" />\n          <label for="method_editor">\n            <div class="boxselector_header">\n              <i class="fa fa-edit" aria-hidden="true" style="margin-right: 2px;"></i>\n              \n            </div>\n            <p></p>\n          </label>\n        </div>\n        <div>\n          <input type="radio" id="method_upload" ng-model="$ctrl.formValues.method" value="upload" />\n          <label for="method_upload">\n            <div class="boxselector_header">\n              <i class="fa fa-upload" aria-hidden="true" style="margin-right: 2px;"></i>\n              \n            </div>\n            <p></p>\n          </label>\n        </div>\n      </div>\n    </div>\n  </div>\n  \x3c!-- !execution-method --\x3e\n  \x3c!-- web-editor --\x3e\n  <div ng-show="$ctrl.formValues.method === \'editor\'">\n    <div class="col-sm-12 form-section-title">\n      \n    </div>\n    <div class="form-group">\n      <div class="col-sm-12">\n        <code-editor\n          identifier="execute-edge-job-editor"\n          placeholder="# "\n          on-change="($ctrl.editorUpdate)"\n          value="$ctrl.model.FileContent"\n        ></code-editor>\n      </div>\n    </div>\n  </div>\n  \x3c!-- !web-editor --\x3e\n  \x3c!-- upload --\x3e\n  <div ng-show="$ctrl.formValues.method === \'upload\'">\n    <div class="col-sm-12 form-section-title">\n      \n    </div>\n    <div class="form-group">\n      <span class="col-sm-12 text-muted small">\n        You can upload a script file from your computer.\n      </span>\n    </div>\n    <div class="form-group">\n      <div class="col-sm-12">\n        <button class="btn btn-sm btn-primary" ngf-select ng-model="$ctrl.model.File"></button>\n        <span style="margin-left: 5px;">\n          {{ $ctrl.model.File.name }}\n          <i class="fa fa-times red-icon" ng-if="!$ctrl.model.File" aria-hidden="true"></i>\n        </span>\n      </div>\n    </div>\n  </div>\n  \x3c!-- !upload --\x3e\n  <div class="col-sm-12 form-section-title">\n    Target endpoints\n  </div>\n  \x3c!-- node-selection --\x3e\n  <associated-endpoints-selector\n    endpoint-ids="$ctrl.model.Endpoints"\n    tags="$ctrl.tags"\n    groups="$ctrl.groups"\n    has-backend-pagination="true"\n    on-associate="($ctrl.associateEndpoint)"\n    on-dissociate="($ctrl.dissociateEndpoint)"\n  ></associated-endpoints-selector>\n  \x3c!-- !node-selection --\x3e\n  \x3c!-- actions --\x3e\n  <div class="col-sm-12 form-section-title">\n    \n  </div>\n  <div class="form-group">\n    <div class="col-sm-12">\n      <button\n        type="button"\n        class="btn btn-primary btn-sm"\n        ng-disabled="$ctrl.actionInProgress || !edgeJobForm.$valid\n        || $ctrl.model.Endpoints.length === 0\n        || ($ctrl.formValues.method === \'upload\' && !$ctrl.model.File)\n        || ($ctrl.formValues.method === \'editor\' && !$ctrl.model.FileContent)\n        "\n        ng-click="$ctrl.action()"\n        button-spinner="$ctrl.actionInProgress"\n      >\n        <span ng-hide="$ctrl.actionInProgress">{{ $ctrl.formActionLabel }}</span>\n        <span ng-show="$ctrl.actionInProgress">In progress...</span>\n      </button>\n      <span class="text-danger" ng-if="$ctrl.state.formValidationError" style="margin-left: 5px;">\n        {{ $ctrl.state.formValidationError }}\n      </span>\n    </div>\n  </div>\n  \x3c!-- !actions --\x3e\n</form>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(402),s=(n(1147),n(1146));r.a.module("portainer.edge").component("edgeJobResultsDatatable",{templateUrl:s,controller:i.EdgeJobResultsDatatableController,bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",onDownloadLogsClick:"<",onCollectLogsClick:"<",onClearLogsClick:"<",refreshCallback:"<"}})},function(e,t){var n="app/edge/components/edge-job-results-datatable/edgeJobResultsDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable edge-job-results-datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle">\n          <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i>\n          {{ $ctrl.titleText }}\n        </div>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input type="text" class="searchInput" ng-model="$ctrl.state.textFilter" placeholder="..." auto-focus ng-model-options="{ debounce: 300 }" />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover table-filters nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Endpoint\')">\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Endpoint\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Endpoint\' && $ctrl.state.reverseOrder"></i>\n                  Endpoint\n                </a>\n              </th>\n              <th>\n                \n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter: $ctrl.applyFilters | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n            >\n              <td>\n                {{ item.Endpoint.Name }}\n              </td>\n              <td>\n                <button ng-if="item.LogsStatus === 0 || item.LogsStatus === 1" class="btn btn-sm btn-primary" ng-click="$ctrl.collectLogs(item.EndpointId)">\n                  Retrieve logs\n                </button>\n                <button ng-if="item.LogsStatus === 3" class="btn btn-sm btn-primary" ng-click="$ctrl.onDownloadLogsClick(item.EndpointId)">\n                  \n                </button>\n                <button ng-if="item.LogsStatus === 3" class="btn btn-sm btn-primary" ng-click="$ctrl.onClearLogsClick(item.EndpointId)">\n                  Clear logs\n                </button>\n                <span ng-if="item.LogsStatus === 2">\n                  Logs marked for collection, please wait until the logs are available.\n                </span>\n              </td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="9" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="9" class="text-center text-muted">No result available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(1149);r.a.module("portainer.edge").component("edgeJobsDatatable",{templateUrl:i,controller:"GenericDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",removeAction:"<"}})},function(e,t){var n="app/edge/components/edge-jobs-datatable/edgeJobsDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n      </div>\n      <div class="actionBar">\n        <button type="button" class="btn btn-sm btn-danger" ng-disabled="$ctrl.state.selectedItemCount === 0" ng-click="$ctrl.removeAction($ctrl.state.selectedItems)">\n          <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>\n        </button>\n        <button type="button" class="btn btn-sm btn-primary" ui-sref="edge.jobs.new"> <i class="fa fa-plus space-right" aria-hidden="true"></i>Add Edge job </button>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input type="text" class="searchInput" ng-model="$ctrl.state.textFilter" placeholder="..." auto-focus ng-model-options="{ debounce: 300 }" />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <span class="md-checkbox">\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'CronExpression\')">\n                  Cron expression\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'CronExpression\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'CronExpression\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Created\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Created\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Created\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>\n                <span class="md-checkbox">\n                  <input id="select_{{ $index }}" type="checkbox" ng-model="item.Checked" ng-click="$ctrl.selectItem(item, $event)" />\n                  <label for="select_{{ $index }}"></label>\n                </span>\n                <a ui-sref="edge.jobs.job({id: item.Id})">{{ item.Name }}</a>\n              </td>\n              <td>\n                {{ item.CronExpression }}\n              </td>\n              <td>{{ item.Created | getisodatefromtimestamp }}</td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="3" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="3" class="text-center text-muted">No Edge job available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(403),s=n(1151);r.a.module("portainer.edge").component("edgeStackEndpointsDatatable",{templateUrl:s,controller:i.EdgeStackEndpointsDatatableController,bindings:{titleText:"@",titleIcon:"@",tableKey:"@",orderBy:"@",reverseOrder:"<",retrievePage:"<"}})},function(e,t){var n="app/edge/components/edge-stack-endpoints-datatable/edgeStackEndpointsDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          auto-focus\n          placeholder="..."\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Status\')">\n                  Status\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Status\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Status\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Error\')">\n                  Error\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Error\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Error\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in $ctrl.state.filteredDataSet | itemsPerPage: $ctrl.state.paginatedItemLimit"\n              total-items="$ctrl.state.totalFilteredDataSet"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>{{ item.Name }}</td>\n              <td>{{ $ctrl.statusMap[item.Status.Type] || \'Pending\' }}</td>\n              <td>{{ item.Status.Error ? item.Status.Error : \'-\' }}</td>\n            </tr>\n            <tr ng-if="$ctrl.state.loading">\n              <td colspan="5" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="!$ctrl.state.loading && $ctrl.state.filteredDataSet.length === 0">\n              <td colspan="5" class="text-center text-muted">No endpoint available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="!$ctrl.state.loading">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5" on-page-change="$ctrl.onPageChange(newPageNumber, oldPageNumber)"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(404),s=(n(1154),n(1153));r.a.module("portainer.edge").component("edgeStackStatus",{templateUrl:s,controller:i.EdgeStackStatusController,bindings:{stackStatus:"<"}})},function(e,t){var n="app/edge/components/edge-stack-status/edgeStackStatus.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<span class="status" title=""><i class="acknowledged icon"></i>{{ $ctrl.status.acknowledged || 0 }}</span>\n<span class="status" title=""><i class="ok icon"></i>{{ $ctrl.status.ok || 0 }}</span>\n<span class="status" title=""><i class="error icon"></i>{{ $ctrl.status.error || 0 }}</span>\n')}]),e.exports=n},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(1156);r.a.module("portainer.edge").component("edgeStacksDatatable",{templateUrl:i,controller:"GenericDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",removeAction:"<",refreshCallback:"<"}})},function(e,t){var n="app/edge/components/edge-stacks-datatable/edgeStacksDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle">\n          <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i>\n          \n        </div>\n        <div class="settings">\n          <span class="setting" ng-class="{ \'setting-active\': $ctrl.settings.open }" uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.settings.open">\n            <span uib-dropdown-toggle> <i class="fa fa-cog" aria-hidden="true"></i> Settings </span>\n            <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n              <div class="tableMenu">\n                <div class="menuHeader">\n                  \n                </div>\n                <div class="menuContent">\n                  <div>\n                    <div class="md-checkbox">\n                      <input id="setting_auto_refresh" type="checkbox" ng-model="$ctrl.settings.repeater.autoRefresh" ng-change="$ctrl.onSettingsRepeaterChange()" />\n                      <label for="setting_auto_refresh"></label>\n                    </div>\n                    <div ng-if="$ctrl.settings.repeater.autoRefresh">\n                      <label for="settings_refresh_rate">\n                        \n                      </label>\n                      <select id="settings_refresh_rate" ng-model="$ctrl.settings.repeater.refreshRate" ng-change="$ctrl.onSettingsRepeaterChange()" class="small-select">\n                        <option value="10">10s</option>\n                        <option value="30">30s</option>\n                        <option value="60">1min</option>\n                        <option value="120">2min</option>\n                        <option value="300">5min</option>\n                      </select>\n                      <span>\n                        <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="margin-top: 7px; display: none;"></i>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.settings.open = false;">\n                    Close\n                  </a>\n                </div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div class="actionBar">\n        <button type="button" class="btn btn-sm btn-danger" ng-disabled="$ctrl.state.selectedItemCount === 0" ng-click="$ctrl.removeAction($ctrl.state.selectedItems)">\n          <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>\n        </button>\n        <button type="button" class="btn btn-sm btn-primary" ui-sref="edge.stacks.new"> <i class="fa fa-plus space-right" aria-hidden="true"></i> </button>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <span class="md-checkbox" ng-if="!$ctrl.offlineMode">\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                Status\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'CreationDate\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'CreationDate\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'CreationDate\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>\n                <span class="md-checkbox">\n                  <input id="select_{{ $index }}" type="checkbox" ng-model="item.Checked" ng-click="$ctrl.selectItem(item, $event)" ng-disabled="!$ctrl.allowSelection(item)" />\n                  <label for="select_{{ $index }}"></label>\n                </span>\n                <a ui-sref="edge.stacks.edit({ stackId: item.Id })">\n                  {{ item.Name }}\n                </a>\n              </td>\n              <td><edge-stack-status stack-status="item.Status"></edge-stack-status></td>\n              <td>{{ item.CreationDate | getisodatefromtimestamp }}</td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="4" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="4" class="text-center text-muted">\n                \n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(405),s=n(1158);r.a.module("portainer.edge").component("editEdgeStackForm",{templateUrl:s,controller:i.EditEdgeStackFormController,bindings:{model:"<",actionInProgress:"<",submitAction:"<",edgeGroups:"<"}})},function(e,t){var n="app/edge/components/edit-edge-stack-form/editEdgeStackForm.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<form class="form-horizontal">\n  <div class="col-sm-12 form-section-title">\n    Edge Groups\n  </div>\n  <div class="form-group">\n    <div class="col-sm-12">\n      <edge-groups-selector model="$ctrl.model.EdgeGroups" items="$ctrl.edgeGroups"></edge-groups-selector>\n    </div>\n  </div>\n\n  \x3c!-- web-editor --\x3e\n  <div class="col-sm-12 form-section-title">\n    \n  </div>\n  <div class="form-group">\n    <span class="col-sm-12 text-muted small">\n      You can get more information about Compose file format in the\n      <a href="https://docs.docker.com/compose/compose-file/" target="_blank">\n        \n      </a>\n      .\n    </span>\n  </div>\n  <div class="form-group">\n    <div class="col-sm-12">\n      <code-editor\n        value="$ctrl.model.StackFileContent"\n        identifier="stack-creation-editor"\n        placeholder="# docker-compose"\n        yml="true"\n        on-change="($ctrl.editorUpdate)"\n      ></code-editor>\n    </div>\n  </div>\n  \x3c!-- !web-editor --\x3e\n\n  <div class="col-sm-12 form-section-title">\n    Options\n  </div>\n  <div class="form-group">\n    <div class="col-sm-12">\n      <label for="EnablePrune" class="control-label text-left">\n        Prune services\n        <portainer-tooltip position="bottom" message="Prune services that are not longer referenced in the stack file."></portainer-tooltip>\n      </label>\n      <label class="switch" style="margin-left: 20px;">\n        <input type="checkbox" name="EnablePrune" ng-model="$ctrl.model.Prune" />\n        <i></i>\n      </label>\n    </div>\n  </div>\n\n  \x3c!-- actions --\x3e\n  <div class="col-sm-12 form-section-title">\n    \n  </div>\n  <div class="form-group">\n    <div class="col-sm-12">\n      <button\n        type="button"\n        class="btn btn-primary btn-sm"\n        ng-disabled="$ctrl.actionInProgress\n                  || !$ctrl.model.EdgeGroups.length\n                  || !$ctrl.model.StackFileContent"\n        ng-click="$ctrl.submitAction()"\n        button-spinner="$ctrl.actionInProgress"\n      >\n        <span ng-hide="$ctrl.actionInProgress">Update the stack</span>\n        <span ng-show="$ctrl.actionInProgress">Update in progress...</span>\n      </button>\n    </div>\n  </div>\n  \x3c!-- !actions --\x3e\n</form>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(406),s=n(1160);r.a.module("portainer.edge").component("edgeGroupForm",{templateUrl:s,controller:i.EdgeGroupFormController,bindings:{model:"<",groups:"<",tags:"<",formActionLabel:"@",formAction:"<",actionInProgress:"<",loaded:"<",pageType:"@"}})},function(e,t){var n="app/edge/components/group-form/groupForm.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<form class="form-horizontal" name="EdgeGroupForm" ng-submit="$ctrl.formAction()">\n  <div class="form-group">\n    <label for="group_name" class="col-sm-3 col-lg-2 control-label text-left">\n      \n    </label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="text" class="form-control" id="group_name" name="group_name" ng-model="$ctrl.model.Name" required auto-focus />\n    </div>\n  </div>\n  <div class="form-group" ng-show="EdgeGroupForm.group_name.$invalid">\n    <div class="col-sm-12 small text-warning">\n      <div ng-messages="EdgeGroupForm.group_name.$error">\n        <p ng-message="required">\n          <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>\n          \n        </p>\n      </div>\n    </div>\n  </div>\n\n  <div class="col-sm-12 form-section-title">\n    Group type\n  </div>\n  <div class="form-group col-sm-12">\n    <div class="boxselector_wrapper">\n      <div class="boxselector">\n        <input type="radio" id="static-group" ng-model="$ctrl.model.Dynamic" ng-value="false" ng-checked="!$ctrl.model.Dynamic" />\n        <label for="static-group">\n          <div class="boxselector_header">\n            <i class="fa fa-list-ol" aria-hidden="true" style="margin-right: 2px;"></i>\n            Static\n          </div>\n          <p>Manually select Edge endpoints</p>\n        </label>\n      </div>\n      <div class="boxselector">\n        <input type="radio" id="dynamic-group" ng-model="$ctrl.model.Dynamic" ng-value="true" ng-checked="$ctrl.model.Dynamic" />\n        <label for="dynamic-group">\n          <div class="boxselector_header">\n            <i class="fa fa-tags" aria-hidden="true" style="margin-right: 2px;"></i>\n            Dynamic\n          </div>\n          <p>Automatically associate endpoints via tags</p>\n        </label>\n      </div>\n    </div>\n  </div>\n\n  \x3c!-- StaticGroup --\x3e\n  <div ng-if="!$ctrl.model.Dynamic">\n    <div ng-if="!$ctrl.noEndpoints">\n      \x3c!-- endpoints --\x3e\n      <div class="col-sm-12 form-section-title">\n        \n      </div>\n      <div class="form-group">\n        <associated-endpoints-selector\n          endpoint-ids="$ctrl.model.Endpoints"\n          tags="$ctrl.tags"\n          groups="$ctrl.groups"\n          has-backend-pagination="true"\n          on-associate="($ctrl.associateEndpoint)"\n          on-dissociate="($ctrl.dissociateEndpoint)"\n        ></associated-endpoints-selector>\n      </div>\n    </div>\n    <div class="form-group" ng-if="$ctrl.noEndpoints">\n      <div class="col-sm-12 small text-muted"> No Edge endpoints are available. Head over to the <a ui-sref="portainer.endpoints">Endpoints view</a> to add endpoints. </div>\n    </div>\n  </div>\n  \x3c!-- !StaticGroup --\x3e\n\n  \x3c!-- DynamicGroup --\x3e\n  <div ng-if="$ctrl.model.Dynamic">\n    <div class="col-sm-12 form-section-title">\n      \n    </div>\n    <div ng-if="$ctrl.tags.length" class="form-group col-sm-12">\n      <div class="boxselector_wrapper">\n        <div class="boxselector">\n          <input type="radio" id="or-selector" ng-model="$ctrl.model.PartialMatch" ng-value="true" ng-checked="$ctrl.model.PartialMatch" />\n          <label for="or-selector">\n            <div class="boxselector_header">\n              <i class="fa fa-tag" aria-hidden="true" style="margin-right: 2px;"></i>\n              Partial match\n            </div>\n            <p>Associate any endpoint matching at least one of the selected tags</p>\n          </label>\n        </div>\n        <div class="boxselector">\n          <input type="radio" id="and-selector" ng-model="$ctrl.model.PartialMatch" ng-value="false" ng-checked="!$ctrl.model.PartialMatch" />\n          <label for="and-selector">\n            <div class="boxselector_header">\n              <i class="fa fa-tag" aria-hidden="true" style="margin-right: 2px;"></i>\n              Full match\n            </div>\n            <p>Associate any endpoint matching all of the selected tags</p>\n          </label>\n        </div>\n      </div>\n    </div>\n    <div class="form-group">\n      <tag-selector ng-if="$ctrl.tags.length" tags="$ctrl.tags" model="$ctrl.model.TagIds"></tag-selector>\n      <div ng-if="$ctrl.tags && !$ctrl.tags.length" class="col-sm-12 small text-muted">\n          <a ui-sref="portainer.tags"></a> \n      </div>\n    </div>\n    <div class="col-sm-12 form-section-title">\n      \n    </div>\n    <div class="col-sm-12 form-group">\n      <group-association-table\n        loaded="$ctrl.loaded"\n        page-type="$ctrl.pageType"\n        table-type="associated"\n        retrieve-page="$ctrl.getDynamicEndpoints"\n        dataset="$ctrl.endpoints.value"\n        pagination-state="$ctrl.endpoints.state"\n        empty-dataset-message=""\n        tags="$ctrl.tags"\n        show-tags="true"\n        groups="$ctrl.groups"\n        show-groups="true"\n        has-backend-pagination="true"\n      ></group-association-table>\n    </div>\n  </div>\n  \x3c!-- !DynamicGroup --\x3e\n\n  \x3c!-- actions --\x3e\n  <div class="col-sm-12 form-section-title">\n    \n  </div>\n  <div class="form-group">\n    <div class="col-sm-12">\n      <button\n        type="submit"\n        class="btn btn-primary btn-sm"\n        ng-disabled="$ctrl.actionInProgress || !EdgeGroupForm.$valid || (!$ctrl.model.Dynamic && !$ctrl.model.Endpoints.length) || ($ctrl.model.Dynamic && !$ctrl.model.TagIds.length)"\n        button-spinner="$ctrl.actionInProgress"\n      >\n        <span ng-hide="$ctrl.actionInProgress">{{ $ctrl.formActionLabel }}</span>\n        <span ng-show="$ctrl.actionInProgress">In progress...</span>\n      </button>\n    </div>\n  </div>\n</form>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(407),s=n(1162);r.a.module("portainer.edge").component("edgeGroupsDatatable",{templateUrl:s,controller:i.EdgeGroupsDatatableController,bindings:{dataset:"<",titleIcon:"@",tableKey:"@",orderBy:"@",removeAction:"<",updateAction:"<",reverseOrder:"<"}})},function(e,t){var n="app/edge/components/groups-datatable/groupsDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-header icon="{{ $ctrl.titleIcon }}" title-text="Edge Groups"> </rd-widget-header>\n    <rd-widget-body classes="no-padding">\n      <div class="actionBar">\n        <button type="button" class="btn btn-sm btn-danger" ng-disabled="$ctrl.state.selectedItemCount === 0" ng-click="$ctrl.removeAction($ctrl.state.selectedItems)">\n          <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>\n        </button>\n        <button type="button" class="btn btn-sm btn-primary" ui-sref="edge.groups.new"> <i class="fa fa-plus space-right" aria-hidden="true"></i>Add Edge group </button>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <span class="md-checkbox">\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Endpoints.length\')">\n                  Endpoints Count\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Endpoints.length\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Endpoints.length\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Dynamic\')">\n                  Group Type\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Dynamic\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Dynamic\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit)) track by $index"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>\n                <span class="md-checkbox">\n                  <input id="select_{{ $index }}" type="checkbox" ng-model="item.Checked" ng-disabled="item.HasEdgeStack" ng-click="$ctrl.selectItem(item, $event)" />\n                  <label for="select_{{ $index }}"></label>\n                </span>\n                <a ui-sref="edge.groups.edit({groupId: item.Id})">{{ item.Name }}</a>\n                <span ng-if="item.HasEdgeStack" class="label label-info image-tag space-left">in use</span>\n              </td>\n              <td>{{ item.Endpoints.length }}</td>\n              <td>{{ item.Dynamic ? \'Dynamic\' : \'Static\' }}</td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="4" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="4" class="text-center text-muted">\n                No Edge group available.\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1);n.n(a).a.module("portainer.edge").factory("EdgeGroups",["$resource","API_ENDPOINT_EDGE_GROUPS",function(e,t){return e(t+"/:id/:action",{},{create:{method:"POST",ignoreLoadingBar:!0},query:{method:"GET",isArray:!0},get:{method:"GET",params:{id:"@id"}},update:{method:"PUT",params:{id:"@Id"}},remove:{method:"DELETE",params:{id:"@id"}}})}])},function(e,t){function n(e,t){return e(t+"/:id/tasks/:taskId/:action",{},{query:{method:"GET",isArray:!0,params:{id:"@id"}},logFile:{method:"GET",params:{id:"@id",taskId:"@taskId",action:"logs"}},clearLogs:{method:"DELETE",params:{id:"@id",taskId:"@taskId",action:"logs"}},collectLogs:{method:"POST",params:{id:"@id",taskId:"@taskId",action:"logs"}}})}n.$inject=["$resource","API_ENDPOINT_EDGE_JOBS"],angular.module("portainer.edge").factory("EdgeJobResults",n)},function(e,t){function n(e,t){return e(t+"/:id/:action",{},{create:{method:"POST"},query:{method:"GET",isArray:!0},get:{method:"GET",params:{id:"@id"}},update:{method:"PUT",params:{id:"@id"}},remove:{method:"DELETE",params:{id:"@id"}},file:{method:"GET",params:{id:"@id",action:"file"}},tasks:{method:"GET",isArray:!0,params:{id:"@id",action:"tasks"}}})}n.$inject=["$resource","API_ENDPOINT_EDGE_JOBS"],angular.module("portainer.edge").factory("EdgeJobs",n)},function(e,t,n){"use strict";n.r(t);var a=n(1);n.n(a).a.module("portainer.edge").factory("EdgeStacks",["$resource","API_ENDPOINT_EDGE_STACKS",function(e,t){return e(t+"/:id/:action",{},{create:{method:"POST",ignoreLoadingBar:!0},query:{method:"GET",isArray:!0},get:{method:"GET",params:{id:"@id"}},update:{method:"PUT",params:{id:"@id"}},remove:{method:"DELETE",params:{id:"@id"}},file:{method:"GET",params:{id:"@id",action:"file"}}})}])},function(e,t,n){"use strict";n.r(t);var a=n(1);n.n(a).a.module("portainer.edge").factory("EdgeTemplates",["$resource","API_ENDPOINT_EDGE_TEMPLATES",function(e,t){return e(t,{},{query:{method:"GET",isArray:!0}})}])},function(e,t,n){"use strict";n.r(t);var a=n(1);n.n(a).a.module("portainer.edge").factory("EdgeGroupService",["EdgeGroups",function(e){var t={group:function(t){return e.get({id:t}).$promise},groups:function(){return e.query({}).$promise},remove:function(t){return e.remove({id:t}).$promise},create:function(t){return e.create(t).$promise},update:function(t){return e.update(t).$promise}};return t}])},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(241);function s(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){s(i,a,r,o,l,"next",e)}function l(e){s(i,a,r,o,l,"throw",e)}o(void 0)}))}}function l(e,t,n){var a={};function r(){return(r=o(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.get({id:n}).$promise;case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),{msg:"Unable to retrieve edgeJob",err:t.t0};case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}function s(){return(s=o(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.query().$promise;case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),{msg:"Unable to retrieve edgeJobs",err:t.t0};case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}function l(){return(l=o(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.query({id:n}).$promise;case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),{msg:"Unable to retrieve results associated to the edgeJob",err:e.t0};case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return a.edgeJob=function(e){return r.apply(this,arguments)},a.edgeJobs=function(){return s.apply(this,arguments)},a.jobResults=function(e){return l.apply(this,arguments)},a.logFile=function(e,n){return t.logFile({id:e,taskId:n}).$promise},a.collectLogs=function(e,n){return t.collectLogs({id:e,taskId:n}).$promise},a.clearLogs=function(e,n){return t.clearLogs({id:e,taskId:n}).$promise},a.createEdgeJobFromFileContent=function(t){var n=new i.ScheduleCreateRequest(t);return e.create({method:"string"},n).$promise},a.createEdgeJobFromFileUpload=function(e){var t=new i.ScheduleCreateRequest(e);return n.createSchedule(t)},a.updateEdgeJob=function(t){var n=new i.ScheduleUpdateRequest(t);return e.update(n).$promise},a.remove=function(t){return e.remove({id:t}).$promise},a.getScriptFile=function(t){return e.file({id:t}).$promise},a}l.$inject=["EdgeJobs","EdgeJobResults","FileUploadService"],r.a.module("portainer.edge").factory("EdgeJobService",l)},function(e,t,n){"use strict";n.r(t);var a=n(1);function r(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function o(e){r(s,a,i,o,l,"next",e)}function l(e){r(s,a,i,o,l,"throw",e)}o(void 0)}))}}n.n(a).a.module("portainer.edge").factory("EdgeStackService",["EdgeStacks","FileUploadService",function(e,t){var n={stack:function(t){return e.get({id:t}).$promise},stacks:function(){return e.query({}).$promise},remove:function(t){return e.remove({id:t}).$promise}};return n.stackFile=function(){var t=i(regeneratorRuntime.mark((function t(n){var a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.file({id:n}).$promise;case 3:return a=t.sent,r=a.StackFileContent,t.abrupt("return",r);case 8:throw t.prev=8,t.t0=t.catch(0),{msg:"Unable to retrieve stack content",err:t.t0};case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),n.updateStack=function(){var t=i(regeneratorRuntime.mark((function t(n,a){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.update({id:n},a));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),n.createStackFromFileContent=function(){var t=i(regeneratorRuntime.mark((function t(n,a,r){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={Name:n,StackFileContent:a,EdgeGroups:r},t.prev=1,t.next=4,e.create({method:"string"},i).$promise;case 4:return t.abrupt("return",t.sent);case 7:throw t.prev=7,t.t0=t.catch(1),{msg:"Unable to create the stack",err:t.t0};case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n,a){return t.apply(this,arguments)}}(),n.createStackFromFileUpload=function(){var e=i(regeneratorRuntime.mark((function e(n,a,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.createEdgeStack(n,a,r);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),{msg:"Unable to create the stack",err:e.t0};case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,a){return e.apply(this,arguments)}}(),n.createStackFromGitRepository=function(){var t=i(regeneratorRuntime.mark((function t(n,a,r){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={Name:n,RepositoryURL:a.RepositoryURL,RepositoryReferenceName:a.RepositoryReferenceName,ComposeFilePathInRepository:a.ComposeFilePathInRepository,RepositoryAuthentication:a.RepositoryAuthentication,RepositoryUsername:a.RepositoryUsername,RepositoryPassword:a.RepositoryPassword,EdgeGroups:r},t.prev=1,t.next=4,e.create({method:"repository"},i).$promise;case 4:return t.abrupt("return",t.sent);case 7:throw t.prev=7,t.t0=t.catch(1),{msg:"Unable to create the stack",err:t.t0};case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n,a){return t.apply(this,arguments)}}(),n.update=function(t){return e.update(t).$promise},n}])},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a);function i(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.EdgeTemplates=t}var t,n,a,r,o;return e.$inject=["EdgeTemplates"],t=e,(n=[{key:"edgeTemplates",value:function(){return this.EdgeTemplates.query().$promise}},{key:"edgeTemplate",value:(r=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.stackFile);case 2:if((n=e.sent).ok){e.next=5;break}throw new Error(n.statusText);case 5:return e.abrupt("return",n.text());case 6:case"end":return e.stop()}}),e)})),o=function(){var e=this,t=arguments;return new Promise((function(n,a){var s=r.apply(e,t);function o(e){i(s,n,a,o,l,"next",e)}function l(e){i(s,n,a,o,l,"throw",e)}o(void 0)}))},function(e){return o.apply(this,arguments)})}])&&s(t.prototype,n),a&&s(t,a),e}();r.a.module("portainer.edge").service("EdgeTemplateService",o)},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(408),s=n(1173);r.a.module("portainer.edge").component("createEdgeGroupView",{templateUrl:s,controller:i.CreateEdgeGroupController})},function(e,t){var n="app/edge/views/edge-groups/createEdgeGroupView/createEdgeGroupView.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Create edge group"></rd-header-title>\n  <rd-header-content> <a ui-sref="edge.groups">Edge groups</a> &gt; Add edge group </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-body>\n        <edge-group-form\n          loaded="$ctrl.state.loaded"\n          page-type="create"\n          form-action-label="Add edge group"\n          form-action="$ctrl.createGroup"\n          groups="$ctrl.endpointGroups"\n          tags="$ctrl.tags"\n          model="$ctrl.model"\n          on-change-tags="($ctrl.onChangeTags)"\n        ></edge-group-form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(409),s=n(1175);r.a.module("portainer.edge").component("edgeGroupsView",{templateUrl:s,controller:i.EdgeGroupsController})},function(e,t){var n="app/edge/views/edge-groups/edgeGroupsView/edgeGroupsView.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Edge Groups">\n    <a data-toggle="tooltip" title="" ui-sref="edge.groups" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content>Edge Groups</rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <edge-groups-datatable title-icon="fa-object-group" table-key="EdgeGroups" order-by="Name" dataset="$ctrl.items" remove-action="$ctrl.removeAction"></edge-groups-datatable>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(410),s=n(1177);r.a.module("portainer.edge").component("editEdgeGroupView",{templateUrl:s,controller:i.EditEdgeGroupController})},function(e,t){var n="app/edge/views/edge-groups/editEdgeGroupView/editEdgeGroupView.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Edit edge group"></rd-header-title>\n  <rd-header-content> <a ui-sref="edge.groups">Edge Groups</a> &gt; {{ $ctrl.model.Name }} </rd-header-content>\n</rd-header>\n\n<div class="row" ng-if="$ctrl.model">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-body>\n        <edge-group-form\n          loaded="$ctrl.state.loaded"\n          page-type="edit"\n          form-action-label="Save edge group"\n          form-action="$ctrl.updateGroup"\n          endpoints="$ctrl.endpoints"\n          groups="$ctrl.endpointGroups"\n          tags="$ctrl.tags"\n          model="$ctrl.model"\n        ></edge-group-form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(411),s=n(1179);r.a.module("portainer.edge").component("createEdgeJobView",{templateUrl:s,controller:i.CreateEdgeJobViewController})},function(e,t){var n="app/edge/views/edge-jobs/createEdgeJobView/createEdgeJobView.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Create Edge job"></rd-header-title>\n  <rd-header-content> <a ui-sref="edge.jobs">Edge Jobs</a> &gt; Create Edge job </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-body>\n        <edge-job-form\n          model="$ctrl.model"\n          groups="$ctrl.groups"\n          tags="$ctrl.tags"\n          form-action="$ctrl.create"\n          form-action-label="Create edge job"\n          action-in-progress="$ctrl.state.actionInProgress"\n        ></edge-job-form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(412),s=n(1181);r.a.module("portainer.edge").component("edgeJobView",{templateUrl:s,controller:i.EdgeJobController})},function(e,t){var n="app/edge/views/edge-jobs/edgeJob/edgeJob.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Edge job details">\n    <a data-toggle="tooltip" title-text="Refresh" ui-sref="edge.jobs.job({id: $ctrl.edgeJob.Id, tab: $ctrl.state.activeTab})" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content> <a ui-sref="edge.jobs">Edge jobs</a> &gt; {{ ::$ctrl.edgeJob.Name }} </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-body>\n        <uib-tabset active="$ctrl.state.activeTab">\n          <uib-tab index="0" select="$ctrl.showEditor()">\n            <uib-tab-heading> <i class="fa fa-wrench" aria-hidden="true"></i> Configuration </uib-tab-heading>\n\n            <edge-job-form\n              ng-if="$ctrl.edgeJob && $ctrl.state.showEditorTab"\n              model="$ctrl.edgeJob"\n              endpoints="endpoints"\n              groups="$ctrl.groups"\n              tags="$ctrl.tags"\n              form-action="$ctrl.update"\n              form-action-label="Update Edge job"\n              action-in-progress="$ctrl.state.actionInProgress"\n            ></edge-job-form>\n          </uib-tab>\n\n          <uib-tab index="1">\n            <uib-tab-heading> <i class="fa fa-tasks" aria-hidden="true"></i> Results </uib-tab-heading>\n\n            <edge-job-results-datatable\n              style="display: block; margin-top: 10px;"\n              ng-if="$ctrl.results"\n              title-text="Results"\n              title-icon="fa-tasks"\n              dataset="$ctrl.results"\n              table-key="edge-job-results"\n              order-by="Status"\n              reverse-order="true"\n              refresh-callback="$ctrl.refresh"\n              on-download-logs-click="($ctrl.downloadLogs)"\n              on-collect-logs-click="($ctrl.collectLogs)"\n              on-clear-logs-click="($ctrl.clearLogs)"\n            ></edge-job-results-datatable>\n          </uib-tab>\n        </uib-tabset>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(413),s=n(1183);r.a.module("portainer.edge").component("edgeJobsView",{templateUrl:s,controller:i.EdgeJobsViewController})},function(e,t){var n="app/edge/views/edge-jobs/edgeJobsView/edgeJobsView.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Edge Jobs">\n    <a data-toggle="tooltip" title="" ui-sref="edge.jobs" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content>Edge Jobs</rd-header-content>\n</rd-header>\n\n<beta-panel></beta-panel>\n\n<div class="row">\n  <div class="col-sm-12">\n    <edge-jobs-datatable\n      title-text="Edge jobs"\n      title-icon="fa-clock"\n      dataset="$ctrl.edgeJobs"\n      table-key="edgeJobs"\n      order-by="Name"\n      remove-action="$ctrl.removeAction"\n    ></edge-jobs-datatable>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(414),s=n(1185);r.a.module("portainer.edge").component("createEdgeStackView",{templateUrl:s,controller:i.CreateEdgeStackViewController})},function(e,t){var n="app/edge/views/edge-stacks/createEdgeStackView/createEdgeStackView.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Create Edge stack"></rd-header-title>\n  <rd-header-content> <a ui-sref="edge.stacks"></a> &gt; Create Edge stack </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-body>\n        <form class="form-horizontal">\n          \x3c!-- name-input --\x3e\n          <div class="form-group">\n            <label for="stack_name" class="col-sm-1 control-label text-left">\n              \n            </label>\n            <div class="col-sm-11">\n              <input type="text" class="form-control" ng-model="$ctrl.formValues.Name" id="stack_name" placeholder=" mystack" auto-focus />\n            </div>\n          </div>\n          \x3c!-- !name-input --\x3e\n          <div class="form-group">\n            <span class="col-sm-12 text-muted small">\n              \n              <code>docker stack deploy</code> \n            </span>\n          </div>\n          <div class="col-sm-12 form-section-title">\n            Edge Groups\n          </div>\n          <div class="form-group" ng-if="$ctrl.edgeGroups">\n            <div class="col-sm-12">\n              <edge-groups-selector ng-if="!$ctrl.noGroups" model="$ctrl.formValues.Groups" on-change="(onChangeGroups)" items="$ctrl.edgeGroups"></edge-groups-selector>\n            </div>\n            <div ng-if="$ctrl.noGroups" class="col-sm-12 small text-muted">\n              No Edge groups are available. Head over to the <a ui-sref="edge.groups">Edge groups view</a> to create one.\n            </div>\n          </div>\n          \x3c!-- build-method --\x3e\n          <div class="col-sm-12 form-section-title">\n            Build method\n          </div>\n          <div class="form-group"></div>\n          <div class="form-group" style="margin-bottom: 0;">\n            <div class="boxselector_wrapper">\n              <div>\n                <input type="radio" id="method_editor" ng-model="$ctrl.state.Method" value="editor" ng-change="$ctrl.onChangeMethod()" />\n                <label for="method_editor">\n                  <div class="boxselector_header">\n                    <i class="fa fa-edit" aria-hidden="true" style="margin-right: 2px;"></i>\n                    \n                  </div>\n                  <p></p>\n                </label>\n              </div>\n              <div>\n                <input type="radio" id="method_upload" ng-model="$ctrl.state.Method" value="upload" ng-change="$ctrl.onChangeMethod()" />\n                <label for="method_upload">\n                  <div class="boxselector_header">\n                    <i class="fa fa-upload" aria-hidden="true" style="margin-right: 2px;"></i>\n                    \n                  </div>\n                  <p></p>\n                </label>\n              </div>\n              <div>\n                <input type="radio" id="method_repository" ng-model="$ctrl.state.Method" value="repository" ng-change="$ctrl.onChangeMethod()" />\n                <label for="method_repository">\n                  <div class="boxselector_header">\n                    <i class="fab fa-git" aria-hidden="true" style="margin-right: 2px;"></i>\n                    Repository\n                  </div>\n                  <p> git </p>\n                </label>\n              </div>\n              <div>\n                <input type="radio" id="method_template" ng-model="$ctrl.state.Method" value="template" ng-change="$ctrl.onChangeMethod()" />\n                <label for="method_template">\n                  <div class="boxselector_header">\n                    <i class="fas fa-rocket" aria-hidden="true" style="margin-right: 2px;"></i>\n                    Template\n                  </div>\n                  <p>Use an Edge stack template</p>\n                </label>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !build-method --\x3e\n          \x3c!-- web-editor --\x3e\n          <div ng-show="$ctrl.state.Method === \'editor\'">\n            <div class="col-sm-12 form-section-title">\n              \n            </div>\n            <div class="form-group">\n              <span class="col-sm-12 text-muted small">\n                You can get more information about Compose file format in the\n                <a href="https://docs.docker.com/compose/compose-file/" target="_blank">\n                  \n                </a>\n                .\n              </span>\n            </div>\n            <div class="form-group">\n              <div class="col-sm-12">\n                <code-editor\n                  identifier="stack-creation-editor"\n                  placeholder="# docker-compose"\n                  yml="true"\n                  value="$ctrl.formValues.StackFileContent"\n                  on-change="($ctrl.editorUpdate)"\n                ></code-editor>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !web-editor --\x3e\n          \x3c!-- upload --\x3e\n          <div ng-show="$ctrl.state.Method === \'upload\'">\n            <div class="col-sm-12 form-section-title">\n              \n            </div>\n            <div class="form-group">\n              <span class="col-sm-12 text-muted small">\n                You can upload a Compose file from your computer.\n              </span>\n            </div>\n            <div class="form-group">\n              <div class="col-sm-12">\n                <button class="btn btn-sm btn-primary" ngf-select ng-model="$ctrl.formValues.StackFile">\n                  \n                </button>\n                <span style="margin-left: 5px;">\n                  {{ $ctrl.formValues.StackFile.name }}\n                  <i class="fa fa-times red-icon" ng-if="!$ctrl.formValues.StackFile" aria-hidden="true"></i>\n                </span>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !upload --\x3e\n          \x3c!-- repository --\x3e\n          <div ng-show="$ctrl.state.Method === \'repository\'">\n            <div class="col-sm-12 form-section-title">\n              Git repository\n            </div>\n            <div class="form-group">\n              <span class="col-sm-12 text-muted small">\n                You can use the URL of a git repository.\n              </span>\n            </div>\n            <div class="form-group">\n              <label for="stack_repository_url" class="col-sm-2 control-label text-left">Repository URL</label>\n              <div class="col-sm-10">\n                <input\n                  type="text"\n                  class="form-control"\n                  ng-model="$ctrl.formValues.RepositoryURL"\n                  id="stack_repository_url"\n                  placeholder="https://github.com/portainer/portainer-compose"\n                />\n              </div>\n            </div>\n            <div class="form-group">\n              <span class="col-sm-12 text-muted small">\n                \n                <code>refs/heads/branch_name</code>  <code>refs/tags/tag_name</code>  <code>HEAD</code> \n                <code>master</code> \n              </span>\n            </div>\n            <div class="form-group">\n              <label for="stack_repository_url" class="col-sm-2 control-label text-left">Repository reference</label>\n              <div class="col-sm-10">\n                <input type="text" class="form-control" ng-model="$ctrl.formValues.RepositoryReferenceName" id="stack_repository_reference_name" placeholder="refs/heads/master" />\n              </div>\n            </div>\n            <div class="form-group">\n              <span class="col-sm-12 text-muted small">\n                Indicate the path to the Compose file from the root of your repository.\n              </span>\n            </div>\n            <div class="form-group">\n              <label for="stack_repository_path" class="col-sm-2 control-label text-left">Compose path</label>\n              <div class="col-sm-10">\n                <input type="text" class="form-control" ng-model="$ctrl.formValues.ComposeFilePathInRepository" id="stack_repository_path" placeholder="docker-compose.yml" />\n              </div>\n            </div>\n            <div class="form-group">\n              <div class="col-sm-12">\n                <label class="control-label text-left">\n                  Authentication\n                </label>\n                <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="$ctrl.formValues.RepositoryAuthentication" /><i></i> </label>\n              </div>\n            </div>\n            <div class="form-group" ng-if="$ctrl.formValues.RepositoryAuthentication">\n              <span class="col-sm-12 text-muted small">\n                If your git account has 2FA enabled, you may receive an\n                <code>authentication required</code> error when deploying your stack. In this case, you will need to provide a personal-access token instead of your password.\n              </span>\n            </div>\n            <div class="form-group" ng-if="$ctrl.formValues.RepositoryAuthentication">\n              <label for="repository_username" class="col-sm-1 control-label text-left"></label>\n              <div class="col-sm-11 col-md-5">\n                <input type="text" class="form-control" ng-model="$ctrl.formValues.RepositoryUsername" name="repository_username" placeholder="myGitUser" />\n              </div>\n              <label for="repository_password" class="col-sm-1 control-label text-left">\n                Password\n              </label>\n              <div class="col-sm-11 col-md-5">\n                <input type="password" class="form-control" ng-model="$ctrl.formValues.RepositoryPassword" name="repository_password" placeholder="myPassword" />\n              </div>\n            </div>\n          </div>\n          \x3c!-- !repository --\x3e\n          \x3c!-- template --\x3e\n          <div ng-show="$ctrl.state.Method === \'template\'">\n            <div class="form-group">\n              <label for="stack_template" class="col-sm-1 control-label text-left">\n                Template\n              </label>\n              <div class="col-sm-11">\n                <select\n                  class="form-control"\n                  ng-model="$ctrl.selectedTemplate"\n                  ng-options="template as template.label for template in $ctrl.templates"\n                  ng-change="$ctrl.onChangeTemplate($ctrl.selectedTemplate)"\n                >\n                  <option value="" label="Select an Edge stack template" disabled selected="selected"> </option>\n                </select>\n              </div>\n            </div>\n            \x3c!-- description --\x3e\n            <div ng-if="$ctrl.selectedTemplate.note">\n              <div class="col-sm-12 form-section-title">\n                Information\n              </div>\n              <div class="form-group">\n                <div class="col-sm-12">\n                  <div class="template-note" ng-bind-html="$ctrl.selectedTemplate.note"></div>\n                </div>\n              </div>\n            </div>\n            \x3c!-- !description --\x3e\n            \x3c!-- editor --\x3e\n            <div ng-if="$ctrl.selectedTemplate && $ctrl.formValues.StackFileContent">\n              <div class="col-sm-12 form-section-title">\n                \n              </div>\n              <div class="form-group">\n                <div class="col-sm-12">\n                  <code-editor\n                    identifier="template-content-editor"\n                    placeholder="# docker-compose"\n                    yml="true"\n                    value="$ctrl.formValues.StackFileContent"\n                    on-change="($ctrl.editorUpdate)"\n                  ></code-editor>\n                </div>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !editor --\x3e\n          \x3c!-- !template --\x3e\n          \x3c!-- actions --\x3e\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button\n                type="button"\n                class="btn btn-primary btn-sm"\n                ng-disabled="$ctrl.state.actionInProgress || !$ctrl.formValues.Groups.length\n              || ($ctrl.state.Method === \'editor\' && !$ctrl.formValues.StackFileContent)\n              || ($ctrl.state.Method === \'upload\' && !$ctrl.formValues.StackFile)\n              || ($ctrl.state.Method === \'repository\' && ((!$ctrl.formValues.RepositoryURL || !$ctrl.formValues.ComposeFilePathInRepository) || ($ctrl.formValues.RepositoryAuthentication && (!$ctrl.formValues.RepositoryUsername || !$ctrl.formValues.RepositoryPassword))))\n              || !$ctrl.formValues.Name"\n                ng-click="$ctrl.createStack()"\n                button-spinner="$ctrl.state.actionInProgress"\n              >\n                <span ng-hide="$ctrl.state.actionInProgress"></span>\n                <span ng-show="$ctrl.state.actionInProgress">...</span>\n              </button>\n              <span class="text-danger" ng-if="$ctrl.state.formValidationError" style="margin-left: 5px;">\n                {{ $ctrl.state.formValidationError }}\n              </span>\n            </div>\n          </div>\n          \x3c!-- !actions --\x3e\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(415),s=n(1187);r.a.module("portainer.edge").component("edgeStacksView",{templateUrl:s,controller:i.EdgeStacksViewController})},function(e,t){var n="app/edge/views/edge-stacks/edgeStacksView/edgeStacksView.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="">\n    <a data-toggle="tooltip" title="" ui-sref="edge.stacks" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content></rd-header-content>\n</rd-header>\n<div class="row">\n  <div class="col-sm-12">\n    <edge-stacks-datatable\n      title-text=""\n      title-icon="fa-th-list"\n      dataset="$ctrl.stacks"\n      table-key="edgeStacks"\n      order-by="Name"\n      remove-action="$ctrl.removeAction"\n      refresh-callback="$ctrl.getStacks"\n    ></edge-stacks-datatable>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(416),s=n(1189);r.a.module("portainer.edge").component("editEdgeStackView",{templateUrl:s,controller:i.EditEdgeStackViewController})},function(e,t){var n="app/edge/views/edge-stacks/editEdgeStackView/editEdgeStackView.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Edit Edge stack">\n    <a data-toggle="tooltip" title="" ui-sref="edge.stacks.edit({stackId:$ctrl.stack.Id, tab: $ctrl.state.activeTab})" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content> <a ui-sref="edge.stacks"></a> &gt; {{ $ctrl.stack.Name }} </rd-header-content>\n</rd-header>\n\n<div class="row" ng-if="$ctrl.stack">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-body classes="no-padding">\n        <uib-tabset active="$ctrl.state.activeTab" justified="true" type="pills">\n          <uib-tab index="0" classes="btn-sm">\n            <uib-tab-heading> <i class="fa fa-layer-group space-right" aria-hidden="true"></i> Stack</uib-tab-heading>\n\n            <div style="padding: 20px;">\n              <edit-edge-stack-form\n                edge-groups="$ctrl.edgeGroups"\n                model="$ctrl.formValues"\n                action-in-progress="$ctrl.state.actionInProgress"\n                submit-action="$ctrl.deployStack"\n              ></edit-edge-stack-form>\n            </div>\n          </uib-tab>\n          <uib-tab index="1" classes="btn-sm">\n            <uib-tab-heading> <i class="fa fa-plug space-right" aria-hidden="true"></i> Endpoints</uib-tab-heading>\n\n            <div style="margin-top: 25px;">\n              <edge-stack-endpoints-datatable\n                title-text=""\n                dataset="$ctrl.endpoints"\n                title-icon="fa-plug"\n                table-key="edgeStackEndpoints"\n                order-by="Name"\n                retrieve-page="$ctrl.getPaginatedEndpoints"\n              >\n              </edge-stack-endpoints-datatable>\n            </div>\n          </uib-tab>\n        </uib-tabset>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.integrations",["portainer.integrations.storidge"])},function(e,t,n){var a=n(1192),r=n(1193),i=n(1194),s=n(1195),o=n(1196),l=n(1197),c=n(1198),d=n(1199),u=n(1200);angular.module("portainer.integrations.storidge",[]).config(["$stateRegistryProvider",function(e){"use strict";var t={name:"storidge.profiles",url:"/profiles",views:{"content@":{templateUrl:a,controller:"StoridgeProfilesController"}}},n={name:"storidge.profiles.profile",url:"/:id",views:{"content@":{templateUrl:r,controller:"StoridgeProfileController"}}},p={name:"storidge.drives",url:"/drives",views:{"content@":{templateUrl:i,controller:"StoridgeDrivesController"}}},m={name:"storidge.drives.drive",url:"/:id",views:{"content@":{templateUrl:s,controller:"StoridgeDriveController"}}},g={name:"docker.volumes.volume.snapshot",url:"/:snapshotId",views:{"content@":{templateUrl:o,controller:"StoridgeSnapshotController"}}},f={name:"storidge.profiles.new",url:"/new",params:{profileName:""},views:{"content@":{templateUrl:l,controller:"StoridgeCreateProfileController"}}},h={name:"storidge.cluster",url:"/cluster",views:{"content@":{templateUrl:c,controller:"StoridgeClusterController"}}},v={name:"storidge.cluster.node",url:"/:name",views:{"content@":{templateUrl:d,controller:"StoridgeNodeController"}}},b={name:"storidge.monitor",url:"/events",views:{"content@":{templateUrl:u,controller:"StoridgeMonitorController"}}};e.register({name:"storidge",parent:"root",abstract:!0,url:"/storidge"}),e.register(p),e.register(m),e.register(g),e.register(t),e.register(n),e.register(f),e.register(h),e.register(v),e.register(b)}])},function(e,t){var n="app/integrations/storidge/views/profiles/profiles.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Storidge profiles">\n    <a data-toggle="tooltip" title="" ui-sref="storidge.profiles" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content> <a ui-sref="storidge.cluster">Storidge</a> &gt; <a ui-sref="storidge.profiles">Profiles</a> </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-md-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-plus" title-text="Add a profile"> </rd-widget-header>\n      <rd-widget-body>\n        <form class="form-horizontal">\n          \x3c!-- name-input --\x3e\n          <div class="form-group">\n            <label for="profile_name" class="col-sm-1 control-label text-left"></label>\n            <div class="col-sm-11">\n              <input type="text" class="form-control" ng-model="formValues.Name" id="profile_name" placeholder=" myProfile" />\n            </div>\n          </div>\n          \x3c!-- !name-input --\x3e\n          \x3c!-- tag-note --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <span class="small text-muted"></span>\n            </div>\n          </div>\n          \x3c!-- !tag-note --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button\n                type="button"\n                class="btn btn-primary btn-sm"\n                ng-click="create()"\n                ng-disabled="state.actionInProgress || !formValues.Name"\n                button-spinner="state.actionInProgress"\n              >\n                <span ng-hide="state.actionInProgress">Create the profile</span>\n                <span ng-show="state.actionInProgress">Creating profile...</span>\n              </button>\n              <button type="button" class="btn btn-primary btn-sm" ng-disabled="!formValues.Name" ui-sref="storidge.profiles.new({ profileName: formValues.Name })"\n                >Modify defaults...</button\n              >\n            </div>\n          </div>\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-12">\n    <storidge-profiles-datatable\n      title-text="Profiles"\n      title-icon="fa-sticky-note"\n      dataset="profiles"\n      table-key="storidge_profiles"\n      order-by="Name"\n      remove-action="removeAction"\n    ></storidge-profiles-datatable>\n  </div>\n</div>\n\n\x3c!-- <div class="row">\n  <div class="col-md-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-sticky-note" title-text="Profiles">\n        <div class="pull-right">\n          :\n          <select ng-model="state.pagination_count" ng-change="changePaginationCount()">\n            <option value="0"></option>\n            <option value="10">10</option>\n            <option value="25">25</option>\n            <option value="50">50</option>\n            <option value="100">100</option>\n          </select>\n        </div>\n      </rd-widget-header>\n      <rd-widget-taskbar classes="col-md-12">\n        <div class="pull-left">\n          <button type="button" class="btn btn-danger" ng-click="removeProfiles()" ng-disabled="!state.selectedItemCount"><i class="fa fa-trash-alt space-right" aria-hidden="true"></i></button>\n        </div>\n        <div class="pull-right">\n          <input type="text" id="filter" ng-model="state.filter" placeholder="..." class="form-control input-sm" />\n        </div>\n      </rd-widget-taskbar>\n      <rd-widget-body classes="no-padding">\n        <div class="table-responsive">\n          <table class="table table-hover">\n            <thead>\n              <tr>\n                <th>\n                  <input type="checkbox" ng-model="allSelected" ng-change="selectItems(allSelected)" />\n                </th>\n                <th>\n                  <a ng-click="order(\'Name\')">\n                    \n                    <span ng-show="sortType == \'Name\' && !sortReverse" class="glyphicon glyphicon-chevron-down"></span>\n                    <span ng-show="sortType == \'Name\' && sortReverse" class="glyphicon glyphicon-chevron-up"></span>\n                  </a>\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr dir-paginate="profile in (state.filteredProfiles = (profiles | filter:state.filter | orderBy:sortType:sortReverse | itemsPerPage: state.pagination_count))">\n                <td><input type="checkbox" ng-model="profile.Checked" ng-change="selectItem(profile)" /></td>\n                <td>\n                  <a ui-sref="storidge.profiles.profile({id: profile.Name})">{{ profile.Name }}</a>\n                </td>\n              </tr>\n              <tr ng-if="!profiles">\n                <td colspan="3" class="text-center text-muted">...</td>\n              </tr>\n              <tr ng-if="state.filteredProfiles.length == 0">\n                <td colspan="3" class="text-center text-muted">No profiles available.</td>\n              </tr>\n            </tbody>\n          </table>\n          <div ng-if="profiles" class="pull-left pagination-controls">\n            <dir-pagination-controls></dir-pagination-controls>\n          </div>\n        </div>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div> --\x3e\n')}]),e.exports=n},function(e,t){var n="app/integrations/storidge/views/profiles/edit/profile.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Profile details"></rd-header-title>\n  <rd-header-content> <a ui-sref="storidge.cluster">Storidge</a> &gt; <a ui-sref="storidge.profiles">Profiles</a> &gt; {{ profile.Name }} </rd-header-content>\n</rd-header>\n\n<div class="row" ng-if="profile">\n  <div class="col-md-12">\n    <rd-widget>\n      <rd-widget-body>\n        <form class="form-horizontal" name="storidgeUpdateProfileForm">\n          \x3c!-- name-input --\x3e\n          <div class="form-group">\n            <label for="profile_name" class="col-sm-2 col-lg-1 control-label text-left"></label>\n            <div class="col-sm-10 col-lg-11">\n              <input type="text" class="form-control" ng-model="profile.Name" name="profile_name" disabled />\n            </div>\n          </div>\n          \x3c!-- !name-input --\x3e\n          <div class="col-sm-12 form-section-title">\n            Profile configuration\n          </div>\n          \x3c!-- directory --\x3e\n          <div class="form-group" ng-class="{ \'has-error\': storidgeUpdateProfileForm.profile_directory.$invalid }">\n            <label for="profile_directory" class="col-sm-2 col-lg-1 control-label text-left">Directory</label>\n            <div class="col-sm-10 col-lg-11">\n              <input type="text" class="form-control" ng-model="profile.Directory" name="profile_directory" placeholder=" /cio/myProfile" required />\n            </div>\n          </div>\n          <div class="form-group" ng-show="storidgeUpdateProfileForm.profile_directory.$invalid">\n            <div class="col-sm-12 small text-warning">\n              <div ng-messages="storidgeUpdateProfileForm.profile_directory.$error">\n                <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !directory --\x3e\n          \x3c!-- capacity --\x3e\n          <div class="form-group" ng-class="{ \'has-error\': storidgeUpdateProfileForm.profile_capacity.$invalid }">\n            <label for="profile_capacity" class="col-sm-2 col-lg-1 control-label text-left">Capacity</label>\n            <div class="col-sm-10 col-lg-11">\n              <input type="number" class="form-control" ng-model="profile.Capacity" name="profile_capacity" ng-min="1" ng-max="64000" placeholder="2" required />\n            </div>\n          </div>\n          <div class="form-group" ng-show="storidgeUpdateProfileForm.profile_capacity.$invalid">\n            <div class="col-sm-12 small text-warning">\n              <div ng-messages="storidgeUpdateProfileForm.profile_capacity.$error">\n                <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n                <p ng-message="min"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Minimum value for capacity: 1.</p>\n                <p ng-message="max"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Maximum value for capacity: 64000.</p>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !capacity --\x3e\n          \x3c!-- redundancy --\x3e\n          <div class="form-group">\n            <label for="profile_redundancy" class="col-sm-2 col-lg-1 control-label text-left">Redundancy</label>\n            <div class="col-sm-10 col-lg-11">\n              <select name="profile_redundancy" ng-model="profile.Redundancy" ng-options="+(opt.value) as opt.label for opt in RedundancyOptions" class="form-control"> </select>\n            </div>\n          </div>\n          \x3c!-- !redudancy --\x3e\n          \x3c!-- provisioning --\x3e\n          <div class="form-group">\n            <label for="profile_provisioning" class="col-sm-2 col-lg-1 control-label text-left">Provisioning</label>\n            <div class="col-sm-10 col-lg-11">\n              <select name="profile_provisioning" ng-model="profile.Provisioning" class="form-control">\n                <option value="thin">Thin</option>\n                <option value="thick">Thick</option>\n              </select>\n            </div>\n          </div>\n          \x3c!-- !provisioning --\x3e\n          \x3c!-- type --\x3e\n          <div class="form-group">\n            <label for="profile_type" class="col-sm-2 col-lg-1 control-label text-left"></label>\n            <div class="col-sm-10 col-lg-11">\n              <select name="profile_type" ng-model="profile.Type" class="form-control">\n                <option value="ssd">SSD</option>\n                <option value="hdd">HDD</option>\n              </select>\n            </div>\n          </div>\n          \x3c!-- !type --\x3e\n          \x3c!-- Filesystem --\x3e\n          <div class="form-group">\n            <label for="profile_filesystem" class="col-sm-2 col-lg-1 control-label text-left">Filesystem</label>\n            <div class="col-sm-10 col-lg-11">\n              <select name="profile_filesystem" ng-model="profile.Filesystem" class="form-control">\n                <option value="btrfs">btrfs</option>\n                <option value="ext4">ext4</option>\n                <option value="xfs">xfs</option>\n              </select>\n            </div>\n          </div>\n          \x3c!-- !Filesystem --\x3e\n          \x3c!-- snapshotEnabled --\x3e\n          <div class="form-group">\n            <label for="profile_snapshotEnabled" class="col-sm-2 col-lg-1 control-label text-left">\n              Enable snapshots\n            </label>\n            <label class="switch" style="margin-left: 20px;"> <input name="profile_snapshotEnabled" type="checkbox" ng-model="profile.SnapshotEnabled" /><i></i> </label>\n          </div>\n          \x3c!-- !snapshotEnabled --\x3e\n          \x3c!-- snapshotMax --\x3e\n          <div class="form-group" ng-if="profile.SnapshotEnabled">\n            <label for="profile_snapshotMax" class="col-sm-2 col-lg-1 control-label text-left" style="margin-top: 20px;">\n              Snapshot max\n            </label>\n            <div class="col-sm-4">\n              <slider model="profile.SnapshotMax" floor="1" ceil="100" step="1"></slider>\n            </div>\n            <div class="col-sm-2">\n              <input type="number" min="1" class="form-control" ng-model="profile.SnapshotMax" id="profile_snapshotMax" />\n            </div>\n            <div class="col-sm-4">\n              <p class="small text-muted" style="margin-top: 7px;">\n                Snapshot max (<b>count</b>)\n              </p>\n            </div>\n          </div>\n          \x3c!-- !snapshotMax --\x3e\n          \x3c!-- snapshotEnabled --\x3e\n          <div class="form-group" ng-if="profile.SnapshotEnabled">\n            <label for="profile_recurringSnapshotEnabled" class="col-sm-2 col-lg-1 control-label text-left">\n              Enable periodic snapshots\n            </label>\n            <label class="switch" style="margin-left: 20px;">\n              <input name="profile_recurringSnapshotEnabled" type="checkbox" ng-model="state.RecurringSnapshotEnabled" /><i></i>\n            </label>\n          </div>\n          \x3c!-- !snapshotEnabled --\x3e\n          \x3c!-- snapshotInterval --\x3e\n          <div class="form-group" ng-if="profile.SnapshotEnabled && state.RecurringSnapshotEnabled">\n            <label for="profile_snapshotInterval" class="col-sm-2 col-lg-1 control-label text-left" style="margin-top: 20px;">\n              \n            </label>\n            <div class="col-sm-4">\n              <slider model="profile.SnapshotInterval" floor="1" ceil="2880" step="1"></slider>\n            </div>\n            <div class="col-sm-2">\n              <input type="number" min="1" class="form-control" ng-model="profile.SnapshotInterval" id="profile_snapshotInterval" />\n            </div>\n            <div class="col-sm-4">\n              <p class="small text-muted" style="margin-top: 7px;">\n                 (<b></b>)\n              </p>\n            </div>\n          </div>\n          \x3c!-- !snapshotInterval --\x3e\n          \x3c!-- encryptionEnabled --\x3e\n          <div class="form-group">\n            <label for="profile_encryptionEnabled" class="col-sm-2 col-lg-1 control-label text-left">\n              Enable encryption\n            </label>\n            <label class="switch" style="margin-left: 20px;"> <input name="profile_encryptionEnabled" type="checkbox" ng-model="profile.EncryptionEnabled" /><i></i> </label>\n          </div>\n          \x3c!-- !encryptionEnabled --\x3e\n          \x3c!-- interfaceType --\x3e\n          <div class="form-group">\n            <label for="profile_interfaceType" class="col-sm-2 col-lg-1 control-label text-left">Interface type</label>\n            <div class="col-sm-10 col-lg-11">\n              <select name="profile_interfaceType" ng-model="profile.InterfaceType" class="form-control">\n                <option value=""></option>\n                <option value="nfs">nfs</option>\n              </select>\n            </div>\n          </div>\n          \x3c!-- !interfaceType --\x3e\n          \x3c!-- interfaceDriver --\x3e\n          <div class="form-group">\n            <label for="profile_interfaceDriver" class="col-sm-2 col-lg-1 control-label text-left">Network driver</label>\n            <div class="col-sm-10 col-lg-11">\n              <select name="profile_interfaceDriver" ng-model="profile.InterfaceDriver" class="form-control">\n                <option value=""></option>\n                <option value="macvlan">macvlan</option>\n                <option value="overlay">overlay</option>\n              </select>\n            </div>\n          </div>\n          \x3c!-- !interfaceDriver --\x3e\n          \x3c!-- interfaceNetwork --\x3e\n          <div class="form-group">\n            <label for="profile_interfaceNetwork" class="col-sm-2 col-lg-1 control-label text-left">Network name</label>\n            <div class="col-sm-10 col-lg-11">\n              <input type="text" class="form-control" ng-model="profile.InterfaceNetwork" name="profile_interfaceNetwork" pattern="[a-zA-Z0-9]+" />\n            </div>\n          </div>\n          \x3c!-- !interfaceNetwork --\x3e\n          \x3c!-- interfaceConf --\x3e\n          <div class="form-group">\n            <label for="profile_interfaceConf" class="col-sm-2 col-lg-1 control-label text-left">Interface conf</label>\n            <div class="col-sm-10 col-lg-11">\n              <input type="text" class="form-control" ng-model="profile.InterfaceConf" name="profile_interfaceConf" />\n            </div>\n          </div>\n          \x3c!-- !interfaceConf --\x3e\n          \x3c!-- labels --\x3e\n          <div class="form-group">\n            <div class="col-sm-12" style="margin-top: 5px;">\n              <label class="control-label text-left"></label>\n              <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addLabel()"> <i class="fa fa-plus-circle" aria-hidden="true"></i>  </span>\n            </div>\n            \x3c!-- labels-input-list --\x3e\n            <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n              <div ng-repeat="label in formValues.Labels" style="margin-top: 2px;">\n                <div class="input-group col-sm-5 input-group-sm">\n                  <span class="input-group-addon">name</span>\n                  <input type="text" class="form-control" ng-model="label.name" placeholder=" com.example.foo" />\n                </div>\n                <div class="input-group col-sm-5 input-group-sm">\n                  <span class="input-group-addon">value</span>\n                  <input type="text" class="form-control" ng-model="label.value" placeholder=" bar" />\n                </div>\n                <button class="btn btn-sm btn-danger" type="button" ng-click="removeLabel($index)">\n                  <i class="fa fa-trash" aria-hidden="true"></i>\n                </button>\n              </div>\n            </div>\n            \x3c!-- !labels-input-list --\x3e\n          </div>\n          \x3c!-- !labels --\x3e\n          \x3c!-- iops --\x3e\n          <div ng-if="!state.LimitBandwidth || state.NoLimit">\n            <div class="col-sm-12 form-section-title">\n              IOPS\n            </div>\n            <div class="form-group">\n              <div class="col-sm-12">\n                <label for="permissions" class="control-label text-left">\n                  Limit IOPS\n                </label>\n                <label class="switch" style="margin-left: 20px;">\n                  <input type="checkbox" ng-model="state.LimitIOPS" ng-change="state.NoLimit = (!state.LimitBandwidth && !state.LimitIOPS)" /><i></i>\n                </label>\n              </div>\n            </div>\n            <div class="form-group" ng-if="state.LimitIOPS">\n              <label for="min_iops" class="col-sm-1 control-label text-left">Min</label>\n              <div class="col-sm-5" ng-class="{ \'has-error\': storidgeUpdateProfileForm.min_iops.$invalid }">\n                <input type="number" class="form-control" ng-model="profile.MinIOPS" name="min_iops" ng-min="30" ng-max="999999" placeholder="100" required />\n              </div>\n              <label for="max_iops" class="col-sm-1 control-label text-left">Max</label>\n              <div class="col-sm-5" ng-class="{ \'has-error\': storidgeUpdateProfileForm.max_iops.$invalid }">\n                <input type="number" class="form-control" ng-model="profile.MaxIOPS" name="max_iops" ng-min="30" ng-max="999999" placeholder="2000" required />\n              </div>\n            </div>\n            <div class="form-group" ng-show="storidgeUpdateProfileForm.min_iops.$invalid">\n              <div class="col-sm-12 small text-warning">\n                <div ng-messages="storidgeUpdateProfileForm.min_iops.$error">\n                  <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> A value is required for Min IOPS.</p>\n                  <p ng-message="min"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Minimum value for Min IOPS: 30.</p>\n                  <p ng-message="max"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Maximum value for Min IOPS: 999999.</p>\n                </div>\n              </div>\n            </div>\n            <div class="form-group" ng-show="storidgeUpdateProfileForm.max_iops.$invalid">\n              <div class="col-sm-12 small text-warning">\n                <div ng-messages="storidgeUpdateProfileForm.max_iops.$error">\n                  <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> A value is required for Max IOPS.</p>\n                  <p ng-message="min"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Minimum value for Max IOPS: 30.</p>\n                  <p ng-message="max"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Maximum value for Max IOPS: 999999.</p>\n                </div>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !iops --\x3e\n          \x3c!-- bandwidth --\x3e\n          <div ng-if="!state.LimitIOPS || state.NoLimit">\n            <div class="col-sm-12 form-section-title">\n              Bandwidth\n            </div>\n            <div class="form-group">\n              <div class="col-sm-12">\n                <label for="permissions" class="control-label text-left">\n                  Limit bandwidth\n                </label>\n                <label class="switch" style="margin-left: 20px;">\n                  <input type="checkbox" ng-model="state.LimitBandwidth" ng-change="state.NoLimit = (!state.LimitBandwidth && !state.LimitIOPS)" /><i></i>\n                </label>\n              </div>\n            </div>\n            <div class="form-group" ng-if="state.LimitBandwidth">\n              <label for="min_bandwidth" class="col-sm-1 control-label text-left">Min</label>\n              <div class="col-sm-5" ng-class="{ \'has-error\': storidgeUpdateProfileForm.min_bandwidth.$invalid }">\n                <input type="number" class="form-control" ng-model="profile.MinBandwidth" name="min_bandwidth" ng-min="1" ng-max="5000" placeholder="1" required />\n              </div>\n              <label for="max_bandwidth" class="col-sm-1 control-label text-left">Max</label>\n              <div class="col-sm-5" ng-class="{ \'has-error\': storidgeUpdateProfileForm.max_bandwidth.$invalid }">\n                <input type="number" class="form-control" ng-model="profile.MaxBandwidth" name="max_bandwidth" ng-min="1" ng-max="5000" placeholder="100" required />\n              </div>\n            </div>\n            <div class="form-group" ng-show="storidgeUpdateProfileForm.min_bandwidth.$invalid">\n              <div class="col-sm-12 small text-warning">\n                <div ng-messages="storidgeUpdateProfileForm.min_bandwidth.$error">\n                  <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> A value is required for Min bandwidth.</p>\n                  <p ng-message="min"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Minimum value for Min bandwidth: 1.</p>\n                  <p ng-message="max"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Maximum value for Min bandwidth: 5000.</p>\n                </div>\n              </div>\n            </div>\n            <div class="form-group" ng-show="storidgeUpdateProfileForm.max_bandwidth.$invalid">\n              <div class="col-sm-12 small text-warning">\n                <div ng-messages="storidgeUpdateProfileForm.max_bandwidth.$error">\n                  <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> A value is required for Max bandwidth.</p>\n                  <p ng-message="min"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Minimum value for Max bandwidth: 1.</p>\n                  <p ng-message="max"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Maximum value for Max bandwidth: 5000.</p>\n                </div>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !bandwidth --\x3e\n          \x3c!-- actions --\x3e\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button\n                type="button"\n                class="btn btn-primary btn-sm"\n                ng-click="update()"\n                ng-disabled="state.updateInProgress || !storidgeUpdateProfileForm.$valid"\n                button-spinner="state.updateInProgress"\n              >\n                <span ng-hide="state.updateInProgress">Update the profile</span>\n                <span ng-show="state.updateInProgress">Updating profile...</span>\n              </button>\n              <button type="button" class="btn btn-danger btn-sm" ng-click="delete()" ng-disabled="state.deleteInProgress" button-spinner="state.deleteInProgress">\n                <span ng-hide="state.deleteInProgress">Delete the profile</span>\n                <span ng-show="state.deleteInProgress">Deleting profile...</span>\n              </button>\n            </div>\n          </div>\n          \x3c!-- !actions --\x3e\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/integrations/storidge/views/drives/drives.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Storidge drives">\n    <a data-toggle="tooltip" title="" ui-sref="storidge.drives" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content> <a ui-sref="storidge.cluster">Storidge</a> &gt; <a ui-sref="storidge.drives">Drives</a> </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <storidge-drives-datatable\n      title-text="Drives"\n      title-icon="fa-hdd"\n      dataset="drives"\n      table-key="storidge_drives"\n      order-by="Id"\n      rescan-action="rescanAction"\n      add-action="addAction"\n      action-in-progress="state.actionInProgress"\n      addition-in-progress="state.additionInProgress"\n    ></storidge-drives-datatable>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/integrations/storidge/views/drives/inspect/drive.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Drive details"></rd-header-title>\n  <rd-header-content>\n    <a ui-sref="storidge.cluster">Storidge</a> &gt; <a ui-sref="storidge.drives">Drives</a> &gt; <a ui-sref="storidge.drives.drive({id: drive.Id})">{{ drive.Id }}</a>\n  </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-hdd" title-text="Drive details "></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <tbody>\n            <tr>\n              <td>ID</td>\n              <td>\n                {{ drive.Id }}\n                <button class="btn btn-xs btn-danger" ng-click="removeDrive()" ng-if="drive.Status === \'faulty\'" button-spinner="actionInProgress" ng-disabled="actionInProgress">\n                  <span ng-hide="actionInProgress"><i class="fa fa-trash space-right" aria-hidden="true"></i>Remove from storage pool</span>\n                  <span ng-show="actionInProgress">Removal in progress...</span>\n                </button>\n              </td>\n            </tr>\n            <tr>\n              <td>Node</td>\n              <td>{{ drive.Node }}</td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ drive.Device }}</td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ drive.Size }}</td>\n            </tr>\n            <tr>\n              <td>Use</td>\n              <td>{{ drive.Use }}</td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ drive.Type }}</td>\n            </tr>\n            <tr>\n              <td>Status</td>\n              <td>\n                <span class="label label-{{ drive.Status | drivestatusbadge }}">{{ drive.Status | capitalize }}</span>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/integrations/storidge/views/snapshots/inspect/snapshot.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Snasphot details"></rd-header-title>\n  <rd-header-content>\n    <a ui-sref="docker.volumes"></a> &gt; <a ui-sref="docker.volumes.volume({id: volumeId})">{{ volumeId }}</a> &gt; Snapshots &gt;\n    <a ui-sref="docker.volumes.volume.snapshot({id: snapshot.Id})">{{ snapshot.Id }}</a>\n  </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-hdd" title-text="Snapshot details "></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <tbody>\n            <tr>\n              <td>ID</td>\n              <td>\n                {{ snapshot.Id }}\n                <button class="btn btn-xs btn-danger" ng-click="removeSnapshot()"> <i class="fa fa-trash space-right" aria-hidden="true"></i>Remove snapshot </button>\n              </td>\n            </tr>\n            <tr>\n              <td>Date</td>\n              <td>{{ snapshot.Date }}</td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ snapshot.Description }}</td>\n            </tr>\n            <tr>\n              <td>SourceID</td>\n              <td>{{ snapshot.SourceID }}</td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ snapshot.Type }}</td>\n            </tr>\n            <tr>\n              <td>Directory</td>\n              <td>{{ snapshot.Directory }}</td>\n            </tr>\n            <tr>\n              <td>Source</td>\n              <td>{{ snapshot.Source }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/integrations/storidge/views/profiles/create/createprofile.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Create profile"></rd-header-title>\n  <rd-header-content> <a ui-sref="storidge.cluster">Storidge</a> &gt; <a ui-sref="storidge.profiles">Profiles</a> &gt; Add profile </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-md-12">\n    <rd-widget>\n      <rd-widget-body>\n        <form class="form-horizontal" name="storidgeCreateProfileForm">\n          \x3c!-- name-input --\x3e\n          <div class="form-group" ng-class="{ \'has-error\': storidgeCreateProfileForm.profile_name.$invalid }">\n            <label for="profile_name" class="col-sm-2 col-lg-1 control-label text-left"></label>\n            <div class="col-sm-10 col-lg-11">\n              <input type="text" class="form-control" ng-model="model.Name" name="profile_name" placeholder=" myProfile" ng-change="updatedName()" required />\n            </div>\n          </div>\n          <div class="form-group" ng-show="storidgeCreateProfileForm.profile_name.$invalid">\n            <div class="col-sm-12 small text-warning">\n              <div ng-messages="storidgeCreateProfileForm.profile_name.$error">\n                <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !name-input --\x3e\n          <div class="col-sm-12 form-section-title">\n            Profile configuration\n          </div>\n          \x3c!-- directory --\x3e\n          <div class="form-group" ng-class="{ \'has-error\': storidgeCreateProfileForm.profile_directory.$invalid }">\n            <label for="profile_directory" class="col-sm-2 col-lg-1 control-label text-left">Directory</label>\n            <div class="col-sm-10 col-lg-11">\n              <input\n                type="text"\n                class="form-control"\n                ng-model="model.Directory"\n                name="profile_directory"\n                placeholder=" /cio/myProfile"\n                ng-change="updatedDirectory()"\n                required\n              />\n            </div>\n          </div>\n          <div class="form-group" ng-show="storidgeCreateProfileForm.profile_directory.$invalid">\n            <div class="col-sm-12 small text-warning">\n              <div ng-messages="storidgeCreateProfileForm.profile_directory.$error">\n                <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !directory --\x3e\n          \x3c!-- capacity --\x3e\n          <div class="form-group" ng-class="{ \'has-error\': storidgeCreateProfileForm.profile_capacity.$invalid }">\n            <label for="profile_capacity" class="col-sm-2 col-lg-1 control-label text-left">Capacity</label>\n            <div class="col-sm-10 col-lg-11">\n              <input type="number" class="form-control" ng-model="model.Capacity" name="profile_capacity" ng-min="1" ng-max="64000" placeholder="2" required />\n            </div>\n          </div>\n          <div class="form-group" ng-show="storidgeCreateProfileForm.profile_capacity.$invalid">\n            <div class="col-sm-12 small text-warning">\n              <div ng-messages="storidgeCreateProfileForm.profile_capacity.$error">\n                <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n                <p ng-message="min"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Minimum value for capacity: 1.</p>\n                <p ng-message="max"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Maximum value for capacity: 64000.</p>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !capacity --\x3e\n          \x3c!-- redundancy --\x3e\n          <div class="form-group">\n            <label for="profile_redundancy" class="col-sm-2 col-lg-1 control-label text-left">Redundancy</label>\n            <div class="col-sm-10 col-lg-11">\n              <select name="profile_redundancy" ng-model="model.Redundancy" ng-options="+(opt.value) as opt.label for opt in RedundancyOptions" class="form-control"> </select>\n            </div>\n          </div>\n          \x3c!-- !redudancy --\x3e\n          \x3c!-- provisioning --\x3e\n          <div class="form-group">\n            <label for="profile_provisioning" class="col-sm-2 col-lg-1 control-label text-left">Provisioning</label>\n            <div class="col-sm-10 col-lg-11">\n              <select name="profile_provisioning" ng-model="model.Provisioning" class="form-control">\n                <option value="thin">Thin</option>\n                <option value="thick">Thick</option>\n              </select>\n            </div>\n          </div>\n          \x3c!-- !provisioning --\x3e\n          \x3c!-- type --\x3e\n          <div class="form-group">\n            <label for="profile_type" class="col-sm-2 col-lg-1 control-label text-left"></label>\n            <div class="col-sm-10 col-lg-11">\n              <select name="profile_type" ng-model="model.Type" class="form-control">\n                <option value="ssd">SSD</option>\n                <option value="hdd">HDD</option>\n              </select>\n            </div>\n          </div>\n          \x3c!-- !type --\x3e\n          \x3c!-- Filesystem --\x3e\n          <div class="form-group">\n            <label for="profile_filesystem" class="col-sm-2 col-lg-1 control-label text-left">Filesystem</label>\n            <div class="col-sm-10 col-lg-11">\n              <select name="profile_filesystem" ng-model="model.Filesystem" class="form-control">\n                <option value="btrfs">btrfs</option>\n                <option value="ext4">ext4</option>\n                <option value="xfs">xfs</option>\n              </select>\n            </div>\n          </div>\n          \x3c!-- !Filesystem --\x3e\n          \x3c!-- snapshotEnabled --\x3e\n          <div class="form-group">\n            <label for="profile_snapshotEnabled" class="col-sm-2 col-lg-1 control-label text-left">\n              Enable snapshots\n            </label>\n            <label class="switch" style="margin-left: 20px;"> <input name="profile_snapshotEnabled" type="checkbox" ng-model="model.SnapshotEnabled" /><i></i> </label>\n          </div>\n          \x3c!-- !snapshotEnabled --\x3e\n          \x3c!-- snapshotMax --\x3e\n          <div class="form-group" ng-if="model.SnapshotEnabled">\n            <label for="profile_snapshotMax" class="col-sm-2 col-lg-1 control-label text-left" style="margin-top: 20px;">\n              Snapshot max\n            </label>\n            <div class="col-sm-4">\n              <slider model="model.SnapshotMax" floor="1" ceil="100" step="1"></slider>\n            </div>\n            <div class="col-sm-2">\n              <input type="number" min="1" class="form-control" ng-model="model.SnapshotMax" id="profile_snapshotMax" />\n            </div>\n            <div class="col-sm-4">\n              <p class="small text-muted" style="margin-top: 7px;">\n                Snapshot max (<b>count</b>)\n              </p>\n            </div>\n          </div>\n          \x3c!-- !snapshotMax --\x3e\n          \x3c!-- snapshotEnabled --\x3e\n          <div class="form-group" ng-if="model.SnapshotEnabled">\n            <label for="profile_recurringSnapshotEnabled" class="col-sm-2 col-lg-1 control-label text-left">\n              Enable periodic snapshots\n            </label>\n            <label class="switch" style="margin-left: 20px;">\n              <input name="profile_recurringSnapshotEnabled" type="checkbox" ng-model="state.RecurringSnapshotEnabled" /><i></i>\n            </label>\n          </div>\n          \x3c!-- !snapshotEnabled --\x3e\n          \x3c!-- snapshotInterval --\x3e\n          <div class="form-group" ng-if="model.SnapshotEnabled && state.RecurringSnapshotEnabled">\n            <label for="profile_snapshotInterval" class="col-sm-2 col-lg-1 control-label text-left" style="margin-top: 20px;">\n              \n            </label>\n            <div class="col-sm-4">\n              <slider model="model.SnapshotInterval" floor="1" ceil="2880" step="1"></slider>\n            </div>\n            <div class="col-sm-2">\n              <input type="number" min="1" class="form-control" ng-model="model.SnapshotInterval" id="profile_snapshotInterval" />\n            </div>\n            <div class="col-sm-4">\n              <p class="small text-muted" style="margin-top: 7px;">\n                 (<b></b>)\n              </p>\n            </div>\n          </div>\n          \x3c!-- !snapshotInterval --\x3e\n          \x3c!-- encryptionEnabled --\x3e\n          <div class="form-group">\n            <label for="profile_encryptionEnabled" class="col-sm-2 col-lg-1 control-label text-left">\n              Enable encryption\n            </label>\n            <label class="switch" style="margin-left: 20px;"> <input name="profile_encryptionEnabled" type="checkbox" ng-model="model.EncryptionEnabled" /><i></i> </label>\n          </div>\n          \x3c!-- !encryptionEnabled --\x3e\n          \x3c!-- interfaceType --\x3e\n          <div class="form-group">\n            <label for="profile_interfaceType" class="col-sm-2 col-lg-1 control-label text-left">Interface type</label>\n            <div class="col-sm-10 col-lg-11">\n              <select name="profile_interfaceType" ng-model="model.InterfaceType" class="form-control">\n                <option value=""></option>\n                <option value="nfs">nfs</option>\n              </select>\n            </div>\n          </div>\n          \x3c!-- !interfaceType --\x3e\n          \x3c!-- interfaceDriver --\x3e\n          <div class="form-group">\n            <label for="profile_interfaceDriver" class="col-sm-2 col-lg-1 control-label text-left">Network driver</label>\n            <div class="col-sm-10 col-lg-11">\n              <select name="profile_interfaceDriver" ng-model="model.InterfaceDriver" class="form-control">\n                <option value=""></option>\n                <option value="macvlan">macvlan</option>\n                <option value="overlay">overlay</option>\n              </select>\n            </div>\n          </div>\n          \x3c!-- !interfaceDriver --\x3e\n          \x3c!-- interfaceNetwork --\x3e\n          <div class="form-group">\n            <label for="profile_interfaceNetwork" class="col-sm-2 col-lg-1 control-label text-left">Network name</label>\n            <div class="col-sm-10 col-lg-11">\n              <input type="text" class="form-control" ng-model="model.InterfaceNetwork" name="profile_interfaceNetwork" pattern="[a-zA-Z0-9]+" />\n            </div>\n          </div>\n          \x3c!-- !interfaceNetwork --\x3e\n          \x3c!-- interfaceConf --\x3e\n          <div class="form-group">\n            <label for="profile_interfaceConf" class="col-sm-2 col-lg-1 control-label text-left">Interface conf</label>\n            <div class="col-sm-10 col-lg-11">\n              <input type="text" class="form-control" ng-model="model.InterfaceConf" name="profile_interfaceConf" />\n            </div>\n          </div>\n          \x3c!-- !interfaceConf --\x3e\n          \x3c!-- labels --\x3e\n          <div class="form-group">\n            <div class="col-sm-12" style="margin-top: 5px;">\n              <label class="control-label text-left"></label>\n              <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addLabel()"> <i class="fa fa-plus-circle" aria-hidden="true"></i>  </span>\n            </div>\n            \x3c!-- labels-input-list --\x3e\n            <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n              <div ng-repeat="label in formValues.Labels" style="margin-top: 2px;">\n                <div class="input-group col-sm-5 input-group-sm">\n                  <span class="input-group-addon">name</span>\n                  <input type="text" class="form-control" ng-model="label.name" placeholder=" com.example.foo" />\n                </div>\n                <div class="input-group col-sm-5 input-group-sm">\n                  <span class="input-group-addon">value</span>\n                  <input type="text" class="form-control" ng-model="label.value" placeholder=" bar" />\n                </div>\n                <button class="btn btn-sm btn-danger" type="button" ng-click="removeLabel($index)">\n                  <i class="fa fa-trash" aria-hidden="true"></i>\n                </button>\n              </div>\n            </div>\n            \x3c!-- !labels-input-list --\x3e\n          </div>\n          \x3c!-- !labels --\x3e\n          \x3c!-- iops --\x3e\n          <div ng-if="!state.LimitBandwidth || state.NoLimit">\n            <div class="col-sm-12 form-section-title">\n              IOPS\n            </div>\n            <div class="form-group">\n              <div class="col-md-1 col-sm-2">\n                <label for="permissions" class="control-label text-left">\n                  Limit IOPS\n                </label>\n              </div>\n              <label class="switch" style="margin-left: 20px;">\n                <input type="checkbox" ng-model="state.LimitIOPS" ng-change="state.NoLimit = (!state.LimitBandwidth && !state.LimitIOPS)" /><i></i>\n              </label>\n            </div>\n            <div class="form-group" ng-if="state.LimitIOPS">\n              <label for="min_iops" class="col-sm-1 control-label text-left">Min</label>\n              <div class="col-sm-5" ng-class="{ \'has-error\': storidgeCreateProfileForm.min_iops.$invalid }">\n                <input type="number" class="form-control" ng-model="model.MinIOPS" name="min_iops" ng-min="30" ng-max="999999" placeholder="100" required />\n              </div>\n              <label for="max_iops" class="col-sm-1 control-label text-left">Max</label>\n              <div class="col-sm-5" ng-class="{ \'has-error\': storidgeCreateProfileForm.max_iops.$invalid }">\n                <input type="number" class="form-control" ng-model="model.MaxIOPS" name="max_iops" ng-min="30" ng-max="999999" placeholder="2000" required />\n              </div>\n            </div>\n            <div class="form-group" ng-show="storidgeCreateProfileForm.min_iops.$invalid">\n              <div class="col-sm-12 small text-warning">\n                <div ng-messages="storidgeCreateProfileForm.min_iops.$error">\n                  <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> A value is required for Min IOPS.</p>\n                  <p ng-message="min"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Minimum value for Min IOPS: 30.</p>\n                  <p ng-message="max"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Maximum value for Min IOPS: 999999.</p>\n                </div>\n              </div>\n            </div>\n            <div class="form-group" ng-show="storidgeCreateProfileForm.max_iops.$invalid">\n              <div class="col-sm-12 small text-warning">\n                <div ng-messages="storidgeCreateProfileForm.max_iops.$error">\n                  <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> A value is required for Max IOPS.</p>\n                  <p ng-message="min"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Minimum value for Max IOPS: 30.</p>\n                  <p ng-message="max"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Maximum value for Max IOPS: 999999.</p>\n                </div>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !iops --\x3e\n          \x3c!-- bandwidth --\x3e\n          <div ng-if="!state.LimitIOPS || state.NoLimit">\n            <div class="col-sm-12 form-section-title">\n              Bandwidth\n            </div>\n            <div class="form-group">\n              <div class="col-md-1 col-sm-2">\n                <label for="permissions" class="control-label text-left">\n                  Limit bandwidth\n                </label>\n              </div>\n              <label class="switch" style="margin-left: 20px;">\n                <input type="checkbox" ng-model="state.LimitBandwidth" ng-change="state.NoLimit = (!state.LimitBandwidth && !state.LimitIOPS)" /><i></i>\n              </label>\n            </div>\n            <div class="form-group" ng-if="state.LimitBandwidth">\n              <label for="min_bandwidth" class="col-sm-1 control-label text-left">Min</label>\n              <div class="col-sm-5" ng-class="{ \'has-error\': storidgeCreateProfileForm.min_bandwidth.$invalid }">\n                <input type="number" class="form-control" ng-model="model.MinBandwidth" name="min_bandwidth" ng-min="1" ng-max="5000" placeholder="1" required />\n              </div>\n              <label for="max_bandwidth" class="col-sm-1 control-label text-left">Max</label>\n              <div class="col-sm-5" ng-class="{ \'has-error\': storidgeCreateProfileForm.max_bandwidth.$invalid }">\n                <input type="number" class="form-control" ng-model="model.MaxBandwidth" name="max_bandwidth" ng-min="1" ng-max="5000" placeholder="100" required />\n              </div>\n            </div>\n            <div class="form-group" ng-show="storidgeCreateProfileForm.min_bandwidth.$invalid">\n              <div class="col-sm-12 small text-warning">\n                <div ng-messages="storidgeCreateProfileForm.min_bandwidth.$error">\n                  <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> A value is required for Min bandwidth.</p>\n                  <p ng-message="min"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Minimum value for Min bandwidth: 1.</p>\n                  <p ng-message="max"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Maximum value for Min bandwidth: 5000.</p>\n                </div>\n              </div>\n            </div>\n            <div class="form-group" ng-show="storidgeCreateProfileForm.max_bandwidth.$invalid">\n              <div class="col-sm-12 small text-warning">\n                <div ng-messages="storidgeCreateProfileForm.max_bandwidth.$error">\n                  <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> A value is required for Max bandwidth.</p>\n                  <p ng-message="min"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Minimum value for Max bandwidth: 1.</p>\n                  <p ng-message="max"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Maximum value for Max bandwidth: 5000.</p>\n                </div>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !bandwidth --\x3e\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button\n                type="button"\n                class="btn btn-primary btn-sm"\n                ng-click="create()"\n                ng-disabled="state.actionInProgress || !storidgeCreateProfileForm.$valid"\n                button-spinner="state.actionInProgress"\n              >\n                <span ng-hide="state.actionInProgress">Create the profile</span>\n                <span ng-show="state.actionInProgress">Creating profile...</span>\n              </button>\n            </div>\n          </div>\n          \x3c!-- !actions --\x3e\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/integrations/storidge/views/cluster/cluster.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Storidge cluster">\n    <a data-toggle="tooltip" title="" ui-sref="storidge.cluster" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content>\n    <a ui-sref="storidge.cluster">Storidge</a>\n  </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-bolt" title-text="Cluster details"></rd-widget-header>\n      <rd-widget-body>\n        <table class="table">\n          <tbody>\n            <tr>\n              <td>Domain</td>\n              <td>{{ clusterInfo.Domain }}</td>\n            </tr>\n            <tr>\n              <td>Condition</td>\n              <td\n                ><i class="fa fa-heartbeat space-right {{ clusterInfo.Condition | storidgeClusterConditionBadge }}"></i>\n                {{ clusterInfo.Condition }}\n              </td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ clusterVersion }}</td>\n            </tr>\n          </tbody>\n        </table>\n        <form class="form-horizontal">\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button type="button" class="btn btn-danger btn-sm" ng-click="shutdownCluster()" ng-disabled="state.shutdownInProgress" button-spinner="state.shutdownInProgress">\n                <span ng-hide="state.shutdownInProgress"><i class="fa fa-power-off space-right" aria-hidden="true"></i> Shutdown the cluster</span>\n                <span ng-show="state.shutdownInProgress">Shutting down cluster...</span>\n              </button>\n              <button type="button" class="btn btn-danger btn-sm" ng-click="rebootCluster()" ng-disabled="state.rebootInProgress" button-spinner="state.shutdownInProgress">\n                <span ng-hide="state.rebootInProgress"><i class="fa fa-sync space-right" aria-hidden="true"></i> Reboot the cluster</span>\n                <span ng-show="state.rebootInProgress">Rebooting cluster...</span>\n              </button>\n            </div>\n          </div>\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-12">\n    <storidge-nodes-datatable title-text="Storage nodes" title-icon="fa-object-group" dataset="clusterNodes" table-key="storidge_nodes" order-by="Name"></storidge-nodes-datatable>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/integrations/storidge/views/nodes/inspect/node.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Node details"></rd-header-title>\n  <rd-header-content>\n    <a ui-sref="storidge.cluster">Storidge</a> &gt; <a ui-sref="storidge.cluster.node({id: node.Name})">{{ node.Name }}</a>\n  </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-object-group" title-text="Node details">\n        <button type="button" class="btn btn-sm btn-danger" ng-disabled="(node.Status | lowercase) !== \'normal\'" ng-click="removeNodeAction()">\n          <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>Remove node\n        </button>\n        <button type="button" class="btn btn-sm btn-primary" ng-disabled="(node.Status | lowercase) !== \'normal\'" ng-click="cordonNodeAction()">\n          <i class="fas fa-wrench space-right" aria-hidden="true"></i>Enter maintenance mode\n        </button>\n        <button type="button" class="btn btn-sm btn-primary" ng-disabled="(node.Status | lowercase) !== \'cordoned\'" ng-click="uncordonNodeAction()">\n          <i class="fa fa-power-off space-right" aria-hidden="true"></i>Exit maintenance mode\n        </button>\n      </rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table description-table">\n          <tbody>\n            <tr>\n              <td></td>\n              <td>{{ node.Name }}</td>\n            </tr>\n            <tr>\n              <td>Domain</td>\n              <td>{{ node.Domain }}</td>\n            </tr>\n            <tr>\n              <td>Domain ID</td>\n              <td>{{ node.DomainID }}</td>\n            </tr>\n            <tr>\n              <td>Node status</td>\n              <td>\n                <i class="fa fa-heartbeat space-right {{ node.Status | storidgeNodeStatusBadge }}"></i>\n                {{ node.Status }}\n              </td>\n            </tr>\n            <tr>\n              <td>Operating condition</td>\n              <td>\n                <i class="fa fa-heartbeat space-right {{ node.Condition | storidgeClusterConditionBadge }}"></i>\n                {{ node.Condition }}\n              </td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>{{ node.MetadataVersion }}</td>\n            </tr>\n            <tr>\n              <td>Nodes</td>\n              <td>{{ node.Nodes }}</td>\n            </tr>\n            <tr>\n              <td>HDDs</td>\n              <td>{{ node.Hdds }}</td>\n            </tr>\n            <tr>\n              <td>SSDs</td>\n              <td>{{ node.Ssds }}</td>\n            </tr>\n            <tr>\n              <td>VDisks</td>\n              <td>{{ node.Vdisks }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-object-group" title-text="Bandwidth details"></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table description-table">\n          <tbody>\n            <tr>\n              <td>Free</td>\n              <td>{{ node.FreeBandwidth }}</td>\n            </tr>\n            <tr>\n              <td>Used</td>\n              <td>{{ node.UsedBandwidth }}</td>\n            </tr>\n            <tr>\n              <td>Provisioned</td>\n              <td>{{ node.ProvisionedBandwidth }}</td>\n            </tr>\n            <tr>\n              <td>Total</td>\n              <td>{{ node.TotalBandwidth }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-object-group" title-text="Capacity details"></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table description-table">\n          <tbody>\n            <tr>\n              <td>Free</td>\n              <td>{{ node.FreeCapacity | bytes }}</td>\n            </tr>\n            <tr>\n              <td>Used</td>\n              <td>{{ node.UsedCapacity | bytes }}</td>\n            </tr>\n            <tr>\n              <td>Provisioned</td>\n              <td>{{ node.ProvisionedCapacity | bytes }}</td>\n            </tr>\n            <tr>\n              <td>Total</td>\n              <td>{{ node.TotalCapacity | bytes }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-lg-12 col-md-12 col-xs-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-object-group" title-text="IOPS details"></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table description-table">\n          <tbody>\n            <tr>\n              <td>Free</td>\n              <td>{{ node.FreeIOPS }}</td>\n            </tr>\n            <tr>\n              <td>Used</td>\n              <td>{{ node.UsedIOPS }}</td>\n            </tr>\n            <tr>\n              <td>Provisioned</td>\n              <td>{{ node.ProvisionedIOPS }}</td>\n            </tr>\n            <tr>\n              <td>Total</td>\n              <td>{{ node.TotalIOPS }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/integrations/storidge/views/monitor/monitor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Storidge monitor">\n    <a data-toggle="tooltip" title="" ui-sref="storidge.monitor" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content> <a ui-sref="storidge.cluster">Storidge</a> &gt; <a ui-sref="storidge.monitor">Cluster monitoring</a> </rd-header-content>\n</rd-header>\n\n<div class="row">\n  <div class="col-md-4 col-sm-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-tachometer-alt" title-text="Cluster capacity"></rd-widget-header>\n      <rd-widget-body>\n        <div class="chart-container" style="position: relative;">\n          <canvas id="capacityChart" width="770" height="400"></canvas>\n        </div>\n        <div style="margin-top: 10px;" ng-if="info">\n          <table class="table">\n            <tbody>\n              <tr>\n                <td>Capacity available</td>\n                <td>{{ ((info.FreeCapacity * 100) / info.TotalCapacity).toFixed(1) }}%</td>\n              </tr>\n              <tr>\n                <td>Provisioned capacity</td>\n                <td>\n                  {{ info.ProvisionedCapacity | humansize }}\n                  <span ng-if="+info.ProvisionedCapacity >= +info.TotalCapacity">\n                    <i class="fa fa-exclamation-triangle red-icon" aria-hidden="true" style="margin-left: 2px;"></i>\n                  </span>\n                </td>\n              </tr>\n              <tr>\n                <td>Total capacity</td>\n                <td>{{ info.TotalCapacity | humansize }}</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n  <div class="col-md-4 col-sm-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-chart-area" title-text="IOPS usage"></rd-widget-header>\n      <rd-widget-body>\n        <div class="chart-container" style="position: relative;">\n          <canvas id="iopsChart" width="770" height="400"></canvas>\n        </div>\n        <div style="margin-top: 10px;" ng-if="info">\n          <table class="table">\n            <tbody>\n              <tr>\n                <td>IOPS available</td>\n                <td>{{ ((info.FreeIOPS * 100) / info.TotalIOPS).toFixed(1) }}%</td>\n              </tr>\n              <tr>\n                <td>Provisioned IOPS</td>\n                <td>\n                  {{ info.ProvisionedIOPS | number }}\n                  <span ng-if="+info.ProvisionedIOPS >= +info.TotalIOPS">\n                    <i class="fa fa-exclamation-triangle red-icon" aria-hidden="true" style="margin-left: 2px;"></i>\n                  </span>\n                </td>\n              </tr>\n              <tr>\n                <td>Total IOPS</td>\n                <td>{{ info.TotalIOPS | number }}</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n  <div class="col-md-4 col-sm-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-chart-area" title-text="Bandwith usage"></rd-widget-header>\n      <rd-widget-body>\n        <div class="chart-container" style="position: relative;">\n          <canvas id="bandwithChart" width="770" height="400"></canvas>\n        </div>\n        <div style="margin-top: 10px;" ng-if="info">\n          <table class="table">\n            <tbody>\n              <tr>\n                <td>Bandwidth available</td>\n                <td>{{ ((info.FreeBandwidth * 100) / info.TotalBandwidth).toFixed(1) }}%</td>\n              </tr>\n              <tr>\n                <td>Provisioned bandwidth</td>\n                <td>\n                  {{ info.ProvisionedBandwidth | humansize }}\n                  <span ng-if="+info.ProvisionedBandwidth >= +info.TotalBandwidth">\n                    <i class="fa fa-exclamation-triangle red-icon" aria-hidden="true" style="margin-left: 2px;"></i>\n                  </span>\n                </td>\n              </tr>\n              <tr>\n                <td>Total bandwidth</td>\n                <td>{{ info.TotalBandwidth | humansize }} /s</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-12">\n    <storidge-cluster-events-datatable\n      title-text="Cluster events"\n      title-icon="fa-history"\n      dataset="events"\n      table-key="storidge_cluster_events"\n      order-by="Time"\n      reverse-order="true"\n    ></storidge-cluster-events-datatable>\n  </div>\n</div>\n\n\x3c!-- <div class="row">\n  <div class="col-md-12">\n    <rd-widget>\n      <rd-widget-header icon="fa-history" title-text="Cluster events">\n        <div class="pull-right">\n          :\n          <select ng-model="state.pagination_count" ng-change="changePaginationCount()">\n            <option value="0"></option>\n            <option value="10">10</option>\n            <option value="25">25</option>\n            <option value="50">50</option>\n            <option value="100">100</option>\n          </select>\n        </div>\n      </rd-widget-header>\n      <rd-widget-taskbar classes="col-lg-12">\n        <div class="pull-right">\n          <input type="text" id="filter" ng-model="state.filter" placeholder="..." class="form-control input-sm" />\n        </div>\n      </rd-widget-taskbar>\n      <rd-widget-body classes="no-padding">\n        <div class="table-responsive">\n          <table class="table table-hover">\n            <thead>\n              <tr>\n                <th>\n                  <a ng-click="order(\'Time\')">\n                    \n                    <span ng-show="sortType == \'Time\' && !sortReverse" class="glyphicon glyphicon-chevron-down"></span>\n                    <span ng-show="sortType == \'Time\' && sortReverse" class="glyphicon glyphicon-chevron-up"></span>\n                  </a>\n                </th>\n                <th>\n                  <a ng-click="order(\'Category\')">\n                    \n                    <span ng-show="sortType == \'Category\' && !sortReverse" class="glyphicon glyphicon-chevron-down"></span>\n                    <span ng-show="sortType == \'Category\' && sortReverse" class="glyphicon glyphicon-chevron-up"></span>\n                  </a>\n                </th>\n                <th>\n                  <a ng-click="order(\'Module\')">\n                    Module\n                    <span ng-show="sortType == \'Module\' && !sortReverse" class="glyphicon glyphicon-chevron-down"></span>\n                    <span ng-show="sortType == \'Module\' && sortReverse" class="glyphicon glyphicon-chevron-up"></span>\n                  </a>\n                </th>\n                <th>\n                  <a ng-click="order(\'Content\')">\n                    Content\n                    <span ng-show="sortType == \'Content\' && !sortReverse" class="glyphicon glyphicon-chevron-down"></span>\n                    <span ng-show="sortType == \'Content\' && sortReverse" class="glyphicon glyphicon-chevron-up"></span>\n                  </a>\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr dir-paginate="event in (events | filter:state.filter | orderBy:sortType:sortReverse | itemsPerPage: state.pagination_count)">\n                <td>{{ event.Time }}</td>\n                <td>{{ event.Category }}</td>\n                <td>{{ event.Module }}</td>\n                <td>{{ event.Content }}</td>\n              </tr>\n              <tr ng-if="!events">\n                <td colspan="4" class="text-center text-muted">...</td>\n              </tr>\n              <tr ng-if="events.length === 0">\n                <td colspan="4" class="text-center text-muted">No events available.</td>\n              </tr>\n            </tbody>\n          </table>\n          <div ng-if="events" class="pull-left pagination-controls">\n            <dir-pagination-controls></dir-pagination-controls>\n          </div>\n        </div>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div> --\x3e\n')}]),e.exports=n},function(e,t,n){var a=n(1202);angular.module("portainer.integrations.storidge").component("storidgeClusterEventsDatatable",{templateUrl:a,controller:"GenericDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<"}})},function(e,t){var n="app/integrations/storidge/components/cluster-events-datatable/storidgeClusterEventsDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover">\n          <thead>\n            <tr>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Time\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Time\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Time\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Category\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Category\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Category\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Module\')">\n                  Module\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Module\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Module\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Content\')">\n                  Content\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Content\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Content\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>{{ item.Time }}</td>\n              <td>{{ item.Category }}</td>\n              <td>{{ item.Module }}</td>\n              <td>{{ item.Content }}</td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="4" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="4" class="text-center text-muted">No events available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(1204);angular.module("portainer.integrations.storidge").component("storidgeDrivesDatatable",{templateUrl:a,controller:"StoridgeDrivesDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",removeAction:"<",addAction:"<",rescanAction:"<",actionInProgress:"<",additionInProgress:"<"}})},function(e,t){var n="app/integrations/storidge/components/drives-datatable/storidgeDrivesDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n      </div>\n      <div class="actionBar">\n        <button type="button" class="btn btn-sm btn-primary" ng-click="$ctrl.rescanAction()"> <i class="fa fa-sync space-right" aria-hidden="true"></i>Rescan drives </button>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover">\n          <thead>\n            <tr>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Id\')">\n                  Id\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Id\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Id\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Node\')">\n                  Node\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Node\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Node\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Device\')">\n                  Device\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Device\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Device\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Size\')">\n                  Size\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Size\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Size\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Use\')">\n                  Use\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Use\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Use\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Type\')">\n                  Type\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Type\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Type\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Status\')">\n                  Status\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Status\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Status\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                \n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>\n                <a ui-sref="storidge.drives.drive({id: item.Id})"> {{ item.Id }}</a>\n              </td>\n              <td>{{ item.Node }}</td>\n              <td>{{ item.Device }}</td>\n              <td>{{ item.Size }}</td>\n              <td>{{ item.Use }}</td>\n              <td>{{ item.Type }}</td>\n              <td>\n                <span class="label label-{{ item.Status | drivestatusbadge }}">{{ item.Status | capitalize }}</span>\n              </td>\n              <td>\n                <button\n                  ng-if="item.Status === \'available\'"\n                  type="button"\n                  class="btn btn-sm btn-primary btn-datatable"\n                  ng-click="$ctrl.addAction(item, $index)"\n                  button-spinner="$ctrl.additionInProgress[$index]"\n                  ng-disabled="$ctrl.actionInProgress"\n                >\n                  <span ng-hide="$ctrl.additionInProgress[$index]"><i class="fa fa-plus space-right" aria-hidden="true"></i>Add to storage pool</span>\n                  <span ng-show="$ctrl.additionInProgress[$index]">Addition in progress...</span>\n                </button>\n              </td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="7" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td class="text-center text-muted">No drives available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.docker").controller("StoridgeDrivesDatatableController",["$scope","$controller","DatatableService",function(e,t,n){angular.extend(this,t("GenericDatatableController",{$scope:e})),this.allowSelection=function(e){return"normal"!==e.Status},this.$onInit=function(){this.setDefaults(),this.prepareTableFromDataset(),this.state.orderBy=this.orderBy;var e=n.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=n.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var a=n.getDataTableFilters(this.tableKey);null!==a&&(this.filters=a),this.filters&&this.filters.state&&(this.filters.state.open=!1);var r=n.getDataTableSettings(this.tableKey);null!==r&&(this.settings=r,this.settings.open=!1),this.onSettingsRepeaterChange()}}])},function(e,t,n){var a=n(1207);angular.module("portainer.integrations.storidge").component("storidgeNodesDatatable",{templateUrl:a,controller:"StoridgeNodesDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<"}})},function(e,t){var n="app/integrations/storidge/components/nodes-datatable/storidgeNodesDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n      </div>\n      <div class="actionBar">\n        <div class="row">\n          <button type="button" class="btn btn-sm btn-primary" ng-click="$ctrl.addNodeAction()"> <i class="fa fa-plus space-right" aria-hidden="true"></i>Add node </button>\n          <div style="margin-bottom: 0px;">\n            <span ng-if="$ctrl.addInfo" class="text-muted small">\n              To add a node to this cluster, run the following command on your new node\n              <code>\n                {{ $ctrl.addInfo }}\n              </code>\n              <span class="btn btn-primary btn-sm space-left" ng-click="$ctrl.copyAddNodeCommand()"><i class="fa fa-copy space-right" aria-hidden="true"></i></span>\n              <span>\n                <i id="copyNotification" class="fa fa-check green-icon" aria-hidden="true" style="margin-left: 7px; display: none;"></i>\n              </span>\n            </span>\n          </div>\n        </div>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover">\n          <thead>\n            <tr>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'IP\')">\n                  IP \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'IP\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'IP\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Role\')">\n                  Role\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Role\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Role\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Status\')">\n                  Status\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Status\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Status\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>\n                <a ui-sref="storidge.cluster.node({name: item.Name})"> {{ item.Name }}</a>\n              </td>\n              <td>{{ item.IP }}</td>\n              <td>{{ item.Role }}</td>\n              <td>\n                <i class="fa fa-heartbeat space-right {{ item.Status | storidgeNodeStatusBadge }}"></i>\n                {{ item.Status }}\n              </td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="4" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="4" class="text-center text-muted">No nodes available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){(function(e){angular.module("portainer.integrations.storidge").controller("StoridgeNodesDatatableController",["$scope","$controller","clipboard","Notifications","StoridgeNodeService","DatatableService",function(t,n,a,r,i,s){angular.extend(this,n("GenericDatatableController",{$scope:t}));var o=this;this.addNodeAction=function(){i.add().then((function(e){o.addInfo=e.content})).catch((function(e){r.error("",e,'Unable to retrieve the "add node" command')}))},this.copyAddNodeCommand=function(){a.copyText(o.addInfo),e("#copyNotification").show(),e("#copyNotification").fadeOut(2e3)},this.$onInit=function(){this.setDefaults(),this.prepareTableFromDataset(),this.state.orderBy=this.orderBy;var e=s.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=s.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var n=s.getDataTableFilters(this.tableKey);null!==n&&(this.filters=n),this.filters&&this.filters.state&&(this.filters.state.open=!1);var a=s.getDataTableSettings(this.tableKey);null!==a&&(this.settings=a,this.settings.open=!1),this.onSettingsRepeaterChange()}}])}).call(this,n(45))},function(e,t,n){var a=n(1210);angular.module("portainer.integrations.storidge").component("storidgeProfileSelector",{templateUrl:a,controller:"StoridgeProfileSelectorController",bindings:{storidgeProfile:"="}})},function(e,t){var n="app/integrations/storidge/components/profileSelector/storidgeProfileSelector.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="form-group">\n  <label for="storidge_profile" class="col-sm-2 col-lg-1 control-label text-left">Profile</label>\n  <div class="col-sm-10 col-lg-11">\n    <select id="storidge_profile" ng-model="$ctrl.storidgeProfile" ng-options="profile.Name for profile in $ctrl.profiles" class="form-control">\n      <option selected disabled hidden value="">Select a profile</option>\n    </select>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.integrations.storidge").controller("StoridgeProfileSelectorController",["StoridgeProfileService","Notifications",function(e,t){var n=this;this.$onInit=function(){e.profiles().then((function(e){n.profiles=e})).catch((function(e){t.error("",e,"Unable to retrieve Storidge profiles")}))}}])},function(e,t,n){var a=n(1213);angular.module("portainer.integrations.storidge").component("storidgeProfilesDatatable",{templateUrl:a,controller:"GenericDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",removeAction:"<"}})},function(e,t){var n="app/integrations/storidge/components/profiles-datatable/storidgeProfilesDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n      </div>\n      <div class="actionBar">\n        <button type="button" class="btn btn-sm btn-danger" ng-disabled="$ctrl.state.selectedItemCount === 0" ng-click="$ctrl.removeAction($ctrl.state.selectedItems)">\n          <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>\n        </button>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover">\n          <thead>\n            <tr>\n              <th>\n                <span class="md-checkbox">\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>\n                <span class="md-checkbox">\n                  <input id="select_{{ $index }}" type="checkbox" ng-model="item.Checked" ng-click="$ctrl.selectItem(item, $event)" />\n                  <label for="select_{{ $index }}"></label>\n                </span>\n                <a ui-sref="storidge.profiles.profile({id: item.Name})">{{ item.Name }}</a>\n              </td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td class="text-center text-muted">No profile available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(1215);angular.module("portainer.docker").component("storidgeSnapshotCreation",{templateUrl:a,controller:"StoridgeSnapshotCreationController",bindings:{volumeId:"<"}})},function(e,t){var n="app/integrations/storidge/components/snapshot-creation/storidgeSnapshotCreation.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-widget>\n  <rd-widget-header icon="fa-plus" title-text="Create snapshot"> </rd-widget-header>\n  <rd-widget-body>\n    <form class="form-horizontal">\n      <div class="form-group">\n        <label for="description" class="col-sm-3 col-lg-2 control-label text-left"></label>\n        <div class="col-sm-9 col-lg-10">\n          <input type="text" class="form-control" id="description" ng-model="$ctrl.formValues.Description" />\n        </div>\n      </div>\n      <div class="form-group">\n        <div class="col-sm-12">\n          <button\n            type="button"\n            class="btn btn-primary btn-sm"\n            ng-disabled="$ctrl.state.actionInProgress"\n            ng-click="$ctrl.createSnapshot()"\n            button-spinner="$ctrl.state.actionInProgress"\n          >\n            <span ng-hide="$ctrl.state.actionInProgress">Create snapshot</span>\n            <span ng-show="$ctrl.state.actionInProgress">Creating snapshot...</span>\n          </button>\n        </div>\n      </div>\n    </form>\n  </rd-widget-body>\n</rd-widget>\n')}]),e.exports=n},function(e,t){angular.module("portainer.docker").controller("StoridgeSnapshotCreationController",["StoridgeSnapshotService","Notifications","$state",function(e,t,n){var a=this;this.formValues={},this.state={actionInProgress:!1},this.createSnapshot=function(){a.state.actionInProgress=!0,e.create(a.volumeId,a.formValues.Description).then((function(){t.success("Success","Snapshot successfully created"),n.reload()})).catch((function(e){t.error("",e,"Unable to create snapshot")})).finally((function(){a.state.actionInProgress=!1}))}}])},function(e,t,n){var a=n(1218);angular.module("portainer.integrations.storidge").component("storidgeSnapshotsDatatable",{templateUrl:a,controller:"GenericDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",removeAction:"<"}})},function(e,t){var n="app/integrations/storidge/components/snapshots-datatable/storidgeSnapshotsDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n      </div>\n      <div class="actionBar">\n        <button type="button" class="btn btn-sm btn-danger" ng-disabled="$ctrl.state.selectedItemCount === 0" ng-click="$ctrl.removeAction($ctrl.state.selectedItems)">\n          <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>\n        </button>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover">\n          <thead>\n            <tr>\n              <th>\n                <span class="md-checkbox">\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.changeOrderBy(\'Id\')">\n                  Id\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Id\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Id\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Date\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Date\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Date\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Description\')">\n                  Description\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Description\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Description\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>\n                <span class="md-checkbox">\n                  <input id="select_{{ $index }}" type="checkbox" ng-model="item.Checked" ng-click="$ctrl.selectItem(item, $event)" ng-disabled="item.Status === \'normal\'" />\n                  <label for="select_{{ $index }}"></label>\n                </span>\n                <a ui-sref="docker.volumes.volume.snapshot({snapshotId: item.Id})"> {{ item.Id }}</a>\n              </td>\n              <td>{{ item.Date }}</td>\n              <td>{{ item.Description }}</td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="7" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="3" class="text-center text-muted">No snapshots available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(1220);angular.module("portainer.docker").component("volumeStoridgeInfo",{templateUrl:a,controller:"VolumeStoridgeInfoController",bindings:{volume:"<"}})},function(e,t){var n="app/integrations/storidge/components/volume-storidge-info/volumeStoridgeInfo.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-widget>\n  <rd-widget-header icon="fa-cube" title-text="Storidge details">\n    <div class="form-group">\n      <div class="col-sm-12">\n        <button type="button" class="btn btn-primary btn-sm" ng-click="$ctrl.updateVolume()" ng-if="!$ctrl.state.updateInProgress">\n          <span>Update the volume</span>\n        </button>\n        <button type="button" class="btn btn-primary btn-sm" ng-click="$ctrl.confirmUpdate()" ng-if="$ctrl.state.updateInProgress" button-spinner="$ctrl.state.isUpdating">\n          <span ng-hide="$ctrl.state.isUpdating">Confirm</span>\n          <span ng-show="$ctrl.state.isUpdating">Updating the volume...</span>\n        </button>\n        <button type="button" class="btn btn-danger btn-sm" ng-click="$ctrl.cancelUpdate()" ng-if="$ctrl.state.updateInProgress" ng-disabled="$ctrl.state.isUpdating">\n          <span></span>\n        </button>\n      </div>\n    </div>\n  </rd-widget-header>\n  <rd-widget-body classes="no-padding" ng-if="!$ctrl.state.updateInProgress">\n    <table class="table">\n      <tbody>\n        <tr>\n          <td></td>\n          <td>{{ $ctrl.volume.Name }}</td>\n        </tr>\n        <tr>\n          <td>UUID</td>\n          <td>{{ $ctrl.volume.Uuid }}</td>\n        </tr>\n        <tr>\n          <td>Node</td>\n          <td>{{ $ctrl.volume.Node }}</td>\n        </tr>\n        <tr>\n          <td>Node ID</td>\n          <td>{{ $ctrl.volume.NodeID }}</td>\n        </tr>\n        <tr>\n          <td>Directory</td>\n          <td>{{ $ctrl.volume.Directory }}</td>\n        </tr>\n        <tr>\n          <td>Capacity</td>\n          <td>{{ $ctrl.volume.Capacity }}</td>\n        </tr>\n        <tr>\n          <td>Allocated</td>\n          <td>{{ $ctrl.volume.Allocated }}</td>\n        </tr>\n        <tr>\n          <td>IOPS Min</td>\n          <td>{{ $ctrl.volume.IOPSMin }}</td>\n        </tr>\n        <tr>\n          <td>IOPS Max</td>\n          <td>{{ $ctrl.volume.IOPSMax }}</td>\n        </tr>\n        <tr>\n          <td>Bandwidth Min</td>\n          <td>{{ $ctrl.volume.BandwidthMin }}</td>\n        </tr>\n        <tr>\n          <td>Bandwidth Max</td>\n          <td>{{ $ctrl.volume.BandwidthMax }}</td>\n        </tr>\n        <tr>\n          <td>Local Drive Only</td>\n          <td>{{ $ctrl.volume.LocalDriveOnly }}</td>\n        </tr>\n        <tr>\n          <td>Provisioning</td>\n          <td>{{ $ctrl.volume.Provisioning }}</td>\n        </tr>\n        <tr>\n          <td>Redundancy</td>\n          <td>{{ $ctrl.volume.Redundancy }}</td>\n        </tr>\n        <tr>\n          <td>Vdisk</td>\n          <td>{{ $ctrl.volume.Vdisk }}</td>\n        </tr>\n        <tr>\n          <td>IP</td>\n          <td>{{ $ctrl.volume.IP }}</td>\n        </tr>\n        <tr>\n          <td>Drive Type</td>\n          <td>{{ $ctrl.volume.DriveType }}</td>\n        </tr>\n        <tr>\n          <td>Encryption</td>\n          <td>{{ $ctrl.volume.Encryption }}</td>\n        </tr>\n        <tr>\n          <td>Snapshot Enabled</td>\n          <td>{{ $ctrl.volume.SnapshotEnabled }}</td>\n        </tr>\n        <tr>\n          <td></td>\n          <td>{{ $ctrl.volume.SnapshotInterval }} minute(s)</td>\n        </tr>\n        <tr>\n          <td>Max Snapshots</td>\n          <td>{{ $ctrl.volume.SnapshotMax }}</td>\n        </tr>\n        <tr>\n          <td>Filesystem</td>\n          <td>{{ $ctrl.volume.Filesystem }}</td>\n        </tr>\n        <tr ng-if="$ctrl.volume.Labels">\n          <td></td>\n          <td>\n            <table class="table table-bordered table-condensed">\n              <tr ng-repeat="var in $ctrl.volume.Labels">\n                <td>{{ var|key: \'=\' }}</td>\n                <td>{{ var|value: \'=\' }}</td>\n              </tr>\n            </table>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </rd-widget-body>\n  <rd-widget-body ng-if="$ctrl.state.updateInProgress">\n    <form class="form-horizontal" name="storidgeUpdateVolumeForm">\n      \x3c!-- Node --\x3e\n      <div class="form-group">\n        <label for="volume_node" class="col-sm-2 col-lg-1 control-label text-left">Node</label>\n        <div class="col-sm-10 col-lg-11">\n          <input type="text" class="form-control" ng-model="$ctrl.formValues.Node" name="volume_node" placeholder="2" />\n        </div>\n      </div>\n      \x3c!-- !Node --\x3e\n      \x3c!-- Capacity --\x3e\n      <div class="form-group">\n        <label for="volume_capacity" class="col-sm-2 col-lg-1 control-label text-left">Capacity</label>\n        <div class="col-sm-10 col-lg-11">\n          <input type="text" class="form-control" ng-model="$ctrl.formValues.Capacity" name="volume_capacity" placeholder="2" />\n        </div>\n      </div>\n      \x3c!-- !Capacity --\x3e\n      \x3c!-- IOPS --\x3e\n      <div class="form-group">\n        <label for="min_iops" class="col-sm-2 col-lg-1 control-label text-left">Min IOPS</label>\n        <div class="col-sm-10 col-lg-11">\n          <input type="number" class="form-control" ng-model="$ctrl.formValues.IOPSMin" name="min_iops" placeholder="100" />\n        </div>\n      </div>\n      <div class="form-group">\n        <label for="max_iops" class="col-sm-2 col-lg-1 control-label text-left">Max IOPS</label>\n        <div class="col-sm-10 col-lg-11">\n          <input type="number" class="form-control" ng-model="$ctrl.formValues.IOPSMax" name="max_iops" placeholder="2000" />\n        </div>\n      </div>\n      \x3c!-- !IOPS --\x3e\n      \x3c!-- Bandwidth --\x3e\n      <div class="form-group">\n        <label for="min_bandwidth" class="col-sm-2 col-lg-1 control-label text-left">Min Bandwidth</label>\n        <div class="col-sm-10 col-lg-11">\n          <input type="number" class="form-control" ng-model="$ctrl.formValues.BandwidthMin" name="min_bandwidth" placeholder="100" />\n        </div>\n      </div>\n      <div class="form-group">\n        <label for="max_bandwidth" class="col-sm-2 col-lg-1 control-label text-left">Max Bandwidth</label>\n        <div class="col-sm-10 col-lg-11">\n          <input type="number" class="form-control" ng-model="$ctrl.formValues.BandwidthMax" name="max_bandwidth" placeholder="2000" />\n        </div>\n      </div>\n      \x3c!-- !Bandwidth --\x3e\n      \x3c!-- labels --\x3e\n      <div class="form-group">\n        <div class="col-sm-12" style="margin-top: 5px;">\n          <label class="control-label text-left"></label>\n          <span class="label label-default interactive" style="margin-left: 10px;" ng-click="$ctrl.addLabel()">\n            <i class="fa fa-plus-circle" aria-hidden="true"></i> \n          </span>\n        </div>\n        \x3c!-- labels-input-list --\x3e\n        <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n          <div ng-repeat="label in $ctrl.formValues.Labels" style="margin-top: 2px;">\n            <div class="input-group col-sm-5 input-group-sm">\n              <span class="input-group-addon">name</span>\n              <input type="text" class="form-control" ng-model="label.name" placeholder=" com.example.foo" />\n            </div>\n            <div class="input-group col-sm-5 input-group-sm">\n              <span class="input-group-addon">value</span>\n              <input type="text" class="form-control" ng-model="label.value" placeholder=" bar" />\n            </div>\n            <button class="btn btn-sm btn-danger" type="button" ng-click="$ctrl.removeLabel($index)">\n              <i class="fa fa-trash" aria-hidden="true"></i>\n            </button>\n          </div>\n        </div>\n        \x3c!-- !labels-input-list --\x3e\n      </div>\n      \x3c!-- !labels --\x3e\n    </form>\n  </rd-widget-body>\n</rd-widget>\n')}]),e.exports=n},function(e,t){angular.module("portainer.docker").controller("VolumeStoridgeInfoController",["$state","StoridgeVolumeService","Notifications",function(e,t,n){var a=this;this.state={updateInProgress:!1,isUpdating:!1},this.addLabel=function(){this.formValues.Labels.push({name:"",value:""})},this.removeLabel=function(e){this.formValues.Labels.splice(e,1)},this.initLabels=function(){var e=this.volume.Labels;e&&(this.formValues.Labels=Object.keys(e).map((function(t){return{name:t,value:e[t]}})))},this.updateVolume=function(){this.state.updateInProgress=!0,this.formValues={IOPSMin:this.volume.IOPSMin,IOPSMax:this.volume.IOPSMax,Node:this.volume.Node,Capacity:this.volume.Capacity,BandwidthMin:this.volume.BandwidthMin,BandwidthMax:this.volume.BandwidthMax,Labels:[]},this.initLabels()},this.cancelUpdate=function(){this.state.updateInProgress=!1,this.formValues={}},this.prepareLabels=function(e){var t={};this.formValues.Labels.forEach((function(e){e.name&&e.value&&(t[e.name]=e.value)})),e.Labels=t},this.prepareVolume=function(){var e=angular.copy(this.formValues),t=this.volume;return e.Node!==t.Node&&e.Node||delete e.Node,e.Capacity!==t.Capacity&&e.Capacity||delete e.Capacity,e.IOPSMin!==t.IOPSMin&&e.IOPSMin?e.IOPSMin=e.IOPSMin.toString():delete e.IOPSMin,e.IOPSMax!==t.IOPSMax&&e.IOPSMax?e.IOPSMax=e.IOPSMax.toString():delete e.IOPSMax,e.BandwidthMin!==t.BandwidthMin&&e.BandwidthMin||delete e.BandwidthMin,e.BandwidthMax!==t.BandwidthMax&&e.BandwidthMax||delete e.BandwidthMax,this.prepareLabels(e),e},this.confirmUpdate=function(){this.state.isUpdating=!0;var r=this.prepareVolume();r.Name=this.volume.Name,t.update(r).then((function(){n.success(" updated"),e.reload()})).catch((function(e){n.error("",e,"Unable to update volume"),a.state.isUpdating=!1}))}}])},function(e,t,n){"use strict";n.r(t);var a=n(34);angular.module("portainer.integrations.storidge").filter("drivestatusbadge",(function(){return function(e){var t=e?Object(a.a)(e):"";return"available"===t?"info":"faulty"===t?"danger":"success"}})).filter("storidgeNodeStatusBadge",(function(){return function(e){var t=e?Object(a.a)(e):"";return"cordoned"===t||"maintenance"===t?"orange-icon":"leaving"===t||"failed"===t?"red-icon":"green-icon"}})).filter("storidgeClusterConditionBadge",(function(){return function(e){var t=e?Object(a.a)(e):"";return"alert"===t?"red-icon":"warning"===t?"orange-icon":"green-icon"}})).filter("bytes",(function(){return function(e,t){if(e=parseFloat(e),isNaN(e)||!isFinite(e))return"-";t||(t=1);var n=Math.floor(Math.log(e)/Math.log(1024));return 0===e?"0 B":(e/Math.pow(1024,Math.floor(n))).toFixed(t)+" "+["B","kB","MB","GB","TB","PB"][n]}}))},function(e,t){angular.module("portainer.integrations.storidge").factory("Storidge",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){"use strict";return e(t+"/:endpointId/storidge/:resource/:id/:action",{endpointId:n.endpointID},{rebootCluster:{method:"POST",params:{resource:"clusters",action:"reboot"}},shutdownCluster:{method:"POST",params:{resource:"clusters",action:"shutdown"}},queryEvents:{method:"GET",params:{resource:"clusters",action:"events"},ignoreLoadingBar:!0,isArray:!0},getVersion:{method:"GET",params:{resource:"clusters",action:"version"}},getInfo:{method:"GET",params:{resource:"clusters",action:"info"},ignoreLoadingBar:!0},queryNodes:{method:"GET",params:{resource:"nodes"}},getNode:{method:"GET",params:{resource:"nodes",id:"@id"}},addNode:{method:"POST",params:{resource:"nodes"}},removeNode:{method:"DELETE",params:{resource:"nodes",id:"@id"}},cordonNode:{method:"POST",params:{resource:"nodes",action:"cordon",id:"@id"}},uncordonNode:{method:"POST",params:{resource:"nodes",action:"uncordon",id:"@id"}},queryProfiles:{method:"GET",params:{resource:"profiles"}},getProfile:{method:"GET",params:{resource:"profiles"}},createProfile:{method:"POST",params:{resource:"profiles"}},updateProfile:{method:"PUT",params:{resource:"profiles",id:"@name"}},deleteProfile:{method:"DELETE",params:{resource:"profiles"}},queryDrives:{method:"GET",params:{resource:"drives"}},getDrive:{method:"GET",params:{resource:"drives",id:"@id"}},addDrive:{method:"POST",params:{resource:"drives"}},removeDrive:{method:"DELETE",params:{resource:"drives",id:"@id"}},rescanDrives:{method:"POST",params:{resource:"drives",action:"rescan"}},queryVolumes:{method:"GET",params:{resource:"volumes"}},createVolume:{method:"POST",params:{resource:"volumes"}},getVolume:{method:"GET",params:{resource:"volumes",id:"@id"}},updateVolume:{method:"POST",params:{resource:"volumes",id:"@name"}},removeVolume:{method:"DELETE",params:{resource:"volumes",id:"@id"}},querySnapshots:{method:"GET",params:{resource:"volumes",id:"@id",action:"snapshots"}},createSnapshot:{method:"POST",params:{resource:"volumes",id:"@id",action:"snapshot"}},getSnapshot:{method:"GET",params:{resource:"snapshots",id:"@id"}},removeSnapshot:{method:"DELETE",params:{resource:"snapshots",id:"@id"}}})}])},function(e,t,n){"use strict";n.r(t);var a=n(151),r=n.n(a),i=n(129),s=n.n(i);angular.module("portainer.integrations.storidge").factory("StoridgeChartService",[function(){var e={};function t(e){return e>5?s()(e,{base:10,round:1}):e.toFixed(1)+"B/s"}return e.CreateCapacityChart=function(e){return new r.a(e,{type:"doughnut",data:{datasets:[{data:[],backgroundColor:["rgba(171, 213, 255, 0.7)","rgba(229, 57, 53, 0.7)"]}],labels:[]},options:{tooltips:{callbacks:{label:function(e,t){var n=t.datasets[e.datasetIndex],a=t.labels[e.index],r=n.data[e.index];return a+": "+s()(r,{base:10,round:1})}}},animation:{duration:0},responsiveAnimationDuration:0,responsive:!0,hover:{animationDuration:0}}})},e.CreateIOPSChart=function(e){return new r.a(e,{type:"line",data:{labels:[],datasets:[{label:"IOPS",data:[],fill:!0,backgroundColor:"rgba(151,187,205,0.4)",borderColor:"rgba(151,187,205,0.6)",pointBackgroundColor:"rgba(151,187,205,1)",pointBorderColor:"rgba(151,187,205,1)",pointRadius:2,borderWidth:2}]},options:{animation:{duration:0},responsiveAnimationDuration:0,responsive:!0,tooltips:{mode:"index",intersect:!1,position:"nearest"},hover:{animationDuration:0},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})},e.CreateBandwidthChart=function(e){return new r.a(e,{type:"line",data:{labels:[],datasets:[{label:"Bandwidth",data:[],fill:!0,backgroundColor:"rgba(151,187,205,0.4)",borderColor:"rgba(151,187,205,0.6)",pointBackgroundColor:"rgba(151,187,205,1)",pointBorderColor:"rgba(151,187,205,1)",pointRadius:2,borderWidth:2}]},options:{animation:{duration:0},responsiveAnimationDuration:0,responsive:!0,tooltips:{mode:"index",intersect:!1,position:"nearest",callbacks:{label:function(e,t){return function(e,t){var n=0;n=t>5?s()(t,{base:10,round:1}):t.toFixed(1)+"B";return e+": "+n+"/s"}(t.datasets[e.datasetIndex].label,e.yLabel)}}},hover:{animationDuration:0},scales:{yAxes:[{ticks:{beginAtZero:!0,callback:t}}]}}})},e.UpdateChart=function(e,t,n){n.data.labels.push(e),n.data.datasets[0].data.push(t),n.data.datasets[0].data.length>600&&(n.data.labels.pop(),n.data.datasets[0].data.pop()),n.update(0)},e.UpdatePieChart=function(e,t,n){var a=n.data.labels.indexOf(e);a>-1?n.data.datasets[0].data[a]=t:(n.data.labels.push(e),n.data.datasets[0].data.push(t)),n.update(0)},e}])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var a=n(418),r=n(417);angular.module("portainer.integrations.storidge").factory("StoridgeClusterService",["$q","Storidge",function(e,t){var n={reboot:function(){return t.rebootCluster().$promise},shutdown:function(){return t.shutdownCluster().$promise},info:function(){var n=e.defer();return t.getInfo().$promise.then((function(e){var t=new a.StoridgeInfoModel(e);n.resolve(t)})).catch((function(e){n.reject({msg:"Unable to retrieve Storidge information",err:e})})),n.promise},version:function(){var n=e.defer();return t.getVersion().$promise.then((function(e){var t=e.version;n.resolve(t)})).catch((function(e){n.reject({msg:"Unable to retrieve Storidge version",err:e})})),n.promise},events:function(){var n=e.defer();return t.queryEvents().$promise.then((function(e){var t=e.map((function(e){return new r.StoridgeEventModel(e)}));n.resolve(t)})).catch((function(e){n.reject({msg:"Unable to retrieve Storidge events",err:e})})),n.promise}};return n}])},function(e,t,n){"use strict";n.r(t);var a=n(309);angular.module("portainer.integrations.storidge").factory("StoridgeDriveService",["$q","Storidge",function(e,t){var n={drives:function(){var n=e.defer();return t.queryDrives().$promise.then((function(e){var t=e.drives.map((function(e){return new a.StoridgeDriveModel(e)}));n.resolve(t)})).catch((function(e){n.reject({msg:"Unable to retrieve Storidge drives",err:e})})),n.promise},drive:function(n){var r=e.defer();return t.getDrive({id:n}).$promise.then((function(e){var n=new a.StoridgeDriveModel(e);t.getNode({id:e.nodeid}).$promise.then((function(e){n.Node=e.name,r.resolve(n)}))})).catch((function(e){r.reject({msg:"Unable to retrieve Storidge drive",err:e})})),r.promise},add:function(n,a){var r=e.defer();return t.addDrive({device:n,node:a}).$promise.then((function(){r.resolve()})).catch((function(e){r.reject({msg:"Unable to add Storidge drive",err:e})})),r.promise},remove:function(n){var a=e.defer();return t.removeDrive({id:n}).$promise.then((function(){a.resolve()})).catch((function(e){a.reject({msg:" Storidge drive",err:e})})),a.promise},rescan:function(){return t.rescanDrives().$promise}};return n}])},function(e,t,n){"use strict";n.r(t);var a=n(310);angular.module("portainer.integrations.storidge").factory("StoridgeNodeService",["$q","Storidge",function(e,t){var n={nodes:function(){var n=e.defer();return t.queryNodes().$promise.then((function(e){var t=e.nodes,r=[];for(var i in t)t.hasOwnProperty(i)&&r.push(new a.StoridgeNodeModel(i,t[i]));n.resolve(r)})).catch((function(e){n.reject({msg:"Unable to retrieve Storidge nodes",err:e})})),n.promise},node:function(n){var r=e.defer();return t.getNode({id:n}).$promise.then((function(e){var t=new a.StoridgeNodeDetailedModel(e.name,e.properties);r.resolve(t)})).catch((function(e){r.reject({msg:"Unable to retrieve Storidge node",err:e})})),r.promise},add:function(){return t.addNode().$promise},cordon:function(e){return t.cordonNode({id:e}).$promise},uncordon:function(e){return t.uncordonNode({id:e}).$promise},remove:function(e){return t.removeNode({id:e}).$promise}};return n}])},function(e,t,n){"use strict";n.r(t);var a=n(112);angular.module("portainer.integrations.storidge").factory("StoridgeProfileService",["$q","Storidge",function(e,t){var n={create:function(e){var n=new a.StoridgeCreateProfileRequest(e);return t.createProfile(n).$promise},update:function(e){var n=new a.StoridgeCreateProfileRequest(e);return t.updateProfile(n).$promise},delete:function(e){return t.deleteProfile({id:e}).$promise},profile:function(n){var r=e.defer();return t.getProfile({id:n}).$promise.then((function(e){var t=new a.StoridgeProfileModel(n,e);r.resolve(t)})).catch((function(e){r.reject({msg:"Unable to retrieve Storidge profile details",err:e})})),r.promise},profiles:function(){var n=e.defer();return t.queryProfiles().$promise.then((function(e){var t=e.profiles.map((function(e){return new a.StoridgeProfileListModel(e)}));n.resolve(t)})).catch((function(e){n.reject({msg:"Unable to retrieve Storidge profiles",err:e})})),n.promise}};return n}])},function(e,t,n){"use strict";n.r(t);var a=n(311);angular.module("portainer.integrations.storidge").factory("StoridgeSnapshotService",["$q","Storidge",function(e,t){var n={};return n.snapshots=function(n){var r=e.defer();return t.querySnapshots({id:n}).$promise.then((function(e){var t=e.snapshots,n=[];for(var i in t)t.hasOwnProperty(i)&&n.push(t[i]);var s=n.map((function(e){return new a.StoridgeSnapshotModel(e)}));r.resolve(s)})).catch((function(e){r.reject({msg:"Unable to retrieve Storidge snapshots",err:e})})),r.promise},n.snapshot=function(n){var r=e.defer();return t.getSnapshot({id:n}).$promise.then((function(e){var t=new a.StoridgeSnapshotModel(e.snapshot);r.resolve(t)})).catch((function(e){r.reject({msg:"Unable to retrieve Storidge snapshot",err:e})})),r.promise},n.create=function(n,a){var r=e.defer();return t.createSnapshot({id:n,opts:{description:a}}).$promise.then((function(e){r.resolve(e)})).catch((function(e){r.reject({msg:"Unable to create Storidge volume snapshot",err:e})})),r.promise},n.remove=function(n){var a=e.defer();return t.removeSnapshot({id:n}).$promise.then((function(){a.resolve()})).catch((function(e){a.reject({msg:" Storidge volume snapshot",err:e})})),a.promise},n}])},function(e,t,n){"use strict";n.r(t);var a=n(312);angular.module("portainer.integrations.storidge").factory("StoridgeVolumeService",["$q","Storidge",function(e,t){var n={volume:function(n){var r=e.defer();return t.getVolume({id:n}).$promise.then((function(e){var t=new a.StoridgeVolumeModel(e);r.resolve(t)})).catch((function(e){r.reject({msg:"Unable to retrieve Storidge volume",err:e})})),r.promise},update:function(n){var r=e.defer(),i=new a.StoridgeVolumeUpdateModel(n);return t.updateVolume(i).$promise.then((function(e){r.resolve(e)})).catch((function(e){r.reject({msg:"Unable to update Storidge volume",err:e})})),r.promise}};return n}])},function(e,t){angular.module("portainer.integrations.storidge").controller("StoridgeClusterController",["$q","$scope","$state","Notifications","StoridgeClusterService","StoridgeNodeService","ModalService",function(e,t,n,a,r,i,s){t.state={shutdownInProgress:!1,rebootInProgress:!1},t.rebootCluster=function(){s.confirm({title:"?",message:"All the nodes in the cluster will reboot during the process. Do you want to reboot the Storidge cluster?",buttons:{confirm:{label:"Reboot",className:"btn-danger"}},callback:function(e){e&&(t.state.rebootInProgress=!0,r.reboot().finally((function(){t.state.rebootInProgress=!1,a.success("Cluster successfully rebooted"),n.reload()})))}})},t.shutdownCluster=function(){s.confirm({title:"?",message:"All the nodes in the cluster will shutdown. Do you want to shutdown the Storidge cluster?",buttons:{confirm:{label:"Shutdown",className:"btn-danger"}},callback:function(e){e&&(t.state.shutdownInProgress=!0,r.shutdown().finally((function(){t.state.shutdownInProgress=!1,a.success("Cluster successfully shutdown"),n.go("docker.dashboard")})))}})},e.all({info:r.info(),version:r.version(),nodes:i.nodes()}).then((function(e){t.clusterInfo=e.info,t.clusterVersion=e.version,t.clusterNodes=e.nodes})).catch((function(e){a.error("",e,"Unable to retrieve cluster information")}))}])},function(e,t){angular.module("portainer.integrations.storidge").controller("StoridgeDrivesController",["$scope","$state","Notifications","StoridgeDriveService",function(e,t,n,a){e.state={additionInProgress:[],actionInProgress:!1},e.addAction=function(r,i){e.state.additionInProgress[i]=!0,e.state.actionInProgress=!0,a.add(r.Device,r.Node).then((function(){n.success("Drive "+r.Device+" successfully added on node "+r.Node),t.reload()})).catch((function(e){n.error("",e,"Unable to add drive")})).finally((function(){e.state.additionInProgress[i]=!1,e.state.actionInProgress=!1}))},e.rescanAction=function(){a.rescan().then((function(){t.reload()})).catch((function(e){n.error("",e,"Unable to scan drives")}))},a.drives().then((function(t){e.drives=t})).catch((function(e){n.error("",e,"Unable to retrieve drives")}))}])},function(e,t){angular.module("portainer.integrations.storidge").controller("StoridgeDriveController",["$scope","$state","$transition$","Notifications","ModalService","StoridgeDriveService",function(e,t,n,a,r,i){e.actionInProgress=!1,e.removeDrive=function(){r.confirm({title:"?",message:"Do you want really want to remove this drive from the storage pool?",buttons:{confirm:{label:"Remove",className:"btn-danger"}},callback:function(n){n&&(e.actionInProgress=!0,i.remove(e.drive.Id).then((function(){a.success("Success",""),t.go("storidge.drives",{},{reload:!0})})).catch((function(e){a.error("",e," drive from storage pool")})).finally((function(){e.actionInProgress=!1})))}})},e.id=n.params().id,i.drive(e.id).then((function(t){e.drive=t})).catch((function(e){a.error("",e,"Unable to retrieve drive details")}))}])},function(e,t,n){"use strict";n.r(t),function(e){var t=n(12),a=n.n(t);angular.module("portainer.integrations.storidge").controller("StoridgeMonitorController",["$q","$scope","$interval","$document","Notifications","StoridgeClusterService","StoridgeChartService",function(t,n,r,i,s,o,l){function c(){var e=n.repeater;angular.isDefined(e)&&(r.cancel(e),e=null)}function d(e,t){var n=e.UsedIOPS,r=a()(new Date).format("HH:mm:ss");l.UpdateChart(r,n,t)}function u(e,t){var n=e.UsedBandwidth,r=a()(new Date).format("HH:mm:ss");l.UpdateChart(r,n,t)}function p(e,t){var n=e.UsedCapacity,a=e.FreeCapacity;l.UpdatePieChart("Free",a,t),l.UpdatePieChart("Used",n,t)}function m(e,a,i){t.all({events:o.events(),info:o.info()}).then((function(l){n.events=l.events;var m=l.info;n.info=m,d(m,e),u(m,a),p(m,i),function(e,a,i){n.repeater=r((function(){t.all({events:o.events(),info:o.info()}).then((function(t){n.events=t.events;var r=t.info;n.info=r,d(r,e),u(r,a),p(r,i)})).catch((function(e){c(),s.error("",e,"Unable to retrieve cluster information")}))}),5e3)}(e,a,i)})).catch((function(e){c(),s.error("",e,"Unable to retrieve cluster information")}))}n.$on("$destroy",(function(){c()})),i.ready((function(){var t,n,a,r,i;t=e("#iopsChart"),n=l.CreateIOPSChart(t),a=e("#bandwithChart"),r=l.CreateBandwidthChart(a),i=e("#capacityChart"),m(n,r,l.CreateCapacityChart(i))}))}])}.call(this,n(45))},function(e,t){angular.module("portainer.integrations.storidge").controller("StoridgeNodeController",["$scope","$state","$transition$","Notifications","StoridgeNodeService","ModalService",function(e,t,n,a,r,i){e.removeNodeAction=function(n){i.confirm({title:"?",message:"Do you want really want to remove the node from the cluster?",buttons:{confirm:{label:"Remove",className:"btn-danger"}},callback:function(n){n&&r.remove(e.node.Name).then((function(){a.success("Node successfully",e.node.Name),t.go("storidge.cluster")})).catch((function(e){a.error("",e," node")}))}})},e.cordonNodeAction=function(n){i.confirm({title:"?",message:"Do you want really want to put the node in maintenance mode?",buttons:{confirm:{label:"Enter maintenance",className:"btn-danger"}},callback:function(n){n&&r.cordon(e.node.Name).then((function(){a.success("Node successfully put in maintenance")})).catch((function(e){a.error("",e,"Unable to put node in maintenance mode")})).finally((function(){t.reload()}))}})},e.uncordonNodeAction=function(n){i.confirm({title:"?",message:"Do you want really want to bring the nodes out of maintenance mode?",buttons:{confirm:{label:"Exit maintenance",className:"btn-danger"}},callback:function(n){n&&r.uncordon(e.node.Name).then((function(){a.success("Node successfully bringed back")})).catch((function(e){a.error("",e,"Unable to put node out of maintenance mode")})).finally((function(){t.reload()}))}})},e.name=n.params().name,r.node(e.name).then((function(t){e.node=t})).catch((function(e){a.error("",e,"Unable to retrieve node details")}))}])},function(e,t,n){"use strict";n.r(t);var a=n(34),r=n(112);angular.module("portainer.integrations.storidge").controller("StoridgeCreateProfileController",["$scope","$state","$transition$","Notifications","StoridgeProfileService",function(e,t,n,i,s){var o;e.formValues={Labels:[]},e.state={NoLimit:!0,LimitIOPS:!1,LimitBandwidth:!1,ManualInputDirectory:!1,actionInProgress:!1},e.RedundancyOptions=[{value:2,label:"2-copy"},{value:3,label:"3-copy"}],e.addLabel=function(){e.formValues.Labels.push({name:"",value:""})},e.removeLabel=function(t){e.formValues.Labels.splice(t,1)},e.create=function(){var n=e.model;e.state.LimitIOPS||(delete n.MinIOPS,delete n.MaxIOPS),e.state.LimitBandwidth||(delete n.MinBandwidth,delete n.MaxBandwidth),n.SnapshotEnabled?((!n.SnapshotMax||n.SnapshotMax<=0)&&(n.SnapshotMax=1),e.state.RecurringSnapshotEnabled||delete n.SnapshotInterval,e.state.RecurringSnapshotEnabled&&(!n.SnapshotInterval||n.SnapshotInterval<=0)&&(n.SnapshotInterval=1440)):(delete n.SnapshotMax,delete n.SnapshotInterval),function(t){var n={};e.formValues.Labels.forEach((function(e){e.name&&e.value&&(n[e.name]=e.value)})),t.Labels=n}(n),e.state.actionInProgress=!0,s.create(n).then((function(){i.success("Profile successfully"),t.go("storidge.profiles")})).catch((function(e){i.error("",e,"Unable to create profile")})).finally((function(){e.state.actionInProgress=!1}))},e.updatedName=function(){if(!e.state.ManualInputDirectory){var t=e.model;t.Directory="/cio/"+(t.Name?Object(a.a)(t.Name):"")}},e.updatedDirectory=function(){e.state.ManualInputDirectory||(e.state.ManualInputDirectory=!0)},(o=new r.StoridgeProfileDefaultModel).Name=n.params().profileName,o.Directory=o.Directory+Object(a.a)(o.Name),e.model=o}])},function(e,t){angular.module("portainer.integrations.storidge").controller("StoridgeProfileController",["$scope","$state","$transition$","Notifications","StoridgeProfileService","ModalService",function(e,t,n,a,r,i){e.formValues={Labels:[]},e.state={NoLimit:!1,LimitIOPS:!1,LimitBandwidth:!1,updateInProgress:!1,deleteInProgress:!1,RecurringSnapshotEnabled:!1},e.addLabel=function(){e.formValues.Labels.push({name:"",value:""})},e.removeLabel=function(t){e.formValues.Labels.splice(t,1)},e.RedundancyOptions=[{value:2,label:"2-copy"},{value:3,label:"3-copy"}],e.update=function(){var n=e.profile;e.state.LimitIOPS||(delete n.MinIOPS,delete n.MaxIOPS),e.state.LimitBandwidth||(delete n.MinBandwidth,delete n.MaxBandwidth),n.SnapshotEnabled?((!n.SnapshotMax||n.SnapshotMax<=0)&&(n.SnapshotMax=1),e.state.RecurringSnapshotEnabled||delete n.SnapshotInterval,e.state.RecurringSnapshotEnabled&&(!n.SnapshotInterval||n.SnapshotInterval<=0)&&(n.SnapshotInterval=1440)):(delete n.SnapshotMax,delete n.SnapshotInterval),function(t){var n={};e.formValues.Labels.forEach((function(e){e.name&&e.value&&(n[e.name]=e.value)})),t.Labels=n}(n),e.state.updateInProgress=!0,r.update(n).then((function(){a.success("Profile successfully updated"),t.go("storidge.profiles")})).catch((function(e){a.error("",e,"Unable to update profile")})).finally((function(){e.state.updateInProgress=!1}))},e.delete=function(){i.confirmDeletion("Do you want to remove this profile?",(function(n){var i;n&&(i=e.profile,e.state.deleteInProgress=!0,r.delete(i.Name).then((function(){a.success("Profile successfully deleted"),t.go("storidge.profiles")})).catch((function(e){a.error("",e,"Unable to delete profile")})).finally((function(){e.state.deleteInProgress=!1})))}))},r.profile(n.params().id).then((function(t){var n,a=t;a.MinIOPS&&0!==a.MinIOPS||a.MaxIOPS&&0!==a.MaxIOPS?e.state.LimitIOPS=!0:a.MinBandwidth&&0!==a.MinBandwidth||a.MaxBandwidth&&0!==a.MaxBandwidth?e.state.LimitBandwidth=!0:e.state.NoLimit=!0,a.SnapshotEnabled&&0!==a.SnapshotInterval&&(e.state.RecurringSnapshotEnabled=!0),n=a.Labels,e.formValues.Labels=Object.keys(n).map((function(e){return{name:e,value:n[e]}})),e.profile=a})).catch((function(e){a.error("",e,"Unable to retrieve profile details")}))}])},function(e,t,n){"use strict";n.r(t);var a=n(34),r=n(112);angular.module("portainer.integrations.storidge").controller("StoridgeProfilesController",["$q","$scope","$state","Notifications","StoridgeProfileService",function(e,t,n,i,s){t.state={actionInProgress:!1},t.formValues={Name:""},t.removeAction=function(e){var a=e.length;angular.forEach(e,(function(e){s.delete(e.Name).then((function(){i.success("Profile successfully",e.Name);var n=t.profiles.indexOf(e);t.profiles.splice(n,1)})).catch((function(e){i.error("",e," profile")})).finally((function(){0===--a&&n.reload()}))}))},t.create=function(){var e=new r.StoridgeProfileDefaultModel;e.Labels={},e.Name=t.formValues.Name,e.Directory=e.Directory+Object(a.a)(e.Name),delete e.MinBandwidth,delete e.MaxBandwidth,delete e.MinIOPS,delete e.MaxIOPS,t.state.actionInProgress=!0,s.create(e).then((function(){i.success("Profile successfully"),n.reload()})).catch((function(e){i.error("",e,"Unable to create profile")})).finally((function(){t.state.actionInProgress=!1}))},s.profiles().then((function(e){t.profiles=e})).catch((function(e){i.error("",e,"Unable to retrieve profiles")}))}])},function(e,t){angular.module("portainer.integrations.storidge").controller("StoridgeSnapshotController",["$scope","$state","$transition$","Notifications","ModalService","StoridgeSnapshotService",function(e,t,n,a,r,i){e.removeSnapshot=function(){r.confirm({title:"?",message:"Do you want really want to remove this snapshot?",buttons:{confirm:{label:"Remove",className:"btn-danger"}},callback:function(n){n&&i.remove(e.snapshot.Id).then((function(){a.success("Success","Snapshot"),t.go("portainer.volumes.volume",{id:e.volumeId})})).catch((function(e){a.error("",e," snapshot")}))}})},e.volumeId=n.params().id,e.snapshotId=n.params().snapshotId,i.snapshot(e.snapshotId).then((function(t){e.snapshot=t})).catch((function(e){a.error("",e,"Unable to retrieve snapshot details")}))}])},function(e,t){function n(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function a(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var s=e.apply(t,a);function o(e){n(s,r,i,o,l,"next",e)}function l(e){n(s,r,i,o,l,"throw",e)}o(void 0)}))}}angular.module("portainer.kubernetes",["portainer.app"]).config(["$stateRegistryProvider",function(e){"use strict";var t={name:"kubernetes",url:"/kubernetes",parent:"endpoint",abstract:!0,onEnter:["$async","$state","endpoint","EndpointProvider","KubernetesHealthService","Notifications","StateManager",function(e,t,n,r,i,s,o){return e(a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if([5,6,7].includes(n.Type)){e.next=3;break}return t.go("portainer.home"),e.abrupt("return");case 3:if(e.prev=3,7!==n.Type){e.next=14;break}return e.prev=5,e.next=8,i.ping(n.Id);case 8:n.Status=1,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),n.Status=2;case 14:return r.setEndpointID(n.Id),e.next=17,o.updateEndpointState(n,[]);case 17:e.next=23;break;case 19:e.prev=19,e.t1=e.catch(3),s.error("Failed loading endpoint",e.t1),t.go("portainer.home",{},{reload:!0});case 23:case"end":return e.stop()}}),e,null,[[3,19],[5,11]])}))))}]};e.register(t),e.register({name:"kubernetes.applications",url:"/applications",views:{"content@":{component:"kubernetesApplicationsView"}}}),e.register({name:"kubernetes.applications.new",url:"/new",views:{"content@":{component:"kubernetesCreateApplicationView"}}}),e.register({name:"kubernetes.applications.application",url:"/:namespace/:name",views:{"content@":{component:"kubernetesApplicationView"}}}),e.register({name:"kubernetes.applications.application.edit",url:"/edit",views:{"content@":{component:"kubernetesCreateApplicationView"}}}),e.register({name:"kubernetes.applications.application.console",url:"/:pod/:container/console",views:{"content@":{component:"kubernetesApplicationConsoleView"}}}),e.register({name:"kubernetes.applications.application.logs",url:"/:pod/:container/logs",views:{"content@":{component:"kubernetesApplicationLogsView"}}}),e.register({name:"kubernetes.stacks",url:"/stacks",abstract:!0}),e.register({name:"kubernetes.stacks.stack",url:"/:namespace/:name",abstract:!0}),e.register({name:"kubernetes.stacks.stack.logs",url:"/logs",views:{"content@":{component:"kubernetesStackLogsView"}}}),e.register({name:"kubernetes.configurations",url:"/configurations",views:{"content@":{component:"kubernetesConfigurationsView"}}}),e.register({name:"kubernetes.configurations.new",url:"/new",views:{"content@":{component:"kubernetesCreateConfigurationView"}}}),e.register({name:"kubernetes.configurations.configuration",url:"/:namespace/:name",views:{"content@":{component:"kubernetesConfigurationView"}}}),e.register({name:"kubernetes.cluster",url:"/cluster",views:{"content@":{component:"kubernetesClusterView"}}}),e.register({name:"kubernetes.dashboard",url:"/dashboard",views:{"content@":{component:"kubernetesDashboardView"}}}),e.register({name:"kubernetes.deploy",url:"/deploy",views:{"content@":{component:"kubernetesDeployView"}}}),e.register({name:"kubernetes.cluster.node",url:"/:name",views:{"content@":{component:"kubernetesNodeView"}}}),e.register({name:"kubernetes.resourcePools",url:"/pools",views:{"content@":{component:"kubernetesResourcePoolsView"}}}),e.register({name:"kubernetes.resourcePools.new",url:"/new",views:{"content@":{component:"kubernetesCreateResourcePoolView"}}}),e.register({name:"kubernetes.resourcePools.resourcePool",url:"/:id",views:{"content@":{component:"kubernetesResourcePoolView"}}}),e.register({name:"kubernetes.resourcePools.resourcePool.access",url:"/access",views:{"content@":{component:"kubernetesResourcePoolAccessView"}}}),e.register({name:"kubernetes.volumes",url:"/volumes",views:{"content@":{component:"kubernetesVolumesView"}}}),e.register({name:"kubernetes.volumes.volume",url:"/:namespace/:name",views:{"content@":{component:"kubernetesVolumeView"}}})}])},function(e,t){angular.module("portainer.kubernetes").factory("KubernetesComponentStatus",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){"use strict";return function(){return e(t+"/:endpointId/kubernetes/api/v1/componentstatuses/:id",{endpointId:n.endpointID},{get:{method:"GET",ignoreLoadingBar:!0}})}}])},function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(1),i=n.n(r),s=n(8),o=n(419);function l(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.KubernetesComponentStatus=n,this.getAsync=this.getAsync.bind(this)}var t,n,r,i,d;return e.$inject=["$async","KubernetesComponentStatus"],t=e,(n=[{key:"getAsync",value:(i=regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesComponentStatus().get().$promise;case 3:return t=e.sent,n=Object(a.a)(t.items,(function(e){return o.KubernetesComponentStatusConverter.apiToModel(e)})),e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e.catch(0),new s.default("Unable to retrieve cluster status",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})),d=function(){var e=this,t=arguments;return new Promise((function(n,a){var r=i.apply(e,t);function s(e){l(r,n,a,s,o,"next",e)}function o(e){l(r,n,a,s,o,"throw",e)}s(void 0)}))},function(){return d.apply(this,arguments)})},{key:"get",value:function(){return this.$async(this.getAsync)}}])&&c(t.prototype,n),r&&c(t,r),e}();t.default=d,i.a.module("portainer.kubernetes").service("KubernetesComponentStatusService",d)},function(e,t,n){var a=n(1291);angular.module("portainer.kubernetes").component("kubernetesContainersDatatable",{templateUrl:a,controller:"GenericDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",refreshCallback:"<",isPod:"<"}})},function(e,t){var n="app/kubernetes/components/datatables/application/containers-datatable/containersDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n        <div ng-if="$ctrl.refreshCallback" class="settings">\n          <span class="setting" ng-class="{ \'setting-active\': $ctrl.settings.open }" uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.settings.open">\n            <span uib-dropdown-toggle><i class="fa fa-cog" aria-hidden="true"></i> Table settings</span>\n            <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n              <div class="tableMenu">\n                <div class="menuHeader">\n                  \n                </div>\n                <div class="menuContent">\n                  <div>\n                    <div class="md-checkbox">\n                      <input id="setting_auto_refresh" type="checkbox" ng-model="$ctrl.settings.repeater.autoRefresh" ng-change="$ctrl.onSettingsRepeaterChange()" />\n                      <label for="setting_auto_refresh"></label>\n                    </div>\n                    <div ng-if="$ctrl.settings.repeater.autoRefresh">\n                      <label for="settings_refresh_rate">\n                        \n                      </label>\n                      <select id="settings_refresh_rate" ng-model="$ctrl.settings.repeater.refreshRate" ng-change="$ctrl.onSettingsRepeaterChange()" class="small-select">\n                        <option value="10">10s</option>\n                        <option value="30">30s</option>\n                        <option value="60">1min</option>\n                        <option value="120">2min</option>\n                        <option value="300">5min</option>\n                      </select>\n                      <span>\n                        <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="margin-top: 7px; display: none;"></i>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.settings.open = false;"></a>\n                </div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th ng-if="!$ctrl.isPod">\n                <a ng-click="$ctrl.changeOrderBy(\'PodName\')">\n                  Pod\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'PodName\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'PodName\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Image\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Image\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Image\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Status\')">\n                  Status\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Status\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Status\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Node\')">\n                  Node\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Node\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Node\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'CreationDate\')">\n                  Creation date\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'CreationDate\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'CreationDate\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit: $ctrl.tableKey))"\n              pagination-id="$ctrl.tableKey"\n            >\n              <td ng-if="!$ctrl.isPod">{{ item.PodName }}</td>\n              <td>{{ item.Name }}</td>\n              <td>{{ item.Image }}</td>\n              <td\n                ><span class="label label-{{ item.Status | kubernetesPodStatusColor }}">{{ item.Status }}</span></td\n              >\n              <td>\n                <span ng-if="item.Node">\n                  <a ui-sref="kubernetes.cluster.node({ name: item.Node })">\n                    {{ item.Node }}\n                  </a>\n                </span>\n                <span ng-if="!item.Node">-</span>\n              </td>\n              <td>{{ item.CreationDate | getisodate }}</td>\n              <td>\n                <a ui-sref="kubernetes.applications.application.logs({ pod: item.PodName, container: item.Name })"> <i class="fa fa-file-alt" aria-hidden="true"></i> Logs </a>\n                <a ng-if="item.Status === \'Running\'" ui-sref="kubernetes.applications.application.console({ pod: item.PodName, container: item.Name })" style="margin-left: 10px;">\n                  <i class="fa fa-terminal" aria-hidden="true"></i> \n                </a>\n              </td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="7" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="7" class="text-center text-muted">No pod available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5" pagination-id="$ctrl.tableKey"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(1293);angular.module("portainer.kubernetes").component("kubernetesApplicationsDatatable",{templateUrl:a,controller:"KubernetesApplicationsDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",removeAction:"<",refreshCallback:"<",onPublishingModeClick:"<"}})},function(e,t){var n="app/kubernetes/components/datatables/applications-datatable/applicationsDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n        <span class="small text-muted" style="float: left; margin-top: 5px;" ng-if="$ctrl.isAdmin && !$ctrl.settings.showSystem">\n          <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n          System resources are hidden, this can be changed in the table settings.\n        </span>\n        <div class="settings">\n          <span class="setting" ng-class="{ \'setting-active\': $ctrl.settings.open }" uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.settings.open">\n            <span uib-dropdown-toggle><i class="fa fa-cog" aria-hidden="true"></i> Table settings</span>\n            <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n              <div class="tableMenu">\n                <div class="menuHeader">\n                  \n                </div>\n                <div class="menuContent">\n                  <div>\n                    <div class="md-checkbox" ng-if="$ctrl.isAdmin">\n                      <input id="applications_setting_show_system" type="checkbox" ng-model="$ctrl.settings.showSystem" ng-change="$ctrl.onSettingsShowSystemChange()" />\n                      <label for="applications_setting_show_system">Show system resources</label>\n                    </div>\n                    <div class="md-checkbox">\n                      <input id="setting_auto_refresh" type="checkbox" ng-model="$ctrl.settings.repeater.autoRefresh" ng-change="$ctrl.onSettingsRepeaterChange()" />\n                      <label for="setting_auto_refresh"></label>\n                    </div>\n                    <div ng-if="$ctrl.settings.repeater.autoRefresh">\n                      <label for="settings_refresh_rate">\n                        \n                      </label>\n                      <select id="settings_refresh_rate" ng-model="$ctrl.settings.repeater.refreshRate" ng-change="$ctrl.onSettingsRepeaterChange()" class="small-select">\n                        <option value="10">10s</option>\n                        <option value="30">30s</option>\n                        <option value="60">1min</option>\n                        <option value="120">2min</option>\n                        <option value="300">5min</option>\n                      </select>\n                      <span>\n                        <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="margin-top: 7px; display: none;"></i>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.settings.open = false;"></a>\n                </div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div class="actionBar">\n        <button type="button" class="btn btn-sm btn-danger" ng-disabled="$ctrl.state.selectedItemCount === 0" ng-click="$ctrl.removeAction($ctrl.state.selectedItems)">\n          <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>\n        </button>\n        <button type="button" class="btn btn-sm btn-primary" ui-sref="kubernetes.applications.new">\n          <i class="fa fa-plus space-right" aria-hidden="true"></i>Add application\n        </button>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <span class="md-checkbox">\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'StackName\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'StackName\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'StackName\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'ResourcePool\')">\n                  Resource pool\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'ResourcePool\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'ResourcePool\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Image\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Image\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Image\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'ApplicationType\')">\n                  Application Type\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'ApplicationType\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'ApplicationType\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                Status\n              </th>\n              <th>\n                Publishing mode\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'CreationDate\')">\n                  \n                  <i class="fa fa-sort-numeric-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'CreationDate\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-numeric-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'CreationDate\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | filter:$ctrl.isDisplayed | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit: $ctrl.tableKey))"\n              ng-class="{ active: item.Checked }"\n              pagination-id="$ctrl.tableKey"\n            >\n              <td>\n                <span class="md-checkbox">\n                  <input id="select_{{ $index }}" type="checkbox" ng-model="item.Checked" ng-click="$ctrl.selectItem(item, $event)" ng-disabled="$ctrl.isSystemNamespace(item)" />\n                  <label for="select_{{ $index }}"></label>\n                </span>\n                <a ui-sref="kubernetes.applications.application({ name: item.Name, namespace: item.ResourcePool })">{{ item.Name }}</a>\n                <span class="label label-info image-tag label-margins" ng-if="$ctrl.isSystemNamespace(item)">system</span>\n                <span class="label label-primary image-tag label-margins" ng-if="!$ctrl.isSystemNamespace(item) && $ctrl.isExternalApplication(item)">external</span>\n              </td>\n              <td>{{ item.StackName }}</td>\n              <td>\n                <a ui-sref="kubernetes.resourcePools.resourcePool({ id: item.ResourcePool })">{{ item.ResourcePool }}</a>\n              </td>\n              <td\n                >{{ item.Image }} <span ng-if="item.Containers.length > 1">+ {{ item.Containers.length - 1 }}</span></td\n              >\n              <td>{{ item.ApplicationType | kubernetesApplicationTypeText }}</td>\n              <td ng-if="item.ApplicationType !== $ctrl.KubernetesApplicationTypes.POD">\n                <span ng-if="item.DeploymentType === $ctrl.KubernetesApplicationDeploymentTypes.REPLICATED">Replicated</span>\n                <span ng-if="item.DeploymentType === $ctrl.KubernetesApplicationDeploymentTypes.GLOBAL">Global</span>\n                <code>{{ item.RunningPodsCount }}</code> / <code>{{ item.TotalPodsCount }}</code>\n              </td>\n              <td ng-if="item.ApplicationType === $ctrl.KubernetesApplicationTypes.POD">\n                {{ item.Pods[0].Status }}\n              </td>\n              <td>\n                <span ng-if="item.PublishedPorts.length">\n                  <span>\n                    <a ng-click="$ctrl.onPublishingModeClick(item)">\n                      <i class="fa {{ item.ServiceType | kubernetesApplicationServiceTypeIcon }}" aria-hidden="true" style="margin-right: 2px;"> </i>\n                      {{ item.ServiceType | kubernetesApplicationServiceTypeText }}\n                    </a>\n                  </span>\n                </span>\n                <span ng-if="item.PublishedPorts.length === 0">-</span>\n              </td>\n              <td>{{ item.CreationDate | getisodate }} {{ item.ApplicationOwner ? \'by \' + item.ApplicationOwner : \'\' }}</td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="8" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="8" class="text-center text-muted">No application available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5" pagination-id="$ctrl.tableKey"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(13);angular.module("portainer.docker").controller("KubernetesApplicationsDatatableController",["$scope","$controller","KubernetesNamespaceHelper","DatatableService","Authentication",function(e,t,n,i,s){angular.extend(this,t("GenericDatatableController",{$scope:e}));var o=this;this.settings=Object.assign(this.settings,{showSystem:!1}),this.onSettingsShowSystemChange=function(){i.setDataTableSettings(this.tableKey,this.settings)},this.isExternalApplication=function(e){return r.default.isExternalApplication(e)},this.isSystemNamespace=function(e){return n.isSystemNamespace(e.ResourcePool)},this.isDisplayed=function(e){return!o.isSystemNamespace(e)||o.settings.showSystem},this.allowSelection=function(e){return!this.isSystemNamespace(e)},this.$onInit=function(){this.isAdmin=s.isAdmin(),this.KubernetesApplicationDeploymentTypes=a.KubernetesApplicationDeploymentTypes,this.KubernetesApplicationTypes=a.KubernetesApplicationTypes,this.setDefaults(),this.prepareTableFromDataset(),this.state.orderBy=this.orderBy;var e=i.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=i.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var n=i.getDataTableFilters(this.tableKey);null!==n&&(this.filters=n),this.filters&&this.filters.state&&(this.filters.state.open=!1);var r=i.getDataTableSettings(this.tableKey);null!==r&&(this.settings=r,this.settings.open=!1),this.onSettingsRepeaterChange()}}])},,,function(e,t,n){var a=n(1298);angular.module("portainer.kubernetes").component("kubernetesApplicationsPortsDatatable",{templateUrl:a,controller:"KubernetesApplicationsPortsDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",refreshCallback:"<"}})},function(e,t){var n="app/kubernetes/components/datatables/applications-ports-datatable/applicationsPortsDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n        <span class="small text-muted" style="float: left; margin-top: 5px;" ng-if="$ctrl.isAdmin && !$ctrl.settings.showSystem">\n          <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n          System resources are hidden, this can be changed in the table settings.\n        </span>\n        <div class="settings">\n          <span class="setting" ng-class="{ \'setting-active\': $ctrl.settings.open }" uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.settings.open">\n            <span uib-dropdown-toggle><i class="fa fa-cog" aria-hidden="true"></i> Table settings</span>\n            <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n              <div class="tableMenu">\n                <div class="menuHeader">\n                  \n                </div>\n                <div class="menuContent">\n                  <div>\n                    <div class="md-checkbox" ng-if="$ctrl.isAdmin">\n                      <input id="ports_setting_show_system" type="checkbox" ng-model="$ctrl.settings.showSystem" ng-change="$ctrl.onSettingsShowSystemChange()" />\n                      <label for="ports_setting_show_system">Show system resources</label>\n                    </div>\n                    <div class="md-checkbox">\n                      <input id="setting_auto_refresh" type="checkbox" ng-model="$ctrl.settings.repeater.autoRefresh" ng-change="$ctrl.onSettingsRepeaterChange()" />\n                      <label for="setting_auto_refresh"></label>\n                    </div>\n                    <div ng-if="$ctrl.settings.repeater.autoRefresh">\n                      <label for="settings_refresh_rate">\n                        \n                      </label>\n                      <select id="settings_refresh_rate" ng-model="$ctrl.settings.repeater.refreshRate" ng-change="$ctrl.onSettingsRepeaterChange()" class="small-select">\n                        <option value="10">10s</option>\n                        <option value="30">30s</option>\n                        <option value="60">1min</option>\n                        <option value="120">2min</option>\n                        <option value="300">5min</option>\n                      </select>\n                      <span>\n                        <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="margin-top: 7px; display: none;"></i>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.settings.open = false;"></a>\n                </div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <a ng-click="$ctrl.expandAll()" ng-if="$ctrl.hasExpandableItems()">\n                  <i ng-class="{ \'fas fa-angle-down\': $ctrl.state.expandAll, \'fas fa-angle-right\': !$ctrl.state.expandAll }" aria-hidden="true"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  Application\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                Publishing mode\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'TargetPort\')">\n                  Exposed port\n                  <i class="fa fa-sort-numeric-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'TargetPort\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-numeric-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'TargetPort\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Port\')">\n                  Container port\n                  <i class="fa fa-sort-numeric-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Port\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-numeric-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Port\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                HTTP route\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            \x3c!-- main rows --\x3e\n            \x3c!-- dir-paginate-start track by $index --\x3e\n            <tr\n              dir-paginate-start="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | filter: $ctrl.isDisplayed | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit: $ctrl.tableKey))"\n              ng-class="{ active: item.Checked }"\n              ng-style="{ background: item.Highlighted ? \'#d5e8f3\' : \'\' }"\n              ng-click="$ctrl.expandItem(item, !item.Expanded)"\n              pagination-id="$ctrl.tableKey"\n            >\n              \x3c!-- expandable --\x3e\n              <td>\n                <a ng-if="$ctrl.itemCanExpand(item)">\n                  <i ng-class="{ \'fas fa-angle-down\': item.Expanded, \'fas fa-angle-right\': !item.Expanded }" class="space-right" aria-hidden="true"></i>\n                </a>\n              </td>\n              \x3c!-- Application --\x3e\n              <td>\n                <a ui-sref="kubernetes.applications.application({ name: item.Name, namespace: item.ResourcePool })">{{ item.Name }}</a>\n                <span class="label label-info image-tag label-margins" ng-if="$ctrl.isSystemNamespace(item)">system</span>\n                <span class="label label-primary image-tag label-margins" ng-if="!$ctrl.isSystemNamespace(item) && $ctrl.isExternalApplication(item)">external</span>\n              </td>\n              \x3c!-- Publishing mode --\x3e\n              <td>\n                \x3c!-- LB --\x3e\n                <span ng-if="item.ServiceType === $ctrl.KubernetesServiceTypes.LOAD_BALANCER">\n                  <span> <i class="fa fa-project-diagram" aria-hidden="true" style="margin-right: 2px;"></i> Load balancer </span>\n                  <span class="text-muted small" style="margin-left: 5px;">\n                    <span ng-if="item.LoadBalancerIPAddress">{{ item.LoadBalancerIPAddress }}</span>\n                    <span ng-if="!item.LoadBalancerIPAddress">pending</span>\n                  </span>\n                </span>\n                \x3c!-- Internal --\x3e\n                <span ng-if="item.ServiceType === $ctrl.KubernetesServiceTypes.CLUSTER_IP">\n                  <i class="fa fa-list-alt" aria-hidden="true" style="margin-right: 2px;"></i> Internal\n                </span>\n                \x3c!-- Cluster --\x3e\n                <span ng-if="item.ServiceType === $ctrl.KubernetesServiceTypes.NODE_PORT"> <i class="fa fa-list" aria-hidden="true" style="margin-right: 2px;"></i> Cluster </span>\n              </td>\n              \x3c!-- Exposed port --\x3e\n              <td>\n                <span ng-if="!$ctrl.itemCanExpand(item)">\n                  {{ item.Ports[0].Port }}\n                  <a ng-if="item.LoadBalancerIPAddress" ng-href="http://{{ item.LoadBalancerIPAddress }}:{{ item.Ports[0].Port }}" target="_blank" style="margin-left: 5px;">\n                    <i class="fa fa-external-link-alt" aria-hidden="true"></i> access\n                  </a>\n                </span>\n              </td>\n              \x3c!-- Container port --\x3e\n              <td>\n                <span ng-if="!$ctrl.itemCanExpand(item)"> {{ item.Ports[0].TargetPort }}/{{ item.Ports[0].Protocol }} </span>\n              </td>\n              \x3c!-- HTTP route --\x3e\n              <td>\n                <span ng-if="!$ctrl.itemCanExpand(item)">\n                  <span ng-if="!$ctrl.portHasIngressRules(item.Ports[0])">-</span>\n                  <span ng-if="$ctrl.portHasIngressRules(item.Ports[0])">\n                    <span\n                      ng-if="!$ctrl.ruleCanBeDisplayed(item.Ports[0].IngressRules[0])"\n                      class="text-muted"\n                      tooltip-append-to-body="true"\n                      tooltip-placement="bottom"\n                      tooltip-class="portainer-tooltip"\n                      uib-tooltip="Ingress controller IP address not available yet"\n                      style="cursor: pointer;"\n                      >pending\n                    </span>\n                    <span ng-if="$ctrl.ruleCanBeDisplayed(item.Ports[0].IngressRules[0])">\n                      <a ng-href="{{ $ctrl.buildIngressRuleURL(item.Ports[0].IngressRules[0]) }}" target="_blank">\n                        {{ $ctrl.buildIngressRuleURL(item.Ports[0].IngressRules[0]) | stripprotocol }}\n                      </a>\n                    </span>\n                  </span>\n                </span>\n              </td>\n            </tr>\n            \x3c!-- sub rows --\x3e\n            <tr ng-show="item.Expanded" ng-repeat-start="port in item.Ports" ng-style="{ background: item.Highlighted ? \'#d5e8f3\' : \'#f5f5f5\' }">\n              <td ng-if="!$ctrl.portHasIngressRules(port)"></td>\n              <td ng-if="!$ctrl.portHasIngressRules(port)">-</td>\n              <td ng-if="!$ctrl.portHasIngressRules(port)">-</td>\n              <td ng-if="!$ctrl.portHasIngressRules(port)">\n                {{ port.Port }}\n                <a ng-if="item.LoadBalancerIPAddress" ng-href="http://{{ item.LoadBalancerIPAddress }}:{{ port.Port }}" target="_blank" style="margin-left: 5px;">\n                  <i class="fa fa-external-link-alt" aria-hidden="true"></i> access\n                </a>\n              </td>\n              <td ng-if="!$ctrl.portHasIngressRules(port)">{{ port.TargetPort }}/{{ port.Protocol }}</td>\n              <td ng-if="!$ctrl.portHasIngressRules(port)">-</td>\n            </tr>\n            <tr ng-show="item.Expanded" ng-repeat-end ng-repeat="rule in port.IngressRules" ng-style="{ background: item.Highlighted ? \'#d5e8f3\' : \'#f5f5f5\' }">\n              <td></td>\n              <td>-</td>\n              <td>-</td>\n              <td>\n                {{ port.Port }}\n                <a ng-if="item.LoadBalancerIPAddress" ng-href="http://{{ item.LoadBalancerIPAddress }}:{{ port.Port }}" target="_blank" style="margin-left: 5px;">\n                  <i class="fa fa-external-link-alt" aria-hidden="true"></i> access\n                </a>\n              </td>\n              <td>{{ port.TargetPort }}/{{ port.Protocol }}</td>\n              <td>\n                <span\n                  ng-if="!$ctrl.ruleCanBeDisplayed(rule)"\n                  class="text-muted"\n                  tooltip-append-to-body="true"\n                  tooltip-placement="bottom"\n                  tooltip-class="portainer-tooltip"\n                  uib-tooltip="Ingress controller IP address not available yet"\n                  style="cursor: pointer;"\n                  >pending\n                </span>\n                <span ng-if="$ctrl.ruleCanBeDisplayed(rule)">\n                  <a ng-href="{{ $ctrl.buildIngressRuleURL(rule) }}" target="_blank">\n                    {{ $ctrl.buildIngressRuleURL(rule) | stripprotocol }}\n                  </a>\n                </span>\n              </td>\n            </tr>\n            <tr dir-paginate-end></tr>\n            \x3c!-- no dataset --\x3e\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="6" class="text-center text-muted">...</td>\n            </tr>\n            \x3c!-- no values in filtered dataset --\x3e\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="6" class="text-center text-muted">No application port mapping available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5" pagination-id="$ctrl.tableKey"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(7),r=n(5),i=n(3),s=n(13),o=n(28);angular.module("portainer.docker").controller("KubernetesApplicationsPortsDatatableController",["$scope","$controller","KubernetesNamespaceHelper","DatatableService","Authentication",function(e,t,n,l,c){angular.extend(this,t("GenericDatatableController",{$scope:e})),this.state=Object.assign(this.state,{expandedItems:[],expandAll:!1});var d=this;this.KubernetesServiceTypes=o.KubernetesServiceTypes,this.settings=Object.assign(this.settings,{showSystem:!1}),this.onSettingsShowSystemChange=function(){l.setDataTableSettings(this.tableKey,this.settings)},this.isExternalApplication=function(e){return s.default.isExternalApplication(e)},this.isSystemNamespace=function(e){return n.isSystemNamespace(e.ResourcePool)},this.isDisplayed=function(e){return!d.isSystemNamespace(e)||d.settings.showSystem},this.expandItem=function(e,t){this.itemCanExpand(e)&&(e.Expanded=t,t||(e.Highlighted=!1))},this.itemCanExpand=function(e){return e.Ports.length>1||e.Ports[0].IngressRules.length>1},this.buildIngressRuleURL=function(e){return"http://"+(e.Host?e.Host:e.IP)+e.Path},this.portHasIngressRules=function(e){return e.IngressRules.length>0},this.ruleCanBeDisplayed=function(e){return!(!e.Host&&!e.IP)},this.hasExpandableItems=function(){var e=this;return Object(r.a)(this.state.filteredDataSet,(function(t){return e.itemCanExpand(t)})).length},this.expandAll=function(){var e=this;this.state.expandAll=!this.state.expandAll,Object(a.a)(this.state.filteredDataSet,(function(t){e.itemCanExpand(t)&&e.expandItem(t,e.state.expandAll)}))},this.$onInit=function(){this.isAdmin=c.isAdmin(),this.KubernetesApplicationDeploymentTypes=i.KubernetesApplicationDeploymentTypes,this.setDefaults(),this.prepareTableFromDataset(),this.state.orderBy=this.orderBy;var e=l.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=l.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var n=l.getDataTableFilters(this.tableKey);null!==n&&(this.filters=n),this.filters&&this.filters.state&&(this.filters.state.open=!1);var a=l.getDataTableSettings(this.tableKey);null!==a&&(this.settings=a,this.settings.open=!1),this.onSettingsRepeaterChange()}}])},function(e,t,n){var a=n(1301);angular.module("portainer.kubernetes").component("kubernetesApplicationsStacksDatatable",{templateUrl:a,controller:"KubernetesApplicationsStacksDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",refreshCallback:"<",removeAction:"<"}})},function(e,t){var n="app/kubernetes/components/datatables/applications-stacks-datatable/applicationsStacksDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n        <span class="small text-muted" style="float: left; margin-top: 5px;" ng-if="$ctrl.isAdmin && !$ctrl.settings.showSystem">\n          <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n          System resources are hidden, this can be changed in the table settings.\n        </span>\n        <div class="settings">\n          <span class="setting" ng-class="{ \'setting-active\': $ctrl.settings.open }" uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.settings.open">\n            <span uib-dropdown-toggle><i class="fa fa-cog" aria-hidden="true"></i> Table settings</span>\n            <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n              <div class="tableMenu">\n                <div class="menuHeader">\n                  \n                </div>\n                <div class="menuContent">\n                  <div>\n                    <div class="md-checkbox" ng-if="$ctrl.isAdmin">\n                      <input id="stacks_setting_show_system" type="checkbox" ng-model="$ctrl.settings.showSystem" ng-change="$ctrl.onSettingsShowSystemChange()" />\n                      <label for="stacks_setting_show_system">Show system resources</label>\n                    </div>\n                    <div class="md-checkbox">\n                      <input id="setting_auto_refresh" type="checkbox" ng-model="$ctrl.settings.repeater.autoRefresh" ng-change="$ctrl.onSettingsRepeaterChange()" />\n                      <label for="setting_auto_refresh"></label>\n                    </div>\n                    <div ng-if="$ctrl.settings.repeater.autoRefresh">\n                      <label for="settings_refresh_rate">\n                        \n                      </label>\n                      <select id="settings_refresh_rate" ng-model="$ctrl.settings.repeater.refreshRate" ng-change="$ctrl.onSettingsRepeaterChange()" class="small-select">\n                        <option value="10">10s</option>\n                        <option value="30">30s</option>\n                        <option value="60">1min</option>\n                        <option value="120">2min</option>\n                        <option value="300">5min</option>\n                      </select>\n                      <span>\n                        <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="margin-top: 7px; display: none;"></i>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.settings.open = false;"></a>\n                </div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div class="actionBar">\n        <button type="button" class="btn btn-sm btn-danger" ng-disabled="$ctrl.state.selectedItemCount === 0" ng-click="$ctrl.removeAction($ctrl.state.selectedItems)">\n          <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>\n        </button>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <span class="md-checkbox">\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.expandAll()" ng-if="$ctrl.hasExpandableItems()">\n                  <i ng-class="{ \'fas fa-angle-down\': $ctrl.state.expandAll, \'fas fa-angle-right\': !$ctrl.state.expandAll }" aria-hidden="true"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'ResourcePool\')">\n                  Resource pool\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'ResourcePool\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'ResourcePool\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Applications.length\')">\n                  Applications\n                  <i class="fa fa-sort-numeric-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Applications.length\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-numeric-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Applications.length\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                \n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate-start="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | filter: $ctrl.isDisplayed | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit: $ctrl.tableKey))"\n              ng-class="{ active: item.Checked }"\n              ng-style="{ background: item.Highlighted ? \'#d5e8f3\' : \'\' }"\n              ng-click="$ctrl.expandItem(item, !item.Expanded)"\n              pagination-id="$ctrl.tableKey"\n            >\n              <td>\n                <span class="md-checkbox">\n                  <input\n                    id="select_{{ $index }}"\n                    type="checkbox"\n                    ng-model="item.Checked"\n                    ng-click="$ctrl.selectItem(item, $event); $event.stopPropagation();"\n                    ng-disabled="!$ctrl.allowSelection(item)"\n                  />\n                  <label for="select_{{ $index }}"></label>\n                </span>\n                <a ng-if="$ctrl.itemCanExpand(item)">\n                  <i ng-class="{ \'fas fa-angle-down\': item.Expanded, \'fas fa-angle-right\': !item.Expanded }" class="space-right" aria-hidden="true"></i>\n                </a>\n              </td>\n              <td>\n                {{ item.Name }}\n              </td>\n              <td>\n                <a ui-sref="kubernetes.resourcePools.resourcePool({ id: item.ResourcePool })" ng-click="$event.stopPropagation();">{{ item.ResourcePool }}</a>\n                <span class="label label-info image-tag label-margins" ng-if="$ctrl.isSystemNamespace(item)">system</span>\n              </td>\n              <td>{{ item.Applications.length }}</td>\n              <td>\n                <a ui-sref="kubernetes.stacks.stack.logs({ namespace: item.ResourcePool, name: item.Name })"> <i class="fa fa-file-alt" aria-hidden="true"></i> Logs </a>\n              </td>\n            </tr>\n            <tr dir-paginate-end ng-show="item.Expanded" ng-repeat="app in item.Applications" ng-style="{ background: item.Highlighted ? \'#d5e8f3\' : \'#f5f5f5\' }">\n              <td colspan="5">\n                <a ui-sref="kubernetes.applications.application({ name: app.Name, namespace: app.ResourcePool })" style="margin-left: 25px;">{{ app.Name }}</a>\n                <span style="margin-left: 5px;" class="label label-primary image-tag" ng-if="!$ctrl.isSystemNamespace(app.ResourcePool) && $ctrl.isExternalApplication(app)"\n                  >external</span\n                >\n              </td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="5" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="5" class="text-center text-muted"></td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5" pagination-id="$ctrl.tableKey"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(7),r=n(5),i=n(3),s=n(13);angular.module("portainer.docker").controller("KubernetesApplicationsStacksDatatableController",["$scope","$controller","KubernetesNamespaceHelper","DatatableService","Authentication",function(e,t,n,o,l){angular.extend(this,t("GenericDatatableController",{$scope:e})),this.state=Object.assign(this.state,{expandedItems:[],expandAll:!1});var c=this;this.settings=Object.assign(this.settings,{showSystem:!1}),this.onSettingsShowSystemChange=function(){o.setDataTableSettings(this.tableKey,this.settings)},this.isExternalApplication=function(e){return s.default.isExternalApplication(e)},this.allowSelection=function(e){return!this.isSystemNamespace(e)},this.isSystemNamespace=function(e){return n.isSystemNamespace(e.ResourcePool)},this.isDisplayed=function(e){return!c.isSystemNamespace(e)||c.settings.showSystem},this.expandItem=function(e,t){this.itemCanExpand(e)&&(e.Expanded=t,t||(e.Highlighted=!1))},this.itemCanExpand=function(e){return e.Applications.length>0},this.hasExpandableItems=function(){var e=this;return Object(r.a)(this.state.filteredDataSet,(function(t){return e.itemCanExpand(t)})).length},this.expandAll=function(){var e=this;this.state.expandAll=!this.state.expandAll,Object(a.a)(this.state.filteredDataSet,(function(t){e.itemCanExpand(t)&&e.expandItem(t,e.state.expandAll)}))},this.$onInit=function(){this.isAdmin=l.isAdmin(),this.KubernetesApplicationDeploymentTypes=i.KubernetesApplicationDeploymentTypes,this.setDefaults(),this.prepareTableFromDataset(),this.state.orderBy=this.orderBy;var e=o.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=o.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var n=o.getDataTableFilters(this.tableKey);null!==n&&(this.filters=n),this.filters&&this.filters.state&&(this.filters.state.open=!1);var a=o.getDataTableSettings(this.tableKey);null!==a&&(this.settings=a,this.settings.open=!1),this.onSettingsRepeaterChange()}}])},function(e,t,n){var a=n(1304);angular.module("portainer.kubernetes").component("kubernetesConfigurationsDatatable",{templateUrl:a,controller:"KubernetesConfigurationsDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",refreshCallback:"<",removeAction:"<"}})},function(e,t){var n="app/kubernetes/components/datatables/configurations-datatable/configurationsDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n        <span class="small text-muted" style="float: left; margin-top: 5px;" ng-if="$ctrl.isAdmin && !$ctrl.settings.showSystem">\n          <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n          System resources are hidden, this can be changed in the table settings.\n        </span>\n        <div class="settings">\n          <span class="setting" ng-class="{ \'setting-active\': $ctrl.settings.open }" uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.settings.open">\n            <span uib-dropdown-toggle><i class="fa fa-cog" aria-hidden="true"></i> Table settings</span>\n            <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n              <div class="tableMenu">\n                <div class="menuHeader">\n                  \n                </div>\n                <div class="menuContent">\n                  <div>\n                    <div class="md-checkbox" ng-if="$ctrl.isAdmin">\n                      <input id="setting_show_system" type="checkbox" ng-model="$ctrl.settings.showSystem" ng-change="$ctrl.onSettingsShowSystemChange()" />\n                      <label for="setting_show_system">Show system resources</label>\n                    </div>\n                    <div class="md-checkbox">\n                      <input id="setting_auto_refresh" type="checkbox" ng-model="$ctrl.settings.repeater.autoRefresh" ng-change="$ctrl.onSettingsRepeaterChange()" />\n                      <label for="setting_auto_refresh"></label>\n                    </div>\n                    <div ng-if="$ctrl.settings.repeater.autoRefresh">\n                      <label for="settings_refresh_rate">\n                        \n                      </label>\n                      <select id="settings_refresh_rate" ng-model="$ctrl.settings.repeater.refreshRate" ng-change="$ctrl.onSettingsRepeaterChange()" class="small-select">\n                        <option value="10">10s</option>\n                        <option value="30">30s</option>\n                        <option value="60">1min</option>\n                        <option value="120">2min</option>\n                        <option value="300">5min</option>\n                      </select>\n                      <span>\n                        <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="margin-top: 7px; display: none;"></i>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.settings.open = false;"></a>\n                </div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div class="actionBar">\n        <button type="button" class="btn btn-sm btn-danger" ng-disabled="$ctrl.state.selectedItemCount === 0" ng-click="$ctrl.removeAction($ctrl.state.selectedItems)">\n          <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>\n        </button>\n        <button type="button" class="btn btn-sm btn-primary" ui-sref="kubernetes.configurations.new">\n          <i class="fa fa-plus space-right" aria-hidden="true"></i>Add configuration\n        </button>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <span class="md-checkbox">\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Namespace\')">\n                  Resource Pool\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Namespace\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Namespace\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Type\')">\n                  Type\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Type\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Type\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'CreationDate\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'CreationDate\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'CreationDate\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | filter:$ctrl.isDisplayed | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n            >\n              <td>\n                <span class="md-checkbox">\n                  <input id="select_{{ $index }}" type="checkbox" ng-model="item.Checked" ng-click="$ctrl.selectItem(item, $event)" ng-disabled="!$ctrl.allowSelection(item)" />\n                  <label for="select_{{ $index }}"></label>\n                </span>\n                <a ui-sref="kubernetes.configurations.configuration({ name: item.Name, namespace: item.Namespace })">{{ item.Name }}</a>\n                <span class="label label-primary image-tag label-margins" ng-if="!$ctrl.isSystemConfig(item) && $ctrl.isExternalConfiguration(item)">external</span>\n                <span class="label label-warning image-tag label-margins" ng-if="!item.Used && !$ctrl.isSystemNamespace(item) && !$ctrl.isSystemConfig(item)">unused</span>\n                <span class="label label-info image-tag label-margins" ng-if="$ctrl.isSystemConfig(item)">system</span>\n              </td>\n              <td>\n                <a ui-sref="kubernetes.resourcePools.resourcePool({ id: item.Namespace })">{{ item.Namespace }}</a>\n              </td>\n              <td>{{ item.Type | kubernetesConfigurationTypeText }}</td>\n              <td>{{ item.CreationDate | getisodate }} {{ item.ConfigurationOwner ? \'by \' + item.ConfigurationOwner : \'\' }}</td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="4" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="4" class="text-center text-muted">No configuration available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(97);angular.module("portainer.docker").controller("KubernetesConfigurationsDatatableController",["$scope","$controller","KubernetesNamespaceHelper","DatatableService","Authentication",function(e,t,n,r,i){angular.extend(this,t("GenericDatatableController",{$scope:e}));var s=this;this.settings=Object.assign(this.settings,{showSystem:!1}),this.onSettingsShowSystemChange=function(){r.setDataTableSettings(this.tableKey,this.settings)},this.isSystemNamespace=function(e){return n.isSystemNamespace(e.Namespace)},this.isSystemToken=function(e){return a.default.isSystemToken(e)},this.isSystemConfig=function(e){return s.isSystemNamespace(e)||s.isSystemToken(e)},this.isExternalConfiguration=function(e){return a.default.isExternalConfiguration(e)},this.isDisplayed=function(e){return!s.isSystemConfig(e)||s.settings.showSystem&&s.isAdmin},this.allowSelection=function(e){return!this.isSystemConfig(e)&&!e.Used},this.$onInit=function(){this.isAdmin=i.isAdmin(),this.setDefaults(),this.prepareTableFromDataset(),this.state.orderBy=this.orderBy;var e=r.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=r.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var n=r.getDataTableFilters(this.tableKey);null!==n&&(this.filters=n),this.filters&&this.filters.state&&(this.filters.state.open=!1);var a=r.getDataTableSettings(this.tableKey);null!==a&&(this.settings=a,this.settings.open=!1),this.onSettingsRepeaterChange()}}])},function(e,t,n){var a=n(1307);angular.module("portainer.kubernetes").component("kubernetesEventsDatatable",{templateUrl:a,controller:"GenericDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",loading:"<",refreshCallback:"<"}})},function(e,t){var n="app/kubernetes/components/datatables/events-datatable/eventsDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n        <div class="settings">\n          <span class="setting" ng-class="{ \'setting-active\': $ctrl.settings.open }" uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.settings.open">\n            <span uib-dropdown-toggle><i class="fa fa-cog" aria-hidden="true"></i> Table settings</span>\n            <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n              <div class="tableMenu">\n                <div class="menuHeader">\n                  \n                </div>\n                <div class="menuContent">\n                  <div>\n                    <div class="md-checkbox">\n                      <input id="setting_auto_refresh" type="checkbox" ng-model="$ctrl.settings.repeater.autoRefresh" ng-change="$ctrl.onSettingsRepeaterChange()" />\n                      <label for="setting_auto_refresh"></label>\n                    </div>\n                    <div ng-if="$ctrl.settings.repeater.autoRefresh">\n                      <label for="settings_refresh_rate">\n                        \n                      </label>\n                      <select id="settings_refresh_rate" ng-model="$ctrl.settings.repeater.refreshRate" ng-change="$ctrl.onSettingsRepeaterChange()" class="small-select">\n                        <option value="10">10s</option>\n                        <option value="30">30s</option>\n                        <option value="60">1min</option>\n                        <option value="120">2min</option>\n                        <option value="300">5min</option>\n                      </select>\n                      <span>\n                        <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="margin-top: 7px; display: none;"></i>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.settings.open = false;"></a>\n                </div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Date\')">\n                  \n                  <i class="fa fa-sort-numeric-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Date\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-numeric-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Date\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Involved.kind\')">\n                  Kind\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Involved.kind\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Involved.kind\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Type\')">\n                  Type\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Type\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Type\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Message\')">\n                  Message\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Message\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Message\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit: $ctrl.tableKey))"\n              pagination-id="$ctrl.tableKey"\n            >\n              <td>{{ item.Date | getisodate }}</td>\n              <td>{{ item.Involved.kind }}</td>\n              <td\n                ><span class="label label-{{ item.Type | kubernetesEventTypeColor }}">{{ item.Type }}</span></td\n              >\n              <td>{{ item.Message }}</td>\n            </tr>\n            <tr ng-if="$ctrl.loading">\n              <td colspan="4" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="!$ctrl.loading && (!$ctrl.dataset || $ctrl.state.filteredDataSet.length === 0)">\n              <td colspan="4" class="text-center text-muted">No event available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5" pagination-id="$ctrl.tableKey"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(1309);angular.module("portainer.kubernetes").component("kubernetesIntegratedApplicationsDatatable",{templateUrl:a,controller:"GenericDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",refreshCallback:"<"}})},function(e,t){var n="app/kubernetes/components/datatables/integrated-applications-datatable/integratedApplicationsDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle">\n          <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i>\n          {{ $ctrl.titleText }}\n        </div>\n        <div ng-if="$ctrl.refreshCallback" class="settings">\n          <span class="setting" ng-class="{ \'setting-active\': $ctrl.settings.open }" uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.settings.open">\n            <span uib-dropdown-toggle> <i class="fa fa-cog" aria-hidden="true"></i> Table settings </span>\n            <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n              <div class="tableMenu">\n                <div class="menuHeader">\n                  \n                </div>\n                <div class="menuContent">\n                  <div>\n                    <div class="md-checkbox">\n                      <input id="setting_auto_refresh" type="checkbox" ng-model="$ctrl.settings.repeater.autoRefresh" ng-change="$ctrl.onSettingsRepeaterChange()" />\n                      <label for="setting_auto_refresh"></label>\n                    </div>\n                    <div ng-if="$ctrl.settings.repeater.autoRefresh">\n                      <label for="settings_refresh_rate">\n                        \n                      </label>\n                      <select id="settings_refresh_rate" ng-model="$ctrl.settings.repeater.refreshRate" ng-change="$ctrl.onSettingsRepeaterChange()" class="small-select">\n                        <option value="10">10s</option>\n                        <option value="30">30s</option>\n                        <option value="60">1min</option>\n                        <option value="120">2min</option>\n                        <option value="300">5min</option>\n                      </select>\n                      <span>\n                        <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="margin-top: 7px; display: none;"></i>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.settings.open = false;"></a>\n                </div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'StackName\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'StackName\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'StackName\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Image\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Image\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Image\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n            >\n              <td\n                ><a ui-sref="kubernetes.applications.application({ name: item.Name, namespace: item.ResourcePool })">{{ item.Name }}</a></td\n              >\n              <td>{{ item.StackName }}</td>\n              <td>{{ item.Image }}</td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="3" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="3" class="text-center text-muted">No application available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(1311);angular.module("portainer.kubernetes").component("kubernetesNodeApplicationsDatatable",{templateUrl:a,controller:"KubernetesNodeApplicationsDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",refreshCallback:"<"}})},function(e,t){var n="app/kubernetes/components/datatables/node-applications-datatable/nodeApplicationsDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle">\n          <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i>\n          {{ $ctrl.titleText }}\n        </div>\n        <div class="settings">\n          <span class="setting" ng-class="{ \'setting-active\': $ctrl.settings.open }" uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.settings.open">\n            <span uib-dropdown-toggle> <i class="fa fa-cog" aria-hidden="true"></i> Table settings </span>\n            <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n              <div class="tableMenu">\n                <div class="menuHeader">\n                  \n                </div>\n                <div class="menuContent">\n                  <div>\n                    <div class="md-checkbox">\n                      <input id="setting_auto_refresh" type="checkbox" ng-model="$ctrl.settings.repeater.autoRefresh" ng-change="$ctrl.onSettingsRepeaterChange()" />\n                      <label for="setting_auto_refresh"></label>\n                    </div>\n                    <div ng-if="$ctrl.settings.repeater.autoRefresh">\n                      <label for="settings_refresh_rate">\n                        \n                      </label>\n                      <select id="settings_refresh_rate" ng-model="$ctrl.settings.repeater.refreshRate" ng-change="$ctrl.onSettingsRepeaterChange()" class="small-select">\n                        <option value="10">10s</option>\n                        <option value="30">30s</option>\n                        <option value="60">1min</option>\n                        <option value="120">2min</option>\n                        <option value="300">5min</option>\n                      </select>\n                      <span>\n                        <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="margin-top: 7px; display: none;"></i>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.settings.open = false;"></a>\n                </div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'StackName\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'StackName\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'StackName\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'ResourcePool\')">\n                  Resource pool\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'ResourcePool\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'ResourcePool\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Image\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Image\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Image\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'CPU\')">\n                  CPU reservation\n                  <i class="fa fa-sort-numeric-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'CPU\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-numeric-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'CPU\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Memory\')">\n                  \n                  <i class="fa fa-sort-numeric-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Memory\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-numeric-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Memory\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n            >\n              <td>\n                <a ui-sref="kubernetes.applications.application({ name: item.Name, namespace: item.ResourcePool })">{{ item.Name }}</a>\n                <span style="margin-left: 5px;" class="label label-info image-tag" ng-if="$ctrl.isSystemNamespace(item)">system</span>\n                <span style="margin-left: 5px;" class="label label-primary image-tag" ng-if="!$ctrl.isSystemNamespace(item) && $ctrl.isExternalApplication(item)">external</span>\n              </td>\n              <td>{{ item.StackName }}</td>\n              <td>\n                <a ui-sref="kubernetes.resourcePools.resourcePool({ id: item.ResourcePool })">{{ item.ResourcePool }}</a>\n              </td>\n              <td\n                >{{ item.Image }} <span ng-if="item.Containers.length > 1">+ {{ item.Containers.length - 1 }}</span></td\n              >\n              <td>{{ item.CPU | kubernetesApplicationCPUValue }}</td>\n              <td>{{ item.Memory | humansize }}</td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="6" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="6" class="text-center text-muted"></td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(13);angular.module("portainer.docker").controller("KubernetesNodeApplicationsDatatableController",["$scope","$controller","KubernetesNamespaceHelper","DatatableService",function(e,t,n,i){angular.extend(this,t("GenericDatatableController",{$scope:e})),this.isSystemNamespace=function(e){return n.isSystemNamespace(e.ResourcePool)},this.isExternalApplication=function(e){return r.default.isExternalApplication(e)},this.$onInit=function(){this.KubernetesApplicationDeploymentTypes=a.KubernetesApplicationDeploymentTypes,this.setDefaults(),this.prepareTableFromDataset(),this.state.orderBy=this.orderBy;var e=i.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=i.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var n=i.getDataTableFilters(this.tableKey);null!==n&&(this.filters=n),this.filters&&this.filters.state&&(this.filters.state.open=!1);var r=i.getDataTableSettings(this.tableKey);null!==r&&(this.settings=r,this.settings.open=!1),this.onSettingsRepeaterChange()}}])},function(e,t,n){var a=n(1314);angular.module("portainer.kubernetes").component("kubernetesNodesDatatable",{templateUrl:a,controller:"GenericDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",refreshCallback:"<",isAdmin:"<"}})},function(e,t){var n="app/kubernetes/components/datatables/nodes-datatable/nodesDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n        <div class="settings">\n          <span class="setting" ng-class="{ \'setting-active\': $ctrl.settings.open }" uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.settings.open">\n            <span uib-dropdown-toggle><i class="fa fa-cog" aria-hidden="true"></i> Table settings</span>\n            <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n              <div class="tableMenu">\n                <div class="menuHeader">\n                  \n                </div>\n                <div class="menuContent">\n                  <div>\n                    <div class="md-checkbox">\n                      <input id="setting_auto_refresh" type="checkbox" ng-model="$ctrl.settings.repeater.autoRefresh" ng-change="$ctrl.onSettingsRepeaterChange()" />\n                      <label for="setting_auto_refresh"></label>\n                    </div>\n                    <div ng-if="$ctrl.settings.repeater.autoRefresh">\n                      <label for="settings_refresh_rate">\n                        \n                      </label>\n                      <select id="settings_refresh_rate" ng-model="$ctrl.settings.repeater.refreshRate" ng-change="$ctrl.onSettingsRepeaterChange()" class="small-select">\n                        <option value="10">10s</option>\n                        <option value="30">30s</option>\n                        <option value="60">1min</option>\n                        <option value="120">2min</option>\n                        <option value="300">5min</option>\n                      </select>\n                      <span>\n                        <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="margin-top: 7px; display: none;"></i>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.settings.open = false;"></a>\n                </div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Role\')">\n                  Role\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Role\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Role\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Status\')">\n                  Status\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Status\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Status\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'CPU\')">\n                  CPU\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'CPU\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'CPU\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Memory\')">\n                  Memory\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Memory\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Memory\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Version\')">\n                  Version\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Version\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Version\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'IPAddress\')">\n                  IP \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'IPAddress\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'IPAddress\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n            >\n              <td ng-if="$ctrl.isAdmin">\n                <a ui-sref="kubernetes.cluster.node({ name: item.Name })">\n                  {{ item.Name }}\n                </a>\n                <span class="label label-primary image-tag" style="margin-left: 5px;" ng-if="item.Api">api</span>\n              </td>\n              <td ng-if="!$ctrl.isAdmin"> {{ item.Name }}</td>\n              <td>{{ item.Role }}</td>\n              <td\n                ><span class="label label-{{ item.Status | kubernetesNodeStatusColor }}">{{ item.Status }}</span></td\n              >\n              <td>{{ item.CPU }}</td>\n              <td>{{ item.Memory | humansize }}</td>\n              <td>{{ item.Version }}</td>\n              <td>{{ item.IPAddress }}</td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="7" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="7" class="text-center text-muted">No node available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(1316);angular.module("portainer.kubernetes").component("kubernetesResourcePoolApplicationsDatatable",{templateUrl:a,controller:"KubernetesResourcePoolApplicationsDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",refreshCallback:"<"}})},function(e,t){var n="app/kubernetes/components/datatables/resource-pool-applications-datatable/resourcePoolApplicationsDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle">\n          <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i>\n          {{ $ctrl.titleText }}\n        </div>\n        <div ng-if="$ctrl.refreshCallback" class="settings">\n          <span class="setting" ng-class="{ \'setting-active\': $ctrl.settings.open }" uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.settings.open">\n            <span uib-dropdown-toggle> <i class="fa fa-cog" aria-hidden="true"></i> Table settings </span>\n            <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n              <div class="tableMenu">\n                <div class="menuHeader">\n                  \n                </div>\n                <div class="menuContent">\n                  <div>\n                    <div class="md-checkbox">\n                      <input id="setting_auto_refresh" type="checkbox" ng-model="$ctrl.settings.repeater.autoRefresh" ng-change="$ctrl.onSettingsRepeaterChange()" />\n                      <label for="setting_auto_refresh"></label>\n                    </div>\n                    <div ng-if="$ctrl.settings.repeater.autoRefresh">\n                      <label for="settings_refresh_rate">\n                        \n                      </label>\n                      <select id="settings_refresh_rate" ng-model="$ctrl.settings.repeater.refreshRate" ng-change="$ctrl.onSettingsRepeaterChange()" class="small-select">\n                        <option value="10">10s</option>\n                        <option value="30">30s</option>\n                        <option value="60">1min</option>\n                        <option value="120">2min</option>\n                        <option value="300">5min</option>\n                      </select>\n                      <span>\n                        <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="margin-top: 7px; display: none;"></i>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.settings.open = false;"></a>\n                </div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'StackName\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'StackName\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'StackName\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Image\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Image\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Image\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'CPU\')">\n                  CPU reservation\n                  <i class="fa fa-sort-numeric-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'CPU\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-numeric-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'CPU\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Memory\')">\n                  \n                  <i class="fa fa-sort-numeric-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Memory\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-numeric-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Memory\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n            >\n              <td>\n                <a ui-sref="kubernetes.applications.application({ name: item.Name, namespace: item.ResourcePool })">{{ item.Name }}</a>\n                <span style="margin-left: 5px;" class="label label-primary image-tag" ng-if="$ctrl.isExternalApplication(item)">external</span>\n              </td>\n              <td>{{ item.StackName }}</td>\n              <td\n                >{{ item.Image }} <span ng-if="item.Containers.length > 1">+ {{ item.Containers.length - 1 }}</span></td\n              >\n              <td>{{ item.CPU | kubernetesApplicationCPUValue }}</td>\n              <td>{{ item.Memory | humansize }}</td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="5" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="5" class="text-center text-muted">No application available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(13);angular.module("portainer.docker").controller("KubernetesResourcePoolApplicationsDatatableController",["$scope","$controller","DatatableService",function(e,t,n){angular.extend(this,t("GenericDatatableController",{$scope:e})),this.isExternalApplication=function(e){return a.default.isExternalApplication(e)},this.$onInit=function(){this.setDefaults(),this.prepareTableFromDataset(),this.state.orderBy=this.orderBy;var e=n.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=n.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var a=n.getDataTableFilters(this.tableKey);null!==a&&(this.filters=a),this.filters&&this.filters.state&&(this.filters.state.open=!1);var r=n.getDataTableSettings(this.tableKey);null!==r&&(this.settings=r,this.settings.open=!1),this.onSettingsRepeaterChange()}}])},function(e,t,n){var a=n(1319);angular.module("portainer.kubernetes").component("kubernetesResourcePoolsDatatable",{templateUrl:a,controller:"KubernetesResourcePoolsDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",removeAction:"<",refreshCallback:"<"}})},function(e,t){var n="app/kubernetes/components/datatables/resource-pools-datatable/resourcePoolsDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n        <span class="small text-muted" style="float: left; margin-top: 5px;" ng-if="$ctrl.isAdmin && !$ctrl.settings.showSystem">\n          <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n          System resources are hidden, this can be changed in the table settings.\n        </span>\n        <div class="settings">\n          <span class="setting" ng-class="{ \'setting-active\': $ctrl.settings.open }" uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.settings.open">\n            <span uib-dropdown-toggle><i class="fa fa-cog" aria-hidden="true"></i> Table settings</span>\n            <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n              <div class="tableMenu">\n                <div class="menuHeader">\n                  \n                </div>\n                <div class="menuContent">\n                  <div>\n                    <div class="md-checkbox" ng-if="$ctrl.isAdmin">\n                      <input id="setting_show_system" type="checkbox" ng-model="$ctrl.settings.showSystem" ng-change="$ctrl.onSettingsShowSystemChange()" />\n                      <label for="setting_show_system">Show system resources</label>\n                    </div>\n                    <div class="md-checkbox">\n                      <input id="setting_auto_refresh" type="checkbox" ng-model="$ctrl.settings.repeater.autoRefresh" ng-change="$ctrl.onSettingsRepeaterChange()" />\n                      <label for="setting_auto_refresh"></label>\n                    </div>\n                    <div ng-if="$ctrl.settings.repeater.autoRefresh">\n                      <label for="settings_refresh_rate">\n                        \n                      </label>\n                      <select id="settings_refresh_rate" ng-model="$ctrl.settings.repeater.refreshRate" ng-change="$ctrl.onSettingsRepeaterChange()" class="small-select">\n                        <option value="10">10s</option>\n                        <option value="30">30s</option>\n                        <option value="60">1min</option>\n                        <option value="120">2min</option>\n                        <option value="300">5min</option>\n                      </select>\n                      <span>\n                        <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="margin-top: 7px; display: none;"></i>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.settings.open = false;"></a>\n                </div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div ng-if="$ctrl.isAdmin" class="actionBar">\n        <button type="button" class="btn btn-sm btn-danger" ng-disabled="$ctrl.state.selectedItemCount === 0" ng-click="$ctrl.removeAction($ctrl.state.selectedItems)">\n          <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>\n        </button>\n        <button type="button" class="btn btn-sm btn-primary" ui-sref="kubernetes.resourcePools.new">\n          <i class="fa fa-plus space-right" aria-hidden="true"></i>Add resource pool\n        </button>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <span ng-if="$ctrl.isAdmin" class="md-checkbox">\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.changeOrderBy(\'Namespace.Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Namespace.Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Namespace.Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Quota\')">\n                  Quota\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Quota\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Quota\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'CreationDate\')">\n                  \n                  <i class="fa fa-sort-numeric-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'CreationDate\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-numeric-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'CreationDate\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th ng-if="$ctrl.isAdmin">\n                \n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | filter:$ctrl.isDisplayed | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>\n                <span ng-if="$ctrl.isAdmin" class="md-checkbox">\n                  <input id="select_{{ $index }}" type="checkbox" ng-model="item.Checked" ng-click="$ctrl.selectItem(item, $event)" ng-disabled="$ctrl.disableRemove(item)" />\n                  <label for="select_{{ $index }}"></label>\n                </span>\n                <a ui-sref="kubernetes.resourcePools.resourcePool({ id: item.Namespace.Name })">{{ item.Namespace.Name }}</a>\n                <span style="margin-left: 5px;" class="label label-info image-tag" ng-if="$ctrl.isSystemNamespace(item)">system</span>\n              </td>\n              <td> <i class="fa {{ item.Quota ? \'fa-toggle-on\' : \'fa-toggle-off\' }}" aria-hidden="true" style="margin-right: 2px;"></i> {{ item.Quota ? \'Yes\' : \'No\' }} </td>\n              <td>{{ item.CreationDate | getisodate }} {{ item.Namespace.ResourcePoolOwner ? \'by \' + item.Namespace.ResourcePoolOwner : \'\' }}</td>\n              <td ng-if="$ctrl.isAdmin">\n                <a ng-if="$ctrl.canManageAccess(item)" ui-sref="kubernetes.resourcePools.resourcePool.access({id: item.Namespace.Name})">\n                  <i class="fa fa-users" aria-hidden="true"></i> \n                </a>\n                <span ng-if="!$ctrl.canManageAccess(item)">-</span>\n              </td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="4" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="4" class="text-center text-muted">No resource pool available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.docker").controller("KubernetesResourcePoolsDatatableController",["$scope","$controller","Authentication","KubernetesNamespaceHelper","DatatableService",function(e,t,n,a,r){angular.extend(this,t("GenericDatatableController",{$scope:e}));var i=this;this.settings=Object.assign(this.settings,{showSystem:!1}),this.onSettingsShowSystemChange=function(){r.setDataTableSettings(this.tableKey,this.settings)},this.canManageAccess=function(e){return"default"!==e.Namespace.Name&&!this.isSystemNamespace(e)},this.disableRemove=function(e){return a.isSystemNamespace(e.Namespace.Name)||"default"===e.Namespace.Name},this.isSystemNamespace=function(e){return a.isSystemNamespace(e.Namespace.Name)},this.isDisplayed=function(e){return!i.isSystemNamespace(e)||i.settings.showSystem&&i.isAdmin},this.allowSelection=function(e){return!this.disableRemove(e)},this.$onInit=function(){this.isAdmin=n.isAdmin(),this.setDefaults(),this.prepareTableFromDataset(),this.state.orderBy=this.orderBy;var e=r.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=r.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var a=r.getDataTableFilters(this.tableKey);null!==a&&(this.filters=a),this.filters&&this.filters.state&&(this.filters.state.open=!1);var i=r.getDataTableSettings(this.tableKey);null!==i&&(this.settings=i,this.settings.open=!1),this.onSettingsRepeaterChange()}}])},function(e,t,n){var a=n(1322);angular.module("portainer.kubernetes").component("kubernetesVolumesDatatable",{templateUrl:a,controller:"KubernetesVolumesDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",removeAction:"<",refreshCallback:"<"}})},function(e,t){var n="app/kubernetes/components/datatables/volumes-datatable/volumesDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n        <span class="small text-muted" style="float: left; margin-top: 5px;" ng-if="$ctrl.isAdmin && !$ctrl.settings.showSystem">\n          <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n          System resources are hidden, this can be changed in the table settings.\n        </span>\n        <div class="settings">\n          <span class="setting" ng-class="{ \'setting-active\': $ctrl.settings.open }" uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.settings.open">\n            <span uib-dropdown-toggle><i class="fa fa-cog" aria-hidden="true"></i> Table settings</span>\n            <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n              <div class="tableMenu">\n                <div class="menuHeader">\n                  \n                </div>\n                <div class="menuContent">\n                  <div>\n                    <div class="md-checkbox" ng-if="$ctrl.isAdmin">\n                      <input id="setting_show_system" type="checkbox" ng-model="$ctrl.settings.showSystem" ng-change="$ctrl.onSettingsShowSystemChange()" />\n                      <label for="setting_show_system">Show system resources</label>\n                    </div>\n                    <div class="md-checkbox">\n                      <input id="setting_auto_refresh" type="checkbox" ng-model="$ctrl.settings.repeater.autoRefresh" ng-change="$ctrl.onSettingsRepeaterChange()" />\n                      <label for="setting_auto_refresh"></label>\n                    </div>\n                    <div ng-if="$ctrl.settings.repeater.autoRefresh">\n                      <label for="settings_refresh_rate">\n                        \n                      </label>\n                      <select id="settings_refresh_rate" ng-model="$ctrl.settings.repeater.refreshRate" ng-change="$ctrl.onSettingsRepeaterChange()" class="small-select">\n                        <option value="10">10s</option>\n                        <option value="30">30s</option>\n                        <option value="60">1min</option>\n                        <option value="120">2min</option>\n                        <option value="300">5min</option>\n                      </select>\n                      <span>\n                        <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="margin-top: 7px; display: none;"></i>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.settings.open = false;"></a>\n                </div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div class="actionBar">\n        <button type="button" class="btn btn-sm btn-danger" ng-disabled="$ctrl.state.selectedItemCount === 0" ng-click="$ctrl.removeAction($ctrl.state.selectedItems)">\n          <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>\n        </button>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <span class="md-checkbox">\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.changeOrderBy(\'PersistentVolumeClaim.Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'PersistentVolumeClaim.Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'PersistentVolumeClaim.Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'ResourcePool.Namespace.Name\')">\n                  Resource pool\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'ResourcePool.Namespace.Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'ResourcePool.Namespace.Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'PersistentVolumeClaim.Applications[0].Name\')">\n                  Used by\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'PersistentVolumeClaim.Applications[0].Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'PersistentVolumeClaim.Applications[0].Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'PersistentVolumeClaim.StorageClass.Name\')">\n                  Storage\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'PersistentVolumeClaim.StorageClass.Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'PersistentVolumeClaim.StorageClass.Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'PersistentVolumeClaim.Storage\')">\n                  Size\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'PersistentVolumeClaim.Storage\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'PersistentVolumeClaim.Storage\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'PersistentVolumeClaim.CreationDate\')">\n                  \n                  <i class="fa fa-sort-numeric-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'PersistentVolumeClaim.CreationDate\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-numeric-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'PersistentVolumeClaim.CreationDate\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | filter:$ctrl.isDisplayed | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>\n                <span class="md-checkbox">\n                  <input id="select_{{ $index }}" type="checkbox" ng-model="item.Checked" ng-click="$ctrl.selectItem(item, $event)" ng-disabled="$ctrl.disableRemove(item)" />\n                  <label for="select_{{ $index }}"></label>\n                </span>\n                <a ui-sref="kubernetes.volumes.volume({ namespace: item.ResourcePool.Namespace.Name, name: item.PersistentVolumeClaim.Name })">{{\n                  item.PersistentVolumeClaim.\n                }}</a>\n                <span class="label label-info image-tag label-margins" ng-if="$ctrl.isSystemNamespace(item)">system</span>\n                <span class="label label-primary image-tag label-margins" ng-if="!$ctrl.isSystemNamespace(item) && $ctrl.isExternalVolume(item)">external</span>\n                <span class="label label-warning image-tag label-margins" ng-if="!$ctrl.isSystemNamespace(item) && !$ctrl.isUsed(item)">unused</span>\n              </td>\n              <td>\n                <a ui-sref="kubernetes.resourcePools.resourcePool({ id: item.ResourcePool.Namespace.Name })">{{ item.ResourcePool.Namespace.Name }}</a>\n              </td>\n              <td>\n                <a\n                  ng-if="item.Applications.length"\n                  ui-sref="kubernetes.applications.application({ name: item.Applications[0].Name, namespace: item.ResourcePool.Namespace.Name })"\n                  >{{ item.Applications[0].Name }}</a\n                >\n                <span ng-if="item.Applications.length > 1"> + {{ item.Applications.length - 1 }}</span>\n                <span ng-if="!item.Applications.length">-</span>\n              </td>\n              <td>\n                {{ item.PersistentVolumeClaim.StorageClass.Name }}\n              </td>\n              <td>\n                {{ item.PersistentVolumeClaim.Storage }}\n              </td>\n              <td>\n                {{ item.PersistentVolumeClaim.CreationDate | getisodate }}\n                {{ item.PersistentVolumeClaim.ApplicationOwner ? \'by \' + item.PersistentVolumeClaim.ApplicationOwner : \'\' }}\n              </td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="6" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="6" class="text-center text-muted">No volume available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(66);function s(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=function(){function e(t,n,a,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.$controller=n,this.Authentication=a,this.KubernetesNamespaceHelper=r,this.DatatableService=i,this.onInit=this.onInit.bind(this),this.allowSelection=this.allowSelection.bind(this),this.isDisplayed=this.isDisplayed.bind(this)}var t,n,a,l,c;return e.$inject=["$async","$controller","Authentication","KubernetesNamespaceHelper","DatatableService"],t=e,(n=[{key:"onSettingsShowSystemChange",value:function(){this.DatatableService.setDataTableSettings(this.tableKey,this.settings)}},{key:"disableRemove",value:function(e){return this.isSystemNamespace(e)||this.isUsed(e)}},{key:"isUsed",value:function(e){return i.default.isUsed(e)}},{key:"isSystemNamespace",value:function(e){return this.KubernetesNamespaceHelper.isSystemNamespace(e.ResourcePool.Namespace.Name)}},{key:"isDisplayed",value:function(e){return!this.isSystemNamespace(e)||this.settings.showSystem}},{key:"isExternalVolume",value:function(e){return i.default.isExternalVolume(e)}},{key:"allowSelection",value:function(e){return!this.disableRemove(e)}},{key:"onInit",value:(l=regeneratorRuntime.mark((function e(){var t,n,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setDefaults(),this.prepareTableFromDataset(),this.isAdmin=this.Authentication.isAdmin(),this.settings.showSystem=!1,this.state.orderBy=this.orderBy,null!==(t=this.DatatableService.getDataTableOrder(this.tableKey))&&(this.state.reverseOrder=t.reverse,this.state.orderBy=t.orderBy),null!==(n=this.DatatableService.getDataTableTextFilters(this.tableKey))&&(this.state.textFilter=n,this.onTextFilterChange()),null!==(a=this.DatatableService.getDataTableFilters(this.tableKey))&&(this.filters=a),this.filters&&this.filters.state&&(this.filters.state.open=!1),null!==(r=this.DatatableService.getDataTableSettings(this.tableKey))&&(this.settings=r,this.settings.open=!1),this.onSettingsRepeaterChange();case 15:case"end":return e.stop()}}),e,this)})),c=function(){var e=this,t=arguments;return new Promise((function(n,a){var r=l.apply(e,t);function i(e){s(r,n,a,i,o,"next",e)}function o(e){s(r,n,a,i,o,"throw",e)}i(void 0)}))},function(){return c.apply(this,arguments)})},{key:"$onInit",value:function(){var e=r.a.extend({},this.$controller("GenericDatatableController"),this);return r.a.extend(this,e),this.$async(this.onInit)}}])&&o(t.prototype,n),a&&o(t,a),e}();t.default=l,r.a.module("portainer.kubernetes").controller("KubernetesVolumesDatatableController",l)},function(e,t,n){var a=n(1325);angular.module("portainer.kubernetes").component("kubernetesConfigurationData",{templateUrl:a,controller:"KubernetesConfigurationDataController",bindings:{formValues:"=",isValid:"="}})},function(e,t){var n="app/kubernetes/components/kubernetes-configuration-data/kubernetesConfigurationData.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<ng-form name="kubernetesConfigurationDataCreationForm">\n  <div class="col-sm-12 form-section-title" style="margin-top: 10px;">\n    Data\n  </div>\n\n  <div class="form-group">\n    <div class="col-sm-12">\n      <p>\n        <a class="small interactive" ng-if="$ctrl.formValues.IsSimple" ng-click="$ctrl.formValues.IsSimple = false">\n          <i class="fa fa-list-ol space-right" aria-hidden="true"></i> \n        </a>\n        <a class="small interactive" ng-if="!$ctrl.formValues.IsSimple" ng-click="$ctrl.formValues.IsSimple = true">\n          <i class="fa fa-edit space-right" aria-hidden="true"></i> \n        </a>\n      </p>\n    </div>\n    <div class="col-sm-12 small text-muted" ng-if="$ctrl.formValues.IsSimple">\n      <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n      Switch to advanced mode to copy and paste multiple key/values\n    </div>\n    <div class="col-sm-12 small text-muted" ng-if="!$ctrl.formValues.IsSimple">\n      <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n      Generate a configuration entry per line, use YAML format\n    </div>\n  </div>\n\n  <div class="form-group" ng-if="$ctrl.formValues.IsSimple">\n    <div class="col-sm-12">\n      <button type="button" class="btn btn-sm btn-default" style="margin-left: 0;" ng-click="$ctrl.addEntry()">\n        <i class="fa fa-plus-circle" aria-hidden="true"></i> Create entry\n      </button>\n      <button type="button" class="btn btn-sm btn-default" ngf-select="$ctrl.addEntryFromFile($file)" style="margin-left: 0;">\n        <i class="fa fa-file-upload" aria-hidden="true"></i> Create key/value from file\n      </button>\n    </div>\n  </div>\n\n  <div ng-repeat="(index, entry) in $ctrl.formValues.Data" ng-if="$ctrl.formValues.IsSimple">\n    <div class="form-group">\n      <label for="configuration_data_key_{{ index }}" class="col-sm-1 control-label text-left">Key</label>\n      <div class="col-sm-11">\n        <input\n          type="text"\n          class="form-control"\n          id="configuration_data_key_{{ index }}"\n          name="configuration_data_key_{{ index }}"\n          ng-model="$ctrl.formValues.Data[index].Key"\n          required\n          ng-change="$ctrl.onChangeKey()"\n        />\n      </div>\n      <div\n        class="col-sm-11 small text-warning"\n        style="margin-top: 5px;"\n        ng-show="kubernetesConfigurationDataCreationForm[\'configuration_data_key_\' + index].$invalid || $ctrl.state.duplicateKeys[index] !== undefined"\n      >\n        <ng-messages for="kubernetesConfigurationDataCreationForm[\'configuration_data_key_\' + index].$error">\n          <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n        </ng-messages>\n        <p ng-if="$ctrl.state.duplicateKeys[index] !== undefined"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> This key is already defined.</p>\n      </div>\n    </div>\n\n    <div class="form-group" ng-if="$ctrl.formValues.IsSimple">\n      <label for="configuration_data_value_{{ index }}" class="col-sm-1 control-label text-left">Value</label>\n      <div class="col-sm-11">\n        <textarea\n          class="form-control"\n          rows="5"\n          id="configuration_data_value_{{ index }}"\n          name="configuration_data_value_{{ index }}"\n          ng-model="$ctrl.formValues.Data[index].Value"\n          required\n        ></textarea>\n      </div>\n      <div class="col-sm-11 small text-warning" style="margin-top: 5px;" ng-show="kubernetesConfigurationDataCreationForm[\'configuration_data_value_\' + index].$invalid">\n        <ng-messages for="kubernetesConfigurationDataCreationForm[\'configuration_data_value_\' + index].$error">\n          <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n        </ng-messages>\n      </div>\n    </div>\n\n    <div class="form-group" ng-if="$ctrl.formValues.IsSimple">\n      <div class="col-sm-1"></div>\n      <div class="col-sm-11">\n        <button type="button" class="btn btn-sm btn-danger" style="margin-left: 0;" ng-click="$ctrl.removeEntry(index)">\n          <i class="fa fa-trash-alt" aria-hidden="true"></i> Remove entry\n        </button>\n      </div>\n    </div>\n  </div>\n\n  <div class="form-group" ng-if="!$ctrl.formValues.IsSimple">\n    <input type="text" ng-model="$ctrl.formValues.DataYaml" required style="display: none;" />\n    <code-editor identifier="kubernetes-configuration-editor" value="$ctrl.formValues.DataYaml" read-only="false" yml="true" on-change="($ctrl.editorUpdate)"></code-editor>\n  </div>\n</ng-form>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(1),i=n.n(r),s=n(113),o=n(48);function l(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){l(i,a,r,s,o,"next",e)}function o(e){l(i,a,r,s,o,"throw",e)}s(void 0)}))}}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.editorUpdate=this.editorUpdate.bind(this),this.editorUpdateAsync=this.editorUpdateAsync.bind(this),this.onFileLoad=this.onFileLoad.bind(this),this.onFileLoadAsync=this.onFileLoadAsync.bind(this)}var t,n,r,i,l;return e.$inject=["$async"],t=e,(n=[{key:"onChangeKey",value:function(){this.state.duplicateKeys=o.default.getDuplicates(Object(a.a)(this.formValues.Data,(function(e){return e.Key}))),this.isValid=0===Object.keys(this.state.duplicateKeys).length}},{key:"addEntry",value:function(){this.formValues.Data.push(new s.KubernetesConfigurationFormValuesDataEntry)}},{key:"removeEntry",value:function(e){this.formValues.Data.splice(e,1),this.onChangeKey()}},{key:"editorUpdateAsync",value:(l=c(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.formValues.DataYaml=t.getValue();case 1:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"editorUpdate",value:function(e){return this.$async(this.editorUpdateAsync,e)}},{key:"onFileLoadAsync",value:(i=c(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=new s.KubernetesConfigurationFormValuesDataEntry).Key=t.target.fileName,n.Value=t.target.result,this.formValues.Data.push(n),this.onChangeKey();case 5:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"onFileLoad",value:function(e){return this.$async(this.onFileLoadAsync,e)}},{key:"addEntryFromFile",value:function(e){if(e){var t=new FileReader;t.fileName=e.name,t.onload=this.onFileLoad,t.readAsText(e)}}},{key:"$onInit",value:function(){this.state={duplicateKeys:{}}}}])&&d(t.prototype,n),r&&d(t,r),e}();t.default=u,i.a.module("portainer.kubernetes").controller("KubernetesConfigurationDataController",u)},function(e,t,n){var a=n(1328);angular.module("portainer.kubernetes").component("kubernetesSidebarContent",{templateUrl:a,bindings:{adminAccess:"<",endpointId:"<",currentState:"<"}})},function(e,t){var n="app/kubernetes/components/kubernetes-sidebar-content/kubernetesSidebarContent.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<li class="sidebar-list">\n  <a ui-sref="kubernetes.dashboard({endpointId: $ctrl.endpointId})" ui-sref-active="active"> <span class="menu-icon fa fa-tachometer-alt fa-fw"></span></a>\n</li>\n<li class="sidebar-list">\n  <a ui-sref="kubernetes.resourcePools({endpointId: $ctrl.endpointId})" ui-sref-active="active">Resource pools <span class="menu-icon fa fa-layer-group fa-fw"></span></a>\n</li>\n<li class="sidebar-list">\n  <a ui-sref="kubernetes.applications({endpointId: $ctrl.endpointId})" ui-sref-active="active">Applications <span class="menu-icon fa fa-laptop-code fa-fw"></span></a>\n</li>\n<li class="sidebar-list">\n  <a ui-sref="kubernetes.configurations({endpointId: $ctrl.endpointId})" ui-sref-active="active"> <span class="menu-icon fa fa-file-code fa-fw"></span></a>\n</li>\n<li class="sidebar-list">\n  <a ui-sref="kubernetes.volumes({endpointId: $ctrl.endpointId})" ui-sref-active="active"> <span class="menu-icon fa fa-database fa-fw"></span></a>\n</li>\n<li class="sidebar-list">\n  <a ui-sref="kubernetes.cluster({endpointId: $ctrl.endpointId})" ui-sref-active="active">Cluster <span class="menu-icon fa fa-server fa-fw"></span></a>\n  <div class="sidebar-sublist" ng-if="$ctrl.adminAccess && ($ctrl.currentState === \'kubernetes.cluster\' || $ctrl.currentState === \'portainer.endpoints.endpoint.kubernetesConfig\')">\n    <a ui-sref="portainer.endpoints.endpoint.kubernetesConfig({id: $ctrl.endpointId})" ui-sref-active="active">Setup</a>\n  </div>\n</li>\n')}]),e.exports=n},function(e,t,n){var a=n(1330);angular.module("portainer.kubernetes").component("kubernetesResourceReservation",{templateUrl:a,controller:"KubernetesResourceReservationController",bindings:{description:"@",cpu:"<",cpuLimit:"<",memory:"<",memoryLimit:"<"}})},function(e,t){var n="app/kubernetes/components/resource-reservation/resourceReservation.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="row">\n  <div class="col-sm-12 form-section-title">\n    Resource reservation\n  </div>\n  <div class="form-group">\n    <span class="col-sm-12 text-muted small">\n      <p>\n        {{ $ctrl.description }}\n      </p>\n    </span>\n  </div>\n  <div class="form-group" ng-if="$ctrl.memoryLimit !== 0">\n    <label for="memory-usage" class="col-sm-3 col-lg-2 control-label text-left">\n      \n    </label>\n    <div class="col-sm-9" style="margin-top: 4px;">\n      <uib-progressbar animate="false" value="$ctrl.memoryUsage" type="{{ $ctrl.memoryUsage | kubernetesUsageLevelInfo }}">\n        <b style="white-space: nowrap;"> {{ $ctrl.memory }} / {{ $ctrl.memoryLimit }} MB - {{ $ctrl.memoryUsage }}% </b>\n      </uib-progressbar>\n    </div>\n  </div>\n  <div class="form-group" ng-if="$ctrl.cpuLimit !== 0">\n    <label for="cpu-usage" class="col-sm-3 col-lg-2 control-label text-left">\n      CPU reservation\n    </label>\n    <div class="col-sm-9" style="margin-top: 4px;">\n      <uib-progressbar animate="false" value="$ctrl.cpuUsage" type="{{ $ctrl.cpuUsage | kubernetesUsageLevelInfo }}">\n        <b style="white-space: nowrap;"> {{ $ctrl.cpu | kubernetesApplicationCPUValue }} / {{ $ctrl.cpuLimit }} - {{ $ctrl.cpuUsage }}% </b>\n      </uib-progressbar>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a);function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"usageValues",value:function(){this.cpuLimit&&(this.cpuUsage=Math.round(this.cpu/this.cpuLimit*100)),this.memoryLimit&&(this.memoryUsage=Math.round(this.memory/this.memoryLimit*100))}},{key:"$onInit",value:function(){this.usageValues()}},{key:"$onChanges",value:function(){this.usageValues()}}])&&i(t.prototype,n),a&&i(t,a),e}();t.default=s,r.a.module("portainer.kubernetes").controller("KubernetesResourceReservationController",s)},function(e,t,n){var a=n(1333);angular.module("portainer.kubernetes").component("kubernetesViewHeader",{templateUrl:a,transclude:!0,bindings:{viewReady:"<",title:"@",state:"@"}})},function(e,t){var n="app/kubernetes/components/view-header/viewHeader.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header ng-if="$ctrl.viewReady">\n  <rd-header-title title-text="{{ $ctrl.title }}">\n    <a data-toggle="tooltip" title="" ui-sref="{{ $ctrl.state }}" ui-sref-opts="{reload: true}" ng-if="$ctrl.viewReady">\n      <i class="fa fa-sm fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content>\n    <ng-transclude></ng-transclude>\n  </rd-header-content>\n</rd-header>\n')}]),e.exports=n},function(e,t,n){var a=n(1335);angular.module("portainer.kubernetes").component("kubernetesViewLoading",{templateUrl:a,bindings:{viewReady:"<"}})},function(e,t){var n="app/kubernetes/components/view-loading/viewLoading.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="loading-view-area" ng-if="!$ctrl.viewReady">\n  <div class="sk-fold sk-center">\n    <div class="sk-fold-cube"></div>\n    <div class="sk-fold-cube"></div>\n    <div class="sk-fold-cube"></div>\n    <div class="sk-fold-cube"></div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(1337);angular.module("portainer.kubernetes").component("kubernetesYamlInspector",{templateUrl:a,controller:"KubernetesYamlInspectorController",bindings:{key:"@",data:"<"}})},function(e,t){var n="app/kubernetes/components/yaml-inspector/yamlInspector.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div>\n  <code-editor identifier="application-details-yaml" read-only="true" value="$ctrl.data"></code-editor>\n  <div style="margin: 15px;">\n    <span class="btn btn-primary btn-sm" ng-click="$ctrl.copyYAML()"><i class="fa fa-copy space-right" aria-hidden="true"></i>Copy to clipboard</span>\n    <span id="copyNotificationYAML" style="margin-left: 7px; display: none; color: #23ae89;" class="small"> <i class="fa fa-check" aria-hidden="true"></i> copied </span>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t),function(e){var a=n(1),r=n.n(a);function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.clipboard=e}var n,a,r;return t.$inject=["clipboard"],n=t,(a=[{key:"copyYAML",value:function(){this.clipboard.copyText(this.data),e("#copyNotificationYAML").show().fadeOut(2500)}}])&&i(n.prototype,a),r&&i(n,r),t}();t.default=s,r.a.module("portainer.kubernetes").controller("KubernetesYamlInspectorController",s)}.call(this,n(45))},,,,,function(e,t){angular.module("portainer.kubernetes").factory("KubernetesEndpoints",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){"use strict";return function(a){return e(t+"/:endpointId/kubernetes/api/v1"+(a?"/namespaces/:namespace":"")+"/endpoints/:id",{endpointId:n.endpointID,namespace:a},{get:{method:"GET",ignoreLoadingBar:!0}})}}])},function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(1),i=n.n(r),s=n(8),o=n(431);function l(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.KubernetesEndpoints=n,this.getAllAsync=this.getAllAsync.bind(this)}var t,n,r,i,d;return e.$inject=["$async","KubernetesEndpoints"],t=e,(n=[{key:"getAllAsync",value:(i=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesEndpoints(t).get().$promise;case 3:return n=e.sent,e.abrupt("return",Object(a.a)(n.items,(function(e){return o.default.apiToEndpoint(e)})));case 7:throw e.prev=7,e.t0=e.catch(0),new s.default("Unable to retrieve endpoints",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})),d=function(){var e=this,t=arguments;return new Promise((function(n,a){var r=i.apply(e,t);function s(e){l(r,n,a,s,o,"next",e)}function o(e){l(r,n,a,s,o,"throw",e)}s(void 0)}))},function(e){return d.apply(this,arguments)})},{key:"get",value:function(e){return this.$async(this.getAllAsync,e)}}])&&c(t.prototype,n),r&&c(t,r),e}();t.default=d,i.a.module("portainer.kubernetes").service("KubernetesEndpointService",d)},function(e,t,n){"use strict";n.r(t);var a=n(338),r=n(34),i=n(3),s=n(28),o=n(31);angular.module("portainer.kubernetes").filter("kubernetesApplicationServiceTypeIcon",(function(){return function(e){switch(Object(r.a)(e)){case"loadbalancer":return"fa-project-diagram";case"clusterip":return"fa-list-alt";case"nodeport":return"fa-list"}}})).filter("kubernetesApplicationServiceTypeText",(function(){return function(e){switch(Object(r.a)(e)){case"loadbalancer":return"Load balancer";case"clusterip":return"Internal";case"nodeport":return"Cluster"}}})).filter("kubernetesApplicationPortsTableHeaderText",(function(){return function(e){switch(e){case s.KubernetesServiceTypes.LOAD_BALANCER:return"Load balancer";case s.KubernetesServiceTypes.CLUSTER_IP:return"Application";case s.KubernetesServiceTypes.NODE_PORT:return"Cluster node"}}})).filter("kubernetesApplicationTypeText",(function(){return function(e){switch(e){case i.KubernetesApplicationTypes.DEPLOYMENT:return i.KubernetesApplicationTypeStrings.DEPLOYMENT;case i.KubernetesApplicationTypes.DAEMONSET:return i.KubernetesApplicationTypeStrings.DAEMONSET;case i.KubernetesApplicationTypes.STATEFULSET:return i.KubernetesApplicationTypeStrings.STATEFULSET;case i.KubernetesApplicationTypes.POD:return i.KubernetesApplicationTypeStrings.POD;default:return"-"}}})).filter("kubernetesApplicationCPUValue",(function(){return function(e){return Object(a.a)(e,2)}})).filter("kubernetesApplicationDataAccessPolicyIcon",(function(){return function(e){switch(e){case i.KubernetesApplicationDataAccessPolicies.ISOLATED:return"fa-cubes";case i.KubernetesApplicationDataAccessPolicies.SHARED:return"fa-cube"}}})).filter("kubernetesApplicationDataAccessPolicyText",(function(){return function(e){switch(e){case i.KubernetesApplicationDataAccessPolicies.ISOLATED:return"Isolated";case i.KubernetesApplicationDataAccessPolicies.SHARED:return"Shared"}}})).filter("kubernetesApplicationDataAccessPolicyTooltip",(function(){return function(e){switch(e){case i.KubernetesApplicationDataAccessPolicies.ISOLATED:return"All the instances of this application are using their own data.";case i.KubernetesApplicationDataAccessPolicies.SHARED:return"All the instances of this application are sharing the same data."}}})).filter("kubernetesApplicationConstraintNodeAffinityValue",(function(){return function(e,t){return t===o.KubernetesPodNodeAffinityNodeSelectorRequirementOperators.IN||t===o.KubernetesPodNodeAffinityNodeSelectorRequirementOperators.NOT_IN?e:t===o.KubernetesPodNodeAffinityNodeSelectorRequirementOperators.EXISTS||t===o.KubernetesPodNodeAffinityNodeSelectorRequirementOperators.DOES_NOT_EXIST?"":t===o.KubernetesPodNodeAffinityNodeSelectorRequirementOperators.GREATER_THAN||t===o.KubernetesPodNodeAffinityNodeSelectorRequirementOperators.LOWER_THAN?e[0]:""}})).filter("kubernetesNodeLabelHumanReadbleText",(function(){return function(e){return{"kubernetes.io/os":"Operating system","kubernetes.io/arch":"Architecture","kubernetes.io/hostname":"Node"}[e]||e}}))},function(e,t,n){"use strict";n.r(t);var a=n(26);angular.module("portainer.kubernetes").filter("kubernetesConfigurationTypeText",(function(){return function(e){switch(e){case a.KubernetesConfigurationTypes.SECRET:return"Sensitive";case a.KubernetesConfigurationTypes.CONFIGMAP:return"Non-sensitive"}}}))},function(e,t,n){"use strict";n.r(t);var a=n(34);angular.module("portainer.kubernetes").filter("kubernetesEventTypeColor",(function(){return function(e){switch(Object(a.a)(e)){case"normal":return"info";case"warning":return"warning";default:return"danger"}}}))},function(e,t){angular.module("portainer.kubernetes").filter("kubernetesUsageLevelInfo",(function(){return function(e){return e>=80?"danger":e>50&&e<80?"warning":"success"}}))},function(e,t,n){"use strict";n.r(t);var a=n(10),r=n(1),i=n.n(r);function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.KUBERNETES_SYSTEM_NAMESPACES=t}var t,n,r;return e.$inject=["KUBERNETES_SYSTEM_NAMESPACES"],t=e,(n=[{key:"isSystemNamespace",value:function(e){return Object(a.a)(this.KUBERNETES_SYSTEM_NAMESPACES,e)}}])&&s(t.prototype,n),r&&s(t,r),e}();t.default=o,i.a.module("portainer.app").service("KubernetesNamespaceHelper",o)},function(e,t,n){"use strict";n.r(t);var a=n(21);angular.module("portainer.kubernetes").factory("KubernetesHorizontalPodAutoScalers",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){return function(r){return e(t+"/:endpointId/kubernetes/apis/autoscaling/v1"+(r?"/namespaces/:namespace":"")+"/horizontalpodautoscalers/:id/:action",{endpointId:n.endpointID,namespace:r},{get:{method:"GET",ignoreLoadingBar:!0},getYaml:{method:"GET",headers:{Accept:"application/yaml"},transformResponse:a.rawResponse,ignoreLoadingBar:!0},create:{method:"POST"},update:{method:"PUT"},patch:{method:"PATCH",headers:{"Content-Type":"application/json-patch+json"}},rollback:{method:"PATCH",headers:{"Content-Type":"application/json-patch+json"}},delete:{method:"DELETE"}})}}])},function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(1),i=n.n(r),s=n(8),o=n(11),l=n(119);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function u(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){u(i,a,r,s,o,"next",e)}function o(e){u(i,a,r,s,o,"throw",e)}s(void 0)}))}}function m(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var g=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.KubernetesHorizontalPodAutoScalers=n,this.getAsync=this.getAsync.bind(this),this.getAllAsync=this.getAllAsync.bind(this),this.createAsync=this.createAsync.bind(this),this.patchAsync=this.patchAsync.bind(this),this.deleteAsync=this.deleteAsync.bind(this)}var t,n,r,i,d,u,g,f;return e.$inject=["$async","KubernetesHorizontalPodAutoScalers"],t=e,(n=[{key:"getAsync",value:(f=p(regeneratorRuntime.mark((function e(t,n){var a,r,i,d,u,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=new o.KubernetesCommonParams).id=n,e.next=5,Promise.all([this.KubernetesHorizontalPodAutoScalers(t).get(a).$promise,this.KubernetesHorizontalPodAutoScalers(t).getYaml(a).$promise]);case 5:return r=e.sent,i=c(r,2),d=i[0],u=i[1],p=l.KubernetesHorizontalPodAutoScalerConverter.apiToModel(d,u),e.abrupt("return",p);case 13:throw e.prev=13,e.t0=e.catch(0),new s.default("Unable to retrieve HorizontalPodAutoScaler",e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(e,t){return f.apply(this,arguments)})},{key:"getAllAsync",value:(g=p(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesHorizontalPodAutoScalers(t).get().$promise;case 3:return n=e.sent,r=Object(a.a)(n.items,(function(e){return l.KubernetesHorizontalPodAutoScalerConverter.apiToModel(e)})),e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),new s.default("Unable to retrieve HorizontalPodAutoScalers",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e){return g.apply(this,arguments)})},{key:"get",value:function(e,t){return t?this.$async(this.getAsync,e,t):this.$async(this.getAllAsync,e)}},{key:"createAsync",value:(u=p(regeneratorRuntime.mark((function e(t){var n,a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={},a=l.KubernetesHorizontalPodAutoScalerConverter.createPayload(t),r=a.metadata.namespace,e.next=6,this.KubernetesHorizontalPodAutoScalers(r).create(n,a).$promise;case 6:return i=e.sent,e.abrupt("return",i);case 10:throw e.prev=10,e.t0=e.catch(0),new s.default("Unable to create horizontalPodAutoScaler",e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e){return u.apply(this,arguments)})},{key:"create",value:function(e){return this.$async(this.createAsync,e)}},{key:"patchAsync",value:(d=p(regeneratorRuntime.mark((function e(t,n){var a,r,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(a=new o.KubernetesCommonParams).id=n.Name,r=n.Namespace,(i=l.KubernetesHorizontalPodAutoScalerConverter.patchPayload(t,n)).length){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.KubernetesHorizontalPodAutoScalers(r).patch(a,i).$promise;case 9:return c=e.sent,e.abrupt("return",c);case 13:throw e.prev=13,e.t0=e.catch(0),new s.default("Unable to patch horizontalPodAutoScaler",e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(e,t){return d.apply(this,arguments)})},{key:"patch",value:function(e,t){return this.$async(this.patchAsync,e,t)}},{key:"deleteAsync",value:(i=p(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new o.KubernetesCommonParams).id=t.Name,a=t.Namespace,e.next=6,this.KubernetesHorizontalPodAutoScalers(a).delete(n).$promise;case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),new s.default(" horizontalPodAutoScaler",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e){return i.apply(this,arguments)})},{key:"delete",value:function(e){return this.$async(this.deleteAsync,e)}}])&&m(t.prototype,n),r&&m(t,r),e}();t.default=g,i.a.module("portainer.kubernetes").service("KubernetesHorizontalPodAutoScalerService",g)},function(e,t,n){"use strict";n.r(t);var a=n(21);function r(e,t,n){return function(r){var i="".concat(t,"/:endpointId/kubernetes/apis/networking.k8s.io/v1beta1").concat(r?"/namespaces/:namespace":"","/ingresses/:id/:action");return e(i,{endpointId:n.endpointID,namespace:r},{get:{method:"GET",ignoreLoadingBar:!0},getYaml:{method:"GET",headers:{Accept:"application/yaml"},transformResponse:a.rawResponse,ignoreLoadingBar:!0},create:{method:"POST"},update:{method:"PUT"},patch:{method:"PATCH",headers:{"Content-Type":"application/json-patch+json"}},rollback:{method:"PATCH",headers:{"Content-Type":"application/json-patch+json"}},delete:{method:"DELETE"}})}}r.$inject=["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider"],angular.module("portainer.kubernetes").factory("KubernetesIngresses",r)},function(e,t,n){"use strict";n.r(t);var a=n(23),r=n(19),i=n(1),s=n.n(i),o=n(8),l=n(11),c=n(54);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function p(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){p(i,a,r,s,o,"next",e)}function o(e){p(i,a,r,s,o,"throw",e)}s(void 0)}))}}function g(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var f=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.KubernetesIngresses=n,this.getAsync=this.getAsync.bind(this),this.getAllAsync=this.getAllAsync.bind(this),this.createAsync=this.createAsync.bind(this),this.patchAsync=this.patchAsync.bind(this),this.deleteAsync=this.deleteAsync.bind(this)}var t,n,i,s,u,p,f,h;return e.$inject=["$async","KubernetesIngresses"],t=e,(n=[{key:"getAsync",value:(h=m(regeneratorRuntime.mark((function e(t,n){var a,r,i,s,u,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=new l.KubernetesCommonParams).id=n,e.next=5,Promise.all([this.KubernetesIngresses(t).get(a).$promise,this.KubernetesIngresses(t).getYaml(a).$promise]);case 5:return r=e.sent,i=d(r,2),s=i[0],u=i[1],p={Raw:c.KubernetesIngressConverter.apiToModel(s),Yaml:u.data},e.abrupt("return",p);case 13:throw e.prev=13,e.t0=e.catch(0),new o.default("Unable to retrieve Ingress",e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(e,t){return h.apply(this,arguments)})},{key:"getAllAsync",value:(f=m(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesIngresses(t).get().$promise;case 3:return n=e.sent,i=Object(r.a)(n.items,(function(e,t){return Object(a.a)(e,c.KubernetesIngressConverter.apiToModel(t))}),[]),e.abrupt("return",i);case 8:throw e.prev=8,e.t0=e.catch(0),new o.default("Unable to retrieve Ingresses",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e){return f.apply(this,arguments)})},{key:"get",value:function(e,t){return t?this.$async(this.getAsync,e,t):this.$async(this.getAllAsync,e)}},{key:"createAsync",value:(p=m(regeneratorRuntime.mark((function e(t){var n,a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={},a=c.KubernetesIngressConverter.createPayload(t),r=a.metadata.namespace,e.next=6,this.KubernetesIngresses(r).create(n,a).$promise;case 6:return i=e.sent,e.abrupt("return",i);case 10:throw e.prev=10,e.t0=e.catch(0),new o.default("Unable to create ingress",e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e){return p.apply(this,arguments)})},{key:"create",value:function(e){return this.$async(this.createAsync,e)}},{key:"patchAsync",value:(u=m(regeneratorRuntime.mark((function e(t,n){var a,r,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(a=new l.KubernetesCommonParams).id=n.Name,r=n.Namespace,(i=c.KubernetesIngressConverter.patchPayload(t,n)).length){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.KubernetesIngresses(r).patch(a,i).$promise;case 9:return s=e.sent,e.abrupt("return",s);case 13:throw e.prev=13,e.t0=e.catch(0),new o.default("Unable to patch ingress",e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(e,t){return u.apply(this,arguments)})},{key:"patch",value:function(e,t){return this.$async(this.patchAsync,e,t)}},{key:"deleteAsync",value:(s=m(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new l.KubernetesCommonParams).id=t.IngressClass.Name,a=t.Namespace,e.next=6,this.KubernetesIngresses(a).delete(n).$promise;case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),new o.default("Unable to delete ingress",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e){return s.apply(this,arguments)})},{key:"delete",value:function(e){return this.$async(this.deleteAsync,e)}}])&&g(t.prototype,n),i&&g(t,i),e}();t.default=f,s.a.module("portainer.kubernetes").service("KubernetesIngressService",f)},function(e,t,n){"use strict";n.r(t);var a=n(34);angular.module("portainer.kubernetes").filter("kubernetesNodeStatusColor",(function(){return function(e){switch(Object(a.a)(e)){case"ready":return"success";case"warning":return"warning";default:return"danger"}}})).filter("kubernetesNodeConditionsMessage",(function(){return function(e){return e.MemoryPressure?"Node memory is running low":e.PIDPressure?"Too many processes running on the node":e.DiskPressure?"Node disk capacity is running low":e.NetworkUnavailable?"Incorrect node network configuration":void 0}}))},function(e,t,n){"use strict";n.r(t);var a=n(21);angular.module("portainer.kubernetes").factory("KubernetesNodes",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){return function(){return e(t+"/:endpointId/kubernetes/api/v1/nodes/:id/:action",{endpointId:n.endpointID},{get:{method:"GET",ignoreLoadingBar:!0},getYaml:{method:"GET",headers:{Accept:"application/yaml"},transformResponse:a.rawResponse,ignoreLoadingBar:!0},create:{method:"POST"},update:{method:"PUT"},patch:{method:"PATCH",headers:{"Content-Type":"application/json-patch+json"}},delete:{method:"DELETE"}})}}])},function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(1),i=n.n(r),s=n(8),o=n(100),l=n(11);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function u(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){u(i,a,r,s,o,"next",e)}function o(e){u(i,a,r,s,o,"throw",e)}s(void 0)}))}}function m(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var g=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.KubernetesNodes=n,this.getAsync=this.getAsync.bind(this),this.getAllAsync=this.getAllAsync.bind(this),this.patchAsync=this.patchAsync.bind(this)}var t,n,r,i,d,u;return e.$inject=["$async","KubernetesNodes"],t=e,(n=[{key:"getAsync",value:(u=p(regeneratorRuntime.mark((function e(t){var n,a,r,i,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new l.KubernetesCommonParams).id=t,e.next=5,Promise.all([this.KubernetesNodes().get(n).$promise,this.KubernetesNodes().getYaml(n).$promise]);case 5:return a=e.sent,r=c(a,2),i=r[0],d=r[1],e.abrupt("return",o.default.apiToNodeDetails(i,d));case 12:throw e.prev=12,e.t0=e.catch(0),new s.default("Unable to retrieve node details",e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])}))),function(e){return u.apply(this,arguments)})},{key:"getAllAsync",value:(d=p(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesNodes().get().$promise;case 3:return t=e.sent,e.abrupt("return",Object(a.a)(t.items,(function(e){return o.default.apiToNode(e)})));case 7:throw e.prev=7,e.t0=e.catch(0),{msg:"Unable to retrieve nodes",err:e.t0};case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return d.apply(this,arguments)})},{key:"get",value:function(e){return e?this.$async(this.getAsync,e):this.$async(this.getAllAsync)}},{key:"patchAsync",value:(i=p(regeneratorRuntime.mark((function e(t,n){var a,r,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=new l.KubernetesCommonParams).id=t.Name,r=o.default.formValuesToNode(t,n),i=o.default.patchPayload(t,r),e.next=7,this.KubernetesNodes().patch(a,i).$promise;case 7:return s=e.sent,e.abrupt("return",s);case 11:throw e.prev=11,e.t0=e.catch(0),{msg:"Unable to patch node",err:e.t0};case 14:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(e,t){return i.apply(this,arguments)})},{key:"patch",value:function(e,t){return this.$async(this.patchAsync,e,t)}}])&&m(t.prototype,n),r&&m(t,r),e}();t.default=g,i.a.module("portainer.kubernetes").service("KubernetesNodeService",g)},function(e,t,n){"use strict";n.r(t);var a=n(34);angular.module("portainer.kubernetes").filter("kubernetesPodStatusColor",(function(){return function(e){switch(Object(a.a)(e)){case"running":return"success";case"waiting":return"warning";case"terminated":return"info";default:return"danger"}}})).filter("kubernetesPodConditionStatusBadge",(function(){return function(e,t){switch(t){case"Unschedulable":switch(e){case"True":return"fa-exclamation-triangle red-icon";case"False":return"fa-check green-icon";case"Unknown":return"fa-exclamation-circle orange-icon"}break;case"PodScheduled":case"Ready":case"Initialized":case"ContainersReady":switch(e){case"True":return"fa-check green-icon";case"False":return"fa-exclamation-triangle red-icon";case"Unknown":return"fa-exclamation-circle orange-icon"}break;default:return"fa-question-circle red-icon"}}})).filter("kubernetesPodConditionStatusText",(function(){return function(e,t){switch(t){case"Unschedulable":switch(e){case"True":return"Alert";case"False":return"OK";case"Unknown":return"Warning"}break;case"PodScheduled":case"Ready":case"Initialized":case"ContainersReady":switch(e){case"True":return"Ok";case"False":return"Alert";case"Unknown":return"Warning"}break;default:return"Unknown"}}}))},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(8),s=n(11);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function c(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){c(i,a,r,s,o,"next",e)}function o(e){c(i,a,r,s,o,"throw",e)}s(void 0)}))}}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var p=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.KubernetesPods=n,this.getAsync=this.getAsync.bind(this),this.getAllAsync=this.getAllAsync.bind(this),this.logsAsync=this.logsAsync.bind(this),this.deleteAsync=this.deleteAsync.bind(this)}var t,n,a,r,l,c,p;return e.$inject=["$async","KubernetesPods"],t=e,(n=[{key:"getAsync",value:(p=d(regeneratorRuntime.mark((function e(t,n){var a,r,l,c,d,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=new s.KubernetesCommonParams).id=n,e.next=5,Promise.all([this.KubernetesPods(t).get(a).$promise,this.KubernetesPods(t).getYaml(a).$promise]);case 5:return r=e.sent,l=o(r,2),c=l[0],d=l[1],u={Raw:c,Yaml:d.data},e.abrupt("return",u);case 13:throw e.prev=13,e.t0=e.catch(0),new i.default("Unable to retrieve pod",e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(e,t){return p.apply(this,arguments)})},{key:"getAllAsync",value:(c=d(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesPods(t).get().$promise;case 3:return n=e.sent,e.abrupt("return",n.items);case 7:throw e.prev=7,e.t0=e.catch(0),new i.default("Unable to retrieve pods",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return c.apply(this,arguments)})},{key:"get",value:function(e,t){return t?this.$async(this.getAsync,e,t):this.$async(this.getAllAsync,e)}},{key:"logsAsync",value:(l=d(regeneratorRuntime.mark((function e(t,n,a){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(r=new s.KubernetesCommonParams).id=n,a&&(r.container=a),e.next=6,this.KubernetesPods(t).logs(r).$promise;case 6:return o=e.sent,e.abrupt("return",0===o.logs.length?[]:o.logs.split("\n"));case 10:throw e.prev=10,e.t0=e.catch(0),new i.default("Unable to retrieve pod logs",e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e,t,n){return l.apply(this,arguments)})},{key:"logs",value:function(e,t,n){return this.$async(this.logsAsync,e,t,n)}},{key:"deleteAsync",value:(r=d(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new s.KubernetesCommonParams).id=t.Name,a=t.Namespace,e.next=6,this.KubernetesPods(a).delete(n).$promise;case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),new i.default(" pod",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e){return r.apply(this,arguments)})},{key:"delete",value:function(e){return this.$async(this.deleteAsync,e)}}])&&u(t.prototype,n),a&&u(t,a),e}();t.default=p,r.a.module("portainer.kubernetes").service("KubernetesPodService",p)},function(e,t,n){"use strict";n.r(t);var a=n(21);angular.module("portainer.kubernetes").factory("KubernetesConfigMaps",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){return function(r){return e(t+"/:endpointId/kubernetes/api/v1"+(r?"/namespaces/:namespace":"")+"/configmaps/:id/:action",{endpointId:n.endpointID,namespace:r},{get:{method:"GET",ignoreLoadingBar:!0},getYaml:{method:"GET",headers:{Accept:"application/yaml"},transformResponse:a.rawResponse,ignoreLoadingBar:!0},create:{method:"POST"},update:{method:"PUT"},delete:{method:"DELETE"}})}}])},function(e,t,n){"use strict";n.r(t);var a=n(21);angular.module("portainer.kubernetes").factory("KubernetesControllerRevisions",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){return function(r){return e(t+"/:endpointId/kubernetes/apis/apps/v1"+(r?"/namespaces/:namespace":"")+"/controllerrevisions/:id/:action",{endpointId:n.endpointID,namespace:r},{get:{method:"GET",ignoreLoadingBar:!0},getYaml:{method:"GET",headers:{Accept:"application/yaml"},transformResponse:a.rawResponse,ignoreLoadingBar:!0},create:{method:"POST"},update:{method:"PUT"},patch:{method:"PATCH",headers:{"Content-Type":"application/json-patch+json"}},delete:{method:"DELETE"}})}}])},function(e,t,n){"use strict";n.r(t);var a=n(21);angular.module("portainer.kubernetes").factory("KubernetesDaemonSets",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){return function(r){return e(t+"/:endpointId/kubernetes/apis/apps/v1"+(r?"/namespaces/:namespace":"")+"/daemonsets/:id/:action",{endpointId:n.endpointID,namespace:r},{get:{method:"GET",ignoreLoadingBar:!0},getYaml:{method:"GET",headers:{Accept:"application/yaml"},transformResponse:a.rawResponse,ignoreLoadingBar:!0},create:{method:"POST"},update:{method:"PUT"},patch:{method:"PATCH",headers:{"Content-Type":"application/json-patch+json"}},rollback:{method:"PATCH",headers:{"Content-Type":"application/strategic-merge-patch+json"}},delete:{method:"DELETE"}})}}])},function(e,t,n){"use strict";n.r(t);var a=n(21);angular.module("portainer.kubernetes").factory("KubernetesDeployments",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){return function(r){return e(t+"/:endpointId/kubernetes/apis/apps/v1"+(r?"/namespaces/:namespace":"")+"/deployments/:id/:action",{endpointId:n.endpointID,namespace:r},{get:{method:"GET",ignoreLoadingBar:!0},getYaml:{method:"GET",headers:{Accept:"application/yaml"},transformResponse:a.rawResponse,ignoreLoadingBar:!0},create:{method:"POST"},update:{method:"PUT"},patch:{method:"PATCH",headers:{"Content-Type":"application/json-patch+json"}},rollback:{method:"PATCH",headers:{"Content-Type":"application/json-patch+json"}},delete:{method:"DELETE"}})}}])},function(e,t){angular.module("portainer.kubernetes").factory("KubernetesEndpoints",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){"use strict";return function(a){return e(t+"/:endpointId/kubernetes/api/v1"+(a?"/namespaces/:namespace":"")+"/endpoints/:id",{endpointId:n.endpointID,namespace:a},{get:{method:"GET",ignoreLoadingBar:!0}})}}])},function(e,t,n){"use strict";n.r(t);var a=n(21);angular.module("portainer.kubernetes").factory("KubernetesEvents",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){return function(r){return e(t+"/:endpointId/kubernetes/api/v1"+(r?"/namespaces/:namespace":"")+"/events/:id/:action",{endpointId:n.endpointID,namespace:r},{get:{method:"GET",ignoreLoadingBar:!0},getYaml:{method:"GET",headers:{Accept:"application/yaml"},transformResponse:a.rawResponse,ignoreLoadingBar:!0},create:{method:"POST"},update:{method:"PUT"},delete:{method:"DELETE"}})}}])},function(e,t){angular.module("portainer.kubernetes").factory("KubernetesHealth",["$resource","API_ENDPOINT_ENDPOINTS",function(e,t){"use strict";return e(t+"/:id/kubernetes/healthz",{},{ping:{method:"GET",params:{id:"id"}}})}])},function(e,t,n){"use strict";n.r(t);var a=n(21);angular.module("portainer.kubernetes").factory("KubernetesNamespaces",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){return function(){return e(t+"/:endpointId/kubernetes/api/v1/namespaces/:id/:action",{endpointId:n.endpointID},{get:{method:"GET",ignoreLoadingBar:!0},getYaml:{method:"GET",headers:{Accept:"application/yaml"},transformResponse:a.rawResponse,ignoreLoadingBar:!0},create:{method:"POST"},update:{method:"PUT"},delete:{method:"DELETE"},status:{method:"GET",params:{action:"status"},ignoreLoadingBar:!0}})}}])},function(e,t,n){"use strict";n.r(t);var a=n(21);angular.module("portainer.kubernetes").factory("KubernetesPersistentVolumeClaims",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){return function(r){return e(t+"/:endpointId/kubernetes/api/v1"+(r?"/namespaces/:namespace":"")+"/persistentvolumeclaims/:id/:action",{endpointId:n.endpointID,namespace:r},{get:{method:"GET",ignoreLoadingBar:!0},getYaml:{method:"GET",headers:{Accept:"application/yaml"},transformResponse:a.rawResponse,ignoreLoadingBar:!0},create:{method:"POST"},update:{method:"PUT"},patch:{method:"PATCH",headers:{"Content-Type":"application/json-patch+json"}},delete:{method:"DELETE"}})}}])},function(e,t,n){"use strict";n.r(t);var a=n(21),r=n(24);angular.module("portainer.kubernetes").factory("KubernetesPods",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){return function(i){return e(t+"/:endpointId/kubernetes/api/v1"+(i?"/namespaces/:namespace":"")+"/pods/:id/:action",{endpointId:n.endpointID,namespace:i},{get:{method:"GET",ignoreLoadingBar:!0},getYaml:{method:"GET",headers:{Accept:"application/yaml"},transformResponse:a.rawResponse,ignoreLoadingBar:!0},create:{method:"POST"},update:{method:"PUT"},delete:{method:"DELETE"},logs:{method:"GET",params:{action:"log"},transformResponse:r.logsHandler}})}}])},function(e,t,n){"use strict";n.r(t);var a=n(21);angular.module("portainer.kubernetes").factory("KubernetesReplicaSets",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){return function(r){return e(t+"/:endpointId/kubernetes/apis/apps/v1"+(r?"/namespaces/:namespace":"")+"/replicasets/:id/:action",{endpointId:n.endpointID,namespace:r},{get:{method:"GET",ignoreLoadingBar:!0},getYaml:{method:"GET",headers:{Accept:"application/yaml"},transformResponse:a.rawResponse,ignoreLoadingBar:!0},create:{method:"POST"},update:{method:"PUT"},patch:{method:"PATCH",headers:{"Content-Type":"application/json-patch+json"}},delete:{method:"DELETE"}})}}])},function(e,t,n){"use strict";n.r(t);var a=n(21);angular.module("portainer.kubernetes").factory("KubernetesResourceQuotas",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){return function(r){return e(t+"/:endpointId/kubernetes/api/v1"+(r?"/namespaces/:namespace":"")+"/resourcequotas/:id/:action",{endpointId:n.endpointID,namespace:r},{get:{method:"GET",ignoreLoadingBar:!0},getYaml:{method:"GET",headers:{Accept:"application/yaml"},transformResponse:a.rawResponse,ignoreLoadingBar:!0},create:{method:"POST"},update:{method:"PUT"},delete:{method:"DELETE"}})}}])},function(e,t,n){"use strict";n.r(t);var a=n(21);angular.module("portainer.kubernetes").factory("KubernetesSecrets",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){return function(r){return e(t+"/:endpointId/kubernetes/api/v1"+(r?"/namespaces/:namespace":"")+"/secrets/:id/:action",{endpointId:n.endpointID,namespace:r},{get:{method:"GET",ignoreLoadingBar:!0},getYaml:{method:"GET",headers:{Accept:"application/yaml"},transformResponse:a.rawResponse,ignoreLoadingBar:!0},create:{method:"POST"},update:{method:"PUT"},delete:{method:"DELETE"}})}}])},function(e,t,n){"use strict";n.r(t);var a=n(21);angular.module("portainer.kubernetes").factory("KubernetesServices",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){return function(r){return e(t+"/:endpointId/kubernetes/api/v1"+(r?"/namespaces/:namespace":"")+"/services/:id/:action",{endpointId:n.endpointID,namespace:r},{get:{method:"GET",ignoreLoadingBar:!0},getYaml:{method:"GET",headers:{Accept:"application/yaml"},transformResponse:a.rawResponse,ignoreLoadingBar:!0},create:{method:"POST"},update:{method:"PUT"},patch:{method:"PATCH",headers:{"Content-Type":"application/json-patch+json"}},delete:{method:"DELETE"}})}}])},function(e,t,n){"use strict";n.r(t);var a=n(21);angular.module("portainer.kubernetes").factory("KubernetesStatefulSets",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){return function(r){return e(t+"/:endpointId/kubernetes/apis/apps/v1"+(r?"/namespaces/:namespace":"")+"/statefulsets/:id/:action",{endpointId:n.endpointID,namespace:r},{get:{method:"GET",ignoreLoadingBar:!0},getYaml:{method:"GET",headers:{Accept:"application/yaml"},transformResponse:a.rawResponse,ignoreLoadingBar:!0},create:{method:"POST"},update:{method:"PUT"},patch:{method:"PATCH",headers:{"Content-Type":"application/json-patch+json"}},rollback:{method:"PATCH",headers:{"Content-Type":"application/strategic-merge-patch+json"}},delete:{method:"DELETE"}})}}])},function(e,t,n){"use strict";n.r(t);var a=n(21);angular.module("portainer.kubernetes").factory("KubernetesStorage",["$resource","API_ENDPOINT_ENDPOINTS","EndpointProvider",function(e,t,n){return function(){return e(t+"/:endpointId/kubernetes/apis/storage.k8s.io/v1/storageclasses/:id/:action",{endpointId:n.endpointID},{get:{method:"GET",ignoreLoadingBar:!0},getYaml:{method:"GET",headers:{Accept:"application/yaml"},transformResponse:a.rawResponse,ignoreLoadingBar:!0},create:{method:"POST"},update:{method:"PUT"},patch:{method:"PATCH",headers:{"Content-Type":"application/json-patch+json"}},delete:{method:"DELETE"}})}}])},function(e,t,n){"use strict";n.r(t);var a=n(53),r=n(5),i=n(70),s=n(7),o=n(20),l=n(35),c=n(23),d=n(4),u=n(2),p=n(1),m=n.n(p),g=n(8),f=n(3),h=n(13),v=n(432),b=n(72),y=n(162),x=n(114),w=n(163),k=n(210),S=n(178),C=n(119),$=n(54),A=n(328);function P(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){if(e){if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function R(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){R(i,a,r,s,o,"next",e)}function o(e){R(i,a,r,s,o,"throw",e)}s(void 0)}))}}function O(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var D=function(){function e(t,n,a,r,i,s,o,l,c,d,u,p,m){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.Authentication=n,this.KubernetesDeploymentService=a,this.KubernetesDaemonSetService=r,this.KubernetesStatefulSetService=i,this.KubernetesServiceService=s,this.KubernetesSecretService=o,this.KubernetesPersistentVolumeClaimService=l,this.KubernetesNamespaceService=c,this.KubernetesPodService=d,this.KubernetesHistoryService=u,this.KubernetesHorizontalPodAutoScalerService=p,this.KubernetesIngressService=m,this.getAsync=this.getAsync.bind(this),this.getAllAsync=this.getAllAsync.bind(this),this.createAsync=this.createAsync.bind(this),this.patchAsync=this.patchAsync.bind(this),this.patchPartialAsync=this.patchPartialAsync.bind(this),this.rollbackAsync=this.rollbackAsync.bind(this),this.deleteAsync=this.deleteAsync.bind(this)}var t,n,p,T,N,R,D,V,U,L;return e.$inject=["$async","Authentication","KubernetesDeploymentService","KubernetesDaemonSetService","KubernetesStatefulSetService","KubernetesServiceService","KubernetesSecretService","KubernetesPersistentVolumeClaimService","KubernetesNamespaceService","KubernetesPodService","KubernetesHistoryService","KubernetesHorizontalPodAutoScalerService","KubernetesIngressService"],t=e,(n=[{key:"_getApplicationApiService",value:function(e){var t;if(e instanceof y.KubernetesDeployment||e instanceof f.KubernetesApplication&&e.ApplicationType===f.KubernetesApplicationTypes.DEPLOYMENT)t=this.KubernetesDeploymentService;else if(e instanceof w.KubernetesDaemonSet||e instanceof f.KubernetesApplication&&e.ApplicationType===f.KubernetesApplicationTypes.DAEMONSET)t=this.KubernetesDaemonSetService;else if(e instanceof x.KubernetesStatefulSet||e instanceof f.KubernetesApplication&&e.ApplicationType===f.KubernetesApplicationTypes.STATEFULSET)t=this.KubernetesStatefulSetService;else{if(!(e instanceof f.KubernetesApplication&&e.ApplicationType===f.KubernetesApplicationTypes.POD))throw new g.default("Unable to determine which association to use to retrieve API Service");t=this.KubernetesPodService}return t}},{key:"_generateIngressPatchPromises",value:function(e,t){var n=this;return Object(u.a)(t,(function(t){var a=Object(d.a)(e,{Name:t.Name});return n.KubernetesIngressService.patch(a,t)}))}},{key:"getAsync",value:(L=E(regeneratorRuntime.mark((function e(t,n){var a,r,i,s,o,l,c,d,p,m,f,v,y,x,w,C,$;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.allSettled([this.KubernetesDeploymentService.get(t,n),this.KubernetesDaemonSetService.get(t,n),this.KubernetesStatefulSetService.get(t,n),this.KubernetesPodService.get(t,n),this.KubernetesPodService.get(t),this.KubernetesHorizontalPodAutoScalerService.get(t),this.KubernetesIngressService.get(t)]);case 3:if(a=e.sent,r=I(a,7),i=r[0],s=r[1],o=r[2],l=r[3],c=r[4],d=r[5],p=r[6],"fulfilled"!==i.status){e.next=17;break}m=i,f=b.default.apiDeploymentToApplication,e.next=33;break;case 17:if("fulfilled"!==s.status){e.next=22;break}m=s,f=b.default.apiDaemonSetToApplication,e.next=33;break;case 22:if("fulfilled"!==o.status){e.next=27;break}m=o,f=b.default.apiStatefulSetToapplication,e.next=33;break;case 27:if("fulfilled"!==l.status){e.next=32;break}m=l,f=b.default.apiPodToApplication,e.next=33;break;case 32:throw new g.default("Unable to determine which association to use to convert application");case 33:return e.next=35,this.KubernetesServiceService.get(t);case 35:if(v=e.sent,!(y=k.default.findApplicationBoundService(v,m.value.Raw))){e.next=43;break}return e.next=40,this.KubernetesServiceService.get(t,y.metadata.name);case 40:e.t0=e.sent,e.next=44;break;case 43:e.t0={};case 44:if(x=e.t0,(w=f(m.value.Raw,c.value,x.Raw,p.value)).Yaml=m.value.Yaml,w.Raw=m.value.Raw,w.Pods=Object(u.a)(w.Pods,(function(e){return A.default.apiToModel(e)})),w.Containers=h.default.associateContainersAndApplication(w),!(C=S.KubernetesHorizontalPodAutoScalerHelper.findApplicationBoundScaler(d.value,w))){e.next=57;break}return e.next=54,this.KubernetesHorizontalPodAutoScalerService.get(t,C.Name);case 54:e.t1=e.sent,e.next=58;break;case 57:e.t1=void 0;case 58:return $=e.t1,w.AutoScaler=$,e.next=62,this.KubernetesHistoryService.get(w);case 62:return x.Yaml&&(w.Yaml+="---\n"+x.Yaml),$&&$.Yaml&&(w.Yaml+="---\n"+$.Yaml),e.abrupt("return",w);case 67:throw e.prev=67,e.t2=e.catch(0),e.t2;case 70:case"end":return e.stop()}}),e,this,[[0,67]])}))),function(e,t){return L.apply(this,arguments)})},{key:"getAllAsync",value:(U=E(regeneratorRuntime.mark((function e(t){var n,a,r,d=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=5;break}e.t0=[t],e.next=10;break;case 5:return e.t1=u.a,e.next=8,this.KubernetesNamespaceService.get();case 8:e.t2=e.sent,e.t0=(0,e.t1)(e.t2,"Name");case 10:return n=e.t0,a=function(e,t,n,a,r){var i=t(e,a,k.default.findApplicationBoundService(n,e),r);return i.Containers=h.default.associateContainersAndApplication(i),i},e.next=14,Promise.all(Object(u.a)(n,function(){var e=E(regeneratorRuntime.mark((function e(t){var n,r,i,p,m,g,f,h,v,y,x,w,k,C,$,T;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([d.KubernetesDeploymentService.get(t),d.KubernetesDaemonSetService.get(t),d.KubernetesStatefulSetService.get(t),d.KubernetesServiceService.get(t),d.KubernetesPodService.get(t),d.KubernetesIngressService.get(t),d.KubernetesHorizontalPodAutoScalerService.get(t)]);case 2:return n=e.sent,r=I(n,7),i=r[0],p=r[1],m=r[2],g=r[3],f=r[4],h=r[5],v=r[6],y=Object(u.a)(i,(function(e){return a(e,b.default.apiDeploymentToApplication,g,f,h)})),x=Object(u.a)(p,(function(e){return a(e,b.default.apiDaemonSetToApplication,g,f,h)})),w=Object(u.a)(m,(function(e){return a(e,b.default.apiStatefulSetToapplication,g,f,h)})),k=Object(c.a)(Object(l.a)(y,"Pods"),Object(l.a)(x,"Pods"),Object(l.a)(w,"Pods")),C=o.a.apply(void 0,[f].concat(P(k))),$=Object(u.a)(C,(function(e){return a(e,b.default.apiPodToApplication,g,f,h)})),T=Object(c.a)(y,x,w,$),Object(s.a)(T,(function(e){e.Pods=Object(u.a)(e.Pods,(function(e){return A.default.apiToModel(e)}))})),e.next=21,Promise.all(Object(s.a)(T,function(){var e=E(regeneratorRuntime.mark((function e(n){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=S.KubernetesHorizontalPodAutoScalerHelper.findApplicationBoundScaler(v,n))){e.next=7;break}return e.next=4,d.KubernetesHorizontalPodAutoScalerService.get(t,a.Name);case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=void 0;case 8:r=e.t0,n.AutoScaler=r;case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 21:return e.abrupt("return",T);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 14:return r=e.sent,e.abrupt("return",Object(i.a)(r));case 18:throw e.prev=18,e.t3=e.catch(0),e.t3;case 21:case"end":return e.stop()}}),e,this,[[0,18]])}))),function(e){return U.apply(this,arguments)})},{key:"get",value:function(e,t){return t?this.$async(this.getAsync,e,t):this.$async(this.getAllAsync,e)}},{key:"createAsync",value:(V=E(regeneratorRuntime.mark((function e(t){var n,a,r,i,s,l,c,d,p,m,g,h=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=b.default.applicationFormValuesToApplication(t),a=I(n,4),r=a[0],i=a[1],s=a[2],l=a[3],!s){e.next=9;break}return e.next=5,this.KubernetesServiceService.create(s);case 5:if(t.PublishingType!==f.KubernetesApplicationPublishingTypes.INGRESS){e.next=9;break}return c=$.KubernetesIngressConverter.applicationFormValuesToIngresses(t,s.Name),e.next=9,Promise.all(this._generateIngressPatchPromises(t.OriginalIngresses,c));case 9:if(d=this._getApplicationApiService(r),!(r instanceof x.KubernetesStatefulSet)){e.next=18;break}return r.VolumeClaims=l,e.next=14,this.KubernetesServiceService.create(i);case 14:i=e.sent,r.ServiceName=i.metadata.name,e.next=21;break;case 18:return p=Object(u.a)(l,(function(e){if(!e.PreviousName&&!e.Id)return h.KubernetesPersistentVolumeClaimService.create(e)})),e.next=21,Promise.all(Object(o.a)(p,void 0));case 21:if(!t.AutoScaler.IsUsed||t.DeploymentType===f.KubernetesApplicationDeploymentTypes.GLOBAL){e.next=26;break}return m=S.KubernetesHorizontalPodAutoScalerHelper.getApplicationTypeString(r),g=C.KubernetesHorizontalPodAutoScalerConverter.applicationFormValuesToModel(t,m),e.next=26,this.KubernetesHorizontalPodAutoScalerService.create(g);case 26:return e.next=28,d.create(r);case 28:e.next=33;break;case 30:throw e.prev=30,e.t0=e.catch(0),e.t0;case 33:case"end":return e.stop()}}),e,this,[[0,30]])}))),function(e){return V.apply(this,arguments)})},{key:"create",value:function(e){return this.$async(this.createAsync,e)}},{key:"patchAsync",value:(D=E(regeneratorRuntime.mark((function e(t,n){var a,r,i,s,o,l,c,p,m,g,h,v,y,w,k,A,P,T,N,R,E,O,D,V=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=b.default.applicationFormValuesToApplication(t),r=I(a,4),i=r[0],s=r[1],o=r[2],l=r[3],c=b.default.applicationFormValuesToApplication(n),p=I(c,4),m=p[0],g=p[1],h=p[2],v=p[3],y=this._getApplicationApiService(i),w=this._getApplicationApiService(m),y===w){e.next=14;break}return e.next=8,this.delete(i);case 8:if(!o){e.next=11;break}return e.next=11,this.KubernetesServiceService.delete(o);case 11:return e.next=13,this.create(n);case 13:return e.abrupt("return",e.sent);case 14:if(!(m instanceof x.KubernetesStatefulSet)){e.next=19;break}return e.next=17,this.KubernetesServiceService.patch(s,g);case 17:e.next=22;break;case 19:return k=Object(u.a)(v,(function(e){if(!e.PreviousName&&!e.Id)return V.KubernetesPersistentVolumeClaimService.create(e);if(!e.Id){var t=Object(d.a)(l,{Name:e.PreviousName});return V.KubernetesPersistentVolumeClaimService.patch(t,e)}})),e.next=22,Promise.all(k);case 22:return e.next=24,w.patch(i,m);case 24:if(!o||!h){e.next=34;break}return e.next=27,this.KubernetesServiceService.patch(o,h);case 27:if(n.PublishingType!==f.KubernetesApplicationPublishingTypes.INGRESS&&t.PublishingType!==f.KubernetesApplicationPublishingTypes.INGRESS){e.next=32;break}return A=$.KubernetesIngressConverter.applicationFormValuesToIngresses(t,o.Name),P=$.KubernetesIngressConverter.applicationFormValuesToIngresses(n,h.Name),e.next=32,Promise.all(this._generateIngressPatchPromises(A,P));case 32:e.next=50;break;case 34:if(o||!h){e.next=43;break}return e.next=37,this.KubernetesServiceService.create(h);case 37:if(n.PublishingType!==f.KubernetesApplicationPublishingTypes.INGRESS){e.next=41;break}return T=$.KubernetesIngressConverter.applicationFormValuesToIngresses(n,h.Name),e.next=41,Promise.all(this._generateIngressPatchPromises(n.OriginalIngresses,T));case 41:e.next=50;break;case 43:if(!o||h){e.next=50;break}return e.next=46,this.KubernetesServiceService.delete(o);case 46:if(t.PublishingType!==f.KubernetesApplicationPublishingTypes.INGRESS){e.next=50;break}return N=$.KubernetesIngressConverter.applicationFormValuesToIngresses(n,o.Name),e.next=50,Promise.all(this._generateIngressPatchPromises(t.OriginalIngresses,N));case 50:if(R=S.KubernetesHorizontalPodAutoScalerHelper.getApplicationTypeString(m),E=C.KubernetesHorizontalPodAutoScalerConverter.applicationFormValuesToModel(n,R),t.AutoScaler.IsUsed){e.next=58;break}if(!n.AutoScaler.IsUsed){e.next=56;break}return e.next=56,this.KubernetesHorizontalPodAutoScalerService.create(E);case 56:e.next=67;break;case 58:if(O=S.KubernetesHorizontalPodAutoScalerHelper.getApplicationTypeString(i),D=C.KubernetesHorizontalPodAutoScalerConverter.applicationFormValuesToModel(t,O),!n.AutoScaler.IsUsed){e.next=65;break}return e.next=63,this.KubernetesHorizontalPodAutoScalerService.patch(D,E);case 63:e.next=67;break;case 65:return e.next=67,this.KubernetesHorizontalPodAutoScalerService.delete(D);case 67:e.next=72;break;case 69:throw e.prev=69,e.t0=e.catch(0),e.t0;case 72:case"end":return e.stop()}}),e,this,[[0,69]])}))),function(e,t){return D.apply(this,arguments)})},{key:"patchPartialAsync",value:(R=E(regeneratorRuntime.mark((function e(t,n){var a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={Name:t.Name,Namespace:t.ResourcePool,StackName:t.StackName,Note:t.Note},r={Name:n.Name,Namespace:n.ResourcePool,StackName:n.StackName,Note:n.Note},i=this._getApplicationApiService(t),e.next=6,i.patch(a,r);case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e,t){return R.apply(this,arguments)})},{key:"patch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?this.$async(this.patchPartialAsync,e,t):this.$async(this.patchAsync,e,t)}},{key:"deleteAsync",value:(N=E(regeneratorRuntime.mark((function e(t){var n,i,o,l,c,d,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={Namespace:t.ResourcePool||t.Namespace,Name:t.Name},(i=m.a.copy(n)).Name=t.Name,o=this._getApplicationApiService(t),e.next=7,o.delete(n);case 7:if(o!==this.KubernetesStatefulSetService){e.next=12;break}return(l=m.a.copy(n)).Name=t instanceof x.KubernetesStatefulSet?t.ServiceName:t.HeadlessServiceName,e.next=12,this.KubernetesServiceService.delete(l);case 12:if(!t.ServiceType){e.next=25;break}return e.next=15,this.KubernetesServiceService.delete(i);case 15:if(!Object(r.a)(t.PublishedPorts,(function(e){return e.IngressRules.length})).length){e.next=25;break}return e.next=19,this.KubernetesIngressService.get(n.Namespace);case 19:return c=e.sent,d={OriginalIngresses:c,PublishedPorts:h.default.generatePublishedPortsFormValuesFromPublishedPorts(t.ServiceType,t.PublishedPorts)},Object(s.a)(d.PublishedPorts,(function(e){return e.NeedsDeletion=!0})),u=$.KubernetesIngressConverter.applicationFormValuesToIngresses(d,i.Name),e.next=25,Promise.all(this._generateIngressPatchPromises(d.OriginalIngresses,u));case 25:if(Object(a.a)(t.AutoScaler)){e.next=28;break}return e.next=28,this.KubernetesHorizontalPodAutoScalerService.delete(t.AutoScaler);case 28:e.next=33;break;case 30:throw e.prev=30,e.t0=e.catch(0),e.t0;case 33:case"end":return e.stop()}}),e,this,[[0,30]])}))),function(e){return N.apply(this,arguments)})},{key:"delete",value:function(e){return this.$async(this.deleteAsync,e)}},{key:"rollbackAsync",value:(T=E(regeneratorRuntime.mark((function e(t,n){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=v.default.getPatchPayload(t,n),r=this._getApplicationApiService(t),e.next=5,r.rollback(t.ResourcePool,t.Name,a);case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e,t){return T.apply(this,arguments)})},{key:"rollback",value:function(e,t){return this.$async(this.rollbackAsync,e,t)}}])&&O(t.prototype,n),p&&O(t,p),e}();t.default=D,m.a.module("portainer.kubernetes").service("KubernetesApplicationService",D)},function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(167),i=n(1),s=n.n(i),o=n(8),l=n(79),c=n(11);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function p(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){p(i,a,r,s,o,"next",e)}function o(e){p(i,a,r,s,o,"throw",e)}s(void 0)}))}}function g(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var f=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.KubernetesConfigMaps=n,this.getAsync=this.getAsync.bind(this),this.getAllAsync=this.getAllAsync.bind(this),this.createAsync=this.createAsync.bind(this),this.updateAsync=this.updateAsync.bind(this),this.deleteAsync=this.deleteAsync.bind(this)}var t,n,i,s,u,p,f,h;return e.$inject=["$async","KubernetesConfigMaps"],t=e,(n=[{key:"getAsync",value:(h=m(regeneratorRuntime.mark((function e(t,n){var a,i,s,u,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=new c.KubernetesCommonParams).id=n,e.next=5,Promise.allSettled([this.KubernetesConfigMaps(t).get(a).$promise,this.KubernetesConfigMaps(t).getYaml(a).$promise]);case 5:if(i=e.sent,s=d(i,2),u=s[0],p=s[1],404!=Object(r.a)(u,"reason.status")||404!=Object(r.a)(p,"reason.status")){e.next=11;break}return e.abrupt("return",l.default.defaultConfigMap(t,n));case 11:if(!u.value){e.next=13;break}return e.abrupt("return",l.default.apiToConfigMap(u.value,p.value));case 13:throw new o.default("Unable to retrieve config map ",n);case 16:if(e.prev=16,e.t0=e.catch(0),404!==e.t0.status){e.next=20;break}return e.abrupt("return",l.default.defaultConfigMap(t,n));case 20:throw new o.default("Unable to retrieve config map",e.t0);case 21:case"end":return e.stop()}}),e,this,[[0,16]])}))),function(e,t){return h.apply(this,arguments)})},{key:"getAllAsync",value:(f=m(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesConfigMaps(t).get().$promise;case 3:return n=e.sent,e.abrupt("return",Object(a.a)(n.items,(function(e){return l.default.apiToConfigMap(e)})));case 7:throw e.prev=7,e.t0=e.catch(0),new o.default("Unable to retrieve config maps",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return f.apply(this,arguments)})},{key:"get",value:function(e,t){return t?this.$async(this.getAsync,e,t):this.$async(this.getAllAsync,e)}},{key:"createAsync",value:(p=m(regeneratorRuntime.mark((function e(t){var n,a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=l.default.createPayload(t),a={},r=n.metadata.namespace,e.next=6,this.KubernetesConfigMaps(r).create(a,n).$promise;case 6:return i=e.sent,e.abrupt("return",l.default.apiToConfigMap(i));case 10:throw e.prev=10,e.t0=e.catch(0),new o.default("Unable to create config map",e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e){return p.apply(this,arguments)})},{key:"create",value:function(e){return this.$async(this.createAsync,e)}},{key:"updateAsync",value:(u=m(regeneratorRuntime.mark((function e(t){var n,a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.Id){e.next=5;break}return e.next=4,this.create(t);case 4:return e.abrupt("return",e.sent);case 5:return n=l.default.updatePayload(t),(a=new c.KubernetesCommonParams).id=n.metadata.name,r=n.metadata.namespace,e.next=11,this.KubernetesConfigMaps(r).update(a,n).$promise;case 11:return i=e.sent,e.abrupt("return",l.default.apiToConfigMap(i));case 15:throw e.prev=15,e.t0=e.catch(0),new o.default("Unable to update config map",e.t0);case 18:case"end":return e.stop()}}),e,this,[[0,15]])}))),function(e){return u.apply(this,arguments)})},{key:"update",value:function(e){return this.$async(this.updateAsync,e)}},{key:"deleteAsync",value:(s=m(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new c.KubernetesCommonParams).id=t.Name,a=t.Namespace,e.next=6,this.KubernetesConfigMaps(a).delete(n).$promise;case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),new o.default("Unable to delete config map",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e){return s.apply(this,arguments)})},{key:"delete",value:function(e){return this.$async(this.deleteAsync,e)}}])&&g(t.prototype,n),i&&g(t,i),e}();t.default=f,s.a.module("portainer.kubernetes").service("KubernetesConfigMapService",f)},function(e,t,n){"use strict";n.r(t);var a=n(70),r=n(23),i=n(2),s=n(1),o=n.n(s),l=n(220),c=n(79),d=n(117),u=n(26),p=n(47);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function f(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){f(i,a,r,s,o,"next",e)}function o(e){f(i,a,r,s,o,"throw",e)}s(void 0)}))}}function v(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var b=function(){function e(t,n,a,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.Authentication=n,this.KubernetesNamespaceService=a,this.KubernetesConfigMapService=r,this.KubernetesSecretService=i,this.getAsync=this.getAsync.bind(this),this.getAllAsync=this.getAllAsync.bind(this),this.createAsync=this.createAsync.bind(this),this.updateAsync=this.updateAsync.bind(this),this.deleteAsync=this.deleteAsync.bind(this)}var t,n,s,o,g,f,b,y;return e.$inject=["$async","Authentication","KubernetesNamespaceService","KubernetesConfigMapService","KubernetesSecretService"],t=e,(n=[{key:"getAsync",value:(y=h(regeneratorRuntime.mark((function e(t,n){var a,r,i,s,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.allSettled([this.KubernetesConfigMapService.get(t,n),this.KubernetesSecretService.get(t,n)]);case 3:if(a=e.sent,r=m(a,2),i=r[0],"fulfilled"!==(s=r[1]).status){e.next=10;break}return o=l.default.secretToConfiguration(s.value),e.abrupt("return",o);case 10:return o=l.default.configMapToConfiguration(i.value),e.abrupt("return",o);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,this,[[0,14]])}))),function(e,t){return y.apply(this,arguments)})},{key:"getAllAsync",value:(b=h(regeneratorRuntime.mark((function e(t){var n,s,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=5;break}e.t0=[t],e.next=10;break;case 5:return e.t1=i.a,e.next=8,this.KubernetesNamespaceService.get();case 8:e.t2=e.sent,e.t0=(0,e.t1)(e.t2,"Name");case 10:return n=e.t0,e.next=13,Promise.all(Object(i.a)(n,function(){var e=h(regeneratorRuntime.mark((function e(t){var n,a,s,c,d,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([o.KubernetesConfigMapService.get(t),o.KubernetesSecretService.get(t)]);case 2:return n=e.sent,a=m(n,2),s=a[0],c=a[1],d=Object(i.a)(c,(function(e){return l.default.secretToConfiguration(e)})),u=Object(i.a)(s,(function(e){return l.default.configMapToConfiguration(e)})),e.abrupt("return",Object(r.a)(u,d));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 13:return s=e.sent,e.abrupt("return",Object(a.a)(s));case 17:throw e.prev=17,e.t3=e.catch(0),e.t3;case 20:case"end":return e.stop()}}),e,this,[[0,17]])}))),function(e){return b.apply(this,arguments)})},{key:"get",value:function(e,t){return t?this.$async(this.getAsync,e,t):this.$async(this.getAllAsync,e)}},{key:"createAsync",value:(f=h(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ConfigurationOwner=p.default.ownerToLabel(t.ConfigurationOwner),e.prev=1,t.Type!==u.KubernetesConfigurationTypes.CONFIGMAP){e.next=8;break}return n=c.default.configurationFormValuesToConfigMap(t),e.next=6,this.KubernetesConfigMapService.create(n);case 6:e.next=11;break;case 8:return a=d.default.configurationFormValuesToSecret(t),e.next=11,this.KubernetesSecretService.create(a);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(1),e.t0;case 16:case"end":return e.stop()}}),e,this,[[1,13]])}))),function(e){return f.apply(this,arguments)})},{key:"create",value:function(e){return this.$async(this.createAsync,e)}},{key:"updateAsync",value:(g=h(regeneratorRuntime.mark((function e(t,n){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.Type!==u.KubernetesConfigurationTypes.CONFIGMAP){e.next=8;break}return(a=c.default.configurationFormValuesToConfigMap(t)).ConfigurationOwner=n.ConfigurationOwner,e.next=6,this.KubernetesConfigMapService.update(a);case 6:e.next=12;break;case 8:return(r=d.default.configurationFormValuesToSecret(t)).ConfigurationOwner=n.ConfigurationOwner,e.next=12,this.KubernetesSecretService.update(r);case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,this,[[0,14]])}))),function(e,t){return g.apply(this,arguments)})},{key:"update",value:function(e,t){return this.$async(this.updateAsync,e,t)}},{key:"deleteAsync",value:(o=h(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.Type!==u.KubernetesConfigurationTypes.CONFIGMAP){e.next=6;break}return e.next=4,this.KubernetesConfigMapService.delete(t);case 4:e.next=8;break;case 6:return e.next=8,this.KubernetesSecretService.delete(t);case 8:e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e){return o.apply(this,arguments)})},{key:"delete",value:function(e){return this.$async(this.deleteAsync,e)}}])&&v(t.prototype,n),s&&v(t,s),e}();t.default=b,o.a.module("portainer.kubernetes").service("KubernetesConfigurationService",b)},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(8);function s(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.KubernetesControllerRevisions=n,this.getAllAsync=this.getAllAsync.bind(this)}var t,n,a,r,l;return e.$inject=["$async","KubernetesControllerRevisions"],t=e,(n=[{key:"getAllAsync",value:(r=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesControllerRevisions(t).get().$promise;case 3:return n=e.sent,e.abrupt("return",n.items);case 7:throw e.prev=7,e.t0=e.catch(0),new i.default("Unable to retrieve ControllerRevisions",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})),l=function(){var e=this,t=arguments;return new Promise((function(n,a){var i=r.apply(e,t);function o(e){s(i,n,a,o,l,"next",e)}function l(e){s(i,n,a,o,l,"throw",e)}o(void 0)}))},function(e){return l.apply(this,arguments)})},{key:"get",value:function(e){return this.$async(this.getAllAsync,e)}}])&&o(t.prototype,n),a&&o(t,a),e}();t.default=l,r.a.module("portainer.kubernetes").service("KubernetesControllerRevisionService",l)},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(8),s=n(11),o=n(207);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function d(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){d(i,a,r,s,o,"next",e)}function o(e){d(i,a,r,s,o,"throw",e)}s(void 0)}))}}function p(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var m=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.KubernetesDaemonSets=n,this.getAsync=this.getAsync.bind(this),this.getAllAsync=this.getAllAsync.bind(this),this.createAsync=this.createAsync.bind(this),this.patchAsync=this.patchAsync.bind(this),this.rollbackAsync=this.rollbackAsync.bind(this),this.deleteAsync=this.deleteAsync.bind(this)}var t,n,a,r,c,d,m,g,f;return e.$inject=["$async","KubernetesDaemonSets"],t=e,(n=[{key:"getAsync",value:(f=u(regeneratorRuntime.mark((function e(t,n){var a,r,o,c,d,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=new s.KubernetesCommonParams).id=n,e.next=5,Promise.all([this.KubernetesDaemonSets(t).get(a).$promise,this.KubernetesDaemonSets(t).getYaml(a).$promise]);case 5:return r=e.sent,o=l(r,2),c=o[0],d=o[1],u={Raw:c,Yaml:d.data},e.abrupt("return",u);case 13:throw e.prev=13,e.t0=e.catch(0),new i.default("Unable to retrieve DaemonSet",e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(e,t){return f.apply(this,arguments)})},{key:"getAllAsync",value:(g=u(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesDaemonSets(t).get().$promise;case 3:return n=e.sent,e.abrupt("return",n.items);case 7:throw e.prev=7,e.t0=e.catch(0),new i.default("Unable to retrieve DaemonSets",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return g.apply(this,arguments)})},{key:"get",value:function(e,t){return t?this.$async(this.getAsync,e,t):this.$async(this.getAllAsync,e)}},{key:"createAsync",value:(m=u(regeneratorRuntime.mark((function e(t){var n,a,r,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={},a=o.default.createPayload(t),r=a.metadata.namespace,e.next=6,this.KubernetesDaemonSets(r).create(n,a).$promise;case 6:return s=e.sent,e.abrupt("return",s);case 10:throw e.prev=10,e.t0=e.catch(0),new i.default("Unable to create daemonset",e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e){return m.apply(this,arguments)})},{key:"create",value:function(e){return this.$async(this.createAsync,e)}},{key:"patchAsync",value:(d=u(regeneratorRuntime.mark((function e(t,n){var a,r,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(a=new s.KubernetesCommonParams).id=n.Name,r=n.Namespace,(l=o.default.patchPayload(t,n)).length){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.KubernetesDaemonSets(r).patch(a,l).$promise;case 9:return c=e.sent,e.abrupt("return",c);case 13:throw e.prev=13,e.t0=e.catch(0),new i.default("Unable to patch daemonSet",e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(e,t){return d.apply(this,arguments)})},{key:"patch",value:function(e,t){return this.$async(this.patchAsync,e,t)}},{key:"deleteAsync",value:(c=u(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new s.KubernetesCommonParams).id=t.Name,a=t.Namespace,e.next=6,this.KubernetesDaemonSets(a).delete(n).$promise;case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),new i.default(" daemonset",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e){return c.apply(this,arguments)})},{key:"delete",value:function(e){return this.$async(this.deleteAsync,e)}},{key:"rollbackAsync",value:(r=u(regeneratorRuntime.mark((function e(t,n,a){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(r=new s.KubernetesCommonParams).id=n,e.next=5,this.KubernetesDaemonSets(t).rollback(r,a).$promise;case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new i.default("Unable to rollback daemonset",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e,t,n){return r.apply(this,arguments)})},{key:"rollback",value:function(e,t,n){return this.$async(this.rollbackAsync,e,t,n)}}])&&p(t.prototype,n),a&&p(t,a),e}();t.default=m,r.a.module("portainer.kubernetes").service("KubernetesDaemonSetService",m)},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(8),s=n(11),o=n(206);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function d(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){d(i,a,r,s,o,"next",e)}function o(e){d(i,a,r,s,o,"throw",e)}s(void 0)}))}}function p(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var m=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.KubernetesDeployments=n,this.getAsync=this.getAsync.bind(this),this.getAllAsync=this.getAllAsync.bind(this),this.createAsync=this.createAsync.bind(this),this.patchAsync=this.patchAsync.bind(this),this.rollbackAsync=this.rollbackAsync.bind(this),this.deleteAsync=this.deleteAsync.bind(this)}var t,n,a,r,c,d,m,g,f;return e.$inject=["$async","KubernetesDeployments"],t=e,(n=[{key:"getAsync",value:(f=u(regeneratorRuntime.mark((function e(t,n){var a,r,o,c,d,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=new s.KubernetesCommonParams).id=n,e.next=5,Promise.all([this.KubernetesDeployments(t).get(a).$promise,this.KubernetesDeployments(t).getYaml(a).$promise]);case 5:return r=e.sent,o=l(r,2),c=o[0],d=o[1],u={Raw:c,Yaml:d.data},e.abrupt("return",u);case 13:throw e.prev=13,e.t0=e.catch(0),new i.default("Unable to retrieve Deployment",e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(e,t){return f.apply(this,arguments)})},{key:"getAllAsync",value:(g=u(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesDeployments(t).get().$promise;case 3:return n=e.sent,e.abrupt("return",n.items);case 7:throw e.prev=7,e.t0=e.catch(0),new i.default("Unable to retrieve Deployments",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return g.apply(this,arguments)})},{key:"get",value:function(e,t){return t?this.$async(this.getAsync,e,t):this.$async(this.getAllAsync,e)}},{key:"createAsync",value:(m=u(regeneratorRuntime.mark((function e(t){var n,a,r,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={},a=o.default.createPayload(t),r=a.metadata.namespace,e.next=6,this.KubernetesDeployments(r).create(n,a).$promise;case 6:return s=e.sent,e.abrupt("return",s);case 10:throw e.prev=10,e.t0=e.catch(0),new i.default("Unable to create deployment",e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e){return m.apply(this,arguments)})},{key:"create",value:function(e){return this.$async(this.createAsync,e)}},{key:"patchAsync",value:(d=u(regeneratorRuntime.mark((function e(t,n){var a,r,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(a=new s.KubernetesCommonParams).id=n.Name,r=n.Namespace,(l=o.default.patchPayload(t,n)).length){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.KubernetesDeployments(r).patch(a,l).$promise;case 9:return c=e.sent,e.abrupt("return",c);case 13:throw e.prev=13,e.t0=e.catch(0),new i.default("Unable to patch deployment",e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(e,t){return d.apply(this,arguments)})},{key:"patch",value:function(e,t){return this.$async(this.patchAsync,e,t)}},{key:"deleteAsync",value:(c=u(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new s.KubernetesCommonParams).id=t.Name,a=t.Namespace,e.next=6,this.KubernetesDeployments(a).delete(n).$promise;case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),new i.default(" deployment",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e){return c.apply(this,arguments)})},{key:"delete",value:function(e){return this.$async(this.deleteAsync,e)}},{key:"rollbackAsync",value:(r=u(regeneratorRuntime.mark((function e(t,n,a){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(r=new s.KubernetesCommonParams).id=n,e.next=5,this.KubernetesDeployments(t).rollback(r,a).$promise;case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new i.default("Unable to rollback deployment",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e,t,n){return r.apply(this,arguments)})},{key:"rollback",value:function(e,t,n){return this.$async(this.rollbackAsync,e,t,n)}}])&&p(t.prototype,n),a&&p(t,a),e}();t.default=m,r.a.module("portainer.kubernetes").service("KubernetesDeploymentService",m)},function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(1),i=n.n(r),s=n(8),o=n(427);function l(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.KubernetesEvents=n,this.getAllAsync=this.getAllAsync.bind(this)}var t,n,r,i,d;return e.$inject=["$async","KubernetesEvents"],t=e,(n=[{key:"getAllAsync",value:(i=regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesEvents(t).get().$promise;case 3:return n=e.sent,r=Object(a.a)(n.items,(function(e){return o.default.apiToEvent(e)})),e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),new s.default("Unable to retrieve events",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})),d=function(){var e=this,t=arguments;return new Promise((function(n,a){var r=i.apply(e,t);function s(e){l(r,n,a,s,o,"next",e)}function o(e){l(r,n,a,s,o,"throw",e)}s(void 0)}))},function(e){return d.apply(this,arguments)})},{key:"get",value:function(e){return this.$async(this.getAllAsync,e)}}])&&c(t.prototype,n),r&&c(t,r),e}();t.default=d,i.a.module("portainer.kubernetes").service("KubernetesEventService",d)},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(8);function s(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.KubernetesHealth=n,this.pingAsync=this.pingAsync.bind(this)}var t,n,a,r,l;return e.$inject=["$async","KubernetesHealth"],t=e,(n=[{key:"pingAsync",value:(r=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesHealth.ping({id:t}).$promise;case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),new i.default("Unable to retrieve environment health",e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})),l=function(){var e=this,t=arguments;return new Promise((function(n,a){var i=r.apply(e,t);function o(e){s(i,n,a,o,l,"next",e)}function l(e){s(i,n,a,o,l,"throw",e)}o(void 0)}))},function(e){return l.apply(this,arguments)})},{key:"ping",value:function(e){return this.$async(this.pingAsync,e)}}])&&o(t.prototype,n),a&&o(t,a),e}();t.default=l,r.a.module("portainer.kubernetes").service("KubernetesHealthService",l)},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(8),s=n(433),o=n(3);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function d(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var p=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.KubernetesReplicaSetService=n,this.KubernetesControllerRevisionService=a,this.getAsync=this.getAsync.bind(this)}var t,n,a,r,c;return e.$inject=["$async","KubernetesReplicaSetService","KubernetesControllerRevisionService"],t=e,(n=[{key:"getAsync",value:(r=regeneratorRuntime.mark((function e(t){var n,a,r,c,d,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=t.ResourcePool,e.t0=t.ApplicationType,e.next=e.t0===o.KubernetesApplicationTypes.DEPLOYMENT?5:e.t0===o.KubernetesApplicationTypes.DAEMONSET?9:e.t0===o.KubernetesApplicationTypes.STATEFULSET?13:e.t0===o.KubernetesApplicationTypes.POD?17:19;break;case 5:return e.next=7,this.KubernetesReplicaSetService.get(n);case 7:return a=e.sent,e.abrupt("break",20);case 9:return e.next=11,this.KubernetesControllerRevisionService.get(n);case 11:return a=e.sent,e.abrupt("break",20);case 13:return e.next=15,this.KubernetesControllerRevisionService.get(n);case 15:return a=e.sent,e.abrupt("break",20);case 17:return a=[],e.abrupt("break",20);case 19:throw new i.default("Unable to determine which association to use for history");case 20:return a.length&&(r=s.default.getRevisions(a,t),c=l(r,2),d=c[0],u=c[1],t.CurrentRevision=d,t.Revisions=u),e.abrupt("return",t);case 24:throw e.prev=24,e.t1=e.catch(0),new i.default("",e.t1);case 27:case"end":return e.stop()}}),e,this,[[0,24]])})),c=function(){var e=this,t=arguments;return new Promise((function(n,a){var i=r.apply(e,t);function s(e){d(i,n,a,s,o,"next",e)}function o(e){d(i,n,a,s,o,"throw",e)}s(void 0)}))},function(e){return c.apply(this,arguments)})},{key:"get",value:function(e){return this.$async(this.getAsync,e)}}])&&u(t.prototype,n),a&&u(t,a),e}();t.default=p,r.a.module("portainer.kubernetes").service("KubernetesHistoryService",p)},function(e,t,n){"use strict";n.r(t);var a=n(20),r=n(2),i=n(1),s=n.n(i),o=n(8),l=n(11),c=n(242),d=n(236);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function m(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){m(i,a,r,s,o,"next",e)}function o(e){m(i,a,r,s,o,"throw",e)}s(void 0)}))}}function f(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var h=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.KubernetesNamespaces=n,this.getAsync=this.getAsync.bind(this),this.getAllAsync=this.getAllAsync.bind(this),this.createAsync=this.createAsync.bind(this),this.deleteAsync=this.deleteAsync.bind(this)}var t,n,i,s,p,m,h;return e.$inject=["$async","KubernetesNamespaces"],t=e,(n=[{key:"getAsync",value:(h=g(regeneratorRuntime.mark((function e(t){var n,a,r,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new l.KubernetesCommonParams).id=t,e.next=5,this.KubernetesNamespaces().status(n).$promise;case 5:return e.next=7,Promise.all([this.KubernetesNamespaces().get(n).$promise,this.KubernetesNamespaces().getYaml(n).$promise]);case 7:return a=e.sent,r=u(a,2),i=r[0],s=r[1],e.abrupt("return",c.default.apiToNamespace(i,s));case 14:throw e.prev=14,e.t0=e.catch(0),new o.default("Unable to retrieve namespace",e.t0);case 17:case"end":return e.stop()}}),e,this,[[0,14]])}))),function(e){return h.apply(this,arguments)})},{key:"getAllAsync",value:(m=g(regeneratorRuntime.mark((function e(){var t,n,i,s,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesNamespaces().get().$promise;case 3:return t=e.sent,n=Object(r.a)(t.items,(function(e){return l.KubernetesNamespaces().status({id:e.metadata.name}).$promise})),e.next=7,Object(d.default)(n);case 7:return i=e.sent,s=Object(r.a)(i.fulfilled,(function(e){if("Terminating"!==e.status.phase)return c.default.apiToNamespace(e)})),e.abrupt("return",Object(a.a)(s,void 0));case 12:throw e.prev=12,e.t0=e.catch(0),new o.default("Unable to retrieve namespaces",e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])}))),function(){return m.apply(this,arguments)})},{key:"get",value:function(e){return e?this.$async(this.getAsync,e):this.$async(this.getAllAsync)}},{key:"createAsync",value:(p=g(regeneratorRuntime.mark((function e(t){var n,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=c.default.createPayload(t),a={},e.next=5,this.KubernetesNamespaces().create(a,n).$promise;case 5:return r=e.sent,e.abrupt("return",r);case 9:throw e.prev=9,e.t0=e.catch(0),new o.default("Unable to create namespace",e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(e){return p.apply(this,arguments)})},{key:"create",value:function(e){return this.$async(this.createAsync,e)}},{key:"deleteAsync",value:(s=g(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new l.KubernetesCommonParams).id=t.Name,e.next=5,this.KubernetesNamespaces().delete(n).$promise;case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new o.default("Unable to delete namespace",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return s.apply(this,arguments)})},{key:"delete",value:function(e){return this.$async(this.deleteAsync,e)}}])&&f(t.prototype,n),i&&f(t,i),e}();t.default=h,s.a.module("portainer.kubernetes").service("KubernetesNamespaceService",h)},function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(1),i=n.n(r),s=n(8),o=n(115),l=n(11);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function u(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){u(i,a,r,s,o,"next",e)}function o(e){u(i,a,r,s,o,"throw",e)}s(void 0)}))}}function m(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var g=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.EndpointProvider=n,this.KubernetesPersistentVolumeClaims=a,this.getAsync=this.getAsync.bind(this),this.getAllAsync=this.getAllAsync.bind(this),this.createAsync=this.createAsync.bind(this),this.patchAsync=this.patchAsync.bind(this),this.deleteAsync=this.deleteAsync.bind(this)}var t,n,r,i,d,u,g,f;return e.$inject=["$async","EndpointProvider","KubernetesPersistentVolumeClaims"],t=e,(n=[{key:"getAsync",value:(f=p(regeneratorRuntime.mark((function e(t,n){var a,r,i,d,u,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=new l.KubernetesCommonParams).id=n,e.next=5,Promise.all([this.KubernetesPersistentVolumeClaims(t).get(a).$promise,this.KubernetesPersistentVolumeClaims(t).getYaml(a).$promise]);case 5:return r=e.sent,i=c(r,2),d=i[0],u=i[1],p=this.EndpointProvider.currentEndpoint().Kubernetes.Configuration.StorageClasses,e.abrupt("return",o.default.apiToPersistentVolumeClaim(d,p,u));case 13:throw e.prev=13,e.t0=e.catch(0),new s.default("Unable to retrieve persistent volume claim",e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(e,t){return f.apply(this,arguments)})},{key:"getAllAsync",value:(g=p(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesPersistentVolumeClaims(t).get().$promise;case 3:return n=e.sent,r=this.EndpointProvider.currentEndpoint().Kubernetes.Configuration.StorageClasses,e.abrupt("return",Object(a.a)(n.items,(function(e){return o.default.apiToPersistentVolumeClaim(e,r)})));case 8:throw e.prev=8,e.t0=e.catch(0),new s.default("Unable to retrieve persistent volume claims",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e){return g.apply(this,arguments)})},{key:"get",value:function(e,t){return t?this.$async(this.getAsync,e,t):this.$async(this.getAllAsync,e)}},{key:"createAsync",value:(u=p(regeneratorRuntime.mark((function e(t){var n,a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={},a=o.default.createPayload(t),r=a.metadata.namespace,e.next=6,this.KubernetesPersistentVolumeClaims(r).create(n,a).$promise;case 6:return i=e.sent,e.abrupt("return",i);case 10:throw e.prev=10,e.t0=e.catch(0),new s.default("Unable to create persistent volume claim",e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e){return u.apply(this,arguments)})},{key:"create",value:function(e){return this.$async(this.createAsync,e)}},{key:"patchAsync",value:(d=p(regeneratorRuntime.mark((function e(t,n){var a,r,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(a=new l.KubernetesCommonParams).id=n.Name,r=n.Namespace,(i=o.default.patchPayload(t,n)).length){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.KubernetesPersistentVolumeClaims(r).patch(a,i).$promise;case 9:return c=e.sent,e.abrupt("return",c);case 13:throw e.prev=13,e.t0=e.catch(0),new s.default("Unable to patch persistent volume claim",e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(e,t){return d.apply(this,arguments)})},{key:"patch",value:function(e,t){return this.$async(this.patchAsync,e,t)}},{key:"deleteAsync",value:(i=p(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new l.KubernetesCommonParams).id=t.Name,a=t.Namespace,e.next=6,this.KubernetesPersistentVolumeClaims(a).delete(n).$promise;case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),new s.default("Unable to delete persistent volume claim",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e){return i.apply(this,arguments)})},{key:"delete",value:function(e){return this.$async(this.deleteAsync,e)}}])&&m(t.prototype,n),r&&m(t,r),e}();t.default=g,i.a.module("portainer.kubernetes").service("KubernetesPersistentVolumeClaimService",g)},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(8);function s(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.KubernetesReplicaSets=n,this.getAllAsync=this.getAllAsync.bind(this)}var t,n,a,r,l;return e.$inject=["$async","KubernetesReplicaSets"],t=e,(n=[{key:"getAllAsync",value:(r=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesReplicaSets(t).get().$promise;case 3:return n=e.sent,e.abrupt("return",n.items);case 7:throw e.prev=7,e.t0=e.catch(0),new i.default("Unable to retrieve ReplicaSets",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})),l=function(){var e=this,t=arguments;return new Promise((function(n,a){var i=r.apply(e,t);function o(e){s(i,n,a,o,l,"next",e)}function l(e){s(i,n,a,o,l,"throw",e)}o(void 0)}))},function(e){return l.apply(this,arguments)})},{key:"get",value:function(e){return this.$async(this.getAllAsync,e)}}])&&o(t.prototype,n),a&&o(t,a),e}();t.default=l,r.a.module("portainer.kubernetes").service("KubernetesReplicaSetService",l)},function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(85),i=n(1),s=n.n(i),o=n(316),l=n(143),c=n(235),d=n(15),u=n(54),p=n(47);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function f(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){f(i,a,r,s,o,"next",e)}function o(e){f(i,a,r,s,o,"throw",e)}s(void 0)}))}}function v(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var b=function(){function e(t,n,a,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.KubernetesNamespaceService=n,this.KubernetesResourceQuotaService=a,this.KubernetesIngressService=r,this.getAsync=this.getAsync.bind(this),this.getAllAsync=this.getAllAsync.bind(this),this.createAsync=this.createAsync.bind(this),this.deleteAsync=this.deleteAsync.bind(this)}var t,n,i,s,g,f,b;return e.$inject=["$async","KubernetesNamespaceService","KubernetesResourceQuotaService","KubernetesIngressService"],t=e,(n=[{key:"getAsync",value:(b=h(regeneratorRuntime.mark((function e(t){var n,a,r,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesNamespaceService.get(t);case 3:return n=e.sent,e.next=6,Promise.allSettled([this.KubernetesResourceQuotaService.get(t,l.default.generateResourceQuotaName(t))]);case 6:return a=e.sent,r=m(a,1),i=r[0],s=o.default.apiToResourcePool(n),"fulfilled"===i.status&&(s.Quota=i.value,s.Yaml+="---\n"+i.value.Yaml),e.abrupt("return",s);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,this,[[0,14]])}))),function(e){return b.apply(this,arguments)})},{key:"getAllAsync",value:(f=h(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesNamespaceService.get();case 3:return t=e.sent,e.next=6,Promise.all(Object(a.a)(t,function(){var e=h(regeneratorRuntime.mark((function e(t){var n,a,i,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.Name,e.next=3,Promise.allSettled([r.KubernetesResourceQuotaService.get(n,l.default.generateResourceQuotaName(n))]);case 3:return a=e.sent,i=m(a,1),s=i[0],c=o.default.apiToResourcePool(t),"fulfilled"===s.status&&(c.Quota=s.value,c.Yaml+="---\n"+s.value.Yaml),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return n=e.sent,e.abrupt("return",n);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(){return f.apply(this,arguments)})},{key:"get",value:function(e){return e?this.$async(this.getAsync,e):this.$async(this.getAllAsync)}},{key:"createAsync",value:(g=h(regeneratorRuntime.mark((function e(t){var n,i,s,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Owner=p.default.ownerToLabel(t.Owner),e.prev=1,(n=new c.KubernetesNamespace).Name=t.Name,n.ResourcePoolName=t.Name,n.ResourcePoolOwner=t.Owner,e.next=8,this.KubernetesNamespaceService.create(n);case 8:if(!t.HasQuota){e.next=16;break}return(i=new r.KubernetesResourceQuota(t.Name)).CpuLimit=t.CpuLimit,i.MemoryLimit=d.default.bytesValue(t.MemoryLimit),i.ResourcePoolName=t.Name,i.ResourcePoolOwner=t.Owner,e.next=16,this.KubernetesResourceQuotaService.create(i);case 16:return s=Object(a.a)(t.IngressClasses,(function(e){if(e.Selected){e.Namespace=n.Name;var t=u.KubernetesIngressConverter.resourcePoolIngressClassFormValueToIngress(e);return o.KubernetesIngressService.create(t)}})),e.next=19,Promise.all(s);case 19:e.next=24;break;case 21:throw e.prev=21,e.t0=e.catch(1),e.t0;case 24:case"end":return e.stop()}}),e,this,[[1,21]])}))),function(e){return g.apply(this,arguments)})},{key:"create",value:function(e){return this.$async(this.createAsync,e)}},{key:"deleteAsync",value:(s=h(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesNamespaceService.delete(t.Namespace);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(e){return s.apply(this,arguments)})},{key:"delete",value:function(e){return this.$async(this.deleteAsync,e)}}])&&v(t.prototype,n),i&&v(t,i),e}();t.default=b,s.a.module("portainer.kubernetes").service("KubernetesResourcePoolService",b)},function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(1),i=n.n(r),s=n(8),o=n(11),l=n(177);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function u(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){u(i,a,r,s,o,"next",e)}function o(e){u(i,a,r,s,o,"throw",e)}s(void 0)}))}}function m(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var g=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.KubernetesResourceQuotas=n,this.getAsync=this.getAsync.bind(this),this.getAllAsync=this.getAllAsync.bind(this),this.createAsync=this.createAsync.bind(this),this.updateAsync=this.updateAsync.bind(this),this.deleteAsync=this.deleteAsync.bind(this)}var t,n,r,i,d,u,g,f;return e.$inject=["$async","KubernetesResourceQuotas"],t=e,(n=[{key:"getAsync",value:(f=p(regeneratorRuntime.mark((function e(t,n){var a,r,i,d,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=new o.KubernetesCommonParams).id=n,e.next=5,Promise.all([this.KubernetesResourceQuotas(t).get(a).$promise,this.KubernetesResourceQuotas(t).getYaml(a).$promise]);case 5:return r=e.sent,i=c(r,2),d=i[0],u=i[1],e.abrupt("return",l.default.apiToResourceQuota(d,u));case 12:throw e.prev=12,e.t0=e.catch(0),new s.default("Unable to retrieve resource quota",e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])}))),function(e,t){return f.apply(this,arguments)})},{key:"getAllAsync",value:(g=p(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesResourceQuotas(t).get().$promise;case 3:return n=e.sent,e.abrupt("return",Object(a.a)(n.items,(function(e){return l.default.apiToResourceQuota(e)})));case 7:throw e.prev=7,e.t0=e.catch(0),new s.default("Unable to retrieve resource quotas",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return g.apply(this,arguments)})},{key:"get",value:function(e,t){return t?this.$async(this.getAsync,e,t):this.$async(this.getAllAsync,e)}},{key:"createAsync",value:(u=p(regeneratorRuntime.mark((function e(t){var n,a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=l.default.createPayload(t),a=n.metadata.namespace,r={},e.next=6,this.KubernetesResourceQuotas(a).create(r,n).$promise;case 6:return i=e.sent,e.abrupt("return",l.default.apiToResourceQuota(i));case 10:throw e.prev=10,e.t0=e.catch(0),new s.default("Unable to create quota",e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e){return u.apply(this,arguments)})},{key:"create",value:function(e){return this.$async(this.createAsync,e)}},{key:"updateAsync",value:(d=p(regeneratorRuntime.mark((function e(t){var n,a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=l.default.updatePayload(t),(a=new o.KubernetesCommonParams).id=n.metadata.name,r=n.metadata.namespace,e.next=7,this.KubernetesResourceQuotas(r).update(a,n).$promise;case 7:return i=e.sent,e.abrupt("return",i);case 11:throw e.prev=11,e.t0=e.catch(0),new s.default("Unable to update resource quota",e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(e){return d.apply(this,arguments)})},{key:"update",value:function(e){return this.$async(this.updateAsync,e)}},{key:"deleteAsync",value:(i=p(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new o.KubernetesCommonParams).id=t.Name,e.next=5,this.KubernetesResourceQuotas(t.Namespace).delete(n).$promise;case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new s.default("Unable to delete quota",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return i.apply(this,arguments)})},{key:"delete",value:function(e){return this.$async(this.deleteAsync,e)}}])&&m(t.prototype,n),r&&m(t,r),e}();t.default=g,i.a.module("portainer.kubernetes").service("KubernetesResourceQuotaService",g)},function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(1),i=n.n(r),s=n(8),o=n(117),l=n(11);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function u(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){u(i,a,r,s,o,"next",e)}function o(e){u(i,a,r,s,o,"throw",e)}s(void 0)}))}}function m(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var g=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.KubernetesSecrets=n,this.getAsync=this.getAsync.bind(this),this.getAllAsync=this.getAllAsync.bind(this),this.createAsync=this.createAsync.bind(this),this.updateAsync=this.updateAsync.bind(this),this.deleteAsync=this.deleteAsync.bind(this)}var t,n,r,i,d,u,g,f;return e.$inject=["$async","KubernetesSecrets"],t=e,(n=[{key:"getAsync",value:(f=p(regeneratorRuntime.mark((function e(t,n){var a,r,i,d,u,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=new l.KubernetesCommonParams).id=n,e.next=5,Promise.all([this.KubernetesSecrets(t).get(a).$promise,this.KubernetesSecrets(t).getYaml(a).$promise]);case 5:return r=e.sent,i=c(r,2),d=i[0],u=i[1],p=o.default.apiToSecret(d,u),e.abrupt("return",p);case 13:throw e.prev=13,e.t0=e.catch(0),new s.default("Unable to retrieve secret",e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(e,t){return f.apply(this,arguments)})},{key:"getAllAsync",value:(g=p(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesSecrets(t).get().$promise;case 3:return n=e.sent,e.abrupt("return",Object(a.a)(n.items,(function(e){return o.default.apiToSecret(e)})));case 7:throw e.prev=7,e.t0=e.catch(0),new s.default("Unable to retrieve secrets",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return g.apply(this,arguments)})},{key:"get",value:function(e,t){return t?this.$async(this.getAsync,e,t):this.$async(this.getAllAsync,e)}},{key:"createAsync",value:(u=p(regeneratorRuntime.mark((function e(t){var n,a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=o.default.createPayload(t),a=n.metadata.namespace,r={},e.next=6,this.KubernetesSecrets(a).create(r,n).$promise;case 6:return i=e.sent,e.abrupt("return",i);case 10:throw e.prev=10,e.t0=e.catch(0),new s.default("",e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e){return u.apply(this,arguments)})},{key:"create",value:function(e){return this.$async(this.createAsync,e)}},{key:"updateAsync",value:(d=p(regeneratorRuntime.mark((function e(t){var n,a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=o.default.updatePayload(t),(a=new l.KubernetesCommonParams).id=n.metadata.name,r=n.metadata.namespace,e.next=7,this.KubernetesSecrets(r).update(a,n).$promise;case 7:return i=e.sent,e.abrupt("return",o.default.apiToSecret(i));case 11:throw e.prev=11,e.t0=e.catch(0),new s.default("Unable to update secret",e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(e){return d.apply(this,arguments)})},{key:"update",value:function(e){return this.$async(this.updateAsync,e)}},{key:"deleteAsync",value:(i=p(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new l.KubernetesCommonParams).id=t.Name,a=t.Namespace,e.next=6,this.KubernetesSecrets(a).delete(n).$promise;case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),new s.default("Unable to delete secret",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e){return i.apply(this,arguments)})},{key:"delete",value:function(e){return this.$async(this.deleteAsync,e)}}])&&m(t.prototype,n),r&&m(t,r),e}();t.default=g,i.a.module("portainer.kubernetes").service("KubernetesSecretService",g)},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(8),s=n(11),o=n(173);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function d(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){d(i,a,r,s,o,"next",e)}function o(e){d(i,a,r,s,o,"throw",e)}s(void 0)}))}}function p(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var m=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.KubernetesServices=n,this.getAsync=this.getAsync.bind(this),this.getAllAsync=this.getAllAsync.bind(this),this.createAsync=this.createAsync.bind(this),this.patchAsync=this.patchAsync.bind(this),this.deleteAsync=this.deleteAsync.bind(this)}var t,n,a,r,c,d,m,g;return e.$inject=["$async","KubernetesServices"],t=e,(n=[{key:"getAsync",value:(g=u(regeneratorRuntime.mark((function e(t,n){var a,r,o,c,d,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=new s.KubernetesCommonParams).id=n,e.next=5,Promise.all([this.KubernetesServices(t).get(a).$promise,this.KubernetesServices(t).getYaml(a).$promise]);case 5:return r=e.sent,o=l(r,2),c=o[0],d=o[1],u={Raw:c,Yaml:d.data},e.abrupt("return",u);case 13:throw e.prev=13,e.t0=e.catch(0),new i.default("Unable to retrieve service",e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(e,t){return g.apply(this,arguments)})},{key:"getAllAsync",value:(m=u(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesServices(t).get().$promise;case 3:return n=e.sent,e.abrupt("return",n.items);case 7:throw e.prev=7,e.t0=e.catch(0),new i.default("Unable to retrieve services",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return m.apply(this,arguments)})},{key:"get",value:function(e,t){return t?this.$async(this.getAsync,e,t):this.$async(this.getAllAsync,e)}},{key:"createAsync",value:(d=u(regeneratorRuntime.mark((function e(t){var n,a,r,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={},a=o.default.createPayload(t),r=a.metadata.namespace,e.next=6,this.KubernetesServices(r).create(n,a).$promise;case 6:return s=e.sent,e.abrupt("return",s);case 10:throw e.prev=10,e.t0=e.catch(0),new i.default("Unable to create service",e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e){return d.apply(this,arguments)})},{key:"create",value:function(e){return this.$async(this.createAsync,e)}},{key:"patchAsync",value:(c=u(regeneratorRuntime.mark((function e(t,n){var a,r,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(a=new s.KubernetesCommonParams).id=n.Name,r=n.Namespace,(l=o.default.patchPayload(t,n)).length){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.KubernetesServices(r).patch(a,l).$promise;case 9:return c=e.sent,e.abrupt("return",c);case 13:throw e.prev=13,e.t0=e.catch(0),new i.default("Unable to patch service",e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(e,t){return c.apply(this,arguments)})},{key:"patch",value:function(e,t){return this.$async(this.patchAsync,e,t)}},{key:"deleteAsync",value:(r=u(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new s.KubernetesCommonParams).id=t.Name,a=t.Namespace,e.next=6,this.KubernetesServices(a).delete(n).$promise;case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),new i.default(" service",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e){return r.apply(this,arguments)})},{key:"delete",value:function(e){return this.$async(this.deleteAsync,e)}}])&&p(t.prototype,n),a&&p(t,a),e}();t.default=m,r.a.module("portainer.kubernetes").service("KubernetesServiceService",m)},function(e,t,n){"use strict";n.r(t);var a=n(20),r=n(52),i=n(2),s=n(1),o=n.n(s);function l(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.KubernetesApplicationService=n,this.getAllAsync=this.getAllAsync.bind(this)}var t,n,s,o,d;return e.$inject=["$async","KubernetesApplicationService"],t=e,(n=[{key:"getAllAsync",value:(o=regeneratorRuntime.mark((function e(t){var n,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesApplicationService.get(t);case 3:return n=e.sent,s=Object(i.a)(n,(function(e){return e.StackName})),e.abrupt("return",Object(r.a)(Object(a.a)(s,"-")));case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,this,[[0,8]])})),d=function(){var e=this,t=arguments;return new Promise((function(n,a){var r=o.apply(e,t);function i(e){l(r,n,a,i,s,"next",e)}function s(e){l(r,n,a,i,s,"throw",e)}i(void 0)}))},function(e){return d.apply(this,arguments)})},{key:"get",value:function(e){return this.$async(this.getAllAsync,e)}}])&&c(t.prototype,n),s&&c(t,s),e}();t.default=d,o.a.module("portainer.kubernetes").service("KubernetesStackService",d)},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(8),s=n(11),o=n(208);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function d(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){d(i,a,r,s,o,"next",e)}function o(e){d(i,a,r,s,o,"throw",e)}s(void 0)}))}}function p(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var m=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.KubernetesStatefulSets=n,this.KubernetesServiceService=a,this.getAsync=this.getAsync.bind(this),this.getAllAsync=this.getAllAsync.bind(this),this.createAsync=this.createAsync.bind(this),this.patchAsync=this.patchAsync.bind(this),this.rollbackAsync=this.rollbackAsync.bind(this),this.deleteAsync=this.deleteAsync.bind(this)}var t,n,a,r,c,d,m,g,f;return e.$inject=["$async","KubernetesStatefulSets","KubernetesServiceService"],t=e,(n=[{key:"getAsync",value:(f=u(regeneratorRuntime.mark((function e(t,n){var a,r,o,c,d,u,p,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=new s.KubernetesCommonParams).id=n,e.next=5,Promise.all([this.KubernetesStatefulSets(t).get(a).$promise,this.KubernetesStatefulSets(t).getYaml(a).$promise]);case 5:if(r=e.sent,o=l(r,2),c=o[0],d=o[1],u={Raw:c,Yaml:d.data},!(p=c.spec.serviceName)){e.next=21;break}return e.prev=12,e.next=15,this.KubernetesServiceService.get(t,p);case 15:m=e.sent,u.Yaml+="---\n"+m.Yaml,e.next=21;break;case 19:e.prev=19,e.t0=e.catch(12);case 21:return e.abrupt("return",u);case 24:throw e.prev=24,e.t1=e.catch(0),new i.default("Unable to retrieve StatefulSet",e.t1);case 27:case"end":return e.stop()}}),e,this,[[0,24],[12,19]])}))),function(e,t){return f.apply(this,arguments)})},{key:"getAllAsync",value:(g=u(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesStatefulSets(t).get().$promise;case 3:return n=e.sent,e.abrupt("return",n.items);case 7:throw e.prev=7,e.t0=e.catch(0),new i.default("Unable to retrieve StatefulSets",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return g.apply(this,arguments)})},{key:"get",value:function(e,t){return t?this.$async(this.getAsync,e,t):this.$async(this.getAllAsync,e)}},{key:"createAsync",value:(m=u(regeneratorRuntime.mark((function e(t){var n,a,r,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={},a=o.default.createPayload(t),r=a.metadata.namespace,e.next=6,this.KubernetesStatefulSets(r).create(n,a).$promise;case 6:return s=e.sent,e.abrupt("return",s);case 10:throw e.prev=10,e.t0=e.catch(0),new i.default("Unable to create statefulSet",e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e){return m.apply(this,arguments)})},{key:"create",value:function(e){return this.$async(this.createAsync,e)}},{key:"patchAsync",value:(d=u(regeneratorRuntime.mark((function e(t,n){var a,r,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(a=new s.KubernetesCommonParams).id=n.Name,r=n.Namespace,(l=o.default.patchPayload(t,n)).length){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.KubernetesStatefulSets(r).patch(a,l).$promise;case 9:return c=e.sent,e.abrupt("return",c);case 13:throw e.prev=13,e.t0=e.catch(0),new i.default("Unable to patch statefulSet",e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(e,t){return d.apply(this,arguments)})},{key:"patch",value:function(e,t){return this.$async(this.patchAsync,e,t)}},{key:"deleteAsync",value:(c=u(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new s.KubernetesCommonParams).id=t.Name,a=t.Namespace,e.next=6,this.KubernetesStatefulSets(a).delete(n).$promise;case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),new i.default(" statefulSet",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e){return c.apply(this,arguments)})},{key:"delete",value:function(e){return this.$async(this.deleteAsync,e)}},{key:"rollbackAsync",value:(r=u(regeneratorRuntime.mark((function e(t,n,a){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(r=new s.KubernetesCommonParams).id=n,e.next=5,this.KubernetesStatefulSets(t).rollback(r,a).$promise;case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new i.default("Unable to rollback statefulSet",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e,t,n){return r.apply(this,arguments)})},{key:"rollback",value:function(e,t,n){return this.$async(this.rollbackAsync,e,t,n)}}])&&p(t.prototype,n),a&&p(t,a),e}();t.default=m,r.a.module("portainer.kubernetes").service("KubernetesStatefulSetService",m)},function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(1),i=n.n(r),s=n(8),o=n(320),l=n(11);function c(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){c(i,a,r,s,o,"next",e)}function o(e){c(i,a,r,s,o,"throw",e)}s(void 0)}))}}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var p=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.KubernetesStorage=n,this.getAsync=this.getAsync.bind(this),this.patchAsync=this.patchAsync.bind(this)}var t,n,r,i,c;return e.$inject=["$async","KubernetesStorage"],t=e,(n=[{key:"getAsync",value:(c=d(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={endpointId:t},e.next=4,this.KubernetesStorage().get(n).$promise;case 4:return r=e.sent,i=Object(a.a)(r.items,(function(e){return o.default.apiToStorageClass(e)})),e.abrupt("return",i);case 9:throw e.prev=9,e.t0=e.catch(0),new s.default("Unable to retrieve storage classes",e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(e){return c.apply(this,arguments)})},{key:"get",value:function(e){return this.$async(this.getAsync,e)}},{key:"patchAsync",value:(i=d(regeneratorRuntime.mark((function e(t,n,a){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(r=new l.KubernetesCommonParams).id=a.Name,r.endpointId=t,i=o.default.patchPayload(n,a),e.next=7,this.KubernetesStorage().patch(r,i).$promise;case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),new s.default("Unable to patch storage class",e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(e,t,n){return i.apply(this,arguments)})},{key:"patch",value:function(e,t,n){return this.$async(this.patchAsync,e,t,n)}}])&&u(t.prototype,n),r&&u(t,r),e}();t.default=p,i.a.module("portainer.kubernetes").service("KubernetesStorageService",p)},function(e,t,n){"use strict";n.r(t);var a=n(70),r=n(2),i=n(1),s=n.n(i),o=n(321);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function d(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){d(i,a,r,s,o,"next",e)}function o(e){d(i,a,r,s,o,"throw",e)}s(void 0)}))}}function p(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var m=function(){function e(t,n,a,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.KubernetesResourcePoolService=n,this.KubernetesApplicationService=a,this.KubernetesPersistentVolumeClaimService=r,this.getAsync=this.getAsync.bind(this),this.getAllAsync=this.getAllAsync.bind(this),this.deleteAsync=this.deleteAsync.bind(this)}var t,n,i,s,c,d;return e.$inject=["$async","KubernetesResourcePoolService","KubernetesApplicationService","KubernetesPersistentVolumeClaimService"],t=e,(n=[{key:"getAsync",value:(d=u(regeneratorRuntime.mark((function e(t,n){var a,r,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=Promise,e.next=4,this.KubernetesPersistentVolumeClaimService.get(t,n);case 4:return e.t1=e.sent,e.next=7,this.KubernetesResourcePoolService.get(t);case 7:return e.t2=e.sent,e.t3=[e.t1,e.t2],e.next=11,e.t0.all.call(e.t0,e.t3);case 11:return a=e.sent,r=l(a,2),i=r[0],s=r[1],e.abrupt("return",o.default.pvcToVolume(i,s));case 18:throw e.prev=18,e.t4=e.catch(0),e.t4;case 21:case"end":return e.stop()}}),e,this,[[0,18]])}))),function(e,t){return d.apply(this,arguments)})},{key:"getAllAsync",value:(c=u(regeneratorRuntime.mark((function e(t){var n,i,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesResourcePoolService.get(t);case 3:return n=e.sent,e.next=6,Promise.all(Object(r.a)(n,function(){var e=u(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.KubernetesPersistentVolumeClaimService.get(t.Namespace.Name);case 2:return n=e.sent,e.abrupt("return",Object(r.a)(n,(function(e){return o.default.pvcToVolume(e,t)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return i=e.sent,e.abrupt("return",Object(a.a)(i));case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e){return c.apply(this,arguments)})},{key:"get",value:function(e,t){return t?this.$async(this.getAsync,e,t):this.$async(this.getAllAsync,e)}},{key:"deleteAsync",value:(s=u(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesPersistentVolumeClaimService.delete(t.PersistentVolumeClaim);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(e){return s.apply(this,arguments)})},{key:"delete",value:function(e){return this.$async(this.deleteAsync,e)}}])&&p(t.prototype,n),i&&p(t,i),e}();t.default=m,s.a.module("portainer.kubernetes").service("KubernetesVolumeService",m)},function(e,t,n){var a=n(1396);angular.module("portainer.kubernetes").component("kubernetesApplicationsView",{templateUrl:a,controller:"KubernetesApplicationsController",controllerAs:"ctrl",bindings:{$transition$:"<"}})},function(e,t){var n="app/kubernetes/views/applications/applications.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<kubernetes-view-header title="" state="kubernetes.applications" view-ready="ctrl.state.viewReady">\n  Applications\n</kubernetes-view-header>\n\n<kubernetes-view-loading view-ready="ctrl.state.viewReady"></kubernetes-view-loading>\n\n<div ng-if="ctrl.state.viewReady">\n  <information-panel title-text="Advanced deployment" ng-if="ctrl.state.isAdmin">\n    <span class="small">\n      <p class="text-muted">\n        <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n        As an administrator user, you have access to the advanced deployment feature allowing you to deploy any Kubernetes manifest inside your cluster.\n      </p>\n      <p>\n        <button type="button" class="btn btn-sm btn-primary" ui-sref="kubernetes.deploy">\n          <i class="fa fa-file-code space-right" aria-hidden="true"></i>Advanced deployment\n        </button>\n      </p>\n    </span>\n  </information-panel>\n\n  <div class="row">\n    <div class="col-sm-12">\n      <rd-widget>\n        <rd-widget-body classes="no-padding">\n          <uib-tabset active="ctrl.state.activeTab" justified="true" type="pills">\n            <uib-tab index="0" classes="btn-sm" select="ctrl.selectTab(0)">\n              <uib-tab-heading> <i class="fa fa-laptop-code space-right" aria-hidden="true"></i> Applications </uib-tab-heading>\n              <kubernetes-applications-datatable\n                dataset="ctrl.applications"\n                table-key="kubernetes.applications"\n                order-by="Name"\n                remove-action="ctrl.removeAction"\n                refresh-callback="ctrl.getApplications"\n                on-publishing-mode-click="(ctrl.onPublishingModeClick)"\n              >\n              </kubernetes-applications-datatable>\n            </uib-tab>\n            <uib-tab index="1" classes="btn-sm" select="ctrl.selectTab(1)">\n              <uib-tab-heading> <i class="fa fa-exchange-alt space-right" aria-hidden="true"></i>  </uib-tab-heading>\n              <kubernetes-applications-ports-datatable dataset="ctrl.ports" table-key="kubernetes.applications.ports" order-by="Name" refresh-callback="ctrl.getApplications">\n              </kubernetes-applications-ports-datatable>\n            </uib-tab>\n            <uib-tab index="2" classes="btn-sm" select="ctrl.selectTab(2)">\n              <uib-tab-heading> <i class="fa fa-th-list space-right" aria-hidden="true"></i> Stacks </uib-tab-heading>\n              <kubernetes-applications-stacks-datatable\n                dataset="ctrl.stacks"\n                table-key="kubernetes.applications.stacks"\n                order-by="Name"\n                refresh-callback="ctrl.getApplications"\n                remove-action="ctrl.removeStacksAction"\n              >\n              </kubernetes-applications-stacks-datatable>\n            </uib-tab>\n          </uib-tabset>\n        </rd-widget-body>\n      </rd-widget>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(7),r=n(22),i=n(2),s=n(1),o=n.n(s),l=n(434),c=n(13);function d(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function p(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){p(i,a,r,s,o,"next",e)}function o(e){p(i,a,r,s,o,"throw",e)}s(void 0)}))}}function g(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var f=function(){function e(t,n,a,r,i,s,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.$state=n,this.Notifications=a,this.KubernetesApplicationService=r,this.Authentication=i,this.ModalService=s,this.LocalStorage=o,this.onInit=this.onInit.bind(this),this.getApplications=this.getApplications.bind(this),this.getApplicationsAsync=this.getApplicationsAsync.bind(this),this.removeAction=this.removeAction.bind(this),this.removeActionAsync=this.removeActionAsync.bind(this),this.removeStacksAction=this.removeStacksAction.bind(this),this.removeStacksActionAsync=this.removeStacksActionAsync.bind(this),this.onPublishingModeClick=this.onPublishingModeClick.bind(this)}var t,n,s,o,u,p,f;return e.$inject=["$async","$state","Notifications","KubernetesApplicationService","Authentication","ModalService","LocalStorage"],t=e,(n=[{key:"selectTab",value:function(e){this.LocalStorage.storeActiveTab("applications",e)}},{key:"removeStacksActionAsync",value:(f=m(regeneratorRuntime.mark((function e(t){var n,a,s,o,l,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.length,a=d(t),e.prev=2,a.s();case 4:if((s=a.n()).done){e.next=23;break}return o=s.value,e.prev=6,l=Object(i.a)(o.Applications,(function(e){return c.KubernetesApplicationService.delete(e)})),e.next=10,Promise.all(l);case 10:this.Notifications.success("",o.Name),Object(r.a)(this.stacks,{Name:o.Name}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),this.Notifications.error("",e.t0," stack");case 17:return e.prev=17,0==--n&&this.$state.reload(),e.finish(17);case 21:e.next=4;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(2),a.e(e.t1);case 28:return e.prev=28,a.f(),e.finish(28);case 31:case"end":return e.stop()}}),e,this,[[2,25,28,31],[6,14,17,21]])}))),function(e){return f.apply(this,arguments)})},{key:"removeStacksAction",value:function(e){var t=this;this.ModalService.confirmDeletion("",(function(n){if(n)return t.$async(t.removeStacksActionAsync,e)}))}},{key:"removeActionAsync",value:(p=m(regeneratorRuntime.mark((function e(t){var n,a,r,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.length,a=d(t),e.prev=2,a.s();case 4:if((r=a.n()).done){e.next=23;break}return i=r.value,e.prev=6,e.next=9,this.KubernetesApplicationService.delete(i);case 9:this.Notifications.success("",i.Name),s=this.applications.indexOf(i),this.applications.splice(s,1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),this.Notifications.error("",e.t0," application");case 17:return e.prev=17,0==--n&&this.$state.reload(),e.finish(17);case 21:e.next=4;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(2),a.e(e.t1);case 28:return e.prev=28,a.f(),e.finish(28);case 31:case"end":return e.stop()}}),e,this,[[2,25,28,31],[6,14,17,21]])}))),function(e){return p.apply(this,arguments)})},{key:"removeAction",value:function(e){var t=this;this.ModalService.confirmDeletion("Do you want to remove the selected application(s)?",(function(n){if(n)return t.$async(t.removeActionAsync,e)}))}},{key:"onPublishingModeClick",value:function(e){this.state.activeTab=1,Object(a.a)(this.ports,(function(t){t.Expanded=!1,t.Highlighted=!1,t.Name===e.Name&&t.Ports.length>1&&(t.Expanded=!0,t.Highlighted=!0)}))}},{key:"getApplicationsAsync",value:(u=m(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesApplicationService.get();case 3:t=e.sent,this.applications=t,this.stacks=l.default.stacksFromApplications(t),this.ports=c.default.portMappingsFromApplications(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),this.Notifications.error("",e.t0,"");case 12:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(){return u.apply(this,arguments)})},{key:"getApplications",value:function(){return this.$async(this.getApplicationsAsync)}},{key:"onInit",value:(o=m(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state={activeTab:this.LocalStorage.getActiveTab("applications"),currentName:this.$state.$current.name,isAdmin:this.Authentication.isAdmin(),viewReady:!1},e.next=3,this.getApplications();case 3:this.state.viewReady=!0;case 4:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"$onInit",value:function(){return this.$async(this.onInit)}},{key:"$onDestroy",value:function(){this.state.currentName!==this.$state.$current.name&&this.LocalStorage.storeActiveTab("applications",0)}}])&&g(t.prototype,n),s&&g(t,s),e}();t.default=f,o.a.module("portainer.kubernetes").controller("KubernetesApplicationsController",f)},function(e,t,n){var a=n(1399);angular.module("portainer.kubernetes").component("kubernetesApplicationConsoleView",{templateUrl:a,controller:"KubernetesApplicationConsoleController",controllerAs:"ctrl",bindings:{$transition$:"<"}})},function(e,t){var n="app/kubernetes/views/applications/console/console.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<kubernetes-view-header title="" state="kubernetes.applications.application.console" view-ready="ctrl.state.viewReady">\n  <a ui-sref="kubernetes.resourcePools">Resource pools</a> &gt;\n  <a ui-sref="kubernetes.resourcePools.resourcePool({ id: ctrl.application.ResourcePool })">{{ ctrl.application.ResourcePool }}</a> &gt;\n  <a ui-sref="kubernetes.applications">Applications</a> &gt;\n  <a ui-sref="kubernetes.applications.application({ name: ctrl.application.Name, namespace: ctrl.application.ResourcePool })">{{ ctrl.application.Name }}</a> &gt; Pods &gt;\n  {{ ctrl.podName }} &gt; Containers &gt; {{ ctrl.containerName }} &gt; \n</kubernetes-view-header>\n\n<kubernetes-view-loading view-ready="ctrl.state.viewReady"></kubernetes-view-loading>\n\n<div ng-if="ctrl.state.viewReady">\n  <div class="row">\n    <div class="col-sm-12">\n      <rd-widget>\n        <rd-widget-body>\n          <form class="form-horizontal" autocomplete="off">\n            <div class="col-sm-12 form-section-title">\n              \n            </div>\n            \x3c!-- Command --\x3e\n            <div class="form-group">\n              <label for="console_command" class="col-sm-1 control-label text-left"></label>\n              <div class="col-sm-10 input-group">\n                <span class="input-group-addon">\n                  <i class="fas fa-terminal" aria-hidden="true"></i>\n                </span>\n                <input\n                  type="text"\n                  class="form-control"\n                  placeholder="/bin/bash"\n                  ng-model="ctrl.state.command"\n                  name="console_command"\n                  uib-typeahead="command for command in ctrl.state.availableCommands | filter:$viewValue | limitTo:5"\n                  typeahead-show-hint="true"\n                  typeahead-min-length="0"\n                  auto-focus\n                />\n              </div>\n            </div>\n            \x3c!-- !command --\x3e\n            <div class="form-group">\n              <div class="col-sm-12">\n                <button\n                  type="button"\n                  class="btn btn-primary btn-sm"\n                  style="margin: 0;"\n                  ng-if="!ctrl.state.connected"\n                  ng-disabled="!ctrl.state.command || ctrl.state.connected"\n                  ng-click="ctrl.connectConsole()"\n                  button-spinner="ctrl.state.actionInProgress"\n                >\n                  <span ng-hide="ctrl.state.actionInProgress"></span>\n                  <span ng-show="ctrl.state.actionInProgress">Connection in progress...</span>\n                </button>\n                <button type="button" class="btn btn-primary btn-sm" style="margin: 0;" ng-if="ctrl.state.connected" ng-click="ctrl.disconnect()">\n                  Disconnect\n                </button>\n              </div>\n            </div>\n          </form>\n        </rd-widget-body>\n      </rd-widget>\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="col-sm-12">\n      <div id="terminal-container" class="terminal-container"></div>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(202);function s(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=function(){function e(t,n,a,r,i,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.$state=n,this.Notifications=a,this.KubernetesApplicationService=r,this.EndpointProvider=i,this.LocalStorage=s,this.onInit=this.onInit.bind(this)}var t,n,a,r,l;return e.$inject=["$async","$state","Notifications","KubernetesApplicationService","EndpointProvider","LocalStorage"],t=e,(n=[{key:"disconnect",value:function(){this.state.socket.close(),this.state.term.dispose(),this.state.connected=!1}},{key:"configureSocketAndTerminal",value:function(e,t){e.onopen=function(){var e=document.getElementById("terminal-container");t.open(e),t.setOption("cursorBlink",!0),t.focus()},t.on("data",(function(t){e.send(t)})),e.onmessage=function(e){t.write(e.data)},e.onerror=function(e){this.disconnect(),this.Notifications.error("",e,"Websocket connection error")}.bind(this),this.state.socket.onclose=function(){this.disconnect()}.bind(this),this.state.connected=!0}},{key:"connectConsole",value:function(){var e={token:this.LocalStorage.getJWT(),endpointId:this.EndpointProvider.endpointID(),namespace:this.application.ResourcePool,podName:this.podName,containerName:this.containerName,command:this.state.command},t=window.location.href.split("#")[0]+"api/websocket/pod?"+Object.keys(e).map((function(t){return t+"="+e[t]})).join("&");t=t.indexOf("https")>-1?t.replace("https://","wss://"):t.replace("http://","ws://"),this.state.socket=new WebSocket(t),this.state.term=new i.Terminal,this.configureSocketAndTerminal(this.state.socket,this.state.term)}},{key:"onInit",value:(r=regeneratorRuntime.mark((function e(){var t,n,a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=["/bin/bash","/bin/sh"],this.state={actionInProgress:!1,availableCommands:t,command:t[1],connected:!1,socket:null,term:null,viewReady:!1},n=this.$transition$.params().pod,a=this.$transition$.params().name,r=this.$transition$.params().namespace,i=this.$transition$.params().container,this.podName=n,this.containerName=i,e.prev=8,e.next=11,this.KubernetesApplicationService.get(r,a);case 11:this.application=e.sent,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),this.Notifications.error("",e.t0,"Unable to retrieve application logs");case 17:return e.prev=17,this.state.viewReady=!0,e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[8,14,17,20]])})),l=function(){var e=this,t=arguments;return new Promise((function(n,a){var i=r.apply(e,t);function o(e){s(i,n,a,o,l,"next",e)}function l(e){s(i,n,a,o,l,"throw",e)}o(void 0)}))},function(){return l.apply(this,arguments)})},{key:"$onInit",value:function(){return this.$async(this.onInit)}}])&&o(t.prototype,n),a&&o(t,a),e}();t.default=l,r.a.module("portainer.kubernetes").controller("KubernetesApplicationConsoleController",l)},function(e,t,n){var a=n(1402);angular.module("portainer.kubernetes").component("kubernetesCreateApplicationView",{templateUrl:a,controller:"KubernetesCreateApplicationController",controllerAs:"ctrl",bindings:{$transition$:"<"}})},function(e,t){var n="app/kubernetes/views/applications/create/createApplication.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<kubernetes-view-header ng-if="!ctrl.state.isEdit" title="" state="kubernetes.applications.new" view-ready="ctrl.state.viewReady">\n  <a ui-sref="kubernetes.applications">Applications</a> &gt; Create an application\n</kubernetes-view-header>\n<kubernetes-view-header ng-if="ctrl.state.isEdit" title="" state="kubernetes.applications.application.edit" view-ready="ctrl.state.viewReady">\n  <a ui-sref="kubernetes.resourcePools">Resource pools</a> &gt;\n  <a ui-sref="kubernetes.resourcePools.resourcePool({ id: ctrl.application.ResourcePool })">{{ ctrl.application.ResourcePool }}</a> &gt;\n  <a ui-sref="kubernetes.applications">Applications</a> &gt;\n  <a ui-sref="kubernetes.applications.application({ name: ctrl.application.Name, namespace: ctrl.application.ResourcePool })">{{ ctrl.application.Name }}</a> &gt; Edit\n</kubernetes-view-header>\n\n<kubernetes-view-loading view-ready="ctrl.state.viewReady"></kubernetes-view-loading>\n\n<div ng-if="ctrl.state.viewReady">\n  <div class="row">\n    <div class="col-xs-12">\n      <rd-widget>\n        <rd-widget-body>\n          <form class="form-horizontal" name="kubernetesApplicationCreationForm" autocomplete="off">\n            \x3c!-- #region NAME FIELD --\x3e\n            <div class="form-group">\n              <label for="application_name" class="col-sm-1 control-label text-left"></label>\n              <div class="col-sm-11">\n                <input\n                  type="text"\n                  class="form-control"\n                  name="application_name"\n                  ng-model="ctrl.formValues.Name"\n                  ng-change="ctrl.onChangeName()"\n                  placeholder="my-app"\n                  ng-pattern="/^[a-z]([-a-z0-9]*[a-z0-9])?$/"\n                  auto-focus\n                  required\n                  ng-disabled="ctrl.state.isEdit"\n                />\n              </div>\n            </div>\n            <div class="form-group" ng-show="kubernetesApplicationCreationForm.application_name.$invalid || ctrl.state.alreadyExists">\n              <div class="col-sm-12 small text-warning">\n                <div ng-messages="kubernetesApplicationCreationForm.application_name.$error">\n                  <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n                  <p ng-message="pattern"\n                    ><i class="fa fa-exclamation-triangle" aria-hidden="true"></i>  \'-\', \n                     ( \'my-name\', or \'abc-123\').</p\n                  >\n                </div>\n                <p ng-if="ctrl.state.alreadyExists"\n                  ><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p\n                >\n              </div>\n            </div>\n            \x3c!-- #endregion --\x3e\n\n            \x3c!-- #region IMAGE FIELD --\x3e\n            <div class="form-group">\n              <label for="container_image" class="col-sm-1 control-label text-left"></label>\n              <div class="col-sm-11">\n                <input\n                  type="text"\n                  class="form-control"\n                  name="container_image"\n                  ng-model="ctrl.formValues.Image"\n                  placeholder="nginx:latest"\n                  required\n                  ng-disabled="ctrl.formValues.Containers.length > 1"\n                />\n              </div>\n            </div>\n            <div class="form-group" ng-show="kubernetesApplicationCreationForm.container_image.$invalid">\n              <div class="col-sm-12 small text-warning">\n                <div ng-messages="kubernetesApplicationCreationForm.container_image.$error">\n                  <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n                </div>\n              </div>\n            </div>\n            \x3c!-- #endregion --\x3e\n\n            <div class="col-sm-12 form-section-title">\n              Resource pool\n            </div>\n            \x3c!-- #region RESOURCE POOL --\x3e\n            <div class="form-group">\n              <label for="resource-pool-selector" class="col-sm-1 control-label text-left">Resource pool</label>\n              <div class="col-sm-11">\n                <select\n                  class="form-control"\n                  id="resource-pool-selector"\n                  ng-model="ctrl.formValues.ResourcePool"\n                  ng-options="resourcePool.Namespace.Name for resourcePool in ctrl.resourcePools"\n                  ng-change="ctrl.onResourcePoolSelectionChange()"\n                  ng-disabled="ctrl.state.isEdit"\n                ></select>\n              </div>\n            </div>\n            <div class="form-group" ng-if="ctrl.state.resourcePoolHasQuota && ctrl.resourceQuotaCapacityExceeded()">\n              <div class="col-sm-12 small text-warning">\n                <i class="fa fa-exclamation-triangle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                  \n \n              </div>\n            </div>\n            \x3c!-- #endregion --\x3e\n\n            <div class="col-sm-12 form-section-title">\n              \n            </div>\n            \x3c!-- #region STACK --\x3e\n            <div class="form-group">\n              <div class="col-sm-12 small text-muted">\n                <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                Portainer\n                \n              </div>\n            </div>\n\n            <div class="form-group">\n              <label for="stack_name" class="col-sm-1 control-label text-left">Stack</label>\n              <div class="col-sm-11">\n                <input\n                  type="text"\n                  class="form-control"\n                  placeholder="myStack"\n                  ng-model="ctrl.formValues.StackName"\n                  name="stack_name"\n                  uib-typeahead="stack for stack in ctrl.stacks | filter:$viewValue | limitTo:7"\n                  typeahead-show-hint="true"\n                  typeahead-min-length="0"\n                />\n              </div>\n            </div>\n            \x3c!-- #endregion --\x3e\n\n            <div class="col-sm-12 form-section-title">\n              Environment\n            </div>\n            \x3c!-- #region ENVIRONMENT VARIABLES --\x3e\n            <div class="form-group">\n              <div class="col-sm-12">\n                <label class="control-label text-left"></label>\n                <span ng-if="ctrl.formValues.Containers.length <= 1" class="label label-default interactive" style="margin-left: 10px;" ng-click="ctrl.addEnvironmentVariable()">\n                  <i class="fa fa-plus-circle" aria-hidden="true"></i> \n                </span>\n              </div>\n\n              <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n                <div ng-repeat="envVar in ctrl.formValues.EnvironmentVariables" style="margin-top: 2px;">\n                  <div class="col-sm-4 input-group input-group-sm" style="vertical-align: top;">\n                    <div class="input-group col-sm-12 input-group-sm" ng-class="{ striked: envVar.NeedsDeletion }">\n                      <span class="input-group-addon">name</span>\n                      <input\n                        type="text"\n                        name="environment_variable_name_{{ $index }}"\n                        class="form-control"\n                        ng-model="envVar.Name"\n                        ng-change="ctrl.onChangeEnvironmentName()"\n                        ng-pattern="/^[a-zA-Z]([-_a-zA-Z0-9]*[a-zA-Z0-9])?$/"\n                        placeholder="foo"\n                        ng-disabled="ctrl.formValues.Containers.length > 1"\n                        required\n                      />\n                    </div>\n                    <div\n                      class="small text-warning"\n                      style="margin-top: 5px;"\n                      ng-show="\n                        kubernetesApplicationCreationForm[\'environment_variable_name_\' + $index].$invalid || ctrl.state.duplicates.environmentVariables.refs[$index] !== undefined\n                      "\n                    >\n                      <ng-messages for="kubernetesApplicationCreationForm[\'environment_variable_name_\' + $index].$error">\n                        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Environment variable name is required.</p>\n                        <p ng-message="pattern"\n                          ><i class="fa fa-exclamation-triangle" aria-hidden="true"></i>  \'-\'  \'_\' \n                           ( \'my-var\', or \'MY_VAR123\').</p\n                        >\n                      </ng-messages>\n                      <p ng-if="ctrl.state.duplicates.environmentVariables.refs[$index] !== undefined"\n                        ><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> This environment variable is already defined.</p\n                      >\n                    </div>\n                  </div>\n\n                  <div class="input-group col-sm-4 input-group-sm" ng-class="{ striked: envVar.NeedsDeletion }">\n                    <span class="input-group-addon">value</span>\n                    <input\n                      type="text"\n                      name="environment_variable_value_{{ $index }}"\n                      class="form-control"\n                      ng-model="envVar.Value"\n                      placeholder="bar"\n                      ng-disabled="ctrl.formValues.Containers.length > 1"\n                    />\n                  </div>\n\n                  <div class="input-group col-sm-2 input-group-sm" ng-if="ctrl.formValues.Containers.length <= 1">\n                    <button ng-if="!envVar.NeedsDeletion" class="btn btn-sm btn-danger" type="button" ng-click="ctrl.removeEnvironmentVariable($index)">\n                      <i class="fa fa-trash-alt" aria-hidden="true"></i>\n                    </button>\n                    <button ng-if="envVar.NeedsDeletion" class="btn btn-sm btn-primary" type="button" ng-click="ctrl.restoreEnvironmentVariable($index)">\n                      <i class="fa fa-trash-restore" aria-hidden="true"></i>\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n            \x3c!-- #endregion --\x3e\n\n            <div class="col-sm-12 form-section-title">\n              Configurations\n            </div>\n            \x3c!-- #region CONFIGURATIONS --\x3e\n            <div class="form-group">\n              <div class="col-sm-12">\n                <label class="control-label text-left"></label>\n                <span class="label label-default interactive" style="margin-left: 10px;" ng-click="ctrl.addConfiguration()" ng-if="ctrl.formValues.Containers.length <= 1">\n                  <i class="fa fa-plus-circle" aria-hidden="true"></i> add configuration\n                </span>\n              </div>\n              <div class="col-sm-12 small text-muted" style="margin-top: 15px;" ng-if="ctrl.formValues.Configurations.length">\n                <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                Portainer will automatically expose all the keys of a configuration as environment variables. This behavior can be overriden to filesystem mounts for each key via\n                the override button.\n              </div>\n            </div>\n\n            \x3c!-- config-element --\x3e\n            <div class="form-group" ng-repeat="(index, config) in ctrl.formValues.Configurations">\n              <label for="stack_name" class="col-md-1 col-sm-2 control-label text-left"></label>\n              <div class="col-sm-5">\n                <select\n                  class="form-control"\n                  ng-model="config.SelectedConfiguration"\n                  ng-options="c as c.Name for c in ctrl.configurations"\n                  ng-change="ctrl.resetConfiguration(index)"\n                  ng-disabled="ctrl.formValues.Containers.length > 1"\n                ></select>\n              </div>\n              <div class="col-sm-6" style="margin-top: 2px;">\n                <button\n                  class="btn btn-sm btn-primary"\n                  type="button"\n                  ng-if="!config.Overriden"\n                  ng-click="ctrl.overrideConfiguration(index)"\n                  ng-disabled="!config.SelectedConfiguration || ctrl.formValues.Containers.length > 1"\n                >\n                  <i class="fa fa-list" aria-hidden="true"></i> Override\n                </button>\n                <button\n                  class="btn btn-sm btn-primary"\n                  type="button"\n                  ng-if="config.Overriden"\n                  ng-click="ctrl.resetConfiguration(index)"\n                  ng-disabled="ctrl.formValues.Containers.length > 1"\n                >\n                  <i class="fa fa-undo" aria-hidden="true"></i> Auto\n                </button>\n                <button class="btn btn-sm btn-danger" type="button" ng-click="ctrl.removeConfiguration(index)" ng-if="ctrl.formValues.Containers.length <= 1">\n                  <i class="fa fa-trash-alt" aria-hidden="true"></i> \n                </button>\n              </div>\n              \x3c!-- no-override --\x3e\n              <div class="col-sm-12" style="margin-top: 10px;" ng-if="config.SelectedConfiguration && !config.Overriden">\n                <div class="col-md-1 col-sm-2"></div>\n                <div class="col-md-11 col-sm-10 small text-muted" style="padding-left: 5px;">\n                  The following keys will be loaded from the <code>{{ config.SelectedConfiguration.Name }}</code> configuration as environment variables:\n                  <span ng-repeat="(key, _) in config.SelectedConfiguration.Data">\n                    <code>{{ key }}</code\n                    >{{ $last ? \'\' : \', \' }}\n                  </span>\n                </div>\n              </div>\n              \x3c!-- !no-override --\x3e\n\n              \x3c!-- has-override --\x3e\n              <div class="col-sm-12 form-inline" style="margin-top: 10px;" ng-if="config.Overriden">\n                <div ng-repeat="(keyIndex, overridenKey) in config.OverridenKeys" style="margin-top: 2px;">\n                  <div class="col-md-1 col-sm-2" style="margin-left: 3px;" style="vertical-align: top;"></div>\n                  <div class="input-group col-sm-3 input-group-sm" style="vertical-align: top;">\n                    <span class="input-group-addon"> key</span>\n                    <input type="text" class="form-control" ng-value="overridenKey.Key" disabled />\n                  </div>\n\n                  <div\n                    class="col-sm-3 input-group input-group-sm"\n                    style="vertical-align: top;"\n                    ng-if="overridenKey.Type === ctrl.ApplicationConfigurationFormValueOverridenKeyTypes.FILESYSTEM"\n                  >\n                    <div class="input-group col-sm-12 input-group-sm">\n                      <span class="input-group-addon">path on disk</span>\n                      <input\n                        type="text"\n                        class="form-control"\n                        ng-model="overridenKey.Path"\n                        placeholder="/etc/myapp/conf.d"\n                        name="overriden_key_path_{{ index }}_{{ keyIndex }}"\n                        ng-disabled="ctrl.formValues.Containers.length > 1"\n                        required\n                        ng-change="ctrl.onChangeConfigurationPath()"\n                      />\n                    </div>\n                    <div\n                      class="small text-warning"\n                      style="margin-top: 5px;"\n                      ng-show="\n                        kubernetesApplicationCreationForm[\'overriden_key_path_\' + index + \'_\' + keyIndex].$invalid ||\n                        ctrl.state.duplicates.configurationPaths.refs[index + \'_\' + keyIndex] !== undefined\n                      "\n                    >\n                      <ng-messages for="kubernetesApplicationCreationForm[\'overriden_key_path_\' + index + \'_\' + keyIndex].$error">\n                        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Path is required.</p>\n                      </ng-messages>\n                      <p ng-if="ctrl.state.duplicates.configurationPaths.refs[index + \'_\' + keyIndex] !== undefined"\n                        ><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> This path is already used.</p\n                      >\n                    </div>\n                  </div>\n\n                  <div class="input-group col-sm-3 btn-group btn-group-sm" style="vertical-align: top;">\n                    <label class="btn btn-primary" ng-model="overridenKey.Type" uib-btn-radio="ctrl.ApplicationConfigurationFormValueOverridenKeyTypes.ENVIRONMENT">\n                      <i class="fa fa-list" aria-hidden="true"></i> Environment\n                    </label>\n                    <label class="btn btn-primary" ng-model="overridenKey.Type" uib-btn-radio="ctrl.ApplicationConfigurationFormValueOverridenKeyTypes.FILESYSTEM">\n                      <i class="fa fa-file" aria-hidden="true"></i> Filesystem\n                    </label>\n                  </div>\n                </div>\n              </div>\n              \x3c!-- !has-override --\x3e\n            </div>\n            \x3c!-- !config-element --\x3e\n            \x3c!-- #endregion --\x3e\n\n            <div class="col-sm-12 form-section-title">\n              Persisting data\n            </div>\n            \x3c!-- #region PERSISTED FOLDERS --\x3e\n            <div class="form-group" ng-if="!ctrl.storageClassAvailable()">\n              <div class="col-sm-12 small text-muted">\n                <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                No storage option is available to persist data, contact your administrator to enable a storage option.\n              </div>\n            </div>\n\n            <div class="form-group" ng-if="ctrl.storageClassAvailable()">\n              <div class="col-sm-12" style="margin-top: 5px;">\n                <label class="control-label text-left">Persisted folders</label>\n                <span\n                  class="label label-default interactive"\n                  style="margin-left: 10px;"\n                  ng-click="ctrl.addPersistedFolder()"\n                  ng-if="!ctrl.isEditAndStatefulSet() && ctrl.formValues.Containers.length <= 1"\n                >\n                  <i class="fa fa-plus-circle" aria-hidden="true"></i> add persisted folder\n                </span>\n              </div>\n\n              <div class="col-sm-12 form-inline" style="margin-top: 10px;" ng-repeat="persistedFolder in ctrl.formValues.PersistedFolders">\n                <div style="margin-top: 2px;">\n                  <div class="input-group col-sm-3 input-group-sm" ng-class="{ striked: persistedFolder.NeedsDeletion }">\n                    <span class="input-group-addon">path in container</span>\n                    <input\n                      type="text"\n                      class="form-control"\n                      name="persisted_folder_path_{{ $index }}"\n                      ng-model="persistedFolder.ContainerPath"\n                      ng-change="ctrl.onChangePersistedFolderPath()"\n                      ng-disabled="ctrl.isEditAndExistingPersistedFolder($index) || ctrl.formValues.Containers.length > 1"\n                      placeholder="/data"\n                      required\n                    />\n                  </div>\n\n                  <div class="input-group col-sm-2 input-group-sm">\n                    <span\n                      class="btn-group btn-group-sm"\n                      ng-class="{ striked: persistedFolder.NeedsDeletion }"\n                      ng-if="\n                        !ctrl.isEditAndExistingPersistedFolder($index) &&\n                        ctrl.application.ApplicationType !== ctrl.ApplicationTypes.STATEFULSET &&\n                        ctrl.formValues.Containers.length <= 1\n                      "\n                    >\n                      <label\n                        class="btn btn-primary"\n                        ng-model="persistedFolder.UseNewVolume"\n                        uib-btn-radio="true"\n                        ng-change="ctrl.useNewVolume($index)"\n                        ng-disabled="ctrl.isEditAndExistingPersistedFolder($index)"\n                        >New volume</label\n                      >\n                      <label\n                        class="btn btn-primary"\n                        ng-model="persistedFolder.UseNewVolume"\n                        uib-btn-radio="false"\n                        ng-change="ctrl.useExistingVolume($index)"\n                        ng-disabled="ctrl.availableVolumes.length === 0 || ctrl.application.ApplicationType === ctrl.ApplicationTypes.STATEFULSET"\n                        >Existing volume</label\n                      >\n                    </span>\n                  </div>\n\n                  <div class="input-group col-sm-3 input-group-sm" ng-class="{ striked: persistedFolder.NeedsDeletion }" ng-if="persistedFolder.UseNewVolume">\n                    <span class="input-group-addon">requested size</span>\n                    <input\n                      type="number"\n                      class="form-control"\n                      name="persisted_folder_size_{{ $index }}"\n                      ng-model="persistedFolder.Size"\n                      placeholder="20"\n                      ng-min="0"\n                      required\n                      ng-disabled="ctrl.isEditAndExistingPersistedFolder($index) || ctrl.formValues.Containers.length > 1"\n                    />\n                    <span class="input-group-addon" style="padding: 0;">\n                      <select\n                        ng-model="persistedFolder.SizeUnit"\n                        ng-style="{ width: \'100%\', height: \'100%\', cursor: ctrl.isEditAndExistingPersistedFolder($index) ? \'not-allowed\' : \'auto\' }"\n                        ng-options="unit for unit in ctrl.state.availableSizeUnits"\n                        ng-disabled="ctrl.isEditAndExistingPersistedFolder($index) || ctrl.formValues.Containers.length > 1"\n                      ></select>\n                    </span>\n                  </div>\n\n                  <div\n                    class="input-group col-sm-2 input-group-sm"\n                    ng-class="{ striked: persistedFolder.NeedsDeletion }"\n                    style="vertical-align: top;"\n                    ng-if="persistedFolder.UseNewVolume"\n                  >\n                    <span class="input-group-addon">storage</span>\n                    <select\n                      ng-if="ctrl.hasMultipleStorageClassesAvailable()"\n                      class="form-control"\n                      ng-model="persistedFolder.StorageClass"\n                      ng-options="storageClass as storageClass.Name for storageClass in ctrl.storageClasses"\n                      ng-disabled="ctrl.state.isEdit || ctrl.formValues.Containers.length > 1"\n                    ></select>\n                    <input ng-if="!ctrl.hasMultipleStorageClassesAvailable()" type="text" class="form-control" disabled ng-model="persistedFolder.StorageClass.Name" />\n                  </div>\n\n                  <div class="input-group col-sm-5 input-group-sm" ng-if="!persistedFolder.UseNewVolume" ng-class="{ striked: persistedFolder.NeedsDeletion }">\n                    <span class="input-group-addon"></span>\n                    <select\n                      class="form-control"\n                      name="existing_volumes_{{ $index }}"\n                      ng-model="ctrl.formValues.PersistedFolders[$index].ExistingVolume"\n                      ng-options="vol as vol.PersistentVolumeClaim.Name for vol in ctrl.availableVolumes"\n                      ng-change="ctrl.onChangeExistingVolumeSelection()"\n                      ng-disabled="ctrl.isEditAndExistingPersistedFolder($index) || ctrl.formValues.Containers.length > 1"\n                      required\n                    >\n                      <option selected disabled hidden value="">Select a volume</option>\n                    </select>\n                  </div>\n\n                  <div class="input-group col-sm-1 input-group-sm">\n                    <div style="vertical-align: top;" ng-if="!ctrl.isEditAndStatefulSet() && !ctrl.state.useExistingVolume[$index] && ctrl.formValues.Containers.length <= 1">\n                      <button ng-if="!persistedFolder.NeedsDeletion" class="btn btn-sm btn-danger" type="button" ng-click="ctrl.removePersistedFolder($index)">\n                        <i class="fa fa-trash-alt" aria-hidden="true"></i>\n                      </button>\n                      <button ng-if="persistedFolder.NeedsDeletion" class="btn btn-sm btn-primary" type="button" ng-click="ctrl.restorePersistedFolder($index)">\n                        <i class="fa fa-trash-restore" aria-hidden="true"></i>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n\n                <div\n                  ng-show="\n                    kubernetesApplicationCreationForm[\'persisted_folder_path_\' + $index].$invalid ||\n                    ctrl.state.duplicates.persistedFolders.refs[$index] !== undefined ||\n                    kubernetesApplicationCreationForm[\'persisted_folder_size_\' + $index].$invalid ||\n                    kubernetesApplicationCreationForm[\'existing_volumes_\' + $index].$invalid ||\n                    ctrl.state.duplicates.existingVolumes.refs[$index] !== undefined\n                  "\n                >\n                  <div class="input-group col-sm-3 input-group-sm">\n                    <div\n                      class="small text-warning"\n                      style="margin-top: 5px;"\n                      ng-show="kubernetesApplicationCreationForm[\'persisted_folder_path_\' + $index].$invalid || ctrl.state.duplicates.persistedFolders.refs[$index] !== undefined"\n                    >\n                      <ng-messages for="kubernetesApplicationCreationForm[\'persisted_folder_path_\' + $index].$error">\n                        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Path is required.</p>\n                      </ng-messages>\n                      <p ng-if="ctrl.state.duplicates.persistedFolders.refs[$index] !== undefined"\n                        ><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> This path is already defined.</p\n                      >\n                    </div>\n                  </div>\n\n                  <div class="input-group col-sm-2 input-group-sm"></div>\n\n                  <div class="input-group col-sm-2 input-group-sm">\n                    <div class="small text-warning" style="margin-top: 5px;" ng-show="kubernetesApplicationCreationForm[\'persisted_folder_size_\' + $index].$invalid">\n                      <ng-messages for="kubernetesApplicationCreationForm[\'persisted_folder_size_\' + $index].$error">\n                        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Size is required.</p>\n                        <p ng-message="min"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> This value must be greater than zero.</p>\n                      </ng-messages>\n                    </div>\n                    <div\n                      class="small text-warning"\n                      ng-show="kubernetesApplicationCreationForm[\'existing_volumes_\' + $index].$invalid || ctrl.state.duplicates.existingVolumes.refs[$index] !== undefined"\n                    >\n                      <ng-messages for="kubernetesApplicationCreationForm[\'existing_volumes_\' + $index].$error">\n                        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Volume is required.</p>\n                      </ng-messages>\n                      <p ng-if="ctrl.state.duplicates.existingVolumes.refs[$index] !== undefined"\n                        ><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> This volume is already used.</p\n                      >\n                    </div>\n                  </div>\n\n                  <div class="input-group col-sm-3 input-group-sm"> </div>\n\n                  <div class="input-group col-sm-1 input-group-sm"> </div>\n                </div>\n              </div>\n            </div>\n            \x3c!-- #endregion --\x3e\n\n            \x3c!-- #region DATA ACCESS POLICY --\x3e\n            <div ng-if="ctrl.showDataAccessPolicySection()">\n              <div class="form-group">\n                <div class="col-sm-12">\n                  <label class="control-label text-left">Data access policy</label>\n                </div>\n              </div>\n\n              <div class="form-group">\n                <div class="col-sm-12 small text-muted">\n                  Specify how the data will be used across instances.\n                </div>\n              </div>\n\n              \x3c!-- access policy options --\x3e\n              <div class="form-group" style="margin-bottom: 0;">\n                <div class="boxselector_wrapper">\n                  <div ng-if="!ctrl.state.isEdit || (ctrl.state.isEdit && ctrl.formValues.DataAccessPolicy === ctrl.ApplicationDataAccessPolicies.SHARED)">\n                    <input\n                      type="radio"\n                      id="data_access_shared"\n                      ng-value="ctrl.ApplicationDataAccessPolicies.SHARED"\n                      ng-model="ctrl.formValues.DataAccessPolicy"\n                      ng-change="ctrl.resetDeploymentType()"\n                    />\n                    <label for="data_access_shared">\n                      <div class="boxselector_header">\n                        <i class="fa fa-cube" aria-hidden="true" style="margin-right: 2px;"></i>\n                        Shared\n                      </div>\n                      <p>All the instances of this application will use the same data</p>\n                    </label>\n                  </div>\n                  <div style="color: #767676;" ng-if="ctrl.state.isEdit && ctrl.formValues.DataAccessPolicy === ctrl.ApplicationDataAccessPolicies.ISOLATED">\n                    <input type="radio" id="data_access_shared" disabled />\n                    <label\n                      for="data_access_shared"\n                      tooltip-append-to-body="true"\n                      tooltip-placement="bottom"\n                      tooltip-class="portainer-tooltip"\n                      uib-tooltip="Changing the data access policy is not allowed"\n                      style="cursor: pointer; border-color: #767676;"\n                    >\n                      <div class="boxselector_header">\n                        <i class="fa fa-cube" aria-hidden="true" style="margin-right: 2px;"></i>\n                        Shared\n                      </div>\n                      <p>All the instances of this application will use the same data</p>\n                    </label>\n                  </div>\n                  <div\n                    ng-if="\n                      (!ctrl.state.isEdit && !ctrl.state.PersistedFoldersUseExistingVolumes) ||\n                      (ctrl.state.isEdit && ctrl.formValues.DataAccessPolicy === ctrl.ApplicationDataAccessPolicies.ISOLATED)\n                    "\n                  >\n                    <input\n                      type="radio"\n                      id="data_access_isolated"\n                      ng-value="ctrl.ApplicationDataAccessPolicies.ISOLATED"\n                      ng-model="ctrl.formValues.DataAccessPolicy"\n                      ng-change="ctrl.resetDeploymentType()"\n                    />\n                    <label for="data_access_isolated">\n                      <div class="boxselector_header">\n                        <i class="fa fa-cubes" aria-hidden="true" style="margin-right: 2px;"></i>\n                        Isolated\n                      </div>\n                      <p>Every instance of this application will use their own data</p>\n                    </label>\n                  </div>\n                  <div\n                    style="color: #767676;"\n                    ng-if="(ctrl.state.isEdit && ctrl.formValues.DataAccessPolicy === ctrl.ApplicationDataAccessPolicies.SHARED) || ctrl.state.PersistedFoldersUseExistingVolumes"\n                  >\n                    <input type="radio" id="data_access_isolated" disabled />\n                    <label\n                      for="data_access_isolated"\n                      tooltip-append-to-body="true"\n                      tooltip-placement="bottom"\n                      tooltip-class="portainer-tooltip"\n                      uib-tooltip="Changing the data access policy is not allowed"\n                      style="cursor: pointer; border-color: #767676;"\n                    >\n                      <div class="boxselector_header">\n                        <i class="fa fa-cubes" aria-hidden="true" style="margin-right: 2px;"></i>\n                        Isolated\n                      </div>\n                      <p>Every instance of this application will use their own data</p>\n                    </label>\n                  </div>\n                </div>\n              </div>\n              \x3c!-- !access policy options --\x3e\n            </div>\n            \x3c!-- #endregion --\x3e\n\n            <div class="col-sm-12 form-section-title">\n              Resource reservations\n            </div>\n            \x3c!-- #region RESOURCE RESERVATIONS --\x3e\n            <div class="form-group" ng-if="!ctrl.state.resourcePoolHasQuota">\n              <div class="col-sm-12 small text-muted">\n                <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                Resource reservations are applied per instance of the application.\n              </div>\n            </div>\n\n            <div class="form-group" ng-if="ctrl.state.resourcePoolHasQuota && !ctrl.resourceQuotaCapacityExceeded()">\n              <div class="col-sm-12 small text-muted">\n                <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                A resource quota is set on this resource pool, you must specify resource reservations. Resource reservations are applied per instance of the application. Maximums\n                are inherited from the resource pool quota.\n              </div>\n            </div>\n\n            <div class="form-group" ng-if="ctrl.state.resourcePoolHasQuota && ctrl.resourceQuotaCapacityExceeded()">\n              <div class="col-sm-12 small text-muted">\n                <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                  \n \n              </div>\n            </div>\n\n            \x3c!-- memory-limit-input --\x3e\n            <div\n              class="form-group"\n              ng-if="(!ctrl.state.resourcePoolHasQuota || (ctrl.state.resourcePoolHasQuota && !ctrl.resourceQuotaCapacityExceeded())) && ctrl.formValues.Containers.length <= 1"\n            >\n              <label for="memory-limit" class="col-sm-3 col-lg-2 control-label text-left" style="margin-top: 20px;">\n                Memory\n                <portainer-tooltip\n                  position="bottom"\n                  message="An instance of this application will reserve this amount of memory. If the instance memory usage exceeds the reservation, it might be subject to OOM."\n                >\n                </portainer-tooltip>\n              </label>\n              <div class="col-sm-3">\n                <slider model="ctrl.formValues.MemoryLimit" floor="ctrl.state.sliders.memory.min" ceil="ctrl.state.sliders.memory.max" step="128"></slider>\n              </div>\n              <div class="col-sm-2">\n                <input\n                  name="memory_limit"\n                  ng-model="ctrl.formValues.MemoryLimit"\n                  type="number"\n                  min="{{ ctrl.state.sliders.memory.min }}"\n                  max="{{ ctrl.state.sliders.memory.max }}"\n                  class="form-control"\n                  id="memory-limit"\n                  required\n                />\n              </div>\n              <div class="col-sm-4">\n                <p class="small text-muted" style="margin-top: 7px;">\n                  Maximum memory usage (<b>MB</b>)\n                </p>\n              </div>\n            </div>\n            <div class="form-group" ng-show="kubernetesApplicationCreationForm.memory_limit.$invalid">\n              <div class="col-sm-12 small text-warning">\n                <div ng-messages="kubernetesApplicationCreationForm.memory_limit.$error">\n                  <p\n                    ><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Value must be between {{ ctrl.state.sliders.memory.min }} and {{ ctrl.state.sliders.memory.max }}\n                  </p>\n                </div>\n              </div>\n            </div>\n            \x3c!-- !memory-limit-input --\x3e\n            \x3c!-- cpu-limit-input --\x3e\n            <div\n              class="form-group"\n              ng-if="(!ctrl.state.resourcePoolHasQuota || (ctrl.state.resourcePoolHasQuota && !ctrl.resourceQuotaCapacityExceeded())) && ctrl.formValues.Containers.length <= 1"\n            >\n              <label for="cpu-limit" class="col-sm-3 col-lg-2 control-label text-left" style="margin-top: 20px;">\n                CPU\n                <portainer-tooltip\n                  position="bottom"\n                  message="An instance of this application will reserve this amount of CPU. If the instance CPU usage exceeds the reservation, it might be subject to CPU throttling."\n                >\n                </portainer-tooltip>\n              </label>\n              <div class="col-sm-5">\n                <slider model="ctrl.formValues.CpuLimit" floor="ctrl.state.sliders.cpu.min" ceil="ctrl.state.sliders.cpu.max" step="0.10" precision="2"></slider>\n              </div>\n              <div class="col-sm-4" style="margin-top: 20px;">\n                <p class="small text-muted">\n                  CPU\n                </p>\n              </div>\n            </div>\n            \x3c!-- !cpu-limit-input --\x3e\n            \x3c!-- #endregion --\x3e\n\n            <div class="col-sm-12 form-section-title">\n              Deployment\n            </div>\n            \x3c!-- #region DEPLOYMENT --\x3e\n            <div class="form-group">\n              <div class="col-sm-12 small text-muted">\n                Select how you want to deploy your application inside the cluster.\n              </div>\n            </div>\n\n            \x3c!-- deployment options --\x3e\n            <div class="form-group" style="margin-bottom: 0;">\n              <div class="boxselector_wrapper">\n                <div>\n                  <input type="radio" id="deployment_replicated" ng-value="ctrl.ApplicationDeploymentTypes.REPLICATED" ng-model="ctrl.formValues.DeploymentType" />\n                  <label for="deployment_replicated">\n                    <div class="boxselector_header">\n                      <i class="fa fa-cube" aria-hidden="true" style="margin-right: 2px;"></i>\n                      Replicated\n                    </div>\n                    <p></p>\n                  </label>\n                </div>\n                <div style="color: #767676;" ng-if="!ctrl.supportGlobalDeployment()">\n                  <input type="radio" id="deployment_global" disabled />\n                  <label\n                    for="deployment_global"\n                    tooltip-append-to-body="true"\n                    tooltip-placement="bottom"\n                    tooltip-class="portainer-tooltip"\n                    uib-tooltip=""\n                    style="cursor: pointer; border-color: #767676;"\n                  >\n                    <div class="boxselector_header">\n                      <i class="fa fa-cubes" aria-hidden="true" style="margin-right: 2px;"></i>\n                      Global\n                    </div>\n                    <p>Deploy an instance of this container on each node of the cluster</p>\n                  </label>\n                </div>\n                <div ng-if="ctrl.supportGlobalDeployment()">\n                  <input\n                    type="radio"\n                    id="deployment_global"\n                    ng-value="ctrl.ApplicationDeploymentTypes.GLOBAL"\n                    ng-model="ctrl.formValues.DeploymentType"\n                    ng-click="ctrl.unselectAutoScaler()"\n                  />\n                  <label for="deployment_global">\n                    <div class="boxselector_header">\n                      <i class="fa fa-cubes" aria-hidden="true" style="margin-right: 2px;"></i>\n                      Global\n                    </div>\n                    <p>Deploy an instance of this container on each node of the cluster</p>\n                  </label>\n                </div>\n              </div>\n            </div>\n            \x3c!-- !deployment options --\x3e\n\n            \x3c!-- replica count --\x3e\n            <div class="form-group form-inline" ng-if="ctrl.formValues.DeploymentType === ctrl.ApplicationDeploymentTypes.REPLICATED">\n              <div class="col-sm-12">\n                <label class="control-label text-left">\n                  Instance count\n                </label>\n                <input\n                  type="number"\n                  name="replica_count"\n                  class="form-control"\n                  min="1"\n                  max="9999"\n                  placeholder="1"\n                  style="margin-left: 20px;"\n                  ng-model="ctrl.formValues.ReplicaCount"\n                  ng-disabled="!ctrl.supportScalableReplicaDeployment()"\n                  ng-change="ctrl.onChangeVolumeRequestedSize()"\n                  required\n                />\n              </div>\n            </div>\n            <div class="form-group" ng-if="kubernetesApplicationCreationForm[\'replica_count\'].$invalid">\n              <div class="col-sm-12 small text-warning">\n                <ng-messages for="kubernetesApplicationCreationForm[\'replica_count\'].$error">\n                  <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Instance count is required.</p>\n                  <p ng-message="min"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Instance count must be greater than 0.</p>\n                </ng-messages>\n              </div>\n            </div>\n            \x3c!-- !replica count --\x3e\n\n            <div\n              class="form-group"\n              ng-if="!ctrl.resourceReservationsOverflow() && ctrl.formValues.ReplicaCount > 1 && (ctrl.formValues.CpuLimit !== 0 || ctrl.formValues.MemoryLimit !== 0)"\n            >\n              <div class="col-sm-12 small text-muted">\n                <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                This application will reserve the following resources: <b>{{ ctrl.formValues.CpuLimit * ctrl.formValues.ReplicaCount | kubernetesApplicationCPUValue }} CPU</b> and\n                <b>{{ ctrl.formValues.MemoryLimit * ctrl.formValues.ReplicaCount }} MB</b> of memory.\n              </div>\n            </div>\n\n            <div class="form-group" ng-if="ctrl.resourceReservationsOverflow()">\n              <div class="col-sm-12 small text-muted">\n                <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                \n              </div>\n            </div>\n\n            <div class="form-group" ng-if="!ctrl.supportScalableReplicaDeployment()">\n              <div class="col-sm-12 small text-muted">\n                <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                <code>{{ ctrl.getNonScalableStorage() }}</code\n                >. \n              </div>\n            </div>\n            \x3c!-- #endregion --\x3e\n\n            \x3c!-- #region AUTO SCALING --\x3e\n            <div class="col-sm-12 form-section-title" ng-if="ctrl.formValues.DeploymentType !== ctrl.ApplicationDeploymentTypes.GLOBAL">\n              Auto-scaling\n            </div>\n\n            <div class="form-group" ng-if="ctrl.formValues.DeploymentType !== ctrl.ApplicationDeploymentTypes.GLOBAL && ctrl.state.useServerMetrics">\n              <div class="col-sm-12">\n                <label for="enable_auto_scaling" class="control-label text-left">\n                  Enable auto scaling for this application\n                </label>\n                <label class="switch" style="margin-left: 20px;">\n                  <input type="checkbox" class="form-control" name="enable_auto_scaling" ng-model="ctrl.formValues.AutoScaler.IsUsed" />\n                  <i></i>\n                </label>\n              </div>\n            </div>\n\n            <div class="form-group" ng-if="ctrl.formValues.DeploymentType !== ctrl.ApplicationDeploymentTypes.GLOBAL && !ctrl.state.useServerMetrics">\n              <div class="col-sm-12 small text-muted">\n                <p ng-if="!ctrl.isAdmin">\n                  \n                </p>\n                <p ng-if="ctrl.isAdmin">\n                  Server metrics features must be enabled in the\n                  <a ui-sref="portainer.endpoints.endpoint.kubernetesConfig({id: ctrl.endpoint.Id})" class="ctrl.isAdmin">endpoint configuration view</a>.\n                </p>\n              </div>\n            </div>\n\n            <div class="form-inline" ng-if="ctrl.formValues.DeploymentType !== ctrl.ApplicationDeploymentTypes.GLOBAL && ctrl.formValues.AutoScaler.IsUsed">\n              <table class="table" style="margin-bottom: 0px;">\n                <tbody>\n                  <tr class="small">\n                    <td style="width: 33%; border: none; padding: 2px 0 2px 0;">Minimum instances</td>\n                    <td style="width: 33%; border: none; padding: 2px 0 2px 0;">Maximum instances</td>\n                    <td style="width: 33%; border: none; padding: 2px 0 2px 0;">\n                      Target CPU usage (<b>%</b>)\n                      <portainer-tooltip position="bottom" message="CPU">\n                      </portainer-tooltip>\n                    </td>\n                  </tr>\n                  <tr>\n                    <td style="padding: 8px 5px 5px 0; border: none;">\n                      <div class="input-group input-group-sm" style="width: 100%;">\n                        <input\n                          type="number"\n                          class="form-control"\n                          name="auto_scaler_min"\n                          min="0"\n                          ng-max="ctrl.formValues.AutoScaler.MaxReplicas"\n                          ng-model="ctrl.formValues.AutoScaler.MinReplicas"\n                          required\n                        />\n                      </div>\n                      <div class="input-group input-group-sm" ng-show="kubernetesApplicationCreationForm[\'auto_scaler_min\'].$invalid">\n                        <div class="small text-warning" style="margin-top: 5px;">\n                          <ng-messages for="kubernetesApplicationCreationForm[\'auto_scaler_min\'].$error">\n                            <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Minimum instances is required.</p>\n                            <p ng-message="min"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Minimum instances must be greater than 0.</p>\n                            <p ng-message="max"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Minimum instances must be smaller than maximum instances.</p>\n                          </ng-messages>\n                        </div>\n                      </div>\n                    </td>\n                    <td style="padding: 8px 5px 5px 0; border: none;">\n                      <div class="input-group input-group-sm" style="width: 100%;">\n                        <input\n                          type="number"\n                          class="form-control"\n                          name="auto_scaler_max"\n                          ng-min="ctrl.formValues.AutoScaler.MinReplicas"\n                          ng-model="ctrl.formValues.AutoScaler.MaxReplicas"\n                        />\n                      </div>\n                      <div class="input-group input-group-sm" ng-show="kubernetesApplicationCreationForm[\'auto_scaler_max\'].$invalid || ctrl.autoScalerOverflow()">\n                        <div class="small text-warning" style="margin-top: 5px;">\n                          <ng-messages for="kubernetesApplicationCreationForm[\'auto_scaler_max\'].$error">\n                            <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Maximum instances is required.</p>\n                            <p ng-message="min"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Maximum instances must be greater than minimum instances.</p>\n                          </ng-messages>\n                        </div>\n                      </div>\n                    </td>\n                    <td style="padding: 8px 5px 5px 0; border: none;">\n                      <div class="input-group input-group-sm" style="width: 100%;">\n                        <input type="number" class="form-control" name="auto_scaler_cpu" ng-model="ctrl.formValues.AutoScaler.TargetCPUUtilization" min="1" max="100" required />\n                      </div>\n                      <div class="input-group input-group-sm" ng-show="kubernetesApplicationCreationForm[\'auto_scaler_cpu\'].$invalid">\n                        <div class="small text-warning" style="margin-top: 5px;">\n                          <ng-messages for="kubernetesApplicationCreationForm[\'auto_scaler_cpu\'].$error">\n                            <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Target CPU usage is required.</p>\n                            <p ng-message="min"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Target CPU usage must be greater than 0.</p>\n                            <p ng-message="max"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Target CPU usage must be smaller than 100.</p>\n                          </ng-messages>\n                        </div>\n                      </div>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n\n              <div class="form-group" ng-if="ctrl.autoScalerOverflow()" style="margin-bottom: 10px;">\n                <div class="col-sm-12 small text-muted">\n                  <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                   \n                </div>\n              </div>\n            </div>\n            \x3c!-- #endregion --\x3e\n\n            <div ng-if="ctrl.formValues.DeploymentType === ctrl.ApplicationDeploymentTypes.REPLICATED">\n              <div class="col-sm-12 form-section-title">\n                Placement preferences and constraints\n              </div>\n\n              \x3c!-- #region PLACEMENTS --\x3e\n              <div class="form-group">\n                <div class="col-sm-12">\n                  <label class="control-label text-left">Placement rules</label>\n                  <span class="label label-default interactive" style="margin-left: 10px;" ng-click="ctrl.addPlacement()">\n                    <i class="fa fa-plus-circle" aria-hidden="true"></i> add rule\n                  </span>\n                </div>\n\n                <div class="col-sm-12 small text-muted" ng-if="ctrl.formValues.Placements.length > 0" style="margin-top: 10px;">\n                  <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                  <b>ALL</b> \n                </div>\n\n                <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n                  <div ng-repeat-start="placement in ctrl.formValues.Placements" style="margin-top: 2px;">\n                    <div class="col-sm-5 input-group" ng-class="{ striked: placement.NeedsDeletion }">\n                      <select\n                        class="form-control"\n                        ng-model="placement.Label"\n                        ng-options="label as (label.Key | kubernetesNodeLabelHumanReadbleText) for label in ctrl.nodesLabels"\n                        ng-change="ctrl.onChangePlacementLabel($index)"\n                        ng-disabled="ctrl.isEditAndNotNewPlacement($index)"\n                      >\n                      </select>\n                    </div>\n                    <div class="col-sm-5 input-group" ng-class="{ striked: placement.NeedsDeletion }">\n                      <select\n                        class="form-control"\n                        ng-model="placement.Value"\n                        ng-options="value for value in placement.Label.Values"\n                        ng-disabled="ctrl.isEditAndNotNewPlacement($index)"\n                      >\n                      </select>\n                    </div>\n\n                    <div class="col-sm-1 input-group">\n                      <button ng-if="!placement.NeedsDeletion" class="btn btn-sm btn-danger" type="button" ng-click="ctrl.removePlacement($index)">\n                        <i class="fa fa-trash-alt" aria-hidden="true"></i>\n                      </button>\n                      <button ng-if="placement.NeedsDeletion" class="btn btn-sm btn-primary" type="button" ng-click="ctrl.restorePlacement($index)">\n                        <i class="fa fa-trash-restore" aria-hidden="true"></i>\n                      </button>\n                    </div>\n                  </div>\n                  <div ng-repeat-end ng-show="ctrl.state.duplicates.placements.refs[$index] !== undefined">\n                    <div class="col-sm-5 input-group">\n                      <div class="small text-warning" style="margin-top: 5px;" ng-if="ctrl.state.duplicates.placements.refs[$index] !== undefined">\n                        <p ng-if="ctrl.state.duplicates.placements.refs[$index] !== undefined">\n                          <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> This label is already defined.\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div ng-if="ctrl.showPlacementPolicySection()">\n                <div class="form-group">\n                  <div class="col-sm-12">\n                    <label class="control-label text-left">Placement policy</label>\n                  </div>\n                </div>\n\n                <div class="form-group">\n                  <div class="col-sm-12 small text-muted">\n                    Specify the policy associated to the placement rules.\n                  </div>\n                </div>\n\n                \x3c!-- placement policy options --\x3e\n                <div class="form-group" style="margin-bottom: 0;" ng-if="ctrl.formValues.Placements.length">\n                  <div class="boxselector_wrapper">\n                    <div>\n                      <input type="radio" id="placement_soft" ng-value="ctrl.ApplicationPlacementTypes.PREFERRED" ng-model="ctrl.formValues.PlacementType" />\n                      <label for="placement_soft">\n                        <div class="boxselector_header">\n                          <i class="fa fa-list" aria-hidden="true" style="margin-right: 2px;"></i>\n                          Preferred\n                        </div>\n                        <p>Schedule this application on nodes that match the rules if possible</p>\n                      </label>\n                    </div>\n                    <div>\n                      <input type="radio" id="placement_hard" ng-value="ctrl.ApplicationPlacementTypes.MANDATORY" ng-model="ctrl.formValues.PlacementType" />\n                      <label for="placement_hard">\n                        <div class="boxselector_header">\n                          <i class="fa fa-tasks" aria-hidden="true" style="margin-right: 2px;"></i>\n                          Mandatory\n                        </div>\n                        <p>Schedule this application <b>ONLY</b> on nodes that match <b>ALL</b> Rules</p>\n                      </label>\n                    </div>\n                  </div>\n                </div>\n                \x3c!-- !placement policy options --\x3e\n              </div>\n              \x3c!-- #endregion --\x3e\n            </div>\n\n            <div class="col-sm-12 form-section-title">\n              Publishing the application\n            </div>\n            \x3c!-- #region PUBLISHING OPTIONS --\x3e\n            <div class="form-group">\n              <div class="col-sm-12 small text-muted">\n                Select how you want to publish your application.\n              </div>\n            </div>\n\n            \x3c!-- publishing options --\x3e\n            <div class="form-group" style="margin-bottom: 0;">\n              <div class="boxselector_wrapper">\n                <div ng-style="{ color: ctrl.isPublishingTypeEditDisabled() ? \'#767676\' : \'\' }">\n                  <input\n                    type="radio"\n                    id="publishing_internal"\n                    ng-value="ctrl.ApplicationPublishingTypes.INTERNAL"\n                    ng-model="ctrl.formValues.PublishingType"\n                    ng-change="ctrl.onChangePublishedPorts()"\n                    ng-disabled="ctrl.isPublishingTypeEditDisabled()"\n                  />\n                  <label\n                    for="publishing_internal"\n                    ng-if="\n                      !ctrl.isPublishingTypeEditDisabled() || (ctrl.isPublishingTypeEditDisabled() && ctrl.formValues.PublishingType === ctrl.ApplicationPublishingTypes.INTERNAL)\n                    "\n                  >\n                    <div class="boxselector_header">\n                      <i class="fa fa-list-alt" aria-hidden="true" style="margin-right: 2px;"></i>\n                      Internal\n                    </div>\n                    <p>Internal communications inside the cluster only</p>\n                  </label>\n                  <label\n                    for="publishing_internal"\n                    ng-if="ctrl.isPublishingTypeEditDisabled() && ctrl.formValues.PublishingType !== ctrl.ApplicationPublishingTypes.INTERNAL"\n                    tooltip-append-to-body="true"\n                    tooltip-placement="bottom"\n                    tooltip-class="portainer-tooltip"\n                    uib-tooltip="Changing the publishing mode is not allowed until you delete all previously existing ports"\n                    style="cursor: pointer; border-color: #767676;"\n                  >\n                    <div class="boxselector_header">\n                      <i class="fa fa-list-alt" aria-hidden="true" style="margin-right: 2px;"></i>\n                      Internal\n                    </div>\n                    <p>Internal communications inside the cluster only</p>\n                  </label>\n                </div>\n\n                <div ng-style="{ color: ctrl.isPublishingTypeEditDisabled() ? \'#767676\' : \'\' }">\n                  <input\n                    type="radio"\n                    id="publishing_cluster"\n                    ng-value="ctrl.ApplicationPublishingTypes.CLUSTER"\n                    ng-model="ctrl.formValues.PublishingType"\n                    ng-change="ctrl.onChangePublishedPorts()"\n                    ng-disabled="ctrl.isPublishingTypeEditDisabled()"\n                  />\n                  <label\n                    for="publishing_cluster"\n                    ng-if="\n                      !ctrl.isPublishingTypeEditDisabled() || (ctrl.isPublishingTypeEditDisabled() && ctrl.formValues.PublishingType === ctrl.ApplicationPublishingTypes.CLUSTER)\n                    "\n                  >\n                    <div class="boxselector_header">\n                      <i class="fa fa-list" aria-hidden="true" style="margin-right: 2px;"></i>\n                      Cluster\n                    </div>\n                    <p>Publish this application via a port on all nodes of the cluster</p>\n                  </label>\n                  <label\n                    for="publishing_cluster"\n                    ng-if="ctrl.isPublishingTypeEditDisabled() && ctrl.formValues.PublishingType !== ctrl.ApplicationPublishingTypes.CLUSTER"\n                    tooltip-append-to-body="true"\n                    tooltip-placement="bottom"\n                    tooltip-class="portainer-tooltip"\n                    uib-tooltip="Changing the publishing mode is not allowed until you delete all previously existing ports"\n                    style="cursor: pointer; border-color: #767676;"\n                  >\n                    <div class="boxselector_header">\n                      <i class="fa fa-list" aria-hidden="true" style="margin-right: 2px;"></i>\n                      Cluster\n                    </div>\n                    <p>Publish this application via a port on all nodes of the cluster</p>\n                  </label>\n                </div>\n                <div ng-if="ctrl.publishViaIngressEnabled()" ng-style="{ color: ctrl.isPublishingTypeEditDisabled() ? \'#767676\' : \'\' }">\n                  <input\n                    type="radio"\n                    id="publishing_ingress"\n                    ng-value="ctrl.ApplicationPublishingTypes.INGRESS"\n                    ng-model="ctrl.formValues.PublishingType"\n                    ng-change="ctrl.onChangePublishedPorts()"\n                    ng-disabled="ctrl.isPublishingTypeEditDisabled()"\n                  />\n                  <label\n                    for="publishing_ingress"\n                    ng-if="\n                      !ctrl.isPublishingTypeEditDisabled() || (ctrl.isPublishingTypeEditDisabled() && ctrl.formValues.PublishingType === ctrl.ApplicationPublishingTypes.INGRESS)\n                    "\n                  >\n                    <div class="boxselector_header">\n                      <i class="fa fa-route" aria-hidden="true" style="margin-right: 2px;"></i>\n                      Ingress\n                    </div>\n                    <p>Publish this application via a HTTP route</p>\n                  </label>\n                  <label\n                    for="publishing_ingress"\n                    ng-if="ctrl.isPublishingTypeEditDisabled() && ctrl.formValues.PublishingType !== ctrl.ApplicationPublishingTypes.INGRESS"\n                    tooltip-append-to-body="true"\n                    tooltip-placement="bottom"\n                    tooltip-class="portainer-tooltip"\n                    uib-tooltip="Changing the publishing mode is not allowed until you delete all previously existing ports"\n                    style="cursor: pointer; border-color: #767676;"\n                  >\n                    <div class="boxselector_header">\n                      <i class="fa fa-route" aria-hidden="true" style="margin-right: 2px;"></i>\n                      Ingress\n                    </div>\n                    <p>Publish this application via a HTTP route</p>\n                  </label>\n                </div>\n                <div ng-if="ctrl.publishViaLoadBalancerEnabled()" ng-style="{ color: ctrl.isPublishingTypeEditDisabled() ? \'#767676\' : \'\' }">\n                  <input\n                    type="radio"\n                    id="publishing_loadbalancer"\n                    ng-value="ctrl.ApplicationPublishingTypes.LOAD_BALANCER"\n                    ng-model="ctrl.formValues.PublishingType"\n                    ng-change="ctrl.onChangePublishedPorts()"\n                    ng-disabled="ctrl.isPublishingTypeEditDisabled()"\n                  />\n                  <label\n                    for="publishing_loadbalancer"\n                    ng-if="\n                      !ctrl.isPublishingTypeEditDisabled() ||\n                      (ctrl.isPublishingTypeEditDisabled() && ctrl.formValues.PublishingType === ctrl.ApplicationPublishingTypes.LOAD_BALANCER)\n                    "\n                  >\n                    <div class="boxselector_header">\n                      <i class="fa fa-project-diagram" aria-hidden="true" style="margin-right: 2px;"></i>\n                      Load balancer\n                    </div>\n                    <p>Publish this application via a load balancer</p>\n                  </label>\n                  <label\n                    for="publishing_loadbalancer"\n                    ng-if="ctrl.isPublishingTypeEditDisabled() && ctrl.formValues.PublishingType !== ctrl.ApplicationPublishingTypes.LOAD_BALANCER"\n                    tooltip-append-to-body="true"\n                    tooltip-placement="bottom"\n                    tooltip-class="portainer-tooltip"\n                    uib-tooltip="Changing the publishing mode is not allowed until you delete all previously existing ports"\n                    style="cursor: pointer; border-color: #767676;"\n                  >\n                    <div class="boxselector_header">\n                      <i class="fa fa-project-diagram" aria-hidden="true" style="margin-right: 2px;"></i>\n                      Load balancer\n                    </div>\n                    <p>Publish this application via a load balancer</p>\n                  </label>\n                </div>\n              </div>\n            </div>\n            \x3c!-- #endregion --\x3e\n\n            \x3c!-- #region PUBLISHED PORTS --\x3e\n            <div class="form-group">\n              <div class="col-sm-12" style="margin-top: 5px;">\n                <label class="control-label text-left">Published ports</label>\n                <span class="label label-default interactive" style="margin-left: 10px;" ng-click="ctrl.addPublishedPort()" ng-if="!ctrl.disableLoadBalancerEdit()">\n                  <i class="fa fa-plus-circle" aria-hidden="true"></i> publish a new port\n                </span>\n              </div>\n\n              <div\n                class="col-sm-12 small text-muted"\n                style="margin-top: 15px;"\n                ng-if="ctrl.formValues.PublishingType === ctrl.ApplicationPublishingTypes.CLUSTER && ctrl.formValues.PublishedPorts.length > 0"\n              >\n                <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                When publishing a port in cluster mode, the node port is optional. If left empty Kubernetes will use a random port number. If you wish to specify a port, use a port\n                number inside the default range <code>30000-32767</code>.\n              </div>\n              <div ng-if="ctrl.isNotInternalAndHasNoPublishedPorts()" class="col-sm-12 small text-muted text-warning" style="margin-top: 12px;">\n                <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> At least one published port must be defined.\n              </div>\n\n              <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n                \x3c!-- #region INPUTS --\x3e\n                <div\n                  ng-repeat-start="publishedPort in ctrl.formValues.PublishedPorts"\n                  style="margin-top: 2px;"\n                  tooltip-append-to-body="true"\n                  tooltip-placement="bottom"\n                  tooltip-class="portainer-tooltip"\n                  tooltip-enable="ctrl.disableLoadBalancerEdit()"\n                  uib-tooltip="Edition is not allowed while the Load Balancer is in \'Pending\' state"\n                >\n                  <div class="col-sm-3 input-group input-group-sm" ng-class="{ striked: publishedPort.NeedsDeletion }">\n                    <span class="input-group-addon">container port</span>\n                    <input\n                      type="number"\n                      class="form-control"\n                      name="container_port_{{ $index }}"\n                      ng-model="publishedPort.ContainerPort"\n                      placeholder="80"\n                      ng-min="1"\n                      ng-max="65535"\n                      ng-required="!publishedPort.NeedsDeletion"\n                      ng-change="ctrl.onChangePortMappingContainerPort()"\n                      ng-disabled="ctrl.disableLoadBalancerEdit() || ctrl.isEditAndNotNewPublishedPort($index)"\n                    />\n                  </div>\n\n                  <div\n                    class="col-sm-3 input-group input-group-sm"\n                    ng-class="{ striked: publishedPort.NeedsDeletion }"\n                    ng-if="\n                      (publishedPort.IsNew && ctrl.formValues.PublishingType === ctrl.ApplicationPublishingTypes.CLUSTER) ||\n                      (!publishedPort.IsNew && ctrl.savedFormValues.PublishingType === ctrl.ApplicationPublishingTypes.CLUSTER)\n                    "\n                  >\n                    <span class="input-group-addon">node port</span>\n                    <input\n                      name="published_node_port_{{ $index }}"\n                      type="number"\n                      class="form-control"\n                      ng-model="publishedPort.NodePort"\n                      placeholder="30080"\n                      ng-min="30000"\n                      ng-max="32767"\n                      ng-change="ctrl.onChangePortMappingNodePort()"\n                      ng-disabled="ctrl.disableLoadBalancerEdit() || ctrl.isEditAndNotNewPublishedPort($index)"\n                    />\n                  </div>\n\n                  <div\n                    class="col-sm-3 input-group input-group-sm"\n                    ng-class="{ striked: publishedPort.NeedsDeletion }"\n                    ng-if="\n                      (publishedPort.IsNew && ctrl.formValues.PublishingType === ctrl.ApplicationPublishingTypes.LOAD_BALANCER) ||\n                      (!publishedPort.IsNew && ctrl.savedFormValues.PublishingType === ctrl.ApplicationPublishingTypes.LOAD_BALANCER)\n                    "\n                  >\n                    <span class="input-group-addon">load balancer port</span>\n                    <input\n                      type="number"\n                      class="form-control"\n                      name="load_balancer_port_{{ $index }}"\n                      ng-model="publishedPort.LoadBalancerPort"\n                      placeholder="80"\n                      value="8080"\n                      ng-min="1"\n                      ng-max="65535"\n                      ng-required="!publishedPort.NeedsDeletion"\n                      ng-change="ctrl.onChangePortMappingLoadBalancerPort()"\n                      ng-disabled="ctrl.disableLoadBalancerEdit() || ctrl.isEditAndNotNewPublishedPort($index)"\n                    />\n                  </div>\n\n                  <div\n                    class="col-sm-3 input-group input-group-sm"\n                    ng-class="{ striked: publishedPort.NeedsDeletion }"\n                    ng-if="\n                      (publishedPort.IsNew && ctrl.formValues.PublishingType === ctrl.ApplicationPublishingTypes.INGRESS) ||\n                      (!publishedPort.IsNew && ctrl.savedFormValues.PublishingType === ctrl.ApplicationPublishingTypes.INGRESS)\n                    "\n                  >\n                    <span class="input-group-addon">ingress</span>\n                    <select\n                      class="form-control"\n                      name="ingress_class_{{ $index }}"\n                      ng-model="publishedPort.IngressName"\n                      ng-options="ingress.Name as ingress.Name for ingress in ctrl.filteredIngresses"\n                      ng-required="!publishedPort.NeedsDeletion"\n                      ng-change="ctrl.onChangePortMappingIngress($index)"\n                      ng-disabled="ctrl.disableLoadBalancerEdit() || ctrl.isEditAndNotNewPublishedPort($index)"\n                    >\n                      <option selected disabled hidden value="">Select an ingress</option>\n                    </select>\n                  </div>\n\n                  <div\n                    class="col-sm-3 input-group input-group-sm"\n                    ng-class="{ striked: publishedPort.NeedsDeletion }"\n                    ng-if="\n                      (publishedPort.IsNew && ctrl.formValues.PublishingType === ctrl.ApplicationPublishingTypes.INGRESS) ||\n                      (!publishedPort.IsNew && ctrl.savedFormValues.PublishingType === ctrl.ApplicationPublishingTypes.INGRESS)\n                    "\n                  >\n                    <span class="input-group-addon">route</span>\n                    <input\n                      class="form-control"\n                      name="ingress_route_{{ $index }}"\n                      ng-model="publishedPort.IngressRoute"\n                      placeholder="route"\n                      ng-required="!publishedPort.NeedsDeletion"\n                      ng-change="ctrl.onChangePortMappingIngressRoute()"\n                      ng-pattern="/^(\\/?[a-zA-Z0-9]+([a-zA-Z0-9-/_]*[a-zA-Z0-9])?|[a-zA-Z0-9]+)|(\\/){1}$/"\n                      ng-disabled="ctrl.disableLoadBalancerEdit() || ctrl.isEditAndNotNewPublishedPort($index)"\n                    />\n                  </div>\n\n                  <div class="input-group col-sm-2 input-group-sm">\n                    <div class="btn-group btn-group-sm" ng-class="{ striked: publishedPort.NeedsDeletion }">\n                      <label\n                        class="btn btn-primary"\n                        ng-model="publishedPort.Protocol"\n                        uib-btn-radio="\'TCP\'"\n                        ng-change="ctrl.onChangePortMappingContainerPort()"\n                        ng-disabled="ctrl.isProtocolOptionDisabled($index, \'TCP\')"\n                        >TCP</label\n                      >\n                      <label\n                        class="btn btn-primary"\n                        ng-model="publishedPort.Protocol"\n                        uib-btn-radio="\'UDP\'"\n                        ng-change="ctrl.onChangePortMappingContainerPort()"\n                        ng-disabled="ctrl.isProtocolOptionDisabled($index, \'UDP\')"\n                        >UDP</label\n                      >\n                    </div>\n                    <button\n                      ng-if="!ctrl.disableLoadBalancerEdit() && !publishedPort.NeedsDeletion"\n                      class="btn btn-sm btn-danger"\n                      type="button"\n                      ng-click="ctrl.removePublishedPort($index)"\n                    >\n                      <i class="fa fa-trash-alt" aria-hidden="true"></i>\n                    </button>\n                    <button\n                      ng-if="publishedPort.NeedsDeletion && ctrl.formValues.PublishingType === ctrl.savedFormValues.PublishingType"\n                      class="btn btn-sm btn-primary"\n                      type="button"\n                      ng-click="ctrl.restorePublishedPort($index)"\n                    >\n                      <i class="fa fa-trash-restore" aria-hidden="true"></i>\n                    </button>\n                  </div>\n                </div>\n                \x3c!-- #endregion --\x3e\n\n                \x3c!-- #region VALIDATION --\x3e\n                <div\n                  ng-repeat-end\n                  ng-show="\n                    kubernetesApplicationCreationForm[\'container_port_\' + $index].$invalid ||\n                    kubernetesApplicationCreationForm[\'published_node_port_\' + $index].$invalid ||\n                    kubernetesApplicationCreationForm[\'load_balancer_port_\' + $index].$invalid ||\n                    kubernetesApplicationCreationForm[\'ingress_class_\' + $index].$invalid ||\n                    kubernetesApplicationCreationForm[\'ingress_route_\' + $index].$invalid ||\n                    ctrl.state.duplicates.publishedPorts.containerPorts.refs[$index] !== undefined ||\n                    (ctrl.formValues.PublishingType === ctrl.ApplicationPublishingTypes.CLUSTER && ctrl.state.duplicates.publishedPorts.nodePorts.refs[$index] !== undefined) ||\n                    (ctrl.formValues.PublishingType === ctrl.ApplicationPublishingTypes.INGRESS && ctrl.state.duplicates.publishedPorts.ingressRoutes.refs[$index] !== undefined) ||\n                    (ctrl.formValues.PublishingType === ctrl.ApplicationPublishingTypes.LOAD_BALANCER &&\n                      ctrl.state.duplicates.publishedPorts.loadBalancerPorts.refs[$index] !== undefined)\n                  "\n                >\n                  <div class="col-sm-3 input-group input-group-sm">\n                    <div\n                      class="small text-warning"\n                      style="margin-top: 5px;"\n                      ng-if="\n                        kubernetesApplicationCreationForm[\'container_port_\' + $index].$invalid || ctrl.state.duplicates.publishedPorts.containerPorts.refs[$index] !== undefined\n                      "\n                    >\n                      <div ng-messages="kubernetesApplicationCreationForm[\'container_port_\'+$index].$error">\n                        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Container port number is required.</p>\n                        <p ng-message="min"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Container port number must be inside the range 1-65535.</p>\n                        <p ng-message="max"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Container port number must be inside the range 1-65535.</p>\n                      </div>\n                      <p ng-if="ctrl.state.duplicates.publishedPorts.containerPorts.refs[$index] !== undefined">\n                        <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> This port is already used.\n                      </p>\n                    </div>\n                  </div>\n\n                  <div class="col-sm-3 input-group input-group-sm" ng-if="ctrl.formValues.PublishingType === ctrl.ApplicationPublishingTypes.CLUSTER">\n                    <div\n                      class="small text-warning"\n                      style="margin-top: 5px;"\n                      ng-if="\n                        kubernetesApplicationCreationForm[\'published_node_port_\' + $index].$invalid || ctrl.state.duplicates.publishedPorts.nodePorts.refs[$index] !== undefined\n                      "\n                    >\n                      <div ng-messages="kubernetesApplicationCreationForm[\'published_node_port_\'+$index].$error">\n                        <p ng-message="min"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Node port number must be inside the range 30000-32767.</p>\n                        <p ng-message="max"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Node port number must be inside the range 30000-32767.</p>\n                      </div>\n                      <p ng-if="ctrl.state.duplicates.publishedPorts.nodePorts.refs[$index] !== undefined">\n                        <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> This port is already used.\n                      </p>\n                    </div>\n                  </div>\n\n                  <div class="col-sm-3 input-group input-group-sm" ng-if="ctrl.formValues.PublishingType === ctrl.ApplicationPublishingTypes.INGRESS">\n                    <div class="small text-warning" style="margin-top: 5px;" ng-if="kubernetesApplicationCreationForm[\'ingress_class_\' + $index].$invalid">\n                      <div ng-messages="kubernetesApplicationCreationForm[\'ingress_class_\'+$index].$error">\n                        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Ingress selection is required.</p>\n                      </div>\n                    </div>\n                  </div>\n                  <div class="col-sm-3 input-group input-group-sm" ng-if="ctrl.formValues.PublishingType === ctrl.ApplicationPublishingTypes.INGRESS">\n                    <div\n                      class="small text-warning"\n                      style="margin-top: 5px;"\n                      ng-if="kubernetesApplicationCreationForm[\'ingress_route_\' + $index].$invalid || ctrl.state.duplicates.publishedPorts.ingressRoutes.refs[$index] !== undefined"\n                    >\n                      <div ng-messages="kubernetesApplicationCreationForm[\'ingress_route_\'+$index].$error">\n                        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Route is required.</p>\n                        <p ng-message="pattern"\n                          ><i class="fa fa-exclamation-triangle" aria-hidden="true"></i>  \'-\', \'_\' \n                          \'/\'  ( \'my-route\', or \'route-123\').</p\n                        >\n                      </div>\n                      <p ng-if="ctrl.state.duplicates.publishedPorts.ingressRoutes.refs[$index] !== undefined">\n                        <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> This route is already used.\n                      </p>\n                    </div>\n                  </div>\n\n                  <div class="col-sm-3 input-group input-group-sm" ng-if="ctrl.formValues.PublishingType === ctrl.ApplicationPublishingTypes.LOAD_BALANCER">\n                    <div\n                      class="small text-warning"\n                      style="margin-top: 5px;"\n                      ng-if="\n                        kubernetesApplicationCreationForm[\'load_balancer_port_\' + $index].$invalid ||\n                        ctrl.state.duplicates.publishedPorts.loadBalancerPorts.refs[$index] !== undefined\n                      "\n                    >\n                      <div ng-messages="kubernetesApplicationCreationForm[\'load_balancer_port_\'+$index].$error">\n                        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Load balancer port number is required.</p>\n                        <p ng-message="min"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Load balancer port number must be inside the range 1-65535.</p>\n                        <p ng-message="max"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Load balancer port number must be inside the range 1-65535.</p>\n                      </div>\n                      <p ng-if="ctrl.state.duplicates.publishedPorts.loadBalancerPorts.refs[$index] !== undefined">\n                        <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>\n                        This port is already used.\n                      </p>\n                    </div>\n                  </div>\n\n                  <div class="input-group col-sm-1 input-group-sm"> </div>\n                </div>\n                \x3c!-- #endregion --\x3e\n              </div>\n            </div>\n            \x3c!-- #endregion --\x3e\n\n            <div class="col-sm-12 form-section-title">\n              \n            </div>\n\n            \x3c!-- #region ACTIONS --\x3e\n            <div class="form-group">\n              <div class="col-sm-12">\n                <button\n                  type="button"\n                  class="btn btn-primary btn-sm"\n                  ng-disabled="!kubernetesApplicationCreationForm.$valid || ctrl.isDeployUpdateButtonDisabled()"\n                  ng-click="ctrl.deployApplication()"\n                  button-spinner="ctrl.state.actionInProgress"\n                >\n                  <span ng-show="!ctrl.state.isEdit && !ctrl.state.actionInProgress">Deploy application</span>\n                  <span ng-show="!ctrl.state.isEdit && ctrl.state.actionInProgress">...</span>\n                  <span ng-show="ctrl.state.isEdit && !ctrl.state.actionInProgress">Update application</span>\n                  <span ng-show="ctrl.state.isEdit && ctrl.state.actionInProgress">Update in progress...</span>\n                </button>\n                <button\n                  ng-if="ctrl.state.isEdit && !ctrl.state.actionInProgress"\n                  type="button"\n                  class="btn btn-sm btn-default"\n                  ui-sref="kubernetes.applications.application({ name: ctrl.application.Name, namespace: ctrl.application.ResourcePool })"\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n            \x3c!-- #endregion --\x3e\n          </form>\n        </rd-widget-body>\n      </rd-widget>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(22),r=n(338),i=n(20),s=n(5),o=n(111),l=n(10),c=n(35),d=n(7),u=n(23),p=n(52),m=n(19),g=n(38),f=n(2),h=n(4),v=n(1),b=n.n(v),y=n(44),x=n.n(y),w=n(46),k=n(3),S=n(18),C=n(48),$=n(72),A=n(15),P=n(28),I=n(13),T=n(66),N=n(174);function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||V(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){E(i,a,r,s,o,"next",e)}function o(e){E(i,a,r,s,o,"throw",e)}s(void 0)}))}}function D(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){if(e){if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function L(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var _=function(){function e(t,n,a,r,i,s,o,l,c,d,u,p,m,g,f){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.$state=n,this.Notifications=a,this.EndpointProvider=r,this.Authentication=i,this.ModalService=s,this.KubernetesResourcePoolService=o,this.KubernetesApplicationService=l,this.KubernetesStackService=c,this.KubernetesConfigurationService=d,this.KubernetesNodeService=u,this.KubernetesVolumeService=f,this.KubernetesIngressService=p,this.KubernetesPersistentVolumeClaimService=m,this.KubernetesNamespaceHelper=g,this.ApplicationDeploymentTypes=k.KubernetesApplicationDeploymentTypes,this.ApplicationDataAccessPolicies=k.KubernetesApplicationDataAccessPolicies,this.ApplicationPublishingTypes=k.KubernetesApplicationPublishingTypes,this.ApplicationPlacementTypes=k.KubernetesApplicationPlacementTypes,this.ApplicationTypes=k.KubernetesApplicationTypes,this.ApplicationConfigurationFormValueOverridenKeyTypes=S.KubernetesApplicationConfigurationFormValueOverridenKeyTypes,this.ServiceTypes=P.KubernetesServiceTypes,this.onInit=this.onInit.bind(this),this.updateApplicationAsync=this.updateApplicationAsync.bind(this),this.deployApplicationAsync=this.deployApplicationAsync.bind(this),this.updateSlidersAsync=this.updateSlidersAsync.bind(this),this.refreshStacksAsync=this.refreshStacksAsync.bind(this),this.refreshConfigurationsAsync=this.refreshConfigurationsAsync.bind(this),this.refreshApplicationsAsync=this.refreshApplicationsAsync.bind(this),this.refreshNamespaceDataAsync=this.refreshNamespaceDataAsync.bind(this),this.getApplicationAsync=this.getApplicationAsync.bind(this)}var t,n,v,y,E,V,U,_,j,F,M,K;return e.$inject=["$async","$state","Notifications","EndpointProvider","Authentication","ModalService","KubernetesResourcePoolService","KubernetesApplicationService","KubernetesStackService","KubernetesConfigurationService","KubernetesNodeService","KubernetesIngressService","KubernetesPersistentVolumeClaimService","KubernetesNamespaceHelper","KubernetesVolumeService"],t=e,(n=[{key:"onChangeName",value:function(){var e=Object(h.a)(this.applications,{Name:this.formValues.Name});this.state.alreadyExists=this.state.isEdit&&e&&this.application.Id!==e.Id||!this.state.isEdit&&e}},{key:"unselectAutoScaler",value:function(){this.formValues.DeploymentType===this.ApplicationDeploymentTypes.GLOBAL&&(this.formValues.AutoScaler.IsUsed=!1)}},{key:"addConfiguration",value:function(){var e=new S.KubernetesApplicationConfigurationFormValue;e.SelectedConfiguration=this.configurations[0],this.formValues.Configurations.push(e)}},{key:"removeConfiguration",value:function(e){this.formValues.Configurations.splice(e,1),this.onChangeConfigurationPath()}},{key:"overrideConfiguration",value:function(e){var t=this.formValues.Configurations[e];t.Overriden=!0,t.OverridenKeys=Object(f.a)(Object(g.a)(t.SelectedConfiguration.Data),(function(e){var t=new S.KubernetesApplicationConfigurationFormValueOverridenKey;return t.Key=e,t}))}},{key:"resetConfiguration",value:function(e){var t=this.formValues.Configurations[e];t.Overriden=!1,t.OverridenKeys=[],this.onChangeConfigurationPath()}},{key:"clearConfigurations",value:function(){this.formValues.Configurations=[]}},{key:"onChangeConfigurationPath",value:function(){var e=this;this.state.duplicates.configurationPaths.refs=[];var t=Object(m.a)(this.formValues.Configurations,(function(e,t){var n=Object(p.a)(Object(f.a)(t.OverridenKeys,"Path"));return Object(u.a)(e,n)}),[]),n=C.default.getDuplicates(t);Object(d.a)(this.formValues.Configurations,(function(t,a){Object(d.a)(t.OverridenKeys,(function(t,r){var i=Object(h.a)(n,(function(e){return e===t.Path}));i&&(e.state.duplicates.configurationPaths.refs[a+"_"+r]=i)}))})),this.state.duplicates.configurationPaths.hasDuplicates=Object.keys(this.state.duplicates.configurationPaths.refs).length>0}},{key:"addEnvironmentVariable",value:function(){this.formValues.EnvironmentVariables.push(new S.KubernetesApplicationEnvironmentVariableFormValue)}},{key:"restoreEnvironmentVariable",value:function(e){this.formValues.EnvironmentVariables[e].NeedsDeletion=!1}},{key:"removeEnvironmentVariable",value:function(e){this.state.isEdit&&!this.formValues.EnvironmentVariables[e].IsNew?this.formValues.EnvironmentVariables[e].NeedsDeletion=!0:this.formValues.EnvironmentVariables.splice(e,1),this.onChangeEnvironmentName()}},{key:"onChangeEnvironmentName",value:function(){this.state.duplicates.environmentVariables.refs=C.default.getDuplicates(Object(f.a)(this.formValues.EnvironmentVariables,"Name")),this.state.duplicates.environmentVariables.hasDuplicates=Object.keys(this.state.duplicates.environmentVariables.refs).length>0}},{key:"addPersistedFolder",value:function(){var e={};this.storageClasses.length>0&&(e=this.storageClasses[0]),this.formValues.PersistedFolders.push(new S.KubernetesApplicationPersistedFolderFormValue(e)),this.resetDeploymentType()}},{key:"restorePersistedFolder",value:function(e){this.formValues.PersistedFolders[e].NeedsDeletion=!1}},{key:"resetPersistedFolders",value:function(){this.formValues.PersistedFolders=Object(d.a)(this.formValues.PersistedFolders,(function(e){e.ExistingVolume=null,e.UseNewVolume=!0}))}},{key:"removePersistedFolder",value:function(e){this.state.isEdit&&this.formValues.PersistedFolders[e].PersistentVolumeClaimName?this.formValues.PersistedFolders[e].NeedsDeletion=!0:this.formValues.PersistedFolders.splice(e,1),this.onChangePersistedFolderPath(),this.onChangeExistingVolumeSelection()}},{key:"onChangePersistedFolderPath",value:function(){this.state.duplicates.persistedFolders.refs=C.default.getDuplicates(Object(f.a)(this.formValues.PersistedFolders,(function(e){if(!e.NeedsDeletion)return e.ContainerPath}))),this.state.duplicates.persistedFolders.hasDuplicates=Object.keys(this.state.duplicates.persistedFolders.refs).length>0}},{key:"onChangeExistingVolumeSelection",value:function(){this.state.duplicates.existingVolumes.refs=C.default.getDuplicates(Object(f.a)(this.formValues.PersistedFolders,(function(e){return e.ExistingVolume?e.ExistingVolume.PersistentVolumeClaim.Name:""}))),this.state.duplicates.existingVolumes.hasDuplicates=Object.keys(this.state.duplicates.existingVolumes.refs).length>0}},{key:"useNewVolume",value:function(e){this.formValues.PersistedFolders[e].UseNewVolume=!0,this.formValues.PersistedFolders[e].ExistingVolume=null,this.state.PersistedFoldersUseExistingVolumes=!Object(m.a)(this.formValues.PersistedFolders,(function(e,t){return e&&t.UseNewVolume}),!0)}},{key:"useExistingVolume",value:function(e){this.formValues.PersistedFolders[e].UseNewVolume=!1,this.state.PersistedFoldersUseExistingVolumes=!!Object(h.a)(this.formValues.PersistedFolders,{UseNewVolume:!1}),this.formValues.DataAccessPolicy===this.ApplicationDataAccessPolicies.ISOLATED&&(this.formValues.DataAccessPolicy=this.ApplicationDataAccessPolicies.SHARED,this.resetDeploymentType())}},{key:"addPlacement",value:function(){var e=new S.KubernetesApplicationPlacementFormValue,t=this.nodesLabels[0];e.Label=t,e.Value=t.Values[0],this.formValues.Placements.push(e),this.onChangePlacement()}},{key:"restorePlacement",value:function(e){this.formValues.Placements[e].NeedsDeletion=!1,this.onChangePlacement()}},{key:"removePlacement",value:function(e){this.state.isEdit&&!this.formValues.Placements[e].IsNew?this.formValues.Placements[e].NeedsDeletion=!0:this.formValues.Placements.splice(e,1),this.onChangePlacement()}},{key:"onChangePlacement",value:function(){this.onChangePlacementLabelValidate()}},{key:"onChangePlacementLabel",value:function(e){this.formValues.Placements[e].Value=this.formValues.Placements[e].Label.Values[0],this.onChangePlacementLabelValidate()}},{key:"onChangePlacementLabelValidate",value:function(){var e=this.state.duplicates.placements,t=Object(f.a)(this.formValues.Placements,(function(e){return e.NeedsDeletion?void 0:e.Label.Key})),n=C.default.getDuplicates(t);e.refs=n,e.hasDuplicates=Object.keys(n).length>0}},{key:"addPublishedPort",value:function(){var e=new S.KubernetesApplicationPublishedPortFormValue,t=this.filteredIngresses;e.IngressName=t&&t.length?t[0].Name:void 0,e.IngressHost=t&&t.length?t[0].Host:void 0,this.formValues.PublishedPorts.push(e)}},{key:"resetPublishedPorts",value:function(){var e=this.filteredIngresses;Object(d.a)(this.formValues.PublishedPorts,(function(t){t.IngressName=e&&e.length?e[0].Name:void 0,t.IngressHost=e&&e.length?e[0].Host:void 0}))}},{key:"restorePublishedPort",value:function(e){this.formValues.PublishedPorts[e].NeedsDeletion=!1,this.onChangePublishedPorts()}},{key:"removePublishedPort",value:function(e){this.state.isEdit&&!this.formValues.PublishedPorts[e].IsNew?this.formValues.PublishedPorts[e].NeedsDeletion=!0:this.formValues.PublishedPorts.splice(e,1),this.onChangePublishedPorts()}},{key:"onChangePublishedPorts",value:function(){this.onChangePortMappingContainerPort(),this.onChangePortMappingNodePort(),this.onChangePortMappingIngressRoute(),this.onChangePortMappingLoadBalancer()}},{key:"onChangePortMappingContainerPort",value:function(){var e=this.state.duplicates.publishedPorts.containerPorts;if(this.formValues.PublishingType!==k.KubernetesApplicationPublishingTypes.INGRESS){var t=Object(f.a)(this.formValues.PublishedPorts,(function(e){return e.NeedsDeletion?void 0:e.ContainerPort+e.Protocol})),n=C.default.getDuplicates(t);e.refs=n,e.hasDuplicates=Object.keys(n).length>0}else e.refs={},e.hasDuplicates=!1}},{key:"onChangePortMappingNodePort",value:function(){var e=this.state.duplicates.publishedPorts.nodePorts;if(this.formValues.PublishingType===k.KubernetesApplicationPublishingTypes.CLUSTER){var t=Object(f.a)(this.formValues.PublishedPorts,(function(e){return e.NeedsDeletion?void 0:e.NodePort})),n=C.default.getDuplicates(t);e.refs=n,e.hasDuplicates=Object.keys(n).length>0}else e.refs={},e.hasDuplicates=!1}},{key:"onChangePortMappingIngress",value:function(e){var t=this.formValues.PublishedPorts[e],n=Object(h.a)(this.filteredIngresses,{Name:t.IngressName});t.IngressHost=n.Host,this.onChangePublishedPorts()}},{key:"onChangePortMappingIngressRoute",value:function(){var e=this.state.duplicates.publishedPorts.ingressRoutes;if(this.formValues.PublishingType===k.KubernetesApplicationPublishingTypes.INGRESS){var t=Object(f.a)(this.formValues.PublishedPorts,(function(e){return e.IsNew&&e.IngressRoute?(e.IngressHost||e.IngressName)+e.IngressRoute:void 0})),n=Object(f.a)(this.formValues.PublishedPorts,(function(e){return e.NeedsDeletion&&e.IngressRoute?(e.IngressHost||e.IngressName)+e.IngressRoute:void 0})),a=Object(c.a)(this.ingresses,(function(e){return Object(f.a)(e.Paths,(function(t){return(t.Host||e.Name)+t.Path}))})),r=C.default.getDuplicates(t);Object(d.a)(t,(function(e,t){Object(l.a)(a,e)&&!Object(l.a)(n,e)&&(r[t]=e)})),e.refs=r,e.hasDuplicates=Object.keys(r).length>0}else e.refs={},e.hasDuplicates=!1}},{key:"onChangePortMappingLoadBalancer",value:function(){var e=this.state.duplicates.publishedPorts.loadBalancerPorts;if(this.formValues.PublishingType===k.KubernetesApplicationPublishingTypes.LOAD_BALANCER){var t=Object(f.a)(this.formValues.PublishedPorts,(function(e){return e.NeedsDeletion?void 0:e.LoadBalancerPort})),n=C.default.getDuplicates(t);e.refs=n,e.hasDuplicates=Object.keys(n).length>0}else e.refs={},e.hasDuplicates=!1}},{key:"isValid",value:function(){return!(this.state.alreadyExists||this.state.duplicates.environmentVariables.hasDuplicates||this.state.duplicates.persistedFolders.hasDuplicates||this.state.duplicates.configurationPaths.hasDuplicates||this.state.duplicates.existingVolumes.hasDuplicates||this.state.duplicates.publishedPorts.containerPorts.hasDuplicates||this.state.duplicates.publishedPorts.nodePorts.hasDuplicates||this.state.duplicates.publishedPorts.ingressRoutes.hasDuplicates||this.state.duplicates.publishedPorts.loadBalancerPorts.hasDuplicates)}},{key:"storageClassAvailable",value:function(){return this.storageClasses&&this.storageClasses.length>0}},{key:"hasMultipleStorageClassesAvailable",value:function(){return this.storageClasses&&this.storageClasses.length>1}},{key:"resetDeploymentType",value:function(){this.formValues.DeploymentType=this.ApplicationDeploymentTypes.REPLICATED}},{key:"showDataAccessPolicySection",value:function(){return 0!==this.formValues.PersistedFolders.length}},{key:"supportGlobalDeployment",value:function(){var e=0!==this.formValues.PersistedFolders.length,t=Object(h.a)(this.formValues.PersistedFolders,(function(e){return Object(o.a)(e.StorageClass.AccessModes,["RWO"])})),n=this.formValues.DataAccessPolicy===this.ApplicationDataAccessPolicies.ISOLATED;return!(e&&t||n)}},{key:"isEditAndStatefulSet",value:function(){return this.state.isEdit&&this.formValues.DataAccessPolicy===this.ApplicationDataAccessPolicies.ISOLATED}},{key:"supportScalableReplicaDeployment",value:function(){var e=0!==this.formValues.PersistedFolders.length,t=Object(h.a)(this.formValues.PersistedFolders,(function(e){return Object(o.a)(e.StorageClass.AccessModes,["RWO"])})),n=this.formValues.DataAccessPolicy===this.ApplicationDataAccessPolicies.ISOLATED;return!(e&&!n&&(!e||t))}},{key:"getNonScalableStorage",value:function(){for(var e=[],t=0;t<this.formValues.PersistedFolders.length;t++){var n=this.formValues.PersistedFolders[t];Object(o.a)(n.StorageClass.AccessModes,["RWO"])&&e.push(n.StorageClass.Name)}return Object(p.a)(e).join(", ")}},{key:"resourceQuotaCapacityExceeded",value:function(){return!this.state.sliders.memory.max||!this.state.sliders.cpu.max}},{key:"resourceReservationsOverflow",value:function(){var e=this.formValues.ReplicaCount,t=this.formValues.CpuLimit,n=this.state.sliders.cpu.max,a=this.formValues.MemoryLimit,r=this.state.sliders.memory.max;return t*e>n||a*e>r}},{key:"autoScalerOverflow",value:function(){var e=this.formValues.AutoScaler.MaxReplicas,t=this.formValues.CpuLimit,n=this.state.sliders.cpu.max,a=this.formValues.MemoryLimit,r=this.state.sliders.memory.max;return t*e>n||a*e>r}},{key:"publishViaLoadBalancerEnabled",value:function(){return this.state.useLoadBalancer}},{key:"publishViaIngressEnabled",value:function(){return this.filteredIngresses.length}},{key:"isEditAndNoChangesMade",value:function(){if(!this.state.isEdit)return!1;var e=w.a(this.savedFormValues,this.formValues);return this.editChanges=Object(s.a)(e,(function(e){return!Object(l.a)(e.path,"$$hashKey")&&"/ApplicationType"!==e.path})),!this.editChanges.length}},{key:"isEditAndExistingPersistedFolder",value:function(e){return this.state.isEdit&&this.formValues.PersistedFolders[e].PersistentVolumeClaimName}},{key:"isEditAndNotNewPublishedPort",value:function(e){return this.state.isEdit&&!this.formValues.PublishedPorts[e].IsNew}},{key:"isNotInternalAndHasNoPublishedPorts",value:function(){var e=Object(s.a)(this.formValues.PublishedPorts,{NeedsDeletion:!0}),t=i.a.apply(void 0,[this.formValues.PublishedPorts].concat(D(e)));return this.formValues.PublishingType!==k.KubernetesApplicationPublishingTypes.INTERNAL&&0===t.length}},{key:"isEditAndNotNewPlacement",value:function(e){return this.state.isEdit&&!this.formValues.Placements[e].IsNew}},{key:"showPlacementPolicySection",value:function(){return 0!==Object(s.a)(this.formValues.Placements,{NeedsDeletion:!1}).length}},{key:"isNonScalable",value:function(){var e=this.supportScalableReplicaDeployment(),t=this.supportGlobalDeployment(),n=this.formValues.ReplicaCount>1,a=this.formValues.DeploymentType===this.ApplicationDeploymentTypes.REPLICATED;return a&&!e&&n||!a&&!t}},{key:"isDeployUpdateButtonDisabled",value:function(){var e=this.resourceReservationsOverflow(),t=this.autoScalerOverflow(),n=this.state.actionInProgress,a=!this.isValid(),r=this.isEditAndNoChangesMade(),i=this.isNonScalable(),s=this.isNotInternalAndHasNoPublishedPorts();return e||t||n||a||r||i||s}},{key:"disableLoadBalancerEdit",value:function(){return this.state.isEdit&&this.application.ServiceType===this.ServiceTypes.LOAD_BALANCER&&!this.application.LoadBalancerIPAddress&&this.formValues.PublishingType===this.ApplicationPublishingTypes.LOAD_BALANCER}},{key:"isPublishingTypeEditDisabled",value:function(){var e=Object(s.a)(this.formValues.PublishedPorts,{IsNew:!1,NeedsDeletion:!1});return this.state.isEdit&&this.formValues.PublishedPorts.length>0&&e.length>0}},{key:"isProtocolOptionDisabled",value:function(e,t){return this.disableLoadBalancerEdit()||this.isEditAndNotNewPublishedPort(e)&&this.formValues.PublishedPorts[e].Protocol!==t}},{key:"updateSlidersAsync",value:(K=O(regeneratorRuntime.mark((function e(){var t,n,a,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t=this.formValues.ResourcePool.Quota,s=0,t?(this.state.resourcePoolHasQuota=!0,t.CpuLimit?(n=k.KubernetesApplicationQuotaDefaults.CpuLimit,a=t.CpuLimit-t.CpuLimitUsed,this.state.isEdit&&this.savedFormValues.CpuLimit&&(a+=this.savedFormValues.CpuLimit*this.savedFormValues.ReplicaCount)):(n=0,a=this.state.nodes.cpu),t.MemoryLimit?(i=k.KubernetesApplicationQuotaDefaults.MemoryLimit,s=t.MemoryLimit-t.MemoryLimitUsed,this.state.isEdit&&this.savedFormValues.MemoryLimit&&(s+=A.default.bytesValue(this.savedFormValues.MemoryLimit)*this.savedFormValues.ReplicaCount)):(i=0,s=this.state.nodes.memory)):(this.state.resourcePoolHasQuota=!1,n=0,a=this.state.nodes.cpu,i=0,s=this.state.nodes.memory),this.state.sliders.memory.min=i,this.state.sliders.memory.max=A.default.megaBytesValue(s),this.state.sliders.cpu.min=n,this.state.sliders.cpu.max=Object(r.a)(a,2),this.state.isEdit||(this.formValues.CpuLimit=n,this.formValues.MemoryLimit=i)}catch(e){this.Notifications.error("",e,"Unable to update resources selector")}case 1:case"end":return e.stop()}}),e,this)}))),function(){return K.apply(this,arguments)})},{key:"updateSliders",value:function(){return this.$async(this.updateSlidersAsync)}},{key:"refreshStacksAsync",value:(M=O(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesStackService.get(t);case 3:this.stacks=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve stacks");case 9:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(e){return M.apply(this,arguments)})},{key:"refreshStacks",value:function(e){return this.$async(this.refreshStacksAsync,e)}},{key:"refreshConfigurationsAsync",value:(F=O(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesConfigurationService.get(t);case 3:this.configurations=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve configurations");case 9:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(e){return F.apply(this,arguments)})},{key:"refreshConfigurations",value:function(e){return this.$async(this.refreshConfigurationsAsync,e)}},{key:"refreshApplicationsAsync",value:(j=O(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesApplicationService.get(t);case 3:this.applications=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve applications");case 9:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(e){return j.apply(this,arguments)})},{key:"refreshApplications",value:function(e){return this.$async(this.refreshApplicationsAsync,e)}},{key:"refreshVolumes",value:function(e){var t=Object(s.a)(this.volumes,(function(t){var n=t.ResourcePool.Namespace.Name===e,a=!T.default.isUsed(t),r=t.PersistentVolumeClaim.StorageClass&&Object(h.a)(t.PersistentVolumeClaim.StorageClass.AccessModes,(function(e){return"RWX"===e}));return n&&(a||r)}));this.availableVolumes=t}},{key:"refreshIngresses",value:function(e){this.filteredIngresses=Object(s.a)(this.ingresses,{Namespace:e}),this.publishViaIngressEnabled()||(this.formValues.PublishingType=k.KubernetesApplicationPublishingTypes.INTERNAL),this.formValues.OriginalIngresses=this.filteredIngresses}},{key:"refreshNamespaceDataAsync",value:(_=O(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.refreshStacks(t),this.refreshConfigurations(t),this.refreshApplications(t),this.refreshIngresses(t),this.refreshVolumes(t)]);case 2:this.onChangeName();case 3:case"end":return e.stop()}}),e,this)}))),function(e){return _.apply(this,arguments)})},{key:"refreshNamespaceData",value:function(e){return this.$async(this.refreshNamespaceDataAsync,e)}},{key:"resetFormValues",value:function(){this.clearConfigurations(),this.resetPersistedFolders(),this.resetPublishedPorts()}},{key:"onResourcePoolSelectionChange",value:function(){var e=this.formValues.ResourcePool.Namespace.Name;this.updateSliders(),this.refreshNamespaceData(e),this.resetFormValues()}},{key:"deployApplicationAsync",value:(U=O(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.actionInProgress=!0,e.prev=1,this.formValues.ApplicationOwner=this.Authentication.getUserDetails().username,Object(a.a)(this.formValues.Configurations,(function(e){return void 0===e.SelectedConfiguration})),e.next=6,this.KubernetesApplicationService.create(this.formValues);case 6:this.Notifications.success(" deployed",this.formValues.Name),this.$state.go("kubernetes.applications"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),this.Notifications.error("",e.t0,"Unable to create application");case 13:return e.prev=13,this.state.actionInProgress=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[1,10,13,16]])}))),function(){return U.apply(this,arguments)})},{key:"updateApplicationAsync",value:(V=O(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state.actionInProgress=!0,e.next=4,this.KubernetesApplicationService.patch(this.savedFormValues,this.formValues);case 4:this.Notifications.success(" updated"),this.$state.go("kubernetes.applications.application",{name:this.application.Name,namespace:this.application.ResourcePool}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to update application");case 11:return e.prev=11,this.state.actionInProgress=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[0,8,11,14]])}))),function(){return V.apply(this,arguments)})},{key:"deployApplication",value:function(){var e=this;if(!this.state.isEdit)return this.$async(this.deployApplicationAsync);this.ModalService.confirmUpdate("Updating the application may cause a service interruption. Do you wish to continue?",(function(t){if(t)return e.$async(e.updateApplicationAsync)}))}},{key:"getApplicationAsync",value:(E=O(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.state.params.namespace,e.next=4,Promise.all([this.KubernetesApplicationService.get(t,this.state.params.name),this.KubernetesPersistentVolumeClaimService.get(t)]);case 4:n=e.sent,a=R(n,2),this.application=a[0],this.persistentVolumeClaims=a[1],e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve application details");case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(){return E.apply(this,arguments)})},{key:"getApplication",value:function(){return this.$async(this.getApplicationAsync)}},{key:"onInit",value:(y=O(regeneratorRuntime.mark((function e(){var t,n,a,r,i,o,l,c,u,p,m,g=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state={actionInProgress:!1,useLoadBalancer:!1,useServerMetrics:!1,sliders:{cpu:{min:0,max:0},memory:{min:0,max:0}},nodes:{memory:0,cpu:0},resourcePoolHasQuota:!1,viewReady:!1,availableSizeUnits:["MB","GB","TB"],alreadyExists:!1,duplicates:{environmentVariables:new S.KubernetesFormValueDuplicate,persistedFolders:new S.KubernetesFormValueDuplicate,configurationPaths:new S.KubernetesFormValueDuplicate,existingVolumes:new S.KubernetesFormValueDuplicate,publishedPorts:{containerPorts:new S.KubernetesFormValueDuplicate,nodePorts:new S.KubernetesFormValueDuplicate,ingressRoutes:new S.KubernetesFormValueDuplicate,loadBalancerPorts:new S.KubernetesFormValueDuplicate},placements:new S.KubernetesFormValueDuplicate},isEdit:!1,params:{namespace:this.$transition$.params().namespace,name:this.$transition$.params().name},PersistedFoldersUseExistingVolumes:!1},this.isAdmin=this.Authentication.isAdmin(),this.editChanges=[],this.$transition$.params().namespace&&this.$transition$.params().name&&(this.state.isEdit=!0),t=this.EndpointProvider.currentEndpoint(),this.endpoint=t,this.storageClasses=t.Kubernetes.Configuration.StorageClasses,this.state.useLoadBalancer=t.Kubernetes.Configuration.UseLoadBalancer,this.state.useServerMetrics=t.Kubernetes.Configuration.UseServerMetrics,this.formValues=new S.KubernetesApplicationFormValues,e.next=13,Promise.all([this.KubernetesResourcePoolService.get(),this.KubernetesNodeService.get(),this.KubernetesIngressService.get()]);case 13:if(n=e.sent,a=R(n,3),r=a[0],i=a[1],o=a[2],this.ingresses=o,this.resourcePools=Object(s.a)(r,(function(e){return!g.KubernetesNamespaceHelper.isSystemNamespace(e.Namespace.Name)})),this.formValues.ResourcePool=this.resourcePools[0],!this.storageClassAvailable()){e.next=30;break}return e.next=24,Promise.all([this.KubernetesApplicationService.get(),this.KubernetesVolumeService.get()]);case 24:l=e.sent,c=R(l,2),u=c[0],p=c[1],this.volumes=p,Object(d.a)(this.volumes,(function(e){e.Applications=T.default.getUsingApplications(e,u)}));case 30:return Object(d.a)(i,(function(e){g.state.nodes.memory+=x()(e.Memory),g.state.nodes.cpu+=e.CPU})),this.nodesLabels=N.KubernetesNodeHelper.generateNodeLabelsFromNodes(i),m=this.state.isEdit?this.state.params.namespace:this.formValues.ResourcePool.Namespace.Name,e.next=35,this.refreshNamespaceData(m);case 35:if(!this.state.isEdit){e.next=45;break}return e.next=38,this.getApplication();case 38:this.formValues=$.default.applicationToFormValues(this.application,this.resourcePools,this.configurations,this.persistentVolumeClaims,this.nodesLabels),this.formValues.OriginalIngresses=this.filteredIngresses,this.savedFormValues=b.a.copy(this.formValues),delete this.formValues.ApplicationType,this.application.ApplicationType!==k.KubernetesApplicationTypes.STATEFULSET&&Object(d.a)(this.formValues.PersistedFolders,(function(e){var t=Object(h.a)(g.availableVolumes,(function(t){return t.PersistentVolumeClaim.Name===e.PersistentVolumeClaimName}));t&&(e.UseNewVolume=!1,e.ExistingVolume=t)})),e.next=47;break;case 45:this.formValues.AutoScaler=I.default.generateAutoScalerFormValueFromHorizontalPodAutoScaler(null,this.formValues.ReplicaCount),this.formValues.OriginalIngressClasses=b.a.copy(this.ingresses);case 47:return e.next=49,this.updateSliders();case 49:e.next=54;break;case 51:e.prev=51,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to load view data");case 54:return e.prev=54,this.state.viewReady=!0,e.finish(54);case 57:case"end":return e.stop()}}),e,this,[[0,51,54,57]])}))),function(){return y.apply(this,arguments)})},{key:"$onInit",value:function(){return this.$async(this.onInit)}}])&&L(t.prototype,n),v&&L(t,v),e}();t.default=_,b.a.module("portainer.kubernetes").controller("KubernetesCreateApplicationController",_)},function(e,t,n){var a=n(1405);angular.module("portainer.kubernetes").component("kubernetesApplicationView",{templateUrl:a,controller:"KubernetesApplicationController",controllerAs:"ctrl",bindings:{$transition$:"<"}})},function(e,t){var n="app/kubernetes/views/applications/edit/application.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<kubernetes-view-header title="" state="kubernetes.applications.application" view-ready="ctrl.state.viewReady">\n  <a ui-sref="kubernetes.resourcePools">Resource pools</a> &gt;\n  <a ui-sref="kubernetes.resourcePools.resourcePool({ id: ctrl.application.ResourcePool })">{{ ctrl.application.ResourcePool }}</a> &gt;\n  <a ui-sref="kubernetes.applications">Applications</a> &gt; {{ ctrl.application.Name }}\n</kubernetes-view-header>\n\n<kubernetes-view-loading view-ready="ctrl.state.viewReady"></kubernetes-view-loading>\n\n<div ng-if="ctrl.state.viewReady">\n  <div class="row">\n    <div class="col-sm-12">\n      <rd-widget>\n        <rd-widget-body classes="no-padding">\n          <uib-tabset active="ctrl.state.activeTab" justified="true" type="pills">\n            <uib-tab index="0" classes="btn-sm" select="ctrl.selectTab(0)">\n              <uib-tab-heading> <i class="fa fa-laptop-code space-right" aria-hidden="true"></i> Application </uib-tab-heading>\n              <div style="padding: 20px;">\n                <table class="table">\n                  <tbody>\n                    <tr>\n                      <td></td>\n                      <td>\n                        {{ ctrl.application.Name }}\n                        <span class="label label-primary image-tag label-margins" ng-if="!ctrl.isSystemNamespace() && ctrl.isExternalApplication()">external</span>\n                      </td>\n                    </tr>\n                    <tr>\n                      <td>Stack</td>\n                      <td>{{ ctrl.application.StackName }}</td>\n                    </tr>\n                    <tr>\n                      <td>Resource pool</td>\n                      <td>\n                        <a ui-sref="kubernetes.resourcePools.resourcePool({ id: ctrl.application.ResourcePool })">{{ ctrl.application.ResourcePool }}</a>\n                        <span style="margin-left: 5px;" class="label label-info image-tag" ng-if="ctrl.isSystemNamespace(item)">system</span>\n                      </td>\n                    </tr>\n                    <tr>\n                      <td>Application Type</td>\n                      <td>\n                        {{ ctrl.application.ApplicationType | kubernetesApplicationTypeText }}\n                      </td>\n                    </tr>\n                    <tr>\n                      <td>Status</td>\n                      <td ng-if="ctrl.application.ApplicationType !== ctrl.KubernetesApplicationTypes.POD">\n                        <span ng-if="ctrl.application.DeploymentType === ctrl.KubernetesApplicationDeploymentTypes.REPLICATED">Replicated</span>\n                        <span ng-if="ctrl.application.DeploymentType === ctrl.KubernetesApplicationDeploymentTypes.GLOBAL">Global</span>\n                        <code>{{ ctrl.application.RunningPodsCount }}</code> / <code>{{ ctrl.application.TotalPodsCount }}</code>\n                      </td>\n                      <td ng-if="ctrl.application.ApplicationType === ctrl.KubernetesApplicationTypes.POD">\n                        {{ ctrl.application.Pods[0].Status }}\n                      </td>\n                    </tr>\n                    <tr ng-if="ctrl.application.Requests.Cpu || ctrl.application.Requests.Memory">\n                      <td>\n                        <div>Resource reservations</div>\n                        <div ng-if="ctrl.application.ApplicationType !== ctrl.KubernetesApplicationTypes.POD" class="text-muted small">\n                          per instance\n                        </div>\n                      </td>\n                      <td>\n                        <div ng-if="ctrl.application.Requests.Cpu">CPU {{ ctrl.application.Requests.Cpu | kubernetesApplicationCPUValue }}</div>\n                        <div ng-if="ctrl.application.Requests.Memory">Memory {{ ctrl.application.Requests.Memory | humansize }}</div>\n                      </td>\n                    </tr>\n                    <tr>\n                      <td>Creation</td>\n                      <td>\n                        <span ng-if="ctrl.application.ApplicationOwner" style="margin-right: 5px;"> <i class="fas fa-user"></i> {{ ctrl.application.ApplicationOwner }} </span>\n                        <span> <i class="fas fa-clock"></i> {{ ctrl.application.CreationDate | getisodate }} </span>\n                      </td>\n                    </tr>\n                    <tr>\n                      <td colspan="2">\n                        <form class="form-horizontal" name="kubernetesApplicationNoteForm">\n                          <div class="form-group">\n                            <div class="col-sm-12">\n                              <i class="fa fa-edit" aria-hidden="true"></i> Note\n                              <button class="btn btn-xs btn-primary" ng-click="ctrl.state.expandedNote = !ctrl.state.expandedNote;"\n                                >{{ ctrl.state.expandedNote ? \'Collapse\' : \'Expand\' }}\n                                <i class="fas {{ ctrl.state.expandedNote ? \'fa-angle-up\' : \'fa-angle-down\' }}" aria-hidden="true"></i\n                              ></button>\n                            </div>\n                          </div>\n                          <div class="form-group" ng-if="ctrl.state.expandedNote">\n                            <div class="col-sm-12">\n                              <textarea\n                                class="form-control"\n                                name="application_note"\n                                id="application_note"\n                                ng-model="ctrl.formValues.Note"\n                                rows="5"\n                                placeholder="Enter a note about this application..."\n                              ></textarea>\n                            </div>\n                          </div>\n                          <div class="form-group" ng-if="ctrl.state.expandedNote">\n                            <div class="col-sm-12">\n                              <button\n                                class="btn btn-primary btn-sm"\n                                style="margin-left: 0px;"\n                                type="button"\n                                ng-click="ctrl.updateApplication()"\n                                ng-disabled="ctrl.formValues.Note === ctrl.application.Note"\n                                >{{ ctrl.application.Note ? \'Update\' : \'Save\' }} note</button\n                              >\n                            </div>\n                          </div>\n                        </form>\n                      </td>\n                    </tr>\n                    \x3c!-- <tr>\n                      <td colspan="2">\n                        <form class="form-horizontal" name="KubernetesApplicationRollbackForm">\n                          <div class="form-group">\n                            <label for="resource-pool-selector" class="col-sm-2 col-lg-1 control-label text-left"></label>\n                            <div class="col-sm-2">\n                              <select class="form-control" id="resource-pool-selector" ng-model="ctrl.formValues.SelectedRevision"\n                                ng-options="revision as revision.revision for revision in ctrl.application.Revisions"></select>\n                            </div>\n                            <div class="col-sm-2">\n                              <button class="btn btn-primary btn-sm" style="margin-left: 0px;" type="button" ng-click="ctrl.rollbackApplication()"\n                                ng-disabled="ctrl.formValues.SelectedRevision.revision === ctrl.application.CurrentRevision.revision">Rollback</button>\n                            </div>\n                          </div>\n                        </form>\n                      </td>\n                    </tr> --\x3e\n                  </tbody>\n                </table>\n              </div>\n            </uib-tab>\n\n            <uib-tab index="1" classes="btn-sm" select="ctrl.selectTab(1)">\n              <uib-tab-heading> <i class="fas fa-compress-arrows-alt space-right" aria-hidden="true"></i> Placement </uib-tab-heading>\n              <div class="small text-muted" style="padding: 20px;">\n                <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                placement\n              </div>\n              <kubernetes-application-placements-datatable\n                title-text="Placement constraints/preferences"\n                title-icon="fa-compress-arrows-alt"\n                dataset="ctrl.placements"\n                table-key="kubernetes.application.placements"\n                order-by="Name"\n                reverse-order="false"\n                loading="ctrl.state.dataLoading"\n                refresh-callback="ctrl.getApplication"\n              ></kubernetes-application-placements-datatable>\n            </uib-tab>\n\n            <uib-tab index="2" classes="btn-sm" select="ctrl.selectTab(2)">\n              <uib-tab-heading>\n                <i class="fa fa-history space-right" aria-hidden="true"></i> Events\n                <div ng-if="ctrl.hasEventWarnings()">\n                  <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                  {{ ctrl.state.eventWarningCount }} warning(s)\n                </div>\n              </uib-tab-heading>\n              <kubernetes-events-datatable\n                title-text="Events"\n                title-icon="fa-history"\n                dataset="ctrl.events"\n                table-key="kubernetes.application.events"\n                order-by="Date"\n                reverse-order="true"\n                loading="ctrl.state.eventsLoading"\n                refresh-callback="ctrl.getEvents"\n              ></kubernetes-events-datatable>\n            </uib-tab>\n\n            <uib-tab index="3" ng-if="ctrl.application.Yaml" select="ctrl.showEditor()" classes="btn-sm">\n              <uib-tab-heading> <i class="fa fa-code space-right" aria-hidden="true"></i> YAML </uib-tab-heading>\n              <div style="padding-right: 25px;" ng-if="ctrl.state.showEditorTab">\n                <kubernetes-yaml-inspector key="application-yaml" data="ctrl.application.Yaml"></kubernetes-yaml-inspector>\n              </div>\n            </uib-tab>\n          </uib-tabset>\n        </rd-widget-body>\n      </rd-widget>\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="col-sm-12">\n      <rd-widget>\n        <rd-widget-body>\n          <div ng-if="!ctrl.isExternalApplication() && !ctrl.isSystemNamespace()" style="margin-bottom: 15px;">\n            <button type="button" class="btn btn-sm btn-primary" ui-sref="kubernetes.applications.application.edit" style="margin-left: 0;">\n              <i class="fa fa-file-code space-right" aria-hidden="true"></i>Edit this application\n            </button>\n            <button type="button" class="btn btn-sm btn-primary" style="margin-left: 0;" ng-click="ctrl.redeployApplication()">\n              <i class="fa fa-redo space-right" aria-hidden="true"></i>Redeploy\n            </button>\n            <button type="button" class="btn btn-sm btn-primary" style="margin-left: 0;" ng-click="ctrl.rollbackApplication()" ng-disabled="ctrl.application.Revisions.length < 2">\n              <i class="fas fa-history space-right" aria-hidden="true"></i>Rollback to previous configuration\n            </button>\n          </div>\n\n          \x3c!-- ACCESSING APPLICATION --\x3e\n          <div class="text-muted" style="margin-bottom: 15px;">\n            <i class="fa fa-external-link-alt" aria-hidden="true" style="margin-right: 2px;"></i> Accessing the application\n          </div>\n\n          <div class="small text-muted" ng-if="ctrl.application.PublishedPorts.length === 0" style="margin-bottom: 15px;">\n            <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n            This application is not exposing any port.\n          </div>\n\n          <div ng-if="ctrl.application.PublishedPorts.length > 0">\n            \x3c!-- LB notice --\x3e\n            <div ng-if="ctrl.application.ServiceType === ctrl.KubernetesServiceTypes.LOAD_BALANCER">\n              <div class="small text-muted">\n                <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                This application is exposed through an external load balancer. Use the links below to access the different ports exposed.\n              </div>\n              <div style="margin-top: 10px;" class="small text-muted">\n                <span ng-if="!ctrl.application.LoadBalancerIPAddress">\n                  <p> Load balancer status: <i class="fa fa-cog fa-spin" style="margin-left: 2px;"></i> pending </p>\n                  <p>\n                    <u>what does the "pending" status means?</u>\n                    <portainer-tooltip\n                      position="bottom"\n                      message="Portainer"\n                    >\n                    </portainer-tooltip>\n                  </p>\n                </span>\n                <span ng-if="ctrl.application.LoadBalancerIPAddress">\n                  <p> Load balancer status: <i class="fa fa-check green-icon" style="margin-left: 2px;"></i> available </p>\n                  <p>\n                    Load balancer IP address: {{ ctrl.application.LoadBalancerIPAddress }}\n                    <span class="btn btn-primary btn-xs" ng-click="ctrl.copyLoadBalancerIP()" style="margin-left: 5px;">\n                      <i class="fa fa-copy space-right" aria-hidden="true"></i>\n                    </span>\n                    <span id="copyNotificationLB" style="margin-left: 7px; display: none; color: #23ae89;" class="small">\n                      <i class="fa fa-check" aria-hidden="true"></i> copied\n                    </span>\n                  </p>\n                </span>\n              </div>\n            </div>\n\n            \x3c!-- cluster notice --\x3e\n            <div ng-if="ctrl.application.ServiceType === ctrl.KubernetesServiceTypes.NODE_PORT">\n              <div class="small text-muted">\n                <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                IP\n                below.\n              </div>\n            </div>\n\n            \x3c!-- internal notice --\x3e\n            <div ng-if="ctrl.application.ServiceType === ctrl.KubernetesServiceTypes.CLUSTER_IP && !ctrl.state.useIngress">\n              <div class="small text-muted">\n                <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                This application is only available for internal usage inside the cluster via the application name <code>{{ ctrl.application.ServiceName }}</code>\n                <span class="btn btn-primary btn-xs" ng-click="ctrl.copyApplicationName()"><i class="fa fa-copy space-right" aria-hidden="true"></i></span>\n                <span id="copyNotificationApplicationName" style="margin-left: 7px; display: none; color: #23ae89;" class="small"\n                  ><i class="fa fa-check" aria-hidden="true"></i> copied</span\n                >\n              </div>\n              <div class="small text-muted" style="margin-top: 2px;">\n                <p></p>\n              </div>\n            </div>\n\n            \x3c!-- ingress notice --\x3e\n            <div ng-if="ctrl.application.ServiceType === ctrl.KubernetesServiceTypes.CLUSTER_IP && ctrl.state.useIngress">\n              <div class="small text-muted">\n                <p>\n                  <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                  This application is available for internal usage inside the cluster via the application name <code>{{ ctrl.application.ServiceName }}</code>\n                  <span class="btn btn-primary btn-xs" ng-click="ctrl.copyApplicationName()"><i class="fa fa-copy space-right" aria-hidden="true"></i></span>\n                  <span id="copyNotificationApplicationName" style="margin-left: 7px; display: none; color: #23ae89;" class="small"\n                    ><i class="fa fa-check" aria-hidden="true"></i> copied</span\n                  >\n                </p>\n                <p>It can also be accessed via specific HTTP route(s).</p>\n              </div>\n              <div class="small text-muted" style="margin-top: 2px;">\n                <p></p>\n              </div>\n            </div>\n\n            \x3c!-- table --\x3e\n            <div style="margin-top: 15px;">\n              <table class="table">\n                <tbody>\n                  <tr class="text-muted">\n                    <td style="width: 25%;">Container port</td>\n                    <td style="width: 25%;">{{ ctrl.application.ServiceType | kubernetesApplicationPortsTableHeaderText }} port</td>\n                    <td style="width: 50%;">HTTP route</td>\n                  </tr>\n                  <tr ng-repeat-start="port in ctrl.application.PublishedPorts">\n                    <td ng-if="!ctrl.portHasIngressRules(port)">{{ port.TargetPort }}/{{ port.Protocol }}</td>\n                    <td ng-if="!ctrl.portHasIngressRules(port)">\n                      <span ng-if="ctrl.application.ServiceType === ctrl.KubernetesServiceTypes.NODE_PORT">\n                        {{ port.NodePort }}\n                      </span>\n                      <span ng-if="ctrl.application.ServiceType !== ctrl.KubernetesServiceTypes.NODE_PORT">\n                        {{ port.Port }}\n                      </span>\n                      <a\n                        ng-if="ctrl.application.LoadBalancerIPAddress"\n                        ng-href="http://{{ ctrl.application.LoadBalancerIPAddress }}:{{ port.Port }}"\n                        target="_blank"\n                        style="margin-left: 5px;"\n                      >\n                        <i class="fa fa-external-link-alt" aria-hidden="true"></i> access\n                      </a>\n                    </td>\n                    <td ng-if="!ctrl.portHasIngressRules(port)">-</td>\n                  </tr>\n                  <tr ng-repeat-end ng-repeat="rule in port.IngressRules">\n                    <td>{{ port.TargetPort }}/{{ port.Protocol }}</td>\n                    <td>\n                      <span ng-if="ctrl.application.ServiceType === ctrl.KubernetesServiceTypes.NODE_PORT">\n                        {{ port.NodePort }}\n                      </span>\n                      <span ng-if="ctrl.application.ServiceType !== ctrl.KubernetesServiceTypes.NODE_PORT">\n                        {{ port.Port }}\n                      </span>\n                      <a\n                        ng-if="ctrl.application.LoadBalancerIPAddress"\n                        ng-href="http://{{ ctrl.application.LoadBalancerIPAddress }}:{{ port.Port }}"\n                        target="_blank"\n                        style="margin-left: 5px;"\n                      >\n                        <i class="fa fa-external-link-alt" aria-hidden="true"></i> access\n                      </a>\n                    </td>\n                    <td>\n                      <span\n                        ng-if="!ctrl.ruleCanBeDisplayed(rule)"\n                        class="text-muted"\n                        tooltip-append-to-body="true"\n                        tooltip-placement="bottom"\n                        tooltip-class="portainer-tooltip"\n                        uib-tooltip="Ingress controller IP address not available yet"\n                        style="cursor: pointer;"\n                        >pending\n                      </span>\n                      <span ng-if="ctrl.ruleCanBeDisplayed(rule)">\n                        <a ng-href="{{ ctrl.buildIngressRuleURL(rule) }}" target="_blank">\n                          {{ ctrl.buildIngressRuleURL(rule) | stripprotocol }}\n                        </a>\n                      </span>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n          \x3c!-- !ACCESSING APPLICATION --\x3e\n          \x3c!-- AUTO SCALING --\x3e\n          <div class="text-muted" style="margin-bottom: 15px;"> <i class="fa fa-expand-arrows-alt" aria-hidden="true" style="margin-right: 2px;"></i> Auto-scaling</div>\n\n          <div class="small text-muted" ng-if="!ctrl.application.AutoScaler" style="margin-bottom: 15px;">\n            <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n            This application does not have an autoscaling policy defined.\n          </div>\n\n          <div ng-if="ctrl.application.AutoScaler">\n            <div style="margin-top: 15px; width: 50%;">\n              <table class="table">\n                <tbody>\n                  <tr class="text-muted">\n                    <td style="width: 33%;">Minimum instances</td>\n                    <td style="width: 33%;">Maximum instances</td>\n                    <td style="width: 33%;">\n                      Target CPU usage\n                      <portainer-tooltip position="bottom" message="CPU">\n                      </portainer-tooltip>\n                    </td>\n                  </tr>\n                  <tr>\n                    <td>{{ ctrl.application.AutoScaler.MinReplicas }}</td>\n                    <td>{{ ctrl.application.AutoScaler.MaxReplicas }}</td>\n                    <td>{{ ctrl.application.AutoScaler.TargetCPUUtilization }}%</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n          \x3c!-- !AUTO SCALING --\x3e\n\n          \x3c!-- CONFIGURATIONS --\x3e\n          <div class="text-muted" style="margin-bottom: 15px; margin-top: 25px;"> <i class="fa fa-file-code" aria-hidden="true" style="margin-right: 2px;"></i> Configuration </div>\n\n          <div class="small text-muted" ng-if="!ctrl.application.Env.length > 0 && !ctrl.hasVolumeConfiguration()" style="margin-bottom: 15px;">\n            <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n            \n          </div>\n\n          <table class="table" ng-if="ctrl.application.Env.length > 0">\n            <tr class="text-muted">\n              <td style="width: 25%;"></td>\n              <td style="width: 25%;">Environment variable</td>\n              <td style="width: 25%;">Value</td>\n              <td style="width: 25%;"></td>\n            </tr>\n            <tbody ng-repeat="container in ctrl.application.Containers" style="border-top: 0;">\n              <tr ng-repeat="envvar in container.Env track by $index">\n                <td>\n                  {{ container.Name }}\n                  <span ng-if="container.Type === ctrl.KubernetesPodContainerTypes.INIT"\n                    ><i class="fa fa-asterisk" aria-hidden="true"></i> {{ envvar.valueFrom.fieldRef.fieldPath }} (<a\n                      href="https://kubernetes.io/docs/concepts/workloads/pods/init-containers/"\n                      target="_blank"\n                      >init container</a\n                    >)</span\n                  >\n                </td>\n                <td>{{ envvar.name }}</td>\n                <td>\n                  <span ng-if="envvar.value">{{ envvar.value }}</span>\n                  <span ng-if="envvar.valueFrom.configMapKeyRef"><i class="fa fa-key" aria-hidden="true"></i> {{ envvar.valueFrom.configMapKeyRef.key }}</span>\n                  <span ng-if="envvar.valueFrom.secretKeyRef"><i class="fa fa-key" aria-hidden="true"></i> {{ envvar.valueFrom.secretKeyRef.key }}</span>\n                  <span ng-if="envvar.valueFrom.fieldRef"\n                    ><i class="fa fa-asterisk" aria-hidden="true"></i> {{ envvar.valueFrom.fieldRef.fieldPath }} (<a\n                      href="https://kubernetes.io/docs/tasks/inject-data-application/downward-api-volume-expose-pod-information/#capabilities-of-the-downward-api"\n                      target="_blank"\n                      >downward API</a\n                    >)</span\n                  >\n                  <span ng-if="!envvar.value && !envvar.valueFrom.secretKeyRef && !envvar.valueFrom.configMapKeyRef && !envvar.valueFrom.fieldRef">-</span>\n                </td>\n                <td>\n                  <span ng-if="envvar.value || envvar.valueFrom.fieldRef || (!envvar.valueFrom.secretKeyRef && !envvar.valueFrom.configMapKeyRef)">-</span>\n                  <span ng-if="envvar.valueFrom.configMapKeyRef"\n                    ><a ui-sref="kubernetes.configurations.configuration({ name: envvar.valueFrom.configMapKeyRef.name, namespace: ctrl.application.ResourcePool })"\n                      ><i class="fa fa-file-code" aria-hidden="true"></i> {{ envvar.valueFrom.configMapKeyRef.name }}</a\n                    ></span\n                  >\n                  <span ng-if="envvar.valueFrom.secretKeyRef"\n                    ><a ui-sref="kubernetes.configurations.configuration({ name: envvar.valueFrom.secretKeyRef.name, namespace: ctrl.application.ResourcePool })"\n                      ><i class="fa fa-file-code" aria-hidden="true"></i> {{ envvar.valueFrom.secretKeyRef.name }}</a\n                    ></span\n                  >\n                </td>\n              </tr>\n            </tbody>\n          </table>\n\n          <table class="table" ng-if="ctrl.hasVolumeConfiguration()">\n            <tr class="text-muted">\n              <td style="width: 25%;"></td>\n              <td style="width: 25%;"> path</td>\n              <td style="width: 25%;">Value</td>\n              <td style="width: 25%;"></td>\n            </tr>\n            <tbody ng-repeat="container in ctrl.application.Containers" style="border-top: 0;">\n              <tr ng-repeat="volume in container.ConfigurationVolumes track by $index" style="border-top: 0;">\n                <td>\n                  {{ container.Name }}\n                  <span ng-if="container.Type === ctrl.KubernetesPodContainerTypes.INIT"\n                    ><i class="fa fa-asterisk" aria-hidden="true"></i> {{ envvar.valueFrom.fieldRef.fieldPath }} (<a\n                      href="https://kubernetes.io/docs/concepts/workloads/pods/init-containers/"\n                      target="_blank"\n                      >init container</a\n                    >)</span\n                  >\n                </td>\n                <td>\n                  {{ volume.fileMountPath }}\n                </td>\n                <td> <i class="fa fa-key" ng-if="volume.configurationKey" aria-hidden="true"></i> {{ volume.configurationKey ? volume.configurationKey : \'-\' }} </td>\n                <td>\n                  <a ui-sref="kubernetes.configurations.configuration({ name: volume.configurationName, namespace: ctrl.application.ResourcePool })"\n                    ><i class="fa fa-file-code" aria-hidden="true"></i> {{ volume.configurationName }}</a\n                  >\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          \x3c!-- !CONFIGURATIONS --\x3e\n\n          \x3c!-- DATA PERSISTENCE --\x3e\n          <div class="text-muted" style="margin-bottom: 15px; margin-top: 25px;">\n            <i class="fa fa-database" aria-hidden="true" style="margin-right: 2px;"></i> Data persistence\n          </div>\n\n          <div class="small text-muted" ng-if="!ctrl.hasPersistedFolders()">\n            <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n            This application has no persisted folders.\n          </div>\n\n          <div ng-if="ctrl.hasPersistedFolders()">\n            <div class="small text-muted" style="margin-bottom: 15px;">\n              Data access policy: <i class="fa {{ ctrl.application.DataAccessPolicy | kubernetesApplicationDataAccessPolicyIcon }}" aria-hidden="true"></i>\n              {{ ctrl.application.DataAccessPolicy | kubernetesApplicationDataAccessPolicyText }}\n              <portainer-tooltip position="right" message="{{ ctrl.application.DataAccessPolicy | kubernetesApplicationDataAccessPolicyTooltip }}"> </portainer-tooltip>\n            </div>\n\n            <table class="table" ng-if="ctrl.application.DataAccessPolicy === ctrl.ApplicationDataAccessPolicies.SHARED">\n              <tr class="text-muted">\n                <td style="width: 33%;">Persisted folder</td>\n                <td style="width: 66%;">Persistence</td>\n              </tr>\n              <tbody ng-repeat="container in ctrl.application.Containers" style="border-top: 0;">\n                <tr ng-repeat="volume in container.PersistedFolders track by $index">\n                  <td>\n                    {{ volume.MountPath }}\n                  </td>\n                  <td ng-if="volume.PersistentVolumeClaimName">\n                    <a ui-sref="kubernetes.volumes.volume({ name: volume.PersistentVolumeClaimName, namespace: ctrl.application.ResourcePool })"\n                      ><i class="fa fa-database" aria-hidden="true"></i> {{ volume.PersistentVolumeClaimName }}</a\n                    >\n                  </td>\n                  <td ng-if="volume.HostPath"> {{ volume.HostPath }} on host filesystem </td>\n                </tr>\n              </tbody>\n            </table>\n\n            <table class="table" ng-if="ctrl.application.DataAccessPolicy === ctrl.ApplicationDataAccessPolicies.ISOLATED">\n              <thead>\n                <tr class="text-muted">\n                  <td style="width: 25%;">Container name</td>\n                  <td style="width: 25%;">Pod name</td>\n                  <td style="width: 25%;">Persisted folder</td>\n                  <td style="width: 25%;">Persistence</td>\n                </tr>\n              </thead>\n              <tbody ng-repeat="container in ctrl.allContainers track by $index" style="border-top: none;">\n                <tr ng-repeat="volume in container.PersistedFolders track by $index">\n                  <td>\n                    {{ container.Name }}\n                    <span ng-if="container.Type === ctrl.KubernetesPodContainerTypes.INIT"\n                      ><i class="fa fa-asterisk" aria-hidden="true"></i> {{ envvar.valueFrom.fieldRef.fieldPath }} (<a\n                        href="https://kubernetes.io/docs/concepts/workloads/pods/init-containers/"\n                        target="_blank"\n                        >init container</a\n                      >)</span\n                    >\n                  </td>\n                  <td>{{ container.PodName }}</td>\n                  <td>\n                    {{ volume.MountPath }}\n                  </td>\n                  <td ng-if="volume.PersistentVolumeClaimName">\n                    <a ui-sref="kubernetes.volumes.volume({ name: volume.PersistentVolumeClaimName + \'-\' + container.PodName, namespace: ctrl.application.ResourcePool })">\n                      <i class="fa fa-database" aria-hidden="true"></i> {{ volume.PersistentVolumeClaimName + \'-\' + container.PodName }}</a\n                    >\n                  </td>\n                  <td ng-if="volume.HostPath"> {{ volume.HostPath }} on host filesystem </td>\n                </tr>\n              </tbody>\n            </table>\n            \x3c!-- !DATA PERSISTENCE --\x3e\n          </div>\n        </rd-widget-body>\n      </rd-widget>\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="col-sm-12">\n      <kubernetes-containers-datatable\n        title-text="Application containers"\n        title-icon="fa-server"\n        dataset="ctrl.allContainers"\n        table-key="kubernetes.application.containers"\n        is-pod="ctrl.application.ApplicationType === ctrl.KubernetesApplicationTypes.POD"\n        order-by="{{ ctrl.application.ApplicationType === ctrl.KubernetesApplicationTypes.POD ? \'Name\' : \'PodName\' }}"\n      >\n      </kubernetes-containers-datatable>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t),function(e){var a=n(5),r=n(569),i=n(20),s=n(10),o=n(568),l=n(2),c=n(22),d=n(4),u=n(7),p=n(1),m=n.n(p),g=n(46),f=n(3),h=n(93),v=n(13),b=n(28),y=n(31);function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function k(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function S(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){k(i,a,r,s,o,"next",e)}function o(e){k(i,a,r,s,o,"throw",e)}s(void 0)}))}}function C(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function $(e,t){return e=function(e,t){if(!t.Pods||0===t.Pods.length)return e;var n=t.Pods[0];return Object(u.a)(e,(function(e){if(n.NodeSelector){var t=g.a(e.Labels,n.NodeSelector);Object(c.a)(t,{op:"remove"}),e.UnmatchedNodeSelectorLabels=Object(l.a)(t,(function(e){return{key:Object(o.a)(e.path,"/"),value:e.value}})),e.UnmatchedNodeSelectorLabels.length&&(e.AcceptsApplication=!1)}if(n.Affinity.nodeAffinity.requiredDuringSchedulingIgnoredDuringExecution){var a=Object(l.a)(n.Affinity.nodeAffinity.requiredDuringSchedulingIgnoredDuringExecution.nodeSelectorTerms,(function(t){var n=Object(l.a)(t.matchExpressions,(function(t){var n={}.hasOwnProperty.call(e.Labels,t.key),a=n&&Object(s.a)(t.values,e.Labels[t.key]);if(!(t.operator===y.KubernetesPodNodeAffinityNodeSelectorRequirementOperators.EXISTS&&n||t.operator===y.KubernetesPodNodeAffinityNodeSelectorRequirementOperators.DOES_NOT_EXIST&&!n||t.operator===y.KubernetesPodNodeAffinityNodeSelectorRequirementOperators.IN&&a||t.operator===y.KubernetesPodNodeAffinityNodeSelectorRequirementOperators.NOT_IN&&!a||t.operator===y.KubernetesPodNodeAffinityNodeSelectorRequirementOperators.GREATER_THAN&&n&&parseInt(e.Labels[t.key])>parseInt(t.values[0])||t.operator===y.KubernetesPodNodeAffinityNodeSelectorRequirementOperators.LOWER_THAN&&n&&parseInt(e.Labels[t.key])<parseInt(t.values[0])))return t}));return Object(i.a)(n,void 0)}));Object(c.a)(a,(function(e){return 0===e.length})),e.UnmatchedNodeAffinities=a,e.UnmatchedNodeAffinities.length&&(e.AcceptsApplication=!1)}})),e}(e=function(e,t){var n=t.Pods[0];return Object(u.a)(e,(function(e){e.AcceptsApplication=!0,e.Expanded=!1,n&&(e.UnmetTaints=[],Object(u.a)(e.Taints,(function(t){var a=Object(d.a)(n.Tolerations,{Key:t.Key,Operator:"Equal",Value:t.Value,Effect:t.Effect}),r=Object(d.a)(n.Tolerations,{Key:t.Key,Operator:"Exists",Effect:t.Effect}),i=Object(d.a)(n.Tolerations,{Key:t.Key,Operator:"Equal",Value:t.Value,Effect:""}),s=Object(d.a)(n.Tolerations,{Key:t.Key,Operator:"Exists",Effect:""}),o=Object(d.a)(n.Tolerations,{Key:"",Operator:"Exists",Effect:""});a||r||i||s||o?e.AcceptsApplication=!0:(e.AcceptsApplication=!1,e.UnmetTaints.push(t))})))})),e}(e,t),t)}var A=function(){function t(e,n,a,r,i,s,o,l,c,d,u,p){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.$async=e,this.$state=n,this.clipboard=a,this.Notifications=r,this.LocalStorage=i,this.ModalService=s,this.KubernetesApplicationService=o,this.KubernetesEventService=l,this.KubernetesStackService=c,this.KubernetesPodService=d,this.KubernetesNodeService=u,this.KubernetesNamespaceHelper=p,this.KubernetesApplicationDeploymentTypes=f.KubernetesApplicationDeploymentTypes,this.KubernetesApplicationTypes=f.KubernetesApplicationTypes,this.ApplicationDataAccessPolicies=f.KubernetesApplicationDataAccessPolicies,this.KubernetesServiceTypes=b.KubernetesServiceTypes,this.KubernetesPodContainerTypes=y.KubernetesPodContainerTypes,this.onInit=this.onInit.bind(this),this.getApplication=this.getApplication.bind(this),this.getApplicationAsync=this.getApplicationAsync.bind(this),this.getEvents=this.getEvents.bind(this),this.getEventsAsync=this.getEventsAsync.bind(this),this.updateApplicationAsync=this.updateApplicationAsync.bind(this),this.redeployApplicationAsync=this.redeployApplicationAsync.bind(this),this.rollbackApplicationAsync=this.rollbackApplicationAsync.bind(this),this.copyLoadBalancerIP=this.copyLoadBalancerIP.bind(this)}var n,i,s,o,c,u,p,g,w;return t.$inject=["$async","$state","clipboard","Notifications","LocalStorage","ModalService","KubernetesApplicationService","KubernetesEventService","KubernetesStackService","KubernetesPodService","KubernetesNodeService","KubernetesNamespaceHelper"],n=t,(i=[{key:"selectTab",value:function(e){this.LocalStorage.storeActiveTab("application",e)}},{key:"showEditor",value:function(){this.state.showEditorTab=!0,this.selectTab(3)}},{key:"isSystemNamespace",value:function(){return this.KubernetesNamespaceHelper.isSystemNamespace(this.application.ResourcePool)}},{key:"isExternalApplication",value:function(){return v.default.isExternalApplication(this.application)}},{key:"copyLoadBalancerIP",value:function(){this.clipboard.copyText(this.application.LoadBalancerIPAddress),e("#copyNotificationLB").show().fadeOut(2500)}},{key:"copyApplicationName",value:function(){this.clipboard.copyText(this.application.Name),e("#copyNotificationApplicationName").show().fadeOut(2500)}},{key:"hasPersistedFolders",value:function(){return this.application&&this.application.PersistedFolders.length}},{key:"hasVolumeConfiguration",value:function(){return this.application&&this.application.ConfigurationVolumes.length}},{key:"hasEventWarnings",value:function(){return this.state.eventWarningCount}},{key:"buildIngressRuleURL",value:function(e){return"http://"+(e.Host?e.Host:e.IP)+e.Path}},{key:"portHasIngressRules",value:function(e){return e.IngressRules.length>0}},{key:"ruleCanBeDisplayed",value:function(e){return!(!e.Host&&!e.IP)}},{key:"rollbackApplicationAsync",value:(w=S(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Object(r.a)(this.application.Revisions,-2),e.next=4,this.KubernetesApplicationService.rollback(this.application,t);case 4:this.Notifications.success(" rolled back"),this.$state.reload(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to rollback the application");case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return w.apply(this,arguments)})},{key:"rollbackApplication",value:function(){var e=this;this.ModalService.confirmUpdate("Rolling back the application to a previous configuration may cause a service interruption. Do you wish to continue?",(function(t){if(t)return e.$async(e.rollbackApplicationAsync)}))}},{key:"redeployApplicationAsync",value:(g=S(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Object(l.a)(this.application.Pods,(function(e){return n.KubernetesPodService.delete(e)})),e.next=4,Promise.all(t);case 4:this.Notifications.success(" redeployed"),this.$state.reload(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to redeploy the application");case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return g.apply(this,arguments)})},{key:"redeployApplication",value:function(){var e=this;this.ModalService.confirmUpdate("Redeploying the application may cause a service interruption. Do you wish to continue?",(function(t){if(t)return e.$async(e.redeployApplicationAsync)}))}},{key:"updateApplicationAsync",value:(p=S(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=m.a.copy(this.application)).Note=this.formValues.Note,e.next=5,this.KubernetesApplicationService.patch(this.application,t,!0);case 5:this.Notifications.success(" updated"),this.$state.reload(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to update application");case 12:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(){return p.apply(this,arguments)})},{key:"updateApplication",value:function(){return this.$async(this.updateApplicationAsync)}},{key:"getEventsAsync",value:(u=S(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state.eventsLoading=!0,e.next=4,this.KubernetesEventService.get(this.state.params.namespace);case 4:t=e.sent,this.events=Object(a.a)(t,(function(e){return e.Involved.uid===n.application.Id||e.Involved.uid===n.application.ServiceId||void 0!==Object(d.a)(n.application.Pods,(function(t){return t.Id===e.Involved.uid}))})),this.state.eventWarningCount=h.default.warningCount(this.events),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve application related events");case 12:return e.prev=12,this.state.eventsLoading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[0,9,12,15]])}))),function(){return u.apply(this,arguments)})},{key:"getEvents",value:function(){return this.$async(this.getEventsAsync)}},{key:"getApplicationAsync",value:(c=S(regeneratorRuntime.mark((function e(){var t,n,a,r,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state.dataLoading=!0,e.next=4,Promise.all([this.KubernetesApplicationService.get(this.state.params.namespace,this.state.params.name),this.KubernetesNodeService.get()]);case 4:t=e.sent,n=x(t,2),a=n[0],r=n[1],this.application=a,this.allContainers=v.default.associateAllContainersAndApplication(a),this.formValues.Note=this.application.Note,this.application.Note&&(this.state.expandedNote=!0),this.application.CurrentRevision&&(this.formValues.SelectedRevision=Object(d.a)(this.application.Revisions,{revision:this.application.CurrentRevision.revision})),this.state.useIngress=Object(d.a)(a.PublishedPorts,(function(e){return i.portHasIngressRules(e)})),this.placements=$(r,this.application),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve application details");case 20:return e.prev=20,this.state.dataLoading=!1,e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[0,17,20,23]])}))),function(){return c.apply(this,arguments)})},{key:"getApplication",value:function(){return this.$async(this.getApplicationAsync)}},{key:"onInit",value:(o=S(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state={activeTab:0,currentName:this.$state.$current.name,showEditorTab:!1,DisplayedPanel:"pods",eventsLoading:!0,dataLoading:!0,viewReady:!1,params:{namespace:this.$transition$.params().namespace,name:this.$transition$.params().name},eventWarningCount:0,expandedNote:!1,useIngress:!1},this.state.activeTab=this.LocalStorage.getActiveTab("application"),this.formValues={Note:"",SelectedRevision:void 0},e.next=5,this.getApplication();case 5:return e.next=7,this.getEvents();case 7:this.state.viewReady=!0;case 8:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"$onInit",value:function(){return this.$async(this.onInit)}},{key:"$onDestroy",value:function(){this.state.currentName!==this.$state.$current.name&&this.LocalStorage.storeActiveTab("application",0)}}])&&C(n.prototype,i),s&&C(n,s),t}();t.default=A,m.a.module("portainer.kubernetes").controller("KubernetesApplicationController",A)}.call(this,n(45))},function(e,t,n){"use strict";n.r(t);var a=n(7),r=n(5);angular.module("portainer.docker").controller("KubernetesApplicationPlacementsDatatableController",["$scope","$controller","DatatableService","Authentication",function(e,t,n,i){angular.extend(this,t("GenericDatatableController",{$scope:e})),this.state=Object.assign(this.state,{expandedItems:[],expandAll:!1}),this.expandItem=function(e,t){this.itemCanExpand(e)&&(e.Expanded=t,t||(e.Highlighted=!1))},this.itemCanExpand=function(e){return!e.AcceptsApplication},this.hasExpandableItems=function(){var e=this;return Object(r.a)(this.state.filteredDataSet,(function(t){return e.itemCanExpand(t)})).length},this.expandAll=function(){var e=this;this.state.expandAll=!this.state.expandAll,Object(a.a)(this.state.filteredDataSet,(function(t){e.itemCanExpand(t)&&e.expandItem(t,e.state.expandAll)}))},this.$onInit=function(){this.isAdmin=i.isAdmin(),this.setDefaults(),this.prepareTableFromDataset(),this.state.orderBy=this.orderBy;var e=n.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=n.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var a=n.getDataTableFilters(this.tableKey);null!==a&&(this.filters=a),this.filters&&this.filters.state&&(this.filters.state.open=!1);var r=n.getDataTableSettings(this.tableKey);null!==r&&(this.settings=r,this.settings.open=!1),this.onSettingsRepeaterChange()}}])},function(e,t,n){var a=n(1409);angular.module("portainer.kubernetes").component("kubernetesApplicationPlacementsDatatable",{templateUrl:a,controller:"KubernetesApplicationPlacementsDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",refreshCallback:"<",loading:"<",removeAction:"<"}})},function(e,t){var n="app/kubernetes/views/applications/edit/components/placements-datatable/template.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n        <div class="settings">\n          <span class="setting" ng-class="{ \'setting-active\': $ctrl.settings.open }" uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.settings.open">\n            <span uib-dropdown-toggle><i class="fa fa-cog" aria-hidden="true"></i> Table settings</span>\n            <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n              <div class="tableMenu">\n                <div class="menuHeader">\n                  \n                </div>\n                <div class="menuContent">\n                  <div>\n                    <div class="md-checkbox">\n                      <input id="setting_auto_refresh" type="checkbox" ng-model="$ctrl.settings.repeater.autoRefresh" ng-change="$ctrl.onSettingsRepeaterChange()" />\n                      <label for="setting_auto_refresh"></label>\n                    </div>\n                    <div ng-if="$ctrl.settings.repeater.autoRefresh">\n                      <label for="settings_refresh_rate">\n                        \n                      </label>\n                      <select id="settings_refresh_rate" ng-model="$ctrl.settings.repeater.refreshRate" ng-change="$ctrl.onSettingsRepeaterChange()" class="small-select">\n                        <option value="10">10s</option>\n                        <option value="30">30s</option>\n                        <option value="60">1min</option>\n                        <option value="120">2min</option>\n                        <option value="300">5min</option>\n                      </select>\n                      <span>\n                        <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="margin-top: 7px; display: none;"></i>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.settings.open = false;"></a>\n                </div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th style="width: 2%;">\n                <a ng-click="$ctrl.expandAll()" ng-if="$ctrl.hasExpandableItems()">\n                  <i ng-class="{ \'fas fa-angle-down\': $ctrl.state.expandAll, \'fas fa-angle-right\': !$ctrl.state.expandAll }" aria-hidden="true"></i>\n                </a>\n              </th>\n              <th style="width: 98%;">\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  Node\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate-start="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | filter: $ctrl.isDisplayed | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit: $ctrl.tableKey))"\n              ng-class="{ active: item.Checked }"\n              ng-style="{ background: item.Highlighted ? \'#d5e8f3\' : \'\' }"\n              ng-click="$ctrl.expandItem(item, !item.Expanded)"\n              pagination-id="$ctrl.tableKey"\n            >\n              <td>\n                <a ng-if="$ctrl.itemCanExpand(item)">\n                  <i ng-class="{ \'fas fa-angle-down\': item.Expanded, \'fas fa-angle-right\': !item.Expanded }" class="space-right" aria-hidden="true"></i>\n                </a>\n                <i ng-if="item.AcceptsApplication" class="fa fa-check green-icon" aria-hidden="true"></i>\n                <i ng-if="!item.AcceptsApplication" class="fa fa-times red-icon" aria-hidden="true"></i>\n              </td>\n              <td>\n                {{ item.Name }}\n              </td>\n            </tr>\n            \x3c!-- ADMIN + UNMET TAINTS --\x3e\n            <tr ng-if="$ctrl.isAdmin" ng-show="item.Expanded" ng-repeat="taint in item.UnmetTaints" ng-style="{ background: item.Highlighted ? \'#d5e8f3\' : \'#f5f5f5\' }">\n              <td colspan="2">\n                This application is missing a toleration for the taint <code>{{ taint.Key }}{{ taint.Value ? \'=\' + taint.Value : \'\' }}:{{ taint.Effect }}</code>\n              </td>\n            </tr>\n            \x3c!-- !ADMIN + UNMET TAINTS --\x3e\n            \x3c!-- USER + UNMET TAINTS --\x3e\n            <tr ng-if="!$ctrl.isAdmin && item.UnmetTaints.length" ng-show="item.Expanded" ng-style="{ background: item.Highlighted ? \'#d5e8f3\' : \'#f5f5f5\' }">\n              <td colspan="2">\n                Placement constraint not respected for that node.\n              </td>\n            </tr>\n            \x3c!-- ! USER + UNMET TAINTS --\x3e\n            \x3c!-- ADMIN + UNMET NODE SELECTOR LABELS --\x3e\n            <tr\n              ng-if="$ctrl.isAdmin"\n              ng-show="item.Expanded"\n              ng-repeat="label in item.UnmatchedNodeSelectorLabels"\n              ng-style="{ background: item.Highlighted ? \'#d5e8f3\' : \'#f5f5f5\' }"\n            >\n              <td colspan="2">\n                This application can only be scheduled on a node where the label <code>{{ label.key }}</code> is set to <code>{{ label.value }}</code>\n              </td>\n            </tr>\n            \x3c!-- ! ADMIN + UNMET NODE SELECTOR LABELS --\x3e\n            \x3c!-- USER + UNMET NODE SELECTOR LABELS || UNMET NODE AFFINITIES --\x3e\n            <tr\n              ng-if="!$ctrl.isAdmin && (item.UnmatchedNodeSelectorLabels.length || item.UnmatchedNodeAffinities.length)"\n              ng-show="item.Expanded"\n              ng-style="{ background: item.Highlighted ? \'#d5e8f3\' : \'#f5f5f5\' }"\n            >\n              <td colspan="2">\n                Placement label not respected for that node.\n              </td>\n            </tr>\n            \x3c!-- ! USER + UNMET NODE SELECTOR LABELS || UNMET NODE AFFINITIES --\x3e\n            \x3c!-- ADMIN + UNMET NODE AFFINITIES --\x3e\n            <tr ng-if="$ctrl.isAdmin" ng-show="item.Expanded && item.UnmatchedNodeAffinities.length" ng-style="{ background: item.Highlighted ? \'#d5e8f3\' : \'#f5f5f5\' }">\n              <td colspan="2">\n                This application can only be scheduled on nodes respecting one of the following labels combination:\n              </td>\n            </tr>\n            <tr\n              dir-paginate-end\n              ng-if="$ctrl.isAdmin"\n              ng-show="item.Expanded"\n              ng-repeat="aff in item.UnmatchedNodeAffinities"\n              ng-style="{ background: item.Highlighted ? \'#d5e8f3\' : \'#f5f5f5\' }"\n            >\n              <td></td>\n              <td>\n                <code ng-repeat-start="term in aff track by $index">\n                  {{ term.key }} {{ term.operator }} {{ term.values | kubernetesApplicationConstraintNodeAffinityValue: term.operator }}\n                </code>\n                <span ng-repeat-end>{{ $last ? \'\' : \' + \' }}</span>\n              </td>\n            </tr>\n            \x3c!-- ! ADMIN + UNMET NODE AFFINITIES --\x3e\n            <tr ng-if="$ctrl.loading">\n              <td colspan="2" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="!$ctrl.loading && (!$ctrl.dataset || $ctrl.state.filteredDataSet.length === 0)">\n              <td colspan="2" class="text-center text-muted">No node available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5" pagination-id="$ctrl.tableKey"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(1411);angular.module("portainer.kubernetes").component("kubernetesApplicationLogsView",{templateUrl:a,controller:"KubernetesApplicationLogsController",controllerAs:"ctrl",bindings:{$transition$:"<"}})},function(e,t){var n="app/kubernetes/views/applications/logs/logs.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<kubernetes-view-header title="" state="kubernetes.applications.application.logs" view-ready="ctrl.state.viewReady">\n  <a ui-sref="kubernetes.resourcePools">Resource pools</a> &gt;\n  <a ui-sref="kubernetes.resourcePools.resourcePool({ id: ctrl.application.ResourcePool })">{{ ctrl.application.ResourcePool }}</a> &gt;\n  <a ui-sref="kubernetes.applications">Applications</a> &gt;\n  <a ui-sref="kubernetes.applications.application({ name: ctrl.application.Name, namespace: ctrl.application.ResourcePool })">{{ ctrl.application.Name }}</a> &gt; Pods &gt;\n  {{ ctrl.podName }} &gt; Containers &gt; {{ ctrl.containerName }} &gt; Logs\n</kubernetes-view-header>\n\n<kubernetes-view-loading view-ready="ctrl.state.viewReady"></kubernetes-view-loading>\n\n<div ng-if="ctrl.state.viewReady" style="height: 100%;">\n  <div class="row">\n    <div class="col-sm-12">\n      <rd-widget>\n        <rd-widget-body>\n          <form class="form-horizontal" autocomplete="off">\n            <div class="col-sm-12 form-section-title">\n              \n            </div>\n            \x3c!-- auto-refresh --\x3e\n            <div class="form-group">\n              <div class="col-sm-12">\n                <label class="control-label text-left">\n                  Auto-refresh\n                  <portainer-tooltip position="bottom" message="Automatically refresh logs every 5 seconds"></portainer-tooltip>\n                </label>\n                <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="ctrl.state.autoRefresh" ng-change="ctrl.updateAutoRefresh()" /><i></i> </label>\n              </div>\n            </div>\n            \x3c!-- !auto-refresh --\x3e\n            \x3c!-- search --\x3e\n            <div class="form-group">\n              <label for="logs_search" class="col-sm-1 control-label text-left">\n                \n              </label>\n              <div class="col-sm-11">\n                <input\n                  class="form-control"\n                  type="text"\n                  name="logs_search"\n                  ng-model="ctrl.state.search"\n                  ng-change="ctrl.state.selectedLines.length = 0;"\n                  placeholder="..."\n                  auto-focus\n                />\n              </div>\n            </div>\n            \x3c!-- !search --\x3e\n            \x3c!-- actions --\x3e\n            <div class="form-group">\n              <div class="col-sm-12">\n                <button class="btn btn-primary btn-sm" type="button" ng-click="ctrl.downloadLogs()" style="margin-left: 0;"><i class="fa fa-download"></i> </button>\n              </div>\n            </div>\n            \x3c!-- !actions --\x3e\n          </form>\n        </rd-widget-body>\n      </rd-widget>\n    </div>\n  </div>\n\n  <div class="row" style="height: 54%;">\n    <div class="col-sm-12" style="height: 100%;">\n      <pre\n        class="log_viewer"\n      ><div ng-repeat="line in ctrl.state.filteredLogs = (ctrl.applicationLogs | filter:ctrl.state.search) track by $index" class="line" ng-if="line"><p class="inner_line">{{ line }}</p></div><div ng-if="ctrl.applicationLogs.length && !ctrl.state.filteredLogs.length" class="line"><p class="inner_line">No log line matching the \'{{ ctrl.state.search }}\' filter</p></div><div ng-if="ctrl.applicationLogs.length === 0" class="line"><p class="inner_line"></p></div></pre>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(19),r=n(1),i=n.n(r);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function l(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){l(i,a,r,s,o,"next",e)}function o(e){l(i,a,r,s,o,"throw",e)}s(void 0)}))}}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var u=function(){function e(t,n,a,r,i,s,o,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.$state=n,this.$interval=a,this.Notifications=r,this.KubernetesApplicationService=i,this.KubernetesPodService=s,this.Blob=o,this.FileSaver=l,this.onInit=this.onInit.bind(this),this.stopRepeater=this.stopRepeater.bind(this),this.getApplicationLogsAsync=this.getApplicationLogsAsync.bind(this)}var t,n,r,o,l;return e.$inject=["$async","$state","$interval","Notifications","KubernetesApplicationService","KubernetesPodService","Blob","FileSaver"],t=e,(n=[{key:"updateAutoRefresh",value:function(){this.state.autoRefresh?this.setUpdateRepeater():this.stopRepeater()}},{key:"stopRepeater",value:function(){i.a.isDefined(this.repeater)&&(this.$interval.cancel(this.repeater),this.repeater=null)}},{key:"setUpdateRepeater",value:function(){this.repeater=this.$interval(this.getApplicationLogsAsync,this.state.refreshRate)}},{key:"downloadLogs",value:function(){var e=new this.Blob([Object(a.a)(this.applicationLogs,(function(e,t){return e+"\n"+t}),"")]);this.FileSaver.saveAs(e,this.podName+"_logs.txt")}},{key:"getApplicationLogsAsync",value:(l=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesPodService.logs(this.application.ResourcePool,this.podName,this.containerName);case 3:this.applicationLogs=e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),this.stopRepeater(),this.Notifications.error("",e.t0,"Unable to retrieve application logs");case 10:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(){return l.apply(this,arguments)})},{key:"onInit",value:(o=c(regeneratorRuntime.mark((function e(){var t,n,a,r,i,o,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state={autoRefresh:!1,refreshRate:5e3,search:"",viewReady:!1},t=this.$transition$.params().pod,n=this.$transition$.params().name,a=this.$transition$.params().namespace,r=this.$transition$.params().container,this.applicationLogs=[],this.podName=t,this.containerName=r,e.prev=8,e.next=11,Promise.all([this.KubernetesApplicationService.get(a,n),this.KubernetesPodService.logs(a,t,r)]);case 11:i=e.sent,o=s(i,2),l=o[0],c=o[1],this.application=l,this.applicationLogs=c,e.next=22;break;case 19:e.prev=19,e.t0=e.catch(8),this.Notifications.error("",e.t0,"Unable to retrieve application logs");case 22:return e.prev=22,this.state.viewReady=!0,e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[8,19,22,25]])}))),function(){return o.apply(this,arguments)})},{key:"$onInit",value:function(){return this.$async(this.onInit)}},{key:"$onDestroy",value:function(){this.stopRepeater()}}])&&d(t.prototype,n),r&&d(t,r),e}();t.default=u,i.a.module("portainer.kubernetes").controller("KubernetesApplicationLogsController",u)},function(e,t,n){var a=n(1414);angular.module("portainer.kubernetes").component("kubernetesClusterView",{templateUrl:a,controller:"KubernetesClusterController",controllerAs:"ctrl"})},function(e,t){var n="app/kubernetes/views/cluster/cluster.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<kubernetes-view-header title="Cluster" state="kubernetes.cluster" view-ready="ctrl.state.viewReady">\n  Cluster information\n</kubernetes-view-header>\n\n<kubernetes-view-loading view-ready="ctrl.state.viewReady"></kubernetes-view-loading>\n\n<div ng-if="ctrl.state.viewReady">\n  <div class="row" ng-if="ctrl.isAdmin">\n    <div class="col-sm-12">\n      <rd-widget>\n        <rd-widget-body>\n          \x3c!-- resource-reservation --\x3e\n          <form class="form-horizontal" ng-if="ctrl.resourceReservation">\n            <kubernetes-resource-reservation\n              cpu="ctrl.resourceReservation.CPU"\n              cpu-limit="ctrl.CPULimit"\n              memory="ctrl.resourceReservation.Memory"\n              memory-limit="ctrl.MemoryLimit"\n              description="Resource reservation represents the total amount of resource assigned to all the applications inside the cluster."\n            >\n            </kubernetes-resource-reservation>\n          </form>\n          \x3c!-- !resource-reservation --\x3e\n\n          \x3c!-- cluster-status --\x3e\n          <div class="col-sm-12 form-section-title">\n            Cluster status\n          </div>\n\n          <table class="table">\n            <tbody>\n              <tr class="text-muted">\n                <td style="border-top: none; width: 25%;">Component</td>\n                <td style="border-top: none; width: 25%;">Status</td>\n                <td style="border-top: none; width: 50%;" ng-if="ctrl.hasUnhealthyComponentStatus">Error</td>\n              </tr>\n              <tr ng-repeat="cs in ctrl.componentStatuses">\n                <td style="width: 25%;">\n                  {{ cs.ComponentName }}\n                </td>\n                <td style="width: 25%;">\n                  <span ng-if="cs.Healthy"><i class="fa fa-check green-icon" aria-hidden="true" style="margin-right: 2px;"></i> </span>\n                  <span ng-if="!cs.Healthy"><i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i> </span>\n                </td>\n                <td ng-if="ctrl.hasUnhealthyComponentStatus" style="width: 50%;">\n                  {{ cs.ErrorMessage !== \'\' ? cs.ErrorMessage : \'-\' }}\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          \x3c!-- !cluster-status --\x3e\n\n          \x3c!-- leader-status --\x3e\n          <div ng-if="ctrl.systemEndpoints.length > 0">\n            <div class="col-sm-12 form-section-title">\n              Leader status\n            </div>\n\n            <table class="table">\n              <tbody>\n                <tr class="text-muted">\n                  <td style="border-top: none; width: 25%;">Component</td>\n                  <td style="border-top: none; width: 25%;">Leader node</td>\n                </tr>\n                <tr ng-repeat="ep in ctrl.systemEndpoints">\n                  <td style="width: 25%;">\n                    {{ ep.Name }}\n                  </td>\n                  <td style="width: 25%;">\n                    {{ ep.HolderIdentity }}\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n          \x3c!-- !leader-status --\x3e\n        </rd-widget-body>\n      </rd-widget>\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="col-sm-12">\n      <kubernetes-nodes-datatable\n        title-text="Nodes"\n        title-icon="fa-hdd"\n        dataset="ctrl.nodes"\n        table-key="kubernetes.nodes"\n        order-by="Name"\n        refresh-callback="ctrl.getNodes"\n        is-admin="ctrl.isAdmin"\n      ></kubernetes-nodes-datatable>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(19),r=n(10),i=n(7),s=n(2),o=n(70),l=n(5),c=n(4),d=n(1),u=n.n(d),p=n(44),m=n.n(p),g=n(15),f=n(161);function h(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){h(i,a,r,s,o,"next",e)}function o(e){h(i,a,r,s,o,"throw",e)}s(void 0)}))}}function b(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var y=function(){function e(t,n,a,r,i,s,o,l,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.$state=n,this.Authentication=a,this.Notifications=r,this.LocalStorage=i,this.KubernetesNodeService=s,this.KubernetesApplicationService=o,this.KubernetesComponentStatusService=l,this.KubernetesEndpointService=c,this.onInit=this.onInit.bind(this),this.getNodes=this.getNodes.bind(this),this.getNodesAsync=this.getNodesAsync.bind(this),this.getApplicationsAsync=this.getApplicationsAsync.bind(this),this.getComponentStatus=this.getComponentStatus.bind(this),this.getComponentStatusAsync=this.getComponentStatusAsync.bind(this),this.getEndpointsAsync=this.getEndpointsAsync.bind(this)}var t,n,d,u,p,h,y,x;return e.$inject=["$async","$state","Authentication","Notifications","LocalStorage","KubernetesNodeService","KubernetesApplicationService","KubernetesComponentStatusService","KubernetesEndpointService"],t=e,(n=[{key:"getComponentStatusAsync",value:(x=v(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesComponentStatusService.get();case 3:this.componentStatuses=e.sent,this.hasUnhealthyComponentStatus=!!Object(c.a)(this.componentStatuses,{Healthy:!1}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve cluster component statuses");case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return x.apply(this,arguments)})},{key:"getComponentStatus",value:function(){return this.$async(this.getComponentStatusAsync)}},{key:"getEndpointsAsync",value:(y=v(regeneratorRuntime.mark((function e(){var t,n,a,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesEndpointService.get();case 3:t=e.sent,n=Object(l.a)(t,{Namespace:"kube-system"}),this.systemEndpoints=Object(l.a)(n,(function(e){return e.HolderIdentity})),(a=Object(c.a)(t,{Name:"kubernetes"}))&&a.Subsets&&(d=Object(o.a)(Object(s.a)(a.Subsets,"Ips")),Object(i.a)(this.nodes,(function(e){e.Api=Object(r.a)(d,e.IPAddress)}))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve endpoints");case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(){return y.apply(this,arguments)})},{key:"getEndpoints",value:function(){return this.$async(this.getEndpointsAsync)}},{key:"getNodesAsync",value:(h=v(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesNodeService.get();case 3:t=e.sent,Object(i.a)(t,(function(e){return e.Memory=m()(e.Memory)})),this.nodes=t,this.CPULimit=Object(a.a)(this.nodes,(function(e,t){return t.CPU+e}),0),this.MemoryLimit=Object(a.a)(this.nodes,(function(e,t){return g.default.megaBytesValue(t.Memory)+e}),0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve nodes");case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(){return h.apply(this,arguments)})},{key:"getNodes",value:function(){return this.$async(this.getNodesAsync)}},{key:"getApplicationsAsync",value:(p=v(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state.applicationsLoading=!0,e.next=4,this.KubernetesApplicationService.get();case 4:this.applications=e.sent,t=Object(s.a)(this.nodes,(function(e){return e.Name})),this.resourceReservation=Object(a.a)(this.applications,(function(e,n){n.Pods=Object(l.a)(n.Pods,(function(e){return t.includes(e.Node)}));var a=g.default.computeResourceReservation(n.Pods);return e.CPU+=a.CPU,e.Memory+=a.Memory,e}),new f.KubernetesResourceReservation),this.resourceReservation.Memory=g.default.megaBytesValue(this.resourceReservation.Memory),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),this.Notifications.error("","Unable to retrieve applications",e.t0);case 13:return e.prev=13,this.state.applicationsLoading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[0,10,13,16]])}))),function(){return p.apply(this,arguments)})},{key:"getApplications",value:function(){return this.$async(this.getApplicationsAsync)}},{key:"onInit",value:(u=v(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state={applicationsLoading:!0,viewReady:!1,hasUnhealthyComponentStatus:!1},this.isAdmin=this.Authentication.isAdmin(),e.next=4,this.getNodes();case 4:if(!this.isAdmin){e.next=11;break}return e.next=7,this.getEndpoints();case 7:return e.next=9,this.getComponentStatus();case 9:return e.next=11,this.getApplications();case 11:this.state.viewReady=!0;case 12:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"$onInit",value:function(){return this.$async(this.onInit)}}])&&b(t.prototype,n),d&&b(t,d),e}();t.default=y,u.a.module("portainer.kubernetes").controller("KubernetesClusterController",y)},function(e,t,n){var a=n(1417);angular.module("portainer.kubernetes").component("kubernetesNodeView",{templateUrl:a,controller:"KubernetesNodeController",controllerAs:"ctrl",bindings:{$transition$:"<"}})},function(e,t){var n="app/kubernetes/views/cluster/node/node.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<kubernetes-view-header title="" state="kubernetes.cluster.node" view-ready="ctrl.state.viewReady">\n  <a ui-sref="kubernetes.cluster">Cluster</a> &gt; {{ ctrl.node.Name }}\n</kubernetes-view-header>\n\n<kubernetes-view-loading view-ready="ctrl.state.viewReady"></kubernetes-view-loading>\n\n<div ng-if="ctrl.state.viewReady">\n  <div class="row">\n    <div class="col-sm-12">\n      <rd-widget>\n        <rd-widget-body classes="no-padding">\n          <uib-tabset active="ctrl.state.activeTab" justified="true" type="pills">\n            <uib-tab index="0" classes="btn-sm" select="ctrl.selectTab(0)">\n              <uib-tab-heading> <i class="fa fa-hdd space-right" aria-hidden="true"></i> Node </uib-tab-heading>\n\n              <form class="form-horizontal" name="kubernetesNodeUpdateForm" style="padding: 20px;" autocomplete="off">\n                <table class="table">\n                  <tbody ng-if="ctrl.node">\n                    <tr>\n                      <td></td>\n                      <td>\n                        {{ ctrl.node.Name }}\n                        <span class="label label-primary image-tag" style="margin-left: 5px;" ng-if="ctrl.node.Api">api</span>\n                      </td>\n                    </tr>\n                    <tr ng-if="ctrl.node.Api">\n                      <td>\n                        Kubernetes API\n                      </td>\n                      <td>{{ ctrl.node.IPAddress }}:{{ ctrl.node.Port }}</td>\n                    </tr>\n                    <tr>\n                      <td>Role</td>\n                      <td>{{ ctrl.node.Role }}</td>\n                    </tr>\n                    <tr>\n                      <td>Kubelet version</td>\n                      <td>{{ ctrl.node.Version }}</td>\n                    </tr>\n                    <tr>\n                      <td>Creation date</td>\n                      <td>{{ ctrl.node.CreationDate | getisodate }}</td>\n                    </tr>\n                    <tr>\n                      <td>Status</td>\n                      <td>\n                        <span class="label label-{{ ctrl.node.Status | kubernetesNodeStatusColor }}">\n                          {{ ctrl.node.Status }}\n                        </span>\n                        <span ng-if="ctrl.node.Status == \'Warning\'" class="text text-warning">\n                          {{ ctrl.node.Conditions | kubernetesNodeConditionsMessage }}\n                        </span>\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n\n                <div style="padding: 8px;">\n                  <kubernetes-resource-reservation\n                    ng-if="ctrl.resourceReservation"\n                    cpu="ctrl.resourceReservation.CPU"\n                    cpu-limit="ctrl.node.CPU"\n                    memory="ctrl.resourceReservation.Memory"\n                    memory-limit="ctrl.memoryLimit"\n                    description=""\n                  >\n                  </kubernetes-resource-reservation>\n                </div>\n\n                <div style="padding: 8px;">\n                  \x3c!-- #region labels --\x3e\n                  <div class="col-sm-12 form-section-title">\n                    \n                  </div>\n\n                  <div style="margin-bottom: 10px;">\n                    <span class="label label-default interactive" ng-click="ctrl.addLabel()"> <i class="fa fa-plus-circle" aria-hidden="true"></i>  </span>\n                  </div>\n\n                  <div class="form-inline" ng-repeat="label in ctrl.formValues.Labels" style="padding: 3px 0 3px 0;">\n                    <div class="input-group col-sm-3 input-group-sm" ng-class="{ striked: label.NeedsDeletion }">\n                      <span class="input-group-addon">Key</span>\n                      <input\n                        type="text"\n                        class="form-control"\n                        name="label_key_{{ $index }}"\n                        ng-model="label.Key"\n                        ng-change="ctrl.onChangeLabelKey($index)"\n                        ng-disabled="ctrl.isSystemLabel($index)"\n                        required\n                      />\n                    </div>\n                    <div class="input-group col-sm-3 input-group-sm" ng-class="{ striked: label.NeedsDeletion }">\n                      <span class="input-group-addon">Value</span>\n                      <input\n                        type="text"\n                        class="form-control"\n                        name="label_value_{{ $index }}"\n                        ng-change="ctrl.onChangeLabel($index)"\n                        ng-model="label.Value"\n                        ng-disabled="ctrl.isSystemLabel($index)"\n                      />\n                    </div>\n                    <div class="input-group col-sm-1 input-group-sm">\n                      <div style="white-space: nowrap;">\n                        <button ng-if="!ctrl.isSystemLabel($index) && !label.NeedsDeletion" class="btn btn-sm btn-danger" type="button" ng-click="ctrl.removeLabel($index)">\n                          <i class="fa fa-times" aria-hidden="true"></i>\n                        </button>\n                        <button ng-if="!ctrl.isSystemLabel($index) && label.NeedsDeletion" class="btn btn-sm btn-primary" type="button" ng-click="ctrl.restoreLabel($index)">\n                          Restore\n                        </button>\n                        <span class="label label-warning label-sm image-tag" ng-if="label.IsUsed && !ctrl.isSystemLabel($index)" style="margin-left: 5px;">used</span>\n                        <span class="label label-info image-tag" ng-if="ctrl.isSystemLabel($index)" style="margin-left: 5px;">system</span>\n                      </div>\n                    </div>\n                    <div\n                      class="small text-warning"\n                      style="margin-top: 5px;"\n                      ng-show="kubernetesNodeUpdateForm[\'label_key_\' + $index].$invalid || ctrl.state.duplicateLabelKeys[$index] !== undefined"\n                    >\n                      <ng-messages for="kubernetesNodeUpdateForm[\'label_key_\' + $index].$error">\n                        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Label key is required.</p>\n                      </ng-messages>\n                      <p ng-if="ctrl.state.duplicateLabelKeys[$index] !== undefined"\n                        ><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> This label key is already defined.</p\n                      >\n                    </div>\n                  </div>\n\n                  \x3c!-- #endregion --\x3e\n\n                  \x3c!-- #region taints --\x3e\n\n                  <div class="col-sm-12 form-section-title" style="margin-top: 20px;">\n                    Taints\n                  </div>\n\n                  <div style="margin-bottom: 10px;">\n                    <span class="label label-default interactive" ng-click="ctrl.addTaint()"> <i class="fa fa-plus-circle" aria-hidden="true"></i> add taint </span>\n                  </div>\n\n                  <div class="form-inline" ng-repeat="taint in ctrl.formValues.Taints" style="padding: 3px 0 3px 0;">\n                    <div class="input-group col-sm-3 input-group-sm" ng-class="{ striked: taint.NeedsDeletion }">\n                      <span class="input-group-addon">Key</span>\n                      <input type="text" class="form-control" name="taint_key_{{ $index }}" ng-model="taint.Key" ng-change="ctrl.onChangeTaintKey($index)" required />\n                    </div>\n                    <div class="input-group col-sm-3 input-group-sm" ng-class="{ striked: taint.NeedsDeletion }">\n                      <span class="input-group-addon">Value</span>\n                      <input type="text" class="form-control" name="taint_value_{{ $index }}" ng-model="taint.Value" ng-change="ctrl.onChangeTaint($index)" />\n                    </div>\n                    <div class="input-group col-sm-3 input-group-sm" ng-class="{ striked: taint.NeedsDeletion }">\n                      <span class="input-group-addon">Effect</span>\n                      <select\n                        id="taint_effect_{{ $index }}"\n                        name="taint_effect_{{ $index }}"\n                        class="form-control"\n                        ng-model="taint.Effect"\n                        ng-change="ctrl.onChangeTaint($index)"\n                        ;\n                        ng-options="effect as effect for effect in ctrl.availableEffects"\n                      ></select>\n                    </div>\n                    <div class="input-group col-sm-1 input-group-sm">\n                      <div>\n                        <button ng-if="!taint.NeedsDeletion" class="btn btn-sm btn-danger" type="button" ng-click="ctrl.removeTaint($index)">\n                          <i class="fa fa-times" aria-hidden="true"></i>\n                        </button>\n                        <button ng-if="taint.NeedsDeletion" class="btn btn-sm btn-primary" type="button" ng-click="ctrl.restoreTaint($index)">\n                          Restore\n                        </button>\n                      </div>\n                    </div>\n                    <div\n                      class="small text-warning"\n                      style="margin-top: 5px;"\n                      ng-show="kubernetesNodeUpdateForm[\'taint_key_\' + $index].$invalid || ctrl.state.duplicateTaintKeys[$index] !== undefined"\n                    >\n                      <ng-messages for="kubernetesNodeUpdateForm[\'taint_key_\' + $index].$error">\n                        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Taint key is required.</p>\n                      </ng-messages>\n                      <p ng-if="ctrl.state.duplicateTaintKeys[$index] !== undefined"\n                        ><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> This taint key is already defined.</p\n                      >\n                    </div>\n                  </div>\n\n                  \x3c!-- #endregion --\x3e\n\n                  \x3c!-- #region actions --\x3e\n\n                  <div class="col-sm-12 form-section-title" style="margin-top: 20px;">\n                    \n                  </div>\n\n                  <div class="form-group">\n                    <div class="col-sm-12">\n                      <button\n                        class="btn btn-primary btn-sm"\n                        type="button"\n                        style="margin-left: 0;"\n                        ng-click="ctrl.updateNode()"\n                        ng-disabled="kubernetesNodeUpdateForm.$invalid || !ctrl.isFormValid()"\n                      >\n                        Update node\n                      </button>\n                      <button class="btn btn-default btn-sm" type="button" ng-click="ctrl.resetFormValues()" ng-disabled="ctrl.isNoChangesMade()">\n                        Cancel\n                      </button>\n                    </div>\n                  </div>\n\n                  \x3c!-- #endregion --\x3e\n                </div>\n              </form>\n            </uib-tab>\n            <uib-tab index="1" classes="btn-sm" select="ctrl.selectTab(1)">\n              <uib-tab-heading>\n                <i class="fa fa-history space-right" aria-hidden="true"></i> Events\n                <div ng-if="ctrl.hasEventWarnings()">\n                  <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                  {{ ctrl.state.eventWarningCount }} warning(s)\n                </div>\n              </uib-tab-heading>\n              <kubernetes-events-datatable\n                title-text="Events"\n                title-icon="fa-history"\n                dataset="ctrl.events"\n                table-key="kubernetes.node.events"\n                order-by="Date"\n                reverse-order="true"\n                loading="ctrl.state.eventsLoading"\n                refresh-callback="ctrl.getEvents"\n              >\n              </kubernetes-events-datatable>\n            </uib-tab>\n            <uib-tab index="2" ng-if="ctrl.node.Yaml" select="ctrl.showEditor()" classes="btn-sm">\n              <uib-tab-heading> <i class="fa fa-code space-right" aria-hidden="true"></i> YAML </uib-tab-heading>\n              <div style="padding-right: 25px;" ng-if="ctrl.state.showEditorTab">\n                <kubernetes-yaml-inspector key="node-yaml" data="ctrl.node.Yaml"> </kubernetes-yaml-inspector>\n              </div>\n            </uib-tab>\n          </uib-tabset>\n        </rd-widget-body>\n      </rd-widget>\n    </div>\n  </div>\n\n  <div class="row" ng-if="ctrl.applications && ctrl.applications.length > 0">\n    <div class="col-sm-12">\n      <kubernetes-node-applications-datatable\n        dataset="ctrl.applications"\n        table-key="kubernetes.node.applications"\n        order-by="Name"\n        refresh-callback="ctrl.getApplications"\n        loading="ctrl.state.applicationsLoading"\n        title-text=""\n        title-icon="fa-laptop-code"\n      >\n      </kubernetes-node-applications-datatable>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(145),r=n(7),i=n(4),s=n(5),o=n(2),l=n(1),c=n.n(l),d=n(15),u=n(161),p=n(93),m=n(100),g=n(148),f=n(120),h=n(48),v=n(174);function b(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){b(i,a,r,s,o,"next",e)}function o(e){b(i,a,r,s,o,"throw",e)}s(void 0)}))}}function x(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var w=function(){function e(t,n,a,r,i,s,o,l,c,d){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.$state=n,this.Notifications=a,this.LocalStorage=r,this.ModalService=i,this.KubernetesNodeService=s,this.KubernetesEventService=o,this.KubernetesPodService=l,this.KubernetesApplicationService=c,this.KubernetesEndpointService=d,this.onInit=this.onInit.bind(this),this.getNodeAsync=this.getNodeAsync.bind(this),this.getEvents=this.getEvents.bind(this),this.getEventsAsync=this.getEventsAsync.bind(this),this.getApplicationsAsync=this.getApplicationsAsync.bind(this),this.getEndpointsAsync=this.getEndpointsAsync.bind(this),this.updateNodeAsync=this.updateNodeAsync.bind(this)}var t,n,l,c,b,w,k,S,C;return e.$inject=["$async","$state","Notifications","LocalStorage","ModalService","KubernetesNodeService","KubernetesEventService","KubernetesPodService","KubernetesApplicationService","KubernetesEndpointService"],t=e,(n=[{key:"selectTab",value:function(e){this.LocalStorage.storeActiveTab("node",e)}},{key:"onChangeTaintKey",value:function(e){this.state.duplicateTaintKeys=h.default.getDuplicates(Object(o.a)(this.formValues.Taints,(function(e){if(!e.NeedsDeletion)return e.Key}))),this.state.hasDuplicateTaintKeys=Object.keys(this.state.duplicateTaintKeys).length>0,this.onChangeTaint(e)}},{key:"onChangeTaint",value:function(e){this.formValues.Taints[e]&&(this.formValues.Taints[e].IsChanged=!0)}},{key:"addTaint",value:function(){var e=new g.KubernetesNodeTaintFormValues;e.IsNew=!0,e.Effect=f.KubernetesNodeTaintEffects.NOSCHEDULE,this.formValues.Taints.push(e)}},{key:"removeTaint",value:function(e){var t=this.formValues.Taints[e];t.IsNew?this.formValues.Taints.splice(e,1):t.NeedsDeletion=!0,this.onChangeTaintKey()}},{key:"restoreTaint",value:function(e){this.formValues.Taints[e].NeedsDeletion=!1,this.onChangeTaintKey()}},{key:"computeTaintsWarning",value:function(){return Object(s.a)(this.formValues.Taints,(function(e){return e.Effect===f.KubernetesNodeTaintEffects.NOEXECUTE&&(e.IsNew||e.IsChanged)})).length}},{key:"onChangeLabelKey",value:function(e){this.state.duplicateLabelKeys=h.default.getDuplicates(Object(o.a)(this.formValues.Labels,(function(e){if(!e.NeedsDeletion)return e.Key}))),this.state.hasDuplicateLabelKeys=Object.keys(this.state.duplicateLabelKeys).length>0,this.onChangeLabel(e)}},{key:"onChangeLabel",value:function(e){this.formValues.Labels[e]&&(this.formValues.Labels[e].IsChanged=!0)}},{key:"addLabel",value:function(){var e=new g.KubernetesNodeLabelFormValues;e.IsNew=!0,this.formValues.Labels.push(e)}},{key:"removeLabel",value:function(e){var t=this.formValues.Labels[e];t.IsNew?this.formValues.Labels.splice(e,1):t.NeedsDeletion=!0,this.onChangeLabelKey()}},{key:"restoreLabel",value:function(e){this.formValues.Labels[e].NeedsDeletion=!1,this.onChangeLabelKey()}},{key:"isSystemLabel",value:function(e){return v.KubernetesNodeHelper.isSystemLabel(this.formValues.Labels[e])}},{key:"computeLabelsWarning",value:function(){return Object(s.a)(this.formValues.Labels,(function(e){return e.IsUsed&&(e.NeedsDeletion||e.IsChanged)})).length}},{key:"isNoChangesMade",value:function(){var e=m.default.formValuesToNode(this.node,this.formValues);return!m.default.patchPayload(this.node,e).length}},{key:"isFormValid",value:function(){return!this.state.hasDuplicateTaintKeys&&!this.state.hasDuplicateLabelKeys&&!this.isNoChangesMade()}},{key:"resetFormValues",value:function(){this.formValues=m.default.nodeToFormValues(this.node)}},{key:"getEndpointsAsync",value:(C=y(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesEndpointService.get();case 3:t=e.sent,this.endpoint=Object(i.a)(t,{Name:"kubernetes"}),this.endpoint&&this.endpoint.Subsets&&Object(r.a)(this.endpoint.Subsets,(function(e){return Object(r.a)(e.Ips,(function(t){if(t===n.node.IPAddress)return n.node.Api=!0,n.node.Port=e.Port,!1}))})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve endpoints");case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return C.apply(this,arguments)})},{key:"getEndpoints",value:function(){return this.$async(this.getEndpointsAsync)}},{key:"updateNodeAsync",value:(S=y(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesNodeService.patch(this.node,this.formValues);case 3:this.Notifications.success("Node updated successfully"),this.$state.reload(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to update node");case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return S.apply(this,arguments)})},{key:"updateNode",value:function(){var e=this,t=this.computeTaintsWarning(),n=this.computeLabelsWarning();if(t&&!n)this.ModalService.confirmUpdate("",(function(t){if(t)return e.$async(e.updateNodeAsync)}));else if(!t&&n)this.ModalService.confirmUpdate("",(function(t){if(t)return e.$async(e.updateNodeAsync)}));else{if(!t||!n)return this.$async(this.updateNodeAsync);this.ModalService.confirmUpdate("<br/></br/>\n\n",(function(t){if(t)return e.$async(e.updateNodeAsync)}))}}},{key:"getNodeAsync",value:(k=y(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state.dataLoading=!0,t=this.$transition$.params().name,e.next=5,this.KubernetesNodeService.get(t);case 5:this.node=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve node");case 11:return e.prev=11,this.state.dataLoading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[0,8,11,14]])}))),function(){return k.apply(this,arguments)})},{key:"getNode",value:function(){return this.$async(this.getNodeAsync)}},{key:"hasEventWarnings",value:function(){return this.state.eventWarningCount}},{key:"getEventsAsync",value:(w=y(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state.eventsLoading=!0,e.next=4,this.KubernetesEventService.get();case 4:this.events=e.sent,this.events=Object(s.a)(this.events.items,(function(e){return"Node"===e.involvedObject.kind})),this.state.eventWarningCount=p.default.warningCount(this.events),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve node events");case 12:return e.prev=12,this.state.eventsLoading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[0,9,12,15]])}))),function(){return w.apply(this,arguments)})},{key:"getEvents",value:function(){return this.$async(this.getEventsAsync)}},{key:"showEditor",value:function(){this.state.showEditorTab=!0,this.selectTab(2)}},{key:"getApplicationsAsync",value:(b=y(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state.applicationsLoading=!0,e.next=4,this.KubernetesApplicationService.get();case 4:this.applications=e.sent,this.resourceReservation=new u.KubernetesResourceReservation,this.applications=Object(o.a)(this.applications,(function(e){return e.Pods=Object(s.a)(e.Pods,(function(e){return e.Node===t.node.Name})),e})),this.applications=Object(s.a)(this.applications,(function(e){return 0!==e.Pods.length})),this.applications=Object(o.a)(this.applications,(function(e){var n=d.default.computeResourceReservation(e.Pods);return e.CPU=n.CPU,e.Memory=n.Memory,t.resourceReservation.CPU+=n.CPU,t.resourceReservation.Memory+=n.Memory,e})),this.resourceReservation.Memory=d.default.megaBytesValue(this.resourceReservation.Memory),this.memoryLimit=d.default.megaBytesValue(this.node.Memory),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve applications");case 16:return e.prev=16,this.state.applicationsLoading=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[0,13,16,19]])}))),function(){return b.apply(this,arguments)})},{key:"getApplications",value:function(){return this.$async(this.getApplicationsAsync)}},{key:"onInit",value:(c=y(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state={activeTab:0,currentName:this.$state.$current.name,dataLoading:!0,eventsLoading:!0,applicationsLoading:!0,showEditorTab:!1,viewReady:!1,eventWarningCount:0,duplicateTaintKeys:[],hasDuplicateTaintKeys:!1,duplicateLabelKeys:[],hasDuplicateLabelKeys:!1},this.state.activeTab=this.LocalStorage.getActiveTab("node"),e.next=4,this.getNode();case 4:return e.next=6,this.getEvents();case 6:return e.next=8,this.getApplications();case 8:return e.next=10,this.getEndpoints();case 10:this.availableEffects=Object(a.a)(f.KubernetesNodeTaintEffects),this.formValues=m.default.nodeToFormValues(this.node),this.formValues.Labels=v.KubernetesNodeHelper.computeUsedLabels(this.applications,this.formValues.Labels),this.formValues.Labels=v.KubernetesNodeHelper.reorderLabels(this.formValues.Labels),this.state.viewReady=!0;case 15:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"$onInit",value:function(){return this.$async(this.onInit)}},{key:"$onDestroy",value:function(){this.state.currentName!==this.$state.$current.name&&this.LocalStorage.storeActiveTab("node",0)}}])&&x(t.prototype,n),l&&x(t,l),e}();t.default=w,c.a.module("portainer.kubernetes").controller("KubernetesNodeController",w)},function(e,t,n){var a=n(1420);angular.module("portainer.kubernetes").component("kubernetesConfigurationsView",{templateUrl:a,controller:"KubernetesConfigurationsController",controllerAs:"ctrl"})},function(e,t){var n="app/kubernetes/views/configurations/configurations.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<kubernetes-view-header title="" state="kubernetes.configurations" view-ready="ctrl.state.viewReady">\n  Configurations\n</kubernetes-view-header>\n\n<kubernetes-view-loading view-ready="ctrl.state.viewReady"></kubernetes-view-loading>\n\n<div ng-if="ctrl.state.viewReady">\n  <div class="row">\n    <div class="col-sm-12">\n      <kubernetes-configurations-datatable\n        dataset="ctrl.configurations"\n        table-key="kubernetes.configurations"\n        order-by="Name"\n        refresh-callback="ctrl.refreshCallback"\n        remove-action="ctrl.removeAction"\n      ></kubernetes-configurations-datatable>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(97);function s(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function l(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){l(i,a,r,s,o,"next",e)}function o(e){l(i,a,r,s,o,"throw",e)}s(void 0)}))}}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var u=function(){function e(t,n,a,r,i,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.$state=n,this.Notifications=a,this.KubernetesConfigurationService=r,this.KubernetesApplicationService=i,this.ModalService=s,this.onInit=this.onInit.bind(this),this.getConfigurations=this.getConfigurations.bind(this),this.getConfigurationsAsync=this.getConfigurationsAsync.bind(this),this.getApplicationsAsync=this.getApplicationsAsync.bind(this),this.removeAction=this.removeAction.bind(this),this.removeActionAsync=this.removeActionAsync.bind(this),this.refreshCallback=this.refreshCallback.bind(this),this.refreshCallbackAsync=this.refreshCallbackAsync.bind(this)}var t,n,a,r,o,l,u,p;return e.$inject=["$async","$state","Notifications","KubernetesConfigurationService","KubernetesApplicationService","ModalService"],t=e,(n=[{key:"getConfigurationsAsync",value:(p=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state.configurationsLoading=!0,e.next=4,this.KubernetesConfigurationService.get();case 4:this.configurations=e.sent,i.default.setConfigurationsUsed(this.configurations,this.applications),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve configurations");case 11:return e.prev=11,this.state.configurationsLoading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[0,8,11,14]])}))),function(){return p.apply(this,arguments)})},{key:"getConfigurations",value:function(){return this.$async(this.getConfigurationsAsync)}},{key:"removeActionAsync",value:(u=c(regeneratorRuntime.mark((function e(t){var n,a,r,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.length,a=s(t),e.prev=2,a.s();case 4:if((r=a.n()).done){e.next=23;break}return i=r.value,e.prev=6,e.next=9,this.KubernetesConfigurationService.delete(i);case 9:this.Notifications.success("Configurations successfully",i.Name),o=this.configurations.indexOf(i),this.configurations.splice(o,1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),this.Notifications.error("",e.t0," configuration");case 17:return e.prev=17,0==--n&&this.$state.reload(),e.finish(17);case 21:e.next=4;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(2),a.e(e.t1);case 28:return e.prev=28,a.f(),e.finish(28);case 31:case"end":return e.stop()}}),e,this,[[2,25,28,31],[6,14,17,21]])}))),function(e){return u.apply(this,arguments)})},{key:"removeAction",value:function(e){var t=this;this.ModalService.confirmDeletion("Do you want to remove the selected configuration(s)?",(function(n){if(n)return t.$async(t.removeActionAsync,e)}))}},{key:"getApplicationsAsync",value:(l=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state.applicationsLoading=!0,e.next=4,this.KubernetesApplicationService.get();case 4:this.applications=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve applications");case 10:return e.prev=10,this.state.applicationsLoading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[0,7,10,13]])}))),function(){return l.apply(this,arguments)})},{key:"getApplications",value:function(){return this.$async(this.getApplicationsAsync)}},{key:"refreshCallbackAsync",value:(o=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getConfigurations();case 2:return e.next=4,this.getApplications();case 4:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"refreshCallback",value:function(){return this.$async(this.refreshCallbackAsync)}},{key:"onInit",value:(r=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state={configurationsLoading:!0,applicationsLoading:!0,viewReady:!1},e.next=3,this.getApplications();case 3:return e.next=5,this.getConfigurations();case 5:this.state.viewReady=!0;case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"$onInit",value:function(){return this.$async(this.onInit)}}])&&d(t.prototype,n),a&&d(t,a),e}();t.default=u,r.a.module("portainer.kubernetes").controller("KubernetesConfigurationsController",u)},function(e,t,n){var a=n(1423);angular.module("portainer.kubernetes").component("kubernetesCreateConfigurationView",{templateUrl:a,controller:"KubernetesCreateConfigurationController",controllerAs:"ctrl"})},function(e,t){var n="app/kubernetes/views/configurations/create/createConfiguration.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<kubernetes-view-header title="" state="kubernetes.configurations.new" view-ready="ctrl.state.viewReady">\n  <a ui-sref="kubernetes.configurations"></a> &gt; Create a configuration\n</kubernetes-view-header>\n\n<kubernetes-view-loading view-ready="ctrl.state.viewReady"></kubernetes-view-loading>\n\n<div ng-if="ctrl.state.viewReady">\n  <div class="row">\n    <div class="col-xs-12">\n      <rd-widget>\n        <rd-widget-body>\n          <form class="form-horizontal" name="kubernetesConfigurationCreationForm" autocomplete="off">\n            \x3c!-- name --\x3e\n            <div class="form-group">\n              <label for="configuration_name" class="col-sm-1 control-label text-left"></label>\n              <div class="col-sm-11">\n                <input\n                  type="text"\n                  class="form-control"\n                  name="configuration_name"\n                  ng-model="ctrl.formValues.Name"\n                  ng-pattern="/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/"\n                  ng-change="ctrl.onChangeName()"\n                  placeholder="my-configuration"\n                  auto-focus\n                  required\n                />\n              </div>\n            </div>\n            <div class="form-group" ng-show="kubernetesConfigurationCreationForm.configuration_name.$invalid || ctrl.state.alreadyExist">\n              <div class="col-sm-12 small text-warning">\n                <div ng-messages="kubernetesConfigurationCreationForm.configuration_name.$error">\n                  <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n                  <p ng-message="pattern"\n                    ><i class="fa fa-exclamation-triangle" aria-hidden="true"></i>  \'-\'  \'.\', \n                    </p\n                  >\n                </div>\n                <p ng-if="ctrl.state.alreadyExist"\n                  ><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> A configuration with the same name already exists inside the selected resource pool.</p\n                >\n              </div>\n            </div>\n            \x3c!-- !name --\x3e\n\n            <div class="col-sm-12 form-section-title">\n              Resource pool\n            </div>\n\n            \x3c!-- resource-pool --\x3e\n            <div class="form-group">\n              <label for="resource-pool-selector" class="col-sm-1 control-label text-left">Resource pool</label>\n              <div class="col-sm-11">\n                <select\n                  class="form-control"\n                  id="resource-pool-selector"\n                  ng-model="ctrl.formValues.ResourcePool"\n                  ng-options="resourcePool.Namespace.Name for resourcePool in ctrl.resourcePools"\n                  ng-change="ctrl.onResourcePoolSelectionChange()"\n                ></select>\n              </div>\n            </div>\n            <div class="form-group" ng-if="ctrl.state.resourcePoolHasQuota && ctrl.resourceQuotaCapacityExceeded()">\n              <div class="col-sm-12 small text-warning">\n                <i class="fa fa-exclamation-triangle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                  \n \n              </div>\n            </div>\n            \x3c!-- !resource-pool --\x3e\n\n            <div class="col-sm-12 form-section-title">\n              Configuration type\n            </div>\n\n            <div class="form-group">\n              <div class="col-sm-12 small text-muted">\n                Select the type of data that you want to save in the configuration.\n              </div>\n            </div>\n\n            \x3c!-- type options --\x3e\n            <div class="form-group" style="margin-bottom: 0;">\n              <div class="boxselector_wrapper">\n                <div>\n                  <input type="radio" id="type_basic" ng-value="ctrl.KubernetesConfigurationTypes.CONFIGMAP" ng-model="ctrl.formValues.Type" />\n                  <label for="type_basic">\n                    <div class="boxselector_header">\n                      <i class="fa fa-file-code" aria-hidden="true" style="margin-right: 2px;"></i>\n                      Non-sensitive\n                    </div>\n                    <p>This configuration holds non-sensitive information</p>\n                  </label>\n                </div>\n                <div>\n                  <input type="radio" id="type_secret" ng-value="ctrl.KubernetesConfigurationTypes.SECRET" ng-model="ctrl.formValues.Type" />\n                  <label for="type_secret">\n                    <div class="boxselector_header">\n                      <i class="fa fa-user-secret" aria-hidden="true" style="margin-right: 2px;"></i>\n                      Sensitive\n                    </div>\n                    <p>This configuration holds sensitive information</p>\n                  </label>\n                </div>\n              </div>\n            </div>\n            \x3c!-- !type options --\x3e\n\n            <kubernetes-configuration-data ng-if="ctrl.formValues" form-values="ctrl.formValues" is-valid="ctrl.state.isDataValid"></kubernetes-configuration-data>\n\n            \x3c!-- actions --\x3e\n            <div class="col-sm-12 form-section-title" style="margin-top: 10px;">\n              \n            </div>\n            <div class="form-group">\n              <div class="col-sm-12">\n                <button\n                  type="button"\n                  class="btn btn-primary btn-sm"\n                  ng-disabled="!kubernetesConfigurationCreationForm.$valid || !ctrl.isFormValid() || ctrl.state.actionInProgress"\n                  ng-click="ctrl.createConfiguration()"\n                  button-spinner="ctrl.state.actionInProgress"\n                >\n                  <span ng-hide="ctrl.state.actionInProgress">Create configuration</span>\n                  <span ng-show="ctrl.state.actionInProgress">Creation in progress...</span>\n                </button>\n              </div>\n            </div>\n            \x3c!-- !actions --\x3e\n          </form>\n        </rd-widget-body>\n      </rd-widget>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(4),r=n(5),i=n(1),s=n.n(i),o=n(113),l=n(26);function c(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){c(i,a,r,s,o,"next",e)}function o(e){c(i,a,r,s,o,"throw",e)}s(void 0)}))}}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var p=function(){function e(t,n,a,r,i,s,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.$state=n,this.Notifications=a,this.Authentication=r,this.KubernetesConfigurationService=i,this.KubernetesResourcePoolService=s,this.KubernetesConfigurationTypes=l.KubernetesConfigurationTypes,this.KubernetesNamespaceHelper=o,this.onInit=this.onInit.bind(this),this.createConfigurationAsync=this.createConfigurationAsync.bind(this),this.getConfigurationsAsync=this.getConfigurationsAsync.bind(this)}var t,n,i,s,c,p;return e.$inject=["$async","$state","Notifications","Authentication","KubernetesConfigurationService","KubernetesResourcePoolService","KubernetesNamespaceHelper"],t=e,(n=[{key:"onChangeName",value:function(){var e=this,t=Object(r.a)(this.configurations,(function(t){return t.Namespace===e.formValues.ResourcePool.Namespace.Name}));this.state.alreadyExist=void 0!==Object(a.a)(t,(function(t){return t.Name===e.formValues.Name}))}},{key:"onResourcePoolSelectionChange",value:function(){this.onChangeName()}},{key:"isFormValid",value:function(){var e=!this.state.alreadyExist&&this.state.isDataValid;return this.formValues.IsSimple?this.formValues.Data.length>0&&e:e}},{key:"createConfigurationAsync",value:(p=d(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state.actionInProgress=!0,this.formValues.ConfigurationOwner=this.Authentication.getUserDetails().username,e.next=5,this.KubernetesConfigurationService.create(this.formValues);case 5:this.Notifications.success("Configuration succesfully"),this.$state.go("kubernetes.configurations"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to create configuration");case 12:return e.prev=12,this.state.actionInProgress=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[0,9,12,15]])}))),function(){return p.apply(this,arguments)})},{key:"createConfiguration",value:function(){return this.$async(this.createConfigurationAsync)}},{key:"getConfigurationsAsync",value:(c=d(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesConfigurationService.get();case 3:this.configurations=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve configurations");case 9:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(){return c.apply(this,arguments)})},{key:"getConfigurations",value:function(){return this.$async(this.getConfigurationsAsync)}},{key:"onInit",value:(s=d(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state={actionInProgress:!1,viewReady:!1,alreadyExist:!1,isDataValid:!0},this.formValues=new o.KubernetesConfigurationFormValues,this.formValues.Data.push(new o.KubernetesConfigurationFormValuesDataEntry),e.prev=3,e.next=6,this.KubernetesResourcePoolService.get();case 6:return t=e.sent,this.resourcePools=Object(r.a)(t,(function(e){return!n.KubernetesNamespaceHelper.isSystemNamespace(e.Namespace.Name)})),this.formValues.ResourcePool=this.resourcePools[0],e.next=11,this.getConfigurations();case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),this.Notifications.error("",e.t0,"Unable to load view data");case 16:return e.prev=16,this.state.viewReady=!0,e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[3,13,16,19]])}))),function(){return s.apply(this,arguments)})},{key:"$onInit",value:function(){return this.$async(this.onInit)}}])&&u(t.prototype,n),i&&u(t,i),e}();t.default=p,s.a.module("portainer.kubernetes").controller("KubernetesCreateConfigurationController",p)},function(e,t,n){var a=n(1426);angular.module("portainer.kubernetes").component("kubernetesConfigurationView",{templateUrl:a,controller:"KubernetesConfigurationController",controllerAs:"ctrl",bindings:{$transition$:"<"}})},function(e,t){var n="app/kubernetes/views/configurations/edit/configuration.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<kubernetes-view-header title="" state="kubernetes.configurations.configuration" view-ready="ctrl.state.viewReady">\n  <a ui-sref="kubernetes.resourcePools">Resource pools</a> &gt;\n  <a ui-sref="kubernetes.resourcePools.resourcePool({ id: ctrl.configuration.Namespace })">{{ ctrl.configuration.Namespace }}</a> &gt;\n  <a ui-sref="kubernetes.configurations"></a> &gt; {{ ctrl.configuration.Name }}\n</kubernetes-view-header>\n\n<kubernetes-view-loading view-ready="ctrl.state.viewReady"></kubernetes-view-loading>\n\n<div ng-if="ctrl.state.viewReady">\n  <div class="row">\n    <div class="col-sm-12">\n      <rd-widget>\n        <rd-widget-body classes="no-padding">\n          <uib-tabset active="ctrl.state.activeTab" justified="true" type="pills">\n            <uib-tab index="0" classes="btn-sm" select="ctrl.selectTab(0)">\n              <uib-tab-heading> <i class="fa fa-file-code space-right" aria-hidden="true"></i> Configuration </uib-tab-heading>\n              <div style="padding: 20px;">\n                <table class="table">\n                  <tbody>\n                    <tr>\n                      <td></td>\n                      <td>\n                        {{ ctrl.configuration.Name }}\n                      </td>\n                    </tr>\n                    <tr>\n                      <td>Resource Pool</td>\n                      <td>\n                        <a ui-sref="kubernetes.resourcePools.resourcePool({ id: ctrl.configuration.Namespace })">{{ ctrl.configuration.Namespace }}</a>\n                        <span style="margin-left: 5px;" class="label label-info image-tag" ng-if="ctrl.isSystemNamespace()">system</span>\n                      </td>\n                    </tr>\n                    <tr>\n                      <td> </td>\n                      <td>\n                        {{ ctrl.configuration.Type | kubernetesConfigurationTypeText }}\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </uib-tab>\n            <uib-tab index="1" classes="btn-sm" select="ctrl.selectTab(1)">\n              <uib-tab-heading>\n                <i class="fa fa-history space-right" aria-hidden="true"></i> Events\n                <div ng-if="ctrl.hasEventWarnings()">\n                  <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                  {{ ctrl.state.eventWarningCount }} warning(s)\n                </div>\n              </uib-tab-heading>\n              <kubernetes-events-datatable\n                title-text="Events"\n                title-icon="fa-history"\n                dataset="ctrl.events"\n                table-key="kubernetes.configuration.events"\n                order-by="Date"\n                reverse-order="true"\n                loading="ctrl.state.eventsLoading"\n                refresh-callback="ctrl.getEvents"\n              >\n              </kubernetes-events-datatable>\n            </uib-tab>\n            <uib-tab index="2" ng-if="ctrl.configuration.Yaml" classes="btn-sm" select="ctrl.showEditor()">\n              <uib-tab-heading> <i class="fa fa-code space-right" aria-hidden="true"></i> YAML </uib-tab-heading>\n              <div style="padding-right: 25px;" ng-if="ctrl.state.showEditorTab">\n                <kubernetes-yaml-inspector key="configuration-yaml" data="ctrl.configuration.Yaml"> </kubernetes-yaml-inspector>\n              </div>\n            </uib-tab>\n          </uib-tabset>\n        </rd-widget-body>\n      </rd-widget>\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="col-sm-12">\n      <rd-widget>\n        <rd-widget-body>\n          <form ng-if="!ctrl.isSystemNamespace()" class="form-horizontal" name="kubernetesConfigurationCreationForm" autocomplete="off">\n            <kubernetes-configuration-data ng-if="ctrl.formValues" form-values="ctrl.formValues" is-valid="ctrl.state.isDataValid"></kubernetes-configuration-data>\n\n            \x3c!-- actions --\x3e\n            <div class="col-sm-12 form-section-title" style="margin-top: 10px;">\n              \n            </div>\n            <div class="form-group">\n              <div class="col-sm-12">\n                <button\n                  type="button"\n                  class="btn btn-primary btn-sm"\n                  ng-disabled="!ctrl.isFormValid() || !kubernetesConfigurationCreationForm.$valid || ctrl.state.actionInProgress"\n                  ng-click="ctrl.updateConfiguration()"\n                  button-spinner="ctrl.state.actionInProgress"\n                >\n                  <span ng-hide="ctrl.state.actionInProgress">Update configuration</span>\n                  <span ng-show="ctrl.state.actionInProgress">Update in progress...</span>\n                </button>\n              </div>\n            </div>\n            \x3c!-- !actions --\x3e\n          </form>\n          <div ng-if="ctrl.isSystemNamespace()">\n            <div class="col-sm-12 form-section-title" style="margin-top: 10px;">\n              Data\n            </div>\n            <table class="table">\n              <tbody>\n                <tr class="text-muted">\n                  <td style="width: 10%; border-top: none;">Key</td>\n                  <td style="width: 90%; border-top: none;">Value</td>\n                </tr>\n\n                <tr ng-repeat="item in ctrl.formValues.Data track by $index">\n                  <td>{{ item.Key }}</td>\n                  <td>\n                    <div style="white-space: pre-wrap;">{{ item.Value }}</div>\n                    <div style="margin-top: 2px;">\n                      <span class="btn btn-primary btn-xs" ng-click="ctrl.copyConfigurationValue($index)"> <i class="fa fa-copy space-right" aria-hidden="true"></i>Copy </span>\n                      <span id="copyValueNotification_{{ $index }}" style="display: none; color: #23ae89; margin-left: 5px;" class="small">\n                        <i class="fa fa-check" aria-hidden="true"></i> copied\n                      </span>\n                    </div>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </rd-widget-body>\n      </rd-widget>\n    </div>\n  </div>\n\n  <div class="row" ng-if="ctrl.configuration.Used">\n    <div class="col-sm-12">\n      <kubernetes-integrated-applications-datatable\n        dataset="ctrl.configuration.Applications"\n        table-key="kubernetes.configurations.applications"\n        order-by="Name"\n        refresh-callback="ctrl.getApplications"\n        title-text="Applications using this configuration"\n        title-icon="fa-laptop-code"\n      >\n      </kubernetes-integrated-applications-datatable>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t),function(e){var a=n(2),r=n(4),i=n(5),s=n(1),o=n.n(s),l=n(113),c=n(26),d=n(97),u=n(93);function p(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){p(i,a,r,s,o,"next",e)}function o(e){p(i,a,r,s,o,"throw",e)}s(void 0)}))}}function g(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var f=function(){function t(e,n,a,r,i,s,o,l,d,u,p){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.$async=e,this.$state=n,this.clipboard=a,this.Notifications=r,this.LocalStorage=i,this.ModalService=l,this.KubernetesConfigurationService=s,this.KubernetesResourcePoolService=o,this.KubernetesApplicationService=d,this.KubernetesEventService=u,this.KubernetesConfigurationTypes=c.KubernetesConfigurationTypes,this.KubernetesNamespaceHelper=p,this.onInit=this.onInit.bind(this),this.getConfigurationAsync=this.getConfigurationAsync.bind(this),this.getEvents=this.getEvents.bind(this),this.getEventsAsync=this.getEventsAsync.bind(this),this.getApplications=this.getApplications.bind(this),this.getApplicationsAsync=this.getApplicationsAsync.bind(this),this.getConfigurationsAsync=this.getConfigurationsAsync.bind(this),this.updateConfiguration=this.updateConfiguration.bind(this),this.updateConfigurationAsync=this.updateConfigurationAsync.bind(this)}var n,s,o,p,f,h,v,b,y;return t.$inject=["$async","$state","clipboard","Notifications","LocalStorage","KubernetesConfigurationService","KubernetesResourcePoolService","ModalService","KubernetesApplicationService","KubernetesEventService","KubernetesNamespaceHelper"],n=t,(s=[{key:"isSystemNamespace",value:function(){return this.KubernetesNamespaceHelper.isSystemNamespace(this.configuration.Namespace)}},{key:"selectTab",value:function(e){this.LocalStorage.storeActiveTab("configuration",e)}},{key:"showEditor",value:function(){this.state.showEditorTab=!0,this.selectTab(2)}},{key:"copyConfigurationValue",value:function(t){this.clipboard.copyText(this.formValues.Data[t].Value),e("#copyValueNotification_"+t).show().fadeOut(2500)}},{key:"isFormValid",value:function(){return this.formValues.IsSimple?this.formValues.Data.length>0&&this.state.isDataValid:this.state.isDataValid}},{key:"updateConfigurationAsync",value:(y=m(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.state.actionInProgress=!0,this.formValues.Type===this.configuration.Type&&this.formValues.ResourcePool.Namespace.Name===this.configuration.Namespace&&this.formValues.Name===this.configuration.Name){e.next=11;break}return e.next=5,this.KubernetesConfigurationService.create(this.formValues);case 5:return e.next=7,this.KubernetesConfigurationService.delete(this.configuration);case 7:this.Notifications.success("Configuration succesfully updated"),this.$state.go("kubernetes.configurations.configuration",{namespace:this.formValues.ResourcePool.Namespace.Name,name:this.formValues.Name},{reload:!0}),e.next=15;break;case 11:return e.next=13,this.KubernetesConfigurationService.update(this.formValues,this.configuration);case 13:this.Notifications.success("Configuration succesfully updated"),this.$state.reload();case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to update configuration");case 20:return e.prev=20,this.state.actionInProgress=!1,e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[0,17,20,23]])}))),function(){return y.apply(this,arguments)})},{key:"updateConfiguration",value:function(){var e=this;if(!this.configuration.Used)return this.$async(this.updateConfigurationAsync);var t=this.configuration.Applications.length>1?"s":"";this.ModalService.confirmUpdate("The changes will be propagated to ".concat(this.configuration.Applications.length," running application").concat(t,". "),(function(t){if(t)return e.$async(e.updateConfigurationAsync)}))}},{key:"getConfigurationAsync",value:(b=m(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state.configurationLoading=!0,t=this.$transition$.params().name,n=this.$transition$.params().namespace,e.next=6,this.KubernetesConfigurationService.get(n,t);case 6:this.configuration=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve configuration");case 12:return e.prev=12,this.state.configurationLoading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[0,9,12,15]])}))),function(){return b.apply(this,arguments)})},{key:"getConfiguration",value:function(){return this.$async(this.getConfigurationAsync)}},{key:"getApplicationsAsync",value:(v=m(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state.applicationsLoading=!0,e.next=4,this.KubernetesApplicationService.get(t);case 4:n=e.sent,this.configuration.Applications=d.default.getUsingApplications(this.configuration,n),d.default.setConfigurationUsed(this.configuration),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve applications");case 12:return e.prev=12,this.state.applicationsLoading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[0,9,12,15]])}))),function(e){return v.apply(this,arguments)})},{key:"getApplications",value:function(e){return this.$async(this.getApplicationsAsync,e)}},{key:"hasEventWarnings",value:function(){return this.state.eventWarningCount}},{key:"getEventsAsync",value:(h=m(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state.eventsLoading=!0,e.next=4,this.KubernetesEventService.get(t);case 4:this.events=e.sent,this.events=Object(i.a)(this.events,(function(e){return e.Involved.uid===n.configuration.Id})),this.state.eventWarningCount=u.default.warningCount(this.events),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),this.Notifications("Failure",e.t0,"Unable to retrieve events");case 12:return e.prev=12,this.state.eventsLoading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[0,9,12,15]])}))),function(e){return h.apply(this,arguments)})},{key:"getEvents",value:function(e){return this.$async(this.getEventsAsync,e)}},{key:"getConfigurationsAsync",value:(f=m(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesConfigurationService.get();case 3:this.configurations=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve configurations");case 9:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(){return f.apply(this,arguments)})},{key:"getConfigurations",value:function(){return this.$async(this.getConfigurationsAsync)}},{key:"onInit",value:(p=m(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state={actionInProgress:!1,configurationLoading:!0,applicationsLoading:!0,eventsLoading:!0,showEditorTab:!1,viewReady:!1,eventWarningCount:0,activeTab:0,currentName:this.$state.$current.name,isDataValid:!0},this.state.activeTab=this.LocalStorage.getActiveTab("configuration"),this.formValues=new l.KubernetesConfigurationFormValues,e.next=6,this.KubernetesResourcePoolService.get();case 6:return this.resourcePools=e.sent,e.next=9,this.getConfiguration();case 9:return e.next=11,this.getApplications(this.configuration.Namespace);case 11:return e.next=13,this.getEvents(this.configuration.Namespace);case 13:return this.formValues.ResourcePool=Object(r.a)(this.resourcePools,(function(e){return e.Namespace.Name===t.configuration.Namespace})),this.formValues.Id=this.configuration.Id,this.formValues.Name=this.configuration.Name,this.formValues.Type=this.configuration.Type,this.formValues.Data=Object(a.a)(this.configuration.Data,(function(e,n){t.configuration.Type===c.KubernetesConfigurationTypes.SECRET&&(e=atob(e)),t.formValues.DataYaml+=n+": "+e+"\n";var a=new l.KubernetesConfigurationFormValuesDataEntry;return a.Key=n,a.Value=e,a})),e.next=20,this.getConfigurations();case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to load view data");case 25:return e.prev=25,this.state.viewReady=!0,e.finish(25);case 28:case"end":return e.stop()}}),e,this,[[0,22,25,28]])}))),function(){return p.apply(this,arguments)})},{key:"$onInit",value:function(){return this.$async(this.onInit)}},{key:"$onDestroy",value:function(){this.state.currentName!==this.$state.$current.name&&this.LocalStorage.storeActiveTab("configuration",0)}}])&&g(n.prototype,s),o&&g(n,o),t}();t.default=f,o.a.module("portainer.kubernetes").controller("KubernetesConfigurationController",f)}.call(this,n(45))},function(e,t,n){"use strict";n.r(t);var a=n(5),r=n(20),i=n(456),s=n(4),o=n(10),l=n(2),c=n(7),d=n(1),u=n.n(d),p=n(211),m=n(18),g=n(147),f=n(48),h=n(59);function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function y(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){y(i,a,r,s,o,"next",e)}function o(e){y(i,a,r,s,o,"throw",e)}s(void 0)}))}}function w(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var k=function(){function e(t,n,a,r,i,s,o,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.$state=n,this.$stateParams=a,this.Notifications=r,this.KubernetesStorageService=i,this.EndpointService=s,this.EndpointProvider=o,this.ModalService=l,this.IngressClassTypes=h.KubernetesIngressClassTypes,this.onInit=this.onInit.bind(this),this.configureAsync=this.configureAsync.bind(this)}var t,n,d,b,y;return e.$inject=["$async","$state","$stateParams","Notifications","KubernetesStorageService","EndpointService","EndpointProvider","ModalService"],t=e,(n=[{key:"storageClassAvailable",value:function(){return this.StorageClasses&&this.StorageClasses.length>0}},{key:"hasValidStorageConfiguration",value:function(){var e=!0;return Object(c.a)(this.StorageClasses,(function(t){t.selected&&0===t.AccessModes.length&&(e=!1)})),e}},{key:"addIngressClass",value:function(){this.formValues.IngressClasses.push(new g.KubernetesIngressClass),this.onChangeIngressClass()}},{key:"restoreIngressClass",value:function(e){this.formValues.IngressClasses[e].NeedsDeletion=!1,this.onChangeIngressClass()}},{key:"removeIngressClass",value:function(e){this.formValues.IngressClasses[e].IsNew?this.formValues.IngressClasses.splice(e,1):this.formValues.IngressClasses[e].NeedsDeletion=!0,this.onChangeIngressClass()}},{key:"onChangeIngressClass",value:function(){var e=this.state.duplicates.ingressClasses,t=Object(l.a)(this.formValues.IngressClasses,(function(e){return e.NeedsDeletion?void 0:e.Name})),n=f.default.getDuplicates(t);e.refs=n,e.hasDuplicates=Object.keys(n).length>0}},{key:"onChangeIngressClassName",value:function(e){var t=this.formValues.IngressClasses[e];Object(o.a)(t.Name,h.KubernetesIngressClassTypes.NGINX)?t.Type=h.KubernetesIngressClassTypes.NGINX:Object(o.a)(t.Name,h.KubernetesIngressClassTypes.TRAEFIK)&&(t.Type=h.KubernetesIngressClassTypes.TRAEFIK),this.onChangeIngressClass()}},{key:"hasTraefikIngress",value:function(){return Object(s.a)(this.formValues.IngressClasses,{Type:this.IngressClassTypes.TRAEFIK})}},{key:"assignFormValuesToEndpoint",value:function(e,t,n){e.Kubernetes.Configuration.StorageClasses=t,e.Kubernetes.Configuration.UseLoadBalancer=this.formValues.UseLoadBalancer,e.Kubernetes.Configuration.UseServerMetrics=this.formValues.UseServerMetrics,e.Kubernetes.Configuration.IngressClasses=n}},{key:"transformFormValues",value:function(){var e=Object(l.a)(this.StorageClasses,(function(e){if(e.selected){var t=new p.KubernetesStorageClass;return t.Name=e.Name,t.AccessModes=Object(l.a)(e.AccessModes,"Name"),t.Provisioner=e.Provisioner,t.AllowVolumeExpansion=e.AllowVolumeExpansion,t}}));Object(i.a)(e,void 0);var t=Object(r.a)(Object(l.a)(this.formValues.IngressClasses,(function(e){return e.NeedsDeletion?void 0:e})),void 0);return Object(i.a)(t,void 0),[e,t]}},{key:"configureAsync",value:(y=x(regeneratorRuntime.mark((function e(){var t,n,a,r,i,o,c,d=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state.actionInProgress=!0,t=this.transformFormValues(),n=v(t,2),a=n[0],r=n[1],this.assignFormValuesToEndpoint(this.endpoint,a,r),e.next=6,this.EndpointService.updateEndpoint(this.endpoint.Id,this.endpoint);case 6:return i=Object(l.a)(a,(function(e){var t=Object(s.a)(d.oldStorageClasses,{Name:e.Name});if(t)return d.KubernetesStorageService.patch(d.state.endpointId,t,e)})),e.next=9,Promise.all(i);case 9:o=this.EndpointProvider.endpoints(),(c=Object(s.a)(o,(function(e){return e.Id===d.endpoint.Id})))&&(this.assignFormValuesToEndpoint(c,a,r),this.EndpointProvider.setEndpoints(o)),this.Notifications.success("Configuration successfully applied"),this.$state.go("portainer.home"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to apply configuration");case 19:return e.prev=19,this.state.actionInProgress=!1,e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[0,16,19,22]])}))),function(){return y.apply(this,arguments)})},{key:"configure",value:function(){var e=this;if(!Object(a.a)(this.formValues.IngressClasses,{NeedsDeletion:!0}).length)return this.$async(this.configureAsync);this.ModalService.confirmUpdate("Removing ingress controllers will make them unavailable for future use.<br/>Existing resources linked to these ingress controllers will continue to live in cluster but you will not be able to remove them from Portainer.<br/><br/>Do you wish to continue?",(function(t){if(t)return e.$async(e.configureAsync)}))}},{key:"onInit",value:(b=x(regeneratorRuntime.mark((function e(){var t,n,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state={actionInProgress:!1,displayConfigureClassPanel:{},viewReady:!1,endpointId:this.$stateParams.id,duplicates:{ingressClasses:new m.KubernetesFormValueDuplicate}},this.formValues={UseLoadBalancer:!1,UseServerMetrics:!1,IngressClasses:[]},e.prev=2,e.next=5,Promise.all([this.KubernetesStorageService.get(this.state.endpointId),this.EndpointService.endpoint(this.state.endpointId)]);case 5:t=e.sent,n=v(t,2),this.StorageClasses=n[0],this.endpoint=n[1],Object(c.a)(this.StorageClasses,(function(e){e.availableAccessModes=new p.KubernetesStorageClassAccessPolicies;var t=Object(s.a)(a.endpoint.Kubernetes.Configuration.StorageClasses,(function(t){return t.Name===e.Name}));t&&(e.selected=!0,Object(c.a)(t.AccessModes,(function(t){var n=Object(s.a)(e.availableAccessModes,{Name:t});n&&(n.selected=!0)})))})),this.oldStorageClasses=u.a.copy(this.StorageClasses),this.formValues.UseLoadBalancer=this.endpoint.Kubernetes.Configuration.UseLoadBalancer,this.formValues.UseServerMetrics=this.endpoint.Kubernetes.Configuration.UseServerMetrics,this.formValues.IngressClasses=Object(l.a)(this.endpoint.Kubernetes.Configuration.IngressClasses,(function(e){return e.IsNew=!1,e.NeedsDeletion=!1,e})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),this.Notifications.error("",e.t0,"Unable to retrieve endpoint configuration");case 19:return e.prev=19,this.state.viewReady=!0,e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[2,16,19,22]])}))),function(){return b.apply(this,arguments)})},{key:"$onInit",value:function(){return this.$async(this.onInit)}}])&&w(t.prototype,n),d&&w(t,d),e}();t.default=k,u.a.module("portainer.kubernetes").controller("KubernetesConfigureController",k)},function(e,t,n){var a=n(1430);angular.module("portainer.kubernetes").component("kubernetesDashboardView",{templateUrl:a,controller:"KubernetesDashboardController",controllerAs:"ctrl"})},function(e,t){var n="app/kubernetes/views/dashboard/dashboard.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<kubernetes-view-header title="Dashboard" state="kubernetes.dashboard" view-ready="ctrl.state.viewReady">\n  Endpoint summary\n</kubernetes-view-header>\n\n<kubernetes-view-loading view-ready="ctrl.state.viewReady"></kubernetes-view-loading>\n\n<div ng-if="ctrl.state.viewReady">\n  <div class="row" ng-if="ctrl.endpoint">\n    <div class="col-sm-12">\n      <rd-widget>\n        <rd-widget-header icon="fa-tachometer-alt" title-text=">"></rd-widget-header>\n        <rd-widget-body classes="no-padding">\n          <table class="table">\n            <tbody>\n              <tr>\n                <td>Endpoint</td>\n                <td>\n                  {{ ctrl.endpoint.Name }}\n                </td>\n              </tr>\n              <tr>\n                <td>URL</td>\n                <td>{{ ctrl.endpoint.URL | stripprotocol }}</td>\n              </tr>\n              <tr>\n                <td> </td>\n                <td>{{ ctrl.endpointTags }}</td>\n              </tr>\n            </tbody>\n          </table>\n        </rd-widget-body>\n      </rd-widget>\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="col-xs-12 col-md-6" ng-if="ctrl.pools">\n      <a ui-sref="kubernetes.resourcePools">\n        <rd-widget>\n          <rd-widget-body>\n            <div class="widget-icon blue pull-left">\n              <i class="fa fa-layer-group"></i>\n            </div>\n            <div class="title">{{ ctrl.pools.length }}</div>\n            <div class="comment">{{ ctrl.pools.length === 1 ? \'Resource pool\' : \'Resource pools\' }}</div>\n          </rd-widget-body>\n        </rd-widget>\n      </a>\n    </div>\n    <div class="col-xs-12 col-md-6" ng-if="ctrl.applications">\n      <a ui-sref="kubernetes.applications">\n        <rd-widget>\n          <rd-widget-body>\n            <div class="widget-icon blue pull-left">\n              <i class="fa fa-laptop-code"></i>\n            </div>\n            <div class="title">{{ ctrl.applications.length }}</div>\n            <div class="comment">{{ ctrl.applications.length === 1 ? \'Application\' : \'Applications\' }}</div>\n          </rd-widget-body>\n        </rd-widget>\n      </a>\n    </div>\n    <div class="col-xs-12 col-md-6" ng-if="ctrl.configurations">\n      <a ui-sref="kubernetes.configurations">\n        <rd-widget>\n          <rd-widget-body>\n            <div class="widget-icon blue pull-left">\n              <i class="fa fa-file-code"></i>\n            </div>\n            <div class="title">{{ ctrl.configurations.length }}</div>\n            <div class="comment">{{ ctrl.configurations.length === 1 ? \'Configuration\' : \'Configurations\' }}</div>\n          </rd-widget-body>\n        </rd-widget>\n      </a>\n    </div>\n    <div class="col-xs-12 col-md-6" ng-if="ctrl.volumes">\n      <a ui-sref="kubernetes.volumes">\n        <rd-widget>\n          <rd-widget-body>\n            <div class="widget-icon blue pull-left">\n              <i class="fa fa-database"></i>\n            </div>\n            <div class="title">{{ ctrl.volumes.length }}</div>\n            <div class="comment">{{ ctrl.volumes.length === 1 ? \'Volume\' : \'Volumes\' }}</div>\n          </rd-widget-body>\n        </rd-widget>\n      </a>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(5),i=n(95),s=n(1),o=n.n(s),l=n(97);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function u(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){u(i,a,r,s,o,"next",e)}function o(e){u(i,a,r,s,o,"throw",e)}s(void 0)}))}}function m(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var g=function(){function e(t,n,a,r,i,s,o,l,c,d,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.Notifications=n,this.EndpointService=a,this.EndpointProvider=r,this.KubernetesResourcePoolService=i,this.KubernetesApplicationService=s,this.KubernetesConfigurationService=o,this.KubernetesVolumeService=l,this.KubernetesNamespaceHelper=c,this.Authentication=d,this.TagService=u,this.onInit=this.onInit.bind(this),this.getAll=this.getAll.bind(this),this.getAllAsync=this.getAllAsync.bind(this)}var t,n,s,o,d;return e.$inject=["$async","Notifications","EndpointService","EndpointProvider","KubernetesResourcePoolService","KubernetesApplicationService","KubernetesConfigurationService","KubernetesVolumeService","KubernetesNamespaceHelper","Authentication","TagService"],t=e,(n=[{key:"getAllAsync",value:(d=p(regeneratorRuntime.mark((function e(){var t,n,s,o,d,u,p,m,g,f,h=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Authentication.isAdmin(),e.prev=1,n=this.EndpointProvider.endpointID(),e.next=5,Promise.all([this.EndpointService.endpoint(n),this.KubernetesResourcePoolService.get(),this.KubernetesApplicationService.get(),this.KubernetesConfigurationService.get(),this.KubernetesVolumeService.get(),this.TagService.tags()]);case 5:s=e.sent,o=c(s,6),d=o[0],u=o[1],p=o[2],m=o[3],g=o[4],f=o[5],this.endpoint=d,this.applications=p,this.volumes=g,this.endpointTags=this.endpoint.TagIds.length?Object(i.a)(Object(r.a)(Object(a.a)(this.endpoint.TagIds,(function(e){var t=f.find((function(t){return t.Id===e}));return t?t.Name:""})),Boolean),", "):"-",t?(this.pools=u,this.configurations=m):(this.pools=Object(r.a)(u,(function(e){return!h.KubernetesNamespaceHelper.isSystemNamespace(e.Namespace.Name)})),this.configurations=Object(r.a)(m,(function(e){return!l.default.isSystemToken(e)}))),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),this.Notifications.error("",e.t0,"Unable to load dashboard data");case 23:case"end":return e.stop()}}),e,this,[[1,20]])}))),function(){return d.apply(this,arguments)})},{key:"getAll",value:function(){return this.$async(this.getAllAsync)}},{key:"onInit",value:(o=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state={viewReady:!1},e.next=3,this.getAll();case 3:this.state.viewReady=!0;case 4:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"$onInit",value:function(){return this.$async(this.onInit)}}])&&m(t.prototype,n),s&&m(t,s),e}();t.default=g,o.a.module("portainer.kubernetes").controller("KubernetesDashboardController",g)},function(e,t,n){var a=n(1433);angular.module("portainer.kubernetes").component("kubernetesDeployView",{templateUrl:a,controller:"KubernetesDeployController",controllerAs:"ctrl"})},function(e,t){var n="app/kubernetes/views/deploy/deploy.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<kubernetes-view-header title="Advanced deployment" state="kubernetes.deploy" view-ready="ctrl.state.viewReady">\n  Deploy Kubernetes resources\n</kubernetes-view-header>\n\n<kubernetes-view-loading view-ready="ctrl.state.viewReady"></kubernetes-view-loading>\n\n<div ng-if="ctrl.state.viewReady">\n  <kubernetes-feedback-panel></kubernetes-feedback-panel>\n\n  <div class="row">\n    <div class="col-sm-12">\n      <rd-widget>\n        <rd-widget-body>\n          <uib-tabset active="ctrl.state.activeTab" justified="true" type="pills">\n            <uib-tab index="0">\n              <uib-tab-heading> <i class="fa fa-code space-right" aria-hidden="true"></i> Deploy </uib-tab-heading>\n\n              <form class="form-horizontal" style="margin-top: 20px;">\n                <div class="form-group">\n                  <label for="target_node" class="col-lg-1 col-sm-2 control-label text-left">Resource pool</label>\n                  <div class="col-lg-11 col-sm-10">\n                    <select class="form-control" ng-model="ctrl.formValues.Namespace" ng-options="namespace.Name as namespace.Name for namespace in ctrl.namespaces"></select>\n                  </div>\n                </div>\n                \x3c!-- deploy-type --\x3e\n                <div class="col-sm-12 form-section-title">\n                  Deployment type\n                </div>\n                <div class="form-group"></div>\n                <div class="form-group" style="margin-bottom: 0;">\n                  <div class="boxselector_wrapper">\n                    <div>\n                      <input type="radio" id="method_kubernetes" ng-model="ctrl.state.DeployType" ng-value="ctrl.ManifestDeployTypes.KUBERNETES" />\n                      <label for="method_kubernetes">\n                        <div class="boxselector_header">\n                          <i class="fa fa-cubes" aria-hidden="true" style="margin-right: 2px;"></i>\n                          Kubernetes\n                        </div>\n                        <p>Kubernetes manifest format</p>\n                      </label>\n                    </div>\n                    <div>\n                      <input type="radio" id="method_compose" ng-model="ctrl.state.DeployType" ng-value="ctrl.ManifestDeployTypes.COMPOSE" />\n                      <label for="method_compose">\n                        <div class="boxselector_header">\n                          <i class="fab fa-docker" aria-hidden="true" style="margin-right: 2px;"></i>\n                          Compose\n                        </div>\n                        <p>docker-compose format</p>\n                      </label>\n                    </div>\n                  </div>\n                </div>\n                \x3c!-- !deploy-type --\x3e\n                \x3c!-- editor --\x3e\n                <div class="col-sm-12 form-section-title">\n                  \n                </div>\n                <div class="form-group">\n                  <span class="col-sm-12 text-muted small" ng-show="ctrl.state.DeployType === ctrl.ManifestDeployTypes.COMPOSE">\n                    <p>\n                      <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                      Portainer uses <a href="https://kompose.io/" target="_blank">Kompose</a> to convert your Compose manifest to a Kubernetes compliant manifest. Be wary that not\n                      all the Compose format options are supported by Kompose at the moment.\n                    </p>\n                    <p>\n                      You can get more information about Compose file format in the\n                      <a href="https://docs.docker.com/compose/compose-file/" target="_blank"></a>.\n                    </p>\n                  </span>\n                  <span class="col-sm-12 text-muted small" ng-show="ctrl.state.DeployType === ctrl.ManifestDeployTypes.KUBERNETES">\n                    <p>\n                      <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                      This feature allows you to deploy any kind of Kubernetes resource in this environment (Deployment, Secret, ConfigMap...).\n                    </p>\n                    <p>\n                      You can get more information about Kubernetes file format in the\n                      <a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/kubernetes-objects/" target="_blank"></a>.\n                    </p>\n                  </span>\n                </div>\n                <div class="form-group">\n                  <div class="col-sm-12">\n                    <code-editor\n                      identifier="kubernetes-deploy-editor"\n                      placeholder="# "\n                      yml="false"\n                      on-change="(ctrl.editorUpdate)"\n                    ></code-editor>\n                  </div>\n                </div>\n                \x3c!-- !editor --\x3e\n                \x3c!-- actions --\x3e\n                <div class="col-sm-12 form-section-title">\n                  \n                </div>\n                <div class="form-group">\n                  <div class="col-sm-12">\n                    <button type="button" class="btn btn-primary btn-sm" ng-disabled="ctrl.disableDeploy()" ng-click="ctrl.deploy()" button-spinner="ctrl.state.actionInProgress">\n                      <span ng-hide="ctrl.state.actionInProgress">Deploy</span>\n                      <span ng-show="ctrl.state.actionInProgress">...</span>\n                    </button>\n                  </div>\n                </div>\n                \x3c!-- !actions --\x3e\n              </form>\n            </uib-tab>\n\n            <uib-tab index="1" disable="ctrl.state.tabLogsDisabled">\n              <uib-tab-heading> <i class="fa fa-file space-right" aria-hidden="true"></i> Logs </uib-tab-heading>\n              <form class="form-horizontal" style="margin-top: 20px;">\n                <div class="form-group" ng-if="ctrl.state.activeTab === 1">\n                  <div class="col-sm-12">\n                    <code-editor identifier="kubernetes-deploy-logs" read-only="true" yml="false" value="ctrl.errorLog"></code-editor>\n                  </div>\n                </div>\n              </form>\n            </uib-tab>\n          </uib-tabset>\n        </rd-widget-body>\n      </rd-widget>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(53),i=n(1),s=n.n(i),o=n(560),l=n.n(o),c=n(326);function d(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){d(i,a,r,s,o,"next",e)}function o(e){d(i,a,r,s,o,"throw",e)}s(void 0)}))}}function p(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var m=function(){function e(t,n,a,r,i,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.$state=n,this.Notifications=a,this.EndpointProvider=r,this.KubernetesResourcePoolService=i,this.StackService=s,this.onInit=this.onInit.bind(this),this.deployAsync=this.deployAsync.bind(this),this.editorUpdate=this.editorUpdate.bind(this),this.editorUpdateAsync=this.editorUpdateAsync.bind(this),this.getNamespacesAsync=this.getNamespacesAsync.bind(this)}var t,n,i,s,o,d,m;return e.$inject=["$async","$state","Notifications","EndpointProvider","KubernetesResourcePoolService","StackService"],t=e,(n=[{key:"disableDeploy",value:function(){return Object(r.a)(this.formValues.EditorContent)||Object(r.a)(this.formValues.Namespace)||this.state.actionInProgress}},{key:"editorUpdateAsync",value:(m=u(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.formValues.EditorContent=t.getValue();case 1:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"editorUpdate",value:function(e){return this.$async(this.editorUpdateAsync,e)}},{key:"displayErrorLog",value:function(e){this.errorLog=l()(e),this.state.tabLogsDisabled=!1,this.state.activeTab=1}},{key:"deployAsync",value:(d=u(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.errorLog="",this.state.actionInProgress=!0,e.prev=2,t=this.state.DeployType===this.ManifestDeployTypes.COMPOSE,e.next=6,this.StackService.kubernetesDeploy(this.endpointId,this.formValues.Namespace,this.formValues.EditorContent,t);case 6:this.Notifications.success("Manifest successfully deployed"),this.$state.go("kubernetes.applications"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),this.Notifications.error("Unable to deploy manifest",e.t0,"Unable to deploy resources"),this.displayErrorLog(e.t0.err.data.details);case 14:return e.prev=14,this.state.actionInProgress=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[2,10,14,17]])}))),function(){return d.apply(this,arguments)})},{key:"deploy",value:function(){return this.$async(this.deployAsync)}},{key:"getNamespacesAsync",value:(o=u(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesResourcePoolService.get();case 3:t=e.sent,this.namespaces=Object(a.a)(t,"Namespace"),this.formValues.Namespace=this.namespaces[0].Name,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to load resource pools data");case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return o.apply(this,arguments)})},{key:"getNamespaces",value:function(){return this.$async(this.getNamespacesAsync)}},{key:"onInit",value:(s=u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state={DeployType:c.KubernetesDeployManifestTypes.KUBERNETES,tabLogsDisabled:!0,activeTab:0,viewReady:!1},this.formValues={},this.ManifestDeployTypes=c.KubernetesDeployManifestTypes,this.endpointId=this.EndpointProvider.endpointID(),e.next=6,this.getNamespaces();case 6:this.state.viewReady=!0;case 7:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"$onInit",value:function(){return this.$async(this.onInit)}}])&&p(t.prototype,n),i&&p(t,i),e}();t.default=m,s.a.module("portainer.kubernetes").controller("KubernetesDeployController",m)},,function(e,t,n){var a=n(1437);angular.module("portainer.kubernetes").component("kubernetesResourcePoolAccessView",{templateUrl:a,controller:"KubernetesResourcePoolAccessController",controllerAs:"ctrl",bindings:{$transition$:"<"}})},function(e,t){var n="app/kubernetes/views/resource-pools/access/resourcePoolAccess.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<kubernetes-view-header title="" state="kubernetes.resourcePools.resourcePool.access" view-ready="ctrl.state.viewReady">\n  <a ui-sref="kubernetes.resourcePools">Resource pools</a> &gt;\n  <a ui-sref="kubernetes.resourcePools.resourcePool({id: ctrl.pool.Namespace.Name})">{{ ctrl.pool.Namespace.Name }}</a> &gt; Access management\n</kubernetes-view-header>\n\n<kubernetes-view-loading view-ready="ctrl.state.viewReady"></kubernetes-view-loading>\n\n<div ng-if="ctrl.state.viewReady">\n  <div class="row" ng-if="ctrl.pool">\n    <div class="col-sm-12">\n      <rd-widget>\n        <rd-widget-header icon="fa-plug" title-text="Resource pool"></rd-widget-header>\n        <rd-widget-body classes="no-padding">\n          <table class="table">\n            <tbody>\n              <tr>\n                <td></td>\n                <td>\n                  {{ ctrl.pool.Namespace.Name }}\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </rd-widget-body>\n      </rd-widget>\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="col-sm-12">\n      <rd-widget ng-if="ctrl.availableUsersAndTeams">\n        <rd-widget-header icon="fa-user-lock" title-text="Create access"></rd-widget-header>\n        <rd-widget-body>\n          <form class="form-horizontal">\n            <div class="form-group">\n              <label class="col-sm-3 col-lg-2 control-label text-left">\n                /\n              </label>\n              <div class="col-sm-9 col-lg-4">\n                <span class="small text-muted" ng-if="ctrl.availableUsersAndTeams.length === 0">\n                  No user nor team access has been set on the endpoint. Head over to the\n                  <a ui-sref="portainer.endpoints.endpoint.access({id: ctrl.endpointId})">endpoint access view</a> to manage them.\n                </span>\n                <span\n                  isteven-multi-select\n                  ng-if="ctrl.availableUsersAndTeams.length > 0"\n                  input-model="ctrl.availableUsersAndTeams"\n                  output-model="ctrl.formValues.multiselectOutput"\n                  button-label="icon \'-\' Name"\n                  item-label="icon \'-\' Name"\n                  tick-property="ticked"\n                  helper-elements="filter"\n                  search-property="Name"\n                  translation="{nothingSelected: \' and/or teams\', search: \'...\'}"\n                >\n                </span>\n              </div>\n            </div>\n\n            \x3c!-- actions --\x3e\n            <div class="form-group">\n              <div class="col-sm-12">\n                <button\n                  type="submit"\n                  class="btn btn-primary btn-sm"\n                  ng-disabled="(ctrl.availableUsersAndTeams | filter:{ticked:true}).length === 0 || ctrl.actionInProgress"\n                  ng-click="ctrl.authorizeAccess()"\n                  button-spinner="ctrl.actionInProgress"\n                >\n                  <span ng-hide="ctrl.state.actionInProgress"><i class="fa fa-plus" aria-hidden="true"></i> Create access</span>\n                  <span ng-show="ctrl.state.actionInProgress">Creating access...</span>\n                </button>\n              </div>\n            </div>\n            \x3c!-- !actions --\x3e\n          </form>\n        </rd-widget-body>\n      </rd-widget>\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="col-sm-12">\n      <access-datatable\n        ng-if="ctrl.authorizedUsersAndTeams"\n        title-text="Access"\n        title-icon="fa-user-lock"\n        table-key="kubernetes_resourcepool_access"\n        order-by="Name"\n        dataset="ctrl.authorizedUsersAndTeams"\n        remove-action="ctrl.unauthorizeAccess"\n      >\n      </access-datatable>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(23),r=n(20),i=n(5),s=n(1),o=n.n(s),l=n(67),c=n(98),d=n(244);function u(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function f(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){f(i,a,r,s,o,"next",e)}function o(e){f(i,a,r,s,o,"throw",e)}s(void 0)}))}}function v(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var b=function(){function e(t,n,a,r,i,s,o,l,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.$state=n,this.Notifications=a,this.KubernetesResourcePoolService=r,this.KubernetesConfigMapService=i,this.EndpointProvider=s,this.EndpointService=o,this.GroupService=l,this.AccessService=c,this.onInit=this.onInit.bind(this),this.authorizeAccessAsync=this.authorizeAccessAsync.bind(this),this.unauthorizeAccessAsync=this.unauthorizeAccessAsync.bind(this),this.unauthorizeAccess=this.unauthorizeAccess.bind(this)}var t,n,s,m,g,f;return e.$inject=["$async","$state","Notifications","KubernetesResourcePoolService","KubernetesConfigMapService","EndpointProvider","EndpointService","GroupService","AccessService"],t=e,(n=[{key:"initAccessConfigMap",value:function(e){return e.Name=l.KubernetesPortainerConfigMapConfigName,e.Namespace=l.KubernetesPortainerConfigMapNamespace,e.Data[l.KubernetesPortainerConfigMapAccessKey]={},e}},{key:"onInit",value:(f=h(regeneratorRuntime.mark((function e(){var t,n,a,s,o,m,g,f,h,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state={actionInProgress:!1,viewReady:!1},this.formValues={multiselectOutput:[]},this.endpointId=this.EndpointProvider.endpointID(),e.prev=3,t=this.$transition$.params().id,e.next=7,Promise.all([this.EndpointService.endpoint(this.endpointId),this.KubernetesResourcePoolService.get(t),this.KubernetesConfigMapService.get(l.KubernetesPortainerConfigMapNamespace,l.KubernetesPortainerConfigMapConfigName)]);case 7:return n=e.sent,a=p(n,3),s=a[0],o=a[1],m=a[2],e.next=14,this.GroupService.group(s.GroupId);case 14:return g=e.sent,f=[],e.next=18,this.AccessService.accesses(s,g,f);case 18:h=e.sent,this.pool=o,0===m.Id&&(m=this.initAccessConfigMap(m)),m=d.default.parseJSONData(m),this.authorizedUsersAndTeams=[],this.accessConfigMap=m,(v=m.Data[l.KubernetesPortainerConfigMapAccessKey][t])&&(this.authorizedUsersAndTeams=Object(i.a)(h.authorizedUsersAndTeams,(function(e){return e instanceof c.UserAccessViewModel&&v.UserAccessPolicies?void 0!==v.UserAccessPolicies[e.Id]:!!(e instanceof c.TeamAccessViewModel&&v.TeamAccessPolicies)&&void 0!==v.TeamAccessPolicies[e.Id]}))),this.availableUsersAndTeams=r.a.apply(void 0,[h.authorizedUsersAndTeams].concat(u(this.authorizedUsersAndTeams))),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(3),this.Notifications.error("",e.t0,"Unable to retrieve resource pool information");case 32:return e.prev=32,this.state.viewReady=!0,e.finish(32);case 35:case"end":return e.stop()}}),e,this,[[3,29,32,35]])}))),function(){return f.apply(this,arguments)})},{key:"$onInit",value:function(){return this.$async(this.onInit)}},{key:"authorizeAccessAsync",value:(g=h(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state.actionInProgress=!0,t=Object(a.a)(this.authorizedUsersAndTeams,this.formValues.multiselectOutput),n=d.default.modifiyNamespaceAccesses(o.a.copy(this.accessConfigMap),this.pool.Namespace.Name,t),e.next=6,this.KubernetesConfigMapService.update(n);case 6:this.Notifications.success("Access successfully"),this.$state.reload(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to create accesses");case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(){return g.apply(this,arguments)})},{key:"authorizeAccess",value:function(){return this.$async(this.authorizeAccessAsync)}},{key:"unauthorizeAccessAsync",value:(m=h(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state.actionInProgress=!0,n=r.a.apply(void 0,[this.authorizedUsersAndTeams].concat(u(t))),a=d.default.modifiyNamespaceAccesses(o.a.copy(this.accessConfigMap),this.pool.Namespace.Name,n),e.next=6,this.KubernetesConfigMapService.update(a);case 6:this.Notifications.success("Access successfully"),this.$state.reload(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),this.Notifications.error("",e.t0," accesses");case 13:return e.prev=13,this.state.actionInProgress=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[0,10,13,16]])}))),function(e){return m.apply(this,arguments)})},{key:"unauthorizeAccess",value:function(e){return this.$async(this.unauthorizeAccessAsync,e)}}])&&v(t.prototype,n),s&&v(t,s),e}();t.default=b,o.a.module("portainer.kubernetes").controller("KubernetesResourcePoolAccessController",b)},function(e,t,n){var a=n(1440);angular.module("portainer.kubernetes").component("kubernetesCreateResourcePoolView",{templateUrl:a,controller:"KubernetesCreateResourcePoolController",controllerAs:"ctrl"})},function(e,t){var n="app/kubernetes/views/resource-pools/create/createResourcePool.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<kubernetes-view-header title="" state="kubernetes.resourcePools.new" view-ready="ctrl.state.viewReady">\n  <a ui-sref="kubernetes.resourcePools">Resource pools</a> &gt; \n</kubernetes-view-header>\n\n<kubernetes-view-loading view-ready="ctrl.state.viewReady"></kubernetes-view-loading>\n\n<div ng-if="ctrl.state.viewReady">\n  <div class="row">\n    <div class="col-lg-12 col-md-12 col-xs-12">\n      <rd-widget>\n        <rd-widget-body>\n          <form class="form-horizontal" autocomplete="off" name="resourcePoolCreationForm">\n            \x3c!-- #region NAME INPUT --\x3e\n            <div class="form-group">\n              <label for="pool_name" class="col-sm-1 control-label text-left"></label>\n              <div class="col-sm-11">\n                <input\n                  type="text"\n                  class="form-control"\n                  name="pool_name"\n                  ng-model="ctrl.formValues.Name"\n                  ng-pattern="/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/"\n                  ng-change="ctrl.onChangeName()"\n                  placeholder="my-project"\n                  required\n                  auto-focus\n                />\n              </div>\n            </div>\n            <div class="form-group" ng-show="resourcePoolCreationForm.pool_name.$invalid || ctrl.state.isAlreadyExist">\n              <div class="col-sm-12 small text-warning">\n                <div ng-messages="resourcePoolCreationForm.pool_name.$error">\n                  <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n                  <p ng-message="pattern"\n                    ><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> , \'-\'  \'.\', \n                    </p\n                  >\n                </div>\n                <p ng-if="ctrl.state.isAlreadyExist"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> A resource pool with the same name already exists.</p>\n              </div>\n            </div>\n            \x3c!-- #endregion --\x3e\n\n            <div class="col-sm-12 form-section-title">\n              Quota\n            </div>\n            \x3c!-- #region QUOTA --\x3e\n            \x3c!-- quotas-switch --\x3e\n            <div class="form-group">\n              <div class="col-sm-12 small text-muted">\n                <p>\n                  <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                 Kubernetes\n                \n                </p>\n              </div>\n              <div class="col-sm-12">\n                <label class="control-label text-left">\n                  Resource assignment\n                </label>\n                <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="ctrl.formValues.HasQuota" /><i></i> </label>\n              </div>\n            </div>\n            <div class="form-group" ng-if="ctrl.formValues.HasQuota && !ctrl.isQuotaValid()">\n              <span class="col-sm-12 text-warning small">\n                <p> <i class="fa fa-exclamation-triangle" aria-hidden="true" style="margin-right: 2px;"></i> At least a single limit must be set for the quota to be valid. </p>\n              </span>\n            </div>\n            \x3c!-- !quotas-switch --\x3e\n            <div ng-if="ctrl.formValues.HasQuota">\n              <div class="col-sm-12 form-section-title">\n                Resource limits\n              </div>\n              <div>\n                \x3c!-- memory-limit-input --\x3e\n                <div class="form-group">\n                  <label for="memory-limit" class="col-sm-3 col-lg-2 control-label text-left" style="margin-top: 20px;">\n                    Memory\n                  </label>\n                  <div class="col-sm-3">\n                    <slider model="ctrl.formValues.MemoryLimit" floor="ctrl.defaults.MemoryLimit" ceil="ctrl.state.sliderMaxMemory" step="128" ng-if="ctrl.state.sliderMaxMemory">\n                    </slider>\n                  </div>\n                  <div class="col-sm-2">\n                    <input\n                      name="memory_limit"\n                      type="number"\n                      min="{{ ctrl.defaults.MemoryLimit }}"\n                      max="{{ ctrl.state.sliderMaxMemory }}"\n                      class="form-control"\n                      ng-model="ctrl.formValues.MemoryLimit"\n                      id="memory-limit"\n                      required\n                    />\n                  </div>\n                  <div class="col-sm-4">\n                    <p class="small text-muted" style="margin-top: 7px;">\n                      Maximum memory usage (<b>MB</b>)\n                    </p>\n                  </div>\n                </div>\n                <div class="form-group" ng-show="resourcePoolCreationForm.memory_limit.$invalid">\n                  <div class="col-sm-12 small text-warning">\n                    <div ng-messages="resourcePoolCreationForm.pool_name.$error">\n                      <p\n                        ><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Value must be between {{ ctrl.defaults.MemoryLimit }} and {{ ctrl.state.sliderMaxMemory }}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n                \x3c!-- !memory-limit-input --\x3e\n                \x3c!-- cpu-limit-input --\x3e\n                <div class="form-group">\n                  <label for="cpu-limit" class="col-sm-3 col-lg-2 control-label text-left" style="margin-top: 20px;">\n                    CPU\n                  </label>\n                  <div class="col-sm-5">\n                    <slider model="ctrl.formValues.CpuLimit" floor="ctrl.defaults.CpuLimit" ceil="ctrl.state.sliderMaxCpu" step="0.1" precision="2" ng-if="ctrl.state.sliderMaxCpu">\n                    </slider>\n                  </div>\n                  <div class="col-sm-4" style="margin-top: 20px;">\n                    <p class="small text-muted">\n                      CPU\n                    </p>\n                  </div>\n                </div>\n                \x3c!-- !cpu-limit-input --\x3e\n              </div>\n            </div>\n            \x3c!-- #endregion --\x3e\n\n            \x3c!-- #region LOAD-BALANCERS --\x3e\n            <div class="col-sm-12 form-section-title">\n              Load balancers\n            </div>\n\n            <div class="form-group">\n              <span class="col-sm-12 text-muted small">\n                <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                0\n                \n              </span>\n            </div>\n            <div class="form-group">\n              <div class="col-sm-12">\n                <label class="control-label text-left">\n                  Load Balancer quota\n                </label>\n                <label class="switch" style="margin-left: 20px;"> <input type="checkbox" disabled /><i></i> </label>\n                <span class="text-muted small" style="margin-left: 15px;">\n                  <i class="fa fa-user" aria-hidden="true"></i>\n                   <a href="https://www.portainer.io/business-upsell?from=k8s-resourcepool-lbquota" target="_blank">Portainer</a>.\n                </span>\n              </div>\n            </div>\n            \x3c!-- #endregion --\x3e\n\n            \x3c!-- #region STORAGES --\x3e\n            <div class="col-sm-12 form-section-title">\n              Storages\n            </div>\n\n            <div class="form-group">\n              <span class="col-sm-12 text-muted small">\n                <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                Quotas can be set on each storage option to prevent users from exceeding a specific threshold when deploying applications. You can set a quota to 0 to effectively\n                prevent the usage of a specific storage option inside this resource pool.\n              </span>\n            </div>\n            <div class="col-sm-12 form-section-title">\n              <i class="fa fa-route" aria-hidden="true" style="margin-right: 2px;"></i>\n              standard\n            </div>\n            <div class="form-group">\n              <div class="col-sm-12">\n                <label class="control-label text-left">\n                  Enable quota\n                </label>\n                <label class="switch" style="margin-left: 20px;"> <input type="checkbox" disabled /><i></i> </label>\n                <span class="text-muted small" style="margin-left: 15px;">\n                  <i class="fa fa-user" aria-hidden="true"></i>\n                  \n                  <a href="https://www.portainer.io/business-upsell?from=k8s-resourcepool-storagequota" target="_blank">Portainer</a>.\n                </span>\n              </div>\n            </div>\n            \x3c!-- #endregion --\x3e\n\n            <div ng-if="ctrl.state.canUseIngress">\n              <div class="col-sm-12 form-section-title">\n                Ingresses\n              </div>\n              \x3c!-- #region INGRESSES --\x3e\n              <div class="form-group" ng-if="ctrl.formValues.IngressClasses.length === 0">\n                <div class="col-sm-12 small text-muted">\n                  The ingress feature must be enabled in the\n                  <a ui-sref="portainer.endpoints.endpoint.kubernetesConfig({id: ctrl.endpoint.Id})">endpoint configuration view</a> to be able to register ingresses inside this\n                  resource pool.\n                </div>\n              </div>\n\n              <div class="form-group" ng-if="ctrl.formValues.IngressClasses.length > 0">\n                <div class="col-sm-12 small text-muted">\n                  <p>\n                    <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                    Enable and configure ingresses available to users when deploying applications.\n                  </p>\n                </div>\n              </div>\n\n              <div class="form-group" ng-repeat-start="ic in ctrl.formValues.IngressClasses">\n                <div class="text-muted col-sm-12" style="width: 100%;">\n                  <div style="border-bottom: 1px solid #cdcdcd; padding-bottom: 5px;">\n                    <i class="fa fa-route" aria-hidden="true" style="margin-right: 2px;"></i> {{ ic.IngressClass.Name }}\n                  </div>\n                </div>\n\n                <div class="col-sm-12" style="margin-top: 10px;">\n                  <label class="control-label text-left">\n                    Allow users to use this ingress\n                  </label>\n                  <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="ic.Selected" /><i></i> </label>\n                </div>\n              </div>\n\n              <div ng-if="ic.Selected">\n                <div class="form-group">\n                  <label class="control-label text-left col-sm-2">\n                    Host\n                    <portainer-tooltip\n                      position="bottom"\n                      message="Hostname associated to the ingress inside this resource pool. Users will be able to expose and access their applications over the ingress via this hostname."\n                    >\n                    </portainer-tooltip>\n                  </label>\n                  <div class="col-sm-10">\n                    <input class="form-control" name="ingress_host_{{ $index }}" ng-model="ic.Host" placeholder="host.com" ng-change="ctrl.onChangeIngressHostname()" required />\n                  </div>\n                </div>\n                <div class="form-group" ng-show="resourcePoolCreationForm[\'ingress_host_\' + $index].$invalid || ctrl.state.duplicates.ingressHosts.refs[$index] !== undefined">\n                  <div class="col-sm-12 small text-warning">\n                    <div ng-messages="resourcePoolCreationForm[\'ingress_host_\' + $index].$error">\n                      <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n                    </div>\n                    <p ng-if="ctrl.state.duplicates.ingressHosts.refs[$index] !== undefined">\n                      <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>\n                      This host is already used.\n                    </p>\n                  </div>\n                </div>\n\n                <div class="form-group" ng-if="ic.IngressClass.Type === ctrl.IngressClassTypes.NGINX">\n                  <div class="col-sm-12">\n                    <label class="control-label text-left">\n                      Redirect published routes to / in application\n                      <portainer-tooltip\n                        position="bottom"\n                        message="Enables the redirection of any route published via ingress to the root path of the application,  /path remaps to /"\n                      >\n                      </portainer-tooltip>\n                    </label>\n                    <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="ic.RewriteTarget" /><i></i> </label>\n                  </div>\n                </div>\n              </div>\n              <div ng-repeat-end class="form-group" ng-if="ic.Selected" style="margin-bottom: 20px;">\n                <div class="col-sm-12">\n                  <p>\n                    <a class="small interactive" ng-if="!ic.AdvancedConfig" ng-click="ic.AdvancedConfig = true">\n                      <i class="fa fa-plus space-right" aria-hidden="true"></i> \n                    </a>\n                    <a class="small interactive" ng-if="ic.AdvancedConfig" ng-click="ic.AdvancedConfig = false">\n                      <i class="fa fa-minus space-right" aria-hidden="true"></i> Hide configuration\n                    </a>\n                  </p>\n                </div>\n\n                <div class="col-sm-12 small text-muted" ng-if="ic.AdvancedConfig" style="margin-top: 5px;">\n                  <p>\n                    <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                    You can specify a list of annotations that will be associated to the ingress.\n                  </p>\n                </div>\n\n                <div class="col-sm-12" ng-if="ic.AdvancedConfig">\n                  <label class="control-label text-left">Annotations</label>\n                  <span class="label label-default interactive" style="margin-left: 10px;" ng-click="ctrl.addAnnotation(ic)">\n                    <i class="fa fa-plus-circle" aria-hidden="true"></i> add annotation\n                  </span>\n                </div>\n\n                <div class="col-sm-12 form-inline" style="margin-top: 10px;" ng-if="ic.AdvancedConfig">\n                  <div ng-repeat="annotation in ic.Annotations track by $index" style="margin-top: 2px;">\n                    <div class="input-group col-sm-5 input-group-sm">\n                      <span class="input-group-addon">Key</span>\n                      <input type="text" class="form-control" ng-model="annotation.Key" placeholder="nginx.ingress.kubernetes.io/rewrite-target" required />\n                    </div>\n                    <div class="input-group col-sm-5 input-group-sm">\n                      <span class="input-group-addon">Value</span>\n                      <input type="text" class="form-control" ng-model="annotation.Value" placeholder="/$1" required />\n                    </div>\n                    <div class="col-sm-1 input-group input-group-sm">\n                      <button class="btn btn-sm btn-danger" type="button" ng-click="ctrl.removeAnnotation(ic, $index)">\n                        <i class="fa fa-trash-alt" aria-hidden="true"></i>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              \x3c!-- #endregion --\x3e\n            </div>\n\n            <div class="col-sm-12 form-section-title">\n              \n            </div>\n            \x3c!-- #region ACTIONS --\x3e\n            <div class="form-group">\n              <div class="col-sm-12">\n                <button\n                  type="button"\n                  class="btn btn-primary btn-sm"\n                  ng-disabled="!resourcePoolCreationForm.$valid || ctrl.isCreateButtonDisabled()"\n                  ng-click="ctrl.createResourcePool()"\n                  button-spinner="ctrl.state.actionInProgress"\n                >\n                  <span ng-hide="ctrl.state.actionInProgress">Create resource pool</span>\n                  <span ng-show="ctrl.state.actionInProgress">Creation in progress...</span>\n                </button>\n              </div>\n            </div>\n\n            \x3c!-- #endregion --\x3e\n          </form>\n        </rd-widget-body>\n      </rd-widget>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(4),r=n(10),i=n(7),s=n(2),o=n(1),l=n.n(o),c=n(44),d=n.n(c),u=n(85),p=n(15),m=n(116),g=n(54),f=n(48),h=n(18),v=n(59);function b(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){b(i,a,r,s,o,"next",e)}function o(e){b(i,a,r,s,o,"throw",e)}s(void 0)}))}}function x(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var w=function(){function e(t,n,a,r,i,s,o,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.$state=n,this.Notifications=a,this.Authentication=o,this.EndpointProvider=l,this.KubernetesNodeService=r,this.KubernetesResourcePoolService=i,this.KubernetesIngressService=s,this.IngressClassTypes=v.KubernetesIngressClassTypes,this.onInit=this.onInit.bind(this),this.createResourcePoolAsync=this.createResourcePoolAsync.bind(this),this.getResourcePoolsAsync=this.getResourcePoolsAsync.bind(this),this.getIngressesAsync=this.getIngressesAsync.bind(this)}var t,n,o,l,c,b,w;return e.$inject=["$async","$state","Notifications","KubernetesNodeService","KubernetesResourcePoolService","KubernetesIngressService","Authentication","EndpointProvider"],t=e,(n=[{key:"onChangeIngressHostname",value:function(){var e=this.state.duplicates.ingressHosts,t=Object(s.a)(this.formValues.IngressClasses,"Host"),n=Object(s.a)(this.allIngresses,"Host"),a=f.default.getDuplicates(t);Object(i.a)(t,(function(e,t){Object(r.a)(n,e)&&void 0!==e&&(a[t]=e)})),e.refs=a,e.hasDuplicates=Object.keys(a).length>0}},{key:"addAnnotation",value:function(e){e.Annotations.push(new m.KubernetesResourcePoolIngressClassAnnotationFormValue)}},{key:"removeAnnotation",value:function(e,t){e.Annotations.splice(t,1)}},{key:"isCreateButtonDisabled",value:function(){return this.state.actionInProgress||this.formValues.HasQuota&&!this.isQuotaValid()||this.state.isAlreadyExist||this.state.duplicates.ingressHosts.hasDuplicates}},{key:"onChangeName",value:function(){var e=this;this.state.isAlreadyExist=void 0!==Object(a.a)(this.resourcePools,(function(t){return t.Namespace.Name===e.formValues.Name}))}},{key:"isQuotaValid",value:function(){return!(this.state.sliderMaxCpu<this.formValues.CpuLimit||this.state.sliderMaxMemory<this.formValues.MemoryLimit||0===this.formValues.CpuLimit&&0===this.formValues.MemoryLimit)}},{key:"checkDefaults",value:function(){this.formValues.CpuLimit<this.defaults.CpuLimit&&(this.formValues.CpuLimit=this.defaults.CpuLimit),this.formValues.MemoryLimit<p.default.megaBytesValue(this.defaults.MemoryLimit)&&(this.formValues.MemoryLimit=p.default.megaBytesValue(this.defaults.MemoryLimit))}},{key:"createResourcePoolAsync",value:(w=y(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.actionInProgress=!0,e.prev=1,this.checkDefaults(),t=this.Authentication.getUserDetails().username,this.formValues.Owner=t,e.next=7,this.KubernetesResourcePoolService.create(this.formValues);case 7:this.Notifications.success("Resource pool successfully",this.formValues.Name),this.$state.go("kubernetes.resourcePools"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),this.Notifications.error("",e.t0,"Unable to create resource pool");case 14:return e.prev=14,this.state.actionInProgress=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))),function(){return w.apply(this,arguments)})},{key:"createResourcePool",value:function(){return this.$async(this.createResourcePoolAsync)}},{key:"getIngressesAsync",value:(b=y(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.ingressesLoading=!0,e.prev=1,e.next=4,this.KubernetesIngressService.get();case 4:this.allIngresses=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),this.Notifications.error("",e.t0,"Unable to retrieve ingresses.");case 10:return e.prev=10,this.state.ingressesLoading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[1,7,10,13]])}))),function(){return b.apply(this,arguments)})},{key:"getIngresses",value:function(){return this.$async(this.getIngressesAsync)}},{key:"getResourcePoolsAsync",value:(c=y(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesResourcePoolService.get();case 3:this.resourcePools=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve resource pools");case 9:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(){return c.apply(this,arguments)})},{key:"getResourcePools",value:function(){return this.$async(this.getResourcePoolsAsync)}},{key:"onInit",value:(l=y(regeneratorRuntime.mark((function e(){var t,n,a,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.EndpointProvider.currentEndpoint(),this.endpoint=t,this.defaults=u.KubernetesResourceQuotaDefaults,this.formValues=new m.KubernetesResourcePoolFormValues(this.defaults),this.state={actionInProgress:!1,sliderMaxMemory:0,sliderMaxCpu:0,viewReady:!1,isAlreadyExist:!1,canUseIngress:t.Kubernetes.Configuration.IngressClasses.length,duplicates:{ingressHosts:new h.KubernetesFormValueDuplicate}},e.next=8,this.KubernetesNodeService.get();case 8:return n=e.sent,Object(i.a)(n,(function(e){r.state.sliderMaxMemory+=d()(e.Memory),r.state.sliderMaxCpu+=e.CPU})),this.state.sliderMaxMemory=p.default.megaBytesValue(this.state.sliderMaxMemory),e.next=13,this.getResourcePools();case 13:if(!this.state.canUseIngress){e.next=18;break}return e.next=16,this.getIngresses();case 16:a=t.Kubernetes.Configuration.IngressClasses,this.formValues.IngressClasses=g.KubernetesIngressConverter.ingressClassesToFormValues(a);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to load view data");case 23:return e.prev=23,this.state.viewReady=!0,e.finish(23);case 26:case"end":return e.stop()}}),e,this,[[0,20,23,26]])}))),function(){return l.apply(this,arguments)})},{key:"$onInit",value:function(){return this.$async(this.onInit)}}])&&x(t.prototype,n),o&&x(t,o),e}();t.default=w,l.a.module("portainer.kubernetes").controller("KubernetesCreateResourcePoolController",w)},function(e,t,n){"use strict";n.r(t);var a=n(7),r=n(5);angular.module("portainer.kubernetes").controller("KubernetesResourcePoolIngressesDatatableController",["$scope","$controller","DatatableService",function(e,t,n){angular.extend(this,t("GenericDatatableController",{$scope:e})),this.state=Object.assign(this.state,{expandedItems:[],expandAll:!1}),this.onSettingsRepeaterChange=function(){n.setDataTableSettings(this.tableKey,this.settings)},this.expandItem=function(e,t){this.itemCanExpand(e)&&(e.Expanded=t,t||(e.Highlighted=!1))},this.itemCanExpand=function(e){return e.Paths.length>0},this.hasExpandableItems=function(){var e=this;return Object(r.a)(this.state.filteredDataSet,(function(t){return e.itemCanExpand(t)})).length},this.expandAll=function(){var e=this;this.state.expandAll=!this.state.expandAll,Object(a.a)(this.state.filteredDataSet,(function(t){e.itemCanExpand(t)&&e.expandItem(t,e.state.expandAll)}))},this.$onInit=function(){this.setDefaults(),this.prepareTableFromDataset(),this.state.orderBy=this.orderBy;var e=n.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=n.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var a=n.getDataTableFilters(this.tableKey);null!==a&&(this.filters=a),this.filters&&this.filters.state&&(this.filters.state.open=!1);var r=n.getDataTableSettings(this.tableKey);null!==r&&(this.settings=r,this.settings.open=!1),this.onSettingsRepeaterChange()}}])},function(e,t,n){var a=n(1444);angular.module("portainer.kubernetes").component("kubernetesResourcePoolIngressesDatatable",{templateUrl:a,controller:"KubernetesResourcePoolIngressesDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",refreshCallback:"<"}})},function(e,t){var n="app/kubernetes/views/resource-pools/edit/components/ingresses-datatable/template.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n        <div class="settings">\n          <span class="setting" ng-class="{ \'setting-active\': $ctrl.settings.open }" uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.settings.open">\n            <span uib-dropdown-toggle><i class="fa fa-cog" aria-hidden="true"></i> Table settings</span>\n            <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n              <div class="tableMenu">\n                <div class="menuHeader">\n                  \n                </div>\n                <div class="menuContent">\n                  <div>\n                    <div class="md-checkbox">\n                      <input id="setting_auto_refresh" type="checkbox" ng-model="$ctrl.settings.repeater.autoRefresh" ng-change="$ctrl.onSettingsRepeaterChange()" />\n                      <label for="setting_auto_refresh"></label>\n                    </div>\n                    <div ng-if="$ctrl.settings.repeater.autoRefresh">\n                      <label for="settings_refresh_rate">\n                        \n                      </label>\n                      <select id="settings_refresh_rate" ng-model="$ctrl.settings.repeater.refreshRate" ng-change="$ctrl.onSettingsRepeaterChange()" class="small-select">\n                        <option value="10">10s</option>\n                        <option value="30">30s</option>\n                        <option value="60">1min</option>\n                        <option value="120">2min</option>\n                        <option value="300">5min</option>\n                      </select>\n                      <span>\n                        <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="margin-top: 7px; display: none;"></i>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.settings.open = false;"></a>\n                </div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <a ng-click="$ctrl.expandAll()" ng-if="$ctrl.hasExpandableItems()" style="margin-right: 5px;">\n                  <i ng-class="{ \'fas fa-angle-down\': $ctrl.state.expandAll, \'fas fa-angle-right\': !$ctrl.state.expandAll }" aria-hidden="true"></i>\n                </a>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  Ingress\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate-start="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit: $ctrl.tableKey))"\n              ng-class="{ active: item.Checked }"\n              ng-style="{ background: item.Highlighted ? \'#d5e8f3\' : \'\' }"\n              ng-click="$ctrl.expandItem(item, !item.Expanded)"\n              pagination-id="$ctrl.tableKey"\n            >\n              <td colspan="3">\n                <a ng-if="$ctrl.itemCanExpand(item)" style="margin-right: 5px;">\n                  <i ng-class="{ \'fas fa-angle-down\': item.Expanded, \'fas fa-angle-right\': !item.Expanded }" class="space-right" aria-hidden="true"></i> </a\n                >{{ item.Name }}\n              </td>\n            </tr>\n            <tr dir-paginate-end ng-show="item.Expanded" ng-repeat="path in item.Paths" ng-style="{ background: item.Highlighted ? \'#d5e8f3\' : \'#f5f5f5\' }">\n              <td>\n                <a style="margin-left: 15px;" ng-href="http://{{ path.Host ? path.Host : path.IP }}{{ path.Path }}" target="_blank">\n                  {{ path.Host ? path.Host : path.IP }}{{ path.Path }}\n                </a>\n                <span ng-if="path.ApplicationName !== \'-\'">\n                  <i class="fas fa-long-arrow-alt-right" style="margin: 2px;"></i>\n                  <a ui-sref="kubernetes.applications.application({ name: path.ApplicationName, namespace: item.Namespace })">{{ path.ApplicationName }}</a>\n                </span>\n                <span class="label label-warning image-tag label-margins" ng-if="path.ApplicationName === \'-\'">unused</span>\n              </td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="4" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="4" class="text-center text-muted">No ingresses available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5" pagination-id="$ctrl.tableKey"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(1446);angular.module("portainer.kubernetes").component("kubernetesResourcePoolView",{templateUrl:a,controller:"KubernetesResourcePoolController",controllerAs:"ctrl",bindings:{$transition$:"<"}})},function(e,t){var n="app/kubernetes/views/resource-pools/edit/resourcePool.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<kubernetes-view-header title="Resource pool details" state="kubernetes.resourcePools.resourcePool" view-ready="ctrl.state.viewReady">\n  <a ui-sref="kubernetes.resourcePools">Resource pools</a> &gt; {{ ctrl.pool.Namespace.Name }}\n</kubernetes-view-header>\n\n<kubernetes-view-loading view-ready="ctrl.state.viewReady"></kubernetes-view-loading>\n\n<div ng-if="ctrl.state.viewReady">\n  <div class="row">\n    <div class="col-sm-12">\n      <rd-widget>\n        <rd-widget-body classes="no-padding">\n          <uib-tabset active="ctrl.state.activeTab" justified="true" type="pills">\n            <uib-tab index="0" classes="btn-sm" select="ctrl.selectTab(0)">\n              <uib-tab-heading> <i class="fa fa-layer-group space-right" aria-hidden="true"></i> Resource pool </uib-tab-heading>\n              <form class="form-horizontal" autocomplete="off" name="resourcePoolEditForm" style="padding: 20px; margin-top: 10px;">\n                \x3c!-- name-input --\x3e\n                <div class="form-group">\n                  <label for="pool_name" class="col-sm-1 control-label text-left"></label>\n                  <div class="col-sm-11">\n                    <input type="text" class="form-control" name="pool_name" ng-model="ctrl.pool.Namespace.Name" disabled />\n                  </div>\n                </div>\n                \x3c!-- !name-input --\x3e\n                <div ng-if="ctrl.isAdmin && ctrl.isEditable" class="col-sm-12 form-section-title">Quota</div>\n                \x3c!-- quotas-switch --\x3e\n                <div ng-if="ctrl.isAdmin && ctrl.isEditable" class="form-group">\n                  <div class="col-sm-12">\n                    <label class="control-label text-left">\n                      Resource assignment\n                    </label>\n                    <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="ctrl.formValues.HasQuota" /><i></i> </label>\n                  </div>\n                </div>\n                <div class="form-group" ng-if="ctrl.formValues.HasQuota && ctrl.isAdmin && ctrl.isEditable && !ctrl.isQuotaValid()">\n                  <span class="col-sm-12 text-warning small">\n                    <p> <i class="fa fa-exclamation-triangle" aria-hidden="true" style="margin-right: 2px;"></i> At least a single limit must be set for the quota to be valid. </p>\n                  </span>\n                </div>\n                \x3c!-- !quotas-switch --\x3e\n                <div ng-if="ctrl.formValues.HasQuota && ctrl.isAdmin && ctrl.isEditable">\n                  <div class="col-sm-12 form-section-title">\n                    Resource limits\n                  </div>\n                  <div>\n                    \x3c!-- memory-limit-input --\x3e\n                    <div class="form-group">\n                      <label for="memory-limit" class="col-sm-3 col-lg-2 control-label text-left" style="margin-top: 20px;">\n                        \n                      </label>\n                      <div class="col-sm-3">\n                        <slider\n                          model="ctrl.formValues.MemoryLimit"\n                          floor="ctrl.defaults.MemoryLimit"\n                          ceil="ctrl.state.sliderMaxMemory"\n                          step="128"\n                          ng-if="ctrl.state.sliderMaxMemory"\n                        ></slider>\n                      </div>\n                      <div class="col-sm-2">\n                        <input\n                          name="memory_limit"\n                          type="number"\n                          min="{{ ctrl.defaults.MemoryLimit }}"\n                          max="{{ ctrl.state.sliderMaxMemory }}"\n                          class="form-control"\n                          ng-model="ctrl.formValues.MemoryLimit"\n                          id="memory-limit"\n                          required\n                        />\n                      </div>\n                      <div class="col-sm-4">\n                        <p class="small text-muted" style="margin-top: 7px;">\n                           (<b>MB</b>)\n                        </p>\n                      </div>\n                    </div>\n                    <div class="form-group" ng-show="resourcePoolEditForm.memory_limit.$invalid">\n                      <div class="col-sm-12 small text-warning">\n                        <div ng-messages="resourcePoolEditForm.pool_name.$error">\n                          <p\n                            ><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Value must be between {{ ctrl.defaults.MemoryLimit }} and\n                            {{ ctrl.state.sliderMaxMemory }}</p\n                          >\n                        </div>\n                      </div>\n                    </div>\n                    \x3c!-- !memory-limit-input --\x3e\n                    \x3c!-- cpu-limit-input --\x3e\n                    <div class="form-group">\n                      <label for="cpu-limit" class="col-sm-3 col-lg-2 control-label text-left" style="margin-top: 20px;">\n                        CPU \n                      </label>\n                      <div class="col-sm-5">\n                        <slider\n                          model="ctrl.formValues.CpuLimit"\n                          floor="ctrl.defaults.CpuLimit"\n                          ceil="ctrl.state.sliderMaxCpu"\n                          step="0.1"\n                          precision="2"\n                          ng-if="ctrl.state.sliderMaxCpu"\n                        ></slider>\n                      </div>\n                      <div class="col-sm-4" style="margin-top: 20px;">\n                        <p class="small text-muted">\n                          CPU\n                        </p>\n                      </div>\n                    </div>\n                    \x3c!-- !cpu-limit-input --\x3e\n                  </div>\n                </div>\n                <div ng-if="ctrl.formValues.HasQuota">\n                  <kubernetes-resource-reservation\n                    ng-if="ctrl.pool.Quota"\n                    description="Resource reservation represents the total amount of resource assigned to all the applications deployed inside this resource pool."\n                    cpu="ctrl.state.cpuUsed"\n                    memory="ctrl.state.memoryUsed"\n                    cpu-limit="ctrl.formValues.CpuLimit"\n                    memory-limit="ctrl.formValues.MemoryLimit"\n                  >\n                  </kubernetes-resource-reservation>\n                </div>\n                <div ng-if="ctrl.isAdmin && ctrl.isEditable && ctrl.state.canUseIngress">\n                  <div class="col-sm-12 form-section-title">\n                    Ingresses\n                  </div>\n                  \x3c!-- #region INGRESSES --\x3e\n                  <div class="form-group" ng-if="ctrl.formValues.IngressClasses.length === 0">\n                    <div class="col-sm-12 small text-muted">\n                      The ingress feature must be enabled in the\n                      <a ui-sref="portainer.endpoints.endpoint.kubernetesConfig({id: ctrl.endpoint.Id})">endpoint configuration view</a> to be able to register ingresses inside\n                      this resource pool.\n                    </div>\n                  </div>\n\n                  <div class="form-group" ng-if="ctrl.formValues.IngressClasses.length > 0">\n                    <div class="col-sm-12 small text-muted">\n                      <p>\n                        <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                        Enable and configure ingresses available to users when deploying applications.\n                      </p>\n                    </div>\n                  </div>\n\n                  <div class="form-group" ng-repeat-start="ic in ctrl.formValues.IngressClasses">\n                    <div class="text-muted col-sm-12" style="width: 100%;">\n                      <div style="border-bottom: 1px solid #cdcdcd; padding-bottom: 5px;">\n                        <i class="fa fa-route" aria-hidden="true" style="margin-right: 2px;"></i> {{ ic.IngressClass.Name }}\n                      </div>\n                    </div>\n\n                    <div class="col-sm-12" style="margin-top: 10px;">\n                      <label class="control-label text-left">\n                        Allow users to use this ingress\n                      </label>\n                      <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="ic.Selected" /><i></i> </label>\n                    </div>\n                  </div>\n\n                  <div ng-if="ic.Selected">\n                    <div class="form-group">\n                      <label class="control-label text-left col-sm-2">\n                        Host\n                        <portainer-tooltip\n                          position="bottom"\n                          message="Hostname associated to the ingress inside this resource pool. Users will be able to expose and access their applications over the ingress via this hostname."\n                        >\n                        </portainer-tooltip>\n                      </label>\n                      <div class="col-sm-10">\n                        <input\n                          class="form-control"\n                          name="ingress_host_{{ $index }}"\n                          ng-model="ic.Host"\n                          placeholder="host.com"\n                          ng-change="ctrl.onChangeIngressHostname()"\n                          required\n                        />\n                      </div>\n                    </div>\n                    <div class="form-group" ng-show="resourcePoolEditForm[\'ingress_host_\' + $index].$invalid || ctrl.state.duplicates.ingressHosts.refs[$index] !== undefined">\n                      <div class="col-sm-12 small text-warning">\n                        <div ng-messages="resourcePoolEditForm[\'ingress_host_\' + $index].$error">\n                          <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n                        </div>\n                        <p ng-if="ctrl.state.duplicates.ingressHosts.refs[$index] !== undefined">\n                          <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>\n                          This host is already used.\n                        </p>\n                      </div>\n                    </div>\n\n                    <div class="form-group" ng-if="ic.IngressClass.Type === ctrl.IngressClassTypes.NGINX">\n                      <div class="col-sm-12">\n                        <label class="control-label text-left">\n                          Redirect published routes to / in application\n                          <portainer-tooltip\n                            position="bottom"\n                            message="Enables the redirection of any route published via ingress to the root path of the application,  /path remaps to /"\n                          >\n                          </portainer-tooltip>\n                        </label>\n                        <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="ic.RewriteTarget" /><i></i> </label>\n                      </div>\n                    </div>\n                  </div>\n                  <div ng-repeat-end class="form-group" ng-if="ic.Selected" style="margin-bottom: 20px;">\n                    <div class="col-sm-12">\n                      <p>\n                        <a class="small interactive" ng-if="!ic.AdvancedConfig" ng-click="ic.AdvancedConfig = true">\n                          <i class="fa fa-plus space-right" aria-hidden="true"></i> \n                        </a>\n                        <a class="small interactive" ng-if="ic.AdvancedConfig" ng-click="ic.AdvancedConfig = false">\n                          <i class="fa fa-minus space-right" aria-hidden="true"></i> Hide configuration\n                        </a>\n                      </p>\n                    </div>\n\n                    <div class="col-sm-12 small text-muted" ng-if="ic.AdvancedConfig" style="margin-top: 5px;">\n                      <p>\n                        <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                        You can specify a list of annotations that will be associated to the ingress.\n                      </p>\n                    </div>\n\n                    <div class="col-sm-12" ng-if="ic.AdvancedConfig">\n                      <label class="control-label text-left">Annotations</label>\n                      <span class="label label-default interactive" style="margin-left: 10px;" ng-click="ctrl.addAnnotation(ic)">\n                        <i class="fa fa-plus-circle" aria-hidden="true"></i> add annotation\n                      </span>\n                    </div>\n\n                    <div class="col-sm-12 form-inline" style="margin-top: 10px;" ng-if="ic.AdvancedConfig">\n                      <div ng-repeat="annotation in ic.Annotations track by $index" style="margin-top: 2px;">\n                        <div class="input-group col-sm-5 input-group-sm">\n                          <span class="input-group-addon">Key</span>\n                          <input type="text" class="form-control" ng-model="annotation.Key" placeholder="nginx.ingress.kubernetes.io/rewrite-target" required />\n                        </div>\n                        <div class="input-group col-sm-5 input-group-sm">\n                          <span class="input-group-addon">Value</span>\n                          <input type="text" class="form-control" ng-model="annotation.Value" placeholder="/$1" required />\n                        </div>\n                        <div class="col-sm-1 input-group input-group-sm">\n                          <button class="btn btn-sm btn-danger" type="button" ng-click="ctrl.removeAnnotation(ic, $index)">\n                            <i class="fa fa-trash-alt" aria-hidden="true"></i>\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  \x3c!-- #endregion --\x3e\n                </div>\n                \x3c!-- #region LOAD-BALANCERS --\x3e\n                <div class="col-sm-12 form-section-title">\n                  Load balancers\n                </div>\n\n                <div class="form-group">\n                  <span class="col-sm-12 text-muted small">\n                    <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                    0\n                    \n                  </span>\n                </div>\n                <div class="form-group">\n                  <div class="col-sm-12">\n                    <label class="control-label text-left">\n                      Load Balancer quota\n                    </label>\n                    <label class="switch" style="margin-left: 20px;"> <input type="checkbox" disabled /><i></i> </label>\n                    <span class="text-muted small" style="margin-left: 15px;">\n                      <i class="fa fa-user" aria-hidden="true"></i>\n                       <a href="https://www.portainer.io/business-upsell?from=k8s-resourcepool-lbquota" target="_blank">Portainer</a>.\n                    </span>\n                  </div>\n                </div>\n                \x3c!-- #endregion --\x3e\n\n                \x3c!-- #region LOAD-BALANCERS --\x3e\n                <div class="col-sm-12 form-section-title">\n                  Storages\n                </div>\n\n                <div class="form-group">\n                  <span class="col-sm-12 text-muted small">\n                    <i class="fa fa-info-circle blue-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                    Quotas can be set on each storage option to prevent users from exceeding a specific threshold when deploying applications. You can set a quota to 0 to\n                    effectively prevent the usage of a specific storage option inside this resource pool.\n                  </span>\n                </div>\n                <div class="col-sm-12 form-section-title">\n                  <i class="fa fa-route" aria-hidden="true" style="margin-right: 2px;"></i>\n                  standard\n                </div>\n                <div class="form-group">\n                  <div class="col-sm-12">\n                    <label class="control-label text-left">\n                      Enable quota\n                    </label>\n                    <label class="switch" style="margin-left: 20px;"> <input type="checkbox" disabled /><i></i> </label>\n                    <span class="text-muted small" style="margin-left: 15px;">\n                      <i class="fa fa-user" aria-hidden="true"></i>\n                      \n                      <a href="https://www.portainer.io/business-upsell?from=k8s-resourcepool-storagequota" target="_blank">Portainer</a>.\n                    </span>\n                  </div>\n                </div>\n                \x3c!-- #endregion --\x3e\n\n                \x3c!-- actions --\x3e\n                <div ng-if="ctrl.isAdmin && ctrl.isEditable" class="col-sm-12 form-section-title">\n                  \n                </div>\n                <div ng-if="ctrl.isAdmin && ctrl.isEditable" class="form-group">\n                  <div class="col-sm-12">\n                    <button\n                      type="button"\n                      class="btn btn-primary btn-sm"\n                      ng-disabled="!resourcePoolEditForm.$valid || ctrl.isUpdateButtonDisabled()"\n                      ng-click="ctrl.updateResourcePool()"\n                      button-spinner="ctrl.state.actionInProgress"\n                    >\n                      <span ng-hide="ctrl.state.actionInProgress">Update resource pool</span>\n                      <span ng-show="ctrl.state.actionInProgress">Update in progress...</span>\n                    </button>\n                  </div>\n                </div>\n                \x3c!-- !actions --\x3e\n              </form>\n            </uib-tab>\n            <uib-tab index="1" classes="btn-sm" select="ctrl.selectTab(1)">\n              <uib-tab-heading>\n                <i class="fa fa-history space-right" aria-hidden="true"></i> Events\n                <div ng-if="ctrl.hasEventWarnings()">\n                  <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                  {{ ctrl.state.eventWarningCount }} warning(s)\n                </div>\n              </uib-tab-heading>\n              <kubernetes-events-datatable\n                title-text="Events"\n                title-icon="fa-history"\n                dataset="ctrl.events"\n                table-key="kubernetes.resourcepool.events"\n                order-by="Date"\n                reverse-order="true"\n                loading="ctrl.state.eventsLoading"\n                refresh-callback="ctrl.getEvents"\n              ></kubernetes-events-datatable>\n            </uib-tab>\n            <uib-tab index="2" ng-if="ctrl.pool.Yaml" select="ctrl.showEditor()" classes="btn-sm">\n              <uib-tab-heading> <i class="fa fa-code space-right" aria-hidden="true"></i> YAML </uib-tab-heading>\n              <div style="padding-right: 25px;" ng-if="ctrl.state.showEditorTab">\n                <kubernetes-yaml-inspector key="resource-pool-yaml" data="ctrl.pool.Yaml"></kubernetes-yaml-inspector>\n              </div>\n            </uib-tab>\n          </uib-tabset>\n        </rd-widget-body>\n      </rd-widget>\n    </div>\n  </div>\n\n  <div class="row" ng-if="ctrl.applications && ctrl.applications.length > 0">\n    <div class="col-sm-12">\n      <kubernetes-resource-pool-applications-datatable\n        dataset="ctrl.applications"\n        table-key="kubernetes.resourcepool.applications"\n        order-by="Name"\n        refresh-callback="ctrl.getApplications"\n        loading="ctrl.state.applicationsLoading"\n        title-text=""\n        title-icon="fa-laptop-code"\n      >\n      </kubernetes-resource-pool-applications-datatable>\n    </div>\n  </div>\n\n  <div class="row" ng-if="ctrl.ingresses && ctrl.ingresses.length > 0">\n    <div class="col-sm-12">\n      <kubernetes-resource-pool-ingresses-datatable\n        dataset="ctrl.ingresses"\n        table-key="kubernetes.resourcepool.ingresses"\n        order-by="Name"\n        refresh-callback="ctrl.getIngresses"\n        loading="ctrl.state.ingressesLoading"\n        title-text="Ingress routes and applications"\n        title-icon="fa-route"\n      >\n      </kubernetes-resource-pool-ingresses-datatable>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(5),r=n(4),i=n(10),s=n(7),o=n(20),l=n(2),c=n(1),d=n.n(c),u=n(44),p=n.n(u),m=n(85),g=n(15),f=n(93),h=n(116),v=n(54),b=n(18),y=n(48),x=n(59);function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||$(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function S(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){k(i,a,r,s,o,"next",e)}function o(e){k(i,a,r,s,o,"throw",e)}s(void 0)}))}}function C(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||$(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function P(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var I=function(){function e(t,n,a,r,i,s,o,l,c,d,u,p,m,g,f){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.$state=n,this.Notifications=r,this.Authentication=a,this.LocalStorage=i,this.EndpointProvider=s,this.ModalService=o,this.KubernetesNodeService=l,this.KubernetesResourceQuotaService=c,this.KubernetesResourcePoolService=d,this.KubernetesEventService=u,this.KubernetesPodService=p,this.KubernetesApplicationService=m,this.KubernetesNamespaceHelper=g,this.KubernetesIngressService=f,this.IngressClassTypes=x.KubernetesIngressClassTypes,this.onInit=this.onInit.bind(this),this.createResourceQuotaAsync=this.createResourceQuotaAsync.bind(this),this.updateResourcePoolAsync=this.updateResourcePoolAsync.bind(this),this.getEvents=this.getEvents.bind(this),this.getEventsAsync=this.getEventsAsync.bind(this),this.getApplications=this.getApplications.bind(this),this.getApplicationsAsync=this.getApplicationsAsync.bind(this),this.getIngresses=this.getIngresses.bind(this),this.getIngressesAsync=this.getIngressesAsync.bind(this)}var t,n,c,u,k,$,A,I,T;return e.$inject=["$async","$state","Authentication","Notifications","LocalStorage","EndpointProvider","ModalService","KubernetesNodeService","KubernetesResourceQuotaService","KubernetesResourcePoolService","KubernetesEventService","KubernetesPodService","KubernetesApplicationService","KubernetesNamespaceHelper","KubernetesIngressService"],t=e,(n=[{key:"onChangeIngressHostname",value:function(){var e=this.state.duplicates.ingressHosts,t=Object(l.a)(this.formValues.IngressClasses,"Host"),n=o.a.apply(void 0,[this.allIngresses].concat(C(this.ingresses))),a=Object(l.a)(n,"Host"),r=y.default.getDuplicates(t);Object(s.a)(t,(function(e,t){Object(i.a)(a,e)&&void 0!==e&&(r[t]=e)})),e.refs=r,e.hasDuplicates=Object.keys(r).length>0}},{key:"addAnnotation",value:function(e){e.Annotations.push(new h.KubernetesResourcePoolIngressClassAnnotationFormValue)}},{key:"removeAnnotation",value:function(e,t){e.Annotations.splice(t,1)}},{key:"selectTab",value:function(e){this.LocalStorage.storeActiveTab("resourcePool",e)}},{key:"isUpdateButtonDisabled",value:function(){return this.state.actionInProgress||this.formValues.HasQuota&&!this.isQuotaValid()||this.state.duplicates.ingressHosts.hasDuplicates}},{key:"isQuotaValid",value:function(){return!(this.state.sliderMaxCpu<this.formValues.CpuLimit||this.state.sliderMaxMemory<this.formValues.MemoryLimit||0===this.formValues.CpuLimit&&0===this.formValues.MemoryLimit)}},{key:"checkDefaults",value:function(){this.formValues.CpuLimit<this.defaults.CpuLimit&&(this.formValues.CpuLimit=this.defaults.CpuLimit),this.formValues.MemoryLimit<g.default.megaBytesValue(this.defaults.MemoryLimit)&&(this.formValues.MemoryLimit=g.default.megaBytesValue(this.defaults.MemoryLimit))}},{key:"showEditor",value:function(){this.state.showEditorTab=!0,this.selectTab(2)}},{key:"createResourceQuotaAsync",value:(T=S(regeneratorRuntime.mark((function e(t,n,a,r){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=new m.KubernetesResourceQuota(t)).CpuLimit=a,i.MemoryLimit=r,i.ResourcePoolName=t,i.ResourcePoolOwner=n,e.next=7,this.KubernetesResourceQuotaService.create(i);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t,n,a){return T.apply(this,arguments)})},{key:"hasResourceQuotaBeenReduced",value:function(){if(this.formValues.HasQuota&&this.oldQuota){var e=this.formValues.CpuLimit,t=g.default.bytesValue(this.formValues.MemoryLimit);if(e<this.oldQuota.CpuLimit||t<this.oldQuota.MemoryLimit)return!0}return!1}},{key:"updateResourcePoolAsync",value:(I=S(regeneratorRuntime.mark((function e(){var t,n,a,i,s,o,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.actionInProgress=!0,e.prev=1,this.checkDefaults(),t=this.pool.Namespace.Name,n=this.formValues.CpuLimit,a=g.default.bytesValue(this.formValues.MemoryLimit),i=this.pool.Namespace.ResourcePoolOwner,s=this.pool.Quota,!this.formValues.HasQuota){e.next=20;break}if(!s){e.next=16;break}return s.CpuLimit=n,s.MemoryLimit=a,e.next=14,this.KubernetesResourceQuotaService.update(s);case 14:e.next=18;break;case 16:return e.next=18,this.createResourceQuotaAsync(t,i,n,a);case 18:e.next=23;break;case 20:if(!s){e.next=23;break}return e.next=23,this.KubernetesResourceQuotaService.delete(s);case 23:return o=Object(l.a)(this.formValues.IngressClasses,(function(e){if(e.Namespace=t,!1===e.WasSelected&&!0===e.Selected){var n=v.KubernetesIngressConverter.resourcePoolIngressClassFormValueToIngress(e);return c.KubernetesIngressService.create(n)}if(!0===e.WasSelected&&!1===e.Selected)return c.KubernetesIngressService.delete(e);if(!0===e.WasSelected&&!0===e.Selected){var a=Object(r.a)(c.ingresses,{Name:e.IngressClass.Name}),i=v.KubernetesIngressConverter.resourcePoolIngressClassFormValueToIngress(e);return i.Paths=d.a.copy(a.Paths),i.PreviousHost=a.Host,c.KubernetesIngressService.patch(a,i)}})),e.next=26,Promise.all(o);case 26:this.Notifications.success("Resource pool successfully updated",this.pool.Namespace.Name),this.$state.reload(),e.next=33;break;case 30:e.prev=30,e.t0=e.catch(1),this.Notifications.error("",e.t0,"Unable to create resource pool");case 33:return e.prev=33,this.state.actionInProgress=!1,e.finish(33);case 36:case"end":return e.stop()}}),e,this,[[1,30,33,36]])}))),function(){return I.apply(this,arguments)})},{key:"updateResourcePool",value:function(){var e=this,t=Object(a.a)(this.formValues.IngressClasses,{WasSelected:!0,Selected:!1}),n=this.hasResourceQuotaBeenReduced(),r=0!==t.length;if(!n&&!r)return this.$async(this.updateResourcePoolAsync);var i={quota:'',ingress:""},s="".concat(n?i.quota:"").concat(n&&r?"<br/><br/>":"","\n      ").concat(r?i.ingress:"","<br/><br/>Do you wish to continue?");this.ModalService.confirmUpdate(s,(function(t){if(t)return e.$async(e.updateResourcePoolAsync)}))}},{key:"hasEventWarnings",value:function(){return this.state.eventWarningCount}},{key:"getEventsAsync",value:(A=S(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state.eventsLoading=!0,e.next=4,this.KubernetesEventService.get(this.pool.Namespace.Name);case 4:this.events=e.sent,this.state.eventWarningCount=f.default.warningCount(this.events),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve resource pool related events");case 11:return e.prev=11,this.state.eventsLoading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[0,8,11,14]])}))),function(){return A.apply(this,arguments)})},{key:"getEvents",value:function(){return this.$async(this.getEventsAsync)}},{key:"getApplicationsAsync",value:($=S(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state.applicationsLoading=!0,e.next=4,this.KubernetesApplicationService.get(this.pool.Namespace.Name);case 4:this.applications=e.sent,this.applications=Object(l.a)(this.applications,(function(e){var t=g.default.computeResourceReservation(e.Pods);return e.CPU=t.CPU,e.Memory=t.Memory,e})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve applications.");case 11:return e.prev=11,this.state.applicationsLoading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[0,8,11,14]])}))),function(){return $.apply(this,arguments)})},{key:"getApplications",value:function(){return this.$async(this.getApplicationsAsync)}},{key:"getIngressesAsync",value:(k=S(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.ingressesLoading=!0,e.prev=1,t=this.pool.Namespace.Name,e.next=5,this.KubernetesIngressService.get();case 5:this.allIngresses=e.sent,this.ingresses=Object(a.a)(this.allIngresses,{Namespace:t}),Object(s.a)(this.ingresses,(function(e){e.Namespace=t,Object(s.a)(e.Paths,(function(e){var t=Object(r.a)(n.applications,{ServiceName:e.ServiceName});e.ApplicationName=t&&t.Name?t.Name:"-"}))})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),this.Notifications.error("",e.t0,"Unable to retrieve ingresses.");case 13:return e.prev=13,this.state.ingressesLoading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[1,10,13,16]])}))),function(){return k.apply(this,arguments)})},{key:"getIngresses",value:function(){return this.$async(this.getIngressesAsync)}},{key:"onInit",value:(u=S(regeneratorRuntime.mark((function e(){var t,n,a,r,i,o,l,c,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.EndpointProvider.currentEndpoint(),this.endpoint=t,this.isAdmin=this.Authentication.isAdmin(),this.defaults=m.KubernetesResourceQuotaDefaults,this.formValues=new h.KubernetesResourcePoolFormValues(this.defaults),this.formValues.HasQuota=!1,this.state={actionInProgress:!1,sliderMaxMemory:0,sliderMaxCpu:0,cpuUsage:0,cpuUsed:0,memoryUsage:0,memoryUsed:0,activeTab:0,currentName:this.$state.$current.name,showEditorTab:!1,eventsLoading:!0,applicationsLoading:!0,ingressesLoading:!0,viewReady:!1,eventWarningCount:0,canUseIngress:t.Kubernetes.Configuration.IngressClasses.length,duplicates:{ingressHosts:new b.KubernetesFormValueDuplicate}},this.state.activeTab=this.LocalStorage.getActiveTab("resourcePool"),n=this.$transition$.params().id,e.next=12,Promise.all([this.KubernetesNodeService.get(),this.KubernetesResourcePoolService.get(n)]);case 12:return a=e.sent,r=w(a,2),i=r[0],o=r[1],this.pool=o,Object(s.a)(i,(function(e){u.state.sliderMaxMemory+=p()(e.Memory),u.state.sliderMaxCpu+=e.CPU})),this.state.sliderMaxMemory=g.default.megaBytesValue(this.state.sliderMaxMemory),(l=o.Quota)&&(this.oldQuota=d.a.copy(l),this.formValues.HasQuota=!0,this.formValues.CpuLimit=l.CpuLimit,this.formValues.MemoryLimit=g.default.megaBytesValue(l.MemoryLimit),this.state.cpuUsed=l.CpuLimitUsed,this.state.memoryUsed=g.default.megaBytesValue(l.MemoryLimitUsed)),this.isEditable=!this.KubernetesNamespaceHelper.isSystemNamespace(this.pool.Namespace.Name),"default"===this.pool.Namespace.Name&&(this.isEditable=!1),e.next=25,this.getEvents();case 25:return e.next=27,this.getApplications();case 27:if(!this.state.canUseIngress){e.next=32;break}return e.next=30,this.getIngresses();case 30:c=t.Kubernetes.Configuration.IngressClasses,this.formValues.IngressClasses=v.KubernetesIngressConverter.ingressClassesToFormValues(c,this.ingresses);case 32:e.next=37;break;case 34:e.prev=34,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to load view data");case 37:return e.prev=37,this.state.viewReady=!0,e.finish(37);case 40:case"end":return e.stop()}}),e,this,[[0,34,37,40]])}))),function(){return u.apply(this,arguments)})},{key:"$onInit",value:function(){return this.$async(this.onInit)}},{key:"$onDestroy",value:function(){this.state.currentName!==this.$state.$current.name&&this.LocalStorage.storeActiveTab("resourcePool",0)}}])&&P(t.prototype,n),c&&P(t,c),e}();t.default=I,d.a.module("portainer.kubernetes").controller("KubernetesResourcePoolController",I)},function(e,t,n){var a=n(1449);angular.module("portainer.kubernetes").component("kubernetesResourcePoolsView",{templateUrl:a,controller:"KubernetesResourcePoolsController",controllerAs:"ctrl"})},function(e,t){var n="app/kubernetes/views/resource-pools/resourcePools.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<kubernetes-view-header title="Resource pool list" state="kubernetes.resourcePools" view-ready="ctrl.state.viewReady">\n  Resource pools\n</kubernetes-view-header>\n\n<kubernetes-view-loading view-ready="ctrl.state.viewReady"></kubernetes-view-loading>\n\n<div ng-if="ctrl.state.viewReady">\n  <div class="row">\n    <div class="col-sm-12">\n      <kubernetes-resource-pools-datatable\n        dataset="ctrl.resourcePools"\n        table-key="kubernetes.resourcePools"\n        order-by="Namespace.Name"\n        remove-action="ctrl.removeAction"\n        refresh-callback="ctrl.getResourcePools"\n      ></kubernetes-resource-pools-datatable>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a);function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function o(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){o(i,a,r,s,l,"next",e)}function l(e){o(i,a,r,s,l,"throw",e)}s(void 0)}))}}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function e(t,n,a,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.$state=n,this.Notifications=a,this.ModalService=r,this.KubernetesResourcePoolService=i,this.onInit=this.onInit.bind(this),this.getResourcePools=this.getResourcePools.bind(this),this.getResourcePoolsAsync=this.getResourcePoolsAsync.bind(this),this.removeAction=this.removeAction.bind(this),this.removeActionAsync=this.removeActionAsync.bind(this)}var t,n,a,r,s,o;return e.$inject=["$async","$state","Notifications","ModalService","KubernetesResourcePoolService"],t=e,(n=[{key:"removeActionAsync",value:(o=l(regeneratorRuntime.mark((function e(t){var n,a,r,s,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.length,a=i(t),e.prev=2,a.s();case 4:if((r=a.n()).done){e.next=23;break}return s=r.value,e.prev=6,e.next=9,this.KubernetesResourcePoolService.delete(s);case 9:this.Notifications.success("Resource pool successfully",s.Namespace.Name),o=this.resourcePools.indexOf(s),this.resourcePools.splice(o,1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),this.Notifications.error("",e.t0," resource pool");case 17:return e.prev=17,0==--n&&this.$state.reload(),e.finish(17);case 21:e.next=4;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(2),a.e(e.t1);case 28:return e.prev=28,a.f(),e.finish(28);case 31:case"end":return e.stop()}}),e,this,[[2,25,28,31],[6,14,17,21]])}))),function(e){return o.apply(this,arguments)})},{key:"removeAction",value:function(e){var t=this;this.ModalService.confirmDeletion("",(function(n){if(n)return t.$async(t.removeActionAsync,e)}))}},{key:"getResourcePoolsAsync",value:(s=l(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesResourcePoolService.get();case 3:this.resourcePools=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retreive resource pools");case 9:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(){return s.apply(this,arguments)})},{key:"getResourcePools",value:function(){return this.$async(this.getResourcePoolsAsync)}},{key:"onInit",value:(r=l(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state={viewReady:!1},e.next=3,this.getResourcePools();case 3:this.state.viewReady=!0;case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"$onInit",value:function(){return this.$async(this.onInit)}}])&&c(t.prototype,n),a&&c(t,a),e}();t.default=d,r.a.module("portainer.kubernetes").controller("KubernetesResourcePoolsController",d)},function(e,t,n){var a=n(1452);angular.module("portainer.kubernetes").component("kubernetesStackLogsView",{templateUrl:a,controller:"KubernetesStackLogsController",controllerAs:"ctrl",bindings:{$transition$:"<"}})},function(e,t){var n="app/kubernetes/views/stacks/logs/logs.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<kubernetes-view-header title="Stacks logs" state="kubernetes.stacks.stack.logs" view-ready="ctrl.state.viewReady">\n  <a ui-sref="kubernetes.resourcePools">Resource pools</a>\n  &gt; <a ui-sref="kubernetes.resourcePools.resourcePool({ id: ctrl.state.transition.namespace })">{{ ctrl.state.transition.namespace }}</a> &gt;\n  <a ui-sref="kubernetes.applications">Applications</a> &gt; Stacks &gt; {{ ctrl.state.transition.name }} &gt; Logs\n</kubernetes-view-header>\n\n<kubernetes-view-loading view-ready="ctrl.state.viewReady"></kubernetes-view-loading>\n\n<div ng-if="ctrl.state.viewReady" style="height: 100%;">\n  <div class="row">\n    <div class="col-sm-12">\n      <rd-widget>\n        <rd-widget-body>\n          <form class="form-horizontal" autocomplete="off">\n            <div class="col-sm-12 form-section-title">\n              \n            </div>\n            \x3c!-- auto-refresh --\x3e\n            <div class="form-group">\n              <div class="col-sm-12">\n                <label class="control-label text-left">\n                  Auto-refresh\n                  <portainer-tooltip position="bottom" message="Automatically refresh logs every 30 seconds"></portainer-tooltip>\n                </label>\n                <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="ctrl.state.autoRefresh" ng-change="ctrl.updateAutoRefresh()" /><i></i> </label>\n              </div>\n            </div>\n            \x3c!-- !auto-refresh --\x3e\n            \x3c!-- search --\x3e\n            <div class="form-group">\n              <label for="logs_search" class="col-sm-1 control-label text-left">\n                \n              </label>\n              <div class="col-sm-11">\n                <input\n                  class="form-control"\n                  type="text"\n                  name="logs_search"\n                  ng-model="ctrl.state.search"\n                  ng-change="ctrl.state.selectedLines.length = 0;"\n                  placeholder="..."\n                  auto-focus\n                />\n              </div>\n            </div>\n            \x3c!-- !search --\x3e\n            \x3c!-- actions --\x3e\n            <div class="form-group">\n              <div class="col-sm-12">\n                <button class="btn btn-primary btn-sm" type="button" ng-click="ctrl.downloadLogs()" style="margin-left: 0;"><i class="fa fa-download"></i> </button>\n              </div>\n            </div>\n            \x3c!-- !actions --\x3e\n          </form>\n        </rd-widget-body>\n      </rd-widget>\n    </div>\n  </div>\n\n  <div class="row" style="height: 54%;">\n    <div class="col-sm-12" style="height: 100%;">\n      <pre\n        class="log_viewer"\n      ><div ng-repeat="line in ctrl.state.filteredLogs = (ctrl.stackLogs | filter:ctrl.state.search) track by $index" class="line" ng-if="line"><p class="inner_line"><span ng-style="{\'color\': line.Color, \'font-weight\': \'bold\'};">{{ line.AppName }}</span> {{ line.Line }}</p></div><div ng-if="ctrl.stackLogs.length && !ctrl.state.filteredLogs.length" class="line"><p class="inner_line">No log line matching the \'{{ ctrl.state.search }}\' filter</p></div><div ng-if="ctrl.stackLogs.length === 0" class="line"><p class="inner_line"></p></div></pre>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(19),r=n(5),i=n(2),s=n(35),o=n(1),l=n.n(o),c=n(236);function d(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){d(i,a,r,s,o,"next",e)}function o(e){d(i,a,r,s,o,"throw",e)}s(void 0)}))}}function p(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var m=["red","orange","lime","green","darkgreen","cyan","turquoise","teal","deepskyblue","blue","darkblue","slateblue","magenta","darkviolet"],g=function(){function e(t,n,a,r,i,s,o,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.$state=n,this.$interval=a,this.Notifications=r,this.KubernetesApplicationService=i,this.KubernetesPodService=s,this.Blob=l,this.FileSaver=o,this.onInit=this.onInit.bind(this),this.stopRepeater=this.stopRepeater.bind(this),this.generateLogsPromise=this.generateLogsPromise.bind(this),this.generateAppPromise=this.generateAppPromise.bind(this),this.getStackLogsAsync=this.getStackLogsAsync.bind(this)}var t,n,o,d,g,f,h;return e.$inject=["$async","$state","$interval","Notifications","KubernetesApplicationService","KubernetesPodService","FileSaver","Blob"],t=e,(n=[{key:"updateAutoRefresh",value:function(){this.state.autoRefresh?this.setUpdateRepeater():this.stopRepeater()}},{key:"stopRepeater",value:function(){l.a.isDefined(this.repeater)&&(this.$interval.cancel(this.repeater),this.repeater=null)}},{key:"setUpdateRepeater",value:function(){this.repeater=this.$interval(this.getStackLogsAsync,this.state.refreshRate)}},{key:"generateLogsPromise",value:(h=u(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={Pod:t,Logs:[]},e.next=3,this.KubernetesPodService.logs(t.Namespace,t.Name,n.Name);case 3:return a.Logs=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"generateAppPromise",value:(f=u(regeneratorRuntime.mark((function e(t){var n,a,r,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={Application:t,Pods:[]},a=Object(s.a)(Object(i.a)(t.Pods,(function(e){return Object(i.a)(e.Containers,(function(t){return o.generateLogsPromise(e,t)}))}))),e.next=4,Object(c.default)(a);case 4:return r=e.sent,n.Pods=r.fulfilled,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),function(e){return f.apply(this,arguments)})},{key:"getStackLogsAsync",value:(g=u(regeneratorRuntime.mark((function e(){var t,n,a,o,l,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.KubernetesApplicationService.get(this.state.transition.namespace);case 3:return t=e.sent,n=Object(r.a)(t,(function(e){return e.StackName===c.state.transition.name})),a=Object(i.a)(n,this.generateAppPromise),e.next=8,Promise.all(a);case 8:o=e.sent,l=Object(s.a)(o,(function(e,t){return Object(s.a)(e.Pods,(function(e){return Object(i.a)(e.Logs,(function(n){return{Color:m[t%m.length],Line:n,AppName:e.Pod.Name}}))}))})),this.stackLogs=l,e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),this.stopRepeater(),this.Notifications.error("",e.t0,"Unable to retrieve application logs");case 17:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(){return g.apply(this,arguments)})},{key:"downloadLogs",value:function(){var e=new this.Blob([this.dataLogs=Object(a.a)(this.stackLogs,(function(e,t){return e+"\n"+t.AppName+" "+t.Line}),"")]);this.FileSaver.saveAs(e,this.state.transition.name+"_logs.txt")}},{key:"onInit",value:(d=u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state={autoRefresh:!1,refreshRate:3e4,search:"",viewReady:!1,transition:{namespace:this.$transition$.params().namespace,name:this.$transition$.params().name}},this.stackLogs=[],e.prev=2,e.next=5,this.getStackLogsAsync();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),this.Notifications.error("",e.t0,"Unable to retrieve stack logs");case 10:return e.prev=10,this.state.viewReady=!0,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[2,7,10,13]])}))),function(){return d.apply(this,arguments)})},{key:"$onInit",value:function(){return this.$async(this.onInit)}},{key:"$onDestroy",value:function(){this.stopRepeater()}}])&&p(t.prototype,n),o&&p(t,o),e}();t.default=g,l.a.module("portainer.kubernetes").controller("KubernetesStackLogsController",g)},function(e,t,n){"use strict";n.r(t);var a=n(7),r=n(5);angular.module("portainer.kubernetes").controller("KubernetesVolumesStoragesDatatableController",["$scope","$controller","DatatableService",function(e,t,n){angular.extend(this,t("GenericDatatableController",{$scope:e})),this.state=Object.assign(this.state,{expandedItems:[],expandAll:!1}),this.onSettingsRepeaterChange=function(){n.setDataTableSettings(this.tableKey,this.settings)},this.expandItem=function(e,t){this.itemCanExpand(e)&&(e.Expanded=t,t||(e.Highlighted=!1))},this.itemCanExpand=function(e){return e.Volumes.length>0},this.hasExpandableItems=function(){var e=this;return Object(r.a)(this.state.filteredDataSet,(function(t){return e.itemCanExpand(t)})).length},this.expandAll=function(){var e=this;this.state.expandAll=!this.state.expandAll,Object(a.a)(this.state.filteredDataSet,(function(t){e.itemCanExpand(t)&&e.expandItem(t,e.state.expandAll)}))},this.$onInit=function(){this.setDefaults(),this.prepareTableFromDataset(),this.state.orderBy=this.orderBy;var e=n.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=n.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var a=n.getDataTableFilters(this.tableKey);null!==a&&(this.filters=a),this.filters&&this.filters.state&&(this.filters.state.open=!1);var r=n.getDataTableSettings(this.tableKey);null!==r&&(this.settings=r,this.settings.open=!1),this.onSettingsRepeaterChange()}}])},function(e,t,n){var a=n(1456);angular.module("portainer.kubernetes").component("kubernetesVolumesStoragesDatatable",{templateUrl:a,controller:"KubernetesVolumesStoragesDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",refreshCallback:"<"}})},function(e,t){var n="app/kubernetes/views/volumes/components/volumes-storages-datatable/template.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n        <div class="settings">\n          <span class="setting" ng-class="{ \'setting-active\': $ctrl.settings.open }" uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.settings.open">\n            <span uib-dropdown-toggle><i class="fa fa-cog" aria-hidden="true"></i> Table settings</span>\n            <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n              <div class="tableMenu">\n                <div class="menuHeader">\n                  \n                </div>\n                <div class="menuContent">\n                  <div>\n                    <div class="md-checkbox">\n                      <input id="setting_auto_refresh" type="checkbox" ng-model="$ctrl.settings.repeater.autoRefresh" ng-change="$ctrl.onSettingsRepeaterChange()" />\n                      <label for="setting_auto_refresh"></label>\n                    </div>\n                    <div ng-if="$ctrl.settings.repeater.autoRefresh">\n                      <label for="settings_refresh_rate">\n                        \n                      </label>\n                      <select id="settings_refresh_rate" ng-model="$ctrl.settings.repeater.refreshRate" ng-change="$ctrl.onSettingsRepeaterChange()" class="small-select">\n                        <option value="10">10s</option>\n                        <option value="30">30s</option>\n                        <option value="60">1min</option>\n                        <option value="120">2min</option>\n                        <option value="300">5min</option>\n                      </select>\n                      <span>\n                        <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="margin-top: 7px; display: none;"></i>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.settings.open = false;"></a>\n                </div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th style="width: 10%;">\n                <a ng-click="$ctrl.expandAll()" ng-if="$ctrl.hasExpandableItems()">\n                  <i ng-class="{ \'fas fa-angle-down\': $ctrl.state.expandAll, \'fas fa-angle-right\': !$ctrl.state.expandAll }" aria-hidden="true"></i>\n                </a>\n              </th>\n              <th style="width: 55%;">\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  Storage\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th style="width: 35%;">\n                <a ng-click="$ctrl.changeOrderBy(\'Size\')">\n                  Usage\n                  <i class="fa fa-sort-numeric-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Size\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-numeric-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Size\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate-start="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit: $ctrl.tableKey))"\n              ng-class="{ active: item.Checked }"\n              ng-style="{ background: item.Highlighted ? \'#d5e8f3\' : \'\' }"\n              ng-click="$ctrl.expandItem(item, !item.Expanded)"\n              pagination-id="$ctrl.tableKey"\n            >\n              <td>\n                <a ng-if="$ctrl.itemCanExpand(item)">\n                  <i ng-class="{ \'fas fa-angle-down\': item.Expanded, \'fas fa-angle-right\': !item.Expanded }" class="space-right" aria-hidden="true"></i>\n                </a>\n              </td>\n              <td>{{ item.Name }}</td>\n              <td>{{ item.Size }}</td>\n            </tr>\n            <tr dir-paginate-end ng-show="item.Expanded" ng-repeat="vol in item.Volumes" ng-style="{ background: item.Highlighted ? \'#d5e8f3\' : \'#f5f5f5\' }">\n              <td colspan="2">\n                <a ui-sref="kubernetes.volumes.volume({ name: vol.PersistentVolumeClaim.Name, namespace: vol.PersistentVolumeClaim.Namespace })" style="margin-left: 25px;">\n                  {{ vol.PersistentVolumeClaim.Name }}\n                </a>\n              </td>\n              <td>\n                {{ vol.PersistentVolumeClaim.Storage }}\n              </td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="5" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="5" class="text-center text-muted">No storage available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5" pagination-id="$ctrl.tableKey"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(1458);angular.module("portainer.kubernetes").component("kubernetesVolumeView",{templateUrl:a,controller:"KubernetesVolumeController",controllerAs:"ctrl",bindings:{$transition$:"<"}})},function(e,t){var n="app/kubernetes/views/volumes/edit/volume.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<kubernetes-view-header title="" state="kubernetes.volumes.volume" view-ready="ctrl.state.viewReady">\n  <a ui-sref="kubernetes.resourcePools">Resource pools</a> &gt;\n  <a ui-sref="kubernetes.resourcePools.resourcePool({ id: ctrl.volume.ResourcePool.Namespace.Name })">{{ ctrl.volume.ResourcePool.Namespace.Name }}</a> &gt;\n  <a ui-sref="kubernetes.volumes"></a> &gt; {{ ctrl.volume.PersistentVolumeClaim.Name }}\n</kubernetes-view-header>\n\n<kubernetes-view-loading view-ready="ctrl.state.viewReady"></kubernetes-view-loading>\n\n<div ng-if="ctrl.state.viewReady">\n  <div class="row">\n    <div class="col-sm-12">\n      <rd-widget>\n        <rd-widget-body classes="no-padding">\n          <uib-tabset active="ctrl.state.activeTab" justified="true" type="pills">\n            <uib-tab index="0" classes="btn-sm" select="ctrl.selectTab(0)">\n              <uib-tab-heading> <i class="fa fa-database space-right" aria-hidden="true"></i> Volume </uib-tab-heading>\n\n              <div style="padding: 20px;">\n                <table class="table">\n                  <tbody>\n                    <tr>\n                      <td></td>\n                      <td>\n                        {{ ctrl.volume.PersistentVolumeClaim.Name }}\n                        <span class="label label-primary image-tag label-margins" ng-if="!ctrl.isSystemNamespace() && ctrl.isExternalVolume()">external</span>\n                        <span class="label label-warning image-tag label-margins" ng-if="!ctrl.isSystemNamespace() && !ctrl.isUsed()">unused</span>\n                      </td>\n                    </tr>\n                    <tr>\n                      <td>Resource pool</td>\n                      <td>\n                        <a ui-sref="kubernetes.resourcePools.resourcePool({ id: ctrl.volume.ResourcePool.Namespace.Name })">{{ ctrl.volume.ResourcePool.Namespace.Name }}</a>\n                        <span style="margin-left: 5px;" class="label label-info image-tag" ng-if="ctrl.isSystemNamespace(item)">system</span>\n                      </td>\n                    </tr>\n                    <tr>\n                      <td>Storage</td>\n                      <td>{{ ctrl.volume.PersistentVolumeClaim.StorageClass.Name }}</td>\n                    </tr>\n                    <tr>\n                      <td>Provisioner</td>\n                      <td>{{ ctrl.volume.PersistentVolumeClaim.StorageClass.Provisioner ? ctrl.volume.PersistentVolumeClaim.StorageClass.Provisioner : \'-\' }}</td>\n                    </tr>\n                    <tr>\n                      <td>Creation date</td>\n                      <td>{{ ctrl.volume.PersistentVolumeClaim.CreationDate | getisodate }}</td>\n                    </tr>\n                    <tr>\n                      <td></td>\n                      <td ng-if="!ctrl.state.increaseSize">\n                        {{ ctrl.volume.PersistentVolumeClaim.Storage }}\n                        <button\n                          type="button"\n                          class="btn btn-sm btn-primary"\n                          ng-click="ctrl.state.increaseSize = true"\n                          ng-if="ctrl.volume.PersistentVolumeClaim.StorageClass.AllowVolumeExpansion"\n                          >Increase size</button\n                        >\n                      </td>\n                      <td ng-if="ctrl.state.increaseSize">\n                        <form name="kubernetesVolumeUpdateForm">\n                          <div class="form-inline">\n                            <div class="input-group input-group-sm">\n                              <input\n                                type="number"\n                                class="form-control"\n                                name=""\n                                ng-model="ctrl.state.volumeSize"\n                                placeholder="20"\n                                ng-min="0"\n                                ng-change="ctrl.onChangeSize()"\n                                required\n                              />\n                              <span class="input-group-addon" style="padding: 0;">\n                                <select\n                                  ng-model="ctrl.state.volumeSizeUnit"\n                                  ng-change="ctrl.onChangeSize()"\n                                  ng-options="unit for unit in ctrl.state.availableSizeUnits"\n                                  style="width: 100%; height: 100%;"\n                                ></select>\n                              </span>\n                            </div>\n                            <button type="button" class="btn btn-sm btn-primary" ng-disabled="!ctrl.sizeIsValid()" ng-click="ctrl.updateVolume()">\n                              Update size\n                            </button>\n                            <button type="button" class="btn btn-sm btn-default" ng-click="ctrl.state.increaseSize = false">\n                              Cancel\n                            </button>\n                          </div>\n\n                          <div class="form-inline">\n                            <div class="small text-warning" style="margin-top: 5px;" ng-show="ctrl.state.volumeSizeError || kubernetesVolumeUpdateForm.size.$invalid">\n                              <div ng-messages="kubernetesVolumeUpdateForm.size.$error">\n                                <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n                              </div>\n                              <p ng-show="ctrl.state.volumeSizeError && !kubernetesVolumeUpdateForm.size.$invalid"\n                                ><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> The new size must be greater than the actual size.</p\n                              >\n                            </div>\n                          </div>\n                        </form>\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </uib-tab>\n\n            <uib-tab index="1" classes="btn-sm" select="ctrl.selectTab(1)">\n              <uib-tab-heading>\n                <i class="fa fa-history space-right" aria-hidden="true"></i> Events\n                <div ng-if="ctrl.hasEventWarnings()">\n                  <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n                  {{ ctrl.state.eventWarningCount }} warning(s)\n                </div>\n              </uib-tab-heading>\n              <kubernetes-events-datatable\n                title-text="Events"\n                title-icon="fa-history"\n                dataset="ctrl.events"\n                table-key="kubernetes.volume.events"\n                order-by="Date"\n                reverse-order="true"\n                loading="ctrl.state.eventsLoading"\n                refresh-callback="ctrl.getEvents"\n              >\n              </kubernetes-events-datatable>\n            </uib-tab>\n\n            <uib-tab index="2" ng-if="ctrl.volume.PersistentVolumeClaim.Yaml" select="ctrl.showEditor()" classes="btn-sm">\n              <uib-tab-heading> <i class="fa fa-code space-right" aria-hidden="true"></i> YAML </uib-tab-heading>\n              <div style="padding-right: 25px;" ng-if="ctrl.state.showEditorTab">\n                <kubernetes-yaml-inspector key="volume-yaml" data="ctrl.volume.PersistentVolumeClaim.Yaml"></kubernetes-yaml-inspector>\n              </div>\n            </uib-tab>\n          </uib-tabset>\n        </rd-widget-body>\n      </rd-widget>\n    </div>\n  </div>\n\n  <div class="row" ng-if="ctrl.isUsed(item)">\n    <div class="col-sm-12">\n      <kubernetes-integrated-applications-datatable\n        dataset="ctrl.volume.Applications"\n        table-key="kubernetes.volume.applications"\n        order-by="Name"\n        refresh-callback="ctrl.getVolume"\n        title-text="Applications using this volume"\n        title-icon="fa-laptop-code"\n      >\n      </kubernetes-integrated-applications-datatable>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(5),r=n(2),i=n(70),s=n(1),o=n.n(s),l=n(66),c=n(93),d=n(44),u=n.n(d);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function g(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){g(i,a,r,s,o,"next",e)}function o(e){g(i,a,r,s,o,"throw",e)}s(void 0)}))}}function h(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var v=function(){function e(t,n,a,r,i,s,o,l,c,d,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.$state=n,this.Notifications=a,this.LocalStorage=r,this.KubernetesVolumeService=i,this.KubernetesEventService=s,this.KubernetesNamespaceHelper=o,this.KubernetesApplicationService=l,this.KubernetesPersistentVolumeClaimService=c,this.ModalService=d,this.KubernetesPodService=u,this.onInit=this.onInit.bind(this),this.getVolume=this.getVolume.bind(this),this.getVolumeAsync=this.getVolumeAsync.bind(this),this.updateVolumeAsync=this.updateVolumeAsync.bind(this),this.getEvents=this.getEvents.bind(this),this.getEventsAsync=this.getEventsAsync.bind(this)}var t,n,s,d,m,g,v;return e.$inject=["$async","$state","Notifications","LocalStorage","KubernetesVolumeService","KubernetesEventService","KubernetesNamespaceHelper","KubernetesApplicationService","KubernetesPersistentVolumeClaimService","ModalService","KubernetesPodService"],t=e,(n=[{key:"selectTab",value:function(e){this.LocalStorage.storeActiveTab("volume",e)}},{key:"showEditor",value:function(){this.state.showEditorTab=!0,this.selectTab(2)}},{key:"isExternalVolume",value:function(){return l.default.isExternalVolume(this.volume)}},{key:"isSystemNamespace",value:function(){return this.KubernetesNamespaceHelper.isSystemNamespace(this.volume.ResourcePool.Namespace.Name)}},{key:"isUsed",value:function(){return l.default.isUsed(this.volume)}},{key:"onChangeSize",value:function(){if(this.state.volumeSize){var e=u()(this.state.volumeSize+this.state.volumeSizeUnit);this.state.oldVolumeSize>e?this.state.volumeSizeError=!0:(this.volume.PersistentVolumeClaim.Storage=e,this.state.volumeSizeError=!1)}}},{key:"sizeIsValid",value:function(){return!this.state.volumeSizeError&&this.state.oldVolumeSize!==this.volume.PersistentVolumeClaim.Storage}},{key:"updateVolumeAsync",value:(v=f(regeneratorRuntime.mark((function e(t){var n,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.volume.PersistentVolumeClaim.Storage=this.state.volumeSize+this.state.volumeSizeUnit.charAt(0)+"i",e.next=4,this.KubernetesPersistentVolumeClaimService.patch(this.oldVolume.PersistentVolumeClaim,this.volume.PersistentVolumeClaim);case 4:if(this.Notifications.success(""),!t){e.next=10;break}return n=Object(i.a)(Object(r.a)(this.volume.Applications,(function(e){return Object(r.a)(e.Pods,(function(e){return a.KubernetesPodService.delete(e)}))}))),e.next=9,Promise.all(n);case 9:this.Notifications.success("Applications successfully redeployed");case 10:this.$state.reload(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to update volume.");case 16:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(e){return v.apply(this,arguments)})},{key:"updateVolume",value:function(){var e=this;if(!l.default.isUsed(this.volume))return this.$async(this.updateVolumeAsync,!1);this.ModalService.confirmRedeploy("</br>",(function(t){return e.$async(e.updateVolumeAsync,t)}))}},{key:"getVolumeAsync",value:(g=f(regeneratorRuntime.mark((function e(){var t,n,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([this.KubernetesVolumeService.get(this.state.namespace,this.state.name),this.KubernetesApplicationService.get(this.state.namespace)]);case 3:t=e.sent,n=p(t,2),a=n[0],r=n[1],a.Applications=l.default.getUsingApplications(a,r),this.volume=a,this.oldVolume=o.a.copy(a),this.state.volumeSize=parseInt(a.PersistentVolumeClaim.Storage.slice(0,-2)),this.state.volumeSizeUnit=a.PersistentVolumeClaim.Storage.slice(-2),this.state.oldVolumeSize=u()(a.PersistentVolumeClaim.Storage),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve volume");case 18:case"end":return e.stop()}}),e,this,[[0,15]])}))),function(){return g.apply(this,arguments)})},{key:"getVolume",value:function(){return this.$async(this.getVolumeAsync)}},{key:"hasEventWarnings",value:function(){return this.state.eventWarningCount}},{key:"getEventsAsync",value:(m=f(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state.eventsLoading=!0,e.next=4,this.KubernetesEventService.get(this.state.namespace);case 4:t=e.sent,this.events=Object(a.a)(t,(function(e){return e.Involved.uid===n.volume.PersistentVolumeClaim.Id})),this.state.eventWarningCount=c.default.warningCount(this.events),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve application related events");case 12:return e.prev=12,this.state.eventsLoading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[0,9,12,15]])}))),function(){return m.apply(this,arguments)})},{key:"getEvents",value:function(){return this.$async(this.getEventsAsync)}},{key:"onInit",value:(d=f(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state={activeTab:0,currentName:this.$state.$current.name,showEditorTab:!1,eventsLoading:!0,viewReady:!1,namespace:this.$transition$.params().namespace,name:this.$transition$.params().name,eventWarningCount:0,availableSizeUnits:["MB","GB","TB"],increaseSize:!1,volumeSize:0,volumeSizeUnit:"GB",volumeSizeError:!1},this.state.activeTab=this.LocalStorage.getActiveTab("volume"),e.prev=2,e.next=5,this.getVolume();case 5:return e.next=7,this.getEvents();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.Notifications.error("",e.t0,"Unable to load view data");case 12:return e.prev=12,this.state.viewReady=!0,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[2,9,12,15]])}))),function(){return d.apply(this,arguments)})},{key:"$onInit",value:function(){return this.$async(this.onInit)}},{key:"$onDestroy",value:function(){this.state.currentName!==this.$state.$current.name&&this.LocalStorage.storeActiveTab("volume",0)}}])&&h(t.prototype,n),s&&h(t,s),e}();t.default=v,o.a.module("portainer.kubernetes").controller("KubernetesVolumeController",v)},function(e,t,n){var a=n(1461);angular.module("portainer.kubernetes").component("kubernetesVolumesView",{templateUrl:a,controller:"KubernetesVolumesController",controllerAs:"ctrl",bindings:{$transition$:"<"}})},function(e,t){var n="app/kubernetes/views/volumes/volumes.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<kubernetes-view-header title="" state="kubernetes.volumes" view-ready="ctrl.state.viewReady">\n  \n</kubernetes-view-header>\n\n<kubernetes-view-loading view-ready="ctrl.state.viewReady"></kubernetes-view-loading>\n\n<div ng-if="ctrl.state.viewReady">\n  <div class="row">\n    <div class="col-sm-12">\n      <rd-widget>\n        <rd-widget-body classes="no-padding">\n          <uib-tabset active="ctrl.state.activeTab" justified="true" type="pills">\n            <uib-tab index="0" classes="btn-sm" select="ctrl.selectTab(0)">\n              <uib-tab-heading> <i class="fa fa-database space-right" aria-hidden="true"></i> Volumes</uib-tab-heading>\n              <kubernetes-volumes-datatable\n                dataset="ctrl.volumes"\n                table-key="kubernetes.volumes"\n                order-by="PersistentVolumeClaim.Name"\n                remove-action="ctrl.removeAction"\n                refresh-callback="ctrl.getVolumes"\n              >\n              </kubernetes-volumes-datatable>\n            </uib-tab>\n            <uib-tab index="1" classes="btn-sm" select="ctrl.selectTab(1)">\n              <uib-tab-heading> <i class="fa fa-hdd space-right" aria-hidden="true"></i> Storage</uib-tab-heading>\n              <kubernetes-volumes-storages-datatable dataset="ctrl.storages" table-key="kubernetes.volumes.storages" order-by="Name" refresh-callback="ctrl.getVolumes">\n              </kubernetes-volumes-storages-datatable>\n            </uib-tab>\n          </uib-tabset>\n        </rd-widget-body>\n      </rd-widget>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(219),i=n(339),s=n(5),o=n(7),l=n(44),c=n.n(l),d=n(1),u=n.n(d),p=n(66);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=f(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function f(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function v(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){v(i,a,r,s,o,"next",e)}function o(e){v(i,a,r,s,o,"throw",e)}s(void 0)}))}}function y(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function x(e,t){return Object(o.a)(e,(function(e){var n=Object(s.a)(t,["PersistentVolumeClaim.StorageClass.Name",e.Name,"PersistentVolumeClaim.StorageClass.Provisioner",e.Provisioner]);e.Volumes=n,e.Size=function(e){var t,n,a=!1,s=Object(i.a)(e,(function(e){var i=e.PersistentVolumeClaim.Storage;return!t&&Object(r.a)(i,"TB")?t=!0:!n&&Object(r.a)(i,"GB")?n=!0:!a&&Object(r.a)(i,"MB")&&(a=!0),c()(i,{base:10})}));if(t)return s/1e3/1e3/1e3/1e3+"TB";if(n)return s/1e3/1e3/1e3+"GB";if(a)return s/1e3/1e3+"MB";return s}(n)})),e}var w=function(){function e(t,n,a,r,i,s,o,l,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.$state=n,this.Notifications=a,this.ModalService=r,this.LocalStorage=i,this.EndpointProvider=s,this.KubernetesStorageService=o,this.KubernetesVolumeService=l,this.KubernetesApplicationService=c,this.onInit=this.onInit.bind(this),this.getVolumes=this.getVolumes.bind(this),this.getVolumesAsync=this.getVolumesAsync.bind(this),this.removeAction=this.removeAction.bind(this),this.removeActionAsync=this.removeActionAsync.bind(this)}var t,n,r,i,s,o;return e.$inject=["$async","$state","Notifications","ModalService","LocalStorage","EndpointProvider","KubernetesStorageService","KubernetesVolumeService","KubernetesApplicationService"],t=e,(n=[{key:"selectTab",value:function(e){this.LocalStorage.storeActiveTab("volumes",e)}},{key:"removeActionAsync",value:(o=b(regeneratorRuntime.mark((function e(t){var n,a,r,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.length,a=g(t),e.prev=2,a.s();case 4:if((r=a.n()).done){e.next=23;break}return i=r.value,e.prev=6,e.next=9,this.KubernetesVolumeService.delete(i);case 9:this.Notifications.success("",i.PersistentVolumeClaim.Name),s=this.volumes.indexOf(i),this.volumes.splice(s,1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),this.Notifications.error("",e.t0," volume");case 17:return e.prev=17,0==--n&&this.$state.reload(),e.finish(17);case 21:e.next=4;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(2),a.e(e.t1);case 28:return e.prev=28,a.f(),e.finish(28);case 31:case"end":return e.stop()}}),e,this,[[2,25,28,31],[6,14,17,21]])}))),function(e){return o.apply(this,arguments)})},{key:"removeAction",value:function(e){var t=this;this.ModalService.confirmDeletion("Do you want to remove the selected volume(s)?",(function(n){if(n)return t.$async(t.removeActionAsync,e)}))}},{key:"getVolumesAsync",value:(s=b(regeneratorRuntime.mark((function e(){var t,n,r,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([this.KubernetesVolumeService.get(),this.KubernetesApplicationService.get(),this.KubernetesStorageService.get(this.state.endpointId)]);case 3:t=e.sent,n=m(t,3),r=n[0],i=n[1],s=n[2],this.volumes=Object(a.a)(r,(function(e){return e.Applications=p.default.getUsingApplications(e,i),e})),this.storages=x(s,r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retreive resource pools");case 15:case"end":return e.stop()}}),e,this,[[0,12]])}))),function(){return s.apply(this,arguments)})},{key:"getVolumes",value:function(){return this.$async(this.getVolumesAsync)}},{key:"onInit",value:(i=b(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state={viewReady:!1,currentName:this.$state.$current.name,endpointId:this.EndpointProvider.endpointID(),activeTab:this.LocalStorage.getActiveTab("volumes")},e.next=3,this.getVolumes();case 3:this.state.viewReady=!0;case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"$onInit",value:function(){return this.$async(this.onInit)}},{key:"$onDestroy",value:function(){this.state.currentName!==this.$state.$current.name&&this.LocalStorage.storeActiveTab("volumes",0)}}])&&y(t.prototype,n),r&&y(t,r),e}();t.default=w,u.a.module("portainer.kubernetes").controller("KubernetesVolumesController",w)},function(e,t,n){var a=n(1464);angular.module("portainer.app").component("accessDatatable",{templateUrl:a,controller:"AccessDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",roles:"<",tableKey:"@",orderBy:"@",removeAction:"<",updateAction:"<",reverseOrder:"<",inheritFrom:"<"}})},function(e,t){var n="app/portainer/components/access-datatable/accessDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-header icon="{{ $ctrl.titleIcon }}" title-text="{{ $ctrl.titleText }}"> </rd-widget-header>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar small" ng-if="$ctrl.inheritFrom">\n        <code>inherited</code>\n      </div>\n      <div class="toolBar small" ng-if="$ctrl.inheritFrom">  <code></code> / </div>\n      <div class="actionBar">\n        <button type="button" class="btn btn-sm btn-danger" ng-disabled="$ctrl.state.selectedItemCount === 0" ng-click="$ctrl.removeAction($ctrl.state.selectedItems)">\n          <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>\n        </button>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <span class="md-checkbox">\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Type\')">\n                  Type\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Type\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Type\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit)) track by $index"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>\n                <span class="md-checkbox">\n                  <input id="select_{{ $index }}" type="checkbox" ng-model="item.Checked" ng-disabled="$ctrl.disableRemove(item)" ng-click="$ctrl.selectItem(item, $event)" />\n                  <label for="select_{{ $index }}"></label>\n                </span>\n                {{ item.Name }}\n                <span ng-if="$ctrl.inheritFrom && item.Inherited" class="text-muted small" style="margin-left: 2px;"\n                  ><code style="font-size: 85% !important;">inherited</code></span\n                >\n                <span ng-if="$ctrl.inheritFrom && item.Override" class="text-muted small" style="margin-left: 2px;"><code style="font-size: 85% !important;"></code></span>\n              </td>\n              <td>{{ item.Type }}</td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="4" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="4" class="text-center text-muted"></td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.app").controller("AccessDatatableController",["$scope","$controller","DatatableService",function(e,t,n){angular.extend(this,t("GenericDatatableController",{$scope:e})),this.disableRemove=function(e){return e.Inherited&&this.inheritFrom},this.allowSelection=function(e){return!this.disableRemove(e)},this.$onInit=function(){this.setDefaults(),this.prepareTableFromDataset(),this.state.orderBy=this.orderBy;var e=n.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=n.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var a=n.getDataTableFilters(this.tableKey);null!==a&&(this.filters=a),this.filters&&this.filters.state&&(this.filters.state.open=!1);var r=n.getDataTableSettings(this.tableKey);null!==r&&(this.settings=r,this.settings.open=!1),this.onSettingsRepeaterChange()}}])},function(e,t,n){var a=n(1467);angular.module("portainer.app").component("accessTable",{templateUrl:a,controller:function(){this.state={orderBy:"Name",reverseOrder:!1,paginatedItemLimit:"10",textFilter:""},this.changeOrderBy=function(e){this.state.reverseOrder=this.state.orderBy===e&&!this.state.reverseOrder,this.state.orderBy=e}},bindings:{dataset:"<",entryClick:"<",emptyDatasetMessage:"@"}})},function(e,t){var n="app/portainer/components/access-table/accessTable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <table class="table table-hover">\n    <div class="col-sm-12">\n      <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n      <input\n        type="text"\n        class="searchInput"\n        ng-model="$ctrl.state.textFilter"\n        ng-change="$ctrl.onTextFilterChange()"\n        placeholder="..."\n        ng-model-options="{ debounce: 300 }"\n      />\n    </div>\n    <thead>\n      <tr>\n        <th>\n          <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n            \n            <span ng-show="$ctrl.state.orderBy == \'Name\' && !$ctrl.state.reverseOrder" class="glyphicon glyphicon-chevron-down"></span>\n            <span ng-show="$ctrl.state.orderBy == \'Name\' && $ctrl.state.reverseOrder" class="glyphicon glyphicon-chevron-up"></span>\n          </a>\n        </th>\n        <th>\n          <a ng-click="$ctrl.changeOrderBy(\'Type\')">\n            Type\n            <span ng-show="$ctrl.state.orderBy == \'Type\' && !$ctrl.state.reverseOrder" class="glyphicon glyphicon-chevron-down"></span>\n            <span ng-show="$ctrl.state.orderBy == \'Type\' && $ctrl.state.reverseOrder" class="glyphicon glyphicon-chevron-up"></span>\n          </a>\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr\n        ng-click="!item.Inherited && $ctrl.entryClick(item)"\n        ng-class="{ interactive: !item.Inherited }"\n        dir-paginate="item in $ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit"\n      >\n        <td>\n          {{ item.Name }}\n          \x3c!-- <span class="image-tag label label-">inherited</span> --\x3e\n          <span ng-if="item.Inherited" class="text-muted small" style="margin-left: 2px;"><code style="font-size: 85% !important;">inherited</code></span>\n        </td>\n        <td>\n          <i class="fa" ng-class="item.Type === \'user\' ? \'fa-user\' : \'fa-users\'" aria-hidden="true" style="margin-right: 2px;"></i>\n          {{ item.Type }}\n        </td>\n      </tr>\n      <tr ng-if="!$ctrl.dataset">\n        <td colspan="2" class="text-center text-muted">...</td>\n      </tr>\n      <tr\n        ng-if="\n          $ctrl.dataset.length === 0 ||\n          ($ctrl.dataset | filter: $ctrl.state.textFilter | orderBy: $ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit).length === 0\n        "\n      >\n        <td colspan="2" class="text-center text-muted">{{ $ctrl.emptyDatasetMessage }}</td>\n      </tr>\n    </tbody>\n  </table>\n  <div class="footer" ng-if="$ctrl.dataset">\n    <div class="paginationControls">\n      <form class="form-inline">\n        <span class="limitSelector">\n          <span style="margin-right: 5px;">\n            \n          </span>\n          <select ng-model="$ctrl.state.paginatedItemLimit">\n            <option value="0"></option>\n            <option value="10">10</option>\n            <option value="25">25</option>\n            <option value="50">50</option>\n            <option value="100">100</option>\n          </select>\n        </span>\n        <dir-pagination-controls max-size="5"></dir-pagination-controls>\n      </form>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(1469);angular.module("portainer.app").component("porAccessControlForm",{templateUrl:a,controller:"porAccessControlFormController",bindings:{formData:"=",resourceControl:"<"}})},function(e,t){var n="app/portainer/components/accessControlForm/porAccessControlForm.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div>\n  <div class="col-sm-12 form-section-title">\n     \n  </div>\n  \x3c!-- access-control-switch --\x3e\n  <div class="form-group">\n    <div class="col-sm-12">\n      <label for="ownership" class="control-label text-left">\n        \n        <portainer-tooltip position="bottom" message=""></portainer-tooltip>\n      </label>\n      <label class="switch" style="margin-left: 20px;"> <input name="ownership" type="checkbox" ng-model="$ctrl.formData.AccessControlEnabled" /><i></i> </label>\n    </div>\n  </div>\n  \x3c!-- !access-control-switch --\x3e\n  \x3c!-- restricted-access --\x3e\n  <div class="form-group" ng-if="$ctrl.formData.AccessControlEnabled" style="margin-bottom: 0;">\n    <div class="boxselector_wrapper">\n      <div ng-if="$ctrl.isAdmin">\n        <input type="radio" id="access_administrators" ng-model="$ctrl.formData.Ownership" value="administrators" />\n        <label for="access_administrators">\n          <div class="boxselector_header">\n            <i ng-class="\'administrators\' | ownershipicon" aria-hidden="true" style="margin-right: 2px;"></i>\n            Administrators\n          </div>\n          <p></p>\n        </label>\n      </div>\n      <div ng-if="$ctrl.isAdmin">\n        <input type="radio" id="access_restricted" ng-model="$ctrl.formData.Ownership" value="restricted" />\n        <label for="access_restricted">\n          <div class="boxselector_header">\n            <i ng-class="\'restricted\' | ownershipicon" aria-hidden="true" style="margin-right: 2px;"></i>\n            Restricted\n          </div>\n          <p>\n            /\n          </p>\n        </label>\n      </div>\n      <div ng-if="!$ctrl.isAdmin">\n        <input type="radio" id="access_private" ng-model="$ctrl.formData.Ownership" value="private" />\n        <label for="access_private">\n          <div class="boxselector_header">\n            <i ng-class="\'private\' | ownershipicon" aria-hidden="true" style="margin-right: 2px;"></i>\n            Private\n          </div>\n          <p>\n            I want to this resource to be manageable by myself only\n          </p>\n        </label>\n      </div>\n      <div ng-if="!$ctrl.isAdmin && $ctrl.availableTeams.length > 0">\n        <input type="radio" id="access_restricted" ng-model="$ctrl.formData.Ownership" value="restricted" />\n        <label for="access_restricted">\n          <div class="boxselector_header">\n            <i ng-class="\'restricted\' | ownershipicon" aria-hidden="true" style="margin-right: 2px;"></i>\n            Restricted\n          </div>\n          <p ng-if="$ctrl.availableTeams.length === 1">\n            I want any member of my team (<b>{{ $ctrl.availableTeams[0].Name }}</b\n            >) to be able to manage this resource\n          </p>\n          <p ng-if="$ctrl.availableTeams.length > 1">\n            \n          </p>\n        </label>\n      </div>\n    </div>\n  </div>\n  \x3c!-- restricted-access --\x3e\n  \x3c!-- authorized-teams --\x3e\n  <div\n    class="form-group"\n    ng-if="$ctrl.formData.AccessControlEnabled && $ctrl.formData.Ownership === $ctrl.RCO.RESTRICTED && ($ctrl.isAdmin || (!$ctrl.isAdmin && $ctrl.availableTeams.length > 1))"\n  >\n    <div class="col-sm-12">\n      <label for="group-access" class="control-label text-left">\n        \n        <portainer-tooltip\n          ng-if="$ctrl.isAdmin && $ctrl.availableTeams.length > 0"\n          position="bottom"\n          message="You can select which teams(s) will be able to manage this resource."\n        ></portainer-tooltip>\n        <portainer-tooltip\n          ng-if="!$ctrl.isAdmin && $ctrl.availableTeams.length > 1"\n          position="bottom"\n          message="As you are a member of multiple teams, you can select which teams(s) will be able to manage this resource."\n        ></portainer-tooltip>\n      </label>\n      <span ng-if="$ctrl.isAdmin && $ctrl.availableTeams.length === 0" class="small text-muted" style="margin-left: 20px;">\n          <a ui-sref="portainer.teams"></a> \n      </span>\n      <span\n        isteven-multi-select\n        ng-if="($ctrl.isAdmin && $ctrl.availableTeams.length > 0) || (!$ctrl.isAdmin && $ctrl.availableTeams.length > 1)"\n        input-model="$ctrl.availableTeams"\n        output-model="$ctrl.formData.AuthorizedTeams"\n        button-label="Name"\n        item-label="Name"\n        tick-property="selected"\n        helper-elements="filter"\n        search-property="Name"\n        translation="{nothingSelected: \'\', search: \'...\'}"\n        style="margin-left: 20px;"\n      >\n      </span>\n    </div>\n  </div>\n  \x3c!-- !authorized-teams --\x3e\n  \x3c!-- authorized-users --\x3e\n  <div class="form-group" ng-if="$ctrl.formData.AccessControlEnabled && $ctrl.formData.Ownership === $ctrl.RCO.RESTRICTED && $ctrl.isAdmin">\n    <div class="col-sm-12">\n      <label for="group-access" class="control-label text-left">\n        \n        <portainer-tooltip\n          ng-if="$ctrl.isAdmin && $ctrl.availableUsers.length > 0"\n          position="bottom"\n          message="You can select which user(s) will be able to manage this resource."\n        ></portainer-tooltip>\n      </label>\n      <span ng-if="$ctrl.availableUsers.length === 0" class="small text-muted" style="margin-left: 20px;">\n         <a ui-sref="portainer.users"></a> \n      </span>\n      <span\n        isteven-multi-select\n        ng-if="$ctrl.availableUsers.length > 0"\n        input-model="$ctrl.availableUsers"\n        output-model="$ctrl.formData.AuthorizedUsers"\n        button-label="Username"\n        item-label="Username"\n        tick-property="selected"\n        helper-elements="filter"\n        search-property="Username"\n        translation="{nothingSelected: \'\', search: \'...\'}"\n        style="margin-left: 20px;"\n      >\n      </span>\n    </div>\n  </div>\n  \x3c!-- !authorized-users --\x3e\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(64),r=n(4),i=n(16);angular.module("portainer.app").controller("porAccessControlFormController",["$q","UserService","TeamService","Notifications","Authentication","ResourceControlService",function(e,t,n,s,o,l){var c=this;c.RCO=i.ResourceControlOwnership,c.availableTeams=[],c.availableUsers=[],this.$onInit=function(){var d=o.isAdmin();c.isAdmin=d,d&&(c.formData.Ownership=c.RCO.ADMINISTRATORS);e.all({availableTeams:n.teams(),availableUsers:d?t.users(!1):[]}).then((function(t){c.availableUsers=Object(a.a)(t.availableUsers,"Username","asc");var n=Object(a.a)(t.availableTeams,"Name","asc");return c.availableTeams=n,d||1!==n.length||(c.formData.AuthorizedTeams=n),e.when(c.resourceControl&&l.retrieveOwnershipDetails(c.resourceControl))})).then((function(e){if(e){var t=e.authorizedUsers,n=e.authorizedTeams;!function(e,t){t&&e.Ownership===i.ResourceControlOwnership.PRIVATE?c.formData.Ownership=i.ResourceControlOwnership.RESTRICTED:c.formData.Ownership=e.Ownership,c.formData.Ownership===i.ResourceControlOwnership.PUBLIC&&(c.formData.AccessControlEnabled=!1)}(c.resourceControl,d),function(e,t){angular.forEach(c.availableUsers,(function(t){Object(r.a)(e,{Id:t.Id})&&(t.selected=!0)})),angular.forEach(c.availableTeams,(function(e){Object(r.a)(t,{Id:e.Id})&&(e.selected=!0)}))}(t,n)}})).catch((function(e){s.error("",e,"Unable to retrieve access control information")}))}}])},function(e,t,n){var a=n(1472);angular.module("portainer.app").component("porAccessControlPanel",{templateUrl:a,controller:"porAccessControlPanelController",bindings:{resourceId:"<",resourceControl:"=",resourceType:"<",disableOwnershipChange:"<"}})},function(e,t){var n="app/portainer/components/accessControlPanel/porAccessControlPanel.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="row">\n  <div class="col-sm-12" ng-if="$ctrl.state.displayAccessControlPanel">\n    <rd-widget>\n      <rd-widget-header icon="fa-eye" title-text=""></rd-widget-header>\n      <rd-widget-body classes="no-padding">\n        <table class="table">\n          <tbody>\n            \x3c!-- ownership --\x3e\n            <tr>\n              <td></td>\n              <td>\n                <i ng-class="$ctrl.resourceControl.Ownership | ownershipicon" aria-hidden="true" style="margin-right: 2px;"></i>\n                <span ng-if="!$ctrl.resourceControl">\n                  administrators\n                  <portainer-tooltip message="" position="bottom" style="margin-left: -3px;"></portainer-tooltip>\n                </span>\n                <span ng-if="$ctrl.resourceControl">\n                  {{ $ctrl.resourceControl.Ownership }}\n                  <portainer-tooltip\n                    ng-if="$ctrl.resourceControl.Ownership === $ctrl.RCO.PUBLIC"\n                    message=""\n                    position="bottom"\n                    style="margin-left: -3px;"\n                  ></portainer-tooltip>\n                  <portainer-tooltip\n                    ng-if="$ctrl.resourceControl.Ownership === $ctrl.RCO.PRIVATE"\n                    message="Management of this resource is restricted to a single user."\n                    position="bottom"\n                    style="margin-left: -3px;"\n                  ></portainer-tooltip>\n                  <portainer-tooltip\n                    ng-if="$ctrl.resourceControl.Ownership === $ctrl.RCO.RESTRICTED"\n                    message="/"\n                    position="bottom"\n                    style="margin-left: -3px;"\n                  ></portainer-tooltip>\n                </span>\n              </td>\n            </tr>\n            \x3c!-- !ownership --\x3e\n            <tr ng-if="$ctrl.resourceControl.Type === $ctrl.RCTI.SERVICE && $ctrl.resourceType === $ctrl.RCTS.CONTAINER">\n              <td colspan="2">\n                <i class="fa fa-info-circle" aria-hidden="true" style="margin-right: 2px;"></i>\n                Access control on this resource is inherited from the following service:\n                <a ui-sref="docker.services.service({ id: $ctrl.resourceControl.ResourceId })">{{ $ctrl.resourceControl.ResourceId | truncate }}</a>\n                <portainer-tooltip\n                  message="Access control applied on a service is also applied on each container of that service."\n                  position="bottom"\n                  style="margin-left: 2px;"\n                ></portainer-tooltip>\n              </td>\n            </tr>\n            <tr ng-if="$ctrl.resourceControl.Type === $ctrl.RCTI.CONTAINER && $ctrl.resourceType === $ctrl.RCTS.VOLUME">\n              <td colspan="2">\n                <i class="fa fa-info-circle" aria-hidden="true" style="margin-right: 2px;"></i>\n                Access control on this resource is inherited from the following container:\n                <a ui-sref="docker.containers.container({ id: $ctrl.resourceControl.ResourceId })">{{ $ctrl.resourceControl.ResourceId | truncate }}</a>\n                <portainer-tooltip\n                  message=""\n                  position="bottom"\n                  style="margin-left: 2px;"\n                ></portainer-tooltip>\n              </td>\n            </tr>\n            <tr ng-if="$ctrl.resourceControl.Type === $ctrl.RCTI.STACK && $ctrl.resourceType !== $ctrl.RCTS.STACK">\n              <td colspan="2">\n                <i class="fa fa-info-circle" aria-hidden="true" style="margin-right: 2px;"></i>\n                Access control on this resource is inherited from the following stack: {{ $ctrl.resourceControl.ResourceId }}\n                <portainer-tooltip\n                  message="Access control applied on a stack is also applied on each resource in the stack."\n                  position="bottom"\n                  style="margin-left: 2px;"\n                ></portainer-tooltip>\n              </td>\n            </tr>\n            \x3c!-- authorized-users --\x3e\n            <tr ng-if="$ctrl.resourceControl.UserAccesses.length > 0">\n              <td></td>\n              <td>\n                <span ng-repeat="user in $ctrl.authorizedUsers">{{ user.Username }}{{ $last ? \'\' : \', \' }} </span>\n              </td>\n            </tr>\n            \x3c!-- !authorized-users --\x3e\n            \x3c!-- authorized-teams --\x3e\n            <tr ng-if="$ctrl.resourceControl.TeamAccesses.length > 0">\n              <td></td>\n              <td>\n                <span ng-repeat="team in $ctrl.authorizedTeams">{{ team.Name }}{{ $last ? \'\' : \', \' }} </span>\n              </td>\n            </tr>\n            \x3c!-- !authorized-teams --\x3e\n            \x3c!-- edit-ownership --\x3e\n            <tr ng-if="$ctrl.canEditOwnership();">\n              <td colspan="2">\n                <a ng-click="$ctrl.state.editOwnership = true"><i class="fa fa-edit space-right" aria-hidden="true"></i></a>\n              </td>\n            </tr>\n            \x3c!-- !edit-ownership --\x3e\n            \x3c!-- edit-ownership-choices --\x3e\n            <tr ng-if="$ctrl.state.editOwnership">\n              <td colspan="2" style="white-space: inherit;">\n                <div class="boxselector_wrapper">\n                  <div ng-if="$ctrl.isAdmin">\n                    <input type="radio" id="access_administrators" ng-model="$ctrl.formValues.Ownership" ng-value="$ctrl.RCO.ADMINISTRATORS" />\n                    <label for="access_administrators">\n                      <div class="boxselector_header">\n                        <i ng-class="\'administrators\' | ownershipicon" aria-hidden="true" style="margin-right: 2px;"></i>\n                        Administrators\n                      </div>\n                      <p></p>\n                    </label>\n                  </div>\n                  <div ng-if="$ctrl.isAdmin">\n                    <input type="radio" id="access_restricted" ng-model="$ctrl.formValues.Ownership" ng-value="$ctrl.RCO.RESTRICTED" />\n                    <label for="access_restricted">\n                      <div class="boxselector_header">\n                        <i ng-class="\'restricted\' | ownershipicon" aria-hidden="true" style="margin-right: 2px;"></i>\n                        Restricted\n                      </div>\n                      <p>\n                        /\n                      </p>\n                    </label>\n                  </div>\n                  <div ng-if="!$ctrl.isAdmin && $ctrl.state.canChangeOwnershipToTeam && $ctrl.availableTeams.length > 0">\n                    <input type="radio" id="access_restricted" ng-model="$ctrl.formValues.Ownership" ng-value="$ctrl.RCO.RESTRICTED" />\n                    <label for="access_restricted">\n                      <div class="boxselector_header">\n                        <i ng-class="\'restricted\' | ownershipicon" aria-hidden="true" style="margin-right: 2px;"></i>\n                        Restricted\n                      </div>\n                      <p ng-if="$ctrl.availableTeams.length === 1">\n                        I want any member of my team (<b>{{ $ctrl.availableTeams[0].Name }}</b\n                        >) to be able to manage this resource\n                      </p>\n                      <p ng-if="$ctrl.availableTeams.length > 1">\n                        \n                      </p>\n                    </label>\n                  </div>\n                  <div>\n                    <input type="radio" id="access_public" ng-model="$ctrl.formValues.Ownership" ng-value="$ctrl.RCO.PUBLIC" />\n                    <label for="access_public">\n                      <div class="boxselector_header">\n                        <i ng-class="\'public\' | ownershipicon" aria-hidden="true" style="margin-right: 2px;"></i>\n                        Public\n                      </div>\n                      <p></p>\n                    </label>\n                  </div>\n                </div>\n              </td>\n            </tr>\n            \x3c!-- edit-ownership-choices --\x3e\n            \x3c!-- select-teams --\x3e\n            <tr ng-if="$ctrl.state.editOwnership && $ctrl.formValues.Ownership === $ctrl.RCO.RESTRICTED && ($ctrl.isAdmin || (!$ctrl.isAdmin && $ctrl.availableTeams.length > 1))">\n              <td colspan="2">\n                <span></span>\n                <span ng-if="$ctrl.isAdmin && $ctrl.availableTeams.length === 0" class="small text-muted" style="margin-left: 10px;">\n                  <a ui-sref="portainer.teams"/a> \n                </span>\n                <span\n                  isteven-multi-select\n                  ng-if="($ctrl.isAdmin && $ctrl.availableTeams.length > 0) || (!$ctrl.isAdmin && $ctrl.availableTeams.length > 1)"\n                  input-model="$ctrl.availableTeams"\n                  output-model="$ctrl.formValues.Ownership_Teams"\n                  button-label="Name"\n                  item-label="Name"\n                  tick-property="selected"\n                  helper-elements="filter"\n                  search-property="Name"\n                  max-labels="3"\n                  translation="{nothingSelected: \'\', search: \'...\'}"\n                >\n                </span>\n              </td>\n            </tr>\n            \x3c!-- !select-teams --\x3e\n            \x3c!-- select-users --\x3e\n            <tr ng-if="$ctrl.isAdmin && $ctrl.state.editOwnership && $ctrl.formValues.Ownership === $ctrl.RCO.RESTRICTED">\n              <td colspan="2">\n                <span></span>\n                <span ng-if="$ctrl.availableUsers.length === 0" class="small text-muted" style="margin-left: 10px;">\n                   <a ui-sref="portainer.users"></a> \n                </span>\n                <span\n                  isteven-multi-select\n                  ng-if="$ctrl.availableUsers.length > 0"\n                  input-model="$ctrl.availableUsers"\n                  output-model="$ctrl.formValues.Ownership_Users"\n                  button-label="Username"\n                  item-label="Username"\n                  tick-property="selected"\n                  helper-elements="filter"\n                  search-property="Username"\n                  max-labels="3"\n                  translation="{nothingSelected: \'\', search: \'...\'}"\n                >\n                </span>\n              </td>\n            </tr>\n            \x3c!-- !select-users --\x3e\n            \x3c!-- ownership-actions --\x3e\n            <tr ng-if="$ctrl.state.editOwnership">\n              <td colspan="2">\n                <div>\n                  <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.state.editOwnership = false"></a>\n                  <a type="button" class="btn btn-primary btn-sm" ng-click="$ctrl.confirmUpdateOwnership()"></a>\n                  <span class="text-danger" ng-if="$ctrl.state.formValidationError" style="margin-left: 5px;">{{ $ctrl.state.formValidationError }}</span>\n                </div>\n              </td>\n            </tr>\n            \x3c!-- !ownership-actions --\x3e\n          </tbody>\n        </table>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(4),r=n(64),i=n(16),s=n(121),o=n(437);angular.module("portainer.app").controller("porAccessControlPanelController",["$q","$state","UserService","TeamService","ResourceControlHelper","ResourceControlService","Notifications","Authentication","ModalService","FormValidator",function(e,t,n,l,c,d,u,p,m,g){var f=this;f.RCO=i.ResourceControlOwnership,f.RCTS=s.ResourceControlTypeString,f.RCTI=s.ResourceControlTypeInt,f.state={displayAccessControlPanel:!1,canEditOwnership:!1,editOwnership:!1,formValidationError:""},f.formValues=new o.AccessControlPanelData,f.authorizedUsers=[],f.availableUsers=[],f.authorizedTeams=[],f.availableTeams=[],f.canEditOwnership=function(){var e=f.resourceControl,t=e&&f.resourceControl.Type===s.ResourceControlTypeInt.CONTAINER&&f.resourceType===s.ResourceControlTypeString.VOLUME,n=e&&f.resourceControl.Type===s.ResourceControlTypeInt.SERVICE&&f.resourceType===s.ResourceControlTypeString.CONTAINER,a=e&&f.resourceControl.Type===s.ResourceControlTypeInt.STACK&&f.resourceType!==s.ResourceControlTypeString.STACK,r=f.disableOwnershipChange;return!t&&!n&&!a&&!r&&!f.state.editOwnership&&(f.isAdmin||f.state.canEditOwnership)},f.confirmUpdateOwnership=function(){(function(){f.state.formValidationError="";var e,t={AccessControlEnabled:f.formValues.Ownership!==i.ResourceControlOwnership.PUBLIC,Ownership:f.formValues.Ownership,AuthorizedUsers:f.formValues.Ownership_Users,AuthorizedTeams:f.formValues.Ownership_Teams},n=f.isAdmin;if(e=g.validateAccessControl(t,n))return f.state.formValidationError=e,!1;return!0})()&&m.confirmAccessControlUpdate((function(e){e&&d.applyResourceControlChange(f.resourceType,f.resourceId,f.resourceControl,f.formValues).then((function(){u.success("Access control successfully updated"),t.reload()})).catch((function(e){u.error("",e,"Unable to update access control")}))}))},this.$onInit=function(){var t=p.getUserDetails(),s=p.isAdmin(),o=t.ID;f.isAdmin=s;var c=f.resourceControl;f.formValues.Ownership=s&&c?c.Ownership===i.ResourceControlOwnership.PRIVATE?i.ResourceControlOwnership.RESTRICTED:c.Ownership:i.ResourceControlOwnership.ADMINISTRATORS;d.retrieveOwnershipDetails(c).then((function(e){return f.authorizedUsers=e.authorizedUsers,f.authorizedTeams=e.authorizedTeams,d.retrieveUserPermissionsOnResource(o,s,c)})).then((function(t){return f.state.canEditOwnership=t.isPartOfRestrictedUsers||t.isLeaderOfAnyRestrictedTeams,f.state.canChangeOwnershipToTeam=t.isPartOfRestrictedUsers,e.all({availableUsers:s?n.users(!1):[],availableTeams:s||t.isPartOfRestrictedUsers?l.teams():[]})})).then((function(e){f.availableUsers=Object(r.a)(e.availableUsers,"Username","asc"),angular.forEach(f.availableUsers,(function(e){Object(a.a)(f.authorizedUsers,{Id:e.Id})&&(e.selected=!0)})),f.availableTeams=Object(r.a)(e.availableTeams,"Name","asc"),angular.forEach(e.availableTeams,(function(e){Object(a.a)(f.authorizedTeams,{Id:e.Id})&&(e.selected=!0)})),1===e.availableTeams.length&&f.formValues.Ownership_Teams.push(e.availableTeams[0]),f.state.displayAccessControlPanel=!0})).catch((function(e){u.error("",e,"Unable to retrieve access control information")}))}}])},function(e,t,n){var a=n(1475);angular.module("portainer.app").component("porAccessManagement",{templateUrl:a,controller:"porAccessManagementController",controllerAs:"ctrl",bindings:{accessControlledEntity:"<",inheritFrom:"<",entityType:"@",updateAccess:"<",actionInProgress:"<"}})},function(e,t){var n="app/portainer/components/accessManagement/porAccessManagement.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="row">\n  <div class="col-sm-12">\n    <rd-widget ng-if="ctrl.availableUsersAndTeams && ctrl.accessControlledEntity">\n      <rd-widget-header icon="fa-user-lock" title-text="Create access"></rd-widget-header>\n      <rd-widget-body>\n        <form class="form-horizontal">\n          <div class="form-group">\n            <label class="col-sm-3 col-lg-2 control-label text-left">\n              /\n            </label>\n            <div class="col-sm-9 col-lg-4">\n              <span class="small text-muted" ng-if="ctrl.availableUsersAndTeams.length === 0">\n                \n              </span>\n              <span\n                isteven-multi-select\n                ng-if="ctrl.availableUsersAndTeams.length > 0"\n                input-model="ctrl.availableUsersAndTeams"\n                output-model="ctrl.formValues.multiselectOutput"\n                button-label="icon \'-\' Name"\n                item-label="icon \'-\' Name"\n                tick-property="ticked"\n                helper-elements="filter"\n                search-property="Name"\n                translation="{nothingSelected: \' /\', search: \'...\'}"\n              >\n              </span>\n            </div>\n          </div>\n\n          <div class="form-group">\n            <label class="col-sm-3 col-lg-2 control-label text-left">\n              Role\n            </label>\n            <div class="col-sm-9 col-lg-4">\n              <span class="text-muted small">\n                <i class="fa fa-user" aria-hidden="true"></i>\n                 <a href="https://www.portainer.io/business-upsell?from=k8s-rbac-access" target="_blank">Portainer</a>.\n              </span>\n            </div>\n          </div>\n\n          \x3c!-- actions --\x3e\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button\n                type="submit"\n                class="btn btn-primary btn-sm"\n                ng-disabled="(ctrl.availableUsersAndTeams | filter:{ticked:true}).length === 0 || ctrl.actionInProgress"\n                ng-click="ctrl.authorizeAccess()"\n                button-spinner="ctrl.actionInProgress"\n              >\n                <span ng-hide="ctrl.state.actionInProgress"><i class="fa fa-plus" aria-hidden="true"></i> Create access</span>\n                <span ng-show="ctrl.state.actionInProgress">Creating access...</span>\n              </button>\n            </div>\n          </div>\n          \x3c!-- !actions --\x3e\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-12">\n    <access-datatable\n      ng-if="ctrl.authorizedUsersAndTeams"\n      title-text="Access"\n      title-icon="fa-user-lock"\n      table-key="{{ \'access_\' + ctrl.entityType }}"\n      order-by="Name"\n      inherit-from="ctrl.inheritFrom"\n      dataset="ctrl.authorizedUsersAndTeams"\n      update-action="ctrl.updateAction"\n      remove-action="ctrl.unauthorizeAccess"\n    >\n    </access-datatable>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(64),r=n(7),i=n(5),s=n(1),o=n.n(s);function l(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.Notifications=t,this.AccessService=n,this.unauthorizeAccess=this.unauthorizeAccess.bind(this),this.updateAction=this.updateAction.bind(this)}var t,n,s,o,d;return e.$inject=["Notifications","AccessService"],t=e,(n=[{key:"updateAction",value:function(){var e=this.accessControlledEntity,t=e.UserAccessPolicies,n=e.TeamAccessPolicies,a=Object(i.a)(this.authorizedUsersAndTeams,{Updated:!0,Type:"user",Inherited:!1}),r=Object(i.a)(this.authorizedUsersAndTeams,{Updated:!0,Type:"team",Inherited:!1}),s=this.AccessService.generateAccessPolicies(t,n,a,r);this.accessControlledEntity.UserAccessPolicies=s.userAccessPolicies,this.accessControlledEntity.TeamAccessPolicies=s.teamAccessPolicies,this.updateAccess()}},{key:"authorizeAccess",value:function(){var e=this.accessControlledEntity,t=e.UserAccessPolicies,n=e.TeamAccessPolicies,a=Object(i.a)(this.formValues.multiselectOutput,(function(e){return"user"===e.Type})),r=Object(i.a)(this.formValues.multiselectOutput,(function(e){return"team"===e.Type})),s=this.AccessService.generateAccessPolicies(t,n,a,r,0);this.accessControlledEntity.UserAccessPolicies=s.userAccessPolicies,this.accessControlledEntity.TeamAccessPolicies=s.teamAccessPolicies,this.updateAccess()}},{key:"unauthorizeAccess",value:function(e){var t=this.accessControlledEntity,n=t.UserAccessPolicies,a=t.TeamAccessPolicies,s=Object(i.a)(e,(function(e){return"user"===e.Type})),o=Object(i.a)(e,(function(e){return"team"===e.Type}));Object(r.a)(s,(function(e){return delete n[e.Id]})),Object(r.a)(o,(function(e){return delete a[e.Id]})),this.updateAccess()}},{key:"$onInit",value:(o=regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.accessControlledEntity,n=this.inheritFrom,e.next=5,this.AccessService.accesses(t,n,this.roles);case 5:r=e.sent,this.availableUsersAndTeams=Object(a.a)(r.availableUsersAndTeams,"Name","asc"),this.authorizedUsersAndTeams=r.authorizedUsersAndTeams,e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),this.availableUsersAndTeams=[],this.authorizedUsersAndTeams=[],this.Notifications.error("",e.t0,"Unable to retrieve accesses");case 15:case"end":return e.stop()}}),e,this,[[0,10]])})),d=function(){var e=this,t=arguments;return new Promise((function(n,a){var r=o.apply(e,t);function i(e){l(r,n,a,i,s,"next",e)}function s(e){l(r,n,a,i,s,"throw",e)}i(void 0)}))},function(){return d.apply(this,arguments)})}])&&c(t.prototype,n),s&&c(t,s),e}();t.default=d,o.a.module("portainer.app").controller("porAccessManagementController",d)},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(438),s=n(1478);r.a.module("portainer.app").component("associatedEndpointsSelector",{templateUrl:s,controller:i.default,bindings:{endpointIds:"<",tags:"<",groups:"<",hasBackendPagination:"<",onAssociate:"<",onDissociate:"<"}})},function(e,t){var n="app/portainer/components/associated-endpoints-selector/associatedEndpointsSelector.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="col-sm-12 small text-muted">\n   \n  \n</div>\n<div class="col-sm-12" style="margin-top: 20px;">\n  \x3c!-- available-endpoints --\x3e\n  <div class="col-sm-6">\n    <div class="text-center small text-muted"></div>\n    <div style="margin-top: 10px;">\n      <group-association-table\n        loaded="$ctrl.loaded"\n        page-type="$ctrl.pageType"\n        table-type="available"\n        retrieve-page="$ctrl.getPaginatedEndpoints"\n        dataset="$ctrl.endpoints.available"\n        entry-click="$ctrl.associateEndpoint"\n        pagination-state="$ctrl.state.available"\n        empty-dataset-message="No endpoint available"\n        tags="$ctrl.tags"\n        show-tags="true"\n        groups="$ctrl.groups"\n        show-groups="true"\n        has-backend-pagination="true"\n      ></group-association-table>\n    </div>\n  </div>\n  \x3c!-- !available-endpoints --\x3e\n  \x3c!-- associated-endpoints --\x3e\n  <div class="col-sm-6">\n    <div class="text-center small text-muted"></div>\n    <div style="margin-top: 10px;">\n      <group-association-table\n        loaded="$ctrl.loaded"\n        page-type="$ctrl.pageType"\n        table-type="associated"\n        retrieve-page="$ctrl.getPaginatedEndpoints"\n        dataset="$ctrl.endpoints.associated"\n        entry-click="$ctrl.dissociateEndpoint"\n        pagination-state="$ctrl.state.associated"\n        empty-dataset-message=""\n        tags="$ctrl.tags"\n        show-tags="true"\n        groups="$ctrl.groups"\n        show-groups="true"\n        has-backend-pagination="true"\n      ></group-association-table>\n    </div>\n  </div>\n  \x3c!-- !associated-endpoints --\x3e\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.app").directive("autoFocus",["$timeout",function(e){return{restrict:"A",link:function(t,n){e((function(){n[0].focus()}))}}}])},function(e,t,n){var a=n(1481);angular.module("portainer.app").component("betaPanel",{templateUrl:a})},function(e,t){var n="app/portainer/components/beta-panel/betaPanel.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<information-panel title-text="Information">\n  <span class="small">\n    <p class="text-muted">\n      <i class="fa fa-flask orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n      This is a beta feature.\n    </p>\n  </span>\n</information-panel>\n')}]),e.exports=n},function(e,t){angular.module("portainer.app").directive("buttonSpinner",(function(){return{restrict:"A",scope:{spinning:"=buttonSpinner"},transclude:!0,template:'<ng-transclude></ng-transclude><span ng-show="spinning"><i class="fa fa-circle-notch fa-spin" style="margin-left: 2px;"></i>&nbsp;</span>'}}))},function(e,t,n){var a=n(1484);angular.module("portainer.app").component("codeEditor",{templateUrl:a,controller:"CodeEditorController",bindings:{identifier:"@",placeholder:"@",yml:"<",readOnly:"<",onChange:"<",value:"<"}})},function(e,t){var n="app/portainer/components/code-editor/codeEditor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<textarea id="{{ $ctrl.identifier }}" class="form-control" placeholder="{{ $ctrl.placeholder }}"></textarea>\n')}]),e.exports=n},function(e,t){angular.module("portainer.app").controller("CodeEditorController",["$document","CodeMirrorService","$scope",function(e,t,n){var a=this;this.$onInit=function(){e.ready((function(){var r=e[0].getElementById(a.identifier);a.editor=t.applyCodeMirrorOnElement(r,a.yml,a.readOnly),a.onChange&&a.editor.on("change",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.$apply((function(){return a.onChange.apply(a,t)}))})),a.value&&a.editor.setValue(a.value)}))}}])},function(e,t,n){"use strict";n.r(t);var a=n(439),r=n(1487);angular.module("portainer.app").component("customTemplateCommonFields",{templateUrl:r,controller:a.default,bindings:{formValues:"="}})},function(e,t){var n="app/portainer/components/custom-template-common-fields/customTemplateCommonFields.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<ng-form name="commonCustomTemplateForm">\n  \x3c!-- title-input --\x3e\n  <div class="form-group">\n    <label for="template_title" class="col-sm-3 col-lg-2 control-label text-left">\n      \n    </label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="text" class="form-control" ng-model="$ctrl.formValues.Title" id="template_title" name="template_title" placeholder=" mytemplate" auto-focus required />\n    </div>\n  </div>\n  <div class="form-group" ng-show="commonCustomTemplateForm.template_title.$invalid">\n    <div class="col-sm-12 small text-warning">\n      <div ng-messages="commonCustomTemplateForm.template_title.$error">\n        <p ng-message="required"> <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n      </div>\n    </div>\n  </div>\n  \x3c!-- !title-input --\x3e\n\n  \x3c!-- description-input --\x3e\n  <div class="form-group">\n    <label for="description" class="col-sm-3 col-lg-2 control-label text-left"></label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="text" class="form-control" id="description" ng-model="$ctrl.formValues.Description" name="description" required />\n    </div>\n  </div>\n  <div class="form-group" ng-show="commonCustomTemplateForm.description.$invalid">\n    <div class="col-sm-12 small text-warning">\n      <div ng-messages="commonCustomTemplateForm.description.$error">\n        <p ng-message="required"> <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n      </div>\n    </div>\n  </div>\n  \x3c!-- !description-input --\x3e\n\n  \x3c!-- note-input --\x3e\n  <div class="form-group">\n    <label for="note" class="col-sm-3 col-lg-2 control-label text-left"></label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="text" class="form-control" id="note" ng-model="$ctrl.formValues.Note" />\n    </div>\n  </div>\n  \x3c!-- !note-input --\x3e\n\n  \x3c!-- icon-url-input --\x3e\n  <div class="form-group">\n    <label for="icon-url" class="col-sm-3 col-lg-2 control-label text-left"> URL</label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="text" class="form-control" id="icon-url" ng-model="$ctrl.formValues.Logo" />\n    </div>\n  </div>\n  \x3c!-- !icon-url-input --\x3e\n\n  \x3c!-- platform-input --\x3e\n  <div class="form-group">\n    <label for="platform" class="col-sm-3 col-lg-2 control-label text-left"></label>\n    <div class="col-sm-9 col-lg-10">\n      <select class="form-control" ng-model="$ctrl.formValues.Platform" ng-options="+(opt.value) as opt.label for opt in $ctrl.platformTypes"> </select>\n    </div>\n  </div>\n  \x3c!-- !platform-input --\x3e\n\n  \x3c!-- platform-input --\x3e\n  <div class="form-group">\n    <label for="platform" class="col-sm-3 col-lg-2 control-label text-left"></label>\n    <div class="col-sm-9 col-lg-10">\n      <select class="form-control" ng-model="$ctrl.formValues.Type" ng-options="+(opt.value) as opt.label for opt in $ctrl.templateTypes"> </select>\n    </div>\n  </div>\n  \x3c!-- !platform-input --\x3e\n</ng-form>\n')}]),e.exports=n},function(e,t){angular.module("portainer.docker").controller("CustomTemplatesListController",["$scope","$controller","DatatableService",function(e,t,n){angular.extend(this,t("GenericDatatableController",{$scope:e})),this.$onInit=function(){this.setDefaults(),this.prepareTableFromDataset(),this.state.orderBy=this.orderBy;var e=n.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=n.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var a=n.getDataTableFilters(this.tableKey);null!==a&&(this.filters=a),this.filters&&this.filters.state&&(this.filters.state.open=!1);var r=n.getDataTableSettings(this.tableKey);null!==r&&(this.settings=r,this.settings.open=!1),this.onSettingsRepeaterChange()}}])},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(1490);r.a.module("portainer.app").component("customTemplatesList",{templateUrl:i,controller:"CustomTemplatesListController",bindings:{titleText:"@",titleIcon:"@",templates:"<",tableKey:"@",onSelectClick:"<",showSwarmStacks:"<",onDeleteClick:"<",isEditAllowed:"<"}})},function(e,t){var n="app/portainer/components/custom-templates-list/customTemplatesList.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n      </div>\n      <div class="actionBar">\n        <button type="button" class="btn btn-sm btn-primary" ui-sref="docker.templates.custom.new">\n          <i class="fa fa-plus space-right" aria-hidden="true"></i>\n        </button>\n      </div>\n\n      <div class="searchBar" style="border-top: 2px solid #f6f6f6;">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n\n      <div class="blocklist">\n        <template-item\n          ng-repeat="template in $ctrl.templates | filter:$ctrl.state.textFilter"\n          model="template"\n          type-label="{{ template.Type === 1 ? \'swarm\' : \'standalone\' }}"\n          on-select="($ctrl.onSelectClick)"\n        >\n          <template-item-actions>\n            <div ng-if="$ctrl.isEditAllowed(template)" style="display: flex;">\n              <a ui-sref="docker.templates.custom.edit({id: template.Id})" ng-click="$event.stopPropagation();" class="btn btn-primary btn-xs" style="margin-right: 10px;">\n                Edit\n              </a>\n              <button class="btn btn-danger btn-xs" ng-click="$ctrl.onDeleteClick(template.Id); $event.stopPropagation();">Delete</button>\n            </div>\n          </template-item-actions>\n        </template-item>\n        <div ng-if="!$ctrl.templates" class="text-center text-muted">\n          ...\n        </div>\n        <div ng-if="($ctrl.templates | filter: $ctrl.state.textFilter).length === 0" class="text-center text-muted">\n          \n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(1492);angular.module("portainer.app").component("accessViewerDatatable",{templateUrl:a,controller:"GenericDatatableController",bindings:{titleText:"@",titleIcon:"@",tableKey:"@",orderBy:"@",dataset:"<"}})},function(e,t){var n="app/portainer/components/datatables/access-viewer-datatable/accessViewerDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <div class="searchBar">\n    <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n    <input type="text" class="searchInput" placeholder="..." ng-model-options="{ debounce: 300 }" />\n  </div>\n  <div class="table-responsive">\n    <table class="table table-hover nowrap-cells">\n      <thead>\n        <tr>\n          <th>\n            Endpoint\n          </th>\n          <th>\n            Role\n          </th>\n          <th>Access origin</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr ng-if="!$ctrl.dataset">\n          <td colspan="3" class="text-center text-muted">Select a user to show associated access and role</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(1494);angular.module("portainer.app").component("endpointsDatatable",{templateUrl:a,controller:"EndpointsDatatableController",bindings:{titleText:"@",titleIcon:"@",tableKey:"@",orderBy:"@",reverseOrder:"<",removeAction:"<",retrievePage:"<"}})},function(e,t){var n="app/portainer/components/datatables/endpoints-datatable/endpointsDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n      </div>\n      <div class="actionBar">\n        <button type="button" class="btn btn-sm btn-danger" ng-disabled="$ctrl.state.selectedItemCount === 0" ng-click="$ctrl.removeAction($ctrl.state.selectedItems)">\n          <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>\n        </button>\n        <button type="button" class="btn btn-sm btn-primary" ui-sref="portainer.endpoints.new"> <i class="fa fa-plus space-right" aria-hidden="true"></i> </button>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          auto-focus\n          placeholder="..."\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <span class="md-checkbox">\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Type\')">\n                  Type\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Type\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Type\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'URL\')">\n                  URL\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'URL\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'URL\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'GroupName\')">\n                  Group\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'GroupName\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'GroupName\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in $ctrl.state.filteredDataSet | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit"\n              total-items="$ctrl.state.totalFilteredDataSet"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>\n                <span class="md-checkbox">\n                  <input id="select_{{ $index }}" type="checkbox" ng-model="item.Checked" ng-click="$ctrl.selectItem(item, $event)" />\n                  <label for="select_{{ $index }}"></label>\n                </span>\n                <a ui-sref="portainer.endpoints.endpoint({id: item.Id})">{{ item.Name }}</a>\n              </td>\n              <td>\n                <span>\n                  <i ng-class="item.Type | endpointtypeicon" aria-hidden="true" style="margin-right: 2px;"></i>\n                  {{ item.Type | endpointtypename }}\n                </span>\n              </td>\n              <td>\n                <span ng-if="item.Type !== 4">{{ item.URL | stripprotocol }}</span>\n                <span ng-if="item.Type === 4">-</span>\n              </td>\n              <td>{{ item.GroupName }}</td>\n              <td>\n                <a ui-sref="portainer.endpoints.endpoint.access({id: item.Id})"> <i class="fa fa-users" aria-hidden="true"></i>  </a>\n              </td>\n            </tr>\n            <tr ng-if="$ctrl.state.loading">\n              <td colspan="5" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="!$ctrl.state.loading && $ctrl.state.filteredDataSet.length === 0">\n              <td colspan="5" class="text-center text-muted">No endpoint available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="!$ctrl.state.loading">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5" on-page-change="$ctrl.onPageChange(newPageNumber, oldPageNumber)"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.app").controller("EndpointsDatatableController",["$scope","$controller","DatatableService","PaginationService",function(e,t,n,a){angular.extend(this,t("GenericDatatableController",{$scope:e})),this.state=Object.assign(this.state,{orderBy:this.orderBy,loading:!0,filteredDataSet:[],totalFilteredDataset:0,pageNumber:1}),this.paginationChanged=function(){var e=this;this.state.loading=!0,this.state.filteredDataSet=[];var t=(this.state.pageNumber-1)*this.state.paginatedItemLimit+1;this.retrievePage(t,this.state.paginatedItemLimit,this.state.textFilter).then((function(t){e.state.filteredDataSet=t.endpoints,e.state.totalFilteredDataSet=t.totalCount})).finally((function(){e.state.loading=!1}))},this.onPageChange=function(e){this.state.pageNumber=e,this.paginationChanged()},this.onTextFilterChange=function(){var e=this.state.textFilter;n.setDataTableTextFilters(this.tableKey,e),this.paginationChanged()},this.changePaginationLimit=function(){a.setPaginationLimit(this.tableKey,this.state.paginatedItemLimit),this.paginationChanged()},this.$onInit=function(){this.setDefaults(),this.prepareTableFromDataset();var e=n.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=n.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var a=n.getDataTableFilters(this.tableKey);null!==a&&(this.filters=a),this.filters&&this.filters.state&&(this.filters.state.open=!1),this.paginationChanged()}}])},function(e,t,n){"use strict";n.r(t),function(e){var t=n(23),a=n(52),r=n(7),i=n(5),s=n(2),o=(n(1497),n(16));angular.module("portainer.app").controller("GenericDatatableController",["$interval","PaginationService","DatatableService","PAGINATION_MAX_ITEMS",function(n,l,c,d){this.RCO=o.ResourceControlOwnership,this.state={selectAll:!1,orderBy:this.orderBy,paginatedItemLimit:d,displayTextFilter:!1,get selectedItemCount(){return this.selectedItems.length||0},selectedItems:[]},this.settings={open:!1,repeater:{autoRefresh:!1,refreshRate:"30"}},this.resetSelectionState=function(){this.state.selectAll=!1,this.state.selectedItems=[],Object(s.a)(this.state.filteredDataSet,(function(e){return e.Checked=!1}))},this.onTextFilterChange=function(){c.setDataTableTextFilters(this.tableKey,this.state.textFilter)},this.changeOrderBy=function(e){this.state.reverseOrder=this.state.orderBy===e&&!this.state.reverseOrder,this.state.orderBy=e,c.setDataTableOrder(this.tableKey,e,this.state.reverseOrder)},this.selectItem=function(e,n){var s=this;if(n&&n.originalEvent.shiftKey&&this.state.firstClickedItem){var o=this.state.filteredDataSet.indexOf(this.state.firstClickedItem),l=this.state.filteredDataSet.indexOf(e),c=Object(i.a)(this.state.filteredDataSet,(function(e,t){return function(e,t,n){return e>=t&&e<=n||e>=n&&e<=t}(t,o,l)})),d=this.state.firstClickedItem.Checked;Object(r.a)(c,(function(e){s.allowSelection(e)&&(e.Checked=d)})),this.state.firstClickedItem=e}else n&&(e.Checked=!e.Checked,this.state.firstClickedItem=e);this.state.selectedItems=Object(a.a)(Object(t.a)(this.state.selectedItems,this.state.filteredDataSet)).filter((function(e){return e.Checked})),n&&this.state.selectAll&&this.state.selectedItems.length!==this.state.filteredDataSet.length&&(this.state.selectAll=!1),this.onSelectionChanged()},this.selectAll=function(){this.state.firstClickedItem=null;for(var e=0;e<this.state.filteredDataSet.length;e++){var t=this.state.filteredDataSet[e];this.allowSelection(t)&&t.Checked!==this.state.selectAll&&(t.Checked=this.state.selectAll,this.selectItem(t))}this.onSelectionChanged()},this.allowSelection=function(){return!0},this.prepareTableFromDataset=function(){},this.onSelectionChanged=function(){},this.changePaginationLimit=function(){l.setPaginationLimit(this.tableKey,this.state.paginatedItemLimit)},this.setDefaults=function(){this.showTextFilter=!!this.showTextFilter&&this.showTextFilter,this.state.reverseOrder=!!this.reverseOrder&&this.reverseOrder,this.state.paginatedItemLimit=l.getPaginationLimit(this.tableKey)},this.$onInit=function(){this.setDefaults(),this.prepareTableFromDataset(),this.state.orderBy=this.orderBy;var e=c.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=c.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var n=c.getDataTableFilters(this.tableKey);null!==n&&(this.filters=n),this.filters&&this.filters.state&&(this.filters.state.open=!1);var a=c.getDataTableSettings(this.tableKey);null!==a&&(this.settings=a,this.settings.open=!1),this.onSettingsRepeaterChange()},this.repeater=void 0,this.$onDestroy=function(){this.stopRepeater()},this.stopRepeater=function(){angular.isDefined(this.repeater)&&(n.cancel(this.repeater),this.repeater=void 0)},this.startRepeater=function(){var e=this;this.repeater=n((function(){e.refreshCallback()}),1e3*this.settings.repeater.refreshRate)},this.onSettingsRepeaterChange=function(){this.stopRepeater(),angular.isDefined(this.refreshCallback)&&this.settings.repeater.autoRefresh&&(this.startRepeater(),e("#refreshRateChange").show(),e("#refreshRateChange").fadeOut(1500)),c.setDataTableSettings(this.tableKey,this.settings)}}])}.call(this,n(45))},function(e,t,n){},function(e,t,n){var a=n(1499);angular.module("portainer.app").component("groupsDatatable",{templateUrl:a,controller:"GenericDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",removeAction:"<"}})},function(e,t){var n="app/portainer/components/datatables/groups-datatable/groupsDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n      </div>\n      <div class="actionBar">\n        <button type="button" class="btn btn-sm btn-danger" ng-disabled="$ctrl.state.selectedItemCount === 0" ng-click="$ctrl.removeAction($ctrl.state.selectedItems)">\n          <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>\n        </button>\n        <button type="button" class="btn btn-sm btn-primary" ui-sref="portainer.groups.new"> <i class="fa fa-plus space-right" aria-hidden="true"></i> </button>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <span class="md-checkbox">\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>\n                <span class="md-checkbox">\n                  <input id="select_{{ $index }}" type="checkbox" ng-model="item.Checked" ng-click="$ctrl.selectItem(item, $event)" />\n                  <label for="select_{{ $index }}"></label>\n                </span>\n                <a ui-sref="portainer.groups.group({id: item.Id})">{{ item.Name }}</a>\n              </td>\n              <td>\n                <a ui-sref="portainer.groups.group.access({id: item.Id})"> <i class="fa fa-users" aria-hidden="true"></i>  </a>\n              </td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="3" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="3" class="text-center text-muted">No group available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(1501);angular.module("portainer.app").component("registriesDatatable",{templateUrl:a,controller:"GenericDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",accessManagement:"<",removeAction:"<",canBrowse:"<"}})},function(e,t){var n="app/portainer/components/datatables/registries-datatable/registriesDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n      </div>\n      <div class="actionBar" ng-if="$ctrl.accessManagement">\n        <button type="button" class="btn btn-sm btn-danger" ng-disabled="$ctrl.state.selectedItemCount === 0" ng-click="$ctrl.removeAction($ctrl.state.selectedItems)">\n          <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>\n        </button>\n        <button type="button" class="btn btn-sm btn-primary" ui-sref="portainer.registries.new"> <i class="fa fa-plus space-right" aria-hidden="true"></i> </button>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <span class="md-checkbox" ng-if="$ctrl.accessManagement">\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'URL\')">\n                  URL\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'URL\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'URL\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>\n                <span class="md-checkbox" ng-if="$ctrl.accessManagement">\n                  <input id="select_{{ $index }}" type="checkbox" ng-model="item.Checked" ng-click="$ctrl.selectItem(item, $event)" />\n                  <label for="select_{{ $index }}"></label>\n                </span>\n                <a ui-sref="portainer.registries.registry({id: item.Id})" ng-if="$ctrl.accessManagement">{{ item.Name }}</a>\n                <span ng-if="!$ctrl.accessManagement">{{ item.Name }}</span>\n                <span ng-if="item.Authentication" style="margin-left: 5px;" class="label label-info image-tag">authentication-enabled</span>\n              </td>\n              <td>\n                {{ item.URL }}\n              </td>\n              <td>\n                <a ui-sref="portainer.registries.registry.access({id: item.Id})" ng-if="$ctrl.accessManagement"> <i class="fa fa-users" aria-hidden="true"></i>  </a>\n                <span class="text-muted space-left" style="cursor: pointer;" data-toggle="tooltip" title="Portainer">\n                  <i class="fa fa-search" aria-hidden="true"></i> Browse</span\n                >\n              </td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="3" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="3" class="text-center text-muted">No registry available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(1503);angular.module("portainer.app").component("rolesDatatable",{templateUrl:a,controller:"GenericDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<"}})},function(e,t){var n="app/portainer/components/datatables/roles-datatable/rolesDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input type="text" class="searchInput" placeholder="..." auto-focus ng-model-options="{ debounce: 300 }" />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                \n              </th>\n              <th>\n                Description\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td class="text-muted">Endpoint administrator</td>\n              <td class="text-muted">Full control of all resources in an endpoint</td>\n            </tr>\n            <tr>\n              <td class="text-muted">Helpdesk</td>\n              <td class="text-muted">Read-only access of all resources in an endpoint</td>\n            </tr>\n            <tr>\n              <td class="text-muted">Read-only user</td>\n              <td class="text-muted">Read-only access of assigned resources in an endpoint</td>\n            </tr>\n            <tr>\n              <td class="text-muted">Standard user</td>\n              <td class="text-muted">Full control of assigned resources in an endpoint</td>\n            </tr>\n          </tbody>\n        </table>\n        <div class="footer">\n          <div class="paginationControls">\n            <form class="form-inline">\n              <span class="limitSelector">\n                <span style="margin-right: 5px;">\n                  \n                </span>\n                <select class="form-control">\n                  <option value="0"></option>\n                  <option value="10">10</option>\n                  <option value="25">25</option>\n                  <option value="50">50</option>\n                  <option value="100">100</option>\n                </select>\n              </span>\n              <dir-pagination-controls max-size="5"></dir-pagination-controls>\n            </form>\n          </div>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(1505);angular.module("portainer.app").component("stacksDatatable",{templateUrl:a,controller:"StacksDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",removeAction:"<",offlineMode:"<",refreshCallback:"<",createEnabled:"<"}})},function(e,t){var n="app/portainer/components/datatables/stacks-datatable/stacksDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"><i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n        <div class="settings">\n          <span class="setting" ng-class="{ \'setting-active\': $ctrl.settings.open }" uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.settings.open">\n            <span uib-dropdown-toggle><i class="fa fa-cog" aria-hidden="true"></i> </span>\n            <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n              <div class="tableMenu">\n                <div class="menuHeader">\n                  \n                </div>\n                <div class="menuContent">\n                  <div>\n                    <div class="md-checkbox">\n                      <input id="setting_auto_refresh" type="checkbox" ng-model="$ctrl.settings.repeater.autoRefresh" ng-change="$ctrl.onSettingsRepeaterChange()" />\n                      <label for="setting_auto_refresh"></label>\n                    </div>\n                    <div ng-if="$ctrl.settings.repeater.autoRefresh">\n                      <label for="settings_refresh_rate">\n                        \n                      </label>\n                      <select id="settings_refresh_rate" ng-model="$ctrl.settings.repeater.refreshRate" ng-change="$ctrl.onSettingsRepeaterChange()" class="small-select">\n                        <option value="10">10s</option>\n                        <option value="30">30s</option>\n                        <option value="60">1min</option>\n                        <option value="120">2min</option>\n                        <option value="300">5min</option>\n                      </select>\n                      <span>\n                        <i id="refreshRateChange" class="fa fa-check green-icon" aria-hidden="true" style="margin-top: 7px; display: none;"></i>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.settings.open = false;"></a>\n                </div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div class="actionBar" ng-if="!$ctrl.offlineMode" authorization="PortainerStackCreate, PortainerStackDelete">\n        <button\n          type="button"\n          class="btn btn-sm btn-danger"\n          authorization="PortainerStackDelete"\n          ng-disabled="$ctrl.state.selectedItemCount === 0"\n          ng-click="$ctrl.removeAction($ctrl.state.selectedItems)"\n        >\n          <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>\n        </button>\n        <button ng-disabled="!$ctrl.createEnabled" type="button" class="btn btn-sm btn-primary" ui-sref="docker.stacks.newstack" authorization="PortainerStackCreate">\n          <i class="fa fa-plus space-right" aria-hidden="true"></i>\n        </button>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th uib-dropdown dropdown-append-to-body auto-close="disabled" is-open="$ctrl.filters.state.open">\n                <span class="md-checkbox" ng-if="!$ctrl.offlineMode" authorization="PortainerStackCreate, PortainerStackDelete">\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n                <div>\n                  <span uib-dropdown-toggle ng-class="[\'table-filter\', { \'filter-active\': $ctrl.filters.state.enabled }]">\n                    \n                    <i ng-class="[\'fa\', { \'fa-filter\': !$ctrl.filters.state.enabled, \'fa-check\': $ctrl.filters.state.enabled }]" aria-hidden="true"></i>\n                  </span>\n                </div>\n                <div class="dropdown-menu" uib-dropdown-menu>\n                  <div class="tableMenu">\n                    <div class="menuHeader">\n                      Filter by activity\n                    </div>\n                    <div class="menuContent">\n                      <div class="md-checkbox">\n                        <input id="filter_usage_activeStacks" type="checkbox" ng-model="$ctrl.filters.state.showActiveStacks" ng-change="$ctrl.onFilterChange()" />\n                        <label for="filter_usage_activeStacks">Active stacks</label>\n                      </div>\n                      <div class="md-checkbox">\n                        <input id="filter_usage_unactiveStacks" type="checkbox" ng-model="$ctrl.filters.state.showUnactiveStacks" ng-change="$ctrl.onFilterChange()" />\n                        <label for="filter_usage_unactiveStacks">Inactive stacks</label>\n                      </div>\n                    </div>\n                    <div>\n                      <a type="button" class="btn btn-default btn-sm" ng-click="$ctrl.filters.state.open = false;"></a>\n                    </div>\n                  </div>\n                </div>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Type\')">\n                  Type\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Type\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Type\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th></th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'ResourceControl.Ownership\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'ResourceControl.Ownership\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'ResourceControl.Ownership\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter: $ctrl.applyFilters | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>\n                <span class="md-checkbox" ng-if="!$ctrl.offlineMode" authorization="PortainerStackCreate, PortainerStackDelete">\n                  <input id="select_{{ $index }}" type="checkbox" ng-model="item.Checked" ng-click="$ctrl.selectItem(item, $event)" ng-disabled="!$ctrl.allowSelection(item)" />\n                  <label for="select_{{ $index }}"></label>\n                </span>\n                <a ng-if="!$ctrl.offlineMode" ui-sref="docker.stacks.stack({ name: item.Name, id: item.Id, type: item.Type, external: item.External })">{{ item.Name }}</a>\n                <span ng-if="$ctrl.offlineMode">{{ item.Name }}</span>\n                <span ng-if="item.Status == 2" style="margin-left: 10px;" class="label label-warning image-tag space-left">Inactive</span>\n              </td>\n              <td>{{ item.Type === 1 ? \'Swarm\' : \'Compose\' }}</td>\n              <td>\n                <span\n                  ng-if="item.External"\n                  class="interactive"\n                  tooltip-append-to-body="true"\n                  tooltip-placement="bottom"\n                  tooltip-class="portainer-tooltip"\n                  uib-tooltip="Portainer"\n                >\n                  Limited <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-left: 2px;"></i>\n                </span>\n                <span ng-if="!item.External">Total</span>\n              </td>\n              <td>\n                <span>\n                  <i ng-class="item.ResourceControl.Ownership | ownershipicon" aria-hidden="true"></i>\n                  {{ item.ResourceControl.Ownership ? item.ResourceControl.Ownership : item.ResourceControl.Ownership = $ctrl.RCO.ADMINISTRATORS }}\n                </span>\n              </td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="4" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="4" class="text-center text-muted"></td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0">\n          {{ $ctrl.state.selectedItemCount }}\n          item(s) selected\n        </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.app").controller("StacksDatatableController",["$scope","$controller","DatatableService","Authentication",function(e,t,n,a){angular.extend(this,t("GenericDatatableController",{$scope:e})),this.filters={state:{open:!1,enabled:!1,showActiveStacks:!0,showUnactiveStacks:!0}},this.allowSelection=function(e){return(!e.External||2!==e.Type)&&!(e.External&&!this.isAdmin)},this.applyFilters=function(e){var t=this.filters.state,n=t.showActiveStacks,a=t.showUnactiveStacks;return 1===e.Status&&n||2===e.Status&&a||e.External}.bind(this),this.onFilterChange=function(){var e=this.filters.state,t=e.showActiveStacks,a=e.showUnactiveStacks;this.filters.state.enabled=!t||!a,n.setDataTableFilters(this.tableKey,this.filters)}.bind(this),this.$onInit=function(){this.isAdmin=a.isAdmin(),this.setDefaults(),this.prepareTableFromDataset(),this.state.orderBy=this.orderBy;var e=n.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=n.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var r=n.getDataTableFilters(this.tableKey);null!==r&&(this.filters=r),this.filters&&this.filters.state&&(this.filters.state.open=!1);var i=n.getDataTableSettings(this.tableKey);null!==i&&(this.settings=i,this.settings.open=!1),this.onSettingsRepeaterChange()}}])},function(e,t,n){var a=n(1508);angular.module("portainer.app").component("tagsDatatable",{templateUrl:a,controller:"GenericDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",removeAction:"<"}})},function(e,t){var n="app/portainer/components/datatables/tags-datatable/tagsDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n      </div>\n      <div class="actionBar">\n        <button type="button" class="btn btn-sm btn-danger" ng-disabled="$ctrl.state.selectedItemCount === 0" ng-click="$ctrl.removeAction($ctrl.state.selectedItems)">\n          <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>\n        </button>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <span class="md-checkbox">\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>\n                <span class="md-checkbox">\n                  <input id="select_{{ $index }}" type="checkbox" ng-model="item.Checked" ng-click="$ctrl.selectItem(item, $event)" />\n                  <label for="select_{{ $index }}"></label>\n                </span>\n                {{ item.Name }}\n              </td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="1" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="1" class="text-center text-muted">No tag available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(1510);angular.module("portainer.app").component("teamsDatatable",{templateUrl:a,controller:"GenericDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",removeAction:"<"}})},function(e,t){var n="app/portainer/components/datatables/teams-datatable/teamsDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n      </div>\n      <div class="actionBar">\n        <button type="button" class="btn btn-sm btn-danger" ng-disabled="$ctrl.state.selectedItemCount === 0" ng-click="$ctrl.removeAction($ctrl.state.selectedItems)">\n          <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>\n        </button>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <span class="md-checkbox">\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>\n                <span class="md-checkbox">\n                  <input id="select_{{ $index }}" type="checkbox" ng-model="item.Checked" ng-click="$ctrl.selectItem(item, $event)" />\n                  <label for="select_{{ $index }}"></label>\n                </span>\n                <a ui-sref="portainer.teams.team({id: item.Id})">{{ item.Name }}</a>\n              </td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td class="text-center text-muted"></td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(440),s=n(1512);r.a.module("portainer.app").component("usersDatatable",{templateUrl:s,controller:i.default,bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",removeAction:"<",authenticationMethod:"<"}})},function(e,t){var n="app/portainer/components/datatables/users-datatable/usersDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n      </div>\n      <div class="actionBar">\n        <button type="button" class="btn btn-sm btn-danger" ng-disabled="$ctrl.state.selectedItemCount === 0" ng-click="$ctrl.removeAction($ctrl.state.selectedItems)">\n          <i class="fa fa-trash-alt space-right" aria-hidden="true"></i>\n        </button>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <span class="md-checkbox">\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.changeOrderBy(\'Username\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Username\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Username\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'RoleName\')">\n                  Role\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'RoleName\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'RoleName\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'AuthenticationMethod\')">\n                  Authentication\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'AuthenticationMethod\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'AuthenticationMethod\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>\n                <span class="md-checkbox">\n                  <input id="select_{{ $index }}" type="checkbox" ng-model="item.Checked" ng-click="$ctrl.selectItem(item, $event)" ng-disabled="!$ctrl.allowSelection(item)" />\n                  <label for="select_{{ $index }}"></label>\n                </span>\n                <a ui-sref="portainer.users.user({id: item.Id})">{{ item.Username }}</a>\n              </td>\n              <td>\n                <span>\n                  <i class="fa fa-user-circle" aria-hidden="true" style="margin-right: 5px;" ng-if="item.Role === 1 && !item.isTeamLeader"></i>\n                  <i class="fa fa-user-plus" aria-hidden="true" style="margin-right: 5px;" ng-if="item.Role !== 1 && item.isTeamLeader"></i>\n                  <i class="fa fa-user" aria-hidden="true" style="margin-right: 5px;" ng-if="item.Role !== 1 && !item.isTeamLeader"></i>\n                  {{ item.RoleName ? item.RoleName : \'-\' }}\n                </span>\n              </td>\n              <td>\n                <span ng-if="item.Id === 1 || ($ctrl.authenticationMethod !== 2 && $ctrl.authenticationMethod !== 3)">Internal</span>\n                <span ng-if="item.Id !== 1 && $ctrl.authenticationMethod === 2">LDAP</span>\n                <span ng-if="item.Id !== 1 && $ctrl.authenticationMethod === 3">OAuth</span>\n              </td>\n            </tr>\n            <tr ng-if="!$ctrl.dataset">\n              <td colspan="3" class="text-center text-muted">...</td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="3" class="text-center text-muted">No user available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},,,,,function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(441),s=n(1518);r.a.module("portainer.app").component("endpointItem",{templateUrl:s,bindings:{model:"<",onSelect:"<",onEdit:"<",isAdmin:"<",tags:"<"},controller:i.default})},function(e,t,n){var a="app/portainer/components/endpoint-list/endpoint-item/endpointItem.html",r='<div class="blocklist-item" ng-click="$ctrl.onSelect($ctrl.model)">\n  <div class="blocklist-item-box">\n    <span ng-class="[\'blocklist-item-logo\', \'endpoint-item\', { azure: $ctrl.model.Type === 3 }]">\n      <i\n        ng-if="$ctrl.model.Type !== 4 && $ctrl.model.Type !== 5 && $ctrl.model.Type !== 6 && $ctrl.model.Type !== 7"\n        ng-class="$ctrl.model.Type | endpointtypeicon"\n        class="fa-4x blue-icon"\n        aria-hidden="true"\n      ></i>\n      <img ng-if="$ctrl.model.Type === 4" src="'+n(1519)+'" />\n      <img ng-if="$ctrl.model.Type === 5 || $ctrl.model.Type === 6" src="'+n(1520)+'" />\n      <img ng-if="$ctrl.model.Type === 7" src="'+n(1521)+'" />\n    </span>\n\n    <span class="col-sm-12">\n      <div class="blocklist-item-line endpoint-item">\n        <span>\n          <span class="blocklist-item-title endpoint-item">\n            {{ $ctrl.model.Name }}\n          </span>\n          <span class="space-left blocklist-item-subtitle">\n            <span ng-if="$ctrl.model.Type === 4 || $ctrl.model.Type === 7" class="small text-muted">\n              <span ng-if="$ctrl.model.EdgeID"><i class="fas fa-link"></i> associated</span>\n              <span ng-if="!$ctrl.model.EdgeID"><i class="fas fa-unlink"></i> <s>associated</s></span>\n            </span>\n            <span class="label label-{{ $ctrl.model.Status | endpointstatusbadge }}" ng-if="$ctrl.model.Type !== 4 && $ctrl.model.Type !== 7">\n              {{ $ctrl.model.Status === 1 ? \'up\' : \'down\' }}\n            </span>\n            <span class="space-left small text-muted" ng-if="$ctrl.model.Snapshots[0]">\n              {{ $ctrl.model.Snapshots[0].Time | getisodatefromtimestamp }}\n            </span>\n            <span class="space-left small text-muted" ng-if="$ctrl.model.Kubernetes.Snapshots[0]">\n              {{ $ctrl.model.Kubernetes.Snapshots[0].Time | getisodatefromtimestamp }}\n            </span>\n          </span>\n        </span>\n        <span>\n          <span class="small" ng-if="$ctrl.model.GroupName">  {{ $ctrl.model.GroupName }} </span>\n          <button ng-if="$ctrl.isAdmin" class="btn btn-link btn-xs" ng-click="$ctrl.editEndpoint($event)"><i class="fa fa-pencil-alt"></i> </button>\n        </span>\n      </div>\n\n      <div class="blocklist-item-line endpoint-item" ng-if="$ctrl.model.Snapshots[0]">\n        <span class="blocklist-item-desc">\n          <span>\n            <span style="padding: 0 7px 0 0;">\n              <i class="fa fa-th-list space-right" aria-hidden="true"></i>{{ $ctrl.model.Snapshots[0].StackCount }}\n              {{ $ctrl.model.Snapshots[0].StackCount === 1 ? \'\' : \'\' }}\n            </span>\n            <span style="padding: 0 7px 0 7px;" ng-if="$ctrl.model.Snapshots[0].Swarm">\n              <i class="fa fa-list-alt space-right" aria-hidden="true"></i>{{ $ctrl.model.Snapshots[0].ServiceCount }}\n              {{ $ctrl.model.Snapshots[0].ServiceCount === 1 ? \'service\' : \'services\' }}\n            </span>\n            <span style="padding: 0 7px 0 7px;">\n              <i class="fa fa-cubes space-right" aria-hidden="true"></i>{{ $ctrl.model.Snapshots[0].RunningContainerCount + $ctrl.model.Snapshots[0].StoppedContainerCount }}\n              {{ $ctrl.model.Snapshots[0].RunningContainerCount + $ctrl.model.Snapshots[0].StoppedContainerCount === 1 ? \'\' : \'\' }}\n              <span ng-if="$ctrl.model.Snapshots[0].RunningContainerCount > 0 || $ctrl.model.Snapshots[0].StoppedContainerCount > 0">\n                -\n                <i class="fa fa-power-off green-icon" aria-hidden="true"></i> {{ $ctrl.model.Snapshots[0].RunningContainerCount }}\n                <i class="fa fa-power-off red-icon" aria-hidden="true"></i> {{ $ctrl.model.Snapshots[0].StoppedContainerCount }}\n                /\n                <i class="fa fa-heartbeat green-icon" aria-hidden="true"></i> {{ $ctrl.model.Snapshots[0].HealthyContainerCount }}\n                <i class="fa fa-heartbeat orange-icon" aria-hidden="true"></i> {{ $ctrl.model.Snapshots[0].UnhealthyContainerCount }}\n              </span>\n            </span>\n            <span style="padding: 0 7px 0 7px;">\n              <i class="fa fa-hdd space-right" aria-hidden="true"></i>{{ $ctrl.model.Snapshots[0].VolumeCount }}\n              {{ $ctrl.model.Snapshots[0].VolumeCount === 1 ? \'\' : \'\' }}\n            </span>\n            <span style="padding: 0 7px 0 7px;">\n              <i class="fa fa-clone space-right" aria-hidden="true"></i>{{ $ctrl.model.Snapshots[0].ImageCount }}\n              {{ $ctrl.model.Snapshots[0].ImageCount === 1 ? \'\' : \'\' }}\n            </span>\n          </span>\n        </span>\n        <span class="small text-muted">\n          {{ $ctrl.model.Snapshots[0].Swarm ? \'Swarm\' : \'Standalone\' }} {{ $ctrl.model.Snapshots[0].DockerVersion }}\n          <span ng-if="$ctrl.model.Type === 2">+ <i class="fa fa-bolt" aria-hidden="true"></i> Agent</span>\n        </span>\n      </div>\n\n      <div class="blocklist-item-line endpoint-item" ng-if="!$ctrl.model.Snapshots[0] && $ctrl.model.Type !== 5 && $ctrl.model.Type !== 6 && $ctrl.model.Type !== 7">\n        <span class="blocklist-item-desc">\n          No snapshot available\n        </span>\n      </div>\n\n      <div class="blocklist-item-line endpoint-item" ng-if="$ctrl.model.Kubernetes.Snapshots[0] && ($ctrl.model.Type === 5 || $ctrl.model.Type === 6 || $ctrl.model.Type === 7)">\n        <span class="blocklist-item-desc">\n          <span>\n            <span style="padding: 0 7px 0 0;"> <i class="fa fa-microchip space-right" aria-hidden="true"></i>{{ $ctrl.model.Kubernetes.Snapshots[0].TotalCPU }} CPU </span>\n            <span style="padding: 0 7px 0 7px;">\n              <i class="fa fa-memory space-right" aria-hidden="true"></i>{{ $ctrl.model.Kubernetes.Snapshots[0].TotalMemory | humansize }} RAM\n            </span>\n          </span>\n        </span>\n        <span class="small text-muted">\n          Kubernetes {{ $ctrl.model.Kubernetes.Snapshots[0].KubernetesVersion }}\n          <span style="padding: 0 0 0 7px;">\n            <i class="fa fa-hdd space-left space-right" aria-hidden="true"></i>\n            {{ $ctrl.model.Kubernetes.Snapshots[0].NodeCount }} {{ $ctrl.model.Kubernetes.Snapshots[0].NodeCount === 1 ? \'node\' : \'nodes\' }}\n          </span>\n        </span>\n      </div>\n\n      <div class="blocklist-item-line endpoint-item" ng-if="!$ctrl.model.Kubernetes.Snapshots[0] && ($ctrl.model.Type === 5 || $ctrl.model.Type === 6 || $ctrl.model.Type === 7)">\n        <span class="blocklist-item-desc">\n          -\n        </span>\n      </div>\n\n      <div class="blocklist-item-line endpoint-item">\n        <span class="small text-muted">\n          <span ng-if="$ctrl.model.Type === 1">\n            <span class="small text-muted">\n              <i class="fa fa-microchip"></i> {{ $ctrl.model.Snapshots[0].TotalCPU }}<i class="fa fa-memory space-left"></i> {{ $ctrl.model.Snapshots[0].TotalMemory | humansize }}\n            </span>\n            <span class="space-left space-right">-</span>\n          </span>\n          <span ng-if="$ctrl.endpointTags.length === 0"> <i class="fa fa-tags" aria-hidden="true"></i>  </span>\n          <span ng-if="$ctrl.endpointTags.length > 0">\n            <i class="fa fa-tags" aria-hidden="true"></i>\n            {{ $ctrl.endpointTags }}\n          </span>\n        </span>\n        <span class="small text-muted" ng-if="$ctrl.model.Type !== 4 && $ctrl.model.Type !== 7">\n          {{ $ctrl.model.URL | stripprotocol }}\n        </span>\n      </div>\n    </span>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(a,r)}]),e.exports=a},function(e,t,n){e.exports=n.p+"eb45a68ab4c8d154c69396d27d5721be.png"},function(e,t,n){e.exports=n.p+"5b98afb96054e0fa36a8299869f7f464.png"},function(e,t,n){e.exports=n.p+"2ab6d77445159e590879381735de9ff1.png"},function(e,t,n){"use strict";n.r(t);var a=n(215),r=n(10),i=n(564),s=n(5);angular.module("portainer.app").controller("EndpointListController",["DatatableService","PaginationService",function(e,t){this.state={totalFilteredEndpoints:this.totalCount,textFilter:"",filteredEndpoints:[],paginatedItemLimit:"10",pageNumber:1,loading:!0},this.$onChanges=function(e){this.handleEndpointsChange(e.endpoints)},this.handleEndpointsChange=function(e){e&&e.currentValue&&this.onTextFilterChange()},this.onTextFilterChange=function(){this.state.loading=!0;var t=this.state.textFilter;e.setDataTableTextFilters(this.tableKey,t),this.hasBackendPagination()?this.paginationChangedAction():(this.state.filteredEndpoints=function(e,t,n){if(!e||!e.length||!n)return e;var o=n.split(" ");return Object(s.a)(e,(function(e){var n=1===e.Status?"up":"down";return Object(i.a)(o,(function(i){var s=i.toLowerCase();return Object(r.a)(e.Name.toLowerCase(),s)||Object(r.a)(e.GroupName.toLowerCase(),s)||Object(r.a)(e.URL.toLowerCase(),s)||Object(a.a)(e.TagIds,(function(e){var n=t.find((function(t){return t.Id===e}));return!!n&&Object(r.a)(n.Name.toLowerCase(),s)}))||Object(r.a)(n,i)}))}))}(this.endpoints,this.tags,t),this.state.loading=!1)},this.hasBackendPagination=function(){return this.totalCount&&this.totalCount>100},this.paginationChangedAction=function(){var e=this;if(this.hasBackendPagination()){this.state.loading=!0,this.state.filteredEndpoints=[];var t=(this.state.pageNumber-1)*this.state.paginatedItemLimit+1;this.retrievePage(t,this.state.paginatedItemLimit,this.state.textFilter).then((function(t){e.state.filteredEndpoints=t.endpoints,e.state.totalFilteredEndpoints=t.totalCount,e.state.loading=!1}))}},this.pageChangeHandler=function(e){this.state.pageNumber=e,this.paginationChangedAction()},this.changePaginationLimit=function(){t.setPaginationLimit(this.tableKey,this.state.paginatedItemLimit),this.paginationChangedAction()},this.$onInit=function(){var n=e.getDataTableTextFilters(this.tableKey);this.state.paginatedItemLimit=t.getPaginationLimit(this.tableKey),null!==n?this.state.textFilter=n:this.paginationChangedAction()}}])},function(e,t,n){var a=n(1524);angular.module("portainer.app").component("endpointList",{templateUrl:a,controller:"EndpointListController",bindings:{titleText:"@",titleIcon:"@",endpoints:"<",tags:"<",tableKey:"@",dashboardAction:"<",snapshotAction:"<",showSnapshotAction:"<",editAction:"<",isAdmin:"<",totalCount:"<",retrievePage:"<"}})},function(e,t){var n="app/portainer/components/endpoint-list/endpointList.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n      </div>\n\n      <div class="actionBar" ng-if="$ctrl.showSnapshotAction">\n        <button type="button" class="btn btn-sm btn-primary" ng-click="$ctrl.snapshotAction()"> <i class="fa fa-sync space-right" aria-hidden="true"></i> </button>\n      </div>\n\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          ng-model-options="{ debounce: 300 }"\n          placeholder="URL..."\n          auto-focus\n        />\n      </div>\n\n      <div class="blocklist">\n        <endpoint-item\n          ng-if="$ctrl.hasBackendPagination()"\n          dir-paginate="endpoint in $ctrl.state.filteredEndpoints | itemsPerPage: $ctrl.state.paginatedItemLimit"\n          model="endpoint"\n          total-items="$ctrl.state.totalFilteredEndpoints"\n          on-select="($ctrl.dashboardAction)"\n          on-edit="($ctrl.editAction)"\n          is-admin="$ctrl.isAdmin"\n          tags="$ctrl.tags"\n        ></endpoint-item>\n        <endpoint-item\n          ng-if="!$ctrl.hasBackendPagination()"\n          dir-paginate="endpoint in $ctrl.state.filteredEndpoints | itemsPerPage: $ctrl.state.paginatedItemLimit"\n          model="endpoint"\n          on-select="($ctrl.dashboardAction)"\n          on-edit="($ctrl.editAction)"\n          is-admin="$ctrl.isAdmin"\n          tags="$ctrl.tags"\n        ></endpoint-item>\n        <div ng-if="$ctrl.state.loading" class="text-center text-muted">\n          ...\n        </div>\n        <div ng-if="!$ctrl.state.loading && !$ctrl.state.filteredEndpoints.length" class="text-center text-muted">\n          No endpoint available.\n        </div>\n      </div>\n\n      <div class="footer" ng-if="$ctrl.endpoints">\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0" ng-if="!$ctrl.hasBackendPagination()"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5" on-page-change="$ctrl.pageChangeHandler(newPageNumber, oldPageNumber)"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(1526);angular.module("portainer.app").component("endpointSelector",{templateUrl:a,controller:"EndpointSelectorController",bindings:{model:"=",endpoints:"<",groups:"<"}})},function(e,t){var n="app/portainer/components/endpoint-selector/endpointSelector.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<ui-select ng-model="$ctrl.model">\n  <ui-select-match placeholder="Select an endpoint">\n    <span>{{ $select.selected.Name }}</span>\n  </ui-select-match>\n  <ui-select-choices group-by="$ctrl.groupEndpoints" group-filter="$ctrl.sortGroups" repeat="endpoint in ($ctrl.endpoints | filter: $select.search) track by endpoint.Id">\n    <span>{{ endpoint.Name }}</span>\n  </ui-select-choices>\n</ui-select>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(62);angular.module("portainer.app").controller("EndpointSelectorController",(function(){var e=this;this.sortGroups=function(e){return Object(a.a)(e,["name"])},this.groupEndpoints=function(t){for(var n=0;n<e.availableGroups.length;n++){var a=e.availableGroups[n];if(t.GroupId===a.Id)return a.Name}},this.$onInit=function(){var e,t;this.availableGroups=(e=this.groups,t=this.endpoints,e.filter((function(e){for(var n=0;n<t.length;n++)if(t[n].GroupId===e.Id)return!0;return!1})))}}))},function(e,t,n){var a=n(1529);angular.module("portainer.app").component("porEndpointSecurity",{templateUrl:a,controller:"porEndpointSecurityController",bindings:{formData:"=",endpoint:"<"}})},function(e,t){var n="app/portainer/components/endpointSecurity/porEndpointSecurity.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div>\n  \x3c!-- tls-checkbox --\x3e\n  <div class="form-group">\n    <div class="col-sm-12">\n      <label for="tls" class="control-label text-left">\n        TLS\n        <portainer-tooltip position="bottom" message="Enable this option if you need to connect to the Docker endpoint with TLS."></portainer-tooltip>\n      </label>\n      <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="$ctrl.formData.TLS" /><i></i> </label>\n    </div>\n  </div>\n  \x3c!-- !tls-checkbox --\x3e\n  <div class="col-sm-12 form-section-title" ng-if="$ctrl.formData.TLS">\n    TLS mode\n  </div>\n  \x3c!-- note --\x3e\n  <div class="form-group" ng-if="$ctrl.formData.TLS">\n    <div class="col-sm-12">\n      <span class="small text-muted">\n        You can find out more information about how to protect a Docker environment with TLS in the\n        <a href="https://docs.docker.com/engine/security/https/" target="_blank">Docker documentation</a>.\n      </span>\n    </div>\n  </div>\n  <div class="form-group"></div>\n  \x3c!-- endpoint-tls-mode --\x3e\n  <div class="form-group" style="margin-bottom: 0;" ng-if="$ctrl.formData.TLS">\n    <div class="boxselector_wrapper">\n      <div>\n        <input type="radio" id="tls_client_ca" ng-model="$ctrl.formData.TLSMode" value="tls_client_ca" />\n        <label for="tls_client_ca">\n          <div class="boxselector_header">\n            <i class="fa fa-shield-alt" aria-hidden="true" style="margin-right: 2px;"></i>\n            TLS with server and client verification\n          </div>\n          <p>Use client certificates and server verification</p>\n        </label>\n      </div>\n      <div>\n        <input type="radio" id="tls_client_noca" ng-model="$ctrl.formData.TLSMode" value="tls_client_noca" />\n        <label for="tls_client_noca">\n          <div class="boxselector_header">\n            <i class="fa fa-shield-alt" aria-hidden="true" style="margin-right: 2px;"></i>\n            TLS with client verification only\n          </div>\n          <p>Use client certificates without server verification</p>\n        </label>\n      </div>\n      <div>\n        <input type="radio" id="tls_ca" ng-model="$ctrl.formData.TLSMode" value="tls_ca" />\n        <label for="tls_ca">\n          <div class="boxselector_header">\n            <i class="fa fa-shield-alt" aria-hidden="true" style="margin-right: 2px;"></i>\n            TLS\n          </div>\n          <p></p>\n        </label>\n      </div>\n      <div>\n        <input type="radio" id="tls_only" ng-model="$ctrl.formData.TLSMode" value="tls_only" />\n        <label for="tls_only">\n          <div class="boxselector_header">\n            <i class="fa fa-shield-alt" aria-hidden="true" style="margin-right: 2px;"></i>\n            TLS only\n          </div>\n          <p>No server/client verification</p>\n        </label>\n      </div>\n    </div>\n  </div>\n  \x3c!-- !endpoint-tls-mode --\x3e\n  <div class="col-sm-12 form-section-title" ng-if="$ctrl.formData.TLS && $ctrl.formData.TLSMode !== \'tls_only\'">\n    Required TLS files\n  </div>\n  \x3c!-- tls-file-upload --\x3e\n  <div ng-if="$ctrl.formData.TLS">\n    \x3c!-- tls-file-ca --\x3e\n    <div class="form-group" ng-if="$ctrl.formData.TLSMode === \'tls_client_ca\' || $ctrl.formData.TLSMode === \'tls_ca\'">\n      <label class="col-sm-3 col-lg-2 control-label text-left">TLS CA </label>\n      <div class="col-sm-9 col-lg-10">\n        <button class="btn btn-sm btn-primary" ngf-select ng-model="$ctrl.formData.TLSCACert"></button>\n        <span style="margin-left: 5px;">\n          {{ $ctrl.formData.TLSCACert.name }}\n          <i class="fa fa-check green-icon" ng-if="$ctrl.formData.TLSCACert && $ctrl.formData.TLSCACert === $ctrl.endpoint.TLSConfig.TLSCACert" aria-hidden="true"></i>\n          <i class="fa fa-times red-icon" ng-if="!$ctrl.formData.TLSCACert" aria-hidden="true"></i>\n        </span>\n      </div>\n    </div>\n    \x3c!-- !tls-file-ca --\x3e\n    \x3c!-- tls-files-cert-key --\x3e\n    <div ng-if="$ctrl.formData.TLSMode === \'tls_client_ca\' || $ctrl.formData.TLSMode === \'tls_client_noca\'">\n      \x3c!-- tls-file-cert --\x3e\n      <div class="form-group">\n        <label for="tls_cert" class="col-sm-3 col-lg-2 control-label text-left">TLS certificate</label>\n        <div class="col-sm-9 col-lg-10">\n          <button class="btn btn-sm btn-primary" ngf-select ng-model="$ctrl.formData.TLSCert"></button>\n          <span style="margin-left: 5px;">\n            {{ $ctrl.formData.TLSCert.name }}\n            <i class="fa fa-check green-icon" ng-if="$ctrl.formData.TLSCert && $ctrl.formData.TLSCert === $ctrl.endpoint.TLSConfig.TLSCert" aria-hidden="true"></i>\n            <i class="fa fa-times red-icon" ng-if="!$ctrl.formData.TLSCert" aria-hidden="true"></i>\n          </span>\n        </div>\n      </div>\n      \x3c!-- !tls-file-cert --\x3e\n      \x3c!-- tls-file-key --\x3e\n      <div class="form-group">\n        <label class="col-sm-3 col-lg-2 control-label text-left">TLS key</label>\n        <div class="col-sm-9 col-lg-10">\n          <button class="btn btn-sm btn-primary" ngf-select ng-model="$ctrl.formData.TLSKey"></button>\n          <span style="margin-left: 5px;">\n            {{ $ctrl.formData.TLSKey.name }}\n            <i class="fa fa-check green-icon" ng-if="$ctrl.formData.TLSKey && $ctrl.formData.TLSKey === $ctrl.endpoint.TLSConfig.TLSKey" aria-hidden="true"></i>\n            <i class="fa fa-times red-icon" ng-if="!$ctrl.formData.TLSKey" aria-hidden="true"></i>\n          </span>\n        </div>\n      </div>\n      \x3c!-- !tls-file-key --\x3e\n    </div>\n    \x3c!-- tls-files-cert-key --\x3e\n  </div>\n  \x3c!-- !tls-file-upload --\x3e\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.app").controller("porEndpointSecurityController",[function(){var e=this;this.$onInit=function(){if(e.endpoint){var t=e.endpoint,n=t.TLSConfig.TLS;e.formData.TLS=n;var a=t.TLSConfig.TLSCACert;e.formData.TLSCACert=a;var r=t.TLSConfig.TLSCert;e.formData.TLSCert=r;var i=t.TLSConfig.TLSKey;e.formData.TLSKey=i,n&&(e.formData.TLSMode=a&&r&&i?"tls_client_ca":r&&i?"tls_client_noca":a?"tls_ca":"tls_only")}}}])},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(442),s=n(1532);r.a.module("portainer.app").component("groupForm",{templateUrl:s,controller:i.default,bindings:{loaded:"<",pageType:"@",model:"=",availableEndpoints:"=",availableTags:"<",associatedEndpoints:"=",addLabelAction:"<",removeLabelAction:"<",formAction:"<",formActionLabel:"@",actionInProgress:"<",onCreateTag:"<"}})},function(e,t){var n="app/portainer/components/forms/group-form/groupForm.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<form class="form-horizontal" name="endpointGroupForm">\n  \x3c!-- name-input --\x3e\n  <div class="form-group" ng-class="{ \'has-error\': endpointGroupForm.group_name.$invalid }">\n    <label for="group_name" class="col-sm-3 col-lg-2 control-label text-left"></label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="text" class="form-control" name="group_name" ng-model="$ctrl.model.Name" placeholder=" my-group" required auto-focus />\n    </div>\n  </div>\n  <div class="form-group" ng-show="endpointGroupForm.group_name.$invalid">\n    <div class="col-sm-12 small text-warning">\n      <div ng-messages="endpointGroupForm.group_name.$error">\n        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n      </div>\n    </div>\n  </div>\n  \x3c!-- !name-input --\x3e\n  \x3c!-- description-input --\x3e\n  <div class="form-group">\n    <label for="group_description" class="col-sm-3 col-lg-2 control-label text-left"></label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="text" class="form-control" id="group_description" ng-model="$ctrl.model.Description" placeholder=" production environments..." />\n    </div>\n  </div>\n  \x3c!-- !description-input --\x3e\n  <div class="col-sm-12 form-section-title">\n    Metadata\n  </div>\n  \x3c!-- tags --\x3e\n  <div class="form-group">\n    <tag-selector\n      ng-if="$ctrl.model && $ctrl.availableTags"\n      tags="$ctrl.availableTags"\n      model="$ctrl.model.TagIds"\n      allow-create="$ctrl.state.allowCreateTag"\n      on-create="($ctrl.onCreateTag)"\n    ></tag-selector>\n  </div>\n  \x3c!-- !tags --\x3e\n  \x3c!-- endpoints --\x3e\n  <div ng-if="$ctrl.model.Id !== 1">\n    <div class="col-sm-12 form-section-title">\n      \n    </div>\n    <div class="form-group">\n      <div class="col-sm-12 small text-muted">\n        You can select which endpoint should be part of this group by moving them to the associated endpoints table. Simply click on any endpoint entry to move it from one table to\n        the other.\n      </div>\n      <div class="col-sm-12" style="margin-top: 20px;">\n        \x3c!-- available-endpoints --\x3e\n        <div class="col-sm-6">\n          <div class="text-center small text-muted"></div>\n          <div style="margin-top: 10px;">\n            <group-association-table\n              loaded="$ctrl.loaded"\n              page-type="$ctrl.pageType"\n              table-type="available"\n              retrieve-page="$ctrl.getPaginatedEndpointsByGroup"\n              dataset="$ctrl.availableEndpoints"\n              entry-click="$ctrl.associateEndpoint"\n              pagination-state="$ctrl.state.available"\n              empty-dataset-message="No endpoint available"\n            ></group-association-table>\n          </div>\n        </div>\n        \x3c!-- !available-endpoints --\x3e\n        \x3c!-- associated-endpoints --\x3e\n        <div class="col-sm-6">\n          <div class="text-center small text-muted"></div>\n          <div style="margin-top: 10px;">\n            <group-association-table\n              loaded="$ctrl.loaded"\n              page-type="$ctrl.pageType"\n              table-type="associated"\n              retrieve-page="$ctrl.getPaginatedEndpointsByGroup"\n              dataset="$ctrl.associatedEndpoints"\n              entry-click="$ctrl.dissociateEndpoint"\n              pagination-state="$ctrl.state.associated"\n              empty-dataset-message=""\n              has-backend-pagination="this.pageType !== \'create\'"\n            ></group-association-table>\n          </div>\n        </div>\n        \x3c!-- !associated-endpoints --\x3e\n      </div>\n    </div>\n  </div>\n  <div ng-if="$ctrl.model.Id === 1">\n    <div class="col-sm-12 form-section-title">\n      Unassociated endpoints\n    </div>\n    <div style="margin-top: 10px;">\n      <group-association-table\n        loaded="$ctrl.loaded"\n        page-type="$ctrl.pageType"\n        table-type="associated"\n        retrieve-page="$ctrl.getPaginatedEndpointsByGroup"\n        dataset="$ctrl.associatedEndpoints"\n        pagination-state="$ctrl.state.associated"\n        empty-dataset-message="No endpoint available"\n      ></group-association-table>\n    </div>\n  </div>\n  \x3c!-- !endpoints --\x3e\n  \x3c!-- actions --\x3e\n  <div class="col-sm-12 form-section-title">\n    \n  </div>\n  <div class="form-group">\n    <div class="col-sm-12">\n      <button\n        type="button"\n        class="btn btn-primary btn-sm"\n        ng-click="$ctrl.formAction()"\n        ng-disabled="$ctrl.actionInProgress || !endpointGroupForm.$valid"\n        button-spinner="$ctrl.actionInProgress"\n      >\n        <span ng-hide="$ctrl.actionInProgress">{{ $ctrl.formActionLabel }}</span>\n        <span ng-show="$ctrl.actionInProgress">In progress...</span>\n      </button>\n    </div>\n  </div>\n  \x3c!-- !actions --\x3e\n</form>\n')}]),e.exports=n},function(e,t,n){var a=n(1534);angular.module("portainer.app").component("registryFormAzure",{templateUrl:a,bindings:{model:"=",formAction:"<",formActionLabel:"@",actionInProgress:"<"}})},function(e,t){var n="app/portainer/components/forms/registry-form-azure/registry-form-azure.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<form class="form-horizontal" name="registryFormAzure" ng-submit="$ctrl.formAction()">\n  <div class="col-sm-12 form-section-title">\n    Azure registry details\n  </div>\n  \x3c!-- name-input --\x3e\n  <div class="form-group">\n    <label for="registry_name" class="col-sm-3 col-lg-2 control-label text-left"></label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="text" class="form-control" id="registry_name" name="registry_name" ng-model="$ctrl.model.Name" placeholder="my-azure-registry" required auto-focus />\n    </div>\n  </div>\n  <div class="form-group" ng-show="registryFormAzure.registry_name.$invalid">\n    <div class="col-sm-12 small text-warning">\n      <div ng-messages="registryFormAzure.registry_name.$error">\n        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n      </div>\n    </div>\n  </div>\n  \x3c!-- !name-input --\x3e\n  \x3c!-- url-input --\x3e\n  <div class="form-group">\n    <label for="registry_url" class="col-sm-3 col-lg-2 control-label text-left">\n      Registry URL\n      <portainer-tooltip position="bottom" message="AzureURL"></portainer-tooltip>\n    </label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="text" class="form-control" id="registry_url" name="registry_url" ng-model="$ctrl.model.URL" placeholder="myproject.azurecr.io" required />\n    </div>\n  </div>\n  <div class="form-group" ng-show="registryFormAzure.registry_url.$invalid">\n    <div class="col-sm-12 small text-warning">\n      <div ng-messages="registryFormAzure.registry_url.$error">\n        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n      </div>\n    </div>\n  </div>\n  \x3c!-- url-input --\x3e\n  \x3c!-- credentials-user --\x3e\n  <div class="form-group">\n    <label for="registry_username" class="col-sm-3 col-lg-2 control-label text-left"></label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="text" class="form-control" id="registry_username" name="registry_username" ng-model="$ctrl.model.Username" required />\n    </div>\n  </div>\n  <div class="form-group" ng-show="registryFormAzure.registry_username.$invalid">\n    <div class="col-sm-12 small text-warning">\n      <div ng-messages="registryFormAzure.registry_username.$error">\n        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n      </div>\n    </div>\n  </div>\n  \x3c!-- !credentials-user --\x3e\n  \x3c!-- credentials-password --\x3e\n  <div class="form-group">\n    <label for="registry_password" class="col-sm-3 col-lg-2 control-label text-left"></label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="password" class="form-control" id="registry_password" name="registry_password" ng-model="$ctrl.model.Password" required />\n    </div>\n  </div>\n  <div class="form-group" ng-show="registryFormAzure.registry_password.$invalid">\n    <div class="col-sm-12 small text-warning">\n      <div ng-messages="registryFormAzure.registry_password.$error">\n        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n      </div>\n    </div>\n  </div>\n  \x3c!-- !credentials-password --\x3e\n  \x3c!-- actions --\x3e\n  <div class="col-sm-12 form-section-title">\n    \n  </div>\n  <div class="form-group">\n    <div class="col-sm-12">\n      <button type="submit" class="btn btn-primary btn-sm" ng-disabled="$ctrl.actionInProgress || !registryFormAzure.$valid" button-spinner="$ctrl.actionInProgress">\n        <span ng-hide="$ctrl.actionInProgress">{{ $ctrl.formActionLabel }}</span>\n        <span ng-show="$ctrl.actionInProgress">In progress...</span>\n      </button>\n    </div>\n  </div>\n  \x3c!-- !actions --\x3e\n</form>\n')}]),e.exports=n},function(e,t,n){var a=n(1536);angular.module("portainer.app").component("registryFormCustom",{templateUrl:a,bindings:{model:"=",formAction:"<",formActionLabel:"@",actionInProgress:"<"}})},function(e,t){var n="app/portainer/components/forms/registry-form-custom/registry-form-custom.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<form class="form-horizontal" name="registryFormCustom" ng-submit="$ctrl.formAction()">\n  <div class="col-sm-12 form-section-title">\n    \n  </div>\n  <div class="form-group">\n    <span class="col-sm-12 text-muted small">\n      Docker <a href="https://docs.docker.com/registry/deploying/#running-a-domain-registry" target="_blank"></a> \n       <a href="https://docs.docker.com/registry/insecure/" target="_blank"> Docker </a>.\n    </span>\n  </div>\n  <div class="col-sm-12 form-section-title">\n    \n  </div>\n  \x3c!-- name-input --\x3e\n  <div class="form-group">\n    <label for="registry_name" class="col-sm-3 col-lg-2 control-label text-left"></label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="text" class="form-control" id="registry_name" name="registry_name" ng-model="$ctrl.model.Name" placeholder="my-custom-registry" required auto-focus />\n    </div>\n  </div>\n  <div class="form-group" ng-show="registryFormCustom.registry_name.$invalid">\n    <div class="col-sm-12 small text-warning">\n      <div ng-messages="registryFormCustom.registry_name.$error">\n        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n      </div>\n    </div>\n  </div>\n  \x3c!-- !name-input --\x3e\n  \x3c!-- url-input --\x3e\n  <div class="form-group">\n    <label for="registry_url" class="col-sm-3 col-lg-2 control-label text-left">\n       URL\n      <portainer-tooltip position="bottom" message="DockerURLIP "></portainer-tooltip>\n    </label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="text" class="form-control" id="registry_url" name="registry_url" ng-model="$ctrl.model.URL" placeholder="10.0.0.10:5000 or myregistry.domain.tld" required />\n    </div>\n  </div>\n  <div class="form-group" ng-show="registryFormCustom.registry_url.$invalid">\n    <div class="col-sm-12 small text-warning">\n      <div ng-messages="registryFormCustom.registry_url.$error">\n        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n      </div>\n    </div>\n  </div>\n  \x3c!-- url-input --\x3e\n  \x3c!-- authentication-checkbox --\x3e\n  <div class="form-group">\n    <div class="col-sm-12">\n      <label for="registry_auth" class="control-label text-left">\n        \n        <portainer-tooltip position="bottom" message=""></portainer-tooltip>\n      </label>\n      <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="$ctrl.model.Authentication" /><i></i> </label>\n    </div>\n  </div>\n  \x3c!-- !authentication-checkbox --\x3e\n  <div ng-if="$ctrl.model.Authentication">\n    \x3c!-- credentials-user --\x3e\n    <div class="form-group">\n      <label for="registry_username" class="col-sm-3 col-lg-2 control-label text-left"></label>\n      <div class="col-sm-9 col-lg-10">\n        <input type="text" class="form-control" id="registry_username" name="registry_username" ng-model="$ctrl.model.Username" required />\n      </div>\n    </div>\n    <div class="form-group" ng-show="registryFormCustom.registry_username.$invalid">\n      <div class="col-sm-12 small text-warning">\n        <div ng-messages="registryFormCustom.registry_username.$error">\n          <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n        </div>\n      </div>\n    </div>\n    \x3c!-- !credentials-user --\x3e\n    \x3c!-- credentials-password --\x3e\n    <div class="form-group">\n      <label for="registry_password" class="col-sm-3 col-lg-2 control-label text-left"></label>\n      <div class="col-sm-9 col-lg-10">\n        <input type="password" class="form-control" id="registry_password" name="registry_password" ng-model="$ctrl.model.Password" required />\n      </div>\n    </div>\n    <div class="form-group" ng-show="registryFormCustom.registry_password.$invalid">\n      <div class="col-sm-12 small text-warning">\n        <div ng-messages="registryFormCustom.registry_password.$error">\n          <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n        </div>\n      </div>\n    </div>\n    \x3c!-- !credentials-password --\x3e\n  </div>\n  \x3c!-- actions --\x3e\n  <div class="col-sm-12 form-section-title">\n    \n  </div>\n  <div class="form-group">\n    <div class="col-sm-12">\n      <button type="submit" class="btn btn-primary btn-sm" ng-disabled="$ctrl.actionInProgress || !registryFormCustom.$valid" button-spinner="$ctrl.actionInProgress">\n        <span ng-hide="$ctrl.actionInProgress">{{ $ctrl.formActionLabel }}</span>\n        <span ng-show="$ctrl.actionInProgress">In progress...</span>\n      </button>\n    </div>\n  </div>\n  \x3c!-- !actions --\x3e\n</form>\n')}]),e.exports=n},function(e,t,n){var a=n(1538);angular.module("portainer.app").component("gitlabProjectsDatatable",{templateUrl:a,controller:"GitlabProjectsDatatableController",bindings:{titleText:"@",titleIcon:"@",dataset:"<",tableKey:"@",orderBy:"@",reverseOrder:"<",state:"="}})},function(e,t){var n="app/portainer/components/forms/registry-form-gitlab/gitlab-projects-datatable/gitlabProjectsDatatable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n      </div>\n      <div class="searchBar">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input type="text" class="searchInput" ng-model="$ctrl.state.textFilter" ng-change="$ctrl.onTextFilterChange()" placeholder="..." auto-focus />\n      </div>\n      <div class="table-responsive">\n        <table class="table table-hover nowrap-cells">\n          <thead>\n            <tr>\n              <th>\n                <span class="md-checkbox">\n                  <input id="select_all" type="checkbox" ng-model="$ctrl.state.selectAll" ng-change="$ctrl.selectAll()" />\n                  <label for="select_all"></label>\n                </span>\n                <a ng-click="$ctrl.changeOrderBy(\'Namespace\')">\n                  Namespace\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Namespace\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Namespace\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'Name\')">\n                  \n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'Name\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th>\n                <a ng-click="$ctrl.changeOrderBy(\'PathWithNamespace\')">\n                  Path with namespace\n                  <i class="fa fa-sort-alpha-down" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'PathWithNamespace\' && !$ctrl.state.reverseOrder"></i>\n                  <i class="fa fa-sort-alpha-up" aria-hidden="true" ng-if="$ctrl.state.orderBy === \'PathWithNamespace\' && $ctrl.state.reverseOrder"></i>\n                </a>\n              </th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              dir-paginate="item in ($ctrl.state.filteredDataSet = ($ctrl.dataset | filter:$ctrl.state.textFilter | orderBy:$ctrl.state.orderBy:$ctrl.state.reverseOrder | itemsPerPage: $ctrl.state.paginatedItemLimit))"\n              ng-class="{ active: item.Checked }"\n            >\n              <td>\n                <span class="md-checkbox">\n                  <input id="select_{{ $index }}" type="checkbox" ng-model="item.Checked" ng-click="$ctrl.selectItem(item, $event)" ng-disabled="$ctrl.disableSelection(item)" />\n                  <label for="select_{{ $index }}"></label>\n                </span>\n                {{ item.Namespace }}\n              </td>\n              <td>\n                {{ item.Name }}\n              </td>\n              <td>\n                {{ item.PathWithNamespace }}\n              </td>\n              <td>\n                {{ item.Description }}\n              </td>\n            </tr>\n            <tr ng-if="$ctrl.state.filteredDataSet.length === 0">\n              <td colspan="3" class="text-center text-muted">No projects available.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class="footer" ng-if="$ctrl.dataset">\n        <div class="infoBar" ng-if="$ctrl.state.selectedItemCount !== 0"> {{ $ctrl.state.selectedItemCount }}  </div>\n        <div class="paginationControls">\n          <form class="form-inline">\n            <span class="limitSelector">\n              <span style="margin-right: 5px;">\n                \n              </span>\n              <select class="form-control" ng-model="$ctrl.state.paginatedItemLimit" ng-change="$ctrl.changePaginationLimit()">\n                <option value="0"></option>\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n              </select>\n            </span>\n            <dir-pagination-controls max-size="5"></dir-pagination-controls>\n          </form>\n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.app").controller("GitlabProjectsDatatableController",["$scope","$controller","DatatableService",function(e,t,n){angular.extend(this,t("GenericDatatableController",{$scope:e})),this.disableSelection=function(e){return!this.allowSelection(e)},this.allowSelection=function(e){return e.RegistryEnabled},this.$onInit=function(){this.setDefaults(),this.prepareTableFromDataset(),this.state.orderBy=this.orderBy;var e=n.getDataTableOrder(this.tableKey);null!==e&&(this.state.reverseOrder=e.reverse,this.state.orderBy=e.orderBy);var t=n.getDataTableTextFilters(this.tableKey);null!==t&&(this.state.textFilter=t,this.onTextFilterChange());var a=n.getDataTableFilters(this.tableKey);null!==a&&(this.filters=a),this.filters&&this.filters.state&&(this.filters.state.open=!1);var r=n.getDataTableSettings(this.tableKey);null!==r&&(this.settings=r,this.settings.open=!1),this.onSettingsRepeaterChange()}}])},function(e,t,n){var a=n(1541);angular.module("portainer.app").component("registryFormGitlab",{templateUrl:a,bindings:{model:"=",retrieveRegistries:"<",createRegistries:"<",actionInProgress:"<",projects:"=",state:"=",resetDefaults:"<"}})},function(e,t){var n="app/portainer/components/forms/registry-form-gitlab/registry-form-gitlab.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<form class="form-horizontal" name="registryFormGitlab" ng-submit="$ctrl.retrieveRegistries()">\n  <div class="col-sm-12 form-section-title">\n    \n  </div>\n  <div class="form-group">\n    <span class="col-sm-12 text-muted small">\n      <p>\n        GitlabToken\n        <a href="https://gitlab.com/help/user/profile/personal_access_tokens.md" target="_blank">gitlab </a>.\n      </p>\n    </span>\n  </div>\n  <div class="col-sm-12 form-section-title">\n    Gitlab\n  </div>\n  \x3c!-- credentials-user --\x3e\n  <div class="form-group">\n    <label for="registry_username" class="col-sm-3 col-lg-2 control-label text-left"></label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="text" class="form-control" id="registry_username" name="registry_username" ng-model="$ctrl.model.Username" required />\n    </div>\n  </div>\n  <div class="form-group" ng-show="registryFormGitlab.registry_username.$invalid">\n    <div class="col-sm-12 small text-warning">\n      <div ng-messages="registryFormGitlab.registry_username.$error">\n        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n      </div>\n    </div>\n  </div>\n  \x3c!-- !credentials-user --\x3e\n  \x3c!-- credentials-pat --\x3e\n  <div class="form-group">\n    <label for="registry_perso_acc_token" class="col-sm-3 col-lg-2 control-label text-left">Personal Access Token </label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="password" class="form-control" id="registry_perso_acc_token" name="registry_perso_acc_token" ng-model="$ctrl.model.Token" required />\n    </div>\n  </div>\n  <div class="form-group" ng-show="registryFormGitlab.registry_perso_acc_token.$invalid">\n    <div class="col-sm-12 small text-warning">\n      <div ng-messages="registryFormGitlab.registry_perso_acc_token.$error">\n        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n      </div>\n    </div>\n  </div>\n  \x3c!-- !credentials-pat --\x3e\n\n  <div class="form-group">\n    <div class="col-sm-12">\n      <a class="small interactive" ng-if="!$ctrl.state.overrideConfiguration" ng-click="$ctrl.state.overrideConfiguration = true;">\n        <i class="fa fa-wrench space-right" aria-hidden="true"></i> \n      </a>\n      <a class="small interactive" ng-if="$ctrl.state.overrideConfiguration" ng-click="$ctrl.state.overrideConfiguration = false; $ctrl.resetDefaults()">\n        <i class="fa fa-cogs space-right" aria-hidden="true"></i> \n      </a>\n    </div>\n  </div>\n\n  \x3c!-- url-input --\x3e\n  <div class="form-group" ng-if="$ctrl.state.overrideConfiguration">\n    <label for="instance_url" class="col-sm-3 col-lg-2 control-label text-left">\n      Instance URL\n      <portainer-tooltip position="bottom" message="URL of Gitlab instance."></portainer-tooltip>\n    </label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="text" class="form-control" id="instance_url" name="instance_url" ng-model="$ctrl.model.Gitlab.InstanceURL" placeholder="https://gitlab.com" required />\n    </div>\n  </div>\n  <div class="form-group" ng-show="registryFormGitlab.instance_url.$invalid">\n    <div class="col-sm-12 small text-warning">\n      <div ng-messages="registryFormGitlab.instance_url.$error">\n        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n      </div>\n    </div>\n  </div>\n  \x3c!-- !url-input --\x3e\n  \x3c!-- url-input --\x3e\n  <div class="form-group" ng-if="$ctrl.state.overrideConfiguration">\n    <label for="registry_url" class="col-sm-3 col-lg-2 control-label text-left">\n      Registry URL\n      <portainer-tooltip position="bottom" message="URL of Gitlab registry instance."></portainer-tooltip>\n    </label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="text" class="form-control" id="registry_url" name="registry_url" ng-model="$ctrl.model.URL" placeholder="https://registry.gitlab.com" required />\n    </div>\n  </div>\n  <div class="form-group" ng-show="registryFormGitlab.registry_url.$invalid">\n    <div class="col-sm-12 small text-warning">\n      <div ng-messages="registryFormGitlab.registry_url.$error">\n        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n      </div>\n    </div>\n  </div>\n  \x3c!-- !url-input --\x3e\n\n  <div class="form-group">\n    <div class="col-sm-12">\n      <button type="submit" class="btn btn-primary btn-sm" ng-disabled="$ctrl.actionInProgress || !registryFormGitlab.$valid" button-spinner="$ctrl.actionInProgress">\n        <span ng-hide="$ctrl.actionInProgress"></span>\n        <span ng-show="$ctrl.actionInProgress">In progress...</span>\n      </button>\n    </div>\n  </div>\n</form>\n<div class="form-horizontal" ng-if="$ctrl.projects">\n  <div class="col-sm-12 form-section-title">\n    Gitlab projects\n  </div>\n  <div class="form-group">\n    <span class="col-sm-12 text-muted small">\n      Select the project\'s registries you want to manage. Portainer will create one registry for each selected project.\n    </span>\n    <span class="col-sm-12 text-muted small">\n      <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n      If you can\'t select a project, make sure that registry feature is activated on it.\n    </span>\n  </div>\n  <div class="form-group">\n    <div class="col-sm-12">\n      <gitlab-projects-datatable\n        title-text="Gitlab projects"\n        title-icon="fa-project-diagram"\n        dataset="$ctrl.projects"\n        table-key="gitlab_projects"\n        state="$ctrl.state.gitlab"\n        order-by="Name"\n      ></gitlab-projects-datatable>\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="col-sm-12">\n      <button\n        ng-click="$ctrl.createRegistries()"\n        class="btn btn-primary btn-sm"\n        ng-disabled="$ctrl.actionInProgress || !$ctrl.state.gitlab.selectedItemCount"\n        button-spinner="$ctrl.actionInProgress"\n      >\n        <span ng-hide="$ctrl.actionInProgress">Create registries</span>\n        <span ng-show="$ctrl.actionInProgress">In progress...</span>\n      </button>\n    </div>\n  </div>\n  \x3c!-- !actions --\x3e\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(1543);angular.module("portainer.app").component("registryFormQuay",{templateUrl:a,bindings:{model:"=",formAction:"<",formActionLabel:"@",actionInProgress:"<"}})},function(e,t){var n="app/portainer/components/forms/registry-form-quay/registry-form-quay.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<form class="form-horizontal" name="registryFormQuay" ng-submit="$ctrl.formAction()">\n  <div class="col-sm-12 form-section-title">\n    Quay account details\n  </div>\n  \x3c!-- credentials-user --\x3e\n  <div class="form-group">\n    <label for="registry_username" class="col-sm-3 col-lg-2 control-label text-left"></label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="text" class="form-control" id="registry_username" name="registry_username" ng-model="$ctrl.model.Username" required auto-focus />\n    </div>\n  </div>\n  <div class="form-group" ng-show="registryFormQuay.registry_username.$invalid">\n    <div class="col-sm-12 small text-warning">\n      <div ng-messages="registryFormQuay.registry_username.$error">\n        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n      </div>\n    </div>\n  </div>\n  \x3c!-- !credentials-user --\x3e\n  \x3c!-- credentials-password --\x3e\n  <div class="form-group">\n    <label for="registry_password" class="col-sm-3 col-lg-2 control-label text-left"></label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="password" class="form-control" id="registry_password" name="registry_password" ng-model="$ctrl.model.Password" required />\n    </div>\n  </div>\n  <div class="form-group" ng-show="registryFormQuay.registry_password.$invalid">\n    <div class="col-sm-12 small text-warning">\n      <div ng-messages="registryFormQuay.registry_password.$error">\n        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n      </div>\n    </div>\n  </div>\n  \x3c!-- !credentials-password --\x3e\n  \x3c!-- actions --\x3e\n  <div class="col-sm-12 form-section-title">\n    \n  </div>\n  <div class="form-group">\n    <div class="col-sm-12">\n      <button type="submit" class="btn btn-primary btn-sm" ng-disabled="$ctrl.actionInProgress || !registryFormQuay.$valid" button-spinner="$ctrl.actionInProgress">\n        <span ng-hide="$ctrl.actionInProgress">{{ $ctrl.formActionLabel }}</span>\n        <span ng-show="$ctrl.actionInProgress">In progress...</span>\n      </button>\n    </div>\n  </div>\n  \x3c!-- !actions --\x3e\n</form>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(1545);r.a.module("portainer.app").component("stackFromTemplateForm",{templateUrl:i,bindings:{template:"=",formValues:"=",state:"=",createTemplate:"<",unselectTemplate:"<"},transclude:{advanced:"?advancedForm"}})},function(e,t){var n="app/portainer/components/forms/stack-from-template-form/stackFromTemplateForm.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="col-sm-12">\n  <rd-widget>\n    <rd-widget-custom-header icon="$ctrl.template.Logo" title-text="$ctrl.template.Title"></rd-widget-custom-header>\n    <rd-widget-body classes="padding">\n      <form class="form-horizontal">\n        \x3c!-- description --\x3e\n        <div ng-if="$ctrl.template.Note">\n          <div class="col-sm-12 form-section-title">\n            Information\n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <div class="template-note" ng-bind-html="$ctrl.template.Note"></div>\n            </div>\n          </div>\n        </div>\n        \x3c!-- !description --\x3e\n        <div class="col-sm-12 form-section-title">\n          Configuration\n        </div>\n        \x3c!-- name-input --\x3e\n        <div class="form-group">\n          <label for="container_name" class="col-sm-2 control-label text-left"></label>\n          <div class="col-sm-10">\n            <input type="text" name="container_name" class="form-control" ng-model="$ctrl.formValues.name" placeholder=" myStack" required />\n          </div>\n        </div>\n        \x3c!-- !name-input --\x3e\n        \x3c!-- env --\x3e\n        <div ng-repeat="var in $ctrl.template.Env" ng-if="!var.preset || var.select" class="form-group">\n          <label for="field_{{ $index }}" class="col-sm-2 control-label text-left">\n            {{ var.label }}\n            <portainer-tooltip ng-if="var.description" position="bottom" message="{{ var.description }}"></portainer-tooltip>\n          </label>\n          <div class="col-sm-10">\n            <input type="text" class="form-control" ng-if="!var.select" ng-model="var.value" id="field_{{ $index }}" />\n            <select class="form-control" ng-if="var.select" ng-model="var.value" id="field_{{ $index }}">\n              <option selected disabled hidden value="">Select value</option>\n              <option ng-repeat="choice in var.select" value="{{ choice.value }}">{{ choice.text }}</option>\n            </select>\n          </div>\n        </div>\n        \x3c!-- !env --\x3e\n        <ng-transclude ng-transclude-slot="advanced"></ng-transclude>\n\n        \x3c!-- access-control --\x3e\n        <por-access-control-form form-data="$ctrl.formValues.AccessControlData"></por-access-control-form>\n        \x3c!-- !access-control --\x3e\n        \x3c!-- actions --\x3e\n        <div class="col-sm-12 form-section-title">\n          \n        </div>\n        <div class="form-group">\n          <div class="col-sm-12">\n            <button\n              type="button"\n              class="btn btn-primary btn-sm"\n              ng-disabled="$ctrl.state.actionInProgress || !$ctrl.formValues.name"\n              ng-click="$ctrl.createTemplate()"\n              button-spinner="$ctrl.state.actionInProgress"\n            >\n              <span ng-hide="$ctrl.state.actionInProgress"></span>\n              <span ng-show="$ctrl.state.actionInProgress">...</span>\n            </button>\n            <button type="button" class="btn btn-sm btn-default" ng-click="$ctrl.unselectTemplate($ctrl.template)"></button>\n            <span class="text-danger" ng-if="$ctrl.state.formValidationError" style="margin-left: 5px;">{{ $ctrl.state.formValidationError }}</span>\n          </div>\n        </div>\n        \x3c!-- !actions --\x3e\n      </form>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(1547);angular.module("portainer.app").component("templateForm",{templateUrl:a,controller:"TemplateFormController",bindings:{model:"=",categories:"<",networks:"<",formAction:"<",formActionLabel:"@",actionInProgress:"<",showTypeSelector:"<"}})},function(e,t){var n="app/portainer/components/forms/template-form/templateForm.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<form class="form-horizontal" name="templateForm">\n  \x3c!-- title-input --\x3e\n  <div class="form-group" ng-class="{ \'has-error\': templateForm.template_title.$invalid }">\n    <label for="template_title" class="col-sm-3 col-lg-2 control-label text-left"></label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="text" class="form-control" name="template_title" ng-model="$ctrl.model.Title" placeholder=" my-template" required auto-focus />\n    </div>\n  </div>\n  <div class="form-group" ng-show="templateForm.template_title.$invalid">\n    <div class="col-sm-12 small text-warning">\n      <div ng-messages="templateForm.template_title.$error">\n        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n      </div>\n    </div>\n  </div>\n  \x3c!-- !title-input --\x3e\n  \x3c!-- description-input --\x3e\n  <div class="form-group" ng-class="{ \'has-error\': templateForm.template_description.$invalid }">\n    <label for="template_description" class="col-sm-3 col-lg-2 control-label text-left"></label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="text" class="form-control" name="template_description" ng-model="$ctrl.model.Description" placeholder=" template description..." required />\n    </div>\n  </div>\n  <div class="form-group" ng-show="templateForm.template_description.$invalid">\n    <div class="col-sm-12 small text-warning">\n      <div ng-messages="templateForm.template_description.$error">\n        <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n      </div>\n    </div>\n  </div>\n  \x3c!-- !description-input --\x3e\n  <div class="col-sm-12 form-section-title interactive" ng-click="$ctrl.state.collapseTemplate = !$ctrl.state.collapseTemplate">\n    Template\n    <span class="small space-left">\n      <a ng-if="$ctrl.state.collapseTemplate"><i class="fa fa-plus" aria-hidden="true"></i> expand</a>\n      <a ng-if="!$ctrl.state.collapseTemplate"><i class="fa fa-minus" aria-hidden="true"></i> collapse</a>\n    </span>\n  </div>\n  \x3c!-- template-details --\x3e\n  <div uib-collapse="$ctrl.state.collapseTemplate">\n    <div ng-if="$ctrl.showTypeSelector">\n      <div class="form-group"></div>\n      <div class="form-group" style="margin-bottom: 0;">\n        <div class="boxselector_wrapper">\n          <div>\n            <input type="radio" id="template_container" ng-model="$ctrl.model.Type" ng-value="1" />\n            <label for="template_container">\n              <div class="boxselector_header">\n                <i class="fa fa-cubes" aria-hidden="true" style="margin-right: 2px;"></i>\n                Container\n              </div>\n              <p>Container template</p>\n            </label>\n          </div>\n          <div>\n            <input type="radio" id="template_swarm_stack" ng-model="$ctrl.model.Type" ng-value="2" />\n            <label for="template_swarm_stack">\n              <div class="boxselector_header">\n                <i class="fa fa-th-list" aria-hidden="true" style="margin-right: 2px;"></i>\n                Swarm stack\n              </div>\n              <p>Stack template (Swarm)</p>\n            </label>\n          </div>\n          <div>\n            <input type="radio" id="template_compose_stack" ng-model="$ctrl.model.Type" ng-value="3" />\n            <label for="template_compose_stack">\n              <div class="boxselector_header">\n                <i class="fa fa-th-list" aria-hidden="true" style="margin-right: 2px;"></i>\n                Compose stack\n              </div>\n              <p>Stack template (Compose)</p>\n            </label>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    \x3c!-- name --\x3e\n    <div class="form-group">\n      <label for="template_name" class="col-sm-3 col-lg-2 control-label text-left">\n        \n        <portainer-tooltip position="bottom" message="Default name that will be associated to the template"></portainer-tooltip>\n      </label>\n      <div class="col-sm-9 col-lg-10">\n        <input type="text" class="form-control" name="template_name" ng-model="$ctrl.model.Name" placeholder=" myApp" />\n      </div>\n    </div>\n    \x3c!-- !name --\x3e\n    \x3c!-- logo --\x3e\n    <div class="form-group">\n      <label for="template_logo" class="col-sm-3 col-lg-2 control-label text-left">\n        Logo URL\n        <portainer-tooltip position="bottom" message="Recommended size: 60x60"></portainer-tooltip>\n      </label>\n      <div class="col-sm-9 col-lg-10">\n        <input type="text" class="form-control" name="template_logo" ng-model="$ctrl.model.Logo" placeholder=" https://portainer.io/images/logos/nginx.png" />\n      </div>\n    </div>\n    \x3c!-- !logo --\x3e\n    \x3c!-- note --\x3e\n    <div class="form-group">\n      <label for="template_note" class="col-sm-3 col-lg-2 control-label text-left">\n        \n        <portainer-tooltip position="bottom" message="Usage/extra information about the template. Supports HTML."></portainer-tooltip>\n      </label>\n      <div class="col-sm-9 col-lg-10">\n        <textarea\n          class="form-control"\n          name="template_note"\n          ng-model="$ctrl.model.Note"\n          placeholder="You can use this field to specify extra information. <br/> It supports <b>HTML</b>."\n        ></textarea>\n      </div>\n    </div>\n    \x3c!-- !note --\x3e\n    \x3c!-- platform --\x3e\n    <div class="form-group">\n      <label for="template_platform" class="col-sm-3 col-lg-2 control-label text-left">\n        \n      </label>\n      <div class="col-sm-9 col-lg-10">\n        <select class="form-control" name="template_platform" ng-model="$ctrl.model.Platform">\n          <option value="">Multi-platform</option>\n          <option value="linux">Linux</option>\n          <option value="windows">Windows</option>\n        </select>\n      </div>\n    </div>\n    \x3c!-- !platform --\x3e\n    \x3c!-- categories --\x3e\n    <div class="form-group">\n      <label for="template_categories" class="col-sm-3 col-lg-2 control-label text-left">\n        Categories\n      </label>\n      <div class="col-sm-9 col-lg-10">\n        <ui-select multiple tagging tagging-label="(new category)" ng-model="$ctrl.model.Categories" sortable="true" style="width: 300px;" title="Choose a category">\n          <ui-select-match placeholder="Select categories...">{{ $item }}</ui-select-match>\n          <ui-select-choices repeat="category in $ctrl.categories | filter:$select.search">\n            {{ category }}\n          </ui-select-choices>\n        </ui-select>\n      </div>\n    </div>\n    \x3c!-- !categories --\x3e\n    \x3c!-- administrator-only --\x3e\n    <div class="form-group">\n      <div class="col-sm-12">\n        <label for="tls" class="control-label text-left">\n          Administrator template\n          <portainer-tooltip position="bottom" message="This template will only be available to administrator users."></portainer-tooltip>\n        </label>\n        <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="$ctrl.model.AdministratorOnly" /><i></i> </label>\n      </div>\n    </div>\n    \x3c!-- administrator-only --\x3e\n  </div>\n  \x3c!-- !template-details --\x3e\n  <div ng-if="$ctrl.model.Type === 2 || $ctrl.model.Type === 3">\n    <div class="col-sm-12 form-section-title interactive" ng-click="$ctrl.state.collapseStack = !$ctrl.state.collapseStack">\n      \n      <span class="small space-left">\n        <a ng-if="$ctrl.state.collapseStack"><i class="fa fa-plus" aria-hidden="true"></i> expand</a>\n        <a ng-if="!$ctrl.state.collapseStack"><i class="fa fa-minus" aria-hidden="true"></i> collapse</a>\n      </span>\n    </div>\n    \x3c!-- stack-details --\x3e\n    <div uib-collapse="$ctrl.state.collapseStack">\n      \x3c!-- repository-url --\x3e\n      <div class="form-group" ng-class="{ \'has-error\': templateForm.template_repository_url.$invalid }">\n        <label for="template_repository_url" class="col-sm-3 col-lg-2 control-label text-left">Repository URL</label>\n        <div class="col-sm-9 col-lg-10">\n          <input\n            type="text"\n            class="form-control"\n            name="template_repository_url"\n            ng-model="$ctrl.model.Repository.url"\n            placeholder="https://github.com/portainer/portainer-compose"\n            required\n          />\n        </div>\n      </div>\n      <div class="form-group" ng-show="templateForm.template_repository_url.$invalid">\n        <div class="col-sm-12 small text-warning">\n          <div ng-messages="templateForm.template_repository_url.$error">\n            <p ng-message="required"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </p>\n          </div>\n        </div>\n      </div>\n      \x3c!-- !repository-url --\x3e\n      \x3c!-- composefile-path --\x3e\n      <div class="form-group">\n        <label for="template_repository_path" class="col-sm-3 col-lg-2 control-label text-left">\n          Compose file path\n        </label>\n        <div class="col-sm-9 col-lg-10">\n          <input type="text" class="form-control" name="template_repository_path" ng-model="$ctrl.model.Repository.stackfile" placeholder="docker-compose.yml" />\n        </div>\n      </div>\n      \x3c!-- !composefile-path --\x3e\n    </div>\n    \x3c!-- !stack-details --\x3e\n  </div>\n  <div ng-if="$ctrl.model.Type === 1">\n    <div class="col-sm-12 form-section-title interactive" ng-click="$ctrl.state.collapseContainer = !$ctrl.state.collapseContainer">\n      Container\n      <span class="small space-left">\n        <a ng-if="$ctrl.state.collapseContainer"><i class="fa fa-plus" aria-hidden="true"></i> expand</a>\n        <a ng-if="!$ctrl.state.collapseContainer"><i class="fa fa-minus" aria-hidden="true"></i> collapse</a>\n      </span>\n    </div>\n    \x3c!-- container-details --\x3e\n    <div uib-collapse="$ctrl.state.collapseContainer">\n      <por-image-registry model="$ctrl.model.RegistryModel" auto-complete="true" label-class="col-sm-1" input-class="col-sm-11"></por-image-registry>\n      \x3c!-- command --\x3e\n      <div class="form-group">\n        <label for="template_command" class="col-sm-3 col-lg-2 control-label text-left">\n          Command\n          <portainer-tooltip\n            position="bottom"\n            message="The command to run in the container. If not specified, the container will use the default command specified in its Dockerfile."\n          ></portainer-tooltip>\n        </label>\n        <div class="col-sm-9 col-lg-10">\n          <input type="text" class="form-control" name="template_command" ng-model="$ctrl.model.Command" placeholder=\'/bin/bash -c \\"echo hello\\" && exit 777\' />\n        </div>\n      </div>\n      \x3c!-- !command --\x3e\n      \x3c!-- hostname --\x3e\n      <div class="form-group">\n        <label for="template_hostname" class="col-sm-3 col-lg-2 control-label text-left">\n          Host\n          <portainer-tooltip position="bottom" message="Set the hostname of the container. Will use Docker default if not specified."></portainer-tooltip>\n        </label>\n        <div class="col-sm-9 col-lg-10">\n          <input type="text" class="form-control" name="template_hostname" ng-model="$ctrl.model.Hostname" placeholder="mycontainername" />\n        </div>\n      </div>\n      \x3c!-- !hostname --\x3e\n      \x3c!-- network --\x3e\n      <div class="form-group">\n        <label for="template_network" class="col-sm-3 col-lg-2 control-label text-left">\n          \n        </label>\n        <div class="col-sm-10">\n          <select class="form-control" ng-options="net.Name for net in $ctrl.networks" ng-model="$ctrl.model.Network">\n            <option disabled hidden value=""></option>\n          </select>\n        </div>\n      </div>\n      \x3c!-- !network --\x3e\n      \x3c!-- port-mapping --\x3e\n      <div class="form-group">\n        <div class="col-sm-12" style="margin-top: 5px;">\n          <label class="control-label text-left"></label>\n          <span class="label label-default interactive" style="margin-left: 10px;" ng-click="$ctrl.addPortBinding()">\n            <i class="fa fa-plus-circle" aria-hidden="true"></i> \n          </span>\n        </div>\n        <div class="col-sm-12" style="margin-top: 10px;" ng-if="$ctrl.model.Ports.length > 0">\n          <span class="small text-muted">Portainer</span>\n        </div>\n        \x3c!-- port-mapping-input-list --\x3e\n        <div class="col-sm-12">\n          <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n            <div ng-repeat="portBinding in $ctrl.model.Ports" style="margin-top: 2px;">\n              \x3c!-- host-port --\x3e\n              <div class="input-group col-sm-4 input-group-sm">\n                <span class="input-group-addon">host</span>\n                <input type="text" class="form-control" ng-model="portBinding.hostPort" placeholder=" 80 or 1.2.3.4:80 (optional)" />\n              </div>\n              \x3c!-- !host-port --\x3e\n              <span style="margin: 0 10px 0 10px;">\n                <i class="fa fa-long-arrow-alt-right" aria-hidden="true"></i>\n              </span>\n              \x3c!-- container-port --\x3e\n              <div class="input-group col-sm-4 input-group-sm">\n                <span class="input-group-addon"></span>\n                <input type="text" class="form-control" ng-model="portBinding.containerPort" placeholder=" 80" />\n              </div>\n              \x3c!-- !container-port --\x3e\n              \x3c!-- protocol-actions --\x3e\n              <div class="input-group col-sm-3 input-group-sm">\n                <div class="btn-group btn-group-sm">\n                  <label class="btn btn-primary" ng-model="portBinding.protocol" uib-btn-radio="\'tcp\'">TCP</label>\n                  <label class="btn btn-primary" ng-model="portBinding.protocol" uib-btn-radio="\'udp\'">UDP</label>\n                </div>\n                <button class="btn btn-sm btn-danger" type="button" ng-click="$ctrl.removePortBinding($index)">\n                  <i class="fa fa-trash" aria-hidden="true"></i>\n                </button>\n              </div>\n              \x3c!-- !protocol-actions --\x3e\n            </div>\n          </div>\n        </div>\n        \x3c!-- !port-mapping-input-list --\x3e\n      </div>\n      \x3c!-- !port-mapping --\x3e\n      \x3c!-- volumes --\x3e\n      <div class="form-group">\n        <div class="col-sm-12" style="margin-top: 5px;">\n          <label class="control-label text-left"></label>\n          <span class="label label-default interactive" style="margin-left: 10px;" ng-click="$ctrl.addVolume()">\n            <i class="fa fa-plus-circle" aria-hidden="true"></i> \n          </span>\n        </div>\n        <div class="col-sm-12" style="margin-top: 10px;" ng-if="$ctrl.model.Volumes.length > 0">\n          <span class="small text-muted">Portainer will automatically create and map a local volume when using the <b>auto</b> option.</span>\n        </div>\n        <div ng-repeat="volume in $ctrl.model.Volumes">\n          <div class="col-sm-12" style="margin-top: 10px;">\n            \x3c!-- volume-line1 --\x3e\n            <div class="col-sm-12 form-inline">\n              \x3c!-- container-path --\x3e\n              <div class="input-group input-group-sm col-sm-6">\n                <span class="input-group-addon"></span>\n                <input type="text" class="form-control" ng-model="volume.container" placeholder=" /path/in/container" />\n              </div>\n              \x3c!-- !container-path --\x3e\n              \x3c!-- volume-type --\x3e\n              <div class="input-group col-sm-5" style="margin-left: 5px;">\n                <div class="btn-group btn-group-sm">\n                  <label class="btn btn-primary" ng-model="volume.type" uib-btn-radio="\'auto\'" ng-click="volume.bind = \'\'">Auto</label>\n                  <label class="btn btn-primary" ng-model="volume.type" uib-btn-radio="\'bind\'" ng-click="volume.bind = \'\'"></label>\n                </div>\n                <button class="btn btn-sm btn-danger" type="button" ng-click="$ctrl.removeVolume($index)">\n                  <i class="fa fa-trash" aria-hidden="true"></i>\n                </button>\n              </div>\n              \x3c!-- !volume-type --\x3e\n            </div>\n            \x3c!-- !volume-line1 --\x3e\n            \x3c!-- volume-line2 --\x3e\n            <div class="col-sm-12 form-inline" style="margin-top: 5px;" ng-if="volume.type !== \'auto\'">\n              <i class="fa fa-long-arrow-alt-right" aria-hidden="true"></i>\n              \x3c!-- bind --\x3e\n              <div class="input-group input-group-sm col-sm-6" ng-if="volume.type === \'bind\'">\n                <span class="input-group-addon">host</span>\n                <input type="text" class="form-control" ng-model="volume.bind" placeholder=" /path/on/host" />\n              </div>\n              \x3c!-- !bind --\x3e\n              \x3c!-- read-only --\x3e\n              <div class="input-group input-group-sm col-sm-5" style="margin-left: 5px;">\n                <div class="btn-group btn-group-sm">\n                  <label class="btn btn-primary" ng-model="volume.readonly" uib-btn-radio="false"></label>\n                  <label class="btn btn-primary" ng-model="volume.readonly" uib-btn-radio="true"></label>\n                </div>\n              </div>\n              \x3c!-- !read-only --\x3e\n            </div>\n            \x3c!-- !volume-line2 --\x3e\n          </div>\n        </div>\n      </div>\n      \x3c!-- !volumes --\x3e\n      \x3c!-- labels --\x3e\n      <div class="form-group">\n        <div class="col-sm-12" style="margin-top: 5px;">\n          <label class="control-label text-left"></label>\n          <span class="label label-default interactive" style="margin-left: 10px;" ng-click="$ctrl.addLabel()">\n            <i class="fa fa-plus-circle" aria-hidden="true"></i> \n          </span>\n        </div>\n        \x3c!-- labels-input-list --\x3e\n        <div class="col-sm-12">\n          <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n            <div ng-repeat="label in $ctrl.model.Labels" style="margin-top: 2px;">\n              <div class="input-group col-sm-5 input-group-sm">\n                <span class="input-group-addon">name</span>\n                <input type="text" class="form-control" ng-model="label.name" placeholder=" com.example.foo" />\n              </div>\n              <div class="input-group col-sm-5 input-group-sm">\n                <span class="input-group-addon">value</span>\n                <input type="text" class="form-control" ng-model="label.value" placeholder=" bar" />\n              </div>\n              <button class="btn btn-sm btn-danger" type="button" ng-click="$ctrl.removeLabel($index)">\n                <i class="fa fa-trash" aria-hidden="true"></i>\n              </button>\n            </div>\n          </div>\n        </div>\n        \x3c!-- !labels-input-list --\x3e\n      </div>\n      \x3c!-- !labels --\x3e\n      \x3c!-- restart_policy --\x3e\n      <div class="form-group">\n        <label for="template_restart_policy" class="col-sm-3 col-lg-2 control-label text-left">\n          \n        </label>\n        <div class="col-sm-9 col-lg-10">\n          <select class="form-control" name="template_platform" ng-model="$ctrl.model.RestartPolicy">\n            <option value="always"></option>\n            <option value="unless-stopped">,()</option>\n            <option value="on-failure"></option>\n            <option value="no"></option>\n          </select>\n        </div>\n      </div>\n      \x3c!-- !restart_policy --\x3e\n      \x3c!-- privileged-mode --\x3e\n      <div class="form-group">\n        <div class="col-sm-12">\n          <label for="tls" class="control-label text-left">\n            \n            <portainer-tooltip position="bottom" message=""></portainer-tooltip>\n          </label>\n          <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="$ctrl.model.Privileged" /><i></i> </label>\n        </div>\n      </div>\n      \x3c!-- !privileged-mode --\x3e\n      \x3c!-- interactive-mode --\x3e\n      <div class="form-group">\n        <div class="col-sm-12">\n          <label for="tls" class="control-label text-left">\n            Interactive mode\n            <portainer-tooltip position="bottom" message="-i-t"></portainer-tooltip>\n          </label>\n          <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="$ctrl.model.Interactive" /><i></i> </label>\n        </div>\n      </div>\n      \x3c!-- !interactive-mode --\x3e\n    </div>\n    \x3c!-- !container-details --\x3e\n  </div>\n  <div class="col-sm-12 form-section-title interactive" ng-click="$ctrl.state.collapseEnv = !$ctrl.state.collapseEnv">\n    Environment\n    <span class="small space-left">\n      <a ng-if="$ctrl.state.collapseEnv"><i class="fa fa-plus" aria-hidden="true"></i> expand</a>\n      <a ng-if="!$ctrl.state.collapseEnv"><i class="fa fa-minus" aria-hidden="true"></i> collapse</a>\n    </span>\n  </div>\n  \x3c!-- environment-details --\x3e\n  <div uib-collapse="$ctrl.state.collapseEnv">\n    \x3c!-- env --\x3e\n    <div class="form-group">\n      <div class="col-sm-12" style="margin-top: 5px;">\n        <label class="control-label text-left"></label>\n        <span class="label label-default interactive" style="margin-left: 10px;" ng-click="$ctrl.addEnvVar()">\n          <i class="fa fa-plus-circle" aria-hidden="true"></i> add variable\n        </span>\n      </div>\n      \x3c!-- env-var-list --\x3e\n      <div style="margin-top: 10px;">\n        <div class="col-sm-12 template-envvar" ng-repeat="var in $ctrl.model.Env" style="margin-top: 10px;">\n          <div class="form-group"></div>\n          <div class="form-group" style="margin-bottom: 0;">\n            <div class="boxselector_wrapper">\n              <div>\n                <input type="radio" id="preset_var_{{ $index }}" ng-model="var.type" ng-value="1" ng-change="$ctrl.changeEnvVarType(var)" />\n                <label for="preset_var_{{ $index }}">\n                  <div class="boxselector_header">\n                    <i class="fa fa-user-slash" aria-hidden="true" style="margin-right: 2px;"></i>\n                    Preset\n                  </div>\n                  <p>Preset variable</p>\n                </label>\n              </div>\n              <div>\n                <input type="radio" id="text_var_{{ $index }}" ng-model="var.type" ng-value="2" ng-change="$ctrl.changeEnvVarType(var)" />\n                <label for="text_var_{{ $index }}">\n                  <div class="boxselector_header">\n                    <i class="fa fa-edit" aria-hidden="true" style="margin-right: 2px;"></i>\n                    \n                  </div>\n                  <p>Free text value</p>\n                </label>\n              </div>\n              <div>\n                <input type="radio" id="select_var_{{ $index }}" ng-model="var.type" ng-value="3" />\n                <label for="select_var_{{ $index }}">\n                  <div class="boxselector_header">\n                    <i class="fa fa-list-ol" aria-hidden="true" style="margin-right: 2px;"></i>\n                    Select\n                  </div>\n                  <p>Choose value from list</p>\n                </label>\n              </div>\n            </div>\n          </div>\n          <div class="form-group">\n            <label class="col-sm-2 control-label text-left">\n              \n            </label>\n            <div class="col-sm-8">\n              <input type="text" class="form-control" ng-model="var.name" placeholder="env_var" />\n            </div>\n            <div class="col-sm-2">\n              <button class="btn btn-sm btn-danger space-left" type="button" ng-click="$ctrl.removeEnvVar($index)">\n                <i class="fa fa-trash" aria-hidden="true"></i>\n              </button>\n            </div>\n          </div>\n          <div ng-if="var.type == 2 || var.type == 3">\n            <div class="form-group">\n              <label class="col-sm-2 control-label text-left">\n                Label\n              </label>\n              <div class="col-sm-10">\n                <input type="text" class="form-control" ng-model="var.label" placeholder="Choose a label" />\n              </div>\n            </div>\n            <div class="form-group">\n              <label class="col-sm-2 control-label text-left" style="margin-top: 2px;">\n                Description\n              </label>\n              <div class="col-sm-10" style="margin-top: 2px;">\n                <input type="text" class="form-control" ng-model="var.description" placeholder="Tooltip" />\n              </div>\n            </div>\n          </div>\n          <div class="form-group" ng-if="var.type === 1 || var.type === 2">\n            <label class="col-sm-2 control-label text-left">\n              Default value\n            </label>\n            <div class="col-sm-10">\n              <input type="text" class="form-control" ng-model="var.default" placeholder="default_value" />\n            </div>\n          </div>\n          <div ng-if="var.type === 3" style="margin-bottom: 5px;" class="form-group">\n            <div class="col-sm-12" style="margin-top: 5px;">\n              <label class="control-label text-left">Values</label>\n              <span class="label label-default interactive" style="margin-left: 10px;" ng-click="$ctrl.addEnvVarValue(var)">\n                <i class="fa fa-plus-circle" aria-hidden="true"></i> add allowed value\n              </span>\n            </div>\n            \x3c!-- envvar-values-list --\x3e\n            <div class="col-sm-12">\n              <div class="col-sm-12 form-inline" style="margin-top: 10px;">\n                <div ng-repeat="val in var.select" style="margin-top: 2px;">\n                  <div class="input-group col-sm-5 input-group-sm">\n                    <span class="input-group-addon">name</span>\n                    <input type="text" class="form-control" ng-model="val.text" placeholder="Yes, I agree" />\n                  </div>\n                  <div class="input-group col-sm-5 input-group-sm">\n                    <span class="input-group-addon">value</span>\n                    <input type="text" class="form-control" ng-model="val.value" placeholder="Y" />\n                  </div>\n                  <div class="input-group col-sm-1 input-group-sm">\n                    <button class="btn btn-sm btn-danger" type="button" ng-click="$ctrl.removeEnvVarValue(var, $index)">\n                      <i class="fa fa-trash" aria-hidden="true"></i>\n                    </button>\n                    <input style="margin-left: 5px;" type="checkbox" ng-model="val.default" id="val_default_{{ $index }}" /><label for="val_default_{{ $index }}" class="space-left"\n                      ></label\n                    >\n                  </div>\n                </div>\n              </div>\n            </div>\n            \x3c!-- envvar-values-list --\x3e\n          </div>\n          <div class="col-sm-12" ng-show="$ctrl.model.Env.length > 1">\n            <div class="line-separator"></div>\n          </div>\n        </div>\n      </div>\n      \x3c!-- !env-var-list --\x3e\n    </div>\n    \x3c!-- !env --\x3e\n  </div>\n  \x3c!-- !environment-details --\x3e\n  \x3c!-- actions --\x3e\n  <div class="col-sm-12 form-section-title">\n    \n  </div>\n  <div class="form-group">\n    <div class="col-sm-12">\n      <button\n        type="button"\n        class="btn btn-primary btn-sm"\n        ng-click="$ctrl.formAction()"\n        ng-disabled="$ctrl.actionInProgress || !templateForm.$valid"\n        button-spinner="$ctrl.actionInProgress"\n      >\n        <span ng-hide="$ctrl.actionInProgress">{{ $ctrl.formActionLabel }}</span>\n        <span ng-show="$ctrl.actionInProgress">In progress...</span>\n      </button>\n    </div>\n  </div>\n  \x3c!-- !actions --\x3e\n</form>\n')}]),e.exports=n},function(e,t){angular.module("portainer.app").controller("TemplateFormController",[function(){this.state={collapseTemplate:!1,collapseContainer:!1,collapseStack:!1,collapseEnv:!1},this.addPortBinding=function(){this.model.Ports.push({containerPort:"",protocol:"tcp"})},this.removePortBinding=function(e){this.model.Ports.splice(e,1)},this.addVolume=function(){this.model.Volumes.push({container:"",bind:"",readonly:!1,type:"auto"})},this.removeVolume=function(e){this.model.Volumes.splice(e,1)},this.addLabel=function(){this.model.Labels.push({name:"",value:""})},this.removeLabel=function(e){this.model.Labels.splice(e,1)},this.addEnvVar=function(){this.model.Env.push({type:1,name:"",label:"",description:"",default:"",preset:!0,select:[]})},this.removeEnvVar=function(e){this.model.Env.splice(e,1)},this.addEnvVarValue=function(e){e.select=e.select||[],e.select.push({name:"",value:""})},this.removeEnvVarValue=function(e,t){e.select.splice(t,1)},this.changeEnvVarType=function(e){e.preset=1===e.type}}])},function(e,t,n){"use strict";n.r(t);var a=n(4),r=n(237),i=n(1550);angular.module("portainer.app").component("groupAssociationTable",{templateUrl:i,controller:function(){this.state={orderBy:"Name",reverseOrder:!1,paginatedItemLimit:"10",textFilter:"",loading:!0,pageNumber:1},this.changeOrderBy=function(e){this.state.reverseOrder=this.state.orderBy===e&&!this.state.reverseOrder,this.state.orderBy=e},this.onTextFilterChange=function(){this.paginationChangedAction()},this.onPageChanged=function(e){this.paginationState.pageNumber=e,this.paginationChangedAction()},this.onPaginationLimitChanged=function(){this.paginationChangedAction()},this.paginationChangedAction=function(){this.retrievePage(this.pageType,this.tableType)},this.$onChanges=function(e){e.loaded&&e.loaded.currentValue&&this.paginationChangedAction()},this.tagIdsToTagNames=function(e){return r.default.idsToTagNames(this.tags,e).join(", ")||"-"},this.groupIdToGroupName=function(e){var t=Object(a.a)(this.groups,{Id:e});return t?t.Name:""}},bindings:{paginationState:"=",loaded:"<",pageType:"<",tableType:"@",retrievePage:"<",dataset:"<",entryClick:"<",emptyDatasetMessage:"@",tags:"<",showTags:"<",groups:"<",showGroups:"<",hasBackendPagination:"<"}})},function(e,t){var n="app/portainer/components/group-association-table/groupAssociationTable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <table class="table table-hover">\n    <div class="col-sm-12">\n      <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n      <input\n        type="text"\n        class="searchInput"\n        ng-model="$ctrl.paginationState.filter"\n        ng-change="$ctrl.onTextFilterChange()"\n        ng-model-options="{ debounce: 300 }"\n        placeholder="..."\n      />\n    </div>\n    <thead>\n      <tr>\n        <th>\n          \n        </th>\n        <th ng-if="$ctrl.showGroups">\n          Group\n        </th>\n        <th ng-if="$ctrl.showTags">\n          \n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr\n        ng-if="!$ctrl.hasBackendPagination"\n        ng-click="$ctrl.entryClick(item)"\n        class="interactive"\n        dir-paginate="item in $ctrl.dataset | filter:$ctrl.paginationState.filter | itemsPerPage: $ctrl.paginationState.limit"\n        pagination-id="$ctrl.tableType"\n      >\n        <td>\n          {{ item.Name | truncate: 64 }}\n        </td>\n        <td ng-if="$ctrl.showGroups">\n          {{ $ctrl.groupIdToGroupName(item.GroupId) | truncate: 64 }}\n        </td>\n        <td ng-if="$ctrl.showTags">\n          {{ $ctrl.tagIdsToTagNames(item.TagIds) | arraytostr | truncate: 64 }}\n        </td>\n      </tr>\n      <tr\n        ng-if="$ctrl.hasBackendPagination"\n        ng-click="$ctrl.entryClick(item)"\n        class="interactive"\n        dir-paginate="item in $ctrl.dataset | itemsPerPage: $ctrl.paginationState.limit"\n        pagination-id="$ctrl.tableType"\n        total-items="$ctrl.paginationState.totalCount"\n      >\n        <td>\n          {{ item.Name | truncate: 64 }}\n        </td>\n        <td ng-if="$ctrl.showGroups">\n          {{ $ctrl.groupIdToGroupName(item.GroupId) | truncate: 64 }}\n        </td>\n        <td ng-if="$ctrl.showTags">\n          {{ $ctrl.tagIdsToTagNames(item.TagIds) | truncate: 64 }}\n        </td>\n      </tr>\n\n      <tr ng-if="!$ctrl.dataset">\n        <td colspan="3" class="text-center text-muted">...</td>\n      </tr>\n      <tr ng-if="$ctrl.dataset.length === 0">\n        <td colspan="3" class="text-center text-muted">{{ $ctrl.emptyDatasetMessage }}</td>\n      </tr>\n    </tbody>\n  </table>\n  <div class="footer" ng-if="$ctrl.dataset">\n    <div class="paginationControls">\n      <form class="form-inline">\n        <span class="limitSelector">\n          <span style="margin-right: 5px;">\n            \n          </span>\n          <select ng-model="$ctrl.paginationState.limit" ng-change="$ctrl.onPaginationLimitChanged()">\n            <option value="10">10</option>\n            <option value="25">25</option>\n            <option value="50">50</option>\n            <option value="100">100</option>\n          </select>\n        </span>\n        <dir-pagination-controls pagination-id="$ctrl.tableType" max-size="5" on-page-change="$ctrl.onPageChanged(newPageNumber, oldPageNumber)"></dir-pagination-controls>\n      </form>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.app").directive("rdHeaderContent",["Authentication",function(e){return{requires:"^rdHeader",transclude:!0,link:function(t){t.username=e.getUserDetails().username},template:'<div class="breadcrumb-links"><div class="pull-left" ng-transclude></div><div class="pull-right" ng-if="username"><a ui-sref="portainer.account" style="margin-right: 5px;"><u><i class="fa fa-wrench" aria-hidden="true"></i>  </u></a><a ui-sref="portainer.logout({performApiLogout: true})" class="text-danger" style="margin-right: 25px;"><u><i class="fa fa-sign-out-alt" aria-hidden="true"></i> </u></a><a href="https://jq.qq.com/?_wv=1027&k=5HqPeR7" target="_blank">: ysp</a></div></div>',restrict:"E"}}])},function(e,t){angular.module("portainer.app").directive("rdHeaderTitle",["Authentication",function(e){return{requires:"^rdHeader",scope:{titleText:"@"},link:function(t){t.username=e.getUserDetails().username},transclude:!0,template:'<div class="page white-space-normal">{{titleText}}<span class="header_title_content" ng-transclude></span><span class="pull-right user-box" ng-if="username"><i class="fa fa-user-circle" aria-hidden="true"></i> {{username}}</span></div>',restrict:"E"}}])},function(e,t){angular.module("portainer.app").directive("rdHeader",(function(){return{scope:{ngModel:"="},transclude:!0,template:'<div class="row header"><div id="loadingbar-placeholder"></div><div class="col-xs-12"><div class="meta" ng-transclude></div></div></div>',restrict:"EA"}}))},function(e,t,n){var a=n(1555);angular.module("portainer.app").component("informationPanelOffline",{templateUrl:a,controller:"InformationPanelOfflineController"})},function(e,t){var n="app/portainer/components/information-panel-offline/informationPanelOffline.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<information-panel title-text="Offline mode" cant-dismiss="true">\n  <span class="small">\n    <p class="text-muted">\n      <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n      This endpoint is currently offline (read-only). Data shown is based on the latest available snapshot.\n    </p>\n    <p class="text-muted">\n      <i class="fa fa-clock" aria-hidden="true" style="margin-right: 2px;"></i>\n      Last snapshot: {{ $ctrl.snapshotTime | getisodatefromtimestamp }}\n    </p>\n    <button type="button" class="btn btn-xs btn-primary" ng-click="$ctrl.triggerSnapshot()" ng-if="$ctrl.showRefreshButton">\n      <i class="fa fa-sync space-right" aria-hidden="true"></i>\n    </button>\n  </span>\n</information-panel>\n')}]),e.exports=n},function(e,t){angular.module("portainer.app").controller("InformationPanelOfflineController",["$state","EndpointProvider","EndpointService","Authentication","Notifications",function(e,t,n,a,r){var i=this;this.$onInit=function(){var e=t.endpointID();i.showRefreshButton=a.isAdmin(),n.endpoint(e).then((function(e){i.snapshotTime=e.Snapshots[0].Time})).catch((function(e){r.error("",e,"Unable to retrieve endpoint information")}))},this.triggerSnapshot=function(){var a=t.endpointID();n.snapshotEndpoint(a).then((function(){e.reload()})).catch((function(e){r.error("",e,"An error occured during endpoint snapshot")}))}}])},function(e,t,n){var a=n(1558);angular.module("portainer.app").component("informationPanel",{templateUrl:a,bindings:{titleText:"@",dismissAction:"&?"},transclude:!0})},function(e,t){var n="app/portainer/components/information-panel/informationPanel.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="row">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-body>\n        <div class="col-sm-12 form-section-title">\n          <span style="float: left;">\n            {{ $ctrl.titleText }}\n          </span>\n          <span class="small" style="float: right;" ng-if="$ctrl.dismissAction">\n            <a ng-click="$ctrl.dismissAction()"><i class="fa fa-times"></i> dismiss</a>\n          </span>\n        </div>\n        <div class="form-group">\n          <ng-transclude></ng-transclude>\n        </div>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.app").directive("rdLoading",(function(){return{restrict:"AE",template:'<div class="loading"><div class="double-bounce1"></div><div class="double-bounce2"></div></div>'}}))},function(e,t,n){var a=n(1561);angular.module("portainer.app").component("motdPanel",{templateUrl:a,bindings:{motd:"<",dismissAction:"&?"},transclude:!0})},function(e,t){var n="app/portainer/components/motd-panel/motdPanel.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="row">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-body classes="motd-body">\n        <style ng-if="$ctrl.motd.Style">\n          {{ $ctrl.motd.Style }}\n        </style>\n        <div ng-style="{{ $ctrl.motd.ContentLayout ? $ctrl.motd.ContentLayout : {} }}">\n          <div class="col-sm-12 form-section-title">\n            <span style="float: left;">\n              {{ $ctrl.motd.Title }}\n            </span>\n            <span class="small" style="float: right;" ng-if="$ctrl.dismissAction">\n              <a ng-click="$ctrl.dismissAction()"><i class="fa fa-times"></i> dismiss</a>\n            </span>\n          </div>\n          <div class="form-group">\n            <span class="text-muted">\n              <p ng-bind-html="$ctrl.motd.Message"></p>\n            </span>\n          </div>\n        </div>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.app").directive("onEnterKey",[function(){return{restrict:"A",link:function(e,t,n){t.bind("keydown keypress",(function(t){13===t.which&&(t.preventDefault(),e.$apply((function(){e.$eval(n.onEnterKey)})))}))}}}])},function(e,t,n){var a=n(1564);angular.module("portainer.app").component("productItem",{templateUrl:a,bindings:{model:"<",goTo:"<"}})},function(e,t,n){var a="app/portainer/components/product-list/product-item/productItem.html",r='\x3c!-- extension --\x3e\n<div class="blocklist-item" ng-click="$ctrl.goTo($ctrl.model)">\n  <div class="blocklist-item-box">\n    \x3c!-- extension-image --\x3e\n    <span class="blocklist-item-logo">\n      <img class="blocklist-item-logo" ng-if="$ctrl.model.Id == 1 || $ctrl.model.Id == 2 || $ctrl.model.Id == 3" src="'+n(1565)+'" />\n      <img class="blocklist-item-logo" ng-if="$ctrl.model.Id == 4 || $ctrl.model.Id == 5" src="'+n(1566)+'" />\n    </span>\n    \x3c!-- !extension-image --\x3e\n    \x3c!-- extension-details --\x3e\n    <span class="col-sm-12">\n      \x3c!-- blocklist-item-line1 --\x3e\n      <div class="blocklist-item-line">\n        <span>\n          <span class="blocklist-item-title">\n            {{ $ctrl.model.Name }}\n          </span>\n        </span>\n      </div>\n      \x3c!-- !blocklist-item-line1 --\x3e\n      \x3c!-- blocklist-item-line2 --\x3e\n      <div class="blocklist-item-line">\n        <span>\n          <span class="blocklist-item-desc">\n            {{ $ctrl.model.ShortDescription }}\n          </span>\n        </span>\n      </div>\n      \x3c!-- !blocklist-item-line2 --\x3e\n    </span>\n    \x3c!-- !extension-details --\x3e\n  </div>\n  \x3c!-- !extension --\x3e\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(a,r)}]),e.exports=a},function(e,t,n){e.exports=n.p+"6b03ffb82223ffdcc7fc093f199f758b.png"},function(e,t,n){e.exports=n.p+"249bec13697c484bcfe40241cabfd053.png"},function(e,t,n){var a=n(1568);angular.module("portainer.app").component("productList",{templateUrl:a,bindings:{titleText:"@",products:"<",goTo:"<"}})},function(e,t){var n="app/portainer/components/product-list/productList.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa fa-bolt" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n      </div>\n\n      <div class="blocklist">\n        <product-item ng-repeat="product in $ctrl.products" model="product" go-to="$ctrl.goTo"></product-item>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(1570);angular.module("portainer.app").component("slider",{templateUrl:a,controller:"SliderController",bindings:{model:"=",onChange:"&",floor:"<",ceil:"<",step:"<",precision:"<"}})},function(e,t){var n="app/portainer/components/slider/slider.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div>\n  <rzslider rz-slider-options="$ctrl.options" rz-slider-model="$ctrl.model"></rzslider>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a);function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$scope=t,this.buildOptions=this.buildOptions.bind(this),this.translate=this.translate.bind(this)}var t,n,a;return e.$inject=["$scope"],t=e,(n=[{key:"$onChanges",value:function(){this.buildOptions()}},{key:"translate",value:function(e,t,n){return"floor"===n&&0===this.floor||0===e?"":e}},{key:"buildOptions",value:function(){var e=this;this.options={floor:this.floor,ceil:this.ceil,step:this.step,precision:this.precision,showSelectionBar:!0,enforceStep:!1,translate:this.translate,onChange:function(){return e.onChange()}}}},{key:"$onInit",value:function(){this.buildOptions()}}])&&i(t.prototype,n),a&&i(t,a),e}();t.default=s,r.a.module("portainer.app").controller("SliderController",s)},function(e,t){angular.module("portainer.app").controller("StackDuplicationFormController",["Notifications",function(e){var t=this;function n(){return t.formValues.endpoint&&t.formValues.endpoint.Id}t.state={duplicationInProgress:!1,migrationInProgress:!1},t.formValues={endpoint:null,newName:""},t.isFormValidForDuplication=function(){return n()&&t.formValues.newName},t.isFormValidForMigration=n,t.duplicateStack=function(){if(!t.formValues.newName)return void e.error("",null,"Stack name is required for duplication");t.state.duplicationInProgress=!0,t.onDuplicate({endpointId:t.formValues.endpoint.Id,name:t.formValues.newName?t.formValues.newName:void 0}).finally((function(){t.state.duplicationInProgress=!1}))},t.migrateStack=function(){t.state.migrationInProgress=!0,t.onMigrate({endpointId:t.formValues.endpoint.Id,name:t.formValues.newName?t.formValues.newName:void 0}).finally((function(){t.state.migrationInProgress=!1}))},t.isMigrationButtonDisabled=function(){return!t.isFormValidForMigration()||t.state.duplicationInProgress||t.state.migrationInProgress||t.formValues.endpoint&&t.formValues.endpoint.Id===t.currentEndpointId}}])},function(e,t,n){var a=n(1574);angular.module("portainer.app").component("stackDuplicationForm",{templateUrl:a,controller:"StackDuplicationFormController",bindings:{onDuplicate:"&",onMigrate:"&",endpoints:"<",groups:"<",currentEndpointId:"<"}})},function(e,t){var n="app/portainer/components/stack-duplication-form/stack-duplication-form.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div authorization="PortainerStackMigrate">\n  <div class="col-sm-12 form-section-title">\n    Stack duplication / migration\n  </div>\n  <div class="form-group">\n    <span class="small" style="margin-top: 10px;">\n      <p class="text-muted">\n        \n      </p>\n    </span>\n    <div>\n      <div class="form-group">\n        <input class="form-control" placeholder="Stack name (optional for migration)" aria-placeholder="Stack name" ng-model="$ctrl.formValues.newName" />\n      </div>\n      <endpoint-selector ng-if="$ctrl.endpoints && $ctrl.groups" model="$ctrl.formValues.endpoint" endpoints="$ctrl.endpoints" groups="$ctrl.groups"></endpoint-selector>\n      <button\n        class="btn btn-sm btn-primary"\n        ng-click="$ctrl.migrateStack()"\n        ng-disabled="$ctrl.isMigrationButtonDisabled()"\n        style="margin-top: 7px; margin-left: 0;"\n        button-spinner="$ctrl.state.migrationInProgress"\n      >\n        <span ng-hide="$ctrl.state.migrationInProgress"> <i class="fa fa-long-arrow-alt-right space-right" aria-hidden="true"></i> Migrate </span>\n        <span ng-show="$ctrl.state.migrationInProgress">Migration in progress...</span>\n      </button>\n      <button\n        class="btn btn-sm btn-primary"\n        ng-click="$ctrl.duplicateStack()"\n        ng-disabled="!$ctrl.isFormValidForDuplication() || $ctrl.state.duplicationInProgress || $ctrl.state.migrationInProgress"\n        style="margin-top: 7px; margin-left: 0;"\n        button-spinner="$ctrl.state.duplicationInProgress"\n      >\n        <span ng-hide="$ctrl.state.duplicationInProgress"> <i class="fa fa-clone space-right" aria-hidden="true"></i> Duplicate </span>\n        <span ng-show="$ctrl.state.duplicationInProgress">Duplication in progress...</span>\n      </button>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){var a=n(1576);angular.module("portainer.app").component("tagSelector",{templateUrl:a,controller:"TagSelectorController",bindings:{tags:"<",model:"=",onCreate:"<",allowCreate:"<"}})},function(e,t){var n="app/portainer/components/tag-selector/tagSelector.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div ng-show="$ctrl.model.length > 0" class="col-sm-12" style="padding: 0; margin-bottom: 15px;">\n  <label class="col-sm-3 col-lg-2 control-label text-left">\n    Selected tags\n  </label>\n  <div class="col-sm-9 col-lg-10" style="padding-top: 4px;">\n    <span class="tag space-right interactive" ng-repeat="tag in $ctrl.state.selectedTags" ng-click="$ctrl.removeTag(tag)">\n      {{ tag.Name }}\n      <a title="Remove tag" ng-click="$ctrl.removeTag(tag)" style="margin-left: 2px;">\n        <span class="fa fa-trash-alt white-icon" aria-hidden="true"></span>\n      </a>\n    </span>\n  </div>\n</div>\n<div class="col-sm-12" style="padding: 0;">\n  <label for="tags" class="col-sm-3 col-lg-2 control-label text-left">\n    \n  </label>\n  <div class="col-sm-9 col-lg-10" ng-if="$ctrl.allowCreate || $ctrl.tags.length > 0">\n    <input\n      type="text"\n      ng-model="$ctrl.state.selectedValue"\n      id="tags"\n      class="form-control"\n      placeholder="Select tags..."\n      uib-typeahead="tag.Id as tag.Name for tag in $ctrl.filterTags($viewValue)"\n      typeahead-on-select="$ctrl.selectTag($item, $model, $label)"\n      typeahead-no-results="$ctrl.state.noResult"\n      typeahead-show-hint="true"\n      typeahead-min-length="0"\n    />\n  </div>\n  <div class="col-sm-9 col-lg-10" ng-if="!$ctrl.allowCreate && $ctrl.tags.length === 0">\n    <span class="small text-muted">\n      No tags available.\n    </span>\n  </div>\n</div>\n<div class="col-sm-offset-3 col-lg-offset-2 col-sm-12" ng-if="!$ctrl.allowCreate && $ctrl.state.noResult" style="margin-top: 2px;">\n  <span class="small text-muted">\n    No tags matching your filter.\n  </span>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(4),i=n(10),s=n(5),o=n(22),l=n(1),c=n.n(l);function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state={selectedValue:"",selectedTags:[],noResult:!1}}var t,n,l;return t=e,(n=[{key:"removeTag",value:function(e){Object(o.a)(this.model,(function(t){return e.Id===t})),Object(o.a)(this.state.selectedTags,{Id:e.Id})}},{key:"selectTag",value:function(e){this.state.selectedValue="",e.create&&this.allowCreate?this.onCreate(e.value):(this.state.selectedTags.push(e),this.model.push(e.Id))}},{key:"filterTags",value:function(e){var t=this,n=Object(s.a)(this.tags,(function(e){return!Object(i.a)(t.model,e.Id)}));if(!e)return n.slice(0,7);var a=Object(r.a)(this.tags,(function(t){return t.Name===e}));return n=Object(s.a)(n,(function(t){return Object(i.a)(t.Name.toLowerCase(),e.toLowerCase())})),a||!this.allowCreate?n.slice(0,7):n.slice(0,6).concat({Name:'Create "'.concat(e,'"'),create:!0,value:e})}},{key:"generateSelectedTags",value:function(e,t){this.state.selectedTags=Object(a.a)(e,(function(e){return Object(r.a)(t,(function(t){return t.Id===e}))}))}},{key:"$onInit",value:function(){this.generateSelectedTags(this.model,this.tags)}},{key:"$onChanges",value:function(e){var t=e.tags,n=e.model,a=t&&t.currentValue?t.currentValue:this.tags,r=n&&n.currentValue?n.currentValue:this.model;r&&a&&this.generateSelectedTags(r,a)}}])&&d(t.prototype,n),l&&d(t,l),e}();t.default=u,c.a.module("portainer.app").controller("TagSelectorController",u)},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=(n(1580),n(1579));r.a.module("portainer.app").component("templateItem",{templateUrl:i,bindings:{model:"<",typeLabel:"@",onSelect:"<"},transclude:{actions:"?templateItemActions"}})},function(e,t){var n="app/portainer/components/template-list/template-item/templateItem.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'\x3c!-- template --\x3e\n<div ng-class="{ \'blocklist-item--selected\': $ctrl.model.Selected }" class="blocklist-item template-item" ng-click="$ctrl.onSelect($ctrl.model)">\n  <div class="blocklist-item-box">\n    \x3c!-- template-image --\x3e\n    <span ng-if="$ctrl.model.Logo">\n      <img class="blocklist-item-logo" ng-src="{{ $ctrl.model.Logo }}" />\n    </span>\n    <span class="blocklist-item-logo" ng-if="!$ctrl.model.Logo">\n      <i class="fa fa-rocket fa-4x blue-icon" aria-hidden="true"></i>\n    </span>\n    \x3c!-- !template-image --\x3e\n    \x3c!-- template-details --\x3e\n    <div class="col-sm-12 template-item-details">\n      \x3c!-- blocklist-item-line1 --\x3e\n      <div class="blocklist-item-line">\n        <span>\n          <span class="blocklist-item-title">\n            {{ $ctrl.model.Title }}\n          </span>\n          <span class="space-left blocklist-item-subtitle">\n            <span>\n              <i class="fab fa-linux" aria-hidden="true" ng-if="$ctrl.model.Platform === 1 || $ctrl.model.Platform === \'linux\' || !$ctrl.model.Platform"></i>\n              <span ng-if="!$ctrl.model.Platform"> &amp; </span>\n              <i class="fab fa-windows" aria-hidden="true" ng-if="$ctrl.model.Platform === 2 || $ctrl.model.Platform === \'windows\' || !$ctrl.model.Platform"></i>\n            </span>\n            <span>\n              {{ $ctrl.typeLabel }}\n            </span>\n          </span>\n        </span>\n      </div>\n      \x3c!-- !blocklist-item-line1 --\x3e\n      <span class="blocklist-item-actions" ng-transclude="actions"></span>\n      \x3c!-- blocklist-item-line2 --\x3e\n      <div class="blocklist-item-line template-item-details-sub">\n        <span class="blocklist-item-desc">\n          {{ $ctrl.model.Description }}\n        </span>\n        <span class="small text-muted" ng-if="$ctrl.model.Categories.length > 0">\n          {{ $ctrl.model.Categories.join(\', \') }}\n        </span>\n      </div>\n      \x3c!-- !blocklist-item-line2 --\x3e\n    </div>\n    \x3c!-- !template-details --\x3e\n  </div>\n  \x3c!-- !template --\x3e\n</div>\n')}]),e.exports=n},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(10),r=n(52),i=n(62);function s(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){s(i,a,r,o,l,"next",e)}function l(e){s(i,a,r,o,l,"throw",e)}o(void 0)}))}}function l(e,t,n,s,l){var c=this;function d(){return(d=o(regeneratorRuntime.mark((function e(n){var a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.templateFile(n.Repository.url,n.Repository.stackfile);case 3:a=e.sent,r=a.FileContent,i=0,2===n.Type&&(i=1),3===n.Type&&(i=2),t.go("docker.templates.custom.new",{fileContent:r,type:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),s.error("",e.t0,"Failed to duplicate template");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}this.state={textFilter:"",selectedCategory:"",categories:[],showContainerTemplates:!0},this.onTextFilterChange=function(){n.setDataTableTextFilters(this.tableKey,this.state.textFilter)},this.updateCategories=function(){for(var e=[],t=0;t<c.templates.length;t++){var n=c.templates[t];(1===n.Type&&c.state.showContainerTemplates||2===n.Type&&c.showSwarmStacks||3===n.Type&&!c.showSwarmStacks)&&(e=e.concat(n.Categories))}this.state.categories=Object(i.a)(Object(r.a)(e))},this.filterByCategory=function(e){return!c.state.selectedCategory||Object(a.a)(e.Categories,c.state.selectedCategory)},this.filterByType=function(e){return!!(1===e.Type&&c.state.showContainerTemplates||2===e.Type&&c.showSwarmStacks||3===e.Type&&!c.showSwarmStacks)},this.duplicateTemplate=function(t){return e(this.duplicateTemplateAsync,t)}.bind(this),this.duplicateTemplateAsync=function(e){return d.apply(this,arguments)}.bind(this),this.$onInit=function(){this.showSwarmStacks&&(this.state.showContainerTemplates=!1),this.updateCategories();var e=n.getDataTableTextFilters(this.tableKey);null!==e&&(this.state.textFilter=e)}}l.$inject=["$async","$state","DatatableService","Notifications","TemplateService"],angular.module("portainer.app").controller("TemplateListController",l)},function(e,t,n){var a=n(1583);angular.module("portainer.app").component("templateList",{templateUrl:a,controller:"TemplateListController",bindings:{titleText:"@",titleIcon:"@",templates:"<",tableKey:"@",selectAction:"<",showSwarmStacks:"<"}})},function(e,t){var n="app/portainer/components/template-list/templateList.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="datatable">\n  <rd-widget>\n    <rd-widget-body classes="no-padding">\n      <div class="toolBar">\n        <div class="toolBarTitle"> <i class="fa" ng-class="$ctrl.titleIcon" aria-hidden="true" style="margin-right: 2px;"></i> {{ $ctrl.titleText }} </div>\n      </div>\n\n      <div class="actionBar">\n        <div>\n          <button type="button" class="btn btn-sm btn-primary" ui-sref="docker.templates.new" ng-if="$ctrl.showAddAction">\n            <i class="fa fa-plus space-right" aria-hidden="true"></i>Add template\n          </button>\n          <span ng-class="{ \'pull-right\': $ctrl.showAddAction }" style="width: 25%;">\n            <ui-select ng-model="$ctrl.state.selectedCategory">\n              <ui-select-match placeholder="Select a category" allow-clear="true">\n                <span>{{ $select.selected }}</span>\n              </ui-select-match>\n              <ui-select-choices repeat="category in ($ctrl.state.categories | filter: $select.search)">\n                <span>{{ category }}</span>\n              </ui-select-choices>\n            </ui-select>\n          </span>\n        </div>\n\n        <div class="small text-muted" style="margin: 15px 0 0 5px;">\n          <label for="show_stacks" class="control-label text-left">\n            \n          </label>\n          <label class="switch" style="margin-left: 20px;">\n            <input type="checkbox" name="show_stacks" ng-model="$ctrl.state.showContainerTemplates" ng-change="$ctrl.updateCategories()" /><i></i>\n          </label>\n        </div>\n      </div>\n\n      <div class="searchBar" style="border-top: 2px solid #f6f6f6;">\n        <i class="fa fa-search searchIcon" aria-hidden="true"></i>\n        <input\n          type="text"\n          class="searchInput"\n          ng-model="$ctrl.state.textFilter"\n          ng-change="$ctrl.onTextFilterChange()"\n          placeholder="..."\n          auto-focus\n          ng-model-options="{ debounce: 300 }"\n        />\n      </div>\n\n      <div class="blocklist">\n        <template-item\n          ng-repeat="template in $ctrl.templates | filter: $ctrl.filterByType | filter:$ctrl.filterByCategory | filter:$ctrl.state.textFilter"\n          model="template"\n          type-label="{{ template.Type === 1 ? \'container\' : \'stack\' }}"\n          on-select="($ctrl.selectAction)"\n        >\n          <template-item-actions ng-if="template.Type === 2 || template.Type === 3">\n            <button ng-click="$event.stopPropagation(); $ctrl.duplicateTemplate(template)" class="btn btn-primary btn-xs">\n              Copy as Custom\n            </button>\n          </template-item-actions>\n        </template-item>\n        <div ng-if="!$ctrl.templates" class="text-center text-muted">\n          ...\n        </div>\n        <div ng-if="($ctrl.templates | filter: $ctrl.filterByType | filter: $ctrl.filterByCategory | filter: $ctrl.state.textFilter).length === 0" class="text-center text-muted">\n          \n        </div>\n      </div>\n    </rd-widget-body>\n  </rd-widget>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.app").directive("rdTemplateWidget",(function(){return{scope:{ngModel:"="},transclude:!0,template:'<div class="widget template-widget" id="template-widget" ng-transclude></div>',restrict:"EA"}}))},function(e,t){angular.module("portainer.app").directive("portainerTooltip",[function(){return{scope:{message:"@",position:"@",customStyle:"<?"},template:'\n    <span class="interactive" tooltip-append-to-body="true" tooltip-placement="{{position}}" tooltip-class="portainer-tooltip" uib-tooltip="{{message}}">\n      <i class="" ng-class="[\'fa fa-question-circle blue-icon\', {\'tooltip-icon\': !customStyle}]" ng-style="customStyle" aria-hidden="true"></i>\n    </span>',restrict:"E"}}])},function(e,t){angular.module("portainer.app").directive("rdWidgetBody",(function(){return{requires:"^rdWidget",scope:{loading:"@?",classes:"@?"},transclude:!0,template:'<div class="widget-body" ng-class="classes"><rd-loading ng-show="loading"></rd-loading><div ng-hide="loading" class="widget-content" ng-transclude></div></div>',restrict:"E"}}))},function(e,t){angular.module("portainer.app").directive("rdWidgetCustomHeader",(function(){return{requires:"^rdWidget",scope:{titleText:"=",icon:"="},transclude:!0,template:'<div class="widget-header"><div class="row"><span class="pull-left"><img class="custom-header-ico" ng-src="{{icon}}" ng-if="icon"></img><i class="fa fa-rocket" aria-hidden="true" ng-if="!icon"></i> <span class="text-muted"> {{titleText}} </span> </span><span class="pull-right col-xs-6 col-sm-4" ng-transclude></span></div></div>',restrict:"E"}}))},function(e,t){angular.module("portainer.app").directive("rdWidgetFooter",(function(){return{requires:"^rdWidget",transclude:!0,template:'<div class="widget-footer" ng-transclude></div>',restrict:"E"}}))},function(e,t){angular.module("portainer.app").directive("rdWidgetHeader",(function(){return{requires:"^rdWidget",scope:{titleText:"@",icon:"@",classes:"@?"},transclude:!0,template:'<div class="widget-header"><div class="row"><span ng-class="classes" class="pull-left"><i class="fa" ng-class="icon"></i> {{titleText}} </span><span ng-class="classes" class="pull-right" ng-transclude></span></div></div>',restrict:"E"}}))},function(e,t){angular.module("portainer.app").directive("rdWidgetTaskbar",(function(){return{requires:"^rdWidget",scope:{classes:"@?"},transclude:!0,template:'<div class="widget-header"><div class="row"><div ng-class="classes" ng-transclude></div></div></div>',restrict:"E"}}))},function(e,t){angular.module("portainer.app").directive("rdWidget",(function(){return{scope:{ngModel:"="},transclude:!0,template:'<div class="widget" ng-transclude></div>',restrict:"EA"}}))},function(e,t,n){"use strict";n.r(t);var a=n(95),r=n(53),i=n(565),s=n(12),o=n.n(s),l=n(129),c=n.n(l),d=n(16);angular.module("portainer.app").filter("truncate",(function(){return function(e,t,n){return isNaN(t)&&(t=10),void 0===n&&(n="..."),e.length<=t||e.length-n.length<=t?e:String(e).substring(0,t-n.length)+n}})).filter("truncatelr",(function(){return function(e,t,n,a){return t=isNaN(t)?50:t,n=isNaN(n)?25:n,a=isNaN(a)?25:a,e.length<=t?e:e.substring(0,n)+"[...]"+e.substring(e.length-a,e.length)}})).filter("capitalize",(function(){return function(e){return e?Object(i.a)(e):""}})).filter("stripprotocol",(function(){return function(e){return e.replace(/.*?:\/\//g,"")}})).filter("humansize",(function(){return function(e,t,n){if(t||(t=1),n||(n=10),e||0===e)return c()(e,{base:n,round:t})}})).filter("getisodatefromtimestamp",(function(){return function(e){return o.a.unix(e).format("YYYY-MM-DD HH:mm:ss")}})).filter("getisodate",(function(){return function(e){return o()(e).format("YYYY-MM-DD HH:mm:ss")}})).filter("key",(function(){return function(e,t){return e.slice(0,e.indexOf(t))}})).filter("value",(function(){return function(e,t){return e.slice(e.indexOf(t)+1)}})).filter("emptyobject",(function(){return function(e){return Object(r.a)(e)}})).filter("ipaddress",(function(){return function(e){return e.slice(0,e.indexOf("/"))}})).filter("arraytostr",(function(){return function(e,t){return e?Object(a.a)(e,t):""}})).filter("labelsToStr",(function(){return function(e,t){return e?Object(a.a)(e.map((function(e){return e.key+":"+e.value})),t):""}})).filter("endpointtypename",(function(){return function(e){return 1===e?"Docker":2===e||6===e?"Agent":3===e?"Azure ACI":5===e?"Kubernetes":4===e||7===e?"Edge Agent":""}})).filter("endpointtypeicon",(function(){return function(e){return 3===e?"fab fa-microsoft":4===e?"fa fa-cloud":5===e||6===e||7===e?"fas fa-dharmachakra":"fab fa-docker"}})).filter("ownershipicon",(function(){return function(e){switch(e){case d.ResourceControlOwnership.PRIVATE:case d.ResourceControlOwnership.ADMINISTRATORS:return"fa fa-eye-slash";case d.ResourceControlOwnership.RESTRICTED:return"fa fa-users";default:return"fa fa-eye"}}})).filter("endpointstatusbadge",(function(){return function(e){return 2===e?"danger":"success"}}))},function(e,t,n){"use strict";n.r(t);var a=n(4);angular.module("portainer.app").factory("EndpointHelper",[function(){var e={};function t(e,t){return Object(a.a)(t,(function(t){return t.Id===e.GroupId}))}return e.mapGroupNameToEndpoint=function(e,n){for(var a=0;a<e.length;a++){var r=e[a],i=t(r,n);i&&(r.GroupName=i.Name)}},e}])},function(e,t){angular.module("portainer.app").factory("FormHelper",[function(){"use strict";var e={removeInvalidEnvVars:function(e){for(var t=e.length-1;t>=0;t--){var n=e[t];n.value&&n.name||e.splice(t,1)}return e}};return e}])},function(e,t,n){"use strict";n.r(t);var a=n(10),r=n(1),i=n.n(r);function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.PREDEFINED_NETWORKS=t}var t,n,r;return e.$inject=["PREDEFINED_NETWORKS"],t=e,(n=[{key:"isSystemNetwork",value:function(e){return Object(a.a)(this.PREDEFINED_NETWORKS,e.Name)}}])&&s(t.prototype,n),r&&s(t,r),e}();t.default=o,i.a.module("portainer.app").service("NetworkHelper",o)},function(e,t,n){"use strict";n.r(t);var a=n(4),r=n(7),i=n(2),s=n(1),o=n.n(s),l=n(16),c=n(221);function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,(n=[{key:"RCViewModelToOwnershipParameters",value:function(e,t){if(!t)return new c.ResourceControlOwnershipParameters(!0);var n=!1,a=!1,r=[],s=[];switch(t.Ownership){case l.ResourceControlOwnership.PUBLIC:a=!0;break;case l.ResourceControlOwnership.PRIVATE:r=[e];break;case l.ResourceControlOwnership.RESTRICTED:r=Object(i.a)(t.UserAccesses,(function(e){return e.UserId})),s=Object(i.a)(t.TeamAccesses,(function(e){return e.TeamId}));break;default:n=!0}return new c.ResourceControlOwnershipParameters(n,a,r,s)}},{key:"RCFormDataToOwnershipParameters",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];t.AccessControlEnabled||(t.Ownership=l.ResourceControlOwnership.PUBLIC);var a=!1,r=!1,s=[],o=[];switch(t.Ownership){case l.ResourceControlOwnership.PUBLIC:r=!0;break;case l.ResourceControlOwnership.PRIVATE:s.push(e);break;case l.ResourceControlOwnership.RESTRICTED:s=Object(i.a)(t.AuthorizedUsers,(function(e){return e.Id})),o=Object(i.a)(t.AuthorizedTeams,(function(e){return e.Id}));break;default:a=!0}return new c.ResourceControlOwnershipParameters(a,r,s,o,n)}},{key:"RCPanelDataToOwnershipParameters",value:function(e){var t=e.Ownership===l.ResourceControlOwnership.ADMINISTRATORS,n=e.Ownership===l.ResourceControlOwnership.PUBLIC,a=n||t?[]:Object(i.a)(e.Ownership_Users,(function(e){return e.Id})),r=n||t?[]:Object(i.a)(e.Ownership_Teams,(function(e){return e.Id}));return new c.ResourceControlOwnershipParameters(t,n,a,r)}},{key:"retrieveAuthorizedUsers",value:function(e,t){var n=[];return Object(r.a)(e.UserAccesses,(function(e){var r=Object(a.a)(t,{Id:e.UserId});r&&n.push(r)})),n}},{key:"retrieveAuthorizedTeams",value:function(e,t){var n=[];return Object(r.a)(e.TeamAccesses,(function(e){var r=Object(a.a)(t,{Id:e.TeamId});r&&n.push(r)})),n}},{key:"isLeaderOfAnyRestrictedTeams",value:function(e,t){var n=!1;return Object(r.a)(e,(function(e){if(Object(a.a)(t.TeamAccesses,{TeamId:e.TeamId})&&1===e.Role)return n=!0,!1})),n}}])&&d(t.prototype,n),s&&d(t,s),e}();t.default=u,o.a.module("portainer.app").service("ResourceControlHelper",u)},function(e,t,n){"use strict";n.r(t);var a=n(52);angular.module("portainer.app").factory("StackHelper",[function(){var e={getExternalStackNamesFromContainers:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(r.Labels&&r.Labels["com.docker.compose.project"]){var i=r.Labels["com.docker.compose.project"];t.push(i)}}return Object(a.a)(t)},getExternalStackNamesFromServices:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(r.Labels&&r.Labels["com.docker.stack.namespace"]){var i=r.Labels["com.docker.stack.namespace"];t.push(i)}}return Object(a.a)(t)}};return e}])},function(e,t,n){"use strict";n.r(t);var a=n(52);angular.module("portainer.app").factory("TemplateHelper",[function(){var e={getDefaultContainerConfiguration:function(){return{Env:[],OpenStdin:!1,Tty:!1,ExposedPorts:{},HostConfig:{RestartPolicy:{Name:"no"},PortBindings:{},Binds:[],Privileged:!1,ExtraHosts:[]},Volumes:{},Labels:{}}},portArrayToPortConfiguration:function(e){var t={bindings:{},exposedPorts:{}};return e.forEach((function(e){if(e.containerPort){var n=e.containerPort+"/"+e.protocol,a={};if(e.hostPort&&(a.HostPort=e.hostPort,e.hostPort.indexOf(":")>-1)){var r=e.hostPort.split(":");a.HostIp=r[0],a.HostPort=r[1]}t.bindings[n]=[a],t.exposedPorts[n]={}}})),t},updateContainerConfigurationWithLabels:function(e){var t={};return e.forEach((function(e){e.name&&(e.value?t[e.name]=e.value:t[e.name]="")})),t},EnvToStringArray:function(e){var t=[];return e.forEach((function(e){if(e.value||e.set){var n=e.set?e.set:e.value;t.push(e.name+"="+n)}})),t},getConsoleConfiguration:function(e){var t={openStdin:!1,tty:!1};return!0===e&&(t.openStdin=!0,t.tty=!0),t},createVolumeBindings:function(e,t){e.forEach((function(e){var n;e.container&&("auto"===e.type?n=t.pop().Id+":"+e.container:"auto"!==e.type&&e.bind&&(n=e.bind+":"+e.container),e.readonly&&(n+=":ro"),e.binding=n)}))},determineRequiredGeneratedVolumeCount:function(e){var t=0;return e.forEach((function(e){"auto"===e.type&&++t})),t},getUniqueCategories:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t=t.concat(r.Categories)}return Object(a.a)(t)}};return e}])},function(e,t){angular.module("portainer.app").factory("URLHelper",["$window",function(e){"use strict";var t={};return t.getParameter=function(t){return e.location.search.replace(/.*?\?/,"").split("&").reduce((function(e,t){var n=t.split("="),a=n[0],r=n[1];return e[a]=r,e}),{})[t]},t.cleanParameters=function(){e.location.replace(e.location.origin+e.location.pathname+e.location.hash)},t}])},function(e,t){angular.module("portainer.app").factory("UserHelper",[function(){"use strict";var e={filterNonAdministratorUsers:function(e){return e.filter((function(e){if(1!==e.Role)return e}))}};return e}])},function(e,t){angular.module("portainer.app").factory("WebhookHelper",["$location","API_ENDPOINT_WEBHOOKS",function(e,t){"use strict";var n={returnWebhookUrl:function(n){var a="http"===e.protocol().toLowerCase()&&80===e.port()||"https"===e.protocol().toLowerCase()&&443===e.port()?"":":"+e.port();return e.protocol()+"://"+e.host()+a+"/"+t+"/"+n}};return n}])},function(e,t,n){"use strict";n.r(t);var a=n(10),r=n(55);angular.module("portainer.app").factory("EndpointStatusInterceptor",["$q","EndpointProvider",function(e,t){var n={};function i(e){return Object(r.a)(e,"api/")&&(Object(a.a)(e,"/containers")||Object(a.a)(e,"/images")||Object(a.a)(e,"/volumes")||Object(a.a)(e,"/networks")||Object(a.a)(e,"/info")||Object(a.a)(e,"/version"))}return n.response=function(n){var a=n.config.url;200===n.status&&i(a)&&t.offlineMode()&&t.setOfflineMode(!1);return n||e.when(n)},n.responseError=function(n){var a=n.config.url;502!==n.status&&503!==n.status&&-1!==n.status||!i(a)||t.offlineMode()||t.setOfflineMode(!0);return e.reject(n)},n}])},function(e,t,n){"use strict";function a(e,t,n){this.ResourceID=e,this.Type=t,this.Public=n.Public,this.AdministratorsOnly=n.AdministratorsOnly,this.Users=n.Users,this.Teams=n.Teams,this.SubResourceIDs=n.SubResourceIDs}n.r(t),n.d(t,"ResourceControlCreatePayload",(function(){return a}))},function(e,t,n){"use strict";function a(e){this.Public=e.Public,this.AdministratorsOnly=e.AdministratorsOnly,this.Users=e.Users,this.Teams=e.Teams}n.r(t),n.d(t,"ResourceControlUpdatePayload",(function(){return a}))},function(e,t){angular.module("portainer.oauth",["ngResource"]).constant("API_ENDPOINT_OAUTH","api/auth/oauth")},function(e,t){angular.module("portainer.oauth").controller("OAuthProviderSelectorController",(function(){var e=this;this.providers=[{authUrl:"",accessTokenUrl:"",resourceUrl:"",userIdentifier:"",scopes:"",name:"custom",label:"Custom",description:"Custom OAuth provider",icon:"fa fa-user-check"}],this.$onInit=function(){e.provider.authUrl?e.provider=function(t){if(-1!==t.indexOf("login.microsoftonline.com"))return e.providers[0];if(-1!==t.indexOf("accounts.google.com"))return e.providers[1];if(-1!==t.indexOf("github.com"))return e.providers[2];return e.providers[3]}(e.provider.authUrl):e.provider=e.providers[0];e.onSelect(e.provider,!1)}}))},function(e,t,n){var a=n(1608);angular.module("portainer.oauth").component("oauthProvidersSelector",{templateUrl:a,bindings:{onSelect:"<",provider:"="},controller:"OAuthProviderSelectorController"})},function(e,t){var n="app/portainer/oauth/components/oauth-providers-selector/oauth-providers-selector.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="col-sm-12 form-section-title">\n  Provider\n</div>\n\n<div class="form-group"></div>\n<div class="form-group" style="margin-bottom: 0;">\n  <div class="boxselector_wrapper">\n    <div ng-repeat="provider in $ctrl.providers" ng-click="$ctrl.onSelect(provider, true)">\n      <input type="radio" id="{{ \'oauth_provider_\' + provider.name }}" ng-model="$ctrl.provider" ng-value="provider" />\n      <label for="{{ \'oauth_provider_\' + provider.name }}">\n        <div class="boxselector_header">\n          <i ng-class="provider.icon" aria-hidden="true" style="margin-right: 2px;"></i>\n          {{ provider.label }}\n        </div>\n        <p>{{ provider.description }}</p>\n      </label>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.oauth").controller("OAuthSettingsController",(function(){var e=this;this.state={provider:{}},this.$onInit=function(){""===e.settings.RedirectURI&&(e.settings.RedirectURI=window.location.origin);""!==e.settings.AuthorizationURI&&(e.state.provider.authUrl=e.settings.AuthorizationURI);0===e.settings.DefaultTeamID&&(e.settings.DefaultTeamID=null)}}))},function(e,t,n){var a=n(1611);angular.module("portainer.oauth").component("oauthSettings",{templateUrl:a,bindings:{settings:"=",teams:"<"},controller:"OAuthSettingsController"})},function(e,t){var n="app/portainer/oauth/components/oauth-settings/oauth-settings.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div>\n  <div class="col-sm-12 form-section-title">\n    \n  </div>\n  <div class="form-group">\n    <span class="col-sm-12 text-muted small">\n      Portainer Portainer\n      \n    </span>\n  </div>\n  <div class="form-group">\n    <label class="col-sm-3 col-lg-2 control-label text-left"></label>\n    <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="$ctrl.settings.OAuthAutoCreateUsers" /><i></i> </label>\n  </div>\n\n  <div ng-if="$ctrl.settings.OAuthAutoCreateUsers">\n    <div class="form-group">\n      <span class="col-sm-12 text-muted small">\n        <p></p>\n        <p\n          > \n          </p\n        >\n      </span>\n    </div>\n    <div class="form-group">\n      <label class="col-sm-3 col-lg-2 control-label text-left">Default team</label>\n      <span class="small text-muted" style="margin-left: 20px;" ng-if="$ctrl.teams.length === 0">\n        <a ui-sref="portainer.teams"/a> \n      </span>\n      <button type="button" class="btn btn-sm btn-danger" ng-click="$ctrl.settings.DefaultTeamID = null" ng-disabled="!$ctrl.settings.DefaultTeamID" ng-if="$ctrl.teams.length > 0"\n        ><i class="fa fa-times" aria-hidden="true"></i\n      ></button>\n      <div class="col-sm-9 col-lg-9" ng-if="$ctrl.teams.length > 0">\n        <select class="form-control" ng-model="$ctrl.settings.DefaultTeamID" ng-options="team.Id as team.Name for team in $ctrl.teams">\n          <option value="">No team</option>\n        </select>\n      </div>\n    </div>\n  </div>\n\n  <div class="col-sm-12 form-section-title">OAuth Configuration</div>\n\n  <div class="form-group">\n    <label for="oauth_client_id" class="col-sm-3 col-lg-2 control-label text-left">\n      Client ID\n      <portainer-tooltip position="bottom" message="Public identifier of the OAuth application"></portainer-tooltip>\n    </label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="text" class="form-control" id="oauth_client_id" ng-model="$ctrl.settings.ClientID" placeholder="xxxxxxxxxxxxxxxxxxxx" />\n    </div>\n  </div>\n\n  <div class="form-group">\n    <label for="oauth_client_secret" class="col-sm-3 col-lg-2 control-label text-left">\n      Client secret\n    </label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="password" class="form-control" id="oauth_client_secret" ng-model="$ctrl.settings.ClientSecret" placeholder="xxxxxxxxxxxxxxxxxxxx" autocomplete="new-password" />\n    </div>\n  </div>\n\n  <div class="form-group">\n    <label for="oauth_authorization_uri" class="col-sm-3 col-lg-2 control-label text-left">\n      Authorization URL\n      <portainer-tooltip\n        position="bottom"\n        message="URL used to authenticate against the OAuth provider. Will redirect the user to the OAuth provider login view"\n      ></portainer-tooltip>\n    </label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="text" class="form-control" id="oauth_authorization_uri" ng-model="$ctrl.settings.AuthorizationURI" placeholder="https://example.com/oauth/authorize" />\n    </div>\n  </div>\n\n  <div class="form-group">\n    <label for="oauth_access_token_uri" class="col-sm-3 col-lg-2 control-label text-left">\n      Access token URL\n      <portainer-tooltip position="bottom" message="URL used by Portainer to exchange a valid OAuth authentication code for an access token"></portainer-tooltip>\n    </label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="text" class="form-control" id="oauth_access_token_uri" ng-model="$ctrl.settings.AccessTokenURI" placeholder="https://example.com/oauth/token" />\n    </div>\n  </div>\n\n  <div class="form-group">\n    <label for="oauth_resource_uri" class="col-sm-3 col-lg-2 control-label text-left">\n      Resource URL\n      <portainer-tooltip position="bottom" message="URL used by Portainer to retrieve information about the authenticated user"></portainer-tooltip>\n    </label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="text" class="form-control" id="oauth_resource_uri" ng-model="$ctrl.settings.ResourceURI" placeholder="https://example.com/user" />\n    </div>\n  </div>\n\n  <div class="form-group">\n    <label for="oauth_redirect_uri" class="col-sm-3 col-lg-2 control-label text-left">\n      Redirect URL\n      <portainer-tooltip\n        position="bottom"\n        message="URL used by the OAuth provider to redirect the user after successful authentication. Should be set to your Portainer instance URL"\n      ></portainer-tooltip>\n    </label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="text" class="form-control" id="oauth_redirect_uri" ng-model="$ctrl.settings.RedirectURI" placeholder="http://yourportainer.com/" />\n    </div>\n  </div>\n\n  <div class="form-group">\n    <label for="oauth_user_identifier" class="col-sm-3 col-lg-2 control-label text-left">\n      User identifier\n      <portainer-tooltip\n        position="bottom"\n        message="Identifier that will be used by Portainer to create an account for the authenticated user. Retrieved from the resource server specified via the Resource URL field"\n      ></portainer-tooltip>\n    </label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="text" class="form-control" id="oauth_user_identifier" ng-model="$ctrl.settings.UserIdentifier" placeholder="id" />\n    </div>\n  </div>\n\n  <div class="form-group">\n    <label for="oauth_scopes" class="col-sm-3 col-lg-2 control-label text-left">\n      Scopes\n      <portainer-tooltip\n        position="bottom"\n        message="Scopes required by the OAuth provider to retrieve information about the authenticated user. Refer to your OAuth provider documentation for more information about this"\n      ></portainer-tooltip>\n    </label>\n    <div class="col-sm-9 col-lg-10">\n      <input type="text" class="form-control" id="oauth_scopes" ng-model="$ctrl.settings.Scopes" placeholder="id,email,name" />\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){angular.module("portainer.oauth").factory("OAuth",["$resource","API_ENDPOINT_OAUTH",function(e,t){"use strict";return e(t+"/:action",{},{validate:{method:"POST",ignoreLoadingBar:!0,params:{action:"validate"}}})}])},function(e,t){angular.module("portainer.app").factory("Auth",["$resource","API_ENDPOINT_AUTH",function(e,t){"use strict";return e(t+"/:action",{},{login:{method:"POST",ignoreLoadingBar:!0},logout:{method:"POST",params:{action:"logout"},ignoreLoadingBar:!0}})}])},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a);function i(e,t){return e(t+"/:id/:action",{},{create:{method:"POST",ignoreLoadingBar:!0},query:{method:"GET",isArray:!0},get:{method:"GET",params:{id:"@id"}},update:{method:"PUT",params:{id:"@id"}},remove:{method:"DELETE",params:{id:"@id"}},file:{method:"GET",params:{id:"@id",action:"file"}}})}i.$inject=["$resource","API_ENDPOINT_CUSTOM_TEMPLATES"],r.a.module("portainer.app").factory("CustomTemplates",i)},function(e,t){angular.module("portainer.app").factory("DockerHub",["$resource","API_ENDPOINT_DOCKERHUB",function(e,t){"use strict";return e(t,{},{get:{method:"GET"},update:{method:"PUT"}})}])},function(e,t,n){"use strict";n.r(t);var a=n(448);angular.module("portainer.app").factory("Endpoints",["$resource","API_ENDPOINT_ENDPOINTS",function(e,t){return e(t+"/:id/:action",{},{query:{method:"GET",params:{start:"@start",limit:"@limit",search:"@search",groupId:"@groupId"},transformResponse:a.default},get:{method:"GET",params:{id:"@id"}},update:{method:"PUT",params:{id:"@id"}},updateAccess:{method:"PUT",params:{id:"@id",action:"access"}},remove:{method:"DELETE",params:{id:"@id"}},snapshots:{method:"POST",params:{action:"snapshot"}},snapshot:{method:"POST",params:{id:"@id",action:"snapshot"}},status:{method:"GET",params:{id:"@id",action:"status"}}})}])},function(e,t,n){"use strict";n.r(t);var a=n(335);angular.module("portainer.app").factory("Gitlab",["$resource","API_ENDPOINT_REGISTRIES",function(e,t){return function(n){var r={};n&&(r["Private-Token"]=n.token,r["X-Gitlab-Domain"]=n.url);var i=t+"/:id/proxies/gitlab/api/v4/projects";return e(i,{id:"@id"},{projects:{method:"GET",params:{membership:"true"},transformResponse:a.default,headers:r},repositories:{method:"GET",url:i+"/:projectId/registry/repositories",params:{tags:!0},headers:r,transformResponse:a.default}})}}])},function(e,t){angular.module("portainer.app").factory("EndpointGroups",["$resource","API_ENDPOINT_ENDPOINT_GROUPS",function(e,t){"use strict";return e(t+"/:id/:action",{},{create:{method:"POST",ignoreLoadingBar:!0},query:{method:"GET",isArray:!0},get:{method:"GET",params:{id:"@id"}},update:{method:"PUT",params:{id:"@id"}},updateAccess:{method:"PUT",params:{id:"@id",action:"access"}},addEndpoint:{method:"PUT",params:{id:"@id",action:"@action"}},removeEndpoint:{method:"DELETE",params:{id:"@id",action:"@action"}},remove:{method:"DELETE",params:{id:"@id"}}})}])},function(e,t){angular.module("portainer.app").factory("LegacyExtensions",["$resource","EndpointProvider","API_ENDPOINT_ENDPOINTS",function(e,t,n){"use strict";return e(n+"/:endpointId/extensions/:type",{endpointId:t.endpointID},{register:{method:"POST"},deregister:{method:"DELETE",params:{type:"@type"}}})}])},function(e,t){angular.module("portainer.app").factory("Motd",["$resource","API_ENDPOINT_MOTD",function(e,t){"use strict";return e(t,{},{get:{method:"GET",ignoreLoadingBar:!0}})}])},function(e,t){angular.module("portainer.app").factory("Registries",["$resource","API_ENDPOINT_REGISTRIES",function(e,t){"use strict";return e(t+"/:id/:action",{},{create:{method:"POST",ignoreLoadingBar:!0},query:{method:"GET",isArray:!0},get:{method:"GET",params:{id:"@id"}},update:{method:"PUT",params:{id:"@id"}},updateAccess:{method:"PUT",params:{id:"@id",action:"access"}},remove:{method:"DELETE",params:{id:"@id"}},configure:{method:"POST",params:{id:"@id",action:"configure"}}})}])},function(e,t){angular.module("portainer.app").factory("ResourceControl",["$resource","API_ENDPOINT_RESOURCE_CONTROLS",function(e,t){"use strict";return e(t+"/:id",{},{create:{method:"POST",ignoreLoadingBar:!0},get:{method:"GET",params:{id:"@id"}},update:{method:"PUT",params:{id:"@id"}},remove:{method:"DELETE",params:{id:"@id"}}})}])},function(e,t){angular.module("portainer.app").factory("Settings",["$resource","API_ENDPOINT_SETTINGS",function(e,t){"use strict";return e(t+"/:subResource/:action",{},{get:{method:"GET"},update:{method:"PUT",ignoreLoadingBar:!0},publicSettings:{method:"GET",params:{subResource:"public"},ignoreLoadingBar:!0},checkLDAPConnectivity:{method:"PUT",params:{subResource:"authentication",action:"checkLDAP"}}})}])},function(e,t){angular.module("portainer.app").factory("Stack",["$resource","EndpointProvider","API_ENDPOINT_STACKS",function(e,t,n){"use strict";return e(n+"/:id/:action",{},{get:{method:"GET",params:{id:"@id"}},query:{method:"GET",isArray:!0},create:{method:"POST",ignoreLoadingBar:!0},update:{method:"PUT",params:{id:"@id"},ignoreLoadingBar:!0},remove:{method:"DELETE",params:{id:"@id",external:"@external",endpointId:"@endpointId"}},getStackFile:{method:"GET",params:{id:"@id",action:"file"}},migrate:{method:"POST",params:{id:"@id",action:"migrate",endpointId:"@endpointId"},ignoreLoadingBar:!0},start:{method:"POST",params:{id:"@id",action:"start"}},stop:{method:"POST",params:{id:"@id",action:"stop"}}})}])},function(e,t){angular.module("portainer.app").factory("Status",["$resource","API_ENDPOINT_STATUS",function(e,t){"use strict";return e(t+"/:action",{},{get:{method:"GET"},version:{method:"GET",params:{action:"version"}}})}])},function(e,t){angular.module("portainer.app").factory("Support",["$resource","API_ENDPOINT_SUPPORT",function(e,t){"use strict";return e(t,{},{get:{method:"GET",isArray:!0}})}])},function(e,t){angular.module("portainer.app").factory("Tags",["$resource","API_ENDPOINT_TAGS",function(e,t){"use strict";return e(t+"/:id",{},{create:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE",params:{id:"@id"}}})}])},function(e,t){angular.module("portainer.app").factory("Teams",["$resource","API_ENDPOINT_TEAMS",function(e,t){"use strict";return e(t+"/:id/:entity/:entityId",{},{create:{method:"POST",ignoreLoadingBar:!0},query:{method:"GET",isArray:!0},get:{method:"GET",params:{id:"@id"}},remove:{method:"DELETE",params:{id:"@id"}},queryMemberships:{method:"GET",isArray:!0,params:{id:"@id",entity:"memberships"}}})}])},function(e,t){angular.module("portainer.app").factory("TeamMemberships",["$resource","API_ENDPOINT_TEAM_MEMBERSHIPS",function(e,t){"use strict";return e(t+"/:id/:action",{},{create:{method:"POST",ignoreLoadingBar:!0},query:{method:"GET",isArray:!0},update:{method:"PUT",params:{id:"@id"}},remove:{method:"DELETE",params:{id:"@id"}}})}])},function(e,t){angular.module("portainer.app").factory("Templates",["$resource","API_ENDPOINT_TEMPLATES",function(e,t){return e(t+"/:action",{},{query:{method:"GET"},file:{method:"POST",params:{action:"file"}}})}])},function(e,t){angular.module("portainer.app").factory("Users",["$resource","API_ENDPOINT_USERS",function(e,t){"use strict";return e(t+"/:id/:entity/:entityId",{},{create:{method:"POST",ignoreLoadingBar:!0},query:{method:"GET",isArray:!0},get:{method:"GET",params:{id:"@id"}},update:{method:"PUT",params:{id:"@id"},ignoreLoadingBar:!0},updatePassword:{method:"PUT",params:{id:"@id",entity:"passwd"}},remove:{method:"DELETE",params:{id:"@id"}},queryMemberships:{method:"GET",isArray:!0,params:{id:"@id",entity:"memberships"}},checkAdminUser:{method:"GET",params:{id:"admin",entity:"check"},isArray:!0,ignoreLoadingBar:!0},initAdminUser:{method:"POST",params:{id:"admin",entity:"init"},ignoreLoadingBar:!0}})}])},function(e,t){angular.module("portainer.app").factory("Webhooks",["$resource","API_ENDPOINT_WEBHOOKS",function(e,t){"use strict";return e(t+"/:id",{},{query:{method:"GET",isArray:!0},create:{method:"POST"},remove:{method:"DELETE",params:{id:"@id"}}})}])},function(e,t,n){"use strict";n.r(t);var a=n(7),r=n(455),i=n(98);function s(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){s(i,a,r,o,l,"next",e)}function l(e){s(i,a,r,o,l,"throw",e)}o(void 0)}))}}angular.module("portainer.app").factory("AccessService",["$q","$async","UserService","TeamService",function(e,t,n,s){var l={};function c(e,t,n){for(var a=[],r=[],i=0;i<e.length;i++){var s=e[i],o=t&&t[s.Id],l=n&&n[s.Id];o&&l?(s.Override=!0,r.push(s)):o&&!l?r.push(s):!o&&l?(s.Inherited=!0,r.push(s),a.push(s)):a.push(s)}return{available:a,authorized:r}}function d(t,a,r,o){var l=e.defer();return e.all({users:n.users(!1),teams:s.teams()}).then((function(e){var n=e.users.map((function(e){return new i.UserAccessViewModel(e)})),s=e.teams.map((function(e){return new i.TeamAccessViewModel(e)})),d=c(n,t,r),u=c(s,a,o),p={availableUsersAndTeams:d.available.concat(u.available),authorizedUsersAndTeams:d.authorized.concat(u.authorized)};l.resolve(p)})).catch((function(e){l.reject({msg:"Unable to retrieve users and teams",err:e})})),l.promise}function u(e,t){return p.apply(this,arguments)}function p(){return(p=o(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}throw{msg:"Unable to retrieve accesses"};case 3:return t.UserAccessPolicies||(t.UserAccessPolicies={}),t.TeamAccessPolicies||(t.TeamAccessPolicies={}),n&&!n.UserAccessPolicies&&(n.UserAccessPolicies={}),n&&!n.TeamAccessPolicies&&(n.TeamAccessPolicies={}),e.next=9,d(t.UserAccessPolicies,t.TeamAccessPolicies,n?n.UserAccessPolicies:{},n?n.TeamAccessPolicies:{});case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}return l.accesses=function(e,n){return t(u,e,n)},l.generateAccessPolicies=function(e,t,n,i,s){var o=Object(r.a)(e),l=Object(r.a)(t);return Object(a.a)(n,(function(e){return o[e.Id]={RoleId:s||e.Role.Id}})),Object(a.a)(i,(function(e){return l[e.Id]={RoleId:s||e.Role.Id}})),{userAccessPolicies:o,teamAccessPolicies:l}},l}])},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a);function i(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){i(s,a,r,o,l,"next",e)}function l(e){i(s,a,r,o,l,"throw",e)}o(void 0)}))}}function o(e,t){var n={customTemplate:function(t){return e.get({id:t}).$promise},customTemplates:function(t){return e.query({type:t}).$promise},remove:function(t){return e.remove({id:t}).$promise}};return n.customTemplateFile=function(){var t=s(regeneratorRuntime.mark((function t(n){var a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.file({id:n}).$promise;case 3:return a=t.sent,r=a.FileContent,t.abrupt("return",r);case 8:throw t.prev=8,t.t0=t.catch(0),{msg:"Unable to retrieve customTemplate content",err:t.t0};case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),n.updateCustomTemplate=function(){var t=s(regeneratorRuntime.mark((function t(n,a){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.update({id:n},a).$promise);case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),n.createCustomTemplateFromFileContent=function(){var t=s(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.create({method:"string"},n).$promise;case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),{msg:"Unable to create the customTemplate",err:t.t0};case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),n.createCustomTemplateFromFileUpload=function(){var e=s(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.createCustomTemplate(n);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),{msg:"Unable to create the customTemplate",err:e.t0};case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),n.createCustomTemplateFromGitRepository=function(){var t=s(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.create({method:"repository"},n).$promise;case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),{msg:"Unable to create the customTemplate",err:t.t0};case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),n}o.$inject=["CustomTemplates","FileUploadService"],r.a.module("portainer.app").factory("CustomTemplateService",o)},function(e,t,n){"use strict";n.r(t);var a=n(234);angular.module("portainer.app").factory("DockerHubService",["$q","DockerHub",function(e,t){var n={dockerhub:function(){var n=e.defer();return t.get().$promise.then((function(e){var t=new a.DockerHubViewModel(e);n.resolve(t)})).catch((function(e){n.reject({msg:"Unable to retrieve DockerHub details",err:e})})),n.promise},update:function(e){return t.update({},e).$promise}};return n}])},function(e,t,n){"use strict";n.r(t);var a=n(14);angular.module("portainer.app").factory("EndpointService",["$q","Endpoints","FileUploadService",function(e,t,n){var r={endpoint:function(e){return t.get({id:e}).$promise},endpoints:function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.search,i=a.type,s=a.tagIds,o=a.endpointIds,l=a.tagsPartialMatch;return s&&!s.length?Promise.resolve({value:[],totalCount:0}):t.query({start:e,limit:n,search:r,type:i,tagIds:JSON.stringify(s),endpointIds:JSON.stringify(o),tagsPartialMatch:l}).$promise},snapshotEndpoints:function(){return t.snapshots({},{}).$promise},snapshotEndpoint:function(e){return t.snapshot({id:e},{}).$promise},endpointsByGroup:function(e,n,a,r){return t.query({start:e,limit:n,search:a,groupId:r}).$promise},updateAccess:function(e,n,a){return t.updateAccess({id:e},{UserAccessPolicies:n,TeamAccessPolicies:a}).$promise},updateEndpoint:function(a,r){var i=e.defer();return n.uploadTLSFilesForEndpoint(a,r.TLSCACert,r.TLSCert,r.TLSKey).then((function(){return i.notify({upload:!1}),t.update({id:a},r).$promise})).then((function(e){i.resolve(e)})).catch((function(e){i.notify({upload:!1}),i.reject({msg:"Unable to update endpoint",err:e})})),i.promise},deleteEndpoint:function(e){return t.remove({id:e}).$promise},createLocalEndpoint:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"local",r=e.defer();return n.createEndpoint(t,a.PortainerEndpointCreationTypes.LocalDockerEnvironment,"","",1,[],!1).then((function(e){r.resolve(e.data)})).catch((function(e){r.reject({msg:"Unable to create endpoint",err:e})})),r.promise},createRemoteEndpoint:function(t,r,i,s,o,l,c,d,u,p,m,g,f){var h=e.defer(),v=i;return r!==a.PortainerEndpointCreationTypes.EdgeAgentEnvironment&&(v="tcp://"+i),n.createEndpoint(t,r,v,s,o,l,c,d,u,p,m,g,f).then((function(e){h.resolve(e.data)})).catch((function(e){h.reject({msg:"Unable to create endpoint",err:e})})),h.promise},createLocalKubernetesEndpoint:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"local",r=e.defer();return n.createEndpoint(t,a.PortainerEndpointCreationTypes.LocalKubernetesEnvironment,"","",1,[],!0,!0,!0).then((function(e){r.resolve(e.data)})).catch((function(e){r.reject({msg:"Unable to create endpoint",err:e})})),r.promise},createAzureEndpoint:function(t,a,r,i,s,o){var l=e.defer();return n.createAzureEndpoint(t,a,r,i,s,o).then((function(e){l.resolve(e.data)})).catch((function(e){l.reject({msg:"Unable to connect to Azure",err:e})})),l.promise}};return r}])},function(e,t,n){"use strict";n.r(t);var a=n(175);angular.module("portainer.app").factory("GroupService",["$q","EndpointGroups",function(e,t){var n={group:function(n){var r=e.defer();return t.get({id:n}).$promise.then((function(e){var t=new a.EndpointGroupModel(e);r.resolve(t)})).catch((function(e){r.reject({msg:"Unable to retrieve group",err:e})})),r.promise},groups:function(){return t.query({}).$promise},createGroup:function(e,n){var r=new a.EndpointGroupCreateRequest(e,n);return t.create(r).$promise},updateGroup:function(e,n){var r=new a.EndpointGroupUpdateRequest(e,n);return t.update(r).$promise},updateAccess:function(e,n,a){return t.updateAccess({id:e},{UserAccessPolicies:n,TeamAccessPolicies:a}).$promise},addEndpoint:function(e,n){return t.addEndpoint({id:e,action:"endpoints/"+n.Id},n).$promise},removeEndpoint:function(e,n){return t.removeEndpoint({id:e,action:"endpoints/"+n}).$promise},deleteGroup:function(e){return t.remove({id:e}).$promise}};return n}])},function(e,t){angular.module("portainer.app").factory("LegacyExtensionService",["LegacyExtensions",function(e){"use strict";var t={registerStoridgeExtension:function(t){var n={Type:1,URL:t};return e.register(n).$promise},deregisterStoridgeExtension:function(){return e.deregister({type:1}).$promise}};return t}])},function(e,t,n){"use strict";n.r(t);var a=n(444);angular.module("portainer.app").factory("MotdService",["$q","Motd",function(e,t){var n={motd:function(){var n=e.defer();return t.get().$promise.then((function(e){var t=new a.MotdViewModel(e);n.resolve(t)})).catch((function(e){n.reject({msg:"Unable to retrieve information message",err:e})})),n.promise}};return n}])},function(e,t,n){"use strict";n.r(t);var a=n(55),r=n(10),i=n(4),s=n(34),o=n(7),l=n(99),c=n(61),d=n(65),u=n(149);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function g(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){g(i,a,r,s,o,"next",e)}function o(e){g(i,a,r,s,o,"throw",e)}s(void 0)}))}}angular.module("portainer.app").factory("RegistryService",["$q","$async","Registries","DockerHubService","ImageHelper","FileUploadService",function(e,t,n,m,g,h){var v={};function b(e){var t=e.URL;return e.Type===d.RegistryTypes.GITLAB&&(t=e.URL+"/"+e.Gitlab.ProjectPath),t}function y(e,t,n){var s=new c.PorImageRegistryModel,o=Object(i.a)(t,(function(t){return Object(r.a)(e,b(t))}));if(o){var l=b(o),d=e.lastIndexOf(l)+l.length,u=e.substring(d);Object(a.a)(u,":")||(u=u.substring(1)),s.Registry=o,s.Image=u}else g.imageContainsURL(e)&&(s.UseRegistry=!1),s.Registry=n,s.Image=e;return s}function x(e){return w.apply(this,arguments)}function w(){return(w=f(regeneratorRuntime.mark((function e(t){var n,a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([v.registries(),m.dockerhub()]);case 3:return n=e.sent,a=p(n,2),r=a[0],i=a[1],e.abrupt("return",y(t,r,i));case 10:throw e.prev=10,e.t0=e.catch(0),{msg:"Unable to retrieve the registry associated to the repository",err:e.t0};case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}return v.registries=function(){var t=e.defer();return n.query().$promise.then((function(e){var n=e.map((function(e){return new u.RegistryViewModel(e)}));t.resolve(n)})).catch((function(e){t.reject({msg:"Unable to retrieve registries",err:e})})),t.promise},v.registry=function(t){var a=e.defer();return n.get({id:t}).$promise.then((function(e){var t=new u.RegistryViewModel(e);a.resolve(t)})).catch((function(e){a.reject({msg:"Unable to retrieve registry details",err:e})})),a.promise},v.encodedCredentials=function(e){var t={serveraddress:e.URL};return btoa(JSON.stringify(t))},v.updateAccess=function(e,t,a){return n.updateAccess({id:e},{UserAccessPolicies:t,TeamAccessPolicies:a}).$promise},v.deleteRegistry=function(e){return n.remove({id:e}).$promise},v.updateRegistry=function(e){return e.URL=Object(l.a)(e.URL,/^https?\:\/\//i,""),e.URL=Object(l.a)(e.URL,/\/$/,""),n.update({id:e.Id},e).$promise},v.configureRegistry=function(e,t){return h.configureRegistry(e,t)},v.createRegistry=function(e){var t=new u.RegistryCreateRequest(e);return n.create(t).$promise},v.createGitlabRegistries=function(t,a){var r=[];return Object(o.a)(a,(function(e){var a=t;a.Name=e.PathWithNamespace,a.Gitlab.ProjectPath=Object(s.a)(e.PathWithNamespace),a.Gitlab.ProjectId=e.Id,a.Password=a.Token;var i=new u.RegistryCreateRequest(a);r.push(n.create(i).$promise)})),e.all(r)},v.retrievePorRegistryModelFromRepositoryWithRegistries=y,v.retrievePorRegistryModelFromRepository=function(e){return t(x,e)},v}])},function(e,t,n){"use strict";n.r(t);var a=n(4);angular.module("portainer.app").factory("ResourceControlService",["$q","ResourceControl","UserService","TeamService","ResourceControlHelper",function(e,t,n,r,i){var s={};function o(e,n){var a={AdministratorsOnly:n.AdministratorsOnly,Public:n.Public,Users:n.Users,Teams:n.Teams};return t.update({id:e},a).$promise}return s.duplicateResourceControl=function(e,t,n){var a=i.RCViewModelToOwnershipParameters(e,t);return o(n.Id,a)},s.applyResourceControlChange=function(e,n,a,r){var s=i.RCPanelDataToOwnershipParameters(r);return a?o(a.Id,s):function(e,n,a){var r={Type:e,Public:a.Public,AdministratorsOnly:a.AdministratorsOnly,ResourceID:n,Users:a.Users,Teams:a.Teams,SubResourceIds:a.SubResourceIDs};return t.create({},r).$promise}(e,n,s)},s.applyResourceControl=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=i.RCFormDataToOwnershipParameters(e,t,a);return o(n.Id,r)},s.retrieveOwnershipDetails=function(t){var a=e.defer();if(!t)return a.resolve({authorizedUsers:[],authorizedTeams:[]}),a.promise;return e.all({users:t.UserAccesses.length>0?n.users(!1):[],teams:t.TeamAccesses.length>0?r.teams():[]}).then((function(e){var n=i.retrieveAuthorizedUsers(t,e.users),r=i.retrieveAuthorizedTeams(t,e.teams);a.resolve({authorizedUsers:n,authorizedTeams:r})})).catch((function(e){a.reject({msg:"Unable to retrieve user and team information",err:e})})),a.promise},s.retrieveUserPermissionsOnResource=function(t,r,s){var o=e.defer();if(!s||r)return o.resolve({isPartOfRestrictedUsers:!1,isLeaderOfAnyRestrictedTeams:!1}),o.promise;if(Object(a.a)(s.UserAccesses,{UserId:t}))o.resolve({isPartOfRestrictedUsers:!0,isLeaderOfAnyRestrictedTeams:!1});else{var l=!1;n.userMemberships(t).then((function(e){var t=e;l=i.isLeaderOfAnyRestrictedTeams(t,s),o.resolve({isPartOfRestrictedUsers:!1,isLeaderOfAnyRestrictedTeams:l})})).catch((function(e){o.reject({msg:"Unable to retrieve user memberships",err:e})}))}return o.promise},s}])},function(e,t,n){"use strict";n.r(t);var a=n(330);angular.module("portainer.app").factory("SettingsService",["$q","Settings",function(e,t){var n={settings:function(){var n=e.defer();return t.get().$promise.then((function(e){var t=new a.SettingsViewModel(e);n.resolve(t)})).catch((function(e){n.reject({msg:"Unable to retrieve application settings",err:e})})),n.promise},update:function(e){return t.update({},e).$promise},publicSettings:function(){var n=e.defer();return t.publicSettings().$promise.then((function(e){var t=new a.PublicSettingsViewModel(e);n.resolve(t)})).catch((function(e){n.reject({msg:"Unable to retrieve application settings",err:e})})),n.promise},checkLDAPConnectivity:function(e){return t.checkLDAPConnectivity({},e).$promise}};return n}])},function(e,t,n){"use strict";n.r(t);var a=n(454),r=n(179);function i(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){i(s,a,r,o,l,"next",e)}function l(e){i(s,a,r,o,l,"throw",e)}o(void 0)}))}}angular.module("portainer.app").factory("StackService",["$q","$async","Stack","FileUploadService","StackHelper","ServiceService","ContainerService","SwarmService","EndpointProvider",function(e,t,n,i,o,l,c,d,u){var p={};function m(e,t,n,a){return g.apply(this,arguments)}function g(){return(g=s(regeneratorRuntime.mark((function e(t,a,r,i){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s={StackFileContent:r,ComposeFormat:i,Namespace:a},e.next=4,n.create({method:"undefined",type:3,endpointId:t},s).$promise;case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),{err:e.t0};case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return p.stack=function(t){var a=e.defer();return n.get({id:t}).$promise.then((function(e){var t=new r.StackViewModel(e);a.resolve(t)})).catch((function(e){a.reject({msg:"Unable to retrieve stack details",err:e})})),a.promise},p.getStackFile=function(t){var a=e.defer();return n.getStackFile({id:t}).$promise.then((function(e){a.resolve(e.StackFileContent)})).catch((function(e){a.reject({msg:"Unable to retrieve stack content",err:e})})),a.promise},p.migrateSwarmStack=function(t,a,r){var i=e.defer();return u.setEndpointID(a),d.swarm().then((function(e){var s=e;if(s.Id!==t.SwarmId)return n.migrate({id:t.Id,endpointId:t.EndpointId},{EndpointID:a,SwarmID:s.Id,Name:r}).$promise;i.reject({msg:"Target endpoint is located in the same Swarm cluster as the current endpoint",err:null})})).then((function(){i.resolve()})).catch((function(e){i.reject({msg:"Unable to migrate stack",err:e})})).finally((function(){u.setEndpointID(t.EndpointId)})),i.promise},p.migrateComposeStack=function(t,a,r){var i=e.defer();return u.setEndpointID(a),n.migrate({id:t.Id,endpointId:t.EndpointId},{EndpointID:a,Name:r}).$promise.then((function(){i.resolve()})).catch((function(e){u.setEndpointID(t.EndpointId),i.reject({msg:"Unable to migrate stack",err:e})})),i.promise},p.stacks=function(t,n,a){var r=e.defer(),i=[];return t&&i.push(p.composeStacks(!0,{EndpointID:a})),n&&i.push(p.swarmStacks(!0)),e.all(i).then((function(e){var t=[];e[0]&&(t=t.concat(e[0])),e[1]&&(t=t.concat(e[1])),r.resolve(t)})).catch((function(e){r.reject({msg:"Unable to retrieve stacks",err:e})})),r.promise},p.externalSwarmStacks=function(){var t=e.defer();return l.services().then((function(e){var n=e,a=o.getExternalStackNamesFromServices(n).map((function(e){return new r.ExternalStackViewModel(e,1)}));t.resolve(a)})).catch((function(e){t.reject({msg:"Unable to retrieve external stacks",err:e})})),t.promise},p.externalComposeStacks=function(){var t=e.defer();return c.containers(1).then((function(e){var n=e,a=o.getExternalStackNamesFromContainers(n).map((function(e){return new r.ExternalStackViewModel(e,2)}));t.resolve(a)})).catch((function(e){t.reject({msg:"Unable to retrieve external stacks",err:e})})),t.promise},p.composeStacks=function(t,i){var s=e.defer();return e.all({stacks:n.query({filters:i}).$promise,externalStacks:t?p.externalComposeStacks():[]}).then((function(e){var t=e.stacks.map((function(e){return e.External=!1,new r.StackViewModel(e)})),n=e.externalStacks,i=Object(a.a)(t,n,(function(e,t){return e.Name===t.Name}));s.resolve(i)})).catch((function(e){s.reject({msg:"Unable to retrieve stacks",err:e})})),s.promise},p.swarmStacks=function(t){var i=e.defer();return d.swarm().then((function(a){var r={SwarmID:a.Id};return e.all({stacks:n.query({filters:r}).$promise,externalStacks:t?p.externalSwarmStacks():[]})})).then((function(e){var t=e.stacks.map((function(e){return e.External=!1,new r.StackViewModel(e)})),n=e.externalStacks,s=Object(a.a)(t,n,(function(e,t){return e.Name===t.Name}));i.resolve(s)})).catch((function(e){i.reject({msg:"Unable to retrieve stacks",err:e})})),i.promise},p.remove=function(t,a,r){var i=e.defer();return n.remove({id:t.Id?t.Id:t.Name,external:a,endpointId:r}).$promise.then((function(){i.resolve()})).catch((function(e){i.reject({msg:" the stack",err:e})})),i.promise},p.updateStack=function(e,t,a,r){return n.update({endpointId:e.EndpointId},{id:e.Id,StackFileContent:t,Env:a,Prune:r}).$promise},p.createComposeStackFromFileUpload=function(e,t,n,a){return i.createComposeStack(e,t,n,a)},p.createSwarmStackFromFileUpload=function(t,n,a,r){var s=e.defer();return d.swarm().then((function(e){var s=e;return i.createSwarmStack(t,s.Id,n,a,r)})).then((function(e){s.resolve(e.data)})).catch((function(e){s.reject({msg:"Unable to create the stack",err:e})})),s.promise},p.createComposeStackFromFileContent=function(e,t,a,r){var i={Name:e,StackFileContent:t,Env:a};return n.create({method:"string",type:2,endpointId:r},i).$promise},p.createSwarmStackFromFileContent=function(t,a,r,i){var s=e.defer();return d.swarm().then((function(e){var s={Name:t,SwarmID:e.Id,StackFileContent:a,Env:r};return n.create({method:"string",type:1,endpointId:i},s).$promise})).then((function(e){s.resolve(e)})).catch((function(e){s.reject({msg:"Unable to create the stack",err:e})})),s.promise},p.createComposeStackFromGitRepository=function(e,t,a,r){var i={Name:e,RepositoryURL:t.RepositoryURL,RepositoryReferenceName:t.RepositoryReferenceName,ComposeFilePathInRepository:t.ComposeFilePathInRepository,RepositoryAuthentication:t.RepositoryAuthentication,RepositoryUsername:t.RepositoryUsername,RepositoryPassword:t.RepositoryPassword,Env:a};return n.create({method:"repository",type:2,endpointId:r},i).$promise},p.createSwarmStackFromGitRepository=function(t,a,r,i){var s=e.defer();return d.swarm().then((function(e){var s={Name:t,SwarmID:e.Id,RepositoryURL:a.RepositoryURL,RepositoryReferenceName:a.RepositoryReferenceName,ComposeFilePathInRepository:a.ComposeFilePathInRepository,RepositoryAuthentication:a.RepositoryAuthentication,RepositoryUsername:a.RepositoryUsername,RepositoryPassword:a.RepositoryPassword,Env:r};return n.create({method:"repository",type:1,endpointId:i},s).$promise})).then((function(e){s.resolve(e)})).catch((function(e){s.reject({msg:"Unable to create the stack",err:e})})),s.promise},p.duplicateStack=function(e,t,n,a,r){return(1===r?p.createSwarmStackFromFileContent:p.createComposeStackFromFileContent)(e,t,n,a)},p.kubernetesDeploy=function(e,n,a,r){return t(m,e,n,a,r)},p.start=function(e){return n.start({id:e}).$promise},p.stop=function(e){return n.stop({id:e}).$promise},p}])},function(e,t,n){"use strict";n.r(t);var a=n(331);angular.module("portainer.app").factory("StatusService",["$q","Status",function(e,t){var n={status:function(){var n=e.defer();return t.get().$promise.then((function(e){var t=new a.StatusViewModel(e);n.resolve(t)})).catch((function(e){n.reject({msg:"Unable to retrieve application status",err:e})})),n.promise},version:function(){var n=e.defer();return t.version().$promise.then((function(e){var t=new a.StatusVersionViewModel(e);n.resolve(t)})).catch((function(e){n.reject({msg:"Unable to retrieve application version info",err:e})})),n.promise}};return n}])},function(e,t){angular.module("portainer.app").factory("SupportService",["$q","Support",function(e,t){"use strict";var n={supportProducts:function(){var n=e.defer();return t.get().$promise.then((function(e){n.resolve(e)})).catch((function(e){n.reject({msg:"Unable to retrieve support options",err:e})})),n.promise}};return n}])},function(e,t,n){"use strict";n.r(t);var a=n(332);function r(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function o(e){r(s,a,i,o,l,"next",e)}function l(e){r(s,a,i,o,l,"throw",e)}o(void 0)}))}}angular.module("portainer.app").factory("TagService",["$q","$async","Tags",function(e,t,n){var r={};function s(e){return o.apply(this,arguments)}function o(){return(o=i(regeneratorRuntime.mark((function e(t){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={Name:t},e.prev=1,e.next=4,n.create({},r).$promise;case 4:return i=e.sent,e.abrupt("return",new a.TagViewModel(i));case 8:throw e.prev=8,e.t0=e.catch(1),{msg:"Unable to create tag",err:e.t0};case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return r.tags=function(){var t=e.defer();return n.query().$promise.then((function(e){var n=e.map((function(e){return new a.TagViewModel(e)}));t.resolve(n)})).catch((function(e){t.reject({msg:"Unable to retrieve tags",err:e})})),t.promise},r.tagNames=function(){var t=e.defer();return n.query().$promise.then((function(e){var n=e.map((function(e){return e.Name}));t.resolve(n)})).catch((function(e){t.reject({msg:"Unable to retrieve tags",err:e})})),t.promise},r.createTag=function(e){return t(s,e)},r.deleteTag=function(e){return n.remove({id:e}).$promise},r}])},function(e,t,n){"use strict";n.r(t);var a=n(164);angular.module("portainer.app").factory("TeamMembershipService",["$q","TeamMemberships",function(e,t){var n={memberships:function(){var n=e.defer();return t.query().$promise.then((function(e){var t=e.map((function(e){return new a.TeamMembershipModel(e)}));n.resolve(t)})).catch((function(e){n.reject({msg:"Unable to retrieve team memberships",err:e})})),n.promise},createMembership:function(e,n,a){var r={UserID:e,TeamID:n,Role:a};return t.create({},r).$promise},deleteMembership:function(e){return t.remove({id:e}).$promise},updateMembership:function(e,n,a,r){var i={UserID:n,TeamID:a,Role:r};return t.update({id:e},i).$promise}};return n}])},function(e,t,n){"use strict";n.r(t);var a=n(333),r=n(164);angular.module("portainer.app").factory("TeamService",["$q","Teams","TeamMembershipService",function(e,t,n){var i={teams:function(){var n=e.defer();return t.query().$promise.then((function(e){var t=e.map((function(e){return new a.TeamViewModel(e)}));n.resolve(t)})).catch((function(e){n.reject({msg:"Unable to retrieve teams",err:e})})),n.promise},team:function(n){var r=e.defer();return t.get({id:n}).$promise.then((function(e){var t=new a.TeamViewModel(e);r.resolve(t)})).catch((function(e){r.reject({msg:"Unable to retrieve team details",err:e})})),r.promise},createTeam:function(a,r){var i=e.defer(),s={Name:a};return t.create({},s).$promise.then((function(t){var a=t.Id,s=[];angular.forEach(r,(function(e){s.push(n.createMembership(e,a,1))})),e.all(s).then((function(){i.resolve()}))})).catch((function(e){i.reject({msg:"Unable to create team",err:e})})),i.promise},deleteTeam:function(e){return t.remove({id:e}).$promise},userMemberships:function(n){var a=e.defer();return t.queryMemberships({id:n}).$promise.then((function(e){var t=e.map((function(e){return new r.TeamMembershipModel(e)}));a.resolve(t)})).catch((function(e){a.reject({msg:"Unable to retrieve user memberships for the team",err:e})})),a.promise}};return i}])},function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(446);angular.module("portainer.app").factory("TemplateService",["$q","Templates","TemplateHelper","RegistryService","DockerHubService","ImageHelper","ContainerHelper",function(e,t,n,i,s,o,l){var c={};return c.templates=function(){var n=e.defer();return e.all({templates:t.query().$promise,registries:i.registries(),dockerhub:s.dockerhub()}).then((function(e){var t=e.templates.version,s=Object(a.a)(e.templates.templates,(function(a){try{var s=new r.TemplateViewModel(a,t),o=i.retrievePorRegistryModelFromRepositoryWithRegistries(s.RegistryModel.Registry.URL,e.registries,e.dockerhub);return o.Image=s.RegistryModel.Image,s.RegistryModel=o,s}catch(e){n.reject({msg:"Unable to retrieve templates",err:e})}}));n.resolve(s)})).catch((function(e){n.reject({msg:"Unable to retrieve templates",err:e})})),n.promise},c.templateFile=function(e,n){return t.file({repositoryUrl:e,composeFilePathInRepository:n}).$promise},c.createTemplateConfiguration=function(e,t,a){var r=o.createImageConfigForContainer(e.RegistryModel),i=function(e,t,a){var r=n.getDefaultContainerConfiguration();r.HostConfig.NetworkMode=a.Name,r.HostConfig.Privileged=e.Privileged,r.HostConfig.RestartPolicy={Name:e.RestartPolicy},r.HostConfig.ExtraHosts=e.Hosts?e.Hosts:[],r.name=t,r.Hostname=e.Hostname,r.Env=n.EnvToStringArray(e.Env),r.Cmd=l.commandStringToArray(e.Command);var i=n.portArrayToPortConfiguration(e.Ports);r.HostConfig.PortBindings=i.bindings,r.ExposedPorts=i.exposedPorts;var s=n.getConsoleConfiguration(e.Interactive);return r.OpenStdin=s.openStdin,r.Tty=s.tty,r.Labels=n.updateContainerConfigurationWithLabels(e.Labels),r}(e,t,a);return i.Image=r.fromImage,i},c.updateContainerConfigurationWithVolumes=function(e,t,a){var r=t.Volumes;n.createVolumeBindings(r,a),r.forEach((function(t){t.binding&&(e.Volumes[t.container]={},e.HostConfig.Binds.push(t.binding))}))},c}])},function(e,t,n){"use strict";n.r(t);var a=n(4),r=n(334),i=n(164);angular.module("portainer.app").factory("UserService",["$q","Users","UserHelper","TeamService","TeamMembershipService",function(e,t,n,s,o){var l={users:function(a){var i=e.defer();return t.query({}).$promise.then((function(e){var t=e.map((function(e){return new r.UserViewModel(e)}));a||(t=n.filterNonAdministratorUsers(t)),i.resolve(t)})).catch((function(e){i.reject({msg:"Unable to retrieve users",err:e})})),i.promise},user:function(n){var a=e.defer();return t.get({id:n}).$promise.then((function(e){var t=new r.UserViewModel(e);a.resolve(t)})).catch((function(e){a.reject({msg:"Unable to retrieve user details",err:e})})),a.promise},createUser:function(n,a,r,i){var s=e.defer(),l={username:n,password:a,role:r};return t.create({},l).$promise.then((function(t){var n=t.Id,a=[];angular.forEach(i,(function(e){a.push(o.createMembership(n,e,2))})),e.all(a).then((function(){s.resolve()}))})).catch((function(e){s.reject({msg:"Unable to create user",err:e})})),s.promise},deleteUser:function(e){return t.remove({id:e}).$promise},updateUser:function(e,n){var a=n.password,r=n.role,i=n.username;return t.update({id:e},{password:a,role:r,username:i}).$promise},updateUserPassword:function(e,n,a){var r={Password:n,NewPassword:a};return t.updatePassword({id:e},r).$promise},userMemberships:function(n){var a=e.defer();return t.queryMemberships({id:n}).$promise.then((function(e){var t=e.map((function(e){return new i.TeamMembershipModel(e)}));a.resolve(t)})).catch((function(e){a.reject({msg:"Unable to retrieve user memberships",err:e})})),a.promise},userLeadingTeams:function(t){var n=e.defer();return e.all({teams:s.teams(),memberships:l.userMemberships(t)}).then((function(e){var t=e.memberships,r=e.teams.filter((function(e){var n=Object(a.a)(t,{TeamId:e.Id});if(n&&1===n.Role)return e}));n.resolve(r)})).catch((function(e){n.reject({msg:"Unable to retrieve user teams",err:e})})),n.promise},initAdministrator:function(e,n){return t.initAdminUser({Username:e,Password:n}).$promise},administratorExists:function(){var n=e.defer();return t.checkAdminUser({}).$promise.then((function(){n.resolve(!0)})).catch((function(e){404===e.status&&n.resolve(!1),n.reject({msg:"Unable to verify administrator account existence",err:e})})),n.promise}};return l}])},function(e,t,n){"use strict";n.r(t);var a=n(447);angular.module("portainer.app").factory("WebhookService",["$q","Webhooks",function(e,t){var n={webhooks:function(n,r){var i=e.defer(),s={ResourceID:n,EndpointID:r};return t.query({filters:s}).$promise.then((function(e){var t=e.map((function(e){return new a.WebhookViewModel(e)}));i.resolve(t)})).catch((function(e){i.reject({msg:"Unable to retrieve webhooks",err:e})})),i.promise},createServiceWebhook:function(e,n){return t.create({ResourceID:e,EndpointID:n,WebhookType:1}).$promise},deleteWebhook:function(e){return t.remove({id:e}).$promise}};return n}])},function(e,t){function n(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}angular.module("portainer").factory("$async",["$q",function(e){return function(t){for(var a=e.defer(),r=function(a){var r=e.defer();return t.apply(void 0,n(a)).then(r.resolve).catch(r.reject),r.promise},i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return r(s).then(a.resolve).catch(a.reject),a.promise}}])},function(e,t){function n(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function a(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var s=e.apply(t,a);function o(e){n(s,r,i,o,l,"next",e)}function l(e){n(s,r,i,o,l,"throw",e)}o(void 0)}))}}angular.module("portainer.app").factory("Authentication",["$async","$state","Auth","OAuth","jwtHelper","LocalStorage","StateManager","EndpointProvider",function(e,t,n,r,i,s,o,l){"use strict";var c={},d={};function u(){return p.apply(this,arguments)}function p(){return(p=a(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=s.getJWT())){e.next=5;break}return e.next=5,y(t);case 5:return e.abrupt("return",!!t);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function m(e){return g.apply(this,arguments)}function g(){return(g=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,n.logout().$promise;case 3:o.clean(),l.clean(),s.cleanAuthData(),s.storeLoginStateUUID("");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return(h=a(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.validate({code:t}).$promise;case 2:return n=e.sent,e.next=5,y(n.jwt);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){return b.apply(this,arguments)}function b(){return(b=a(regeneratorRuntime.mark((function e(t,a){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.login({username:t,password:a}).$promise;case 2:return r=e.sent,e.next=5,y(r.jwt);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return x.apply(this,arguments)}function x(){return(x=a(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.storeJWT(t),n=i.decodeToken(t),d.username=n.username,d.ID=n.id,d.role=n.role;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return c.init=function(){return e(u)},c.OAuthLogin=function(t){return e(f,t)},c.login=function(t,n){return e(v,t,n)},c.logout=function(t){return e(m,t)},c.isAuthenticated=function(){var e=s.getJWT();return e&&!i.isTokenExpired(e)},c.getUserDetails=function(){return d},c.isAdmin=function(){if(1===d.role)return!0;return!1},c}])},function(e,t,n){"use strict";n.r(t);var a=n(151),r=n.n(a),i=n(129),s=n.n(i);angular.module("portainer.app").factory("ChartService",[function(){var e={};function t(e,t,n,a){return{animation:{duration:0},responsiveAnimationDuration:0,responsive:!0,tooltips:{mode:"index",intersect:!1,position:e,callbacks:{label:function(e,n){var a=n.datasets[e.datasetIndex].label;return t(a,e.yLabel)}}},hover:{animationDuration:0},scales:{yAxes:[{stacked:a,ticks:{beginAtZero:!0,callback:n}}]}}}function n(e,t){e.data.datasets[0].data.length>t&&(e.data.labels.pop(),e.data.datasets[0].data.pop(),e.data.datasets[1].data.pop())}function a(e,t){return e+": "+(t>5?s()(t,{base:10,round:1}):t.toFixed(1)+"B")}function i(e){return e>5?s()(e,{base:10,round:1}):e.toFixed(1)+"B"}function o(e){return e>1?Math.round(e)+"%":e.toFixed(1)+"%"}function l(e,t){return e+": "+(t>1?Math.round(t):t.toFixed(1))+"%"}return e.CreateCPUChart=function(e){return function(e,n,a,i){return new r.a(e,{type:"line",data:{labels:[],datasets:[{label:n,data:[],fill:!0,backgroundColor:"rgba(151,187,205,0.4)",borderColor:"rgba(151,187,205,0.6)",pointBackgroundColor:"rgba(151,187,205,1)",pointBorderColor:"rgba(151,187,205,1)",pointRadius:2,borderWidth:2}]},options:t("nearest",a,i)})}(e,"CPU",l,o)},e.CreateMemoryChart=function(e){return function(e,n,a){return new r.a(e,{type:"line",data:{labels:[],datasets:[{label:"Memory",data:[],fill:!0,backgroundColor:"rgba(151,187,205,0.4)",borderColor:"rgba(151,187,205,0.6)",pointBackgroundColor:"rgba(151,187,205,1)",pointBorderColor:"rgba(151,187,205,1)",pointRadius:2,borderWidth:2},{label:"Cache",data:[],fill:!0,backgroundColor:"rgba(255,180,174,0.4)",borderColor:"rgba(255,180,174,0.6)",pointBackgroundColor:"rgba(255,180,174,1)",pointBorderColor:"rgba(255,180,174,1)",pointRadius:2,borderWidth:2}]},options:t("nearest",n,a,!0)})}(e,a,i)},e.CreateNetworkChart=function(e){return new r.a(e,{type:"line",data:{labels:[],datasets:[{label:"RX on eth0",data:[],fill:!1,backgroundColor:"rgba(151,187,205,0.4)",borderColor:"rgba(151,187,205,0.6)",pointBackgroundColor:"rgba(151,187,205,1)",pointBorderColor:"rgba(151,187,205,1)",pointRadius:2,borderWidth:2},{label:"TX on eth0",data:[],fill:!1,backgroundColor:"rgba(255,180,174,0.4)",borderColor:"rgba(255,180,174,0.6)",pointBackgroundColor:"rgba(255,180,174,1)",pointBorderColor:"rgba(255,180,174,1)",pointRadius:2,borderWidth:2}]},options:t("average",a,i)})},e.UpdateMemoryChart=function(e,t,a,r){r.data.labels.push(e),r.data.datasets[0].data.push(t),a?r.data.datasets[1].data.push(a):r.data.datasets.splice(1,1),n(r),r.update(0)},e.UpdateCPUChart=function(e,t,n){n.data.labels.push(e),n.data.datasets[0].data.push(t),n.data.datasets[0].data.length>600&&(n.data.labels.pop(),n.data.datasets[0].data.pop()),n.update(0)},e.UpdateNetworkChart=function(e,t,a,r){r.data.labels.push(e),r.data.datasets[0].data.push(t),r.data.datasets[1].data.push(a),n(r),r.update(0)},e}])},function(e,t,n){"use strict";n.r(t);var a=n(563),r=n(192),i=n.n(r);n(1656),n(1657),n(1658),n(1680);angular.module("portainer.app").factory("CodeMirrorService",(function(){var e={},t={lineNumbers:!0},n={mode:"text/x-yaml",gutters:["CodeMirror-lint-markers"],lint:!0,extraKeys:{Tab:function(e){var t=Array(e.getOption("indentUnit")+1).join(" ");e.replaceSelection(t)}}};return e.applyCodeMirrorOnElement=function(e,r,s){var o=angular.copy(t);r&&Object(a.a)(o,n),s&&(o.readOnly=!0);var l=i.a.fromTextArea(e,o);return l.setSize("100%",500),l},e}))},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){angular.module("portainer.app").factory("DatatableService",["LocalStorage",function(e){"use strict";var t={setDataTableSettings:function(t,n){e.storeDataTableSettings(t,n)},getDataTableSettings:function(t){return e.getDataTableSettings(t)},setDataTableTextFilters:function(t,n){e.storeDataTableTextFilters(t,n)},getDataTableTextFilters:function(t){return e.getDataTableTextFilters(t)},setDataTableFilters:function(t,n){e.storeDataTableFilters(t,n)},getDataTableFilters:function(t){return e.getDataTableFilters(t)},getDataTableOrder:function(t){return e.getDataTableOrder(t)},setDataTableOrder:function(t,n,a){var r={orderBy:n,reverse:a};e.storeDataTableOrder(t,r)},setDataTableExpandedItems:function(t,n){e.storeDataTableExpandedItems(t,n)},setColumnVisibilitySettings:function(t,n){e.storeColumnVisibilitySettings(t,n)},getDataTableExpandedItems:function(t){return e.getDataTableExpandedItems(t)},setDataTableSelectedItems:function(t,n){e.storeDataTableSelectedItems(t,n)},getDataTableSelectedItems:function(t){return e.getDataTableSelectedItems(t)},getColumnVisibilitySettings:function(t){return e.getColumnVisibilitySettings(t)}};return t}])},function(e,t,n){"use strict";n.r(t);var a=n(4);angular.module("portainer.app").factory("EndpointProvider",["LocalStorage",function(e){var t={},n={};return t.initialize=function(){var t=e.getEndpointID(),a=e.getEndpointPublicURL(),r=e.getOfflineMode();t&&(n.ID=t),a&&(n.PublicURL=a),r&&(n.OfflineMode=r)},t.clean=function(){e.cleanEndpointData(),n={}},t.endpoint=function(){return n},t.endpointID=function(){return void 0===n.ID&&(n.ID=e.getEndpointID()),n.ID},t.setEndpointID=function(t){n.ID=t,e.storeEndpointID(t)},t.endpointPublicURL=function(){return void 0===n.PublicURL&&(n.PublicURL=e.getEndpointPublicURL()),n.PublicURL},t.setEndpointPublicURL=function(t){n.PublicURL=t,e.storeEndpointPublicURL(t)},t.endpoints=function(){return e.getEndpoints()},t.setEndpoints=function(t){e.storeEndpoints(t)},t.offlineMode=function(){return n.OfflineMode},t.setOfflineMode=function(t){n.OfflineMode=t,e.storeOfflineMode(t)},t.setOfflineModeFromStatus=function(t){var a=1!==t;n.OfflineMode=a,e.storeOfflineMode(a)},t.currentEndpoint=function(){var t=n.ID,r=e.getEndpoints();return Object(a.a)(r,(function(e){return e.Id===t}))},t}])},function(e,t,n){"use strict";n.r(t);var a=n(14),r=n(24);angular.module("portainer.app").factory("FileUploadService",["$q","Upload","EndpointProvider",function(e,t,n){var i={};function s(e,n){return t.upload({url:e,data:{file:n}})}return i.buildImage=function(e,a,i){var s=n.endpointID();return t.http({url:"api/endpoints/"+s+"/docker/build",headers:{"Content-Type":a.type},data:a,params:{t:e,dockerfile:i},ignoreLoadingBar:!0,transformResponse:function(e){return Object(r.jsonObjectsToArrayHandler)(e)}})},i.loadImages=function(e){var a=n.endpointID();return t.http({url:"api/endpoints/"+a+"/docker/images/load",headers:{"Content-Type":e.type},data:e,ignoreLoadingBar:!0,transformResponse:r.genericHandler})},i.createSchedule=function(e){return t.upload({url:"api/schedules?method=file",data:{file:e.File,Name:e.Name,CronExpression:e.CronExpression,Image:e.Image,Endpoints:t.json(e.Endpoints),RetryCount:e.RetryCount,RetryInterval:e.RetryInterval}})},i.createSwarmStack=function(e,n,a,r,i){return t.upload({url:"api/stacks?method=file&type=1&endpointId="+i,data:{file:a,Name:e,SwarmID:n,Env:t.json(r)},ignoreLoadingBar:!0})},i.createComposeStack=function(e,n,a,r){return t.upload({url:"api/stacks?method=file&type=2&endpointId="+r,data:{file:n,Name:e,Env:t.json(a)},ignoreLoadingBar:!0})},i.createEdgeStack=function(e,n,a){return t.upload({url:"api/edge_stacks?method=file",data:{file:n,Name:e,EdgeGroups:t.json(a)},ignoreLoadingBar:!0})},i.createCustomTemplate=function(e){return t.upload({url:"api/custom_templates?method=file",data:e,ignoreLoadingBar:!0})},i.configureRegistry=function(e,n){return t.upload({url:"api/registries/"+e+"/configure",data:n})},i.createEndpoint=function(e,n,a,r,i,s,o,l,c,d,u,p,m){return t.upload({url:"api/endpoints",data:{Name:e,EndpointCreationType:n,URL:a,PublicURL:r,GroupID:i,TagIds:t.json(s),TLS:o,TLSSkipVerify:l,TLSSkipClientVerify:c,TLSCACertFile:d,TLSCertFile:u,TLSKeyFile:p,CheckinInterval:m},ignoreLoadingBar:!0})},i.createAzureEndpoint=function(e,n,r,i,s,o){return t.upload({url:"api/endpoints",data:{Name:e,EndpointCreationType:a.PortainerEndpointCreationTypes.AzureEnvironment,GroupID:s,TagIds:t.json(o),AzureApplicationID:n,AzureTenantID:r,AzureAuthenticationKey:i},ignoreLoadingBar:!0})},i.uploadLDAPTLSFiles=function(t,n,a){var r=[];return t&&r.push(s("api/upload/tls/ca?folder=ldap",t)),n&&r.push(s("api/upload/tls/cert?folder=ldap",n)),a&&r.push(s("api/upload/tls/key?folder=ldap",a)),e.all(r)},i.uploadTLSFilesForEndpoint=function(t,n,a,r){var i=[];return n&&i.push(s("api/upload/tls/ca?folder="+t,n)),a&&i.push(s("api/upload/tls/cert?folder="+t,a)),r&&i.push(s("api/upload/tls/key?folder="+t,r)),e.all(i)},i}])},function(e,t,n){"use strict";n.r(t);var a=n(16);angular.module("portainer.app").factory("FormValidator",[function(){var e={validateAccessControl:function(e,t){return e.AccessControlEnabled?t&&e.Ownership===a.ResourceControlOwnership.RESTRICTED&&0===e.AuthorizedUsers.length&&0===e.AuthorizedTeams.length?"":t||e.Ownership!==a.ResourceControlOwnership.RESTRICTED||0!==e.AuthorizedTeams.length?"":"You must specify at least a team.":""}};return e}])},function(e,t){angular.module("portainer.app").factory("HttpRequestHelper",[function(){"use strict";var e={},t={agentTargetQueue:[],agentManagerOperation:!1};return e.registryAuthenticationHeader=function(){return t.registryAuthentication},e.setRegistryAuthenticationHeader=function(e){t.registryAuthentication=e},e.portainerAgentTargetHeader=function(){return 0===t.agentTargetQueue.length?t.agentTargetLastValue:(1===t.agentTargetQueue.length&&(t.agentTargetLastValue=t.agentTargetQueue[0]),t.agentTargetQueue.shift())},e.setPortainerAgentTargetHeader=function(e){e&&t.agentTargetQueue.push(e)},e.setPortainerAgentManagerOperation=function(e){t.agentManagerOperation=e},e.portainerAgentManagerOperation=function(){return t.agentManagerOperation},e.resetAgentHeaders=function(){t.agentTargetQueue=[],delete t.agentTargetLastValue,t.agentManagerOperation=!1},e}])},function(e,t,n){"use strict";n.r(t);var a=n(10);angular.module("portainer.app").factory("LegacyExtensionManager",["$q","PluginService","SystemService","NodeService","LegacyExtensionService",function(e,t,n,r,i){var s={};function o(){var n=e.defer();return t.volumePlugins().then((function(t){var n=t;return Object(a.a)(n,"cio:latest")?function(){var t=e.defer();return r.getActiveManager().then((function(e){var t="tcp://"+e.Addr+":8282";return i.registerStoridgeExtension(t)})).then((function(e){t.resolve(e)})).catch((function(e){t.reject({msg:"An error occured during Storidge extension initialization",err:e})})),t.promise}():i.deregisterStoridgeExtension()})).then((function(e){n.resolve(e)})).catch((function(e){n.reject({msg:"An error occured during Storidge extension check",err:e})})),n.promise}return s.initEndpointExtensions=function(t){var a=e.defer();return 1!==t.Status?(a.resolve([]),a.promise):(n.version().then((function(t){var n=parseFloat(t.ApiVersion);return e.all([n>=1.25?o():{}])})).then((function(e){var t=e;a.resolve(t)})).catch((function(e){a.reject({msg:"Unable to connect to the Docker environment",err:e})})),a.promise)},s}])},function(e,t){angular.module("portainer.app").factory("LocalStorage",["localStorageService",function(e){return{storeEndpointID:function(t){e.set("ENDPOINT_ID",t)},getEndpointID:function(){return e.get("ENDPOINT_ID")},storeEndpointPublicURL:function(t){e.set("ENDPOINT_PUBLIC_URL",t)},getEndpointPublicURL:function(){return e.get("ENDPOINT_PUBLIC_URL")},storeLoginStateUUID:function(t){e.set("LOGIN_STATE_UUID",t)},getLoginStateUUID:function(){return e.get("LOGIN_STATE_UUID")},storeOfflineMode:function(t){e.set("ENDPOINT_OFFLINE_MODE",t)},getOfflineMode:function(){return e.get("ENDPOINT_OFFLINE_MODE")},storeEndpoints:function(t){e.set("ENDPOINTS_DATA",t)},getEndpoints:function(){return e.get("ENDPOINTS_DATA")},storeEndpointState:function(t){e.set("ENDPOINT_STATE",t)},getEndpointState:function(){return e.get("ENDPOINT_STATE")},storeApplicationState:function(t){e.set("APPLICATION_STATE",t)},getApplicationState:function(){return e.get("APPLICATION_STATE")},storeUIState:function(t){e.set("UI_STATE",t)},getUIState:function(){return e.get("UI_STATE")},storeJWT:function(t){e.set("JWT",t)},getJWT:function(){return e.get("JWT")},deleteJWT:function(){e.remove("JWT")},storePaginationLimit:function(t,n){e.set("datatable_pagination_"+t,n)},getPaginationLimit:function(t){return e.get("datatable_pagination_"+t)},getDataTableOrder:function(t){return e.get("datatable_order_"+t)},storeDataTableOrder:function(t,n){e.set("datatable_order_"+t,n)},getDataTableTextFilters:function(t){return e.get("datatable_text_filter_"+t)},storeDataTableTextFilters:function(t,n){e.set("datatable_text_filter_"+t,n)},getDataTableFilters:function(t){return e.get("datatable_filters_"+t)},storeDataTableFilters:function(t,n){e.set("datatable_filters_"+t,n)},getDataTableSettings:function(t){return e.get("datatable_settings_"+t)},storeDataTableSettings:function(t,n){e.set("datatable_settings_"+t,n)},getDataTableExpandedItems:function(t){return e.get("datatable_expandeditems_"+t)},storeDataTableExpandedItems:function(t,n){e.set("datatable_expandeditems_"+t,n)},getDataTableSelectedItems:function(t){return e.get("datatable_selecteditems_"+t)},storeDataTableSelectedItems:function(t,n){e.set("datatable_selecteditems_"+t,n)},storeSwarmVisualizerSettings:function(t,n){e.set("swarmvisualizer_"+t,n)},getSwarmVisualizerSettings:function(t){return e.get("swarmvisualizer_"+t)},storeColumnVisibilitySettings:function(t,n){e.set("col_visibility_"+t,n)},getColumnVisibilitySettings:function(t){return e.get("col_visibility_"+t)},storeJobImage:function(t){e.set("job_image",t)},getJobImage:function(){return e.get("job_image")},storeActiveTab:function(t,n){return e.set("active_tab_"+t,n)},getActiveTab:function(t){var n=e.get("active_tab_"+t);return null===n?0:n},storeToolbarToggle:function(t){e.set("toolbar_toggle",t)},getToolbarToggle:function(){return e.get("toolbar_toggle")},storeLogoutReason:function(t){return e.set("logout_reason",t)},getLogoutReason:function(){return e.get("logout_reason")},cleanLogoutReason:function(){return e.remove("logout_reason")},clean:function(){e.clearAll()},cleanAuthData:function(){e.remove("JWT","APPLICATION_STATE","LOGIN_STATE_UUID")},cleanEndpointData:function(){e.remove("ENDPOINT_ID","ENDPOINT_PUBLIC_URL","ENDPOINT_OFFLINE_MODE","ENDPOINTS_DATA","ENDPOINT_STATE")}}}])},function(e,t,n){"use strict";n.r(t);var a=n(249),r=n.n(a);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}angular.module("portainer.app").factory("ModalService",["$sanitize",function(e){var t={},n=function(e){e.css({top:"50%","margin-top":function(){return-e.height()/2}})},a=function(t){return{confirm:{label:e(t.buttons.confirm.label),className:e(t.buttons.confirm.className)},cancel:{label:t.buttons.cancel&&t.buttons.cancel.label?e(t.buttons.cancel.label):""}}};function i(e,t){var i=r.a.prompt({title:e.title,inputType:e.inputType,inputOptions:e.inputOptions,buttons:a(e),callback:e.callback});n(i),i.find(".bootbox-body").prepend("<p>"+e.message+"</p>"),i.find(".bootbox-input-checkbox").prop("checked",t)}return t.enlargeImage=function(t){t=e(t),r.a.dialog({message:'<img src="'+t+'" style="width:100%" />',className:"image-zoom-modal",onEscape:!0})},t.confirmAsync=function(e){return new Promise((function(n){t.confirm(s(s({},e),{},{callback:function(e){return n(e)}}))}))},t.confirm=function(e){var t=r.a.confirm({title:e.title,message:e.message,buttons:a(e),callback:e.callback});n(t)},t.confirmAccessControlUpdate=function(e){t.confirm({title:" ?",message:"",buttons:{confirm:{label:"Change ownership",className:"btn-primary"}},callback:e})},t.confirmImageForceRemoval=function(e){t.confirm({title:"?",message:"",buttons:{confirm:{label:"",className:"btn-danger"}},callback:e})},t.cancelRegistryRepositoryAction=function(e){t.confirm({title:"?",message:": .  ?",buttons:{confirm:{label:"Stop",className:"btn-danger"}},callback:e})},t.confirmDeletion=function(n,a){n=e(n),t.confirm({title:" ?",message:n,buttons:{confirm:{label:"",className:"btn-danger"}},callback:a})},t.confirmUpdate=function(n,a){n=e(n),t.confirm({title:" ?",message:n,buttons:{confirm:{label:"Update",className:"btn-warning"}},callback:a})},t.confirmRedeploy=function(n,a){n=e(n),t.confirm({title:"",message:n,buttons:{confirm:{label:"Redeploy the applications",className:"btn-primary"},cancel:{label:"I'll do it later"}},callback:a})},t.confirmDeletionAsync=function(e){return new Promise((function(n){t.confirmDeletion(e,(function(e){return n(e)}))}))},t.confirmContainerDeletion=function(t,i){var s,o;t=e(t),s={title:t,inputType:"checkbox",inputOptions:[{text:"<i></i>",value:"1"}],buttons:{confirm:{label:"",className:"btn-danger"}},callback:i},o=r.a.prompt({title:s.title,inputType:s.inputType,inputOptions:s.inputOptions,buttons:a(s),callback:s.callback}),n(o)},t.confirmContainerRecreation=function(e){i({title:"?",message:"",inputType:"checkbox",inputOptions:[{text:"<i></i>",value:"1"}],buttons:{confirm:{label:"",className:"btn-danger"}},callback:e},!1)},t.confirmEndpointSnapshot=function(e){t.confirm({title:"?",message:"",buttons:{confirm:{label:"Continue",className:"btn-primary"}},callback:e})},t.confirmImageExport=function(e){t.confirm({title:"Caution",message:"",buttons:{confirm:{label:"Continue",className:"btn-primary"}},callback:e})},t.confirmServiceForceUpdate=function(t,n){i({title:" ?",message:t=e(t),inputType:"checkbox",inputOptions:[{text:" version<i></i>",value:"1"}],buttons:{confirm:{label:"Update",className:"btn-primary"}},callback:n},!1)},t}])},function(e,t,n){"use strict";n.r(t);var a=n(216),r=n.n(a);angular.module("portainer.app").factory("Notifications",["$sanitize",function(e){var t={success:function(t,n){r.a.success(e(n),e(t))},warning:function(t,n){r.a.warning(e(n),e(t),{timeOut:6e3})},error:function(t,n,a){var i=a;n.err&&n.err.data&&n.err.data.message?i=n.err.data.message:n.err&&n.err.data&&n.err.data.details?i=n.err.data.details:n.data&&n.data.details?i=n.data.details:n.data&&n.data.message?i=n.data.message:n.data&&n.data.content?i=n.data.content:n.message?i=n.message:n.err&&n.err.data&&n.err.data.length>0&&n.err.data[0].message?i=n.err.data[0].message:n.err&&n.err.data&&n.err.data.err?i=n.err.data.err:n.data&&n.data.err?i=n.data.err:n.msg&&(i=n.msg),"Invalid JWT token"!==i&&r.a.error(e(i),e(t),{timeOut:6e3})}};return t}])},function(e,t){angular.module("portainer.app").factory("PaginationService",["LocalStorage","PAGINATION_MAX_ITEMS",function(e,t){"use strict";var n={getPaginationLimit:function(n){var a=t,r=e.getPaginationLimit(n);return null!==r&&(a=r),""+a},setPaginationLimit:function(t,n){e.storePaginationLimit(t,n)}};return n}])},function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(23),i=n(443),s=n(445);function o(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){o(i,a,r,s,l,"next",e)}function l(e){o(i,a,r,s,l,"throw",e)}s(void 0)}))}}angular.module("portainer.app").factory("RegistryGitlabService",["$async","Gitlab",function(e,t){var n={};function o(e,t,n){return c.apply(this,arguments)}function c(){return(c=l(regeneratorRuntime.mark((function e(n,a,i){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n).projects(a).$promise;case 2:if(s=e.sent,i=Object(r.a)(i,s.data),!s.next){e.next=9;break}return a.page=s.next,e.next=8,o(n,a,i);case 8:i=e.sent;case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e,t){return u.apply(this,arguments)}function u(){return(u=l(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o({url:t,token:n},{page:1},[]);case 3:return r=e.sent,e.abrupt("return",Object(a.a)(r,(function(e){return new i.RegistryGitlabProject(e)})));case 7:throw e.prev=7,e.t0=e.catch(0),{msg:"Unable to retrieve projects",err:e.t0};case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function p(e,t){return m.apply(this,arguments)}function m(){return(m=l(regeneratorRuntime.mark((function e(n,a){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t().repositories(n).$promise;case 2:if(i=e.sent,a=Object(r.a)(a,i.data),!i.next){e.next=9;break}return n.page=i.next,e.next=8,p(n,a);case 8:a=e.sent;case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return f.apply(this,arguments)}function f(){return(f=l(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={id:t.Id,projectId:t.Gitlab.ProjectId,page:1},e.next=4,p(n,[]);case 4:return r=e.sent,e.abrupt("return",Object(a.a)(r,(function(e){return new s.RegistryRepositoryGitlabViewModel(e)})));case 8:throw e.prev=8,e.t0=e.catch(0),{msg:"Unable to retrieve repositories",err:e.t0};case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return n.projects=function(t,n){return e(d,t,n)},n.repositories=function(t){return e(g,t)},n}])},function(e,t,n){"use strict";n.r(t);var a=n(12),r=n.n(a);angular.module("portainer.app").factory("StateManager",["$q","SystemService","InfoHelper","EndpointProvider","LocalStorage","SettingsService","StatusService","APPLICATION_CACHE_VALIDITY","AgentPingService","$analytics",function(e,t,n,a,i,s,o,l,c,d){var u={},p={loading:!0,application:{},endpoint:{},UI:{dismissedInfoPanels:{},dismissedInfoHash:""},extensions:[]};function m(){var t=e.defer();return e.all({settings:s.publicSettings(),status:o.status()}).then((function(e){var n=e.status,a=e.settings;!function(e,t){p.application.version=e.Version,p.application.enableTelemetry=t.EnableTelemetry,p.application.logo=t.LogoURL,p.application.snapshotInterval=t.SnapshotInterval,p.application.enableHostManagementFeatures=t.EnableHostManagementFeatures,p.application.enableVolumeBrowserForNonAdminUsers=t.AllowVolumeBrowserForRegularUsers,p.application.enableEdgeComputeFeatures=t.EnableEdgeComputeFeatures,p.application.allowDeviceMappingForRegularUsers=t.AllowDeviceMappingForRegularUsers,p.application.allowStackManagementForRegularUsers=t.AllowStackManagementForRegularUsers,p.application.allowContainerCapabilitiesForRegularUsers=t.AllowContainerCapabilitiesForRegularUsers,p.application.allowBindMountsForRegularUsers=t.AllowBindMountsForRegularUsers,p.application.allowPrivilegedModeForRegularUsers=t.AllowPrivilegedModeForRegularUsers,p.application.allowHostNamespaceForRegularUsers=t.AllowHostNamespaceForRegularUsers,p.application.validity=r()().unix()}(n,a),d.setOptOut(!a.EnableTelemetry),i.storeApplicationState(p.application),t.resolve(p)})).catch((function(e){t.reject({msg:"Unable to retrieve server settings and status",err:e})})).finally((function(){p.loading=!1})),t.promise}return u.setVersionInfo=function(e){p.application.versionStatus=e,i.storeApplicationState(p.application)},u.dismissInformationPanel=function(e){p.UI.dismissedInfoPanels[e]=!0,i.storeUIState(p.UI)},u.dismissImportantInformation=function(e){p.UI.dismissedInfoHash=e,i.storeUIState(p.UI)},u.getState=function(){return p},u.clean=function(){p.endpoint={},p.application={}},u.updateLogo=function(e){p.application.logo=e,i.storeApplicationState(p.application)},u.updateSnapshotInterval=function(e){p.application.snapshotInterval=e,i.storeApplicationState(p.application)},u.updateEnableHostManagementFeatures=function(e){p.application.enableHostManagementFeatures=e,i.storeApplicationState(p.application)},u.updateEnableVolumeBrowserForNonAdminUsers=function(e){p.application.enableVolumeBrowserForNonAdminUsers=e,i.storeApplicationState(p.application)},u.updateEnableEdgeComputeFeatures=function(e){p.application.enableEdgeComputeFeatures=e,i.storeApplicationState(p.application)},u.updateAllowHostNamespaceForRegularUsers=function(e){p.application.allowHostNamespaceForRegularUsers=e,i.storeApplicationState(p.application)},u.updateAllowDeviceMappingForRegularUsers=function(e){p.application.allowDeviceMappingForRegularUsers=e,i.storeApplicationState(p.application)},u.updateAllowStackManagementForRegularUsers=function(e){p.application.allowStackManagementForRegularUsers=e,i.storeApplicationState(p.application)},u.updateAllowContainerCapabilitiesForRegularUsers=function(e){p.application.allowContainerCapabilitiesForRegularUsers=e,i.storeApplicationState(p.application)},u.updateAllowBindMountsForRegularUsers=function(e){p.application.allowBindMountsForRegularUsers=e,i.storeApplicationState(p.application)},u.updateAllowPrivilegedModeForRegularUsers=function(e){p.application.allowPrivilegedModeForRegularUsers=e,i.storeApplicationState(p.application)},u.updateEnableTelemetry=function(e){p.application.enableTelemetry=e,d.setOptOut(!e),i.storeApplicationState(p.application)},u.initialize=function(){var t=e.defer(),n=i.getUIState();n&&(p.UI=n);var a=i.getEndpointState();a&&(p.endpoint=a);var s=i.getApplicationState();s?r()().unix()-s.validity>l?m().then((function(){return t.resolve(p)})).catch((function(e){return t.reject(e)})):(p.application=s,p.loading=!1,d.setOptOut(!p.application.enableTelemetry),t.resolve(p)):m().then((function(){return t.resolve(p)})).catch((function(e){return t.reject(e)}));return t.promise},u.updateEndpointState=function(a,r){var s=e.defer();if(3===a.Type)return p.endpoint.name=a.Name,p.endpoint.mode={provider:"AZURE"},i.storeEndpointState(p.endpoint),s.resolve(),s.promise;if(5===a.Type||6===a.Type||7===a.Type)return p.endpoint.name=a.Name,p.endpoint.mode={provider:"KUBERNETES"},i.storeEndpointState(p.endpoint),s.resolve(),s.promise;var o=1===a.Status||!a.Snaphosts||!a.Snaphosts.length||!a.Snapshots[0].SnapshotRaw;return e.all({version:o?t.version():e.when(a.Snapshots[0].SnapshotRaw.Version),info:o?t.info():e.when(a.Snapshots[0].SnapshotRaw.Info)}).then((function(e){var t=n.determineEndpointMode(e.info,a.Type),i=parseFloat(e.version.ApiVersion);if(p.endpoint.mode=t,p.endpoint.name=a.Name,p.endpoint.type=a.Type,p.endpoint.apiVersion=i,p.endpoint.extensions=function(e){for(var t=[],n=0;n<e.length;n++){1===e[n].Type&&t.push("storidge")}return t}(r),t.agentProxy&&1===a.Status)return c.ping().then((function(e){p.endpoint.agentApiVersion=e.version}))})).then((function(){i.storeEndpointState(p.endpoint),s.resolve()})).catch((function(e){s.reject({msg:"Unable to connect to the Docker endpoint",err:e})})).finally((function(){p.loading=!1})),s.promise},u.getAgentApiVersion=function(){return p.endpoint.agentApiVersion},u}])},function(e,t){angular.module("portainer.app").controller("AccountController",["$scope","$state","Authentication","UserService","Notifications","SettingsService",function(e,t,n,a,r,i){e.formValues={currentPassword:"",newPassword:"",confirmPassword:""},e.updatePassword=function(){a.updateUserPassword(e.userID,e.formValues.currentPassword,e.formValues.newPassword).then((function(){r.success("Success","Password successfully updated"),t.reload()})).catch((function(e){r.error("",e,e.msg)}))},e.userID=n.getUserDetails().ID,i.publicSettings().then((function(t){e.AuthenticationMethod=t.AuthenticationMethod})).catch((function(e){r.error("",e,"Unable to retrieve application settings")}))}])},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(141),s=n.n(i);function o(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){o(i,a,r,s,l,"next",e)}function l(e){o(i,a,r,s,l,"throw",e)}s(void 0)}))}}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function e(t,n,a,r,i,s,o,l,c,d,u,p,m,g){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.$scope=n,this.$state=a,this.$stateParams=r,this.$window=i,this.Authentication=s,this.UserService=o,this.EndpointService=l,this.StateManager=c,this.Notifications=d,this.SettingsService=u,this.URLHelper=p,this.LocalStorage=m,this.StatusService=g,this.logo=this.StateManager.getState().application.logo,this.formValues={Username:"",Password:""},this.state={AuthenticationError:"",loginInProgress:!0,OAuthProvider:""},this.checkForEndpointsAsync=this.checkForEndpointsAsync.bind(this),this.checkForLatestVersionAsync=this.checkForLatestVersionAsync.bind(this),this.postLoginSteps=this.postLoginSteps.bind(this),this.oAuthLoginAsync=this.oAuthLoginAsync.bind(this),this.internalLoginAsync=this.internalLoginAsync.bind(this),this.authenticateUserAsync=this.authenticateUserAsync.bind(this),this.manageOauthCodeReturn=this.manageOauthCodeReturn.bind(this),this.authEnabledFlowAsync=this.authEnabledFlowAsync.bind(this),this.onInit=this.onInit.bind(this)}var t,n,a,r,i,o,d,u,p,m,g,f;return e.$inject=["$async","$scope","$state","$stateParams","$window","Authentication","UserService","EndpointService","StateManager","Notifications","SettingsService","URLHelper","LocalStorage","StatusService"],t=e,(n=[{key:"logout",value:function(e){this.Authentication.logout(),this.state.loginInProgress=!1,this.generateOAuthLoginURI(),this.LocalStorage.storeLogoutReason(e),this.$window.location.reload()}},{key:"error",value:function(e,t){this.state.AuthenticationError=t,e||(e={}),this.Notifications.error("",e,t),this.state.loginInProgress=!1}},{key:"determineOauthProvider",value:function(e){return-1!==e.indexOf("login.microsoftonline.com")?"Microsoft":-1!==e.indexOf("accounts.google.com")?"Google":-1!==e.indexOf("github.com")?"Github":"OAuth"}},{key:"generateState",value:function(){var e=s()();return this.LocalStorage.storeLoginStateUUID(e),"&state="+e}},{key:"generateOAuthLoginURI",value:function(){this.OAuthLoginURI=this.state.OAuthLoginURI+this.generateState()}},{key:"hasValidState",value:function(e){var t=this.LocalStorage.getLoginStateUUID();return t&&e&&t===e}},{key:"checkForEndpointsAsync",value:(f=l(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.EndpointService.endpoints(0,1);case 3:if(t=e.sent,n=this.Authentication.isAdmin(),0!==t.value.length||!n){e.next=9;break}return e.abrupt("return",this.$state.go("portainer.init.endpoint"));case 9:return e.abrupt("return",this.$state.go("portainer.home"));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),this.error(e.t0,"Unable to retrieve endpoints");case 15:case"end":return e.stop()}}),e,this,[[0,12]])}))),function(){return f.apply(this,arguments)})},{key:"checkForLatestVersionAsync",value:(g=l(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={UpdateAvailable:!1,LatestVersion:""},e.prev=1,e.next=4,this.StatusService.version();case 4:(n=e.sent).UpdateAvailable&&(t.UpdateAvailable=!0,t.LatestVersion=n.LatestVersion);case 6:return e.prev=6,this.StateManager.setVersionInfo(t),e.finish(6);case 9:case"end":return e.stop()}}),e,this,[[1,,6,9]])}))),function(){return g.apply(this,arguments)})},{key:"postLoginSteps",value:(m=l(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.StateManager.initialize();case 2:return e.next=4,this.checkForEndpointsAsync();case 4:return e.next=6,this.checkForLatestVersionAsync();case 6:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"oAuthLoginAsync",value:(p=l(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.Authentication.OAuthLogin(t);case 3:this.URLHelper.cleanParameters(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),this.error(e.t0,"Unable to login via OAuth");case 9:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(e){return p.apply(this,arguments)})},{key:"internalLoginAsync",value:(u=l(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Authentication.login(t,n);case 2:return e.next=4,this.postLoginSteps();case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"authenticateUserAsync",value:(d=l(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.formValues.Username,n=this.formValues.Password,this.state.loginInProgress=!0,e.next=6,this.internalLoginAsync(t,n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.error(e.t0,"Unable to login");case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return d.apply(this,arguments)})},{key:"authenticateUser",value:function(){return this.$async(this.authenticateUserAsync)}},{key:"manageOauthCodeReturn",value:(o=l(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasValidState(n)){e.next=5;break}return e.next=3,this.oAuthLoginAsync(t);case 3:e.next=6;break;case 5:this.error(null,"Invalid OAuth state, try again.");case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"authEnabledFlowAsync",value:(i=l(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.UserService.administratorExists();case 3:e.sent||this.$state.go("portainer.init.admin"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.error(e.t0,"Unable to verify administrator account existence");case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return i.apply(this,arguments)})},{key:"onInit",value:(r=l(regeneratorRuntime.mark((function e(){var t,n,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.SettingsService.publicSettings();case 3:if(t=e.sent,this.AuthenticationMethod=t.AuthenticationMethod,this.state.OAuthProvider=this.determineOauthProvider(t.OAuthLoginURI),this.state.OAuthLoginURI=t.OAuthLoginURI,n=this.URLHelper.getParameter("code"),a=this.URLHelper.getParameter("state"),!n||!a){e.next=14;break}return e.next=12,this.manageOauthCodeReturn(n,a);case 12:return this.generateOAuthLoginURI(),e.abrupt("return");case 14:if(this.generateOAuthLoginURI(),!this.$stateParams.logout&&!this.$stateParams.error){e.next=18;break}return this.logout(this.$stateParams.error),e.abrupt("return");case 18:if((r=this.LocalStorage.getLogoutReason())&&(this.state.AuthenticationError=r,this.LocalStorage.cleanLogoutReason()),!this.Authentication.isAuthenticated()){e.next=23;break}return e.next=23,this.postLoginSteps();case 23:return this.state.loginInProgress=!1,e.next=26,this.authEnabledFlowAsync();case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to retrieve public settings");case 31:case"end":return e.stop()}}),e,this,[[0,28]])}))),function(){return r.apply(this,arguments)})},{key:"$onInit",value:function(){return this.$async(this.onInit)}}])&&c(t.prototype,n),a&&c(t,a),e}();t.default=d,r.a.module("portainer.app").controller("AuthenticationController",d)},,,function(e,t,n){"use strict";n.r(t);var a=n(449),r=n(1698);angular.module("portainer.app").component("createCustomTemplateView",{templateUrl:r,controller:a.default})},function(e,t){var n="app/portainer/views/custom-templates/create-custom-template-view/createCustomTemplateView.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text=""></rd-header-title>\n  <rd-header-content> <a ui-sref="docker.templates.custom"></a> &gt;  </rd-header-content>\n</rd-header>\n\n<div class="row" ng-if="!$ctrl.state.loading">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-body>\n        <form class="form-horizontal" name="customTemplateForm">\n          <custom-template-common-fields form-values="$ctrl.formValues"></custom-template-common-fields>\n\n          \x3c!-- build-method --\x3e\n          <div ng-if="!$ctrl.state.fromStack">\n            <div class="col-sm-12 form-section-title">\n              Build method\n            </div>\n            <div class="form-group"></div>\n            <div class="form-group" style="margin-bottom: 0;">\n              <div class="boxselector_wrapper">\n                <div>\n                  <input type="radio" id="method_editor" ng-model="$ctrl.state.Method" value="editor" ng-change="$ctrl.onChangeMethod()" />\n                  <label for="method_editor">\n                    <div class="boxselector_header">\n                      <i class="fa fa-edit" aria-hidden="true" style="margin-right: 2px;"></i>\n                      \n                    </div>\n                    <p></p>\n                  </label>\n                </div>\n                <div>\n                  <input type="radio" id="method_upload" ng-model="$ctrl.state.Method" value="upload" ng-change="$ctrl.onChangeMethod()" />\n                  <label for="method_upload">\n                    <div class="boxselector_header">\n                      <i class="fa fa-upload" aria-hidden="true" style="margin-right: 2px;"></i>\n                      \n                    </div>\n                    <p></p>\n                  </label>\n                </div>\n                <div>\n                  <input type="radio" id="method_repository" ng-model="$ctrl.state.Method" value="repository" ng-change="$ctrl.onChangeMethod()" />\n                  <label for="method_repository">\n                    <div class="boxselector_header">\n                      <i class="fab fa-git" aria-hidden="true" style="margin-right: 2px;"></i>\n                      Repository\n                    </div>\n                    <p> git </p>\n                  </label>\n                </div>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !build-method --\x3e\n          \x3c!-- web-editor --\x3e\n          <div ng-show="$ctrl.state.Method === \'editor\'">\n            <div class="col-sm-12 form-section-title">\n              \n            </div>\n            <div class="form-group">\n              <span class="col-sm-12 text-muted small">\n                \n                <a href="https://docs.docker.com/compose/compose-file/" target="_blank">\n                  \n                </a>\n                .\n              </span>\n            </div>\n            <div class="form-group">\n              <div class="col-sm-12">\n                <code-editor\n                  identifier="custom-template-creation-editor"\n                  placeholder="# docker-compose"\n                  yml="true"\n                  value="$ctrl.formValues.FileContent"\n                  on-change="($ctrl.editorUpdate)"\n                ></code-editor>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !web-editor --\x3e\n          \x3c!-- upload --\x3e\n          <div ng-show="$ctrl.state.Method === \'upload\'">\n            <div class="col-sm-12 form-section-title">\n              \n            </div>\n            <div class="form-group">\n              <span class="col-sm-12 text-muted small">\n                You can upload a Compose file from your computer.\n              </span>\n            </div>\n            <div class="form-group">\n              <div class="col-sm-12">\n                <button class="btn btn-sm btn-primary" ngf-select ng-model="$ctrl.formValues.File">\n                  \n                </button>\n                <span style="margin-left: 5px;">\n                  {{ $ctrl.formValues.File.name }}\n                  <i class="fa fa-times red-icon" ng-if="!$ctrl.formValues.File" aria-hidden="true"></i>\n                </span>\n              </div>\n            </div>\n          </div>\n          \x3c!-- !upload --\x3e\n          \x3c!-- repository --\x3e\n          <div ng-show="$ctrl.state.Method === \'repository\'">\n            <div class="col-sm-12 form-section-title">\n              Git repository\n            </div>\n            <div class="form-group">\n              <span class="col-sm-12 text-muted small">\n                You can use the URL of a git repository.\n              </span>\n            </div>\n            <div class="form-group">\n              <label for="template_repository_url" class="col-sm-2 control-label text-left">Repository URL</label>\n              <div class="col-sm-10">\n                <input\n                  type="text"\n                  class="form-control"\n                  ng-model="$ctrl.formValues.RepositoryURL"\n                  id="template_repository_url"\n                  placeholder="https://github.com/portainer/portainer-compose"\n                />\n              </div>\n            </div>\n            <div class="form-group">\n              <span class="col-sm-12 text-muted small">\n                \n                <code>refs/heads/branch_name</code>  <code>refs/tags/tag_name</code>  <code>HEAD</code> \n                <code>master</code> \n              </span>\n            </div>\n            <div class="form-group">\n              <label for="template_repository_url" class="col-sm-2 control-label text-left">Repository reference</label>\n              <div class="col-sm-10">\n                <input\n                  type="text"\n                  class="form-control"\n                  ng-model="$ctrl.formValues.RepositoryReferenceName"\n                  id="template_repository_reference_name"\n                  placeholder="refs/heads/master"\n                />\n              </div>\n            </div>\n            <div class="form-group">\n              <span class="col-sm-12 text-muted small">\n                Indicate the path to the Compose file from the root of your repository.\n              </span>\n            </div>\n            <div class="form-group">\n              <label for="template_repository_path" class="col-sm-2 control-label text-left">Compose path</label>\n              <div class="col-sm-10">\n                <input type="text" class="form-control" ng-model="$ctrl.formValues.ComposeFilePathInRepository" id="template_repository_path" placeholder="docker-compose.yml" />\n              </div>\n            </div>\n            <div class="form-group">\n              <div class="col-sm-12">\n                <label class="control-label text-left">\n                  Authentication\n                </label>\n                <label class="switch" style="margin-left: 20px;"> <input type="checkbox" ng-model="$ctrl.formValues.RepositoryAuthentication" /><i></i> </label>\n              </div>\n            </div>\n            <div class="form-group" ng-if="$ctrl.formValues.RepositoryAuthentication">\n              <span class="col-sm-12 text-muted small">\n                If your git account has 2FA enabled, you may receive an\n                <code>authentication required</code> error when creating your template. In this case, you will need to provide a personal-access token instead of your password.\n              </span>\n            </div>\n            <div class="form-group" ng-if="$ctrl.formValues.RepositoryAuthentication">\n              <label for="repository_username" class="col-sm-1 control-label text-left"></label>\n              <div class="col-sm-11 col-md-5">\n                <input type="text" class="form-control" ng-model="$ctrl.formValues.RepositoryUsername" name="repository_username" placeholder="myGitUser" />\n              </div>\n              <label for="repository_password" class="col-sm-1 control-label text-left">\n                Password\n              </label>\n              <div class="col-sm-11 col-md-5">\n                <input type="password" class="form-control" ng-model="$ctrl.formValues.RepositoryPassword" name="repository_password" placeholder="myPassword" />\n              </div>\n            </div>\n          </div>\n          \x3c!-- !repository --\x3e\n          <por-access-control-form form-data="$ctrl.formValues.AccessControlData"></por-access-control-form>\n\n          \x3c!-- actions --\x3e\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button\n                type="button"\n                class="btn btn-primary btn-sm"\n                ng-disabled="$ctrl.state.actionInProgress || customTemplateForm.$invalid\n              || ($ctrl.state.Method === \'editor\' && !$ctrl.formValues.FileContent)\n              || ($ctrl.state.Method === \'upload\' && !$ctrl.formValues.File)\n              || ($ctrl.state.Method === \'repository\' && ((!$ctrl.formValues.RepositoryURL || !$ctrl.formValues.ComposeFilePathInRepository) || ($ctrl.formValues.RepositoryAuthentication && (!$ctrl.formValues.RepositoryUsername || !$ctrl.formValues.RepositoryPassword))))\n              || !$ctrl.formValues.Title"\n                ng-click="$ctrl.createCustomTemplate()"\n                button-spinner="$ctrl.state.actionInProgress"\n              >\n                <span ng-hide="$ctrl.state.actionInProgress">Create custom template</span>\n                <span ng-show="$ctrl.state.actionInProgress">Creation in progress...</span>\n              </button>\n              <span class="text-danger" ng-if="$ctrl.state.formValidationError" style="margin-left: 5px;">\n                {{ $ctrl.state.formValidationError }}\n              </span>\n            </div>\n          </div>\n          \x3c!-- !actions --\x3e\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(450),r=n(1700);angular.module("portainer.app").component("customTemplatesView",{templateUrl:r,controller:a.default})},function(e,t){var n="app/portainer/views/custom-templates/custom-templates-view/customTemplatesView.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header id="view-top">\n  <rd-header-title title-text="">\n    <a data-toggle="tooltip" title="" ui-sref="docker.templates.custom" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content></rd-header-content>\n</rd-header>\n<div class="row">\n  <stack-from-template-form\n    ng-if="$ctrl.state.selectedTemplate"\n    template="$ctrl.state.selectedTemplate"\n    form-values="$ctrl.formValues"\n    state="$ctrl.state"\n    create-template="$ctrl.createStack"\n    unselect-template="$ctrl.unselectTemplate"\n  >\n    <advanced-form>\n      <div class="form-group">\n        <div class="col-sm-12">\n          <a class="small interactive" ng-show="!$ctrl.state.showAdvancedOptions" ng-click="$ctrl.state.showAdvancedOptions = true;">\n            <i class="fa fa-plus space-right" aria-hidden="true"></i> Customize stack\n          </a>\n          <a class="small interactive" ng-show="$ctrl.state.showAdvancedOptions" ng-click="$ctrl.state.showAdvancedOptions = false;">\n            <i class="fa fa-minus space-right" aria-hidden="true"></i> Hide custom stack\n          </a>\n        </div>\n      </div>\n      <div ng-if="$ctrl.state.showAdvancedOptions">\n        \x3c!-- web-editor --\x3e\n        <div class="col-sm-12 form-section-title">\n          \n        </div>\n        <div class="form-group">\n          <span class="col-sm-12 text-muted small">\n            You can get more information about Compose file format in the\n            <a href="https://docs.docker.com/compose/compose-file/" target="_blank">\n              \n            </a>\n            .\n          </span>\n        </div>\n        <div class="form-group">\n          <div class="col-sm-12">\n            <code-editor\n              identifier="custom-template-creation-editor"\n              placeholder="# docker-compose"\n              yml="true"\n              value="$ctrl.formValues.fileContent"\n              on-change="($ctrl.editorUpdate)"\n            ></code-editor>\n          </div>\n        </div>\n        \x3c!-- !web-editor --\x3e\n      </div>\n    </advanced-form>\n  </stack-from-template-form>\n</div>\n<div class="row">\n  <div class="col-sm-12">\n    <custom-templates-list\n      ng-if="$ctrl.templates"\n      title-text=""\n      title-icon="fa-rocket"\n      templates="$ctrl.templates"\n      table-key="customTemplates"\n      is-edit-allowed="$ctrl.isEditAllowed"\n      on-select-click="($ctrl.selectTemplate)"\n      on-delete-click="($ctrl.confirmDelete)"\n    ></custom-templates-list>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(451),r=n(1702);angular.module("portainer.app").component("editCustomTemplateView",{templateUrl:r,controller:a.default})},function(e,t){var n="app/portainer/views/custom-templates/edit-custom-template-view/editCustomTemplateView.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<rd-header>\n  <rd-header-title title-text="Edit Custom Template">\n    <a data-toggle="tooltip" title="" ui-sref="docker.templates.custom.edit({id:$ctrl.formValues.Id})" ui-sref-opts="{reload: true}">\n      <i class="fa fa-sync" aria-hidden="true"></i>\n    </a>\n  </rd-header-title>\n  <rd-header-content> <a ui-sref="docker.templates.custom"></a> &gt; {{ $ctrl.formValues.Title }} </rd-header-content>\n</rd-header>\n\n<div class="row" ng-if="$ctrl.formValues">\n  <div class="col-sm-12">\n    <rd-widget>\n      <rd-widget-body>\n        <form class="form-horizontal" name="customTemplateForm">\n          <custom-template-common-fields form-values="$ctrl.formValues"></custom-template-common-fields>\n\n          \x3c!-- web-editor --\x3e\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          <div class="form-group">\n            <span class="col-sm-12 text-muted small">\n              You can get more information about Compose file format in the\n              <a href="https://docs.docker.com/compose/compose-file/" target="_blank">\n                \n              </a>\n              .\n            </span>\n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <code-editor\n                identifier="custom-template-creation-editor"\n                placeholder="# docker-compose"\n                yml="true"\n                value="$ctrl.formValues.FileContent"\n                on-change="($ctrl.editorUpdate)"\n              ></code-editor>\n            </div>\n          </div>\n          \x3c!-- !web-editor --\x3e\n\n          <por-access-control-form form-data="$ctrl.formValues.AccessControlData" resource-control="$ctrl.formValues.ResourceControl"></por-access-control-form>\n\n          <div class="col-sm-12 form-section-title">\n            \n          </div>\n          <div class="form-group">\n            <div class="col-sm-12">\n              <button\n                type="button"\n                class="btn btn-primary btn-sm"\n                ng-disabled="$ctrl.actionInProgress || customTemplateForm.$invalid\n                  || !$ctrl.formValues.Title\n                  || !$ctrl.formValues.FileContent"\n                ng-click="$ctrl.submitAction()"\n                button-spinner="$ctrl.actionInProgress"\n              >\n                <span ng-hide="$ctrl.actionInProgress">Update the template</span>\n                <span ng-show="$ctrl.actionInProgress">Update in progress...</span>\n              </button>\n              <span class="text-danger" ng-if="$ctrl.state.formValidationError" style="margin-left: 5px;">\n                {{ $ctrl.state.formValidationError }}\n              </span>\n            </div>\n          </div>\n        </form>\n      </rd-widget-body>\n    </rd-widget>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a);function i(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){i(s,a,r,o,l,"next",e)}function l(e){i(s,a,r,o,l,"throw",e)}o(void 0)}))}}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=function(){function e(t,n,a,r,i,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$state=t,this.$transition$=n,this.Notifications=a,this.EndpointService=r,this.GroupService=i,this.$async=s,this.updateAccess=this.updateAccess.bind(this),this.updateAccessAsync=this.updateAccessAsync.bind(this)}var t,n,a,r,i;return e.$inject=["$state","$transition$","Notifications","EndpointService","GroupService","$async"],t=e,(n=[{key:"$onInit",value:(i=s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state={actionInProgress:!1},e.prev=1,e.next=4,this.EndpointService.endpoint(this.$transition$.params().id);case 4:return this.endpoint=e.sent,e.next=7,this.GroupService.group(this.endpoint.GroupId);case 7:this.group=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),this.Notifications.error("",e.t0,"Unable to retrieve endpoint information");case 13:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(){return i.apply(this,arguments)})},{key:"updateAccess",value:function(){return this.$async(this.updateAccessAsync)}},{key:"updateAccessAsync",value:(r=s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state.actionInProgress=!0,e.next=4,this.EndpointService.updateEndpoint(this.$transition$.params().id,this.endpoint);case 4:this.Notifications.success("Access successfully updated"),this.$state.reload(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),this.state.actionInProgress=!1,this.Notifications.error("",e.t0,"Unable to update accesses");case 12:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return r.apply(this,arguments)})}])&&o(t.prototype,n),a&&o(t,a),e}();t.default=l,r.a.module("portainer.app").controller("EndpointAccessController",l)},function(e,t,n){"use strict";n.r(t),function(e){var t=n(14),a=n(238);function r(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function o(e){r(s,a,i,o,l,"next",e)}function l(e){r(s,a,i,o,l,"throw",e)}o(void 0)}))}}angular.module("portainer.app").controller("CreateEndpointController",["$async","$q","$scope","$state","$filter","clipboard","EndpointService","GroupService","TagService","SettingsService","Notifications","Authentication",function(n,r,s,o,l,c,d,u,p,m,g,f){function h(e){return v.apply(this,arguments)}function v(){return(v=i(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.createTag(t);case 3:n=e.sent,s.availableTags=s.availableTags.concat(n),s.formValues.TagIds=s.formValues.TagIds.concat(n.Id),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),g.error("",e.t0,"");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function b(e,n,a,r,i,l,c,u,p,m,f,h,v){s.state.actionInProgress=!0,d.createRemoteEndpoint(e,n,a,r,i,l,c,u,p,m,f,h,v).then((function(n){switch(g.success("Endpoint created",e),n.Type){case t.PortainerEndpointTypes.EdgeAgentOnDockerEnvironment:case t.PortainerEndpointTypes.EdgeAgentOnKubernetesEnvironment:o.go("portainer.endpoints.endpoint",{id:n.Id});break;case t.PortainerEndpointTypes.AgentOnKubernetesEnvironment:o.go("portainer.endpoints.endpoint.kubernetesConfig",{id:n.Id});break;default:o.go("portainer.endpoints",{},{reload:!0})}})).catch((function(e){g.error("",e,"Unable to create endpoint")})).finally((function(){s.state.actionInProgress=!1}))}s.state={EnvironmentType:"agent",PlatformType:"linux",actionInProgress:!1,deploymentTab:0,allowCreateTag:f.isAdmin(),availableEdgeAgentCheckinOptions:[{key:"",value:0},{key:"5 ",value:5},{key:"10 ",value:10},{key:"30 ",value:30},{key:"5 ",value:300},{key:"1 ",value:3600},{key:"1 ",value:86400}]},s.formValues={Name:"",URL:"",PublicURL:"",GroupId:1,SecurityFormData:new a.EndpointSecurityFormData,AzureApplicationId:"",AzureTenantId:"",AzureAuthenticationKey:"",TagIds:[],CheckinInterval:s.state.availableEdgeAgentCheckinOptions[0].value},s.copyAgentCommand=function(){2===s.state.deploymentTab&&"linux"===s.state.PlatformType?c.copyText("curl -L https://downloads.portainer.io/agent-stack.yml -o agent-stack.yml && docker stack deploy --compose-file=agent-stack.yml portainer-agent"):2===s.state.deploymentTab&&"windows"===s.state.PlatformType?c.copyText("curl -L https://downloads.portainer.io/agent-stack-windows.yml -o agent-stack.yml && docker stack deploy --compose-file=agent-stack-windows.yml portainer-agent"):1===s.state.deploymentTab?c.copyText("curl -L https://downloads.portainer.io/portainer-agent-k8s-nodeport.yaml -o portainer-agent-k8s.yaml; kubectl apply -f portainer-agent-k8s.yaml"):c.copyText("curl -L https://downloads.portainer.io/portainer-agent-k8s-lb.yaml -o portainer-agent-k8s.yaml; kubectl apply -f portainer-agent-k8s.yaml"),e("#copyNotification").show().fadeOut(2500)},s.setDefaultPortainerInstanceURL=function(){s.formValues.URL=window.location.origin},s.resetEndpointURL=function(){s.formValues.URL=""},s.onCreateTag=function(e){return n(h,e)},s.addDockerEndpoint=function(){if(s.formValues.ConnectSocket){var e=s.formValues.Name;s.state.actionInProgress=!0,d.createLocalEndpoint(e).then((function(){g.success("Endpoint created",e),o.go("portainer.endpoints",{},{reload:!0})})).catch((function(e){g.error("",e,"Unable to create endpoint")})).finally((function(){s.state.actionInProgress=!1}))}else{var n=s.formValues.Name,a=l("stripprotocol")(s.formValues.URL),r=""===s.formValues.PublicURL?a.split(":")[0]:s.formValues.PublicURL,i=s.formValues.GroupId,c=s.formValues.TagIds,u=s.formValues.SecurityFormData,p=u.TLS,m=u.TLSMode,f=p&&("tls_client_noca"===m||"tls_only"===m),h=p&&("tls_ca"===m||"tls_only"===m),v=f?null:u.TLSCACert,y=h?null:u.TLSCert,x=h?null:u.TLSKey;b(n,t.PortainerEndpointCreationTypes.LocalDockerEnvironment,a,r,i,c,p,f,h,v,y,x)}},s.addKubernetesEndpoint=function(){var e=s.formValues.Name;s.state.actionInProgress=!0,d.createLocalKubernetesEndpoint(e).then((function(t){g.success("Endpoint created",e),o.go("portainer.endpoints.endpoint.kubernetesConfig",{id:t.Id})})).catch((function(e){g.error("",e,"Unable to create endpoint")})).finally((function(){s.state.actionInProgress=!1}))},s.addAgentEndpoint=function(){var e=s.formValues.Name,n=s.formValues.URL,a=""===s.formValues.PublicURL?n.split(":")[0]:s.formValues.PublicURL,r=s.formValues.GroupId,i=s.formValues.TagIds;b(e,t.PortainerEndpointCreationTypes.AgentEnvironment,n,a,r,i,!0,!0,!0,null,null,null)},s.addEdgeAgentEndpoint=function(){var e=s.formValues.Name,n=s.formValues.GroupId,a=s.formValues.TagIds,r=s.formValues.URL;b(e,t.PortainerEndpointCreationTypes.EdgeAgentEnvironment,r,"",n,a,!1,!1,!1,null,null,null,s.formValues.CheckinInterval)},s.addAzureEndpoint=function(){!function(e,t,n,a,r,i){s.state.actionInProgress=!0,d.createAzureEndpoint(e,t,n,a,r,i).then((function(){g.success("Endpoint created",e),o.go("portainer.endpoints",{},{reload:!0})})).catch((function(e){g.error("",e,"Unable to create endpoint")})).finally((function(){s.state.actionInProgress=!1}))}(s.formValues.Name,s.formValues.AzureApplicationId,s.formValues.AzureTenantId,s.formValues.AzureAuthenticationKey,s.formValues.GroupId,s.formValues.TagIds)},r.all({groups:u.groups(),tags:p.tags(),settings:m.settings()}).then((function(e){s.groups=e.groups,s.availableTags=e.tags;var t=e.settings;s.state.availableEdgeAgentCheckinOptions[0].key+=" (".concat(t.EdgeAgentCheckinInterval," seconds)")})).catch((function(e){g.error("",e,"Unable to load groups")}))}])}.call(this,n(45))},function(e,t,n){"use strict";n.r(t),function(e){var t=n(36),a=n(141),r=n.n(a),i=n(14),s=n(238);function o(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){o(i,a,r,s,l,"next",e)}function l(e){o(i,a,r,s,l,"throw",e)}s(void 0)}))}}angular.module("portainer.app").controller("EndpointController",["$async","$q","$scope","$state","$transition$","$filter","clipboard","EndpointService","GroupService","TagService","EndpointProvider","Notifications","Authentication","SettingsService",function(n,a,o,c,d,u,p,m,g,f,h,v,b,y){function x(e){return w.apply(this,arguments)}function w(){return(w=l(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.createTag(t);case 3:n=e.sent,o.availableTags=o.availableTags.concat(n),o.endpoint.TagIds=o.endpoint.TagIds.concat(n.Id),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),v.error("Failue",e.t0,"");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function k(e,t){return"docker run -d \\\n  --mount type=npipe,src=\\\\.\\pipe\\docker_engine,dst=\\\\.\\pipe\\docker_engine \\\n  --mount type=bind,src=C:\\ProgramData\\docker\\volumes,dst=C:\\ProgramData\\docker\\volumes \\\n  --mount type=volume,src=portainer_agent_data,dst=C:\\data \\\n  --restart always \\\n  -e EDGE=1 \\\n  -e EDGE_ID=".concat(e," \\\n  -e EDGE_KEY=").concat(t," \\\n  -e CAP_HOST_MANAGEMENT=1 \\\n  --name portainer_edge_agent \\\n  portainer/agent")}function S(e,t){return"docker network create \\\n  --driver overlay \\\n  portainer_agent_network;\n\ndocker service create \\\n  --name portainer_edge_agent \\\n  --network portainer_agent_network \\\n  -e AGENT_CLUSTER_ADDR=tasks.portainer_edge_agent \\\n  -e EDGE=1 \\\n  -e EDGE_ID=".concat(e," \\\n  -e EDGE_KEY=").concat(t," \\\n  -e CAP_HOST_MANAGEMENT=1 \\\n  --mode global \\\n  --constraint 'node.platform.os == linux' \\\n  --mount type=bind,src=//var/run/docker.sock,dst=/var/run/docker.sock \\\n  --mount type=bind,src=//var/lib/docker/volumes,dst=/var/lib/docker/volumes \\\n  --mount type=bind,src=//,dst=/host \\\n  --mount type=volume,src=portainer_agent_data,dst=/data \\\n  portainer/agent")}function C(e,t){return"docker network create \\\n  --driver overlay \\\n  portainer_edge_agent_network && \\\ndocker service create \\\n  --name portainer_edge_agent \\\n  --network portainer_edge_agent_network \\\n  -e AGENT_CLUSTER_ADDR=tasks.portainer_edge_agent \\\n  -e EDGE=1 \\\n  -e EDGE_ID=".concat(e," \\\n  -e EDGE_KEY=").concat(t," \\\n  -e CAP_HOST_MANAGEMENT=1 \\\n  --mode global \\\n  --constraint node.platform.os==windows \\\n  --mount type=npipe,src=\\\\.\\pipe\\docker_engine,dst=\\\\.\\pipe\\docker_engine \\\n  --mount type=bind,src=C:\\ProgramData\\docker\\volumes,dst=C:\\ProgramData\\docker\\volumes \\\n  --mount type=volume,src=portainer_agent_data,dst=C:\\data \\\n  portainer/agent")}o.state={uploadInProgress:!1,actionInProgress:!1,deploymentTab:0,azureEndpoint:!1,kubernetesEndpoint:!1,agentEndpoint:!1,edgeEndpoint:!1,platformType:"linux",allowCreate:b.isAdmin(),availableEdgeAgentCheckinOptions:[{key:"",value:0},{key:"5 ",value:5},{key:"10 ",value:10},{key:"30 ",value:30},{key:"5 ",value:300},{key:"1 ",value:3600},{key:"1 ",value:86400}]},o.formValues={SecurityFormData:new s.EndpointSecurityFormData},o.copyEdgeAgentDeploymentCommand=function(){2===o.state.deploymentTab&&"linux"===o.state.platformType?p.copyText("docker run -d -v /var/run/docker.sock:/var/run/docker.sock -v /var/lib/docker/volumes:/var/lib/docker/volumes -v /:/host -v portainer_agent_data:/data --restart always -e EDGE=1 -e EDGE_ID="+o.randomEdgeID+" -e EDGE_KEY="+o.endpoint.EdgeKey+" -e CAP_HOST_MANAGEMENT=1 --name portainer_edge_agent portainer/agent"):2===o.state.deploymentTab&&"windows"===o.state.platformType?p.copyText("docker run -d --mount type=npipe,src=\\\\.\\pipe\\docker_engine,dst=\\\\.\\pipe\\docker_engine --mount type=bind,src=C:\\ProgramData\\docker\\volumes,dst=C:\\ProgramData\\docker\\volumes --mount type=volume,src=portainer_agent_data,dst=C:\\data -e EDGE=1 -e EDGE_ID="+o.randomEdgeID+" -e EDGE_KEY="+o.endpoint.EdgeKey+" -e CAP_HOST_MANAGEMENT=1 --name portainer_edge_agent portainer/agent"):1===o.state.deploymentTab&&"linux"===o.state.platformType?p.copyText("docker network create --driver overlay portainer_agent_network; docker service create --name portainer_edge_agent --network portainer_agent_network -e AGENT_CLUSTER_ADDR=tasks.portainer_edge_agent -e EDGE=1 -e EDGE_ID="+o.randomEdgeID+" -e EDGE_KEY="+o.endpoint.EdgeKey+" -e CAP_HOST_MANAGEMENT=1 --mode global --constraint 'node.platform.os == linux' --mount type=bind,src=//var/run/docker.sock,dst=/var/run/docker.sock --mount type=bind,src=//var/lib/docker/volumes,dst=/var/lib/docker/volumes --mount type=bind,src=//,dst=/host --mount type=volume,src=portainer_agent_data,dst=/data portainer/agent"):1===o.state.deploymentTab&&"windows"===o.state.platformType?p.copyText("docker network create --driver overlay portainer_edge_agent_network && docker service create --name portainer_edge_agent --network portainer_edge_agent_network -e AGENT_CLUSTER_ADDR=tasks.portainer_edge_agent -e EDGE=1 -e EDGE_ID="+o.randomEdgeID+" -e EDGE_KEY="+o.endpoint.EdgeKey+" -e CAP_HOST_MANAGEMENT=1 --mode global --constraint node.platform.os==windows --mount type=npipe,src=\\\\.\\pipe\\docker_engine,dst=\\\\.\\pipe\\docker_engine --mount type=bind,src=C:\\ProgramData\\docker\\volumes,dst=C:\\ProgramData\\docker\\volumes --mount type=volume,src=portainer_agent_data,dst=C:\\data portainer/agent"):p.copyText("curl https://downloads.portainer.io/portainer-edge-agent-setup.sh | bash -s -- "+o.randomEdgeID+" "+o.endpoint.EdgeKey),e("#copyNotificationDeploymentCommand").show().fadeOut(2500)},o.copyEdgeAgentKey=function(){p.copyText(o.endpoint.EdgeKey),e("#copyNotificationEdgeKey").show().fadeOut(2500)},o.onCreateTag=function(e){return n(x,e)},o.updateEndpoint=function(){var e=o.endpoint,t=o.formValues.SecurityFormData,n=t.TLS,a=t.TLSMode,r=n&&("tls_client_noca"===a||"tls_only"===a),s=n&&("tls_ca"===a||"tls_only"===a),l={Name:e.Name,PublicURL:e.PublicURL,GroupID:e.GroupId,TagIds:e.TagIds,EdgeCheckinInterval:e.EdgeCheckinInterval,TLS:n,TLSSkipVerify:r,TLSSkipClientVerify:s,TLSCACert:r||t.TLSCACert===e.TLSConfig.TLSCACert?null:t.TLSCACert,TLSCert:s||t.TLSCert===e.TLSConfig.TLSCert?null:t.TLSCert,TLSKey:s||t.TLSKey===e.TLSConfig.TLSKey?null:t.TLSKey,AzureApplicationID:e.AzureCredentials.ApplicationID,AzureTenantID:e.AzureCredentials.TenantID,AzureAuthenticationKey:e.AzureCredentials.AuthenticationKey};"local"!==o.endpointType&&e.Type!==i.PortainerEndpointTypes.AzureEnvironment&&e.Type!==i.PortainerEndpointTypes.KubernetesLocalEnvironment&&e.Type!==i.PortainerEndpointTypes.AgentOnKubernetesEnvironment&&(l.URL="tcp://"+e.URL),o.state.actionInProgress=!0,m.updateEndpoint(e.Id,l).then((function(){v.success("Endpoint updated",o.endpoint.Name),h.setEndpointPublicURL(e.PublicURL),c.go("portainer.endpoints",{},{reload:!0})}),(function(e){v.error("",e,"Unable to update endpoint"),o.state.actionInProgress=!1}),(function(e){e.upload&&(o.state.uploadInProgress=e.upload)}))},a.all({endpoint:m.endpoint(d.params().id),groups:g.groups(),tags:f.tags(),settings:y.settings()}).then((function(e){var n,a,s=e.endpoint;if(0===s.URL.indexOf("unix://")||0===s.URL.indexOf("npipe://")?o.endpointType="local":o.endpointType="remote",s.URL=u("stripprotocol")(s.URL),s.Type===i.PortainerEndpointTypes.EdgeAgentOnDockerEnvironment||s.Type===i.PortainerEndpointTypes.EdgeAgentOnKubernetesEnvironment){o.edgeKeyDetails=function(e){var n={};if(""===e)return n;var a=Object(t.a)(atob(e),"|");return n.instanceURL=a[0],n.tunnelServerAddr=a[1],n}(s.EdgeKey),o.randomEdgeID=r()(),o.dockerCommands={linuxStandalone:(n=o.randomEdgeID,a=s.EdgeKey,"docker run -d \\\n  -v /var/run/docker.sock:/var/run/docker.sock \\\n  -v /var/lib/docker/volumes:/var/lib/docker/volumes \\\n  -v /:/host \\\n  -v portainer_agent_data:/data \\\n  --restart always \\\n  -e EDGE=1 \\\n  -e EDGE_ID=".concat(n," \\\n  -e EDGE_KEY=").concat(a," \\\n  -e CAP_HOST_MANAGEMENT=1 \\\n  --name portainer_edge_agent \\localhost\n  portainer/agent")),windowsStandalone:k(o.randomEdgeID,s.EdgeKey),linuxSwarm:S(o.randomEdgeID,s.EdgeKey),windowsSwarm:C(o.randomEdgeID,s.EdgeKey)};var l=e.settings;o.state.availableEdgeAgentCheckinOptions[0].key+=" (".concat(l.EdgeAgentCheckinInterval," seconds)")}o.endpoint=s,o.groups=e.groups,o.availableTags=e.tags,o.endpoint.Type!==i.PortainerEndpointTypes.KubernetesLocalEnvironment&&o.endpoint.Type!==i.PortainerEndpointTypes.AgentOnKubernetesEnvironment&&o.endpoint.Type!==i.PortainerEndpointTypes.EdgeAgentOnKubernetesEnvironment||(o.state.kubernetesEndpoint=!0),o.endpoint.Type!==i.PortainerEndpointTypes.EdgeAgentOnDockerEnvironment&&o.endpoint.Type!==i.PortainerEndpointTypes.EdgeAgentOnKubernetesEnvironment||(o.state.edgeEndpoint=!0),o.endpoint.Type===i.PortainerEndpointTypes.AzureEnvironment&&(o.state.azureEndpoint=!0),o.endpoint.Type!==i.PortainerEndpointTypes.AgentOnDockerEnvironment&&o.endpoint.Type!==i.PortainerEndpointTypes.EdgeAgentOnDockerEnvironment&&o.endpoint.Type!==i.PortainerEndpointTypes.AgentOnKubernetesEnvironment&&o.endpoint.Type!==i.PortainerEndpointTypes.EdgeAgentOnKubernetesEnvironment||(o.state.agentEndpoint=!0)})).catch((function(e){v.error("",e,"Unable to retrieve endpoint details")}))}])}.call(this,n(45))},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a);function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function o(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){o(i,a,r,s,l,"next",e)}function l(e){o(i,a,r,s,l,"throw",e)}s(void 0)}))}}function c(e,t,n,a,r,s,o,c){function d(e){return u.apply(this,arguments)}function u(){return(u=l(regeneratorRuntime.mark((function e(t){var a,s,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=i(t),e.prev=1,a.s();case 3:if((s=a.n()).done){e.next=16;break}return o=s.value,e.prev=5,e.next=8,r.deleteEndpoint(o.Id);case 8:c.success("Endpoint successfully",o.Name),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),c.error("",e.t0," endpoint");case 14:e.next=3;break;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(1),a.e(e.t1);case 21:return e.prev=21,a.f(),e.finish(21);case 24:n.reload();case 25:case"end":return e.stop()}}),e,null,[[1,18,21,24],[5,11]])})))).apply(this,arguments)}t.removeAction=function(e){return a(d,e)},t.getPaginatedEndpoints=function(t,n,a){var i=e.defer();return e.all({endpoints:r.endpoints(t,n,{search:a}),groups:s.groups()}).then((function(e){var t=e.endpoints.value,n=e.groups;o.mapGroupNameToEndpoint(t,n),i.resolve({endpoints:t,totalCount:e.endpoints.totalCount})})).catch((function(e){c.error("",e,"Unable to retrieve endpoint information")})),i.promise}}c.$inject=["$q","$scope","$state","$async","EndpointService","GroupService","EndpointHelper","Notifications"],r.a.module("portainer.app").controller("EndpointsController",c)},function(e,t){angular.module("portainer.app").controller("GroupAccessController",["$scope","$state","$transition$","GroupService","Notifications",function(e,t,n,a,r){var i;e.updateAccess=function(){e.state.actionInProgress=!0,a.updateGroup(e.group,e.group.AssociatedEndpoints).then((function(){r.success("Access successfully updated"),t.reload()})).catch((function(t){e.state.actionInProgress=!1,r.error("",t,"Unable to update accesses")}))},i=n.params().id,e.state={actionInProgress:!1},a.group(i).then((function(t){e.group=t})).catch((function(e){r.error("",e,"Unable to load view")}))}])},function(e,t,n){"use strict";n.r(t);var a=n(175);function r(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function o(e){r(s,a,i,o,l,"next",e)}function l(e){r(s,a,i,o,l,"throw",e)}o(void 0)}))}}angular.module("portainer.app").controller("CreateGroupController",["$async","$scope","$state","GroupService","TagService","Notifications",function(e,t,n,r,s,o){function l(e){return c.apply(this,arguments)}function c(){return(c=i(regeneratorRuntime.mark((function e(n){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.createTag(n);case 3:a=e.sent,t.availableTags=t.availableTags.concat(a),t.model.TagIds=t.model.TagIds.concat(a.Id),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o.error("Failue",e.t0,"");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}t.state={actionInProgress:!1},t.create=function(){for(var e=t.model,a=[],i=0;i<t.associatedEndpoints.length;i++){var s=t.associatedEndpoints[i];a.push(s.Id)}t.state.actionInProgress=!0,r.createGroup(e,a).then((function(){o.success("Group successfully"),n.go("portainer.groups",{},{reload:!0})})).catch((function(e){o.error("",e,"Unable to create group")})).finally((function(){t.state.actionInProgress=!1}))},t.onCreateTag=function(t){return e(l,t)},s.tags().then((function(e){t.availableTags=e,t.associatedEndpoints=[],t.model=new a.EndpointGroupDefaultModel,t.loaded=!0})).catch((function(e){o.error("",e,"Unable to retrieve tags")}))}])},function(e,t){function n(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function a(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var s=e.apply(t,a);function o(e){n(s,r,i,o,l,"next",e)}function l(e){n(s,r,i,o,l,"throw",e)}o(void 0)}))}}angular.module("portainer.app").controller("GroupController",["$q","$async","$scope","$state","$transition$","GroupService","TagService","Notifications",function(e,t,n,r,i,s,o,l){function c(e){return d.apply(this,arguments)}function d(){return(d=a(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.createTag(t);case 3:a=e.sent,n.availableTags=n.availableTags.concat(a),n.group.TagIds=n.group.TagIds.concat(a.Id),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l.error("Failue",e.t0,"");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var u;n.state={actionInProgress:!1},n.update=function(){var e=n.group;n.state.actionInProgress=!0,s.updateGroup(e).then((function(){l.success("Group successfully updated"),r.go("portainer.groups",{},{reload:!0})})).catch((function(e){l.error("",e,"Unable to update group")})).finally((function(){n.state.actionInProgress=!1}))},n.onCreateTag=function(e){return t(c,e)},u=i.params().id,e.all({group:s.group(u),tags:o.tags()}).then((function(e){n.group=e.group,n.availableTags=e.tags,n.loaded=!0})).catch((function(e){l.error("",e,"Unable to load group details")}))}])},function(e,t,n){"use strict";n.r(t);var a=n(22),r=n(1),i=n.n(r);function s(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function l(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){l(i,a,r,s,o,"next",e)}function o(e){l(i,a,r,s,o,"throw",e)}s(void 0)}))}}function d(e,t,n,r,i){function o(e){return l.apply(this,arguments)}function l(){return(l=c(regeneratorRuntime.mark((function n(o){var l,c,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:l=s(o),n.prev=1,l.s();case 3:if((c=l.n()).done){n.next=17;break}return d=c.value,n.prev=5,n.next=8,r.deleteGroup(d.Id);case 8:i.success("Endpoint group successfully",d.Name),Object(a.a)(e.groups,d),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(5),i.error("",n.t0," group");case 15:n.next=3;break;case 17:n.next=22;break;case 19:n.prev=19,n.t1=n.catch(1),l.e(n.t1);case 22:return n.prev=22,l.f(),n.finish(22);case 25:t.reload();case 26:case"end":return n.stop()}}),n,null,[[1,19,22,25],[5,12]])})))).apply(this,arguments)}e.removeAction=function(e){return n(o,e)},r.groups().then((function(t){e.groups=t})).catch((function(t){i.error("",t,"Unable to retrieve endpoint groups"),e.groups=[]}))}d.$inject=["$scope","$state","$async","GroupService","Notifications"],i.a.module("portainer.app").controller("GroupsController",d)},function(e,t){function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function r(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function o(e){r(s,a,i,o,l,"next",e)}function l(e){r(s,a,i,o,l,"throw",e)}o(void 0)}))}}angular.module("portainer.app").controller("HomeController",["$q","$scope","$state","TagService","Authentication","EndpointService","EndpointHelper","GroupService","Notifications","EndpointProvider","StateManager","ModalService","MotdService",function(e,t,a,r,s,o,l,c,d,u,p,m,g){function f(t,n,a){var r=e.defer();return e.all({endpoints:o.endpoints(t,n,{search:a}),groups:c.groups()}).then((function(e){var t=e.endpoints.value,n=e.groups;l.mapGroupNameToEndpoint(t,n),u.setEndpoints(t),r.resolve({endpoints:t,totalCount:e.endpoints.totalCount})})).catch((function(e){d.error("",e,"Unable to retrieve endpoint information")})),r.promise}function h(){return(h=i(regeneratorRuntime.mark((function e(){var a,i,o,l,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isAdmin=s.isAdmin(),g.motd().then((function(e){t.motd=e})),e.prev=2,e.next=5,Promise.all([f(0,100),r.tags()]);case 5:a=e.sent,i=n(a,2),o=i[0],l=o.totalCount,c=o.endpoints,u=i[1],t.tags=u,t.totalCount=l,t.endpoints=l>100?[]:c,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),d.error("Failed loading page data",e.t0);case 19:case"end":return e.stop()}}),e,null,[[2,16]])})))).apply(this,arguments)}t.state={connectingToEdgeEndpoint:!1},t.goToEdit=function(e){a.go("portainer.endpoints.endpoint",{id:e})},t.goToDashboard=function(e){if(3!==e.Type){if(4===e.Type||7===e.Type){if(!e.EdgeID)return void a.go("portainer.endpoints.endpoint",{id:e.Id});t.state.connectingToEdgeEndpoint=!0}5!==e.Type&&6!==e.Type&&7!==e.Type?a.go("docker.dashboard",{endpointId:e.Id}):a.go("kubernetes.dashboard",{endpointId:e.Id})}else a.go("azure.dashboard",{endpointId:e.Id})},t.dismissImportantInformation=function(e){p.dismissImportantInformation(e)},t.dismissInformationPanel=function(e){p.dismissInformationPanel(e)},t.triggerSnapshot=function(){m.confirmEndpointSnapshot((function(e){e&&o.snapshotEndpoints().then((function(){d.success("Success","Endpoints updated"),a.reload()})).catch((function(e){d.error("",e,"An error occured during endpoint snapshot")}))}))},t.getPaginatedEndpoints=f,function(){h.apply(this,arguments)}()}])},function(e,t){angular.module("portainer.app").controller("InitAdminController",["$async","$scope","$state","Notifications","Authentication","StateManager","SettingsService","UserService","EndpointService",function(e,t,n,a,r,i,s,o,l){t.logo=i.getState().application.logo,t.formValues={Username:"admin",Password:"",ConfirmPassword:"",enableTelemetry:!0},t.state={actionInProgress:!1},t.createAdminUser=function(){var e=t.formValues.Username,c=t.formValues.Password;t.state.actionInProgress=!0,o.initAdministrator(e,c).then((function(){return r.login(e,c)})).then((function(){return s.update({enableTelemetry:t.formValues.enableTelemetry})})).then((function(){return i.initialize()})).then((function(){return l.endpoints(0,100)})).then((function(e){0===e.value.length?n.go("portainer.init.endpoint"):n.go("portainer.home")})).catch((function(e){a.error("",e,"Unable to create administrator user")})).finally((function(){t.state.actionInProgress=!1}))},o.administratorExists().then((function(e){e&&n.go("portainer.home")})).catch((function(e){a.error("",e,"Unable to verify administrator account existence")}))}])},function(e,t,n){"use strict";n.r(t);var a=n(53),r=n(1),i=n.n(r),s=n(329),o=n(14);function l(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){l(i,a,r,s,o,"next",e)}function o(e){l(i,a,r,s,o,"throw",e)}s(void 0)}))}}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n(1714),n(1715),n(1716);var u=function(){function e(t,n,a,r,i,s,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.$scope=n,this.$state=a,this.EndpointService=r,this.EndpointProvider=i,this.StateManager=s,this.Notifications=o,this.createLocalEndpointAsync=this.createLocalEndpointAsync.bind(this),this.createLocalKubernetesEndpointAsync=this.createLocalKubernetesEndpointAsync.bind(this),this.createAgentEndpointAsync=this.createAgentEndpointAsync.bind(this)}var t,n,r,i,l,u;return e.$inject=["$async","$scope","$state","EndpointService","EndpointProvider","StateManager","Notifications"],t=e,(n=[{key:"$onInit",value:function(){Object(a.a)(this.$scope.applicationState.endpoint)||this.$state.go("portainer.home"),this.logo=this.StateManager.getState().application.logo,this.state={uploadInProgress:!1,actionInProgress:!1},this.formValues=new s.PortainerEndpointInitFormValues,this.endpointSections=s.PortainerEndpointInitFormValueEndpointSections,this.PortainerEndpointConnectionTypes=o.PortainerEndpointConnectionTypes}},{key:"isConnectButtonDisabled",value:function(){switch(this.formValues.ConnectionType){case o.PortainerEndpointConnectionTypes.DOCKER_LOCAL:case o.PortainerEndpointConnectionTypes.KUBERNETES_LOCAL:return this.state.actionInProgress;case o.PortainerEndpointConnectionTypes.AGENT:return this.state.actionInProgress||!this.formValues.Name||!this.formValues.URL}}},{key:"createEndpoint",value:function(){switch(this.formValues.ConnectionType){case o.PortainerEndpointConnectionTypes.DOCKER_LOCAL:return this.createLocalEndpoint();case o.PortainerEndpointConnectionTypes.KUBERNETES_LOCAL:return this.createLocalKubernetesEndpoint();case o.PortainerEndpointConnectionTypes.AGENT:return this.createAgentEndpoint();default:this.Notifications.error("","Unable to determine which action to do to create endpoint")}}},{key:"skipEndpointCreation",value:function(){this.$state.go("portainer.home")}},{key:"createLocalEndpointAsync",value:(u=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state.actionInProgress=!0,e.next=4,this.EndpointService.createLocalEndpoint();case 4:this.$state.go("portainer.home"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to connect to the Docker environment");case 10:return e.prev=10,this.state.actionInProgress=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[0,7,10,13]])}))),function(){return u.apply(this,arguments)})},{key:"createLocalEndpoint",value:function(){return this.$async(this.createLocalEndpointAsync)}},{key:"createLocalKubernetesEndpointAsync",value:(l=c(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state.actionInProgress=!0,e.next=4,this.EndpointService.createLocalKubernetesEndpoint();case 4:t=e.sent,this.$state.go("portainer.endpoints.endpoint.kubernetesConfig",{id:t.Id}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to connect to the Kubernetes environment");case 11:return e.prev=11,this.state.actionInProgress=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[0,8,11,14]])}))),function(){return l.apply(this,arguments)})},{key:"createLocalKubernetesEndpoint",value:function(){return this.$async(this.createLocalKubernetesEndpointAsync)}},{key:"createAgentEndpointAsync",value:(i=c(regeneratorRuntime.mark((function e(){var t,n,a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.state.actionInProgress=!0,t=this.formValues.Name,n=this.formValues.URL,a=n.split(":")[0],e.next=7,this.EndpointService.createRemoteEndpoint(t,o.PortainerEndpointCreationTypes.AgentEnvironment,n,a,1,[],!0,!0,!0,null,null,null);case 7:r=e.sent,i=r.Type===o.PortainerEndpointTypes.AgentOnKubernetesEnvironment?"portainer.endpoints.endpoint.kubernetesConfig":"portainer.home",this.$state.go(i,{id:r.Id}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),this.Notifications.error("",e.t0,"Unable to connect to the Docker environment");case 15:return e.prev=15,this.state.actionInProgress=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[0,12,15,18]])}))),function(){return i.apply(this,arguments)})},{key:"createAgentEndpoint",value:function(){return this.$async(this.createAgentEndpointAsync)}}])&&d(t.prototype,n),r&&d(t,r),e}();t.default=u,i.a.module("portainer.app").controller("InitEndpointController",u)},function(e,t){var n="app/portainer/views/init/endpoint/includes/localDocker.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="col-sm-12 form-section-title">\n  Information\n</div>\n<div class="form-group">\n  <div class="col-sm-12">\n    <span class="small">\n      <p class="text-primary">\n        PortainerDocker\n      </p>\n      <p class="text-muted">\n        <i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i>\n        DockerPortainer\n      </p>\n      <p class="text-muted"> <code>-v "/var/run/docker.sock:/var/run/docker.sock"</code> (Linux). </p>\n      <p class="text-muted">\n        or\n      </p>\n      <p class="text-muted"> <code>-v \\\\.\\pipe\\docker_engine:\\\\.\\pipe\\docker_engine</code> (Windows). </p>\n    </span>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/portainer/views/init/endpoint/includes/localKubernetes.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="col-sm-12 form-section-title">\n  Information\n</div>\n<div class="form-group">\n  <div class="col-sm-12">\n    <span class="small">\n      <p class="text-primary">\n        PortainerKubernetes\n      </p>\n    </span>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="app/portainer/views/init/endpoint/includes/agent.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="col-sm-12 form-section-title">\n  Information\n</div>\n<div class="form-group">\n  <div class="col-sm-12">\n    <span class="small">\n      <p class="text-primary">\n        DockerKubernetesPortainer\n      </p>\n    </span>\n  </div>\n</div>\n<div class="col-sm-12 form-section-title">\n  Environment\n</div>\n\x3c!-- name-input --\x3e\n<div class="form-group">\n  <label for="endpoint_name" class="col-sm-4 col-lg-3 control-label text-left"></label>\n  <div class="col-sm-8 col-lg-9">\n    <input type="text" class="form-control" id="endpoint_name" ng-model="ctrl.formValues.Name" placeholder=" prod-cluster-01" />\n  </div>\n</div>\n\x3c!-- !name-input --\x3e\n\x3c!-- endpoint-url-input --\x3e\n<div class="form-group">\n  <label for="endpoint_url" class="col-sm-4 col-lg-3 control-label text-left">\n     URL\n    <portainer-tooltip position="bottom" message="PortainerURLIP"> </portainer-tooltip>\n  </label>\n  <div class="col-sm-8 col-lg-9">\n    <input type="text" class="form-control" id="endpoint_url" ng-model="ctrl.formValues.URL" placeholder=" 10.0.0.10:9001" />\n  </div>\n</div>\n\x3c!-- !endpoint-url-input --\x3e\n')}]),e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a);function i(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){i(s,a,r,o,l,"next",e)}function l(e){i(s,a,r,o,l,"throw",e)}o(void 0)}))}}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=function(){function e(t,n,a,r,i,s,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$async=t,this.$state=n,this.$transition$=a,this.Authentication=r,this.StateManager=i,this.Notifications=s,this.LocalStorage=o,this.logo=this.StateManager.getState().application.logo,this.logoutAsync=this.logoutAsync.bind(this),this.onInit=this.onInit.bind(this)}var t,n,a,r,i;return e.$inject=["$async","$state","$transition$","Authentication","StateManager","Notifications","LocalStorage"],t=e,(n=[{key:"logoutAsync",value:(i=s(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$transition$.params().error,n=this.$transition$.params().performApiLogout,e.prev=2,e.next=5,this.Authentication.logout(n);case 5:return e.prev=5,this.LocalStorage.storeLogoutReason(t),this.$state.go("portainer.auth",{reload:!0}),e.finish(5);case 9:case"end":return e.stop()}}),e,this,[[2,,5,9]])}))),function(){return i.apply(this,arguments)})},{key:"logout",value:function(){return this.$async(this.logoutAsync)}},{key:"onInit",value:(r=s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.logout();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),this.Notifications.error("",e.t0,"An error occured during logout");case 8:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(){return r.apply(this,arguments)})},{key:"$onInit",value:function(){return this.$async(this.onInit)}}])&&o(t.prototype,n),a&&o(t,a),e}();t.default=l,r.a.module("portainer.app").controller("LogoutController",l)},function(e,t){angular.module("portainer.app").controller("MainController",["$scope","LocalStorage","StateManager","EndpointProvider",function(e,t,n,a){e.getWidth=function(){return window.innerWidth},e.applicationState=n.getState(),e.endpointState=a.endpoint(),e.$watch(e.getWidth,(function(n){if(n>=992){var a=t.getToolbarToggle();e.toggle="boolean"!=typeof a||a}else e.toggle=!1})),e.toggleSidebar=function(){e.toggle=!e.toggle,t.storeToolbarToggle(e.toggle)},window.onresize=function(){e.$apply()}}])},function(e,t){angular.module("portainer.app").controller("RegistryAccessController",["$scope","$state","$transition$","RegistryService","Notifications",function(e,t,n,a,r){e.updateAccess=function(){e.state.actionInProgress=!0,a.updateRegistry(e.registry).then((function(){r.success("Access successfully updated"),t.reload()})).catch((function(t){e.state.actionInProgress=!1,r.error("",t,"Unable to update accesses")}))},e.state={actionInProgress:!1},a.registry(n.params().id).then((function(t){e.registry=t})).catch((function(e){r.error("",e,"Unable to retrieve registry details")}))}])},function(e,t,n){"use strict";n.r(t);var a=n(65),r=n(149);angular.module("portainer.app").controller("CreateRegistryController",["$scope","$state","RegistryService","Notifications","RegistryGitlabService",function(e,t,n,i,s){function o(){e.model.URL="https://registry.gitlab.com",e.model.Gitlab.InstanceURL="https://gitlab.com"}e.selectQuayRegistry=function(){e.model.Name="Quay",e.model.URL="quay.io",e.model.Authentication=!0},e.selectAzureRegistry=function(){e.model.Name="",e.model.URL="",e.model.Authentication=!0},e.selectCustomRegistry=function(){e.model.Name="",e.model.URL="",e.model.Authentication=!1},e.selectGitlabRegistry=function(){e.model.Name="",e.model.Authentication=!0,e.model.Gitlab={},o()},e.create=function(){e.state.actionInProgress=!0,n.createRegistry(e.model).then((function(){i.success("Registry successfully"),t.go("portainer.registries")})).catch((function(e){i.error("",e,"Unable to create registry")})).finally((function(){e.state.actionInProgress=!1}))},e.useDefaultGitlabConfiguration=o,e.retrieveGitlabRegistries=function(){e.state.actionInProgress=!0,s.projects(e.model.Gitlab.InstanceURL,e.model.Token).then((function(t){e.gitlabProjects=t})).catch((function(e){i.error("",e,"Unable to retrieve projects")})).finally((function(){e.state.actionInProgress=!1}))},e.createGitlabRegistries=function(){e.state.actionInProgress=!0,n.createGitlabRegistries(e.model,e.state.gitlab.selectedItems).then((function(){i.success("Registries successfully"),t.go("portainer.registries")})).catch((function(e){i.error("",e,"Unable to create registries")})).finally((function(){e.state.actionInProgress=!1}))},e.state={actionInProgress:!1,overrideConfiguration:!1,gitlab:{get selectedItemCount(){return this.selectedItems.length||0},selectedItems:[]}},e.RegistryTypes=a.RegistryTypes,e.model=new r.RegistryDefaultModel}])},function(e,t){angular.module("portainer.app").controller("RegistryController",["$scope","$state","$transition$","$filter","RegistryService","Notifications",function(e,t,n,a,r,i){var s;e.state={actionInProgress:!1},e.formValues={Password:""},e.updateRegistry=function(){var n=e.registry;n.Password=e.formValues.Password,e.state.actionInProgress=!0,r.updateRegistry(n).then((function(){i.success("Registry successfully updated"),t.go("portainer.registries")})).catch((function(e){i.error("",e,"Unable to update registry")})).finally((function(){e.state.actionInProgress=!1}))},s=n.params().id,r.registry(s).then((function(t){e.registry=t})).catch((function(e){i.error("",e,"Unable to retrieve registry details")}))}])},function(e,t,n){"use strict";n.r(t);var a=n(10);angular.module("portainer.app").controller("RegistriesController",["$q","$scope","$state","RegistryService","DockerHubService","ModalService","Notifications","Authentication",function(e,t,n,r,i,s,o,l){t.state={actionInProgress:!1},t.formValues={dockerHubPassword:""};var c=["quay.io"];t.canBrowse=function(e){return!Object(a.a)(c,e.URL)},t.updateDockerHub=function(){var e=t.dockerhub;e.Password=t.formValues.dockerHubPassword,t.state.actionInProgress=!0,i.update(e).then((function(){o.success("DockerHub registry updated")})).catch((function(e){o.error("",e,"Unable to update DockerHub details")})).finally((function(){t.state.actionInProgress=!1}))},t.removeAction=function(e){s.confirmDeletion("Do you want to remove the selected registries?",(function(a){a&&function(e){var a=e.length;angular.forEach(e,(function(e){r.deleteRegistry(e.Id).then((function(){o.success("Registry successfully",e.Name);var n=t.registries.indexOf(e);t.registries.splice(n,1)})).catch((function(e){o.error("",e," registry")})).finally((function(){0===--a&&n.reload()}))}))}(e)}))},e.all({registries:r.registries(),dockerhub:i.dockerhub()}).then((function(e){t.registries=e.registries,t.dockerhub=e.dockerhub,t.isAdmin=l.isAdmin()})).catch((function(e){t.registries=[],o.error("",e,"Unable to retrieve registries")}))}])},function(e,t){angular.module("portainer.app").controller("SettingsAuthenticationController",["$q","$scope","$state","Notifications","SettingsService","FileUploadService","TeamService",function(e,t,n,a,r,i,s){function o(e,t){-1===e.LDAPSettings.URL.indexOf(":")&&(e.LDAPSettings.URL+=t?":636":":389")}t.state={successfulConnectivityCheck:!1,failedConnectivityCheck:!1,uploadInProgress:!1,connectivityCheckInProgress:!1,actionInProgress:!1,availableUserSessionTimeoutOptions:[{key:"1 hour",value:"1h"},{key:"4 hours",value:"4h"},{key:"8 hours",value:"8h"},{key:"24 hours",value:"24h"},{key:"1 week",value:"".concat(168,"h")},{key:"1 month",value:"".concat(720,"h")},{key:"6 months",value:"".concat(4320,"h")},{key:"1 year",value:"".concat(8640,"h")}]},t.formValues={UserSessionTimeout:t.state.availableUserSessionTimeoutOptions[0],TLSCACert:"",LDAPSettings:{AnonymousMode:!0,ReaderDN:"",URL:"",TLSConfig:{TLS:!1,TLSSkipVerify:!1},StartTLS:!1,SearchSettings:[{BaseDN:"",Filter:"",UserNameAttribute:""}],GroupSearchSettings:[{GroupBaseDN:"",GroupFilter:"",GroupAttribute:""}],AutoCreateUsers:!0}},t.isOauthEnabled=function(){return t.settings&&3===t.settings.AuthenticationMethod},t.addSearchConfiguration=function(){t.formValues.LDAPSettings.SearchSettings.push({BaseDN:"",UserNameAttribute:"",Filter:""})},t.removeSearchConfiguration=function(e){t.formValues.LDAPSettings.SearchSettings.splice(e,1)},t.addGroupSearchConfiguration=function(){t.formValues.LDAPSettings.GroupSearchSettings.push({GroupBaseDN:"",GroupAttribute:"",GroupFilter:""})},t.removeGroupSearchConfiguration=function(e){t.formValues.LDAPSettings.GroupSearchSettings.splice(e,1)},t.LDAPConnectivityCheck=function(){var n=angular.copy(t.settings),s=t.formValues.TLSCACert!==n.LDAPSettings.TLSConfig.TLSCACert?t.formValues.TLSCACert:null;t.formValues.LDAPSettings.AnonymousMode&&(n.LDAPSettings.ReaderDN="",n.LDAPSettings.Password="");var l=(t.formValues.LDAPSettings.TLSConfig.TLS||t.formValues.LDAPSettings.StartTLS)&&!t.formValues.LDAPSettings.TLSConfig.TLSSkipVerify;t.state.uploadInProgress=l,t.state.connectivityCheckInProgress=!0,e.when(!l||i.uploadLDAPTLSFiles(s,null,null)).then((function(){return o(n,t.formValues.LDAPSettings.TLSConfig.TLS),r.checkLDAPConnectivity(n)})).then((function(){t.state.failedConnectivityCheck=!1,t.state.successfulConnectivityCheck=!0,a.success("Connection to LDAP successful")})).catch((function(e){t.state.failedConnectivityCheck=!0,t.state.successfulConnectivityCheck=!1,a.error("",e,"Connection to LDAP failed")})).finally((function(){t.state.uploadInProgress=!1,t.state.connectivityCheckInProgress=!1}))},t.saveSettings=function(){var n=angular.copy(t.settings),s=t.formValues.TLSCACert!==n.LDAPSettings.TLSConfig.TLSCACert?t.formValues.TLSCACert:null;t.formValues.LDAPSettings.AnonymousMode&&(n.LDAPSettings.ReaderDN="",n.LDAPSettings.Password="");var l=(t.formValues.LDAPSettings.TLSConfig.TLS||t.formValues.LDAPSettings.StartTLS)&&!t.formValues.LDAPSettings.TLSConfig.TLSSkipVerify;t.state.uploadInProgress=l,t.state.actionInProgress=!0,e.when(!l||i.uploadLDAPTLSFiles(s,null,null)).then((function(){return o(n,t.formValues.LDAPSettings.TLSConfig.TLS),r.update(n)})).then((function(){a.success("Authentication settings updated")})).catch((function(e){a.error("",e,"Unable to update authentication settings")})).finally((function(){t.state.uploadInProgress=!1,t.state.actionInProgress=!1}))},e.all({settings:r.settings(),teams:s.teams()}).then((function(e){var n=e.settings;t.teams=e.teams,t.settings=n,t.formValues.LDAPSettings=n.LDAPSettings,t.OAuthSettings=n.OAuthSettings,t.formValues.TLSCACert=n.LDAPSettings.TLSConfig.TLSCACert})).catch((function(e){a.error("",e,"Unable to retrieve application settings")}))}])},function(e,t){angular.module("portainer.app").controller("SettingsController",["$scope","$state","Notifications","SettingsService","StateManager",function(e,t,n,a,r){function i(i){a.update(i).then((function(){n.success("Settings updated"),r.updateLogo(i.LogoURL),r.updateSnapshotInterval(i.SnapshotInterval),r.updateEnableHostManagementFeatures(i.EnableHostManagementFeatures),r.updateEnableVolumeBrowserForNonAdminUsers(i.AllowVolumeBrowserForRegularUsers),r.updateAllowHostNamespaceForRegularUsers(i.AllowHostNamespaceForRegularUsers),r.updateEnableEdgeComputeFeatures(i.EnableEdgeComputeFeatures),r.updateAllowDeviceMappingForRegularUsers(i.AllowDeviceMappingForRegularUsers),r.updateAllowStackManagementForRegularUsers(i.AllowStackManagementForRegularUsers),r.updateAllowContainerCapabilitiesForRegularUsers(i.AllowContainerCapabilitiesForRegularUsers),r.updateAllowPrivilegedModeForRegularUsers(i.AllowPrivilegedModeForRegularUsers),r.updateAllowBindMountsForRegularUsers(i.AllowBindMountsForRegularUsers),r.updateEnableTelemetry(i.EnableTelemetry),t.reload()})).catch((function(e){n.error("",e,"Unable to update settings")})).finally((function(){e.state.actionInProgress=!1}))}e.state={actionInProgress:!1,availableEdgeAgentCheckinOptions:[{key:"5 ",value:5},{key:"10 ",value:10},{key:"30 ",value:30}]},e.formValues={customLogo:!1,restrictBindMounts:!1,restrictPrivilegedMode:!1,labelName:"",labelValue:"",enableHostManagementFeatures:!1,enableVolumeBrowser:!1,enableEdgeComputeFeatures:!1,restrictHostNamespaceForRegularUsers:!1,allowDeviceMappingForRegularUsers:!1,allowStackManagementForRegularUsers:!1,disableContainerCapabilitiesForRegularUsers:!1,enableTelemetry:!1},e.isContainerEditDisabled=function(){var e=this.formValues,t=e.restrictBindMounts,n=e.restrictHostNamespaceForRegularUsers,a=e.restrictPrivilegedMode,r=e.disableDeviceMappingForRegularUsers,i=e.disableContainerCapabilitiesForRegularUsers;return t||n||a||r||i},e.removeFilteredContainerLabel=function(t){var n=e.settings;n.BlackListedLabels.splice(t,1),i(n)},e.addFilteredContainerLabel=function(){var t=e.settings,n={name:e.formValues.labelName,value:e.formValues.labelValue};t.BlackListedLabels.push(n),i(t)},e.saveApplicationSettings=function(){var t=e.settings;e.formValues.customLogo||(t.LogoURL=""),t.AllowBindMountsForRegularUsers=!e.formValues.restrictBindMounts,t.AllowPrivilegedModeForRegularUsers=!e.formValues.restrictPrivilegedMode,t.AllowVolumeBrowserForRegularUsers=e.formValues.enableVolumeBrowser,t.EnableHostManagementFeatures=e.formValues.enableHostManagementFeatures,t.EnableEdgeComputeFeatures=e.formValues.enableEdgeComputeFeatures,t.AllowHostNamespaceForRegularUsers=!e.formValues.restrictHostNamespaceForRegularUsers,t.AllowDeviceMappingForRegularUsers=!e.formValues.disableDeviceMappingForRegularUsers,t.AllowStackManagementForRegularUsers=!e.formValues.disableStackManagementForRegularUsers,t.AllowContainerCapabilitiesForRegularUsers=!e.formValues.disableContainerCapabilitiesForRegularUsers,t.EnableTelemetry=e.formValues.enableTelemetry,e.state.actionInProgress=!0,i(t)},a.settings().then((function(t){var n=t;e.settings=n,""!==n.LogoURL&&(e.formValues.customLogo=!0),e.formValues.restrictBindMounts=!n.AllowBindMountsForRegularUsers,e.formValues.restrictPrivilegedMode=!n.AllowPrivilegedModeForRegularUsers,e.formValues.enableVolumeBrowser=n.AllowVolumeBrowserForRegularUsers,e.formValues.enableHostManagementFeatures=n.EnableHostManagementFeatures,e.formValues.enableEdgeComputeFeatures=n.EnableEdgeComputeFeatures,e.formValues.restrictHostNamespaceForRegularUsers=!n.AllowHostNamespaceForRegularUsers,e.formValues.disableDeviceMappingForRegularUsers=!n.AllowDeviceMappingForRegularUsers,e.formValues.disableStackManagementForRegularUsers=!n.AllowStackManagementForRegularUsers,e.formValues.disableContainerCapabilitiesForRegularUsers=!n.AllowContainerCapabilitiesForRegularUsers,e.formValues.enableTelemetry=n.EnableTelemetry})).catch((function(e){n.error("",e,"Unable to retrieve application settings")}))}])},function(e,t){function n(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function a(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var s=e.apply(t,a);function o(e){n(s,r,i,o,l,"next",e)}function l(e){n(s,r,i,o,l,"throw",e)}o(void 0)}))}}angular.module("portainer.app").controller("SidebarController",["$rootScope","$q","$scope","$transitions","StateManager","Notifications","Authentication","UserService","EndpointProvider",function(e,t,n,r,i,s,o,l,c){function d(e){var t=!1;angular.forEach(e,(function(e){1===e.Role&&(t=!0)})),n.isTeamLeader=t}function u(){return(u=a(regeneratorRuntime.mark((function e(){var a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.uiVersion=i.getState().application.version,n.logo=i.getState().application.logo,e.next=4,p();case 4:n.showStacks=e.sent,a=o.getUserDetails(),u=o.isAdmin(),n.isAdmin=u,n.endpointId=c.endpointID(),t.when(u?[]:l.userMemberships(a.ID)).then((function(e){d(e)})).catch((function(e){s.error("",e,"Unable to retrieve user memberships")})),r.onEnter({},(function(){n.endpointId=c.endpointID()}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return m.apply(this,arguments)}function m(){return(m=a(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.isAdmin(),a=n.applicationState.application.allowStackManagementForRegularUsers,e.abrupt("return",t||a);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){u.apply(this,arguments)}(),r.onEnter({},a(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:n.showStacks=t.sent,n.applicationState.endpoint.name&&(document.title="".concat(e.defaultTitle," | ").concat(n.applicationState.endpoint.name));case 4:case"end":return t.stop()}}),t)}))))}])},function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(1),i=n.n(r),s=n(41);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){d(i,a,r,s,o,"next",e)}function o(e){d(i,a,r,s,o,"throw",e)}s(void 0)}))}}i.a.module("portainer.app").controller("CreateStackController",["$scope","$state","StackService","Authentication","Notifications","FormValidator","ResourceControlService","FormHelper","CustomTemplateService",function(e,t,n,r,i,o,c,d,p){function m(a,r){var i=d.removeInvalidEnvVars(e.formValues.Env),s=+t.params.endpointId;if("template"===r||"editor"===r){var o=e.formValues.StackFileContent;return n.createSwarmStackFromFileContent(a,o,i,s)}if("upload"===r){var l=e.formValues.StackFile;return n.createSwarmStackFromFileUpload(a,l,i,s)}if("repository"===r){var c={RepositoryURL:e.formValues.RepositoryURL,RepositoryReferenceName:e.formValues.RepositoryReferenceName,ComposeFilePathInRepository:e.formValues.ComposeFilePathInRepository,RepositoryAuthentication:e.formValues.RepositoryAuthentication,RepositoryUsername:e.formValues.RepositoryUsername,RepositoryPassword:e.formValues.RepositoryPassword};return n.createSwarmStackFromGitRepository(a,c,i,s)}}function g(a,r){var i=d.removeInvalidEnvVars(e.formValues.Env),s=+t.params.endpointId;if("editor"===r||"template"===r){var o=e.formValues.StackFileContent;return n.createComposeStackFromFileContent(a,o,i,s)}if("upload"===r){var l=e.formValues.StackFile;return n.createComposeStackFromFileUpload(a,l,i,s)}if("repository"===r){var c={RepositoryURL:e.formValues.RepositoryURL,RepositoryReferenceName:e.formValues.RepositoryReferenceName,ComposeFilePathInRepository:e.formValues.ComposeFilePathInRepository,RepositoryAuthentication:e.formValues.RepositoryAuthentication,RepositoryUsername:e.formValues.RepositoryUsername,RepositoryPassword:e.formValues.RepositoryPassword};return n.createComposeStackFromGitRepository(a,c,i,s)}}function f(){return(f=u(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.applicationState.endpoint.mode,e.state.StackType=2,"DOCKER_SWARM_MODE"===n.provider&&"MANAGER"===n.role&&(e.state.StackType=1),t.prev=3,t.next=6,p.customTemplates(e.state.StackType);case 6:r=t.sent,e.templates=Object(a.a)(r,(function(e){return l(l({},e),{},{label:"".concat(e.Title," - ").concat(e.Description)})})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),i.error("",t.t0,"");case 13:case"end":return t.stop()}}),t,null,[[3,10]])})))).apply(this,arguments)}e.formValues={Name:"",StackFileContent:"",StackFile:null,RepositoryURL:"",RepositoryReferenceName:"",RepositoryAuthentication:!1,RepositoryUsername:"",RepositoryPassword:"",Env:[],ComposeFilePathInRepository:"docker-compose.yml",AccessControlData:new s.AccessControlFormData},e.state={Method:"editor",formValidationError:"",actionInProgress:!1,StackType:null},e.addEnvironmentVariable=function(){e.formValues.Env.push({name:"",value:""})},e.removeEnvironmentVariable=function(t){e.formValues.Env.splice(t,1)},e.deployStack=function(){var n=e.formValues.Name,a=e.state.Method,s=e.formValues.AccessControlData,l=r.getUserDetails(),d=r.isAdmin();if("editor"!==a||""!==e.formValues.StackFileContent){if(function(t,n){var a;return e.state.formValidationError="",!(a=o.validateAccessControl(t,n))||(e.state.formValidationError=a,!1)}(s,d)){var u=m;2===e.state.StackType&&(u=g),e.state.actionInProgress=!0,u(n,a).then((function(e){e.data&&(e=e.data);var t=l.ID,n=e.ResourceControl;return c.applyResourceControl(t,s,n)})).then((function(){i.success(" deployed"),t.go("docker.stacks")})).catch((function(e){i.error("Deployment error",e,"Unable to deploy stack")})).finally((function(){e.state.actionInProgress=!1}))}}else e.state.formValidationError="Stack file content must not be empty"},e.editorUpdate=function(t){e.formValues.StackFileContent=t.getValue()},e.onChangeTemplate=function(){var t=u(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.selectedTemplate=n,t.next=4,p.customTemplateFile(n.Id);case 4:e.formValues.StackFileContent=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),i.error("",t.t0,"Unable to retrieve Custom Template file");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),function(){f.apply(this,arguments)}()}])},function(e,t){function n(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function a(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var s=e.apply(t,a);function o(e){n(s,r,i,o,l,"next",e)}function l(e){n(s,r,i,o,l,"throw",e)}o(void 0)}))}}angular.module("portainer.app").controller("StackController",["$async","$q","$scope","$state","$transition$","StackService","NodeService","ServiceService","TaskService","ContainerService","ServiceHelper","TaskHelper","Notifications","FormHelper","EndpointProvider","EndpointService","GroupService","ModalService",function(e,t,n,r,i,s,o,l,c,d,u,p,m,g,f,h,v,b){function y(){return x.apply(this,arguments)}function x(){return(x=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.confirmAsync({title:"?",message:" ?",buttons:{confirm:{label:"Stop",className:"btn-danger"}}});case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return n.state.actionInProgress=!0,e.prev=6,e.next=9,s.stop(n.stack.Id);case 9:r.reload(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),m.error("",e.t0,"Unable to stop stack");case 15:n.state.actionInProgress=!1;case 16:case"end":return e.stop()}}),e,null,[[6,12]])})))).apply(this,arguments)}function w(){return k.apply(this,arguments)}function k(){return(k=a(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.state.actionInProgress=!0,t=n.stack.Id,e.prev=2,e.next=5,s.start(t);case 5:r.reload(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),m.error("",e.t0,"Unable to start stack");case 11:n.state.actionInProgress=!1;case 12:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function S(e,n){var a={label:["com.docker.stack.namespace="+e]};return t.all({services:l.services(a),tasks:c.tasks(a),containers:n?d.containers(1):[],nodes:o.nodes()})}function C(e,t){var a=e.services,r=e.tasks;if(t)for(var i=e.containers,s=0;s<r.length;s++){var o=r[s];p.associateContainerToTask(o,i)}for(var l=0;l<a.length;l++){var c=a[l];u.associateTasksToService(c,r)}n.nodes=e.nodes,n.tasks=r,n.services=a}function $(e){var n={label:["com.docker.compose.project="+e]};return t.all({containers:d.containers(1,n)})}function A(e){n.containers=e.containers}function P(e){var t=i.params().type;!t||"1"!==t&&"2"!==t?m.error("",null,"Invalid type URL parameter."):"1"===t?function(e){var t=n.applicationState.endpoint.mode.agentProxy;S(e,t).then((function(e){C(e,t)})).catch((function(e){m.error("",e,"Unable to retrieve stack details")}))}(e):function(e){$(e).then((function(e){A(e)})).catch((function(e){m.error("",e,"Unable to retrieve stack details")}))}(e)}n.state={actionInProgress:!1,migrationInProgress:!1,externalStack:!1,showEditorTab:!1},n.formValues={Prune:!1,Endpoint:null},n.duplicateStack=function(e,t){var a=n.stack,i=g.removeInvalidEnvVars(a.Env);return f.setEndpointID(t),s.duplicateStack(e,n.stackFileContent,i,t,a.Type).then((function(){m.success(" duplicated"),r.go("docker.stacks",{},{reload:!0}),f.setEndpointID(a.EndpointId)})).catch((function(e){m.error("",e,"Unable to duplicate stack")}))},n.showEditor=function(){n.state.showEditorTab=!0},n.migrateStack=function(e,a){return t((function(t){b.confirm({title:"?",message:".",buttons:{confirm:{label:"Migrate",className:"btn-danger"}},callback:function(i){return i?t(function(e,t){var a=n.stack,i=t,o=s.migrateSwarmStack;2===a.Type&&(o=s.migrateComposeStack);var l=f.endpointID();0===a.EndpointId&&(a.EndpointId=l);return n.state.migrationInProgress=!0,o(a,i,e).then((function(){m.success(" migrated",a.Name),r.go("docker.stacks",{},{reload:!0})})).catch((function(e){m.error("",e,"Unable to migrate stack")})).finally((function(){n.state.migrationInProgress=!1}))}(e,a)):t()}})}))},n.removeStack=function(){b.confirmDeletion("",(function(e){var t,a;e&&(t=+r.params.endpointId,a=n.stack,s.remove(a,i.params().external,t).then((function(){m.success("",a.Name),r.go("docker.stacks")})).catch((function(e){m.error("",e," stack "+a.Name)})))}))},n.deployStack=function(){var e=n.stackFileContent,t=g.removeInvalidEnvVars(n.stack.Env),a=n.formValues.Prune,i=n.stack,o=f.endpointID();0===i.EndpointId&&(i.EndpointId=o),n.state.actionInProgress=!0,s.updateStack(i,e,t,a).then((function(){m.success(" deployed"),r.reload()})).catch((function(e){m.error("",e,"Unable to create stack")})).finally((function(){n.state.actionInProgress=!1}))},n.addEnvironmentVariable=function(){n.stack.Env.push({name:"",value:""})},n.removeEnvironmentVariable=function(e){n.stack.Env.splice(e,1)},n.editorUpdate=function(e){n.stackFileContent=e.getValue()},n.stopStack=function(){return e(y)},n.startStack=function(){return e(w)},function(){var e=i.params().name;n.stackName=e;var a,r,o=i.params().external;if(n.currentEndpointId=f.endpointID(),"true"===o)n.state.externalStack=!0,P(e);else{var l=i.params().id;a=l,r=n.applicationState.endpoint.mode.agentProxy,h.endpoints().then((function(e){n.endpoints=e.value})).catch((function(e){m.error("",e,"Unable to retrieve endpoints")})),t.all({stack:s.stack(a),groups:v.groups()}).then((function(e){var i=e.stack;n.groups=e.groups,n.stack=i;var o=Promise.resolve({});return 1===i.Status&&(o=1===i.Type?S(i.Name,r):$(i.Name)),t.all({stackFile:s.getStackFile(a),resources:o})})).then((function(e){n.stackFileContent=e.stackFile,1===n.stack.Status&&(1===n.stack.Type?C(e.resources,r):A(e.resources))})).catch((function(e){m.error("",e,"Unable to retrieve stack details")}))}}()}])},function(e,t){function n(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function a(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var s=e.apply(t,a);function o(e){n(s,r,i,o,l,"next",e)}function l(e){n(s,r,i,o,l,"throw",e)}o(void 0)}))}}function r(e,t,n,r,i,s,o,l){function c(){var t=e.applicationState.endpoint.mode,a=s.endpointID();r.stacks(!0,"DOCKER_SWARM_MODE"===t.provider&&"MANAGER"===t.role,a).then((function(t){var n=t;e.stacks=n,e.offlineMode=s.offlineMode()})).catch((function(t){e.stacks=[],n.error("",t,"Unable to retrieve stacks")}))}function d(){return u.apply(this,arguments)}function u(){return(u=a(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.getState().application,e.abrupt("return",t.allowStackManagementForRegularUsers||o.isAdmin());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=a(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(),t.next=3,d();case 3:e.createEnabled=t.sent;case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}e.removeAction=function(a){i.confirmDeletion("",(function(i){var o,l,c;i&&(o=a,l=s.endpointID(),c=o.length,angular.forEach(o,(function(a){r.remove(a,a.External,l).then((function(){n.success("",a.Name);var t=e.stacks.indexOf(a);e.stacks.splice(t,1)})).catch((function(e){n.error("",e," stack "+a.Name)})).finally((function(){0==--c&&t.reload()}))})))}))},e.offlineMode=!1,e.createEnabled=!1,e.getStacks=c,function(){p.apply(this,arguments)}()}r.$inject=["$scope","$state","Notifications","StackService","ModalService","EndpointProvider","Authentication","StateManager"],angular.module("portainer.app").controller("StacksController",r)},function(e,t,n){"use strict";n.r(t);var a=n(22),r=n(1),i=n.n(r);function s(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function l(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){l(i,a,r,s,o,"next",e)}function o(e){l(i,a,r,s,o,"throw",e)}s(void 0)}))}}function d(e,t,n,r,i){function o(e){return l.apply(this,arguments)}function l(){return(l=c(regeneratorRuntime.mark((function n(o){var l,c,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:l=s(o),n.prev=1,l.s();case 3:if((c=l.n()).done){n.next=17;break}return d=c.value,n.prev=5,n.next=8,r.deleteTag(d.Id);case 8:i.success("Tag successfully",d.Name),Object(a.a)(e.tags,d),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(5),i.error("",n.t0," tag");case 15:n.next=3;break;case 17:n.next=22;break;case 19:n.prev=19,n.t1=n.catch(1),l.e(n.t1);case 22:return n.prev=22,l.f(),n.finish(22);case 25:t.reload();case 26:case"end":return n.stop()}}),n,null,[[1,19,22,25],[5,12]])})))).apply(this,arguments)}e.state={actionInProgress:!1},e.formValues={Name:""},e.checkNameValidity=function(t){for(var n=!0,a=0;a<e.tags.length;a++)if(e.formValues.Name===e.tags[a].Name){n=!1;break}t.name.$setValidity("validName",n)},e.removeAction=function(e){return n(o,e)},e.createTag=function(){var n=e.formValues.Name;r.createTag(n).then((function(){i.success("Tag successfully",n),t.reload()})).catch((function(e){i.error("",e,"")}))},r.tags().then((function(t){e.tags=t})).catch((function(t){i.error("",t,"Unable to retrieve tags"),e.tags=[]}))}d.$inject=["$scope","$state","$async","TagService","Notifications"],i.a.module("portainer.app").controller("TagsController",d)},function(e,t){angular.module("portainer.app").controller("TeamController",["$q","$scope","$state","$transition$","TeamService","UserService","TeamMembershipService","ModalService","Notifications","PaginationService","Authentication",function(e,t,n,a,r,i,s,o,l,c,d){function u(e,t){for(var n=0,a=t.length;n<a;n++)if(t[n].Id===e)return void t.splice(n,1)}t.state={pagination_count_users:c.getPaginationLimit("team_available_users"),pagination_count_members:c.getPaginationLimit("team_members")},t.sortTypeUsers="Username",t.sortReverseUsers=!0,t.users=[],t.teamMembers=[],t.leaderCount=0,t.orderUsers=function(e){t.sortReverseUsers=t.sortTypeUsers===e&&!t.sortReverseUsers,t.sortTypeUsers=e},t.changePaginationCountUsers=function(){c.setPaginationLimit("team_available_users",t.state.pagination_count_users)},t.sortTypeGroupMembers="TeamRole",t.sortReverseGroupMembers=!1,t.orderGroupMembers=function(e){t.sortReverseGroupMembers=t.sortTypeGroupMembers===e&&!t.sortReverseGroupMembers,t.sortTypeGroupMembers=e},t.changePaginationCountGroupMembers=function(){c.setPaginationLimit("team_members",t.state.pagination_count_members)},t.deleteTeam=function(){o.confirmDeletion("Do you want to delete this team? Users in this team will not be deleted.",(function(e){e&&r.deleteTeam(t.team.Id).then((function(){l.success("Team successfully deleted",t.team.Name),n.go("portainer.teams")})).catch((function(e){l.error("",e," team")}))}))},t.promoteToLeader=function(e){s.updateMembership(e.MembershipId,e.Id,t.team.Id,1).then((function(){t.leaderCount++,e.TeamRole="Leader",l.success("User is now team leader",e.Username)})).catch((function(e){l.error("",e,"Unable to update user role")}))},t.demoteToMember=function(e){s.updateMembership(e.MembershipId,e.Id,t.team.Id,2).then((function(){e.TeamRole="Member",t.leaderCount--,l.success("User is now team member",e.Username)})).catch((function(e){l.error("",e,"Unable to update user role")}))},t.addAllUsers=function(){var n=[];angular.forEach(t.users,(function(e){n.push(s.createMembership(e.Id,t.team.Id,2))})),e.all(n).then((function(e){for(var n=t.users,a=0;a<n.length;a++){var r=n[a];r.MembershipId=e[a].Id,r.TeamRole="Member"}t.teamMembers=t.teamMembers.concat(n),t.users=[],l.success("All users successfully added")})).catch((function(e){l.error("",e,"Unable to update team members")}))},t.addUser=function(e){s.createMembership(e.Id,t.team.Id,2).then((function(n){u(e.Id,t.users),e.TeamRole="Member",e.MembershipId=n.Id,t.teamMembers.push(e),l.success("User added to team",e.Username)})).catch((function(e){l.error("",e,"Unable to update team members")}))},t.removeAllUsers=function(){var n=[];angular.forEach(t.teamMembers,(function(e){n.push(s.deleteMembership(e.MembershipId))})),e.all(n).then((function(){t.users=t.users.concat(t.teamMembers),t.teamMembers=[],t.leaderCount=0,l.success("")})).catch((function(e){l.error("",e,"Unable to update team members")}))},t.removeUser=function(e){s.deleteMembership(e.MembershipId).then((function(){u(e.Id,t.teamMembers),"Leader"===e.TeamRole&&t.leaderCount--,t.users.push(e),l.success("User removed from team",e.Username)})).catch((function(e){l.error("",e,"Unable to update team members")}))},t.isAdmin=d.isAdmin(),e.all({team:r.team(a.params().id),users:i.users(!1),memberships:r.userMemberships(a.params().id)}).then((function(e){var n=e.users;t.team=e.team,function(e,n){for(var a=0;a<e.length;a++){for(var r=e[a],i=!1,s=0;s<n.length;s++){var o=n[s];if(r.Id===o.UserId){i=!0,1===o.Role?(r.TeamRole="Leader",t.leaderCount++):r.TeamRole="Member",r.MembershipId=o.Id,t.teamMembers.push(r);break}}i||t.users.push(r)}}(n,e.memberships)})).catch((function(e){l.error("",e,"Unable to retrieve team details")}))}])},function(e,t,n){"use strict";n.r(t);var a=n(64);angular.module("portainer.app").controller("TeamsController",["$q","$scope","$state","TeamService","UserService","ModalService","Notifications","Authentication",function(e,t,n,r,i,s,o,l){var c,d;t.state={actionInProgress:!1},t.formValues={Name:"",Leaders:[]},t.checkNameValidity=function(e){for(var n=!0,a=0;a<t.teams.length;a++)if(t.formValues.Name===t.teams[a].Name){n=!1;break}e.team_name.$setValidity("validName",n)},t.addTeam=function(){var e=t.formValues.Name,a=[];angular.forEach(t.formValues.Leaders,(function(e){a.push(e.Id)})),t.state.actionInProgress=!0,r.createTeam(e,a).then((function(){o.success("Team successfully",e),n.reload()})).catch((function(e){o.error("",e,"Unable to create team")})).finally((function(){t.state.actionInProgress=!1}))},t.removeAction=function(e){s.confirmDeletion("Do you want to delete the selected team(s)? Users in the team(s) will not be deleted.",(function(a){a&&function(e){var a=e.length;angular.forEach(e,(function(e){r.deleteTeam(e.Id).then((function(){o.success("Team successfully",e.Name);var n=t.teams.indexOf(e);t.teams.splice(n,1)})).catch((function(e){o.error("",e," team")})).finally((function(){0===--a&&n.reload()}))}))}(e)}))},c=l.getUserDetails(),d=l.isAdmin(),t.isAdmin=d,e.all({users:i.users(!1),teams:d?r.teams():i.userLeadingTeams(c.ID)}).then((function(e){var n=e.teams;t.teams=n,t.users=Object(a.a)(e.users,"Username","asc")})).catch((function(e){t.teams=[],t.users=[],o.error("",e,"Unable to retrieve teams")}))}])},function(e,t,n){"use strict";n.r(t);var a=n(64),r=n(4),i=n(2),s=n(5),o=n(41);angular.module("portainer.app").controller("TemplatesController",["$scope","$q","$state","$anchorScroll","ContainerService","ImageService","NetworkService","TemplateService","TemplateHelper","VolumeService","Notifications","ResourceControlService","Authentication","FormValidator","SettingsService","StackService",function(e,t,n,l,c,d,u,p,m,g,f,h,v,b,y,x){function w(t,a,r){var i=function(t){var n=e.formValues.network,a=e.formValues.name;return p.createTemplateConfiguration(t,a,n)}(t),s=m.determineRequiredGeneratedVolumeCount(t.Volumes),o=[];g.createXAutoGeneratedLocalVolumes(s).then((function(e){return angular.forEach(e,(function(e){var t=e.Id;o.push(t)})),p.updateContainerConfigurationWithVolumes(i,t,e),d.pullImage(t.RegistryModel,!0)})).then((function(){return c.createAndStartContainer(i)})).then((function(e){var t=e.Portainer.ResourceControl;return h.applyResourceControl(a,r,t,o)})).then((function(){f.success(""),n.go("docker.containers",{},{reload:!0})})).catch((function(e){f.error("",e,e.msg)})).finally((function(){e.state.actionInProgress=!1}))}e.state={selectedTemplate:null,showAdvancedOptions:!1,formValidationError:"",actionInProgress:!1},e.formValues={network:"",name:"",AccessControlData:new o.AccessControlFormData},e.addVolume=function(){e.state.selectedTemplate.Volumes.push({containerPath:"",bind:"",readonly:!1,type:"auto"})},e.removeVolume=function(t){e.state.selectedTemplate.Volumes.splice(t,1)},e.addPortBinding=function(){e.state.selectedTemplate.Ports.push({hostPort:"",containerPort:"",protocol:"tcp"})},e.removePortBinding=function(t){e.state.selectedTemplate.Ports.splice(t,1)},e.addExtraHost=function(){e.state.selectedTemplate.Hosts.push("")},e.removeExtraHost=function(t){e.state.selectedTemplate.Hosts.splice(t,1)},e.addLabel=function(){e.state.selectedTemplate.Labels.push({name:"",value:""})},e.removeLabel=function(t){e.state.selectedTemplate.Labels.splice(t,1)},e.createTemplate=function(){var t=v.getUserDetails().ID,a=e.formValues.AccessControlData;if(function(t,n){var a;return e.state.formValidationError="",!(a=b.validateAccessControl(t,n))||(e.state.formValidationError=a,!1)}(a,e.isAdmin)){var r=e.state.selectedTemplate;e.state.actionInProgress=!0,2===r.Type?function(t,a,r){var o=e.formValues.name,l=Object(s.a)(Object(i.a)(t.Env,(function(e){return{name:e.name,value:e.preset||!e.value?e.default:e.value}})),(function(e){return e.value&&e.name})),c={RepositoryURL:t.Repository.url,ComposeFilePathInRepository:t.Repository.stackfile},d=+n.params.endpointId;x.createSwarmStackFromGitRepository(o,c,l,d).then((function(e){var t=e.ResourceControl;return h.applyResourceControl(a,r,t)})).then((function(){f.success(" deployed"),n.go("docker.stacks")})).catch((function(e){f.error("Deployment error",e)})).finally((function(){e.state.actionInProgress=!1}))}(r,t,a):3===r.Type?function(t,a,r){for(var i=e.formValues.name,s=0;s<t.Env.length;s++){var o=t.Env[s];o.preset&&(o.value=o.default)}var l={RepositoryURL:t.Repository.url,ComposeFilePathInRepository:t.Repository.stackfile},c=+n.params.endpointId;x.createComposeStackFromGitRepository(i,l,t.Env,c).then((function(e){var t=e.ResourceControl;return h.applyResourceControl(a,r,t)})).then((function(){f.success(" deployed"),n.go("docker.stacks")})).catch((function(e){f.error("Deployment error",e)})).finally((function(){e.state.actionInProgress=!1}))}(r,t,a):w(r,t,a)}},e.unselectTemplate=function(t){t.Selected=!1,e.state.selectedTemplate=null},e.selectTemplate=function(t){e.state.selectedTemplate&&e.unselectTemplate(e.state.selectedTemplate),t.Selected=!0,t.Network?e.formValues.network=Object(r.a)(e.availableNetworks,(function(e){return e.Name===t.Network})):e.formValues.network=Object(r.a)(e.availableNetworks,(function(e){return"bridge"===e.Name})),e.formValues.name=t.Name?t.Name:"",e.state.selectedTemplate=t,l("view-top")},function(){e.isAdmin=v.isAdmin();var n=e.applicationState.endpoint.mode,r=e.applicationState.endpoint.apiVersion;t.all({templates:p.templates(),volumes:g.getVolumes(),networks:u.networks("DOCKER_STANDALONE"===n.provider||"DOCKER_SWARM_MODE"===n.provider,!1,"DOCKER_SWARM_MODE"===n.provider&&r>=1.25),settings:y.publicSettings()}).then((function(t){var n=t.templates;e.templates=n,e.availableVolumes=Object(a.a)(t.volumes.Volumes,[function(e){return e.Name.toLowerCase()}],["asc"]);var r=t.networks;e.availableNetworks=r;var i=t.settings;e.allowBindMounts=i.AllowBindMountsForRegularUsers})).catch((function(t){e.templates=[],f.error("",t,"An error occured during apps initialization.")}))}()}])},function(e,t){function n(e,t,n,a,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function a(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var s=e.apply(t,a);function o(e){n(s,r,i,o,l,"next",e)}function l(e){n(s,r,i,o,l,"throw",e)}o(void 0)}))}}angular.module("portainer.app").controller("UserController",["$q","$scope","$state","$transition$","UserService","ModalService","Notifications","SettingsService","Authentication",function(e,t,n,r,i,s,o,l,c){t.state={updatePasswordError:""},t.formValues={username:"",newPassword:"",confirmPassword:"",Administrator:!1},t.deleteUser=function(){s.confirmDeletion("Do you want to remove this user? This user will not be able to login into Portainer anymore.",(function(e){e&&i.deleteUser(t.user.Id).then((function(){o.success("User successfully deleted",t.user.Username),n.go("portainer.users")})).catch((function(e){o.error("",e," user")}))}))},t.updateUser=a(regeneratorRuntime.mark((function e(){var a,r,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.formValues.Administrator?1:2,r=t.user.Username,l=t.formValues.username,c=Promise.resolve(!0),l!=r&&(c=new Promise((function(e){return s.confirm({title:"?",message:"  ".concat(r," to ").concat(l,"?"),buttons:{confirm:{label:"Update",className:"btn-primary"}},callback:e})}))),e.next=7,c;case 7:if(e.sent){e.next=10;break}return e.abrupt("return");case 10:i.updateUser(t.user.Id,{role:a,username:l}).then((function(){o.success("User successfully updated"),n.reload()})).catch((function(e){o.error("",e,"Unable to update user permissions")}));case 11:case"end":return e.stop()}}),e)}))),t.updatePassword=function(){i.updateUser(t.user.Id,{password:t.formValues.newPassword}).then((function(){o.success("Password successfully updated"),n.reload()})).catch((function(e){o.error("",e,"Unable to update user password")}))},t.isSubmitEnabled=function(){var e=t.user,n=t.formValues;return e&&(e.Username!==n.username||n.Administrator&&1!==e.Role||!n.Administrator&&1===e.Role)},t.isDeleteDisabled=function(){var e=t.user;return e&&1===e.Id},t.isAdmin=c.isAdmin(),e.all({user:i.user(r.params().id),settings:l.publicSettings()}).then((function(e){var n=e.user;t.user=n,t.formValues.Administrator=1===n.Role,t.formValues.username=n.Username,t.AuthenticationMethod=e.settings.AuthenticationMethod})).catch((function(e){o.error("",e,"Unable to retrieve user information")}))}])},function(e,t,n){"use strict";n.r(t);var a=n(64);angular.module("portainer.app").controller("UsersController",["$q","$scope","$state","UserService","TeamService","TeamMembershipService","ModalService","Notifications","Authentication","SettingsService",function(e,t,n,r,i,s,o,l,c,d){var u,p;t.state={userCreationError:"",validUsername:!1,actionInProgress:!1},t.formValues={Username:"",Password:"",ConfirmPassword:"",Administrator:!1,Teams:[]},t.checkUsernameValidity=function(){for(var e=!0,n=0;n<t.users.length;n++)if(t.formValues.Username===t.users[n].Username){e=!1;break}t.state.validUsername=e,t.state.userCreationError=e?"":"Username already taken"},t.addUser=function(){t.state.actionInProgress=!0,t.state.userCreationError="";var e=t.formValues.Username,a=t.formValues.Password,i=t.formValues.Administrator?1:2,s=[];angular.forEach(t.formValues.Teams,(function(e){s.push(e.Id)})),r.createUser(e,a,i,s).then((function(){l.success("User successfully",e),n.reload()})).catch((function(e){l.error("",e,"Unable to create user")})).finally((function(){t.state.actionInProgress=!1}))},t.removeAction=function(e){o.confirmDeletion("Do you want to remove the selected users? They will not be able to login into Portainer anymore.",(function(a){a&&function(e){var a=e.length;angular.forEach(e,(function(e){r.deleteUser(e.Id).then((function(){l.success("User successfully",e.Username);var n=t.users.indexOf(e);t.users.splice(n,1)})).catch((function(e){l.error("",e," user")})).finally((function(){0===--a&&n.reload()}))}))}(e)}))},u=c.getUserDetails(),p=c.isAdmin(),t.isAdmin=p,e.all({users:r.users(!0),teams:p?i.teams():r.userLeadingTeams(u.ID),memberships:s.memberships(),settings:d.publicSettings()}).then((function(e){var n=e.users;!function(e,t){for(var n=0;n<e.length;n++){var a=e[n];a.isTeamLeader=!1;for(var r=0;r<t.length;r++){var i=t[r];if(a.Id===i.UserId&&1===i.Role){a.isTeamLeader=!0,a.RoleName="team leader";break}}}}(n,e.memberships),t.users=n,t.teams=Object(a.a)(e.teams,"Name","asc"),t.AuthenticationMethod=e.settings.AuthenticationMethod})).catch((function(e){l.error("",e,"Unable to retrieve users and teams"),t.users=[],t.teams=[]}))}])},function(e,t,n){"use strict";n.r(t);n(1736),n(1737),n(1738),n(1739),n(1740),n(1741),n(1742),n(1743),n(1744),n(1745),n(1746),n(1747),n(1748),n(1749),n(1750);var a=n(1),r=n.n(a);n(12),n(1751),n(1773),n(1775),n(1777),n(1779),n(1781),n(1783),n(1785),n(1787),n(1789),n(1790),n(1792),n(1793),n(1794),n(1795),n(1796),n(1797),n(1798),n(1800),n(1801),n(1802);window.angular=r.a}]);